From djsamperi at gmail.com  Sat Oct  1 18:11:27 2011
From: djsamperi at gmail.com (Dominick Samperi)
Date: Sat, 1 Oct 2011 12:11:27 -0400
Subject: [Rd] Increase transparency: suggestion on how to avoid
 namespaces and/or unnecessary overwrites of existing functions
In-Reply-To: <4E53F02F.106@googlemail.com>
References: <4E53F02F.106@googlemail.com>
Message-ID: <CADUbQ5hPthEA+6u5JScUdMbua9dZS7jomKAKb0SuyEbuy85W6g@mail.gmail.com>

On Tue, Aug 23, 2011 at 2:23 PM, Janko Thyson
<janko.thyson.rstuff at googlemail.com> wrote:
> aDear list,
>
> I'm aware of the fact that I posted on something related a while ago, but I
> just can't sweat this off and would like to ask your for an opinion:
>
> The problem:
> Namespaces are great, but they don't resolve certain conflicts regarding
> name clashes. There are more and more people out there trying to come up
> with their own R packages, which is great also! Yet, it becomes more and
> more likely that programmers will choose identical names for their exported
> functions and/or that they add functionality to existing function (i.e.
> overwriting existing functions).
> The whole process of which packages overwrite which functions is somewhat
> obscure and in addition depends on their order in the search path. On the
> other hand, it is not possible to use "namespace" functionality (i.e.
> 'namespace::fun()'; also less efficient than direct call; see illustration
> below) during early stages of the development process (i.e. the package is
> not finished yet) as there is no namespace available yet.
>
> I know of at least two cases where such overwrites (I think it's called
> masking, right?) led to some confusion at our chair:
> 1) loading package forecast overwrites certain functions in stats which made
> some code refactoring necessary
> 2) loading package 'R.utils' followed by package 'roxygen' overwrites
> 'parse.default()' which results in errors for something like
> 'eval(parse(text="a <- 1"))' ; see illustration below)
> And I'm sure the community could come up with lots more of such scenarios.
>
> Suggestions:
> 1) In order to avoid name clashes/unintended overwrites, how about switching
> to a coding paradigm that explicitly (and automatically) includes a
> package's name in all its functions' names once code is turned into a real
> package? E.g., getting used to "preemptively" type 'package_fun()' or
> 'package.fun()' instead of just 'fun()'. Better to be save than sorry,
> right? This could be realized pretty easily (see example below) and, IMHO,
> would significantly increase transparency.
> 2) In order to avoid intended (but for the user often pretty obscure)
> overwrites of existing functions, we could use the same mechanism together
> with the "rule": just don't provide any functions that overwrite existing
> ones, rather prepend your version of that function with your package name
> and leave it up to the user which version he wants to call.

Experts from the Lisp-Stats community have added a number
of functions to R that were inspired by Lisp, but one feature that apparently
was not added is the shadowing feature of Common Lisp. Here the default
behavior is not to permit packages to import conflicting names unless
explicit shadowing directives are specified.

Arguably a package is not intended to be used like a callable library,
yet this is the way they are often used in the R context. This kind of
shadowing tool might help to make this practice safer, at the expense
of requiring the developer to specify explicit shadowing directives.

Dominick

> At the moment, all of this is probably not that big of a deal yet, but my
> suggestion has more of a mid-term/long-term character.
>
> Below you find a little illustration. I'm probably asking too much, but it'd
> be great if we could get a little discussion going on how to improve the way
> of loading packages!
>
> Best regards and thanks for R and all it's packages!
> Janko
>
> ################################################################################
> # PROOF OF CONCEPT
> ################################################################################
>
> # 1) PROBLEM
> # IMHO, with the number of packages submitted to CRAN constantly increasing,
> # over time we will be likely to see problems with respect to name clashes.
> # The main reasons I see for this are the following:
> # a) package developers picking identical names for their exported functions
> # b) package developers overwriting base functions in order to add
> functionality
> # ? ?to existing functions
> # c) ...
> #
> # This can create scenarios in which the user might not exactly know that
> # he/she is using a 'modified' version of a specific function. More so, the
> user
> # needs to carefully read the description of each new package he plans
> # to use in order to find out which functions are exported and which
> existing
> # functions might be overwritten. This in turn might imply that the user's
> # existing code needs to be refactored (i.e. instead of using 'fun()' it
> # might now be necessary to type 'namespace::fun()' to be sure that the
> desired
> # function is called).
>
> # 2) SUGGESTED SOLUTION
> # That being said, why don't we switch to a 'preemptive' coding paradigm
> # where the default way of calling functions includes the specification of
> # its namespace? In principle, the functionality offered by
> 'namespace::fun()'
> # gets the job done.
> # BUT:
> # a) it is slower compared to the direct way of calling a function.
> # ? ?(see illustration below).
> # b) this option is not available througout the development process of a
> package
> # ? ?as there is no namespace yet and there's no way to emulate one. This in
> # ? ?turn means that even though a package developer would buy into strictly
> # ? ?using 'mypkg::fun()' throughout his package code, he can only do so at
> the
> # ? ?very final stage of the process RIGHT before turning his code into a
> # ? ?working package (when he's absolutely sure everything is working as
> planned).
> # ? ?For debugging he would need to go back to using 'fun()'. Pretty
> cumbersome.
>
> # So how about simply automatically prepending a given function's name with
> # the package's name for each package that is build (e.g. 'pkg.fun()' or
> # 'pkg_fun()')? In the end, this would just be a small change for new
> packages
> # without a significant decrease of performance and it could also be
> realized
> # at early stages of the development process (see illustration below).
>
> # 3) ILLUSTRATION
>
> # Example case where base function 'parse.default' is overwritten:
> parse(text="a <- 5") ? ?# Works
> require(R.utils)
> require(roxygen)
> parse(text="a <- 5") ? ?# Does not work anymore
>
> ################# START A NEW R SESSION BEFORE YOU CONTINUE
> ####################
>
> # Inefficiency of 'namespace::fun()':
> require(microbenchmark)
> res.a <- microbenchmark(eval(parse(text="a <- 5")))
> res.b <- microbenchmark(eval(base::parse(text="a <- 5")))
> median(res.a$time)/median(res.b$time)
>
> # Can be made up by explicit assignment:
> foo <- base::parse
> res.a <- microbenchmark(eval(parse(text="a <- 5")))
> res.b <- microbenchmark(eval(foo(text="a <- 5")))
> median(res.a$time)/median(res.b$time)
>
> # Automatically prepend function names:
> processNamespaces <- function(
> ? ?do.global=FALSE,
> ? ?do.verbose=FALSE,
> ? ?.delim.name="_",
> ? ?...
> ){
> ? ?srch.list.0 <- search()
> ? ?srch.list <- gsub("package:", "", srch.list.0)
> ? ?if(!do.global){
> ? ? ? ?assign(".NS", new.env(), envir=.GlobalEnv)
> ? ?}
> ? ?out <- lapply(1:length(srch.list), function(x.pkg){
> ? ? ? ?pkg <- srch.list[x.pkg]
>
> ? ? ? ?# SKIP LIST
> ? ? ? ?if(pkg %in% c(".GlobalEnv", "Autoloads")){
> ? ? ? ? ? ?return(NULL)
> ? ? ? ?}
> ? ? ? ?# /
>
> ? ? ? ?# TARGET ENVIR
> ? ? ? ?if(!do.global){
> ? ? ? ? ? ?# ADD PACKAGE TO .NS ENVIRONMENT
> ? ? ? ? ? ?envir <- eval(substitute(
> ? ? ? ? ? ? ? ?assign(PKG, new.env(), envir=.NS),
> ? ? ? ? ? ? ? ?list(PKG=pkg)
> ? ? ? ? ? ?))
> ? ? ? ? ? ?# /
> # ? ? ? ? ? ?envir <- get(pkg, envir=.NS, inherits=FALSE)
> ? ? ? ? ? ?envir.msg <- paste(".NS$", pkg, sep="")
> ? ? ? ?} else {
> ? ? ? ? ? ?envir <- .GlobalEnv
> ? ? ? ? ? ?envir.msg <- ".GlobalEnv"
> ? ? ? ?}
> ? ? ? ?# /
>
> ? ? ? ?# PROCESS FUNCTIONS
> ? ? ? ?cnt <- ls(pos=x.pkg)
> ? ? ? ?out <- unlist(sapply(cnt, function(x.cnt){
> ? ? ? ? ? ?value <- get(x.cnt, pos=x.pkg, inherits=FALSE)
> ? ? ? ? ? ?obj.mod <- paste(pkg, x.cnt, sep=.delim.name)
> ? ? ? ? ? ?if(!is.function(value)){
> ? ? ? ? ? ? ? ?return(NULL)
> ? ? ? ? ? ?}
> ? ? ? ? ? ?if(do.verbose){
> ? ? ? ? ? ? ? ?cat(paste("Assigning '", obj.mod, "' to '", envir.msg,
> ? ? ? ? ? ? ? ? ? ?"'", sep=""), sep="\n")
> ? ? ? ? ? ?}
> ? ? ? ? ? ?eval(substitute(
> ? ? ? ? ? ? ? ?assign(OBJ.MOD, value, envir=ENVIR),
> ? ? ? ? ? ? ? ?list(
> ? ? ? ? ? ? ? ? ? ?OBJ.MOD=obj.mod,
> ? ? ? ? ? ? ? ? ? ?ENVIR=envir
> ? ? ? ? ? ? ? ?)
> ? ? ? ? ? ?))
> ? ? ? ? ? ?return(obj.mod)
> ? ? ? ?}))
> ? ? ? ?names(out) <- NULL
> ? ? ? ?# /
> ? ? ? ?return(out)
> ? ?})
> ? ?names(out) <- srch.list
> ? ?return(out)
> }
>
> # +++++
>
> funs <- processNamespaces(do.verbose=TRUE)
> ls(.NS)
> ls(.NS$base)
> .NS$base$base_parse
>
> res.a <- microbenchmark(eval(parse(text="a <- 5")))
> res.b <- microbenchmark(eval(.NS$base$base_parse(text="a <- 5")))
> median(res.a$time)/median(res.b$time)
>
> #+++++
>
> funs <- processNamespaces(do.global=TRUE, do.verbose=TRUE)
> base_parse
>
> res.a <- microbenchmark(eval(parse(text="a <- 5")))
> res.b <- microbenchmark(eval(base_parse(text="a <- 5")))
> median(res.a$time)/median(res.b$time)
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From spencer.graves at prodsyse.com  Sat Oct  1 18:46:53 2011
From: spencer.graves at prodsyse.com (Spencer Graves)
Date: Sat, 01 Oct 2011 09:46:53 -0700
Subject: [Rd] Increase transparency: suggestion on how to avoid
 namespaces and/or unnecessary overwrites of existing functions
In-Reply-To: <CADUbQ5hPthEA+6u5JScUdMbua9dZS7jomKAKb0SuyEbuy85W6g@mail.gmail.com>
References: <4E53F02F.106@googlemail.com>
	<CADUbQ5hPthEA+6u5JScUdMbua9dZS7jomKAKb0SuyEbuy85W6g@mail.gmail.com>
Message-ID: <4E8743FD.4030406@prodsyse.com>

       When selecting names for functions and variables, I sometimes use 
library(sos) to look for existing conflicts with other packages.  This 
won't solve all the problems Janko mentioned, but it can help avoid 
some.  Spencer


On 10/1/2011 9:11 AM, Dominick Samperi wrote:
> On Tue, Aug 23, 2011 at 2:23 PM, Janko Thyson
> <janko.thyson.rstuff at googlemail.com>  wrote:
>> aDear list,
>>
>> I'm aware of the fact that I posted on something related a while ago, but I
>> just can't sweat this off and would like to ask your for an opinion:
>>
>> The problem:
>> Namespaces are great, but they don't resolve certain conflicts regarding
>> name clashes. There are more and more people out there trying to come up
>> with their own R packages, which is great also! Yet, it becomes more and
>> more likely that programmers will choose identical names for their exported
>> functions and/or that they add functionality to existing function (i.e.
>> overwriting existing functions).
>> The whole process of which packages overwrite which functions is somewhat
>> obscure and in addition depends on their order in the search path. On the
>> other hand, it is not possible to use "namespace" functionality (i.e.
>> 'namespace::fun()'; also less efficient than direct call; see illustration
>> below) during early stages of the development process (i.e. the package is
>> not finished yet) as there is no namespace available yet.
>>
>> I know of at least two cases where such overwrites (I think it's called
>> masking, right?) led to some confusion at our chair:
>> 1) loading package forecast overwrites certain functions in stats which made
>> some code refactoring necessary
>> 2) loading package 'R.utils' followed by package 'roxygen' overwrites
>> 'parse.default()' which results in errors for something like
>> 'eval(parse(text="a<- 1"))' ; see illustration below)
>> And I'm sure the community could come up with lots more of such scenarios.
>>
>> Suggestions:
>> 1) In order to avoid name clashes/unintended overwrites, how about switching
>> to a coding paradigm that explicitly (and automatically) includes a
>> package's name in all its functions' names once code is turned into a real
>> package? E.g., getting used to "preemptively" type 'package_fun()' or
>> 'package.fun()' instead of just 'fun()'. Better to be save than sorry,
>> right? This could be realized pretty easily (see example below) and, IMHO,
>> would significantly increase transparency.
>> 2) In order to avoid intended (but for the user often pretty obscure)
>> overwrites of existing functions, we could use the same mechanism together
>> with the "rule": just don't provide any functions that overwrite existing
>> ones, rather prepend your version of that function with your package name
>> and leave it up to the user which version he wants to call.
> Experts from the Lisp-Stats community have added a number
> of functions to R that were inspired by Lisp, but one feature that apparently
> was not added is the shadowing feature of Common Lisp. Here the default
> behavior is not to permit packages to import conflicting names unless
> explicit shadowing directives are specified.
>
> Arguably a package is not intended to be used like a callable library,
> yet this is the way they are often used in the R context. This kind of
> shadowing tool might help to make this practice safer, at the expense
> of requiring the developer to specify explicit shadowing directives.
>
> Dominick
>
>> At the moment, all of this is probably not that big of a deal yet, but my
>> suggestion has more of a mid-term/long-term character.
>>
>> Below you find a little illustration. I'm probably asking too much, but it'd
>> be great if we could get a little discussion going on how to improve the way
>> of loading packages!
>>
>> Best regards and thanks for R and all it's packages!
>> Janko
>>
>> ################################################################################
>> # PROOF OF CONCEPT
>> ################################################################################
>>
>> # 1) PROBLEM
>> # IMHO, with the number of packages submitted to CRAN constantly increasing,
>> # over time we will be likely to see problems with respect to name clashes.
>> # The main reasons I see for this are the following:
>> # a) package developers picking identical names for their exported functions
>> # b) package developers overwriting base functions in order to add
>> functionality
>> #    to existing functions
>> # c) ...
>> #
>> # This can create scenarios in which the user might not exactly know that
>> # he/she is using a 'modified' version of a specific function. More so, the
>> user
>> # needs to carefully read the description of each new package he plans
>> # to use in order to find out which functions are exported and which
>> existing
>> # functions might be overwritten. This in turn might imply that the user's
>> # existing code needs to be refactored (i.e. instead of using 'fun()' it
>> # might now be necessary to type 'namespace::fun()' to be sure that the
>> desired
>> # function is called).
>>
>> # 2) SUGGESTED SOLUTION
>> # That being said, why don't we switch to a 'preemptive' coding paradigm
>> # where the default way of calling functions includes the specification of
>> # its namespace? In principle, the functionality offered by
>> 'namespace::fun()'
>> # gets the job done.
>> # BUT:
>> # a) it is slower compared to the direct way of calling a function.
>> #    (see illustration below).
>> # b) this option is not available througout the development process of a
>> package
>> #    as there is no namespace yet and there's no way to emulate one. This in
>> #    turn means that even though a package developer would buy into strictly
>> #    using 'mypkg::fun()' throughout his package code, he can only do so at
>> the
>> #    very final stage of the process RIGHT before turning his code into a
>> #    working package (when he's absolutely sure everything is working as
>> planned).
>> #    For debugging he would need to go back to using 'fun()'. Pretty
>> cumbersome.
>>
>> # So how about simply automatically prepending a given function's name with
>> # the package's name for each package that is build (e.g. 'pkg.fun()' or
>> # 'pkg_fun()')? In the end, this would just be a small change for new
>> packages
>> # without a significant decrease of performance and it could also be
>> realized
>> # at early stages of the development process (see illustration below).
>>
>> # 3) ILLUSTRATION
>>
>> # Example case where base function 'parse.default' is overwritten:
>> parse(text="a<- 5")    # Works
>> require(R.utils)
>> require(roxygen)
>> parse(text="a<- 5")    # Does not work anymore
>>
>> ################# START A NEW R SESSION BEFORE YOU CONTINUE
>> ####################
>>
>> # Inefficiency of 'namespace::fun()':
>> require(microbenchmark)
>> res.a<- microbenchmark(eval(parse(text="a<- 5")))
>> res.b<- microbenchmark(eval(base::parse(text="a<- 5")))
>> median(res.a$time)/median(res.b$time)
>>
>> # Can be made up by explicit assignment:
>> foo<- base::parse
>> res.a<- microbenchmark(eval(parse(text="a<- 5")))
>> res.b<- microbenchmark(eval(foo(text="a<- 5")))
>> median(res.a$time)/median(res.b$time)
>>
>> # Automatically prepend function names:
>> processNamespaces<- function(
>>     do.global=FALSE,
>>     do.verbose=FALSE,
>>     .delim.name="_",
>>     ...
>> ){
>>     srch.list.0<- search()
>>     srch.list<- gsub("package:", "", srch.list.0)
>>     if(!do.global){
>>         assign(".NS", new.env(), envir=.GlobalEnv)
>>     }
>>     out<- lapply(1:length(srch.list), function(x.pkg){
>>         pkg<- srch.list[x.pkg]
>>
>>         # SKIP LIST
>>         if(pkg %in% c(".GlobalEnv", "Autoloads")){
>>             return(NULL)
>>         }
>>         # /
>>
>>         # TARGET ENVIR
>>         if(!do.global){
>>             # ADD PACKAGE TO .NS ENVIRONMENT
>>             envir<- eval(substitute(
>>                 assign(PKG, new.env(), envir=.NS),
>>                 list(PKG=pkg)
>>             ))
>>             # /
>> #            envir<- get(pkg, envir=.NS, inherits=FALSE)
>>             envir.msg<- paste(".NS$", pkg, sep="")
>>         } else {
>>             envir<- .GlobalEnv
>>             envir.msg<- ".GlobalEnv"
>>         }
>>         # /
>>
>>         # PROCESS FUNCTIONS
>>         cnt<- ls(pos=x.pkg)
>>         out<- unlist(sapply(cnt, function(x.cnt){
>>             value<- get(x.cnt, pos=x.pkg, inherits=FALSE)
>>             obj.mod<- paste(pkg, x.cnt, sep=.delim.name)
>>             if(!is.function(value)){
>>                 return(NULL)
>>             }
>>             if(do.verbose){
>>                 cat(paste("Assigning '", obj.mod, "' to '", envir.msg,
>>                     "'", sep=""), sep="\n")
>>             }
>>             eval(substitute(
>>                 assign(OBJ.MOD, value, envir=ENVIR),
>>                 list(
>>                     OBJ.MOD=obj.mod,
>>                     ENVIR=envir
>>                 )
>>             ))
>>             return(obj.mod)
>>         }))
>>         names(out)<- NULL
>>         # /
>>         return(out)
>>     })
>>     names(out)<- srch.list
>>     return(out)
>> }
>>
>> # +++++
>>
>> funs<- processNamespaces(do.verbose=TRUE)
>> ls(.NS)
>> ls(.NS$base)
>> .NS$base$base_parse
>>
>> res.a<- microbenchmark(eval(parse(text="a<- 5")))
>> res.b<- microbenchmark(eval(.NS$base$base_parse(text="a<- 5")))
>> median(res.a$time)/median(res.b$time)
>>
>> #+++++
>>
>> funs<- processNamespaces(do.global=TRUE, do.verbose=TRUE)
>> base_parse
>>
>> res.a<- microbenchmark(eval(parse(text="a<- 5")))
>> res.b<- microbenchmark(eval(base_parse(text="a<- 5")))
>> median(res.a$time)/median(res.b$time)
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>


From murdoch.duncan at gmail.com  Sat Oct  1 19:08:25 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 01 Oct 2011 13:08:25 -0400
Subject: [Rd] Increase transparency: suggestion on how to avoid
 namespaces and/or unnecessary overwrites of existing functions
In-Reply-To: <4E53F02F.106@googlemail.com>
References: <4E53F02F.106@googlemail.com>
Message-ID: <4E874909.7060308@gmail.com>

On 11-08-23 2:23 PM, Janko Thyson wrote:
> aDear list,
>
> I'm aware of the fact that I posted on something related a while ago,
> but I just can't sweat this off and would like to ask your for an opinion:
>
> The problem:
> Namespaces are great, but they don't resolve certain conflicts regarding
> name clashes. There are more and more people out there trying to come up
> with their own R packages, which is great also! Yet, it becomes more and
> more likely that programmers will choose identical names for their
> exported functions and/or that they add functionality to existing
> function (i.e. overwriting existing functions).
> The whole process of which packages overwrite which functions is
> somewhat obscure and in addition depends on their order in the search
> path. On the other hand, it is not possible to use "namespace"
> functionality (i.e. 'namespace::fun()'; also less efficient than direct
> call; see illustration below) during early stages of the development
> process (i.e. the package is not finished yet) as there is no namespace
> available yet.
>

I agree there can be a problem, but I don't think it is necessarily as 
serious as you suggest.  Even though there are more and more packages 
available, most people will still use roughly the same number of them. 
Just because CRAN has thousands of packages doesn't mean I use all of 
them at the same time.


> I know of at least two cases where such overwrites (I think it's called
> masking, right?) led to some confusion at our chair:
> 1) loading package forecast overwrites certain functions in stats which
> made some code refactoring necessary

If your code had been in a package with a NAMESPACE, it would not have 
been affected by a user loading forecast.  (If you start importing it, 
then of course it could cause masking problems.)

You suggest above that users only put code into a package very late in 
the development process.  The solution is, don't do that.  Create a 
package early on, and use it through the majority of development time.

You can leave the choice of exports until late by exporting everything; 
you'll still get the benefit of the more controlled name search from the 
beginning.

You say you can't use "namespace::call()" until the namespace package 
has been written.  But why would you want to?  If the call is coming 
from the new package, objects in it will be used with first priority in 
resolving the call.  You only need the :: notation when there are 
ambiguities in calls to external packages.


> 2) loading package 'R.utils' followed by package 'roxygen' overwrites
> 'parse.default()' which results in errors for something like
> 'eval(parse(text="a<- 1"))' ; see illustration below)
> And I'm sure the community could come up with lots more of such scenarios.
>
> Suggestions:
> 1) In order to avoid name clashes/unintended overwrites, how about
> switching to a coding paradigm that explicitly (and automatically)
> includes a package's name in all its functions' names once code is
> turned into a real package? E.g., getting used to "preemptively" type
> 'package_fun()' or 'package.fun()' instead of just 'fun()'. Better to be
> save than sorry, right? This could be realized pretty easily (see
> example below) and, IMHO, would significantly increase transparency.

I think long names with consistent prefixes are harder to read than 
short descriptive names.  I think this would make code harder to read. 
For example, the first few lines of mean.default would change from

     if (!is.numeric(x) && !is.complex(x) && !is.logical(x)) {
         warning("argument is not numeric or logical: returning NA")
         return(NA_real_)
     }

to

     if (!base_is.numeric(x) && !base_is.complex(x) &&
	!base_is.logical(x)) {
         base_warning("argument is not numeric or logical: returning NA")
         return(base_NA_real_)
     }


> 2) In order to avoid intended (but for the user often pretty obscure)
> overwrites of existing functions, we could use the same mechanism
> together with the "rule": just don't provide any functions that
> overwrite existing ones, rather prepend your version of that function
> with your package name and leave it up to the user which version he
> wants to call.

That seems like good advice.

Duncan Murdoch


>
> At the moment, all of this is probably not that big of a deal yet, but
> my suggestion has more of a mid-term/long-term character.
>
> Below you find a little illustration. I'm probably asking too much, but
> it'd be great if we could get a little discussion going on how to
> improve the way of loading packages!
>
> Best regards and thanks for R and all it's packages!
> Janko
>
> ################################################################################
> # PROOF OF CONCEPT
> ################################################################################
>
> # 1) PROBLEM
> # IMHO, with the number of packages submitted to CRAN constantly increasing,
> # over time we will be likely to see problems with respect to name clashes.
> # The main reasons I see for this are the following:
> # a) package developers picking identical names for their exported functions
> # b) package developers overwriting base functions in order to add
> functionality
> #    to existing functions
> # c) ...
> #
> # This can create scenarios in which the user might not exactly know that
> # he/she is using a 'modified' version of a specific function. More so,
> the user
> # needs to carefully read the description of each new package he plans
> # to use in order to find out which functions are exported and which
> existing
> # functions might be overwritten. This in turn might imply that the user's
> # existing code needs to be refactored (i.e. instead of using 'fun()' it
> # might now be necessary to type 'namespace::fun()' to be sure that the
> desired
> # function is called).
>
> # 2) SUGGESTED SOLUTION
> # That being said, why don't we switch to a 'preemptive' coding paradigm
> # where the default way of calling functions includes the specification of
> # its namespace? In principle, the functionality offered by
> 'namespace::fun()'
> # gets the job done.
> # BUT:
> # a) it is slower compared to the direct way of calling a function.
> #    (see illustration below).
> # b) this option is not available througout the development process of a
> package
> #    as there is no namespace yet and there's no way to emulate one.
> This in
> #    turn means that even though a package developer would buy into
> strictly
> #    using 'mypkg::fun()' throughout his package code, he can only do so
> at the
> #    very final stage of the process RIGHT before turning his code into a
> #    working package (when he's absolutely sure everything is working as
> planned).
> #    For debugging he would need to go back to using 'fun()'. Pretty
> cumbersome.
>
> # So how about simply automatically prepending a given function's name with
> # the package's name for each package that is build (e.g. 'pkg.fun()' or
> # 'pkg_fun()')? In the end, this would just be a small change for new
> packages
> # without a significant decrease of performance and it could also be
> realized
> # at early stages of the development process (see illustration below).
>
> # 3) ILLUSTRATION
>
> # Example case where base function 'parse.default' is overwritten:
> parse(text="a<- 5")    # Works
> require(R.utils)
> require(roxygen)
> parse(text="a<- 5")    # Does not work anymore
>
> ################# START A NEW R SESSION BEFORE YOU CONTINUE
> ####################
>
> # Inefficiency of 'namespace::fun()':
> require(microbenchmark)
> res.a<- microbenchmark(eval(parse(text="a<- 5")))
> res.b<- microbenchmark(eval(base::parse(text="a<- 5")))
> median(res.a$time)/median(res.b$time)
>
> # Can be made up by explicit assignment:
> foo<- base::parse
> res.a<- microbenchmark(eval(parse(text="a<- 5")))
> res.b<- microbenchmark(eval(foo(text="a<- 5")))
> median(res.a$time)/median(res.b$time)
>
> # Automatically prepend function names:
> processNamespaces<- function(
>       do.global=FALSE,
>       do.verbose=FALSE,
>       .delim.name="_",
>       ...
> ){
>       srch.list.0<- search()
>       srch.list<- gsub("package:", "", srch.list.0)
>       if(!do.global){
>           assign(".NS", new.env(), envir=.GlobalEnv)
>       }
>       out<- lapply(1:length(srch.list), function(x.pkg){
>           pkg<- srch.list[x.pkg]
>
>           # SKIP LIST
>           if(pkg %in% c(".GlobalEnv", "Autoloads")){
>               return(NULL)
>           }
>           # /
>
>           # TARGET ENVIR
>           if(!do.global){
>               # ADD PACKAGE TO .NS ENVIRONMENT
>               envir<- eval(substitute(
>                   assign(PKG, new.env(), envir=.NS),
>                   list(PKG=pkg)
>               ))
>               # /
> #            envir<- get(pkg, envir=.NS, inherits=FALSE)
>               envir.msg<- paste(".NS$", pkg, sep="")
>           } else {
>               envir<- .GlobalEnv
>               envir.msg<- ".GlobalEnv"
>           }
>           # /
>
>           # PROCESS FUNCTIONS
>           cnt<- ls(pos=x.pkg)
>           out<- unlist(sapply(cnt, function(x.cnt){
>               value<- get(x.cnt, pos=x.pkg, inherits=FALSE)
>               obj.mod<- paste(pkg, x.cnt, sep=.delim.name)
>               if(!is.function(value)){
>                   return(NULL)
>               }
>               if(do.verbose){
>                   cat(paste("Assigning '", obj.mod, "' to '", envir.msg,
>                       "'", sep=""), sep="\n")
>               }
>               eval(substitute(
>                   assign(OBJ.MOD, value, envir=ENVIR),
>                   list(
>                       OBJ.MOD=obj.mod,
>                       ENVIR=envir
>                   )
>               ))
>               return(obj.mod)
>           }))
>           names(out)<- NULL
>           # /
>           return(out)
>       })
>       names(out)<- srch.list
>       return(out)
> }
>
> # +++++
>
> funs<- processNamespaces(do.verbose=TRUE)
> ls(.NS)
> ls(.NS$base)
> .NS$base$base_parse
>
> res.a<- microbenchmark(eval(parse(text="a<- 5")))
> res.b<- microbenchmark(eval(.NS$base$base_parse(text="a<- 5")))
> median(res.a$time)/median(res.b$time)
>
> #+++++
>
> funs<- processNamespaces(do.global=TRUE, do.verbose=TRUE)
> base_parse
>
> res.a<- microbenchmark(eval(parse(text="a<- 5")))
> res.b<- microbenchmark(eval(base_parse(text="a<- 5")))
> median(res.a$time)/median(res.b$time)
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From djsamperi at gmail.com  Sat Oct  1 23:14:14 2011
From: djsamperi at gmail.com (Dominick Samperi)
Date: Sat, 1 Oct 2011 17:14:14 -0400
Subject: [Rd] Increase transparency: suggestion on how to avoid
 namespaces and/or unnecessary overwrites of existing functions
In-Reply-To: <4E874909.7060308@gmail.com>
References: <4E53F02F.106@googlemail.com>
	<4E874909.7060308@gmail.com>
Message-ID: <CADUbQ5giQwm7bS6Xx+tYwLVKOEvJ7yy66rUTJ_oimF0YUcJWPg@mail.gmail.com>

On Sat, Oct 1, 2011 at 1:08 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> On 11-08-23 2:23 PM, Janko Thyson wrote:
>>
>> aDear list,
>>
>> I'm aware of the fact that I posted on something related a while ago,
>> but I just can't sweat this off and would like to ask your for an opinion:
>>
>> The problem:
>> Namespaces are great, but they don't resolve certain conflicts regarding
>> name clashes. There are more and more people out there trying to come up
>> with their own R packages, which is great also! Yet, it becomes more and
>> more likely that programmers will choose identical names for their
>> exported functions and/or that they add functionality to existing
>> function (i.e. overwriting existing functions).
>> The whole process of which packages overwrite which functions is
>> somewhat obscure and in addition depends on their order in the search
>> path. On the other hand, it is not possible to use "namespace"
>> functionality (i.e. 'namespace::fun()'; also less efficient than direct
>> call; see illustration below) during early stages of the development
>> process (i.e. the package is not finished yet) as there is no namespace
>> available yet.
>>
>
> I agree there can be a problem, but I don't think it is necessarily as
> serious as you suggest. ?Even though there are more and more packages
> available, most people will still use roughly the same number of them. Just
> because CRAN has thousands of packages doesn't mean I use all of them at the
> same time.
>
>
>> I know of at least two cases where such overwrites (I think it's called
>> masking, right?) led to some confusion at our chair:
>> 1) loading package forecast overwrites certain functions in stats which
>> made some code refactoring necessary
>
> If your code had been in a package with a NAMESPACE, it would not have been
> affected by a user loading forecast. ?(If you start importing it, then of
> course it could cause masking problems.)
>
> You suggest above that users only put code into a package very late in the
> development process. ?The solution is, don't do that. ?Create a package
> early on, and use it through the majority of development time.
>
> You can leave the choice of exports until late by exporting everything;
> you'll still get the benefit of the more controlled name search from the
> beginning.
>
> You say you can't use "namespace::call()" until the namespace package has
> been written. ?But why would you want to? ?If the call is coming from the
> new package, objects in it will be used with first priority in resolving the
> call. ?You only need the :: notation when there are ambiguities in calls to
> external packages.
>
>
>> 2) loading package 'R.utils' followed by package 'roxygen' overwrites
>> 'parse.default()' which results in errors for something like
>> 'eval(parse(text="a<- 1"))' ; see illustration below)
>> And I'm sure the community could come up with lots more of such scenarios.
>>
>> Suggestions:
>> 1) In order to avoid name clashes/unintended overwrites, how about
>> switching to a coding paradigm that explicitly (and automatically)
>> includes a package's name in all its functions' names once code is
>> turned into a real package? E.g., getting used to "preemptively" type
>> 'package_fun()' or 'package.fun()' instead of just 'fun()'. Better to be
>> save than sorry, right? This could be realized pretty easily (see
>> example below) and, IMHO, would significantly increase transparency.
>
> I think long names with consistent prefixes are harder to read than short
> descriptive names. ?I think this would make code harder to read. For
> example, the first few lines of mean.default would change from
>
> ? ?if (!is.numeric(x) && !is.complex(x) && !is.logical(x)) {
> ? ? ? ?warning("argument is not numeric or logical: returning NA")
> ? ? ? ?return(NA_real_)
> ? ?}
>
> to
>
> ? ?if (!base_is.numeric(x) && !base_is.complex(x) &&
> ? ? ? ?!base_is.logical(x)) {
> ? ? ? ?base_warning("argument is not numeric or logical: returning NA")
> ? ? ? ?return(base_NA_real_)
> ? ?}
>
>
>> 2) In order to avoid intended (but for the user often pretty obscure)
>> overwrites of existing functions, we could use the same mechanism
>> together with the "rule": just don't provide any functions that
>> overwrite existing ones, rather prepend your version of that function
>> with your package name and leave it up to the user which version he
>> wants to call.
>
> That seems like good advice.
>
> Duncan Murdoch

Except that namespace::foo should be assigned to another local
variable instead of using package::foo in a tight loop, because
repeated calls to "::" can introduce a significant performance
penalty. (This has been discussed in another thread.)

>>
>> At the moment, all of this is probably not that big of a deal yet, but
>> my suggestion has more of a mid-term/long-term character.
>>
>> Below you find a little illustration. I'm probably asking too much, but
>> it'd be great if we could get a little discussion going on how to
>> improve the way of loading packages!
>>
>> Best regards and thanks for R and all it's packages!
>> Janko
>>
>>
>> ################################################################################
>> # PROOF OF CONCEPT
>>
>> ################################################################################
>>
>> # 1) PROBLEM
>> # IMHO, with the number of packages submitted to CRAN constantly
>> increasing,
>> # over time we will be likely to see problems with respect to name
>> clashes.
>> # The main reasons I see for this are the following:
>> # a) package developers picking identical names for their exported
>> functions
>> # b) package developers overwriting base functions in order to add
>> functionality
>> # ? ?to existing functions
>> # c) ...
>> #
>> # This can create scenarios in which the user might not exactly know that
>> # he/she is using a 'modified' version of a specific function. More so,
>> the user
>> # needs to carefully read the description of each new package he plans
>> # to use in order to find out which functions are exported and which
>> existing
>> # functions might be overwritten. This in turn might imply that the user's
>> # existing code needs to be refactored (i.e. instead of using 'fun()' it
>> # might now be necessary to type 'namespace::fun()' to be sure that the
>> desired
>> # function is called).
>>
>> # 2) SUGGESTED SOLUTION
>> # That being said, why don't we switch to a 'preemptive' coding paradigm
>> # where the default way of calling functions includes the specification of
>> # its namespace? In principle, the functionality offered by
>> 'namespace::fun()'
>> # gets the job done.
>> # BUT:
>> # a) it is slower compared to the direct way of calling a function.
>> # ? ?(see illustration below).
>> # b) this option is not available througout the development process of a
>> package
>> # ? ?as there is no namespace yet and there's no way to emulate one.
>> This in
>> # ? ?turn means that even though a package developer would buy into
>> strictly
>> # ? ?using 'mypkg::fun()' throughout his package code, he can only do so
>> at the
>> # ? ?very final stage of the process RIGHT before turning his code into a
>> # ? ?working package (when he's absolutely sure everything is working as
>> planned).
>> # ? ?For debugging he would need to go back to using 'fun()'. Pretty
>> cumbersome.
>>
>> # So how about simply automatically prepending a given function's name
>> with
>> # the package's name for each package that is build (e.g. 'pkg.fun()' or
>> # 'pkg_fun()')? In the end, this would just be a small change for new
>> packages
>> # without a significant decrease of performance and it could also be
>> realized
>> # at early stages of the development process (see illustration below).
>>
>> # 3) ILLUSTRATION
>>
>> # Example case where base function 'parse.default' is overwritten:
>> parse(text="a<- 5") ? ?# Works
>> require(R.utils)
>> require(roxygen)
>> parse(text="a<- 5") ? ?# Does not work anymore
>>
>> ################# START A NEW R SESSION BEFORE YOU CONTINUE
>> ####################
>>
>> # Inefficiency of 'namespace::fun()':
>> require(microbenchmark)
>> res.a<- microbenchmark(eval(parse(text="a<- 5")))
>> res.b<- microbenchmark(eval(base::parse(text="a<- 5")))
>> median(res.a$time)/median(res.b$time)
>>
>> # Can be made up by explicit assignment:
>> foo<- base::parse
>> res.a<- microbenchmark(eval(parse(text="a<- 5")))
>> res.b<- microbenchmark(eval(foo(text="a<- 5")))
>> median(res.a$time)/median(res.b$time)
>>
>> # Automatically prepend function names:
>> processNamespaces<- function(
>> ? ? ?do.global=FALSE,
>> ? ? ?do.verbose=FALSE,
>> ? ? ?.delim.name="_",
>> ? ? ?...
>> ){
>> ? ? ?srch.list.0<- search()
>> ? ? ?srch.list<- gsub("package:", "", srch.list.0)
>> ? ? ?if(!do.global){
>> ? ? ? ? ?assign(".NS", new.env(), envir=.GlobalEnv)
>> ? ? ?}
>> ? ? ?out<- lapply(1:length(srch.list), function(x.pkg){
>> ? ? ? ? ?pkg<- srch.list[x.pkg]
>>
>> ? ? ? ? ?# SKIP LIST
>> ? ? ? ? ?if(pkg %in% c(".GlobalEnv", "Autoloads")){
>> ? ? ? ? ? ? ?return(NULL)
>> ? ? ? ? ?}
>> ? ? ? ? ?# /
>>
>> ? ? ? ? ?# TARGET ENVIR
>> ? ? ? ? ?if(!do.global){
>> ? ? ? ? ? ? ?# ADD PACKAGE TO .NS ENVIRONMENT
>> ? ? ? ? ? ? ?envir<- eval(substitute(
>> ? ? ? ? ? ? ? ? ?assign(PKG, new.env(), envir=.NS),
>> ? ? ? ? ? ? ? ? ?list(PKG=pkg)
>> ? ? ? ? ? ? ?))
>> ? ? ? ? ? ? ?# /
>> # ? ? ? ? ? ?envir<- get(pkg, envir=.NS, inherits=FALSE)
>> ? ? ? ? ? ? ?envir.msg<- paste(".NS$", pkg, sep="")
>> ? ? ? ? ?} else {
>> ? ? ? ? ? ? ?envir<- .GlobalEnv
>> ? ? ? ? ? ? ?envir.msg<- ".GlobalEnv"
>> ? ? ? ? ?}
>> ? ? ? ? ?# /
>>
>> ? ? ? ? ?# PROCESS FUNCTIONS
>> ? ? ? ? ?cnt<- ls(pos=x.pkg)
>> ? ? ? ? ?out<- unlist(sapply(cnt, function(x.cnt){
>> ? ? ? ? ? ? ?value<- get(x.cnt, pos=x.pkg, inherits=FALSE)
>> ? ? ? ? ? ? ?obj.mod<- paste(pkg, x.cnt, sep=.delim.name)
>> ? ? ? ? ? ? ?if(!is.function(value)){
>> ? ? ? ? ? ? ? ? ?return(NULL)
>> ? ? ? ? ? ? ?}
>> ? ? ? ? ? ? ?if(do.verbose){
>> ? ? ? ? ? ? ? ? ?cat(paste("Assigning '", obj.mod, "' to '", envir.msg,
>> ? ? ? ? ? ? ? ? ? ? ?"'", sep=""), sep="\n")
>> ? ? ? ? ? ? ?}
>> ? ? ? ? ? ? ?eval(substitute(
>> ? ? ? ? ? ? ? ? ?assign(OBJ.MOD, value, envir=ENVIR),
>> ? ? ? ? ? ? ? ? ?list(
>> ? ? ? ? ? ? ? ? ? ? ?OBJ.MOD=obj.mod,
>> ? ? ? ? ? ? ? ? ? ? ?ENVIR=envir
>> ? ? ? ? ? ? ? ? ?)
>> ? ? ? ? ? ? ?))
>> ? ? ? ? ? ? ?return(obj.mod)
>> ? ? ? ? ?}))
>> ? ? ? ? ?names(out)<- NULL
>> ? ? ? ? ?# /
>> ? ? ? ? ?return(out)
>> ? ? ?})
>> ? ? ?names(out)<- srch.list
>> ? ? ?return(out)
>> }
>>
>> # +++++
>>
>> funs<- processNamespaces(do.verbose=TRUE)
>> ls(.NS)
>> ls(.NS$base)
>> .NS$base$base_parse
>>
>> res.a<- microbenchmark(eval(parse(text="a<- 5")))
>> res.b<- microbenchmark(eval(.NS$base$base_parse(text="a<- 5")))
>> median(res.a$time)/median(res.b$time)
>>
>> #+++++
>>
>> funs<- processNamespaces(do.global=TRUE, do.verbose=TRUE)
>> base_parse
>>
>> res.a<- microbenchmark(eval(parse(text="a<- 5")))
>> res.b<- microbenchmark(eval(base_parse(text="a<- 5")))
>> median(res.a$time)/median(res.b$time)
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From murdoch.duncan at gmail.com  Sun Oct  2 00:14:17 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 01 Oct 2011 18:14:17 -0400
Subject: [Rd] Increase transparency: suggestion on how to avoid
 namespaces and/or unnecessary overwrites of existing functions
In-Reply-To: <CADUbQ5giQwm7bS6Xx+tYwLVKOEvJ7yy66rUTJ_oimF0YUcJWPg@mail.gmail.com>
References: <4E53F02F.106@googlemail.com>	<4E874909.7060308@gmail.com>
	<CADUbQ5giQwm7bS6Xx+tYwLVKOEvJ7yy66rUTJ_oimF0YUcJWPg@mail.gmail.com>
Message-ID: <4E8790B9.3030500@gmail.com>

On 11-10-01 5:14 PM, Dominick Samperi wrote:
> On Sat, Oct 1, 2011 at 1:08 PM, Duncan Murdoch<murdoch.duncan at gmail.com>  wrote:
>> On 11-08-23 2:23 PM, Janko Thyson wrote:
>>>
>>> aDear list,
>>>
>>> I'm aware of the fact that I posted on something related a while ago,
>>> but I just can't sweat this off and would like to ask your for an opinion:
>>>
>>> The problem:
>>> Namespaces are great, but they don't resolve certain conflicts regarding
>>> name clashes. There are more and more people out there trying to come up
>>> with their own R packages, which is great also! Yet, it becomes more and
>>> more likely that programmers will choose identical names for their
>>> exported functions and/or that they add functionality to existing
>>> function (i.e. overwriting existing functions).
>>> The whole process of which packages overwrite which functions is
>>> somewhat obscure and in addition depends on their order in the search
>>> path. On the other hand, it is not possible to use "namespace"
>>> functionality (i.e. 'namespace::fun()'; also less efficient than direct
>>> call; see illustration below) during early stages of the development
>>> process (i.e. the package is not finished yet) as there is no namespace
>>> available yet.
>>>
>>
>> I agree there can be a problem, but I don't think it is necessarily as
>> serious as you suggest.  Even though there are more and more packages
>> available, most people will still use roughly the same number of them. Just
>> because CRAN has thousands of packages doesn't mean I use all of them at the
>> same time.
>>
>>
>>> I know of at least two cases where such overwrites (I think it's called
>>> masking, right?) led to some confusion at our chair:
>>> 1) loading package forecast overwrites certain functions in stats which
>>> made some code refactoring necessary
>>
>> If your code had been in a package with a NAMESPACE, it would not have been
>> affected by a user loading forecast.  (If you start importing it, then of
>> course it could cause masking problems.)
>>
>> You suggest above that users only put code into a package very late in the
>> development process.  The solution is, don't do that.  Create a package
>> early on, and use it through the majority of development time.
>>
>> You can leave the choice of exports until late by exporting everything;
>> you'll still get the benefit of the more controlled name search from the
>> beginning.
>>
>> You say you can't use "namespace::call()" until the namespace package has
>> been written.  But why would you want to?  If the call is coming from the
>> new package, objects in it will be used with first priority in resolving the
>> call.  You only need the :: notation when there are ambiguities in calls to
>> external packages.
>>
>>
>>> 2) loading package 'R.utils' followed by package 'roxygen' overwrites
>>> 'parse.default()' which results in errors for something like
>>> 'eval(parse(text="a<- 1"))' ; see illustration below)
>>> And I'm sure the community could come up with lots more of such scenarios.
>>>
>>> Suggestions:
>>> 1) In order to avoid name clashes/unintended overwrites, how about
>>> switching to a coding paradigm that explicitly (and automatically)
>>> includes a package's name in all its functions' names once code is
>>> turned into a real package? E.g., getting used to "preemptively" type
>>> 'package_fun()' or 'package.fun()' instead of just 'fun()'. Better to be
>>> save than sorry, right? This could be realized pretty easily (see
>>> example below) and, IMHO, would significantly increase transparency.
>>
>> I think long names with consistent prefixes are harder to read than short
>> descriptive names.  I think this would make code harder to read. For
>> example, the first few lines of mean.default would change from
>>
>>     if (!is.numeric(x)&&  !is.complex(x)&&  !is.logical(x)) {
>>         warning("argument is not numeric or logical: returning NA")
>>         return(NA_real_)
>>     }
>>
>> to
>>
>>     if (!base_is.numeric(x)&&  !base_is.complex(x)&&
>>         !base_is.logical(x)) {
>>         base_warning("argument is not numeric or logical: returning NA")
>>         return(base_NA_real_)
>>     }
>>
>>
>>> 2) In order to avoid intended (but for the user often pretty obscure)
>>> overwrites of existing functions, we could use the same mechanism
>>> together with the "rule": just don't provide any functions that
>>> overwrite existing ones, rather prepend your version of that function
>>> with your package name and leave it up to the user which version he
>>> wants to call.
>>
>> That seems like good advice.
>>
>> Duncan Murdoch
>
> Except that namespace::foo should be assigned to another local
> variable instead of using package::foo in a tight loop, because
> repeated calls to "::" can introduce a significant performance
> penalty. (This has been discussed in another thread.)

That's good advice too.

Duncan Murdoch

>
>>>
>>> At the moment, all of this is probably not that big of a deal yet, but
>>> my suggestion has more of a mid-term/long-term character.
>>>
>>> Below you find a little illustration. I'm probably asking too much, but
>>> it'd be great if we could get a little discussion going on how to
>>> improve the way of loading packages!
>>>
>>> Best regards and thanks for R and all it's packages!
>>> Janko
>>>
>>>
>>> ################################################################################
>>> # PROOF OF CONCEPT
>>>
>>> ################################################################################
>>>
>>> # 1) PROBLEM
>>> # IMHO, with the number of packages submitted to CRAN constantly
>>> increasing,
>>> # over time we will be likely to see problems with respect to name
>>> clashes.
>>> # The main reasons I see for this are the following:
>>> # a) package developers picking identical names for their exported
>>> functions
>>> # b) package developers overwriting base functions in order to add
>>> functionality
>>> #    to existing functions
>>> # c) ...
>>> #
>>> # This can create scenarios in which the user might not exactly know that
>>> # he/she is using a 'modified' version of a specific function. More so,
>>> the user
>>> # needs to carefully read the description of each new package he plans
>>> # to use in order to find out which functions are exported and which
>>> existing
>>> # functions might be overwritten. This in turn might imply that the user's
>>> # existing code needs to be refactored (i.e. instead of using 'fun()' it
>>> # might now be necessary to type 'namespace::fun()' to be sure that the
>>> desired
>>> # function is called).
>>>
>>> # 2) SUGGESTED SOLUTION
>>> # That being said, why don't we switch to a 'preemptive' coding paradigm
>>> # where the default way of calling functions includes the specification of
>>> # its namespace? In principle, the functionality offered by
>>> 'namespace::fun()'
>>> # gets the job done.
>>> # BUT:
>>> # a) it is slower compared to the direct way of calling a function.
>>> #    (see illustration below).
>>> # b) this option is not available througout the development process of a
>>> package
>>> #    as there is no namespace yet and there's no way to emulate one.
>>> This in
>>> #    turn means that even though a package developer would buy into
>>> strictly
>>> #    using 'mypkg::fun()' throughout his package code, he can only do so
>>> at the
>>> #    very final stage of the process RIGHT before turning his code into a
>>> #    working package (when he's absolutely sure everything is working as
>>> planned).
>>> #    For debugging he would need to go back to using 'fun()'. Pretty
>>> cumbersome.
>>>
>>> # So how about simply automatically prepending a given function's name
>>> with
>>> # the package's name for each package that is build (e.g. 'pkg.fun()' or
>>> # 'pkg_fun()')? In the end, this would just be a small change for new
>>> packages
>>> # without a significant decrease of performance and it could also be
>>> realized
>>> # at early stages of the development process (see illustration below).
>>>
>>> # 3) ILLUSTRATION
>>>
>>> # Example case where base function 'parse.default' is overwritten:
>>> parse(text="a<- 5")    # Works
>>> require(R.utils)
>>> require(roxygen)
>>> parse(text="a<- 5")    # Does not work anymore
>>>
>>> ################# START A NEW R SESSION BEFORE YOU CONTINUE
>>> ####################
>>>
>>> # Inefficiency of 'namespace::fun()':
>>> require(microbenchmark)
>>> res.a<- microbenchmark(eval(parse(text="a<- 5")))
>>> res.b<- microbenchmark(eval(base::parse(text="a<- 5")))
>>> median(res.a$time)/median(res.b$time)
>>>
>>> # Can be made up by explicit assignment:
>>> foo<- base::parse
>>> res.a<- microbenchmark(eval(parse(text="a<- 5")))
>>> res.b<- microbenchmark(eval(foo(text="a<- 5")))
>>> median(res.a$time)/median(res.b$time)
>>>
>>> # Automatically prepend function names:
>>> processNamespaces<- function(
>>>       do.global=FALSE,
>>>       do.verbose=FALSE,
>>>       .delim.name="_",
>>>       ...
>>> ){
>>>       srch.list.0<- search()
>>>       srch.list<- gsub("package:", "", srch.list.0)
>>>       if(!do.global){
>>>           assign(".NS", new.env(), envir=.GlobalEnv)
>>>       }
>>>       out<- lapply(1:length(srch.list), function(x.pkg){
>>>           pkg<- srch.list[x.pkg]
>>>
>>>           # SKIP LIST
>>>           if(pkg %in% c(".GlobalEnv", "Autoloads")){
>>>               return(NULL)
>>>           }
>>>           # /
>>>
>>>           # TARGET ENVIR
>>>           if(!do.global){
>>>               # ADD PACKAGE TO .NS ENVIRONMENT
>>>               envir<- eval(substitute(
>>>                   assign(PKG, new.env(), envir=.NS),
>>>                   list(PKG=pkg)
>>>               ))
>>>               # /
>>> #            envir<- get(pkg, envir=.NS, inherits=FALSE)
>>>               envir.msg<- paste(".NS$", pkg, sep="")
>>>           } else {
>>>               envir<- .GlobalEnv
>>>               envir.msg<- ".GlobalEnv"
>>>           }
>>>           # /
>>>
>>>           # PROCESS FUNCTIONS
>>>           cnt<- ls(pos=x.pkg)
>>>           out<- unlist(sapply(cnt, function(x.cnt){
>>>               value<- get(x.cnt, pos=x.pkg, inherits=FALSE)
>>>               obj.mod<- paste(pkg, x.cnt, sep=.delim.name)
>>>               if(!is.function(value)){
>>>                   return(NULL)
>>>               }
>>>               if(do.verbose){
>>>                   cat(paste("Assigning '", obj.mod, "' to '", envir.msg,
>>>                       "'", sep=""), sep="\n")
>>>               }
>>>               eval(substitute(
>>>                   assign(OBJ.MOD, value, envir=ENVIR),
>>>                   list(
>>>                       OBJ.MOD=obj.mod,
>>>                       ENVIR=envir
>>>                   )
>>>               ))
>>>               return(obj.mod)
>>>           }))
>>>           names(out)<- NULL
>>>           # /
>>>           return(out)
>>>       })
>>>       names(out)<- srch.list
>>>       return(out)
>>> }
>>>
>>> # +++++
>>>
>>> funs<- processNamespaces(do.verbose=TRUE)
>>> ls(.NS)
>>> ls(.NS$base)
>>> .NS$base$base_parse
>>>
>>> res.a<- microbenchmark(eval(parse(text="a<- 5")))
>>> res.b<- microbenchmark(eval(.NS$base$base_parse(text="a<- 5")))
>>> median(res.a$time)/median(res.b$time)
>>>
>>> #+++++
>>>
>>> funs<- processNamespaces(do.global=TRUE, do.verbose=TRUE)
>>> base_parse
>>>
>>> res.a<- microbenchmark(eval(parse(text="a<- 5")))
>>> res.b<- microbenchmark(eval(base_parse(text="a<- 5")))
>>> median(res.a$time)/median(res.b$time)
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>


From simon.urbanek at r-project.org  Sun Oct  2 01:45:18 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sat, 1 Oct 2011 19:45:18 -0400
Subject: [Rd] Increase transparency: suggestion on how to avoid
	namespaces and/or unnecessary overwrites of existing functions
In-Reply-To: <4E8790B9.3030500@gmail.com>
References: <4E53F02F.106@googlemail.com>	<4E874909.7060308@gmail.com>
	<CADUbQ5giQwm7bS6Xx+tYwLVKOEvJ7yy66rUTJ_oimF0YUcJWPg@mail.gmail.com>
	<4E8790B9.3030500@gmail.com>
Message-ID: <43BBC264-64CB-4368-9753-ED2AB7EF8928@r-project.org>


On Oct 1, 2011, at 6:14 PM, Duncan Murdoch wrote:

> On 11-10-01 5:14 PM, Dominick Samperi wrote:
>> On Sat, Oct 1, 2011 at 1:08 PM, Duncan Murdoch<murdoch.duncan at gmail.com>  wrote:
>>> On 11-08-23 2:23 PM, Janko Thyson wrote:
>>>> 
>>>> aDear list,
>>>> 
>>>> I'm aware of the fact that I posted on something related a while ago,
>>>> but I just can't sweat this off and would like to ask your for an opinion:
>>>> 
>>>> The problem:
>>>> Namespaces are great, but they don't resolve certain conflicts regarding
>>>> name clashes. There are more and more people out there trying to come up
>>>> with their own R packages, which is great also! Yet, it becomes more and
>>>> more likely that programmers will choose identical names for their
>>>> exported functions and/or that they add functionality to existing
>>>> function (i.e. overwriting existing functions).
>>>> The whole process of which packages overwrite which functions is
>>>> somewhat obscure and in addition depends on their order in the search
>>>> path. On the other hand, it is not possible to use "namespace"
>>>> functionality (i.e. 'namespace::fun()'; also less efficient than direct
>>>> call; see illustration below) during early stages of the development
>>>> process (i.e. the package is not finished yet) as there is no namespace
>>>> available yet.
>>>> 
>>> 
>>> I agree there can be a problem, but I don't think it is necessarily as
>>> serious as you suggest.  Even though there are more and more packages
>>> available, most people will still use roughly the same number of them. Just
>>> because CRAN has thousands of packages doesn't mean I use all of them at the
>>> same time.
>>> 
>>> 
>>>> I know of at least two cases where such overwrites (I think it's called
>>>> masking, right?) led to some confusion at our chair:
>>>> 1) loading package forecast overwrites certain functions in stats which
>>>> made some code refactoring necessary
>>> 
>>> If your code had been in a package with a NAMESPACE, it would not have been
>>> affected by a user loading forecast.  (If you start importing it, then of
>>> course it could cause masking problems.)
>>> 
>>> You suggest above that users only put code into a package very late in the
>>> development process.  The solution is, don't do that.  Create a package
>>> early on, and use it through the majority of development time.
>>> 
>>> You can leave the choice of exports until late by exporting everything;
>>> you'll still get the benefit of the more controlled name search from the
>>> beginning.
>>> 
>>> You say you can't use "namespace::call()" until the namespace package has
>>> been written.  But why would you want to?  If the call is coming from the
>>> new package, objects in it will be used with first priority in resolving the
>>> call.  You only need the :: notation when there are ambiguities in calls to
>>> external packages.
>>> 
>>> 
>>>> 2) loading package 'R.utils' followed by package 'roxygen' overwrites
>>>> 'parse.default()' which results in errors for something like
>>>> 'eval(parse(text="a<- 1"))' ; see illustration below)
>>>> And I'm sure the community could come up with lots more of such scenarios.
>>>> 
>>>> Suggestions:
>>>> 1) In order to avoid name clashes/unintended overwrites, how about
>>>> switching to a coding paradigm that explicitly (and automatically)
>>>> includes a package's name in all its functions' names once code is
>>>> turned into a real package? E.g., getting used to "preemptively" type
>>>> 'package_fun()' or 'package.fun()' instead of just 'fun()'. Better to be
>>>> save than sorry, right? This could be realized pretty easily (see
>>>> example below) and, IMHO, would significantly increase transparency.
>>> 
>>> I think long names with consistent prefixes are harder to read than short
>>> descriptive names.  I think this would make code harder to read. For
>>> example, the first few lines of mean.default would change from
>>> 
>>>    if (!is.numeric(x)&&  !is.complex(x)&&  !is.logical(x)) {
>>>        warning("argument is not numeric or logical: returning NA")
>>>        return(NA_real_)
>>>    }
>>> 
>>> to
>>> 
>>>    if (!base_is.numeric(x)&&  !base_is.complex(x)&&
>>>        !base_is.logical(x)) {
>>>        base_warning("argument is not numeric or logical: returning NA")
>>>        return(base_NA_real_)
>>>    }
>>> 
>>> 
>>>> 2) In order to avoid intended (but for the user often pretty obscure)
>>>> overwrites of existing functions, we could use the same mechanism
>>>> together with the "rule": just don't provide any functions that
>>>> overwrite existing ones, rather prepend your version of that function
>>>> with your package name and leave it up to the user which version he
>>>> wants to call.
>>> 
>>> That seems like good advice.
>>> 
>>> Duncan Murdoch
>> 
>> Except that namespace::foo should be assigned to another local
>> variable instead of using package::foo in a tight loop, because
>> repeated calls to "::" can introduce a significant performance
>> penalty. (This has been discussed in another thread.)
> 
> That's good advice too.
> 

Well, if this idiom is used more often, we may re-consider the implementation of `::` - it could definitely be sped up if needed, but I think so far the view was that it's not worth the hassle (aka increased complexity and relative ugliness of making it a special form) ...

Cheers,
Simon



> Duncan Murdoch
> 
>> 
>>>> 
>>>> At the moment, all of this is probably not that big of a deal yet, but
>>>> my suggestion has more of a mid-term/long-term character.
>>>> 
>>>> Below you find a little illustration. I'm probably asking too much, but
>>>> it'd be great if we could get a little discussion going on how to
>>>> improve the way of loading packages!
>>>> 
>>>> Best regards and thanks for R and all it's packages!
>>>> Janko
>>>> 
>>>> 
>>>> ################################################################################
>>>> # PROOF OF CONCEPT
>>>> 
>>>> ################################################################################
>>>> 
>>>> # 1) PROBLEM
>>>> # IMHO, with the number of packages submitted to CRAN constantly
>>>> increasing,
>>>> # over time we will be likely to see problems with respect to name
>>>> clashes.
>>>> # The main reasons I see for this are the following:
>>>> # a) package developers picking identical names for their exported
>>>> functions
>>>> # b) package developers overwriting base functions in order to add
>>>> functionality
>>>> #    to existing functions
>>>> # c) ...
>>>> #
>>>> # This can create scenarios in which the user might not exactly know that
>>>> # he/she is using a 'modified' version of a specific function. More so,
>>>> the user
>>>> # needs to carefully read the description of each new package he plans
>>>> # to use in order to find out which functions are exported and which
>>>> existing
>>>> # functions might be overwritten. This in turn might imply that the user's
>>>> # existing code needs to be refactored (i.e. instead of using 'fun()' it
>>>> # might now be necessary to type 'namespace::fun()' to be sure that the
>>>> desired
>>>> # function is called).
>>>> 
>>>> # 2) SUGGESTED SOLUTION
>>>> # That being said, why don't we switch to a 'preemptive' coding paradigm
>>>> # where the default way of calling functions includes the specification of
>>>> # its namespace? In principle, the functionality offered by
>>>> 'namespace::fun()'
>>>> # gets the job done.
>>>> # BUT:
>>>> # a) it is slower compared to the direct way of calling a function.
>>>> #    (see illustration below).
>>>> # b) this option is not available througout the development process of a
>>>> package
>>>> #    as there is no namespace yet and there's no way to emulate one.
>>>> This in
>>>> #    turn means that even though a package developer would buy into
>>>> strictly
>>>> #    using 'mypkg::fun()' throughout his package code, he can only do so
>>>> at the
>>>> #    very final stage of the process RIGHT before turning his code into a
>>>> #    working package (when he's absolutely sure everything is working as
>>>> planned).
>>>> #    For debugging he would need to go back to using 'fun()'. Pretty
>>>> cumbersome.
>>>> 
>>>> # So how about simply automatically prepending a given function's name
>>>> with
>>>> # the package's name for each package that is build (e.g. 'pkg.fun()' or
>>>> # 'pkg_fun()')? In the end, this would just be a small change for new
>>>> packages
>>>> # without a significant decrease of performance and it could also be
>>>> realized
>>>> # at early stages of the development process (see illustration below).
>>>> 
>>>> # 3) ILLUSTRATION
>>>> 
>>>> # Example case where base function 'parse.default' is overwritten:
>>>> parse(text="a<- 5")    # Works
>>>> require(R.utils)
>>>> require(roxygen)
>>>> parse(text="a<- 5")    # Does not work anymore
>>>> 
>>>> ################# START A NEW R SESSION BEFORE YOU CONTINUE
>>>> ####################
>>>> 
>>>> # Inefficiency of 'namespace::fun()':
>>>> require(microbenchmark)
>>>> res.a<- microbenchmark(eval(parse(text="a<- 5")))
>>>> res.b<- microbenchmark(eval(base::parse(text="a<- 5")))
>>>> median(res.a$time)/median(res.b$time)
>>>> 
>>>> # Can be made up by explicit assignment:
>>>> foo<- base::parse
>>>> res.a<- microbenchmark(eval(parse(text="a<- 5")))
>>>> res.b<- microbenchmark(eval(foo(text="a<- 5")))
>>>> median(res.a$time)/median(res.b$time)
>>>> 
>>>> # Automatically prepend function names:
>>>> processNamespaces<- function(
>>>>      do.global=FALSE,
>>>>      do.verbose=FALSE,
>>>>      .delim.name="_",
>>>>      ...
>>>> ){
>>>>      srch.list.0<- search()
>>>>      srch.list<- gsub("package:", "", srch.list.0)
>>>>      if(!do.global){
>>>>          assign(".NS", new.env(), envir=.GlobalEnv)
>>>>      }
>>>>      out<- lapply(1:length(srch.list), function(x.pkg){
>>>>          pkg<- srch.list[x.pkg]
>>>> 
>>>>          # SKIP LIST
>>>>          if(pkg %in% c(".GlobalEnv", "Autoloads")){
>>>>              return(NULL)
>>>>          }
>>>>          # /
>>>> 
>>>>          # TARGET ENVIR
>>>>          if(!do.global){
>>>>              # ADD PACKAGE TO .NS ENVIRONMENT
>>>>              envir<- eval(substitute(
>>>>                  assign(PKG, new.env(), envir=.NS),
>>>>                  list(PKG=pkg)
>>>>              ))
>>>>              # /
>>>> #            envir<- get(pkg, envir=.NS, inherits=FALSE)
>>>>              envir.msg<- paste(".NS$", pkg, sep="")
>>>>          } else {
>>>>              envir<- .GlobalEnv
>>>>              envir.msg<- ".GlobalEnv"
>>>>          }
>>>>          # /
>>>> 
>>>>          # PROCESS FUNCTIONS
>>>>          cnt<- ls(pos=x.pkg)
>>>>          out<- unlist(sapply(cnt, function(x.cnt){
>>>>              value<- get(x.cnt, pos=x.pkg, inherits=FALSE)
>>>>              obj.mod<- paste(pkg, x.cnt, sep=.delim.name)
>>>>              if(!is.function(value)){
>>>>                  return(NULL)
>>>>              }
>>>>              if(do.verbose){
>>>>                  cat(paste("Assigning '", obj.mod, "' to '", envir.msg,
>>>>                      "'", sep=""), sep="\n")
>>>>              }
>>>>              eval(substitute(
>>>>                  assign(OBJ.MOD, value, envir=ENVIR),
>>>>                  list(
>>>>                      OBJ.MOD=obj.mod,
>>>>                      ENVIR=envir
>>>>                  )
>>>>              ))
>>>>              return(obj.mod)
>>>>          }))
>>>>          names(out)<- NULL
>>>>          # /
>>>>          return(out)
>>>>      })
>>>>      names(out)<- srch.list
>>>>      return(out)
>>>> }
>>>> 
>>>> # +++++
>>>> 
>>>> funs<- processNamespaces(do.verbose=TRUE)
>>>> ls(.NS)
>>>> ls(.NS$base)
>>>> .NS$base$base_parse
>>>> 
>>>> res.a<- microbenchmark(eval(parse(text="a<- 5")))
>>>> res.b<- microbenchmark(eval(.NS$base$base_parse(text="a<- 5")))
>>>> median(res.a$time)/median(res.b$time)
>>>> 
>>>> #+++++
>>>> 
>>>> funs<- processNamespaces(do.global=TRUE, do.verbose=TRUE)
>>>> base_parse
>>>> 
>>>> res.a<- microbenchmark(eval(parse(text="a<- 5")))
>>>> res.b<- microbenchmark(eval(base_parse(text="a<- 5")))
>>>> median(res.a$time)/median(res.b$time)
>>>> 
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>> 
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>> 
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From jwiley.psych at gmail.com  Sun Oct  2 01:52:36 2011
From: jwiley.psych at gmail.com (Joshua Wiley)
Date: Sat, 1 Oct 2011 16:52:36 -0700
Subject: [Rd] Increase transparency: suggestion on how to avoid
 namespaces and/or unnecessary overwrites of existing functions
In-Reply-To: <4E8790B9.3030500@gmail.com>
References: <4E53F02F.106@googlemail.com> <4E874909.7060308@gmail.com>
	<CADUbQ5giQwm7bS6Xx+tYwLVKOEvJ7yy66rUTJ_oimF0YUcJWPg@mail.gmail.com>
	<4E8790B9.3030500@gmail.com>
Message-ID: <CANz9Z_JpcPWLOTfTTuehWeqH0Kt46fV2vEEbn5431qDVqPE_Hw@mail.gmail.com>

On Sat, Oct 1, 2011 at 3:14 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> On 11-10-01 5:14 PM, Dominick Samperi wrote:
[snip]
>> Except that namespace::foo should be assigned to another local
>> variable instead of using package::foo in a tight loop, because
>> repeated calls to "::" can introduce a significant performance
>> penalty. (This has been discussed in another thread.)
>
> That's good advice too.
>
> Duncan Murdoch

Is this performance hit the sort of thing that byte compiling would
help with, or am I misunderstanding its use?



-- 
Joshua Wiley
Ph.D. Student, Health Psychology
Programmer Analyst II, ATS Statistical Consulting Group
University of California, Los Angeles
https://joshuawiley.com/


From simon.urbanek at r-project.org  Sun Oct  2 04:20:42 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sat, 1 Oct 2011 22:20:42 -0400
Subject: [Rd] Increase transparency: suggestion on how to avoid
	namespaces and/or unnecessary overwrites of existing functions
In-Reply-To: <CANz9Z_JpcPWLOTfTTuehWeqH0Kt46fV2vEEbn5431qDVqPE_Hw@mail.gmail.com>
References: <4E53F02F.106@googlemail.com> <4E874909.7060308@gmail.com>
	<CADUbQ5giQwm7bS6Xx+tYwLVKOEvJ7yy66rUTJ_oimF0YUcJWPg@mail.gmail.com>
	<4E8790B9.3030500@gmail.com>
	<CANz9Z_JpcPWLOTfTTuehWeqH0Kt46fV2vEEbn5431qDVqPE_Hw@mail.gmail.com>
Message-ID: <D867B746-CEF9-4FFC-97E2-97A1AE032855@r-project.org>


On Oct 1, 2011, at 7:52 PM, Joshua Wiley wrote:

> On Sat, Oct 1, 2011 at 3:14 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>> On 11-10-01 5:14 PM, Dominick Samperi wrote:
> [snip]
>>> Except that namespace::foo should be assigned to another local
>>> variable instead of using package::foo in a tight loop, because
>>> repeated calls to "::" can introduce a significant performance
>>> penalty. (This has been discussed in another thread.)
>> 
>> That's good advice too.
>> 
>> Duncan Murdoch
> 
> Is this performance hit the sort of thing that byte compiling would help with, or am I misunderstanding its use?
> 

Depending on what you mean ;). If you mean that compiling code containing :: removes the issue, yes, that is indeed true (i.e., foo::bar gets compiled into the actual value since the compiler can assume that it is a constant and thus :: is not actually called).

If you mean that compiling base and thus :: then that helps only to a degree. According to microbenchmark the overhead of :: is in the order of 7.5ms when compiled and 11ms when not compiled on my test machine (Xeon X5690 and R-devel which is actually much faster than the 30ms in R 2.13.1). If the time spent in your actual function is in the order of  microseconds then the overhead is still huge in either case. If it's much bigger then either doesn't matter.

Cheers,
Simon


From michael.m.spiegel at gmail.com  Mon Oct  3 14:46:23 2011
From: michael.m.spiegel at gmail.com (Michael Spiegel)
Date: Mon, 3 Oct 2011 08:46:23 -0400
Subject: [Rd] serialize/unserialize vector improvement
In-Reply-To: <CANwu5-oZXZjThFof++sf9bE2xYt-1g60+HjhA3vogD7Qnm_m6Q@mail.gmail.com>
References: <CANwu5-oZXZjThFof++sf9bE2xYt-1g60+HjhA3vogD7Qnm_m6Q@mail.gmail.com>
Message-ID: <CANwu5-qjBe_3-KOH2QvufgBVnt8URRvnYz4Z9Be7m+g0KdeFVA@mail.gmail.com>

Any thoughts? I haven't heard any feedback on this patch.

Thanks!
--Michael

On Wed, Sep 28, 2011 at 3:10 PM, Michael Spiegel
<michael.m.spiegel at gmail.com> wrote:
> Hi folks,
>
> I've attached a patch to the svn trunk that improves the performance
> of the serialize/unserialize interface for vector types. The current
> implementation: a) invokes the R_XDREncode operation for each element
> of the vector type, and b) uses a switch statement to determine the
> stream type for each element of the vector type. I've added
> R_XDREncodeVector/R_XDRDecodeVector functions that accept N elements
> at a time, and I've reorganized the implementation so that the stream
> type is not queried once per element.
>
> In the following microbenchmark (below), I've observed performance
> improvements of about x2.4. ?In a real benchmark that is using the
> serialization interface to make MPI calls, I see about a 10%
> improvement in performance.
>
> Cheers,
> --Michael
>
> microbenchmark:
>
> input <- matrix(1:100000000, 10000, 10000)
> output <- serialize(input, NULL)
> for(i in 1:10) { print(system.time(serialize(input, NULL))) }
> for(i in 1:10) { print(system.time(unserialize(output))) }
>


From luke-tierney at uiowa.edu  Mon Oct  3 15:28:59 2011
From: luke-tierney at uiowa.edu (luke-tierney at uiowa.edu)
Date: Mon, 3 Oct 2011 08:28:59 -0500
Subject: [Rd] serialize/unserialize vector improvement
In-Reply-To: <CANwu5-qjBe_3-KOH2QvufgBVnt8URRvnYz4Z9Be7m+g0KdeFVA@mail.gmail.com>
References: <CANwu5-oZXZjThFof++sf9bE2xYt-1g60+HjhA3vogD7Qnm_m6Q@mail.gmail.com>
	<CANwu5-qjBe_3-KOH2QvufgBVnt8URRvnYz4Z9Be7m+g0KdeFVA@mail.gmail.com>
Message-ID: <alpine.LFD.2.02.1110030828220.15986@nokomis.stat.uiowa.edu>

It's on my list to look at but I may not get to it for a couple of
weeks. Someone else may get there earlier.

Best,

luke

On Mon, 3 Oct 2011, Michael Spiegel wrote:

> Any thoughts? I haven't heard any feedback on this patch.
>
> Thanks!
> --Michael
>
> On Wed, Sep 28, 2011 at 3:10 PM, Michael Spiegel
> <michael.m.spiegel at gmail.com> wrote:
>> Hi folks,
>>
>> I've attached a patch to the svn trunk that improves the performance
>> of the serialize/unserialize interface for vector types. The current
>> implementation: a) invokes the R_XDREncode operation for each element
>> of the vector type, and b) uses a switch statement to determine the
>> stream type for each element of the vector type. I've added
>> R_XDREncodeVector/R_XDRDecodeVector functions that accept N elements
>> at a time, and I've reorganized the implementation so that the stream
>> type is not queried once per element.
>>
>> In the following microbenchmark (below), I've observed performance
>> improvements of about x2.4. ?In a real benchmark that is using the
>> serialization interface to make MPI calls, I see about a 10%
>> improvement in performance.
>>
>> Cheers,
>> --Michael
>>
>> microbenchmark:
>>
>> input <- matrix(1:100000000, 10000, 10000)
>> output <- serialize(input, NULL)
>> for(i in 1:10) { print(system.time(serialize(input, NULL))) }
>> for(i in 1:10) { print(system.time(unserialize(output))) }
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Luke Tierney
Chair, Statistics and Actuarial Science
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:      luke at stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From therneau at mayo.edu  Mon Oct  3 16:32:37 2011
From: therneau at mayo.edu (Terry Therneau)
Date: Mon, 03 Oct 2011 09:32:37 -0500
Subject: [Rd] number of copies
Message-ID: <1317652357.979.25.camel@nemo>

 I'm looking at memory efficiency for some of the survival code.  The
following fragment appears in coxph.fit
    coxfit <- .C("coxfit2", iter=as.integer(maxiter),
                   as.integer(n),
                   as.integer(nvar), stime,
                   sstat,
                   x= x[sorted,] ,
	      ...

Does this make a second copy of x to pass to the routine (my
expectation) or will I end up with 3: x and x[sorted,] in the local
frame of reference, and another due to dup=TRUE?

Terry T.


From simon.urbanek at r-project.org  Mon Oct  3 17:38:54 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 3 Oct 2011 11:38:54 -0400
Subject: [Rd] number of copies
In-Reply-To: <1317652357.979.25.camel@nemo>
References: <1317652357.979.25.camel@nemo>
Message-ID: <7182A7C5-0FAC-423D-8B97-B84DCD623408@r-project.org>

Terry,

On Oct 3, 2011, at 10:32 AM, Terry Therneau wrote:

> I'm looking at memory efficiency for some of the survival code.  The
> following fragment appears in coxph.fit
>    coxfit <- .C("coxfit2", iter=as.integer(maxiter),
>                   as.integer(n),
>                   as.integer(nvar), stime,
>                   sstat,
>                   x= x[sorted,] ,
> 	      ...
> 
> Does this make a second copy of x to pass to the routine (my
> expectation) or will I end up with 3: x and x[sorted,] in the local
> frame of reference, and another due to dup=TRUE?
> 

I'm not sure I'm counting your copies right, but I'd say the latter (although the sorting cannot be technically called a copy ;)).
There are 4 distinct, separate objects:
x -> x[sorted,] -> double-array to pass to C -> result vector
If you care about speed, you should definitely use .Call().

Note for debugging: tracemem is actually smart and flags the intermediate memory object created inside .C for passing as a proper duplication even though it is not a real one (no duplicate() involved) since the object is not an R object at all. It then also flags the allocation of the result object as a duplication from the intermediate object, so in summary tracemem gives you the true number of copies.

As far as I remember .C is a legacy left-over from the ancient Fortran interface in original S (it's not really a C interface at all - it is a Fortran interface that happens to not care about source language and C can be used to create Fortran-looking object code) so unless one needs Fortran, one should not be using .C ;). It can be used, but should not be used for anything but maybe didactic purposes IMHO.

Cheers,
Simon


From therneau at mayo.edu  Mon Oct  3 20:43:49 2011
From: therneau at mayo.edu (Terry Therneau)
Date: Mon, 03 Oct 2011 13:43:49 -0500
Subject: [Rd] number of copies
In-Reply-To: <873E1DFD-610E-4683-8633-78FC55507A62@r-project.org>
References: <1317652357.979.25.camel@nemo>
	<7182A7C5-0FAC-423D-8B97-B84DCD623408@r-project.org>
	<1317658585.979.48.camel@nemo>
	<873E1DFD-610E-4683-8633-78FC55507A62@r-project.org>
Message-ID: <1317667429.979.55.camel@nemo>


On Mon, 2011-10-03 at 12:31 -0400, Simon Urbanek wrote:
> > Thanks.  I was hoping that x[,sorted] would act like "double(n)"
> does in a .C call, and have no extra copies made since it has no local
> assignment.
> 
> Yes it does act the same way, you get an extra copy with double(n) as
> well - there is no difference.
> 

That is surprising.  This is not true of Splus.  Since Chambers mentions
it as a specific case as well (Programming with Data, p421) I assumed
that R would be at least as intellegent.  He also used the unset()
function to declare that something could be treated like double(n),
i.e., need no further copies. But that always looked like a dangerous
assertion to me and unset has disappeared, perhaps deservedly, from R.

Terry T.


From wdunlap at tibco.com  Mon Oct  3 22:01:41 2011
From: wdunlap at tibco.com (William Dunlap)
Date: Mon, 3 Oct 2011 20:01:41 +0000
Subject: [Rd] number of copies
In-Reply-To: <1317667429.979.55.camel@nemo>
References: <1317652357.979.25.camel@nemo>
	<7182A7C5-0FAC-423D-8B97-B84DCD623408@r-project.org>
	<1317658585.979.48.camel@nemo>
	<873E1DFD-610E-4683-8633-78FC55507A62@r-project.org>
	<1317667429.979.55.camel@nemo>
Message-ID: <E66794E69CFDE04D9A70842786030B931D663D@PA-MBX03.na.tibco.com>

> -----Original Message-----
> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-project.org] On Behalf Of Terry Therneau
> Sent: Monday, October 03, 2011 11:44 AM
> To: Simon Urbanek
> Cc: r-devel at r-project.org
> Subject: Re: [Rd] number of copies
> 
> 
> On Mon, 2011-10-03 at 12:31 -0400, Simon Urbanek wrote:
> > > Thanks.  I was hoping that x[,sorted] would act like "double(n)"
> > does in a .C call, and have no extra copies made since it has no local
> > assignment.
> >
> > Yes it does act the same way, you get an extra copy with double(n) as
> > well - there is no difference.
> >
> 
> That is surprising.  This is not true of Splus.  Since Chambers mentions
> it as a specific case as well (Programming with Data, p421) I assumed
> that R would be at least as intellegent.  He also used the unset()
> function to declare that something could be treated like double(n),
> i.e., need no further copies. But that always looked like a dangerous
> assertion to me and unset has disappeared, perhaps deservedly, from R.

Terry,
  In SV4 and the version of S+ based on it, unset(x) removed
the name "x" from the currently active evaluation frame and returned
the value of "x".  This decremented the reference count of the
data by 1.  The .C() and .Call() functions would copy an input only
if its reference count was positive.  If the data pointed to by "x"
was not also referenced by another name (in any frame) then
   .C("Cfunc", unset(x))
would not copy x, but otherwise it would.  Hence unset() was not dangerous
but it could be difficult to make sure it actually avoided a copy.
E.g., if you had
   f <- function(y) g(y)
   g <- function(x) .C("Cfunc", unset(x))
and called
   f(1:1e6)
then g's call to .C would copy the 1:1e6 because it was pointed to
by f's "y".  Changing f to
   f <- function(y) g(unset(y))
would let
   f(1:1e6)
avoid the copy, but if you did
   z <- 1:1e6
   f(z)
you would get the copy.

Bill Dunlap
Spotfire, TIBCO Software
wdunlap tibco.com 

> 
> Terry T.
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From simon.urbanek at r-project.org  Mon Oct  3 23:31:08 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 3 Oct 2011 17:31:08 -0400
Subject: [Rd] number of copies
In-Reply-To: <1317667429.979.55.camel@nemo>
References: <1317652357.979.25.camel@nemo>
	<7182A7C5-0FAC-423D-8B97-B84DCD623408@r-project.org>
	<1317658585.979.48.camel@nemo>
	<873E1DFD-610E-4683-8633-78FC55507A62@r-project.org>
	<1317667429.979.55.camel@nemo>
Message-ID: <EC695904-C0DC-49DA-9F8D-F2EA071A6E62@r-project.org>


On Oct 3, 2011, at 2:43 PM, Terry Therneau wrote:

> 
> On Mon, 2011-10-03 at 12:31 -0400, Simon Urbanek wrote:
>>> Thanks.  I was hoping that x[,sorted] would act like "double(n)"
>> does in a .C call, and have no extra copies made since it has no local
>> assignment.
>> 
>> Yes it does act the same way, you get an extra copy with double(n) as
>> well - there is no difference.
>> 
> 
> That is surprising.  This is not true of Splus.  Since Chambers mentions it as a specific case as well (Programming with Data, p421) I assumed that R would be at least as intellegent.  He also used the unset() function to declare that something could be treated like double(n), i.e., need no further copies. But that always looked like a dangerous assertion to me and unset has disappeared, perhaps deservedly, from R.
> 

Ok, let me clarify - there are two entirely separate issues: one issue is to avoid duplication of closure arguments in the duplicate() sense -- and that has to do with the reference count and closures in general. The other is duplication in the .C() call which is entirely separate.

If you call
.C("foo", double(n))
then the double(n) object doesn't get duplicated in the call, because it has no references [other than the frame], so there is no duplicate() call on it, but .C will still create a duplicate double* object to pass to the C function because of DUP=TRUE. Then a new R object is created for the result from that double* array.

For comparison, in .Call you would use allocVector(REALSXP, n) and thus avoid two copies.

You can try to avoid that with .C(..., DUP=FALSE) but you'll be treading on eggs, because you can't check NAMED or call duplicate() yourself in C code for cases that may need it, so have to be very, very careful to not modify something inadvertently (this has been a known source of bugs that are hard to track, that's why DUP=FALSE is flagged as dangerous in bold face).

Cheers,
Simon


From thomas.friedrichsmeier at ruhr-uni-bochum.de  Tue Oct  4 10:43:10 2011
From: thomas.friedrichsmeier at ruhr-uni-bochum.de (Thomas Friedrichsmeier)
Date: 4 Oct 2011 10:43:10 +0200
Subject: [Rd] Is there a way to disable / warn about forking?
Message-ID: <201110041043.16436.thomas.friedrichsmeier@ruhr-uni-bochum.de>

Dear R developers,

with the inclusion of the package "parallel" in the upcoming release of R, 
users and package developers are likely to make increasing usage of 
parallelization features. In part, these features rely on forking the R 
process. As ?mcfork points out, fork()ing in a GUI process is typically a bad 
idea. In RKWard, we "only" seem to have problems with signals arriving in the 
wrong threads, and occasional failure to collect the results from child 
processes. I haven't entirely given up the hope to fix this, eventually, but in 
consequence, parallelization based on forking is not currently usable inside 
an RKWard session.

I am somewhat worried that, as library(parallel) gains acceptance, 
unsuspecting users will increasingly start to run into forking related 
problems in RKWard and other environments. Therefore, I wish:
- The warning from ?mcfork about potential complications should also be 
visible on the documentation pages for the higher level functions 
mcparallel(), mclapply(), but also makeForkCluster().
- It would be nice to have a way to tell library(parallel) that forking is a 
bad idea in the current session, so that
  - mcfork() could stop with an informative error message, or at least produce 
a warning; mclapply() could fall back to mc.cores=1 with a warning.
  - third party packages which wish to use parallelization could check whether 
it is safe to use forking, or whether another mechanism should be used.

I am aware that options(mc.cores=1) will effectively disable forking in 
mclapply(). However, this would make it look like (local) parallelization is 
not worth while at all, while actually, parallelization with 
makePSOCKCluster() works just fine. So, I'm looking for a way to selectively 
disable the use of forking.

Thanks!
Thomas
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 198 bytes
Desc: This is a digitally signed message part.
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111004/f74cf399/attachment.bin>

From k.jewell at campden.co.uk  Tue Oct  4 12:47:53 2011
From: k.jewell at campden.co.uk (Keith Jewell)
Date: Tue, 4 Oct 2011 11:47:53 +0100
Subject: [Rd] Finding inter-function dependencies within a package
References: <j61jp4$esl$1@dough.gmane.org><3D59DF35E7CF3E42BA70C23BD5CBE6A85F5BD9F884@exvic-mbx04.nexus.csiro.au>
	<j64058$unj$1@dough.gmane.org>
Message-ID: <j6eo8s$u3n$1@dough.gmane.org>

Following helpful correspondence with Mark Bravington, mvbutils::foodweb and 
callers.of can do exactly what I wanted very neatly and easily.

The trick is to use base::asNamespace to see non-exported objects in the 
package. base::asNamespace is described as "Internal name space support 
functions. Not intended to be called directly" so I'll forgive myself for 
not knowing about it previously, and keep an eye open for a more mainstream 
way to do the same job. But given that, this does my job perfectly
-----
> library(mvbutils)
> ff <- foodweb( funs=find.funs( asNamespace( 'sensory')), where= 
> asNamespace( 'sensory'), prune='CreateMeanFizz')

> callers.of('CreateMeanFizz', ff)

-------

where 'sensory' is the loaded package I want to search, and 'CreateMeanFizz' 
is the non-exported function of which I want to find callers.



Very nice!

Thanks Mark!



Keith J


"Keith Jewell" <k.jewell at campden.co.uk> wrote in message 
news:j64058$unj$1 at dough.gmane.org...
> Thanks for the suggestions. Just to wrap up this thread...
>
> Rainer Krug pointed out that Roxygen did have dependency graphs, although 
> Roxygen2 doesn't. But I guess (probably wrongly!) that I'd need to 
> process/modify the .R files to use that, and I'm not the package author.
>
> Duncan Murdoch pointed out codetools::findGlobals which can be used to 
> find functions called by a target function. But I want to find functions 
> calling a target function.
>
> Mark Bravington pointed out mvbutils::foodweb and callers.of which almost 
> do what I want (I think it was this I half remembered). But this works in 
> the namespace of the package, and my target function isn't exported so 
> foodweb doesn't see it!
>
> Working from Duncan's suggestion I came up with this, not pretty or fast, 
> could certainly be improved, but it did my one-off job.:
> --------------------
> # return a character vector of names of functions in 'tarPack' (character) 
> which directly call the function 'tarFunc' (character)
> called.by <- function(tarFunc, tarPack){
> require(codetools)
> flist <-   sapply(lsf.str(tarPack, all=TRUE), c)
> names(flist) <- NULL
> gotit <- sapply(flist, function(x) tarFunc %in% findGlobals(get(x, 
> tarPack), FALSE)$functions)
> flist[gotit]
> }
> # e.g.
> called.by("CreateMeanFizz", "package:sensory")
> ------------------------------------------
>
> Thanks again for the input.
>
> Keith Jewell
>
>>> Hi,
>>>
>>> I'd like to know which functions in a package call one specific
>>> function.
>>> I think I've seen a tool for identifying such dependencies, but now I
>>> can't find it :-( Searches of help and R site search for keywords
>>> like function, call, tree, depend haven't helped :-(
>>>
>>> Can anyone point me in the right direction?
>>>
>>> Thanks in advance,
>>>
>>> Keith Jewell
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From simon.urbanek at r-project.org  Tue Oct  4 19:00:27 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 4 Oct 2011 13:00:27 -0400
Subject: [Rd] Is there a way to disable / warn about forking?
In-Reply-To: <201110041043.16436.thomas.friedrichsmeier@ruhr-uni-bochum.de>
References: <201110041043.16436.thomas.friedrichsmeier@ruhr-uni-bochum.de>
Message-ID: <010FC895-C722-4716-9032-7F5864BE3779@r-project.org>


On Oct 4, 2011, at 4:43 AM, Thomas Friedrichsmeier wrote:

> Dear R developers,
> 
> with the inclusion of the package "parallel" in the upcoming release of R, 
> users and package developers are likely to make increasing usage of 
> parallelization features. In part, these features rely on forking the R 
> process. As ?mcfork points out, fork()ing in a GUI process is typically a bad 
> idea. In RKWard, we "only" seem to have problems with signals arriving in the 
> wrong threads, and occasional failure to collect the results from child 
> processes. I haven't entirely given up the hope to fix this, eventually, but in 
> consequence, parallelization based on forking is not currently usable inside 
> an RKWard session.
> 
> I am somewhat worried that, as library(parallel) gains acceptance, 
> unsuspecting users will increasingly start to run into forking related 
> problems in RKWard and other environments.

I don't see why this should be anything new - this is already happening since both packages that were folded into parallel (snow and multicore) are well known and well used.

In multicore we were explicitly warning about this and also working around issues where possible (e.g. the Mac GUI, for example). Judging by the widespread use of multicore and the absence of problem reports related to GUIs, my impression would be that this aspect is not really a problem (more below). We get more users confused about the inability to perform side-effects than this, for example.

In general, there are two main issues that can be addressed by the GUI:

a) shared file descriptors. This is a problem if the GUI uses FDs for communication and they are not closed in the child instance. You don't want both the child and the parent to process those FDs. E.g., closeAll() can be used to work around that issue and with parallel there could be an easier interface for this given that it's in core R.

b) event loop. If the GUI hooks into the event loop then, obviously, this is only intended to be run from the master. multicore was already disabling the even loop hook for AQUA, but it was hard to provide a more comprehensive solution since it needed cooperation of R. In parallel it's much easier, because it can modify R to allow the event loop conditionally and thus only in the master process.

The whole point of parallel is that it can do more than an external package, so I think you're going about it the wrong way - you should be talking to us much earlier so whatever your constraints in RKWard can be possibly addressed by the infrastructure. Also note that a lot of this should be seamless, a lot of users don't care what the infrastructure is, they just want their task to run in parallel, they don't care about mcfork() and the like - the choices will be made for them, because there is no fork on Windows, for example.


> Therefore, I wish:
> - The warning from ?mcfork about potential complications should also be 
> visible on the documentation pages for the higher level functions 
> mcparallel(), mclapply(), but also makeForkCluster().
> - It would be nice to have a way to tell library(parallel) that forking is a 
> bad idea in the current session, so that
>  - mcfork() could stop with an informative error message, or at least produce 
> a warning; mclapply() could fall back to mc.cores=1 with a warning.
>  - third party packages which wish to use parallelization could check whether 
> it is safe to use forking, or whether another mechanism should be used.
> 
> I am aware that options(mc.cores=1) will effectively disable forking in 
> mclapply(). However, this would make it look like (local) parallelization is 
> not worth while at all, while actually, parallelization with 
> makePSOCKCluster() works just fine. So, I'm looking for a way to selectively 
> disable the use of forking.
> 


Cheers,
Simon


From therneau at mayo.edu  Tue Oct  4 19:28:38 2011
From: therneau at mayo.edu (Terry Therneau)
Date: Tue, 04 Oct 2011 12:28:38 -0500
Subject: [Rd] number of copies - summary
In-Reply-To: <EC695904-C0DC-49DA-9F8D-F2EA071A6E62@r-project.org>
References: <1317652357.979.25.camel@nemo>
	<7182A7C5-0FAC-423D-8B97-B84DCD623408@r-project.org>
	<1317658585.979.48.camel@nemo>
	<873E1DFD-610E-4683-8633-78FC55507A62@r-project.org>
	<1317667429.979.55.camel@nemo>
	<EC695904-C0DC-49DA-9F8D-F2EA071A6E62@r-project.org>
Message-ID: <1317749318.28402.24.camel@nemo>

My thanks to Bill Dunlap and Simon Urbanek for clarifying many of the
details.  This gives me what I need to go forward.  

  Yes, I will likely convert more and more things to .Call over time.
This clearly gives the most control over excess memory copies. I am
getting more comments from people using survival on huge data sets so
memory usage is an issue I'll be spending more thought on.

  I'm not nearly as negative about .C as Simon.  Part of this is long
experience with C standalone code: one just gets used to the idea that
mismatched args to a subroutine are deadly. A test of all args to .C
(via insertion of a browser call) is part of initial code development.
Another is that constructing the return argument from .Call (a list with
names) is a bit of a pain.  So I will sometimes use dup=F. However, the
opion of R core about .C is clear, so it behooves me to move away from
it.

Thanks again for the useful comments.

Terry Therneau


From thomas.friedrichsmeier at ruhr-uni-bochum.de  Tue Oct  4 20:05:16 2011
From: thomas.friedrichsmeier at ruhr-uni-bochum.de (Thomas Friedrichsmeier)
Date: 4 Oct 2011 20:05:16 +0200
Subject: [Rd] Is there a way to disable / warn about forking?
In-Reply-To: <010FC895-C722-4716-9032-7F5864BE3779@r-project.org>
References: <201110041043.16436.thomas.friedrichsmeier@ruhr-uni-bochum.de>
	<010FC895-C722-4716-9032-7F5864BE3779@r-project.org>
Message-ID: <201110042005.21771.thomas.friedrichsmeier@ruhr-uni-bochum.de>

Hi,

On Tuesday 04 October 2011, Simon Urbanek wrote:
> I don't see why this should be anything new - this is already happening
> since both packages that were folded into parallel (snow and multicore)
> are well known and well used.
> 
> In multicore we were explicitly warning about this and also working around
> issues where possible (e.g. the Mac GUI, for example). Judging by the
> widespread use of multicore and the absence of problem reports related to
> GUIs, my impression would be that this aspect is not really a problem
> (more below). We get more users confused about the inability to perform
> side-effects than this, for example.

Well, some users do heed the advice to address their problem reports to the 
package / GUI maintainers, esp., if they experience that the problem only 
occurs with the GUI loaded, not in a "plain" R session.

We've had a problem report about using mclapply() for a while in the RKWard 
bug tracker, already.
 
> In general, there are two main issues that can be addressed by the GUI:
> 
> a) shared file descriptors. This is a problem if the GUI uses FDs for
> communication and they are not closed in the child instance. You don't
> want both the child and the parent to process those FDs. E.g., closeAll()
> can be used to work around that issue and with parallel there could be an
> easier interface for this given that it's in core R.
> 
> b) event loop. If the GUI hooks into the event loop then, obviously, this
> is only intended to be run from the master. multicore was already
> disabling the even loop hook for AQUA, but it was hard to provide a more
> comprehensive solution since it needed cooperation of R. In parallel it's
> much easier, because it can modify R to allow the event loop conditionally
> and thus only in the master process.

For me the problem set was having multiple threads + mutexes, linking to a 
library that installs a SIGCHLD handler, code waiting for the "communicator" 
thread to negotiate something with the frontend, except that thread doesn't 
exist in the fork()ed child process...

After spending the day debugging, I think, I have finally solved the key issues 
for RKWard. That also means the issue is mostly painless for me, now. However, 
addressing fork()-related issues is not always a trivial exercise, and I 
continue to think that it could be useful for maintainers of "problematic" 
packages to have a way to stop / warn direct and indirect users running 
mcfork().

> The whole point of parallel is that it can do more than an external
> package, so I think you're going about it the wrong way - you should be
> talking to us much earlier so whatever your constraints in RKWard can be
> possibly addressed by the infrastructure. Also note that a lot of this
> should be seamless, a lot of users don't care what the infrastructure is,
> they just want their task to run in parallel, they don't care about
> mcfork() and the like - the choices will be made for them, because there
> is no fork on Windows, for example.

Exactly. I want the choice to be made for the user, where reasonably possible. 
My point is that knowing whether you're on Windows or a Unix is not enough to 
decide on the technique to use, in this case. Reliably enumerating all corner 
cases where forking could be a problem on Unix is probably next to impossible. 
The developers responsible for those corner cases have a decent chance to be 
aware of the problem, though. And thus, I think it would be a good idea, if 
they had a standard way of informing library(parallel), and any third party 
using library(parallel), if there is a problem with forking.

Regards
Thomas
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 198 bytes
Desc: This is a digitally signed message part.
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111004/177f4a2d/attachment.bin>

From adrin.jalali at gmail.com  Tue Oct  4 23:49:18 2011
From: adrin.jalali at gmail.com (Adrin)
Date: Tue, 4 Oct 2011 14:49:18 -0700
Subject: [Rd] segfault after .C call.
Message-ID: <CAEOrW49gOkrjGDDaryVb+CqNkcr9jHqhG6VmJbd8cAFOqWrr0g@mail.gmail.com>

Hi there,

I think I'm encountering a bug, and I already reported it here:
https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=14695

But meanwhile, could you help me by any suggestions about the problem?

I'll place the content of the reported bug here. You can find
attachments on bugzilla if you were that generous to check it for me.

Best and Thanks in Advance,
Adrin.

Bug report content:

I have a C/C++ code and I'm calling a function from that code using .C

I did check for memory leak in my C code using valgrind and the output of that
is attached. But when I run the same code from R, I get segfault in older
versions immediately. In 2.13.2 I will get an exception when I run gc() right
after my R script.

Reproduction steps:

1. extract the prj.tar.gz
2. call test.R from the src directory inside the package (source("test.R").
That will compile the C code if the .so file is not up to date.
3. even call something like gc(), or call test.R again.

To reproduce the valgrind output of the C code itself:

1. compile the code. To do that you can run the following g++ command within
the src directory:

g++ -m64 -I/usr/include/R -I/usr/local/include -fpic -O2 -g -pipe -Wall
-Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector
--param=ssp-buffer-size=4 -m64 -mtune=generic kbest.cpp

2. Run the valgrind from the src directory like this:

valgrind --leak-check=full ./a.out ../data/Signs.csv ../data/Pvals.csv
2120000000 2


From dtenenba at fhcrc.org  Wed Oct  5 00:46:07 2011
From: dtenenba at fhcrc.org (Dan Tenenbaum)
Date: Tue, 4 Oct 2011 15:46:07 -0700
Subject: [Rd] R-devel (2.14 alpha) Windows binary
Message-ID: <CAF42j23ff7d8O77RLjdPuhunJsNbgcYLrqSAqmdN79doFNCeJA@mail.gmail.com>

Hello,
This question popped up on the bioc-devel list, I'm forwarding it here.

I know that sources for R-2.14 alpha can be found here:

http://cran.r-project.org/src/base-prerelease/

But the OP (below) is asking about Windows binaries.

Dan



---------- Forwarded message ----------
From: Stefan McKinnon H?j-Edwards <Stefan.Hoj-Edwards at agrsci.dk>
Date: 2011/10/4
Subject: Re: [Bioc-devel] Bioc 2.9 New Package submissions. The
October deadlines are fast approaching.
To: "bioc-devel at r-project.org" <bioc-devel at r-project.org>


According to the BioC release plan, we should use R-2.14.0 devel-alpha
to check our packages.
But on cran, we can either choose R 2.13.2
(http://cran.r-project.org/bin/windows/base/) or R 2.15.0 devel
(http://cran.r-project.org/bin/windows/base/rdevel.html). Am I missing
something? And will it again be possible to get the binaries for
Windows of the 2.14.0 devel-alpha?


Kind regards
Stefan McKinnon H?j-Edwards ? ? ? ? ? ? ?Dept. of Molecular Biology and Genetics
Ph.D. Fellow ? ? ? ? ? ? ? ? ? ? ? ? ? ? Aarhus University
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? Blichers All? 20, Postboks 50
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? DK-8830 Tjele
Tel.: +45 8715 7969 ? ? ? ? ? ? ? ? ? ? ?Tel.: +45 8715 6000
Email: Stefan.Hoj-Edwards at agrsci.dk ? ? ?Web: www.agrsci.dk




-----Oprindelig meddelelse-----
Date: Mon, 03 Oct 2011 16:36:15 -0700
From: Marc Carlson <mcarlson at fhcrc.org>
To: bioc-devel at r-project.org
Subject: [Bioc-devel] Bioc 2.9 New Package submissions. The October
? ? ? ?deadlines are fast approaching.
Message-ID: <4E8A46EF.3030007 at fhcrc.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Dear Bioconductor developers,


This announcement is for package authors who are in the process of
developing packages for inclusion in the upcoming 2.9 release of
Bioconductor in October.

The deadline to make a submission for this release is going to be
October 10th, 2011. Packages submitted after the deadline will probably
not provide us with sufficient time for inclusion in this release.
Earlier submissions are encouraged as it provides more time to correct
issues raised during the review process and probably has an improved
chance of making it into the release.

If you do not have your package ready in time for this deadline, your
package will still be included in our development branch of Bioconductor
and will be scheduled for inclusion in the subsequent release version of
Bioconductor.


Other important deadlines to consider are listed on our Release
schedule. If you have packages in the repository (and most of you do),
it is probably a good idea to follow the following link and see the
other deadlines that are approaching.

http://www.bioconductor.org/developers/release-schedule/



Sincerely,


? The Biocore Team

_______________________________________________
Bioc-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/bioc-devel


From simon.urbanek at r-project.org  Wed Oct  5 01:25:17 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 4 Oct 2011 19:25:17 -0400
Subject: [Rd] segfault after .C call.
In-Reply-To: <CAEOrW49gOkrjGDDaryVb+CqNkcr9jHqhG6VmJbd8cAFOqWrr0g@mail.gmail.com>
References: <CAEOrW49gOkrjGDDaryVb+CqNkcr9jHqhG6VmJbd8cAFOqWrr0g@mail.gmail.com>
Message-ID: <42C0FC79-E557-47FE-9A00-9D613DF908EC@r-project.org>

The bug is in your code! (I see at least one - many buffer overflows in all char** output arguments). Please don't abuse the bug tracking system for usage questions.
You may want to consider using either .Call (if you are familiar with R) or Rcpp (if you are more familiar with C++), .C is not the right tool here.

Cheers,
Simon


On Oct 4, 2011, at 5:49 PM, Adrin wrote:

> Hi there,
> 
> I think I'm encountering a bug, and I already reported it here:
> https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=14695
> 
> But meanwhile, could you help me by any suggestions about the problem?
> 
> I'll place the content of the reported bug here. You can find
> attachments on bugzilla if you were that generous to check it for me.
> 
> Best and Thanks in Advance,
> Adrin.
> 
> Bug report content:
> 
> I have a C/C++ code and I'm calling a function from that code using .C
> 
> I did check for memory leak in my C code using valgrind and the output of that
> is attached. But when I run the same code from R, I get segfault in older
> versions immediately. In 2.13.2 I will get an exception when I run gc() right
> after my R script.
> 
> Reproduction steps:
> 
> 1. extract the prj.tar.gz
> 2. call test.R from the src directory inside the package (source("test.R").
> That will compile the C code if the .so file is not up to date.
> 3. even call something like gc(), or call test.R again.
> 
> To reproduce the valgrind output of the C code itself:
> 
> 1. compile the code. To do that you can run the following g++ command within
> the src directory:
> 
> g++ -m64 -I/usr/include/R -I/usr/local/include -fpic -O2 -g -pipe -Wall
> -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector
> --param=ssp-buffer-size=4 -m64 -mtune=generic kbest.cpp
> 
> 2. Run the valgrind from the src directory like this:
> 
> valgrind --leak-check=full ./a.out ../data/Signs.csv ../data/Pvals.csv
> 2120000000 2
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From mtmorgan at fhcrc.org  Wed Oct  5 05:54:19 2011
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Tue, 04 Oct 2011 20:54:19 -0700
Subject: [Rd] Moderating consequences of garbage collection when in C
Message-ID: <4E8BD4EB.60802@fhcrc.org>

Allocating many small objects triggers numerous garbage collections as R 
grows its memory, seriously degrading performance. The specific use case 
is in creating a STRSXP of several 1,000,000's of elements of 60-100 
characters each; a simplified illustration understating the effects 
(because there is initially little to garbage collect, in contrast to an 
R session with several packages loaded) is below.

A simple solution is to provide a mechanism for the C programmer to 
request sufficient memory in advance. R_gc_needed might also be re-used 
at two other locations in memory.c (2221 and 2361) and could be exposed 
at the R level via a new argument, with default 0, to gc().

%> time R --vanilla -e "dyn.load('gc.so');  x = .Call('doit', 1000000, 
FALSE)"
 > dyn.load('gc.so');  x = .Call('doit', 1000000, FALSE)

real    0m9.865s
user    0m9.697s
sys     0m0.146s

%> time R --vanilla -e "dyn.load('gc.so');  x = .Call('doit', 1000000, 
TRUE)"
 > dyn.load('gc.so');  x = .Call('doit', 1000000, TRUE)

real    0m6.952s
user    0m6.802s
sys     0m0.132s

This is the test code

#include <stdio.h>
#include "Rdefines.h"

SEXP doit(SEXP len, SEXP needed)
{
     int i, n = asInteger(len);
     char **s = Calloc(n, char *);
     SEXP ans;

     for (i = 0; i < n; ++i) {
         s[i] = Calloc(80, char);
         sprintf(s[i], "%78d", i);
     }

     if (asLogical(needed))
         R_gc_needed(80 * n);

     PROTECT(ans = allocVector(STRSXP, n));
     for (i = 0; i < n; ++i)
         SET_STRING_ELT(ans, i, mkChar(s[i]));
     UNPROTECT(1);

     return ans;
}

and a patch

Index: src/include/R_ext/Memory.h
===================================================================
--- src/include/R_ext/Memory.h  (revision 57169)
+++ src/include/R_ext/Memory.h  (working copy)
@@ -36,6 +36,7 @@
  void   vmaxset(const void *);

  void   R_gc(void);
+void   R_gc_needed(size_t);

  char*  R_alloc(size_t, int);
  char*  S_alloc(long, int);
Index: src/main/memory.c
===================================================================
--- src/main/memory.c   (revision 57169)
+++ src/main/memory.c   (working copy)
@@ -2503,6 +2503,17 @@
      R_gc_internal(0);
  }

+void R_gc_needed(R_size_t size_needed)
+{
+    if (FORCE_GC || NO_FREE_NODES() || VHEAP_FREE() < size_needed) {
+       R_gc_internal(size_needed);
+       if (NO_FREE_NODES())
+           mem_err_cons();
+       if (VHEAP_FREE() < size_needed)
+           mem_err_heap(0);
+    }
+}
+
  static void R_gc_full(R_size_t size_needed)
  {
      num_old_gens_to_collect = NUM_OLD_GENERATIONS;


-- 
Computational Biology
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N. PO Box 19024 Seattle, WA 98109

Location: M1-B861
Telephone: 206 667-2793


From pd.mes at cbs.dk  Wed Oct  5 08:48:43 2011
From: pd.mes at cbs.dk (Peter Dalgaard)
Date: Wed, 5 Oct 2011 08:48:43 +0200
Subject: [Rd] R-devel (2.14 alpha) Windows binary
In-Reply-To: <CAF42j23ff7d8O77RLjdPuhunJsNbgcYLrqSAqmdN79doFNCeJA@mail.gmail.com>
References: <CAF42j23ff7d8O77RLjdPuhunJsNbgcYLrqSAqmdN79doFNCeJA@mail.gmail.com>
Message-ID: <F2FEE7DF-8F0D-4F3E-8A28-6B5EFEAE1612@cbs.dk>

I suspect that the Windows build system just hasn't caught on to the short time between 2.13.2 and the start of run-in for 2.14.0. I think the usual logic is that pre-releases of the next version replace the patch releases of the old one (by definition, there shouldn't be updates to 2.13.2 anyway). 

-pd

On Oct 5, 2011, at 00:46 , Dan Tenenbaum wrote:

> Hello,
> This question popped up on the bioc-devel list, I'm forwarding it here.
> 
> I know that sources for R-2.14 alpha can be found here:
> 
> http://cran.r-project.org/src/base-prerelease/
> 
> But the OP (below) is asking about Windows binaries.
> 
> Dan
> 
> 
> 
> ---------- Forwarded message ----------
> From: Stefan McKinnon H?j-Edwards <Stefan.Hoj-Edwards at agrsci.dk>
> Date: 2011/10/4
> Subject: Re: [Bioc-devel] Bioc 2.9 New Package submissions. The
> October deadlines are fast approaching.
> To: "bioc-devel at r-project.org" <bioc-devel at r-project.org>
> 
> 
> According to the BioC release plan, we should use R-2.14.0 devel-alpha
> to check our packages.
> But on cran, we can either choose R 2.13.2
> (http://cran.r-project.org/bin/windows/base/) or R 2.15.0 devel
> (http://cran.r-project.org/bin/windows/base/rdevel.html). Am I missing
> something? And will it again be possible to get the binaries for
> Windows of the 2.14.0 devel-alpha?
> 
> 
> Kind regards
> Stefan McKinnon H?j-Edwards              Dept. of Molecular Biology and Genetics
> Ph.D. Fellow                             Aarhus University
>                                         Blichers All? 20, Postboks 50
>                                         DK-8830 Tjele
> Tel.: +45 8715 7969                      Tel.: +45 8715 6000
> Email: Stefan.Hoj-Edwards at agrsci.dk      Web: www.agrsci.dk
> 
> 
> 
> 
> -----Oprindelig meddelelse-----
> Date: Mon, 03 Oct 2011 16:36:15 -0700
> From: Marc Carlson <mcarlson at fhcrc.org>
> To: bioc-devel at r-project.org
> Subject: [Bioc-devel] Bioc 2.9 New Package submissions. The October
>        deadlines are fast approaching.
> Message-ID: <4E8A46EF.3030007 at fhcrc.org>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
> 
> Dear Bioconductor developers,
> 
> 
> This announcement is for package authors who are in the process of
> developing packages for inclusion in the upcoming 2.9 release of
> Bioconductor in October.
> 
> The deadline to make a submission for this release is going to be
> October 10th, 2011. Packages submitted after the deadline will probably
> not provide us with sufficient time for inclusion in this release.
> Earlier submissions are encouraged as it provides more time to correct
> issues raised during the review process and probably has an improved
> chance of making it into the release.
> 
> If you do not have your package ready in time for this deadline, your
> package will still be included in our development branch of Bioconductor
> and will be scheduled for inclusion in the subsequent release version of
> Bioconductor.
> 
> 
> Other important deadlines to consider are listed on our Release
> schedule. If you have packages in the repository (and most of you do),
> it is probably a good idea to follow the following link and see the
> other deadlines that are approaching.
> 
> http://www.bioconductor.org/developers/release-schedule/
> 
> 
> 
> Sincerely,
> 
> 
>   The Biocore Team
> 
> _______________________________________________
> Bioc-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/bioc-devel
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From detlef.steuer at hsu-hamburg.de  Wed Oct  5 10:24:35 2011
From: detlef.steuer at hsu-hamburg.de (Detlef Steuer)
Date: Wed, 5 Oct 2011 10:24:35 +0200
Subject: [Rd] problems (seg-faults) while trying to compile for older suse
 versions
Message-ID: <20111005102435.3f2c4f62@vknecht-intel.unibw-hamburg.de>

Hi!

While preparing 2.13.2 in the build service I get stuck for some older
releases of openSUSE / SLED. 

While it built fine for 2.13.1 now I get segfaults in 'make docs' and
do so only for 32-bit architectures. This is not urgent, because only
older releases are affected, nevertheless I would like to understand
the cause.

Attached are what I think the relevant parts of a build-log, including
tracebacks of some segfaults. 

Any hint greatly appreciated.

Detlef


From ripley at stats.ox.ac.uk  Wed Oct  5 10:50:28 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 5 Oct 2011 09:50:28 +0100 (BST)
Subject: [Rd] R-devel (2.14 alpha) Windows binary
In-Reply-To: <F2FEE7DF-8F0D-4F3E-8A28-6B5EFEAE1612@cbs.dk>
References: <CAF42j23ff7d8O77RLjdPuhunJsNbgcYLrqSAqmdN79doFNCeJA@mail.gmail.com>
	<F2FEE7DF-8F0D-4F3E-8A28-6B5EFEAE1612@cbs.dk>
Message-ID: <alpine.LFD.2.02.1110050947210.3620@toucan.stats.ox.ac.uk>

On Wed, 5 Oct 2011, Peter Dalgaard wrote:

> I suspect that the Windows build system just hasn't caught on to the short time between 2.13.2 and the start of run-in for 2.14.0. I think the usual logic is that pre-releases of the next version replace the patch releases of the old one (by definition, there shouldn't be updates to 2.13.2 anyway).

Correct, but it also does not have a 'R 2.15.0 devel' (not that there 
is such a thing: R-devel does not have a version number). In fact it 
has

ncftp /pub/R/bin/windows/base > ls -l
...
-rw-rw-r--    1 0        1001     40213201 Sep 30 19:18 R-2.13.2-win.exe
-rw-rw-r--    1 0        1001     41018043 Oct  4 11:49 R-2.13.2patched-win.exe
-rw-rw-r--    1 0        1001     47707488 Oct  2 10:45 R-2.14.0dev-win.exe
...

so R-2.14.0dev-win.exe would be a pretty good surrogate for R 2.14.0 
alpha until that is available.

>
> -pd
>
> On Oct 5, 2011, at 00:46 , Dan Tenenbaum wrote:
>
>> Hello,
>> This question popped up on the bioc-devel list, I'm forwarding it here.
>>
>> I know that sources for R-2.14 alpha can be found here:
>>
>> http://cran.r-project.org/src/base-prerelease/
>>
>> But the OP (below) is asking about Windows binaries.
>>
>> Dan
>>
>>
>>
>> ---------- Forwarded message ----------
>> From: Stefan McKinnon H?j-Edwards <Stefan.Hoj-Edwards at agrsci.dk>
>> Date: 2011/10/4
>> Subject: Re: [Bioc-devel] Bioc 2.9 New Package submissions. The
>> October deadlines are fast approaching.
>> To: "bioc-devel at r-project.org" <bioc-devel at r-project.org>
>>
>>
>> According to the BioC release plan, we should use R-2.14.0 devel-alpha
>> to check our packages.
>> But on cran, we can either choose R 2.13.2
>> (http://cran.r-project.org/bin/windows/base/) or R 2.15.0 devel
>> (http://cran.r-project.org/bin/windows/base/rdevel.html). Am I missing
>> something? And will it again be possible to get the binaries for
>> Windows of the 2.14.0 devel-alpha?
>>
>>
>> Kind regards
>> Stefan McKinnon H?j-Edwards              Dept. of Molecular Biology and Genetics
>> Ph.D. Fellow                             Aarhus University
>>                                         Blichers All? 20, Postboks 50
>>                                         DK-8830 Tjele
>> Tel.: +45 8715 7969                      Tel.: +45 8715 6000
>> Email: Stefan.Hoj-Edwards at agrsci.dk      Web: www.agrsci.dk
>>
>>
>>
>>
>> -----Oprindelig meddelelse-----
>> Date: Mon, 03 Oct 2011 16:36:15 -0700
>> From: Marc Carlson <mcarlson at fhcrc.org>
>> To: bioc-devel at r-project.org
>> Subject: [Bioc-devel] Bioc 2.9 New Package submissions. The October
>>        deadlines are fast approaching.
>> Message-ID: <4E8A46EF.3030007 at fhcrc.org>
>> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>>
>> Dear Bioconductor developers,
>>
>>
>> This announcement is for package authors who are in the process of
>> developing packages for inclusion in the upcoming 2.9 release of
>> Bioconductor in October.
>>
>> The deadline to make a submission for this release is going to be
>> October 10th, 2011. Packages submitted after the deadline will probably
>> not provide us with sufficient time for inclusion in this release.
>> Earlier submissions are encouraged as it provides more time to correct
>> issues raised during the review process and probably has an improved
>> chance of making it into the release.
>>
>> If you do not have your package ready in time for this deadline, your
>> package will still be included in our development branch of Bioconductor
>> and will be scheduled for inclusion in the subsequent release version of
>> Bioconductor.
>>
>>
>> Other important deadlines to consider are listed on our Release
>> schedule. If you have packages in the repository (and most of you do),
>> it is probably a good idea to follow the following link and see the
>> other deadlines that are approaching.
>>
>> http://www.bioconductor.org/developers/release-schedule/
>>
>>
>>
>> Sincerely,
>>
>>
>>   The Biocore Team
>>
>> _______________________________________________
>> Bioc-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/bioc-devel
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Wed Oct  5 10:52:28 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 5 Oct 2011 09:52:28 +0100 (BST)
Subject: [Rd] problems (seg-faults) while trying to compile for older
 suse versions
In-Reply-To: <20111005102435.3f2c4f62@vknecht-intel.unibw-hamburg.de>
References: <20111005102435.3f2c4f62@vknecht-intel.unibw-hamburg.de>
Message-ID: <alpine.LFD.2.02.1110050950380.3620@toucan.stats.ox.ac.uk>

On Wed, 5 Oct 2011, Detlef Steuer wrote:

> Hi!
>
> While preparing 2.13.2 in the build service I get stuck for some older
> releases of openSUSE / SLED.
>
> While it built fine for 2.13.1 now I get segfaults in 'make docs' and
> do so only for 32-bit architectures. This is not urgent, because only
> older releases are affected, nevertheless I would like to understand
> the cause.
>
> Attached are what I think the relevant parts of a build-log, including
> tracebacks of some segfaults.

Nothing came through.  But it seems specific to your system (and no 
one reported anything in the run up to 2.13.2, including the RC test 
period nor with 2.13.1 patched).

There is no problem with e.g. i686 Fedora 14.

>
> Any hint greatly appreciated.
>
> Detlef
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From detlef.steuer at hsu-hamburg.de  Wed Oct  5 11:04:19 2011
From: detlef.steuer at hsu-hamburg.de (Detlef Steuer)
Date: Wed, 5 Oct 2011 11:04:19 +0200
Subject: [Rd] problems (seg-faults) while trying to compile for older
 suse versions
In-Reply-To: <alpine.LFD.2.02.1110050950380.3620@toucan.stats.ox.ac.uk>
References: <20111005102435.3f2c4f62@vknecht-intel.unibw-hamburg.de>
	<alpine.LFD.2.02.1110050950380.3620@toucan.stats.ox.ac.uk>
Message-ID: <20111005110419.71f5890b@vknecht-intel.unibw-hamburg.de>



> 
> On Wed, 5 Oct 2011, Detlef Steuer wrote:
> 
> > Hi!
> >
> > While preparing 2.13.2 in the build service I get stuck for some older
> > releases of openSUSE / SLED.
> >
> > While it built fine for 2.13.1 now I get segfaults in 'make docs' and
> > do so only for 32-bit architectures. This is not urgent, because only
> > older releases are affected, nevertheless I would like to understand
> > the cause.
> >
> > Attached are what I think the relevant parts of a build-log, including
> > tracebacks of some segfaults.
> 
> Nothing came through.  But it seems specific to your system (and no 
> one reported anything in the run up to 2.13.2, including the RC test 
> period nor with 2.13.1 patched).

Thank you for the answer.

Yes.

2.13.1 patched worked fine till the  moment 2.13.2 was released.
Shouldn't these be more or less identical? Anything changed?

It may very well be some defect in the build service, but it is reproducible.

Here, this time inlined, the buildlog with traceback.

---
Using BUILD_ROOT=/var/cache/obs/worker/root_8/.mount
Using BUILD_ARCH=i586:i486:i386
Doing kvm build in /var/cache/obs/worker/root_8/root

build09 started "build R-base.spec" at Wed Oct  5 07:15:50 UTC 2011.

Building R for project 'devel:languages:R:base' repository 'openSUSE_11.1' arch 'i586' srcmd5 '851a0904debdcf2f239e357a2e6ccb00'

processing specfile /var/cache/obs/worker/root_8/.build-srcdir/R-base.spec ...
running changelog2spec --target rpm --file /var/cache/obs/worker/root_8/.build-srcdir/R-base.spec
init_buildsystem --cachedir /var/cache/build --prepare --clean --rpmlist /var/cache/obs/worker/root_8/.build.rpmlist /var/cache/obs/worker/root_8/.build-srcdir/R-base.spec build rpmlint-Factory ...

--- snip --- setting up build environment

installing libgcc43-4.3.3_20081022-9.5
installing libgfortran43-4.3.3_20081022-9.5

installing gcc43-c++-4.3.3_20081022-9.5
installing gcc43-fortran-4.3.3_20081022-9.5

installing gcc-c++-4.3-34.168
installing gcc-fortran-4.3-34.168

--- begin configure ---

+ cd R-2.13.2
+ export R_BROWSER=xdg-open
+ R_BROWSER=xdg-open
+ export R_PDFVIEWER=xdg-open
+ R_PDFVIEWER=xdg-open
+ CFLAGS='-march=i586 -mtune=i686 -fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables'
+ export CFLAGS
+ CXXFLAGS='-march=i586 -mtune=i686 -fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables'
+ export CXXFLAGS
+ FFLAGS='-march=i586 -mtune=i686 -fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables'
+ export FFLAGS
+ ./configure --host=i686-suse-linux-gnu --build=i686-suse-linux-gnu --target=i586-suse-linux --program-prefix= --prefix=/usr --exec-prefix=/usr --bindir=/usr/bin --sbindir=/usr/sbin --sysconfdir=/etc --datadir=/usr/share --includedir=/usr/include --libdir=/usr/lib --libexecdir=/usr/lib --localstatedir=/var --sharedstatedir=/usr/com --mandir=/usr/share/man --infodir=/usr/share/info --enable-R-shlib
checking build system type... i686-suse-linux-gnu
checking host system type... i686-suse-linux-gnu
loading site script './config.site'
loading build-specific script './config.site'
checking for pwd... /bin/pwd
checking whether builddir is srcdir... yes
checking for working aclocal... found
checking for working autoconf... found
checking for working automake... found
checking for working autoheader... found
checking for gawk... gawk
checking whether ln -s works... yes
checking for bison... no
checking for byacc... no
checking for ar... ar
checking for a BSD-compatible install... /usr/bin/install -c
checking for sed... /usr/bin/sed
checking for which... /usr/bin/which
checking for less... /usr/bin/less
checking for gtar... no
checking for gnutar... no
checking for tar... /bin/tar
checking for tex... /usr/bin/tex
checking for latex... /usr/bin/latex
checking for pdftex... /usr/bin/pdftex
checking for pdflatex... /usr/bin/pdflatex
checking for makeindex... /usr/bin/makeindex
checking for makeinfo... /usr/bin/makeinfo
checking whether makeinfo version is at least 4.7... yes
checking for install-info... /usr/bin/install-info
checking for texi2dvi... /usr/bin/texi2dvi
checking for unzip... no
checking for zip... no
checking for gzip... /usr/bin/gzip
checking for bzip2... /usr/bin/bzip2
using default browser ... xdg-open
checking for xdg-open... no
checking for acroread... no
checking for acroread4... no
checking for xdg-open... no
checking for evince... no
checking for xpdf... no
checking for gv... no
checking for gnome-gv... no
checking for ggv... no
checking for okular... no
checking for kpdf... no
checking for open... no
checking for gpdf... no
checking for kghostview... no
configure: WARNING: I could not determine a PDF viewer
checking for notangle... false
checking for pkg-config... /usr/bin/pkg-config
checking for i686-suse-linux-gnu-gcc... no
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking whether gcc needs -traditional... no
checking how to run the C preprocessor... gcc -E
checking for gfortran... gfortran
checking for i686-suse-linux-gnu-g77... (cached) gfortran
checking whether we are using the GNU Fortran 77 compiler... yes
checking whether gfortran accepts -g... yes
checking for i686-suse-linux-gnu-g++... no
checking for i686-suse-linux-gnu-c++... no
checking for i686-suse-linux-gnu-gpp... no
checking for i686-suse-linux-gnu-aCC... no
checking for i686-suse-linux-gnu-CC... no
checking for i686-suse-linux-gnu-cxx... no
checking for i686-suse-linux-gnu-cc++... no
checking for i686-suse-linux-gnu-cl.exe... no
checking for i686-suse-linux-gnu-FCC... no
checking for i686-suse-linux-gnu-KCC... no
checking for i686-suse-linux-gnu-RCC... no
checking for i686-suse-linux-gnu-xlC_r... no
checking for i686-suse-linux-gnu-xlC... no
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking how to run the C++ preprocessor... g++ -E
checking whether __attribute__((visibility())) is supported... yes
checking whether gcc accepts -fvisibility... yes
checking whether gfortran accepts -fvisibility... yes
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking minix/config.h usability... no
checking minix/config.h presence... no
checking for minix/config.h... no
checking whether it is safe to define __EXTENSIONS__... yes
checking for i686-suse-linux-gnu-gcc... no
checking for i686-suse-linux-gnu-objcc... no
checking for i686-suse-linux-gnu-objc... no
checking for i686-suse-linux-gnu-cc... no
checking for i686-suse-linux-gnu-CC... no
checking for gcc... gcc
checking whether we are using the GNU Objective C compiler... no
checking whether gcc accepts -g... no
checking for Objective C++ compiler... trying some possibilities
checking whether g++ can compile ObjC++... no
checking whether  can compile ObjC++... no
no working compiler found
checking for a sed that does not truncate output... (cached) /usr/bin/sed
checking for fgrep... /usr/bin/grep -F
checking for ld used by gcc... /usr/i586-suse-linux/bin/ld
checking if the linker (/usr/i586-suse-linux/bin/ld) is GNU ld... yes
checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
checking the name lister (/usr/bin/nm -B) interface... BSD nm
checking the maximum length of command line arguments... 1572864
checking whether the shell understands some XSI constructs... yes
checking whether the shell understands "+="... yes
checking for /usr/i586-suse-linux/bin/ld option to reload object files... -r
checking for i686-suse-linux-gnu-objdump... no
checking for objdump... objdump
checking how to recognize dependent libraries... pass_all
checking for i686-suse-linux-gnu-ar... (cached) ar
checking for i686-suse-linux-gnu-strip... no
checking for strip... strip
checking for i686-suse-linux-gnu-ranlib... no
checking for ranlib... ranlib
checking command to parse /usr/bin/nm -B output from gcc object... ok
checking for dlfcn.h... yes
checking whether we are using the GNU C++ compiler... (cached) yes
checking whether g++ accepts -g... (cached) yes
checking how to run the C++ preprocessor... g++ -E
checking for i686-suse-linux-gnu-g77... (cached) gfortran
checking whether we are using the GNU Fortran 77 compiler... (cached) yes
checking whether gfortran accepts -g... (cached) yes
checking for objdir... .libs
checking if gcc supports -fno-rtti -fno-exceptions... no
checking for gcc option to produce PIC... -fPIC -DPIC
checking if gcc PIC flag -fPIC -DPIC works... yes
checking if gcc static flag -static works... yes
checking if gcc supports -c -o file.o... yes
checking if gcc supports -c -o file.o... (cached) yes
checking whether the gcc linker (/usr/i586-suse-linux/bin/ld) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... no
checking for ld used by g++... /usr/i586-suse-linux/bin/ld
checking if the linker (/usr/i586-suse-linux/bin/ld) is GNU ld... yes
checking whether the g++ linker (/usr/i586-suse-linux/bin/ld) supports shared libraries... yes
checking for g++ option to produce PIC... -fPIC -DPIC
checking if g++ PIC flag -fPIC -DPIC works... yes
checking if g++ static flag -static works... yes
checking if g++ supports -c -o file.o... yes
checking if g++ supports -c -o file.o... (cached) yes
checking whether the g++ linker (/usr/i586-suse-linux/bin/ld) supports shared libraries... yes
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... no
checking for gfortran option to produce PIC... -fPIC
checking if gfortran PIC flag -fPIC works... yes
checking if gfortran static flag -static works... yes
checking if gfortran supports -c -o file.o... yes
checking if gfortran supports -c -o file.o... (cached) yes
checking whether the gfortran linker (/usr/i586-suse-linux/bin/ld) supports shared libraries... yes
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking for cos in -lm... yes
checking for sin in -lm... yes
checking for dlopen in -ldl... yes
checking readline/history.h usability... yes
checking readline/history.h presence... yes
checking for readline/history.h... yes
checking readline/readline.h usability... yes
checking readline/readline.h presence... yes
checking for readline/readline.h... yes
checking for rl_callback_read_char in -lreadline... yes
checking for history_truncate_file... yes
checking whether rl_completion_matches exists and is declared... yes
checking for ANSI C header files... (cached) yes
checking whether time.h and sys/time.h may both be included... yes
checking for dirent.h that defines DIR... yes
checking for library containing opendir... none required
checking for sys/wait.h that is POSIX.1 compatible... yes
checking arpa/inet.h usability... yes
checking arpa/inet.h presence... yes
checking for arpa/inet.h... yes
checking dl.h usability... no
checking dl.h presence... no
checking for dl.h... no
checking for dlfcn.h... (cached) yes
checking elf.h usability... yes
checking elf.h presence... yes
checking for elf.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking floatingpoint.h usability... no
checking floatingpoint.h presence... no
checking for floatingpoint.h... no
checking fpu_control.h usability... yes
checking fpu_control.h presence... yes
checking for fpu_control.h... yes
checking glob.h usability... yes
checking glob.h presence... yes
checking for glob.h... yes
checking grp.h usability... yes
checking grp.h presence... yes
checking for grp.h... yes
checking locale.h usability... yes
checking locale.h presence... yes
checking for locale.h... yes
checking netdb.h usability... yes
checking netdb.h presence... yes
checking for netdb.h... yes
checking netinet/in.h usability... yes
checking netinet/in.h presence... yes
checking for netinet/in.h... yes
checking pwd.h usability... yes
checking pwd.h presence... yes
checking for pwd.h... yes
checking for strings.h... (cached) yes
checking sys/param.h usability... yes
checking sys/param.h presence... yes
checking for sys/param.h... yes
checking sys/select.h usability... yes
checking sys/select.h presence... yes
checking for sys/select.h... yes
checking sys/socket.h usability... yes
checking sys/socket.h presence... yes
checking for sys/socket.h... yes
checking for sys/stat.h... (cached) yes
checking sys/resource.h usability... yes
checking sys/resource.h presence... yes
checking for sys/resource.h... yes
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking sys/times.h usability... yes
checking sys/times.h presence... yes
checking for sys/times.h... yes
checking sys/utsname.h usability... yes
checking sys/utsname.h presence... yes
checking for sys/utsname.h... yes
checking time.h usability... yes
checking time.h presence... yes
checking for time.h... yes
checking for unistd.h... (cached) yes
checking errno.h usability... yes
checking errno.h presence... yes
checking for errno.h... yes
checking for inttypes.h... (cached) yes
checking limits.h usability... yes
checking limits.h presence... yes
checking for limits.h... yes
checking stdarg.h usability... yes
checking stdarg.h presence... yes
checking for stdarg.h... yes
checking stdbool.h usability... yes
checking stdbool.h presence... yes
checking for stdbool.h... yes
checking for stdint.h... (cached) yes
checking for string.h... (cached) yes
checking whether setjmp.h is POSIX.1 compatible... yes
checking whether sigsetjmp is declared... yes
checking whether siglongjmp is declared... yes
checking for GNU C library with version >= 2... yes
checking return type of signal handlers... void
checking for pid_t... yes
checking for size_t... yes
checking whether SIZE_MAX is declared... yes
checking for blkcnt_t... yes
checking for type of socket length... socklen_t *
checking for stack_t... yes
checking for intptr_t... yes
checking for uintptr_t... yes
checking whether byte ordering is bigendian... no
checking for an ANSI C-conforming const... yes
checking for gcc option to accept ISO C99... -std=gnu99
checking for gcc -std=gnu99 option to accept ISO Standard C... (cached) -std=gnu99
checking for inline... inline
checking size of int... 4
checking size of long... 4
checking size of long long... 8
checking size of double... 8
checking size of long double... 12
checking size of size_t... 4
checking whether we can compute C Make dependencies... yes, using gcc -std=gnu99 -MM
checking whether gcc -std=gnu99 supports -c -o FILE.lo... yes
checking for gcc -std=gnu99 option to support OpenMP... -fopenmp
checking how to get verbose linking output from gfortran... -v
checking for Fortran 77 libraries of gfortran...  -L/usr/local/lib -L/usr/lib/gcc/i586-suse-linux/4.3 -L/usr/lib/gcc/i586-suse-linux/4.3/../../../../i586-suse-linux/lib -L/usr/lib/gcc/i586-suse-linux/4.3/../../.. -lgfortranbegin -lgfortran -lm
checking how to get verbose linking output from gcc -std=gnu99... -v
checking for C libraries of gcc -std=gnu99...  -L/usr/local/lib -L/usr/lib/gcc/i586-suse-linux/4.3 -L/usr/lib/gcc/i586-suse-linux/4.3/../../../../i586-suse-linux/lib -L/usr/lib/gcc/i586-suse-linux/4.3/../../.. -lgcc_s
checking for dummy main to link with Fortran 77 libraries... none
checking for Fortran 77 name-mangling scheme... lower case, underscore, no extra underscore
checking whether gfortran appends underscores to external names... yes
checking whether gfortran appends extra underscores to external names... no
checking whether mixed C/Fortran code can be run... yes
checking whether gfortran and gcc -std=gnu99 agree on int and double... yes
checking whether gfortran and gcc -std=gnu99 agree on double complex... yes
checking for gfortran option to support OpenMP... -fopenmp
checking whether g++ accepts -M for generating dependencies... yes
checking for g++ option to support OpenMP... -fopenmp
checking whether we can compute ObjC Make dependencies... no
checking whether C runtime needs -D__NO_MATH_INLINES... no
checking for xmkmf... /usr/bin/xmkmf
checking for off_t... yes
checking for working alloca.h... yes
checking for alloca... yes
checking whether alloca is declared... yes
checking whether expm1 exists and is declared... yes
checking whether hypot exists and is declared... yes
checking whether log1p exists and is declared... yes
checking whether log2 exists and is declared... yes
checking whether log10 exists and is declared... yes
checking whether nearbyint exists and is declared... yes
checking whether nearbyintl exists and is declared... yes
checking whether powl exists and is declared... yes
checking whether rint exists and is declared... yes
checking whether rintl exists and is declared... yes
checking whether va_copy exists and is declared... yes
checking for isblank... yes
checking whether time exists and is declared... yes
checking for fseeko... yes
checking for ftello... yes
checking for matherr... yes
checking whether fcntl exists and is declared... yes
checking whether getgrgid exists and is declared... yes
checking whether getpwuid exists and is declared... yes
checking whether sigaction exists and is declared... yes
checking whether sigaltstack exists and is declared... yes
checking whether sigemptyset exists and is declared... yes
checking whether fdopen exists and is declared... yes
checking whether popen exists and is declared... yes
checking whether setenv exists and is declared... yes
checking whether unsetenv exists and is declared... yes
checking whether getrlimit exists and is declared... yes
checking whether getrusage exists and is declared... yes
checking whether chmod exists and is declared... yes
checking whether mkfifo exists and is declared... yes
checking whether stat exists and is declared... yes
checking whether umask exists and is declared... yes
checking whether gettimeofday exists and is declared... yes
checking whether times exists and is declared... yes
checking whether access exists and is declared... yes
checking whether chdir exists and is declared... yes
checking whether execv exists and is declared... yes
checking whether ftruncate exists and is declared... yes
checking whether getcwd exists and is declared... yes
checking whether getuid exists and is declared... yes
checking whether link exists and is declared... yes
checking whether readlink exists and is declared... yes
checking whether symlink exists and is declared... yes
checking whether sysconf exists and is declared... yes
checking for putenv... yes
checking whether putenv is declared... yes
checking for vasprintf... yes
checking whether vasprintf is declared... yes
checking for mempcpy... yes
checking for realpath... yes
checking whether realpath is declared... yes
checking whether glob exists and is declared... yes
checking for isnan... yes
checking whether isfinite is declared... yes
checking whether isnan is declared... yes
checking whether you have IEEE 754 floating-point arithmetic... yes
checking whether putenv("FOO") can unset an environment variable... yes
checking whether putenv("FOO=") can unset an environment variable... no
checking for nl_langinfo and CODESET... yes
checking for acosh... yes
checking for asinh... yes
checking for atanh... yes
checking for mkdtemp... yes
checking for snprintf... yes
checking for strdup... yes
checking for strncasecmp... yes
checking for vsnprintf... yes
checking whether acosh is declared... yes
checking whether asinh is declared... yes
checking whether atanh is declared... yes
checking whether mkdtemp is declared... yes
checking whether snprintf is declared... yes
checking whether strdup is declared... yes
checking whether strncasecmp is declared... yes
checking whether vsnprintf is declared... yes
checking for library containing connect... none required
checking for library containing gethostbyname... none required
checking for library containing xdr_string... none required
checking for __setfpucw... no
checking for working calloc... yes
checking for working isfinite... yes
checking for working log1p... yes
checking whether ftell works correctly on files opened for append... yes
checking for working sigaction... yes
checking whether mktime sets errno... no
checking whether C99 double complex is supported... 
checking complex.h usability... yes
checking complex.h presence... yes
checking for complex.h... yes
checking for double complex... yes
yes
checking whether cabs exists and is declared... yes
checking whether carg exists and is declared... yes
checking whether cexp exists and is declared... yes
checking whether clog exists and is declared... yes
checking whether csqrt exists and is declared... yes
checking whether cpow exists and is declared... yes
checking whether ccos exists and is declared... yes
checking whether csin exists and is declared... yes
checking whether ctan exists and is declared... yes
checking whether cacos exists and is declared... yes
checking whether casin exists and is declared... yes
checking whether catan exists and is declared... yes
checking whether ccosh exists and is declared... yes
checking whether csinh exists and is declared... yes
checking whether ctanh exists and is declared... yes
checking for cblas_cdotu_sub in vecLib framework... no
checking iconv.h usability... yes
checking iconv.h presence... yes
checking for iconv.h... yes
checking for iconv... yes
checking whether iconv accepts "UTF-8", "latin1", "ASCII" and "UCS-*"... yes
checking for iconvlist... no
checking for iconv... yes
checking for iconv declaration... install-shextern size_t iconv (iconv_t cd, char * *inbuf, size_t *inbytesleft, char * *outbuf, size_t *outbytesleft);
checking wchar.h usability... yes
checking wchar.h presence... yes
checking for wchar.h... yes
checking wctype.h usability... yes
checking wctype.h presence... yes
checking for wctype.h... yes
checking whether mbrtowc exists and is declared... yes
checking whether wcrtomb exists and is declared... yes
checking whether wcscoll exists and is declared... yes
checking whether wcsftime exists and is declared... yes
checking whether wcstod exists and is declared... yes
checking whether mbstowcs exists and is declared... yes
checking whether wcstombs exists and is declared... yes
checking whether wctrans exists and is declared... yes
checking whether iswblank exists and is declared... yes
checking whether wctype exists and is declared... yes
checking whether iswctype exists and is declared... yes
checking for wctrans_t... yes
checking for mbstate_t... yes
checking for ICU... no
checking for X... libraries , headers 
checking for gethostbyname... yes
checking for connect... yes
checking for remove... yes
checking for shmat... yes
checking for IceConnectionNumber in -lICE... yes
checking X11/Intrinsic.h usability... yes
checking X11/Intrinsic.h presence... yes
checking for X11/Intrinsic.h... yes
checking for XtToolkitInitialize in -lXt... yes
using X11 ... yes
checking for KeySym... yes
checking X11/Xmu/Atoms.h usability... yes
checking X11/Xmu/Atoms.h presence... yes
checking for X11/Xmu/Atoms.h... yes
checking for XmuInternAtom in -lXmu... yes
checking whether pkg-config knows about cairo and pango... yes
checking whether cairo including pango is >= 1.2 and works... yes
checking for tclConfig.sh... no
checking for tclConfig.sh in library (sub)directories... /usr/lib/tclConfig.sh
checking for tkConfig.sh... no
checking for tkConfig.sh in library (sub)directories... /usr/lib/tkConfig.sh
checking tcl.h usability... yes
checking tcl.h presence... yes
checking for tcl.h... yes
checking tk.h usability... yes
checking tk.h presence... yes
checking for tk.h... yes
checking whether compiling/linking Tcl/Tk code works... yes
checking for BSD networking... yes
checking if jpeglib version >= 6b... yes
checking for jpeg_destroy_compress in -ljpeg... yes
checking for main in -lz... yes
checking if libpng version >= 1.2.7... yes
checking for png_create_write_struct in -lpng... yes
checking tiffio.h usability... yes
checking tiffio.h presence... yes
checking for tiffio.h... yes
checking for TIFFOpen in -ltiff... yes
checking rpc/types.h usability... yes
checking rpc/types.h presence... yes
checking for rpc/types.h... yes
checking for rpc/xdr.h... yes
checking for XDR support... yes
checking whether zlib support needs to be compiled... yes
checking mmap support for zlib... yes
checking whether bzip2 support needs to be compiled... yes
checking for lzma_version_number in -llzma... no
checking whether PCRE support needs to be compiled... yes
checking whether leap seconds are treated according to POSIX... yes
checking for setitimer... yes
checking for special C compiler options needed for large files... no
checking for _FILE_OFFSET_BITS value needed for large files... 64
checking for _LARGEFILE_SOURCE value needed for large files... no
checking whether KERN_USRSTACK sysctl is supported... no
checking for visible __lib_stack_end... yes
checking for lpr... no
checking for lp... no
checking for paperconf... false
checking for java... no
checking for javac... no
checking for javah... no
checking for jar... no
checking whether Java compiler works... no
checking whether Java compiler works for version 1.4... no
checking whether Java interpreter works... no
checking for i686-suse-linux-gnu-gfortran... no
checking for i686-suse-linux-gnu-g95... no
checking for i686-suse-linux-gnu-xlf95... no
checking for i686-suse-linux-gnu-f95... no
checking for i686-suse-linux-gnu-fort... no
checking for i686-suse-linux-gnu-ifort... no
checking for i686-suse-linux-gnu-ifc... no
checking for i686-suse-linux-gnu-efc... no
checking for i686-suse-linux-gnu-pgf95... no
checking for i686-suse-linux-gnu-lf95... no
checking for i686-suse-linux-gnu-ftn... no
checking for i686-suse-linux-gnu-xlf90... no
checking for i686-suse-linux-gnu-f90... no
checking for i686-suse-linux-gnu-pgf90... no
checking for i686-suse-linux-gnu-pghpf... no
checking for i686-suse-linux-gnu-epcf90... no
checking for i686-suse-linux-gnu-g77... no
checking for i686-suse-linux-gnu-xlf... no
checking for i686-suse-linux-gnu-f77... no
checking for i686-suse-linux-gnu-frt... no
checking for i686-suse-linux-gnu-pgf77... no
checking for i686-suse-linux-gnu-cf77... no
checking for i686-suse-linux-gnu-fort77... no
checking for i686-suse-linux-gnu-fl32... no
checking for i686-suse-linux-gnu-af77... no
checking for gfortran... gfortran
checking whether we are using the GNU Fortran compiler... yes
checking whether gfortran accepts -g... yes
checking for i686-suse-linux-gnu-gfortran... gfortran
checking whether we are using the GNU Fortran compiler... (cached) yes
checking whether gfortran accepts -g... (cached) yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... no
checking for gfortran option to produce PIC... -fPIC
checking if gfortran PIC flag -fPIC works... yes
checking if gfortran static flag -static works... yes
checking if gfortran supports -c -o file.o... yes
checking if gfortran supports -c -o file.o... (cached) yes
checking whether the gfortran linker (/usr/i586-suse-linux/bin/ld) supports shared libraries... yes
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking for Fortran flag to compile .f90 files... none
checking for Fortran flag to compile .f95 files... none
checking for gfortran option to support OpenMP... -fopenmp
checking for recommended packages... yes
checking whether NLS is requested... yes

Configuring src/extra/intl directory
checking whether make sets $(MAKE)... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for msgfmt... /usr/bin/msgfmt
checking for gmsgfmt... /usr/bin/msgfmt
checking for xgettext... /usr/bin/xgettext
checking for msgmerge... /usr/bin/msgmerge
checking whether we are using the GNU C Library 2 or newer... yes
checking for i686-suse-linux-gnu-ranlib... ranlib
checking for simple visibility declarations... yes
checking for inline... inline
checking for stdint.h... yes
checking for stdlib.h... (cached) yes
checking for unistd.h... (cached) yes
checking for sys/param.h... (cached) yes
checking for getpagesize... yes
checking for working mmap... yes
checking whether integer division by zero raises SIGFPE... yes
checking for inttypes.h... yes
checking for unsigned long long int... yes
checking for inttypes.h... (cached) yes
checking whether the inttypes.h PRIxNN macros are broken... no
checking whether imported symbols can be declared weak... yes
checking for multithread API to use... none
checking argz.h usability... yes
checking argz.h presence... yes
checking for argz.h... yes
checking for inttypes.h... (cached) yes
checking for limits.h... (cached) yes
checking for unistd.h... (cached) yes
checking for sys/param.h... (cached) yes
checking for getcwd... yes
checking for getegid... yes
checking for geteuid... yes
checking for getgid... yes
checking for getuid... yes
checking for mempcpy... (cached) yes
checking for munmap... yes
checking for stpcpy... yes
checking for strcasecmp... yes
checking for strdup... (cached) yes
checking for strtoul... yes
checking for tsearch... yes
checking for argz_count... yes
checking for argz_stringify... yes
checking for argz_next... yes
checking for __fsetlocking... yes
checking whether feof_unlocked is declared... yes
checking whether fgets_unlocked is declared... yes
checking for iconv... (cached) yes
checking for iconv declaration... (cached) install-shextern size_t iconv (iconv_t cd, char * *inbuf, size_t *inbytesleft, char * *outbuf, size_t *outbytesleft);
checking for NL_LOCALE_NAME macro... yes
checking for bison... no
checking for long long int... yes
checking for long double... yes
checking for wchar_t... yes
checking for wint_t... yes
checking for intmax_t... yes
checking whether printf() supports POSIX/XSI format strings... yes
checking whether we are using the GNU C Library 2.1 or newer... yes
checking for stdint.h... (cached) yes
checking for SIZE_MAX... yes
checking for stdint.h... (cached) yes
checking for CFPreferencesCopyAppValue... no
checking for CFLocaleCopyCurrent... no
checking for ptrdiff_t... yes
checking stddef.h usability... yes
checking stddef.h presence... yes
checking for stddef.h... yes
checking for stdlib.h... (cached) yes
checking for string.h... (cached) yes
checking for asprintf... yes
checking for fwprintf... yes
checking for putenv... (cached) yes
checking for setenv... yes
checking for setlocale... yes
checking for snprintf... (cached) yes
checking for wcslen... yes
checking whether _snprintf is declared... no
checking whether _snwprintf is declared... no
checking whether getc_unlocked is declared... yes
checking for nl_langinfo and CODESET... (cached) yes
checking for LC_MESSAGES... yes
checking for shared library run path origin... done
checking for CFPreferencesCopyAppValue... (cached) no
checking for CFLocaleCopyCurrent... (cached) no
checking whether included gettext is requested... no
checking for GNU gettext in libc... yes
checking whether to use NLS... yes
checking where the gettext function comes from... libc
Finished configuring src/extra/intl directory

using as R_SHELL for scripts ... /bin/sh
configure: creating ./config.status
config.status: creating Makeconf
config.status: creating Makefile
config.status: creating doc/Makefile
config.status: creating doc/html/Makefile
config.status: creating doc/manual/Makefile
config.status: creating etc/Makefile
config.status: creating etc/Makeconf
config.status: creating etc/Renviron
config.status: creating etc/ldpaths
config.status: creating m4/Makefile
config.status: creating po/Makefile.in
config.status: creating share/Makefile
config.status: creating src/Makefile
config.status: creating src/appl/Makefile
config.status: creating src/extra/Makefile
config.status: creating src/extra/blas/Makefile
config.status: creating src/extra/bzip2/Makefile
config.status: creating src/extra/intl/Makefile
config.status: creating src/extra/pcre/Makefile
config.status: creating src/extra/tre/Makefile
config.status: creating src/extra/xdr/Makefile
config.status: creating src/extra/xz/Makefile
config.status: creating src/extra/zlib/Makefile
config.status: creating src/include/Makefile
config.status: creating src/include/Rmath.h0
config.status: creating src/include/R_ext/Makefile
config.status: creating src/library/Recommended/Makefile
config.status: creating src/library/Makefile
config.status: creating src/library/base/DESCRIPTION
config.status: creating src/library/base/Makefile
config.status: creating src/library/compiler/DESCRIPTION
config.status: creating src/library/compiler/Makefile
config.status: creating src/library/datasets/DESCRIPTION
config.status: creating src/library/datasets/Makefile
config.status: creating src/library/graphics/DESCRIPTION
config.status: creating src/library/graphics/Makefile
config.status: creating src/library/grDevices/DESCRIPTION
config.status: creating src/library/grDevices/Makefile
config.status: creating src/library/grDevices/src/Makefile
config.status: creating src/library/grid/DESCRIPTION
config.status: creating src/library/grid/Makefile
config.status: creating src/library/grid/src/Makefile
config.status: creating src/library/methods/DESCRIPTION
config.status: creating src/library/methods/Makefile
config.status: creating src/library/methods/src/Makefile
config.status: creating src/library/profile/Makefile
config.status: creating src/library/stats/DESCRIPTION
config.status: creating src/library/stats/Makefile
config.status: creating src/library/stats/src/Makefile
config.status: creating src/library/stats4/DESCRIPTION
config.status: creating src/library/stats4/Makefile
config.status: creating src/library/splines/DESCRIPTION
config.status: creating src/library/splines/Makefile
config.status: creating src/library/splines/src/Makefile
config.status: creating src/library/tcltk/DESCRIPTION
config.status: creating src/library/tcltk/Makefile
config.status: creating src/library/tcltk/src/Makefile
config.status: creating src/library/tools/DESCRIPTION
config.status: creating src/library/tools/Makefile
config.status: creating src/library/tools/src/Makefile
config.status: creating src/library/utils/DESCRIPTION
config.status: creating src/library/utils/Makefile
config.status: creating src/main/Makefile
config.status: creating src/modules/Makefile
config.status: creating src/modules/X11/Makefile
config.status: creating src/modules/internet/Makefile
config.status: creating src/modules/lapack/Makefile
config.status: creating src/modules/vfonts/Makefile
config.status: creating src/nmath/Makefile
config.status: creating src/nmath/standalone/Makefile
config.status: creating src/scripts/Makefile
config.status: creating src/scripts/R.sh
config.status: creating src/scripts/Rcmd
config.status: creating src/scripts/f77_f2c
config.status: creating src/scripts/mkinstalldirs
config.status: creating src/scripts/pager
config.status: creating src/unix/Makefile
config.status: creating tests/Makefile
config.status: creating tests/Embedding/Makefile
config.status: creating tests/Examples/Makefile
config.status: creating tests/Native/Makefile
config.status: creating tools/Makefile
config.status: creating src/include/config.h
config.status: executing libtool commands
config.status: executing po-directories commands
config.status: creating po/POTFILES
config.status: creating po/Makefile
config.status: executing stamp-h commands

R is now configured for i686-suse-linux-gnu

  Source directory:          .
  Installation directory:    /usr

  C compiler:                gcc -std=gnu99  -march=i586 -mtune=i686 -fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables
  Fortran 77 compiler:       gfortran  -march=i586 -mtune=i686 -fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables

  C++ compiler:              g++  -march=i586 -mtune=i686 -fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables
  Fortran 90/95 compiler:    gfortran -g -O2
  Obj-C compiler:	      

  Interfaces supported:      X11, tcltk
  External libraries:        readline
  Additional capabilities:   PNG, JPEG, TIFF, NLS, cairo
  Options enabled:           shared R library, shared BLAS, R profiling

  Recommended packages:      yes

configure: WARNING: I could not determine a PDF viewer
--- should use xdg-utils, but indeed no PDF viewer is installed. should I? ---



--- snipped lots of compilation ---

building package 'base'
make[4]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/src/library/base'
mkdir -p -- ../../../library/base/demo
mkdir -p -- ../../../library/base/po
make[4]: Leaving directory `/usr/src/packages/BUILD/R-2.13.2/src/library/base'
make[3]: Leaving directory `/usr/src/packages/BUILD/R-2.13.2/src/library/base'
make[3]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/src/library/tools'
building package 'tools'

-- builds fine ---

make[3]: Leaving directory `/usr/src/packages/BUILD/R-2.13.2/src/library/tools'
make[3]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/src/library/utils'
building package 'utils'

-- builds fine ---

make[3]: Leaving directory `/usr/src/packages/BUILD/R-2.13.2/src/library/utils'
make[3]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/src/library/grDevices'
building package 'grDevices'

---builds fine --

make[3]: Leaving directory `/usr/src/packages/BUILD/R-2.13.2/src/library/grDevices'
make[3]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/src/library/graphics'
building package 'graphics'

...----everythings looks ok, but now:

make[1]: Leaving directory `/usr/src/packages/BUILD/R-2.13.2/tests'
make[1]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/po'
make[2]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/po'
installing translations:
mkdir -p -- ../share/locale/en/LC_MESSAGES
  en
mkdir -p -- ../share/locale/en_GB/LC_MESSAGES
  en_GB
mkdir -p -- ../share/locale/es/LC_MESSAGES
  es
mkdir -p -- ../share/locale/fr/LC_MESSAGES
  fr
mkdir -p -- ../share/locale/de/LC_MESSAGES
  de
mkdir -p -- ../share/locale/it/LC_MESSAGES
  it
mkdir -p -- ../share/locale/ja/LC_MESSAGES
  ja
mkdir -p -- ../share/locale/ko/LC_MESSAGES
  ko
mkdir -p -- ../share/locale/nn/LC_MESSAGES
  nn
mkdir -p -- ../share/locale/pt_BR/LC_MESSAGES
  pt_BR
mkdir -p -- ../share/locale/ru/LC_MESSAGES
  ru
mkdir -p -- ../share/locale/tr/LC_MESSAGES
  tr
mkdir -p -- ../share/locale/zh_CN/LC_MESSAGES
  zh_CN
mkdir -p -- ../share/locale/zh_TW/LC_MESSAGES
  zh_TW
mkdir -p -- ../share/locale/en at quot/LC_MESSAGES
  en at quot
make[2]: Leaving directory `/usr/src/packages/BUILD/R-2.13.2/po'
make[1]: Leaving directory `/usr/src/packages/BUILD/R-2.13.2/po'

--- make docs gives seg-fault ?!

you should 'make docs' now ...
make[1]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/doc'

 *** caught segfault ***
address 0xffffffe3, cause 'memory not mapped'

Traceback:
 1: grep("[^[:blank:][:cntrl:]]", unlist(Rd[sections == "TEXT"]),     perl = TRUE, useBytes = TRUE)
 2: prepare2_Rd(Rd, Rdfile)
 3: tools:::prepare_Rd(tools::parse_Rd("./NEWS.Rd"), stages = "install")
 4: saveRDS(tools:::prepare_Rd(tools::parse_Rd("./NEWS.Rd"), stages = "install"),     "NEWS.rds")
aborting ...
/bin/sh: line 1: 19586 Done                    echo "options(warn=1);saveRDS(tools:::prepare_Rd(tools::parse_Rd(\"./NEWS.Rd\"), stages = 'install'), 'NEWS.rds')"
     19587 Segmentation fault      | ../bin/R --vanilla --slave
make[1]: *** [NEWS.rds] Error 139
make[1]: Leaving directory `/usr/src/packages/BUILD/R-2.13.2/doc'
make: [docs] Error 2 (ignored)
make[1]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/src/library'
make[2]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/src/library'
installing parsed Rd
make[3]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/src/library'

 *** caught segfault ***
address 0xffffffe3, cause 'memory not mapped'

Traceback:
 1: grep("[^[:blank:][:cntrl:]]", unlist(Rd[sections == "TEXT"]),     perl = TRUE, useBytes = TRUE)
 2: prepare2_Rd(Rd, Rdfile)
 3: prepare_Rd(f, encoding = encoding, defines = os, stages = stages,     warningCalls = FALSE, stage2 = step > 1L, stage3 = step >         2L)
 4:
 FUN(c("/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/AIC.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ARMAacf.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ARMAtoMA.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Beta.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Binomial.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Cauchy.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Chisquare.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Distributions.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Exponential.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Fdist.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/GammaDist.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Geometric.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/HoltWinters.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Hypergeometric.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/IQR.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/KalmanLike.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Logistic.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Lognormal.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Multinom.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/NLSstAsymptotic.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/NLSstClosestX.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/NLSstLfAsymptote.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/NLSstRtAsymptote.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/NegBinomial.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Normal.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Poisson.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSD.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSasymp.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSasympOff.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSasympOrig.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSbiexp.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSfol.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSfpl.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSgompertz.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSlogis.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSmicmen.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSweibull.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SignRank.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/StructTS.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/TDist.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Tukey.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/TukeyHSD.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Uniform.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Weibull.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Wilcoxon.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/acf.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/acf2AR.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/add1.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/addmargins.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/aggregate.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/alias.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/anova.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/anova.glm.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/anova.lm.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/anova.mlm.Rd",
 "/usr/src/packages/BUILD/
 R-2.13.2/src/library/stats/man/ansari.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/aov.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/approxfun.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ar.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ar.ols.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/arima.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/arima.sim.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/arima0.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/as.hclust.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/asOneSidedFormula.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ave.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/bandwidth.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/bartlett.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/binom.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/biplot.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/biplot.princomp.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/birthday.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/box.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/cancor.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/case.names.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/checkMFClasses.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/chisq.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/cmdscale.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/coef.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/complete.cases.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/confint.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/constrOptim.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/contrast.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/contrasts.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/convolve.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/cophenetic.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/cor.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/cor.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/cov.wt.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/cpgram.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/cutree.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/decompose.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/delete.response.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/dendrapply.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/dendrogram.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/density.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/deriv.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/deviance.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/df.residual.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/diffinv.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/dist.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/dummy.coef.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ecdf.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/eff.aovlist.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/effects.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/embed.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/expand.model.frame.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/extractAIC.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/factanal.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/factor.scope.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/family.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/fft.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/filter.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/fisher.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/fitted.values.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/fivenum.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/fligner.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/formula.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/formula.nls.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/friedman.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ftable.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ftable.formula.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/getInitial.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/glm.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/glm.control.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/glm.summaries.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/hclust.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/heatmap.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/identify.hclust.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/influence.measures.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/integrate.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/interaction.plot.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/is.empty.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/isoreg.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/kernapply.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/kernel.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/kmeans.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/kruskal.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ks.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ksmooth.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/lag.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/lag.plot.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/line.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/lm.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/lm.influence.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/lm.summaries.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/lmfit.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/loadings.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/loess.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/loess.control.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/logLik.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/loglin.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/lowess.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ls.diag.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ls.print.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/lsfit.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/mad.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/mahalanobis.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/make.link.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/makepredictcall.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/manova.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/mantelhaen.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/mauchly.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/mcnemar.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/median.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/medpolish.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/model.extract.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/model.frame.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/model.matrix.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/model.tables.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/monthplot.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/mood.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/na.action.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/na.contiguous.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/na.fail.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/nafns.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/naprint.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/nextn.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/nlm.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/nlminb.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/nls.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/nls.control.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/nobs.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/numericDeriv.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/offset.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/oneway.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/optim.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/optimize.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/order.dendrogram.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/p.adjust.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/pairwise.prop.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/pairwise.t.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/pairwise.table.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/pairwise.wilcox.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.HoltWinters.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.acf.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.density.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.isoreg.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.lm.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.ppr.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.profile.nls.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.spec.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.stepfun.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.ts.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/poisson.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/poly.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/power.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/power.anova.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/power.prop.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/power.t.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/pp.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ppoints.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ppr.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/prcomp.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/predict.HoltWinters.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/predict.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/predict.arima.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/predict.glm.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/predict.lm.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/predict.loess.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/predict.nls.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/predict.smooth.spline.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/preplot.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/princomp.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/print.power.htest.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/print.ts.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/printCoefmat.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/profile.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/profile.nls.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/proj.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/prop.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/prop.trend.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/qqnorm.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/quade.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/quantile.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/r2dtable.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/read.ftable.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/rect.hclust.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/relevel.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/reorder.dendrogram.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/reorder.factor.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/replications.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/reshape.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/residuals.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/runmed.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/scatter.smooth.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/screeplot.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/sd.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/se.contrast.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/selfStart.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/setNames.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/shapiro.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/simulate.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/smooth.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/smooth.spline.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/smoothEnds.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/sortedXyData.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/spec.ar.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/spec.pgram.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/spec.taper.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/spectrum.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/splinefun.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/start.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/stat.anova.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/stats-defunct.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/stats-deprecated.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/stats-package.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/step.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/stepfun.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/stl.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/stlmethods.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/summary.aov.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/summary.glm.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/summary.lm.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/summary.manova.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/summary.nls.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/summary.princomp.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/supsmu.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/symnum.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/t.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/termplot.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/terms.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/terms.formula.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/terms.object.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/time.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/toeplitz.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ts-defunct.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ts-methods.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ts.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ts.plot.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ts.union.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/tsSmooth.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/tsdiag.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/tsp.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/uniroot.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/update.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/update.formula.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/var.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/varimax.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/vcov.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/weighted.mean.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/weighted.residuals.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/weights.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/wilcox.test.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/window.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/xtabs.Rd",
 "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/zC.Rd")[[1L]], ...)
 5: lapply(files, .fetch_Rd_object) 6: .build_Rd_db(dir, manfiles,
 db_file = db_file, encoding = encoding,     built_file = built_file)
 7: tools:::.install_package_Rd_objects("./stats",
 "../../library/stats") aborting ... /bin/sh: line 2: 19617
 Done                    echo
 "options(warn=1);tools:::.install_package_Rd_objects('./stats',
 '../../library/stats')" 19618 Segmentation fault      |
 R_DEFAULT_PACKAGES=NULL ../../bin/R --vanilla --slave make[3]: ***
 [stats.Rdts] Error 1 make[3]: *** Waiting for unfinished jobs....

 *** caught segfault ***
address 0xffffffe3, cause 'memory not mapped'


--- and so on for each package
--- snipped a lot --

make[3]: Leaving directory `/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/src'
installing to /usr/src/packages/BUILD/R-2.13.2/library/survival/libs
** R
** data
**  moving datasets to lazyload DB
** inst
** preparing package for lazy loading
** help

 *** caught segfault ***
address 0xffffffe3, cause 'memory not mapped'

Traceback:
 1: grep("[^[:blank:][:cntrl:]]", unlist(Rd[sections == "TEXT"]),     perl = TRUE, useBytes = TRUE)
 2: prepare2_Rd(Rd, Rdfile)
 3: prepare_Rd(f, encoding = encoding, defines = os, stages = stages,     warningCalls = FALSE, stage2 = step > 1L, stage3 = step >         2L)
 4: FUN(c("/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/S[  407.724261] serial8250: too much work for irq4
urv.Rd", "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/aareg.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/aml.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/anova.coxph.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/attrassign.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/basehaz.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/bladder.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/cch.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/cgd.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/clogit.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/cluster.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/colon.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/cox.zph.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/coxph.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/coxph.control.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/coxph.detail.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/coxph.object.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/dsurvreg.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/frailty.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/heart.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/is.ratetable.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/kidney.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/lines.survfit.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/lung.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/mgus.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/model.frame.coxph.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/model.matrix.coxph.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/nwtco.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/ovarian.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/pbc.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/pbcseq.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/plot.aareg.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/plot.cox.zph.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/plot.survfit.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/predict.coxph.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/predict.survreg.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/print.aareg.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/print.summary.coxph.Rd",
"/tmp/RtmpNIJVkk/
R.INSTALL14eab96c/survival/man/print.summary.survexp.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/print.summary.survfit.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/print.survfit.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/pspline.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/pyears.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/ratetable.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/ratetableDate.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/rats.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/residuals.coxph.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/residuals.survreg.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/ridge.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/stanford2.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/strata.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/summary.aareg.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/summary.coxph.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/summary.survexp.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/summary.survfit.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survConcordance.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survSplit.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survdiff.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survexp.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survexp.fit.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survexp.us.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survfit.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survfit.coxph.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survfit.formula.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survfit.object.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survfitcoxph.fit.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survival-internal.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survobrien.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survreg.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survreg.control.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survreg.distributions.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survreg.object.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survregDtest.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/tcut.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/tobin.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/tt.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/untangle.specials.Rd",
"/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/veteran.Rd")[[1L]],     ...)
5: lapply(files, .fetch_Rd_object) 6: .build_Rd_db(dir, manfiles,
db_file = db_file, encoding = encoding,     built_file = built_file)
7: .install_package_Rd_objects(".", instdir, encoding) 8:
doTryCatch(return(expr), name, parentenv, handler) 9: tryCatchOne(expr,
names, parentenv, handlers[[1L]]) 10: tryCatchList(expr, classes,
parentenv, handlers) 11: tryCatch(expr, error = function(e) {    call
<- conditionCall(e)    if (!is.null(call)) {        if
(identical(call[[1L]], quote(doTryCatch)))             call <-
sys.call(-4L)        dcall <- deparse(call)[1L]        prefix <-
paste("Error in", dcall, ": ")        LONG <- 75L        msg <-
conditionMessage(e)        sm <- strsplit(msg, "\n")[[1L]]        w <-
14L + nchar(dcall, type = "w") + nchar(sm[1L], type = "w")        if
(is.na(w))             w <- 14L + nchar(dcall, type = "b") +
nchar(sm[1L],                 type = "b")        if (w >
LONG)             prefix <- paste(prefix, "\n  ", sep = "")    }
else prefix <- "Error : "    msg <- paste(prefix, conditionMessage(e),
"\n", sep = "")    .Internal(seterrmessage(msg[1L]))    if (!silent &&
identical(getOption("show.error.messages"),         TRUE))
{        cat(msg, file =
stderr())        .Internal(printDeferredWarnings())    }
invisible(structure(msg, class = "try-error"))}) 12:
try(.install_package_Rd_objects(".", instdir, encoding)) 13:
do_install_source(pkg_name, instdir, pkg, desc) 14: do_install(pkg) 15:
tools:::.install_packages()
aborting ... /usr/src/packages/BUILD/R-2.13.2/bin/INSTALL: line 34:
19667 Done                    echo 'tools:::.install_packages()' 19668
Segmentation fault      | R_DEFAULT_PACKAGES= LC_COLLATE=C
"${R_HOME}/bin/R" $myArgs --slave --args ${args} make[2]: ***
[survival.ts] Error 1 make[2]: Leaving directory
`/usr/src/packages/BUILD/R-2.13.2/src/library/Recommended' make[1]: ***
[recommended-packages] Error 2 make[1]: Leaving directory
`/usr/src/packages/BUILD/R-2.13.2/src/library/Recommended' make: ***
[stamp-recommended] Error 2 error: Bad exit status
from /var/tmp/rpm-tmp.54603 (%build)


RPM build errors:
    cannot open Pubkeys index using db3 - No such file or directory (2)
    Bad exit status from /var/tmp/rpm-tmp.54603 (%build)
[  414.685190] Power down.

---

> 
> There is no problem with e.g. i686 Fedora 14.
> 

Detlef


From pdalgd at gmail.com  Wed Oct  5 12:00:21 2011
From: pdalgd at gmail.com (peter dalgaard)
Date: Wed, 5 Oct 2011 12:00:21 +0200
Subject: [Rd] problems (seg-faults) while trying to compile for older
	suse versions
In-Reply-To: <20111005110419.71f5890b@vknecht-intel.unibw-hamburg.de>
References: <20111005102435.3f2c4f62@vknecht-intel.unibw-hamburg.de>
	<alpine.LFD.2.02.1110050950380.3620@toucan.stats.ox.ac.uk>
	<20111005110419.71f5890b@vknecht-intel.unibw-hamburg.de>
Message-ID: <CB719886-7A6A-4077-A66C-91F4CE0518E8@gmail.com>


On Oct 5, 2011, at 11:04 , Detlef Steuer wrote:

> 
> 
>> 
>> On Wed, 5 Oct 2011, Detlef Steuer wrote:
>> 
>>> Hi!
>>> 
>>> While preparing 2.13.2 in the build service I get stuck for some older
>>> releases of openSUSE / SLED.
>>> 
>>> While it built fine for 2.13.1 now I get segfaults in 'make docs' and
>>> do so only for 32-bit architectures. This is not urgent, because only
>>> older releases are affected, nevertheless I would like to understand
>>> the cause.
>>> 
>>> Attached are what I think the relevant parts of a build-log, including
>>> tracebacks of some segfaults.
>> 
>> Nothing came through.  But it seems specific to your system (and no 
>> one reported anything in the run up to 2.13.2, including the RC test 
>> period nor with 2.13.1 patched).
> 
> Thank you for the answer.
> 
> Yes.
> 
> 2.13.1 patched worked fine till the  moment 2.13.2 was released.
> Shouldn't these be more or less identical? Anything changed?

PCRE got updated at some point, last change Sep 16 AFAICT (based on the NEWS file in R-devel -- I'd rather not check out R-2-13-branch again). Since you are getting trouble from grep() and friends, this could be the root of the issue. 

But doesn't SUSE have its own PCRE?

-pd


> 
> It may very well be some defect in the build service, but it is reproducible.
> 
> Here, this time inlined, the buildlog with traceback.
> 
> ---
> Using BUILD_ROOT=/var/cache/obs/worker/root_8/.mount
> Using BUILD_ARCH=i586:i486:i386
> Doing kvm build in /var/cache/obs/worker/root_8/root
> 
> build09 started "build R-base.spec" at Wed Oct  5 07:15:50 UTC 2011.
> 
> Building R for project 'devel:languages:R:base' repository 'openSUSE_11.1' arch 'i586' srcmd5 '851a0904debdcf2f239e357a2e6ccb00'
> 
> processing specfile /var/cache/obs/worker/root_8/.build-srcdir/R-base.spec ...
> running changelog2spec --target rpm --file /var/cache/obs/worker/root_8/.build-srcdir/R-base.spec
> init_buildsystem --cachedir /var/cache/build --prepare --clean --rpmlist /var/cache/obs/worker/root_8/.build.rpmlist /var/cache/obs/worker/root_8/.build-srcdir/R-base.spec build rpmlint-Factory ...
> 
> --- snip --- setting up build environment
> 
> installing libgcc43-4.3.3_20081022-9.5
> installing libgfortran43-4.3.3_20081022-9.5
> 
> installing gcc43-c++-4.3.3_20081022-9.5
> installing gcc43-fortran-4.3.3_20081022-9.5
> 
> installing gcc-c++-4.3-34.168
> installing gcc-fortran-4.3-34.168
> 
> --- begin configure ---
> 
> + cd R-2.13.2
> + export R_BROWSER=xdg-open
> + R_BROWSER=xdg-open
> + export R_PDFVIEWER=xdg-open
> + R_PDFVIEWER=xdg-open
> + CFLAGS='-march=i586 -mtune=i686 -fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables'
> + export CFLAGS
> + CXXFLAGS='-march=i586 -mtune=i686 -fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables'
> + export CXXFLAGS
> + FFLAGS='-march=i586 -mtune=i686 -fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables'
> + export FFLAGS
> + ./configure --host=i686-suse-linux-gnu --build=i686-suse-linux-gnu --target=i586-suse-linux --program-prefix= --prefix=/usr --exec-prefix=/usr --bindir=/usr/bin --sbindir=/usr/sbin --sysconfdir=/etc --datadir=/usr/share --includedir=/usr/include --libdir=/usr/lib --libexecdir=/usr/lib --localstatedir=/var --sharedstatedir=/usr/com --mandir=/usr/share/man --infodir=/usr/share/info --enable-R-shlib
> checking build system type... i686-suse-linux-gnu
> checking host system type... i686-suse-linux-gnu
> loading site script './config.site'
> loading build-specific script './config.site'
> checking for pwd... /bin/pwd
> checking whether builddir is srcdir... yes
> checking for working aclocal... found
> checking for working autoconf... found
> checking for working automake... found
> checking for working autoheader... found
> checking for gawk... gawk
> checking whether ln -s works... yes
> checking for bison... no
> checking for byacc... no
> checking for ar... ar
> checking for a BSD-compatible install... /usr/bin/install -c
> checking for sed... /usr/bin/sed
> checking for which... /usr/bin/which
> checking for less... /usr/bin/less
> checking for gtar... no
> checking for gnutar... no
> checking for tar... /bin/tar
> checking for tex... /usr/bin/tex
> checking for latex... /usr/bin/latex
> checking for pdftex... /usr/bin/pdftex
> checking for pdflatex... /usr/bin/pdflatex
> checking for makeindex... /usr/bin/makeindex
> checking for makeinfo... /usr/bin/makeinfo
> checking whether makeinfo version is at least 4.7... yes
> checking for install-info... /usr/bin/install-info
> checking for texi2dvi... /usr/bin/texi2dvi
> checking for unzip... no
> checking for zip... no
> checking for gzip... /usr/bin/gzip
> checking for bzip2... /usr/bin/bzip2
> using default browser ... xdg-open
> checking for xdg-open... no
> checking for acroread... no
> checking for acroread4... no
> checking for xdg-open... no
> checking for evince... no
> checking for xpdf... no
> checking for gv... no
> checking for gnome-gv... no
> checking for ggv... no
> checking for okular... no
> checking for kpdf... no
> checking for open... no
> checking for gpdf... no
> checking for kghostview... no
> configure: WARNING: I could not determine a PDF viewer
> checking for notangle... false
> checking for pkg-config... /usr/bin/pkg-config
> checking for i686-suse-linux-gnu-gcc... no
> checking for gcc... gcc
> checking whether the C compiler works... yes
> checking for C compiler default output file name... a.out
> checking for suffix of executables... 
> checking whether we are cross compiling... no
> checking for suffix of object files... o
> checking whether we are using the GNU C compiler... yes
> checking whether gcc accepts -g... yes
> checking for gcc option to accept ISO C89... none needed
> checking how to run the C preprocessor... gcc -E
> checking for grep that handles long lines and -e... /usr/bin/grep
> checking for egrep... /usr/bin/grep -E
> checking whether gcc needs -traditional... no
> checking how to run the C preprocessor... gcc -E
> checking for gfortran... gfortran
> checking for i686-suse-linux-gnu-g77... (cached) gfortran
> checking whether we are using the GNU Fortran 77 compiler... yes
> checking whether gfortran accepts -g... yes
> checking for i686-suse-linux-gnu-g++... no
> checking for i686-suse-linux-gnu-c++... no
> checking for i686-suse-linux-gnu-gpp... no
> checking for i686-suse-linux-gnu-aCC... no
> checking for i686-suse-linux-gnu-CC... no
> checking for i686-suse-linux-gnu-cxx... no
> checking for i686-suse-linux-gnu-cc++... no
> checking for i686-suse-linux-gnu-cl.exe... no
> checking for i686-suse-linux-gnu-FCC... no
> checking for i686-suse-linux-gnu-KCC... no
> checking for i686-suse-linux-gnu-RCC... no
> checking for i686-suse-linux-gnu-xlC_r... no
> checking for i686-suse-linux-gnu-xlC... no
> checking for g++... g++
> checking whether we are using the GNU C++ compiler... yes
> checking whether g++ accepts -g... yes
> checking how to run the C++ preprocessor... g++ -E
> checking whether __attribute__((visibility())) is supported... yes
> checking whether gcc accepts -fvisibility... yes
> checking whether gfortran accepts -fvisibility... yes
> checking for ANSI C header files... yes
> checking for sys/types.h... yes
> checking for sys/stat.h... yes
> checking for stdlib.h... yes
> checking for string.h... yes
> checking for memory.h... yes
> checking for strings.h... yes
> checking for inttypes.h... yes
> checking for stdint.h... yes
> checking for unistd.h... yes
> checking minix/config.h usability... no
> checking minix/config.h presence... no
> checking for minix/config.h... no
> checking whether it is safe to define __EXTENSIONS__... yes
> checking for i686-suse-linux-gnu-gcc... no
> checking for i686-suse-linux-gnu-objcc... no
> checking for i686-suse-linux-gnu-objc... no
> checking for i686-suse-linux-gnu-cc... no
> checking for i686-suse-linux-gnu-CC... no
> checking for gcc... gcc
> checking whether we are using the GNU Objective C compiler... no
> checking whether gcc accepts -g... no
> checking for Objective C++ compiler... trying some possibilities
> checking whether g++ can compile ObjC++... no
> checking whether  can compile ObjC++... no
> no working compiler found
> checking for a sed that does not truncate output... (cached) /usr/bin/sed
> checking for fgrep... /usr/bin/grep -F
> checking for ld used by gcc... /usr/i586-suse-linux/bin/ld
> checking if the linker (/usr/i586-suse-linux/bin/ld) is GNU ld... yes
> checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
> checking the name lister (/usr/bin/nm -B) interface... BSD nm
> checking the maximum length of command line arguments... 1572864
> checking whether the shell understands some XSI constructs... yes
> checking whether the shell understands "+="... yes
> checking for /usr/i586-suse-linux/bin/ld option to reload object files... -r
> checking for i686-suse-linux-gnu-objdump... no
> checking for objdump... objdump
> checking how to recognize dependent libraries... pass_all
> checking for i686-suse-linux-gnu-ar... (cached) ar
> checking for i686-suse-linux-gnu-strip... no
> checking for strip... strip
> checking for i686-suse-linux-gnu-ranlib... no
> checking for ranlib... ranlib
> checking command to parse /usr/bin/nm -B output from gcc object... ok
> checking for dlfcn.h... yes
> checking whether we are using the GNU C++ compiler... (cached) yes
> checking whether g++ accepts -g... (cached) yes
> checking how to run the C++ preprocessor... g++ -E
> checking for i686-suse-linux-gnu-g77... (cached) gfortran
> checking whether we are using the GNU Fortran 77 compiler... (cached) yes
> checking whether gfortran accepts -g... (cached) yes
> checking for objdir... .libs
> checking if gcc supports -fno-rtti -fno-exceptions... no
> checking for gcc option to produce PIC... -fPIC -DPIC
> checking if gcc PIC flag -fPIC -DPIC works... yes
> checking if gcc static flag -static works... yes
> checking if gcc supports -c -o file.o... yes
> checking if gcc supports -c -o file.o... (cached) yes
> checking whether the gcc linker (/usr/i586-suse-linux/bin/ld) supports shared libraries... yes
> checking whether -lc should be explicitly linked in... no
> checking dynamic linker characteristics... GNU/Linux ld.so
> checking how to hardcode library paths into programs... immediate
> checking whether stripping libraries is possible... yes
> checking if libtool supports shared libraries... yes
> checking whether to build shared libraries... yes
> checking whether to build static libraries... no
> checking for ld used by g++... /usr/i586-suse-linux/bin/ld
> checking if the linker (/usr/i586-suse-linux/bin/ld) is GNU ld... yes
> checking whether the g++ linker (/usr/i586-suse-linux/bin/ld) supports shared libraries... yes
> checking for g++ option to produce PIC... -fPIC -DPIC
> checking if g++ PIC flag -fPIC -DPIC works... yes
> checking if g++ static flag -static works... yes
> checking if g++ supports -c -o file.o... yes
> checking if g++ supports -c -o file.o... (cached) yes
> checking whether the g++ linker (/usr/i586-suse-linux/bin/ld) supports shared libraries... yes
> checking dynamic linker characteristics... GNU/Linux ld.so
> checking how to hardcode library paths into programs... immediate
> checking if libtool supports shared libraries... yes
> checking whether to build shared libraries... yes
> checking whether to build static libraries... no
> checking for gfortran option to produce PIC... -fPIC
> checking if gfortran PIC flag -fPIC works... yes
> checking if gfortran static flag -static works... yes
> checking if gfortran supports -c -o file.o... yes
> checking if gfortran supports -c -o file.o... (cached) yes
> checking whether the gfortran linker (/usr/i586-suse-linux/bin/ld) supports shared libraries... yes
> checking dynamic linker characteristics... GNU/Linux ld.so
> checking how to hardcode library paths into programs... immediate
> checking for cos in -lm... yes
> checking for sin in -lm... yes
> checking for dlopen in -ldl... yes
> checking readline/history.h usability... yes
> checking readline/history.h presence... yes
> checking for readline/history.h... yes
> checking readline/readline.h usability... yes
> checking readline/readline.h presence... yes
> checking for readline/readline.h... yes
> checking for rl_callback_read_char in -lreadline... yes
> checking for history_truncate_file... yes
> checking whether rl_completion_matches exists and is declared... yes
> checking for ANSI C header files... (cached) yes
> checking whether time.h and sys/time.h may both be included... yes
> checking for dirent.h that defines DIR... yes
> checking for library containing opendir... none required
> checking for sys/wait.h that is POSIX.1 compatible... yes
> checking arpa/inet.h usability... yes
> checking arpa/inet.h presence... yes
> checking for arpa/inet.h... yes
> checking dl.h usability... no
> checking dl.h presence... no
> checking for dl.h... no
> checking for dlfcn.h... (cached) yes
> checking elf.h usability... yes
> checking elf.h presence... yes
> checking for elf.h... yes
> checking fcntl.h usability... yes
> checking fcntl.h presence... yes
> checking for fcntl.h... yes
> checking floatingpoint.h usability... no
> checking floatingpoint.h presence... no
> checking for floatingpoint.h... no
> checking fpu_control.h usability... yes
> checking fpu_control.h presence... yes
> checking for fpu_control.h... yes
> checking glob.h usability... yes
> checking glob.h presence... yes
> checking for glob.h... yes
> checking grp.h usability... yes
> checking grp.h presence... yes
> checking for grp.h... yes
> checking locale.h usability... yes
> checking locale.h presence... yes
> checking for locale.h... yes
> checking netdb.h usability... yes
> checking netdb.h presence... yes
> checking for netdb.h... yes
> checking netinet/in.h usability... yes
> checking netinet/in.h presence... yes
> checking for netinet/in.h... yes
> checking pwd.h usability... yes
> checking pwd.h presence... yes
> checking for pwd.h... yes
> checking for strings.h... (cached) yes
> checking sys/param.h usability... yes
> checking sys/param.h presence... yes
> checking for sys/param.h... yes
> checking sys/select.h usability... yes
> checking sys/select.h presence... yes
> checking for sys/select.h... yes
> checking sys/socket.h usability... yes
> checking sys/socket.h presence... yes
> checking for sys/socket.h... yes
> checking for sys/stat.h... (cached) yes
> checking sys/resource.h usability... yes
> checking sys/resource.h presence... yes
> checking for sys/resource.h... yes
> checking sys/time.h usability... yes
> checking sys/time.h presence... yes
> checking for sys/time.h... yes
> checking sys/times.h usability... yes
> checking sys/times.h presence... yes
> checking for sys/times.h... yes
> checking sys/utsname.h usability... yes
> checking sys/utsname.h presence... yes
> checking for sys/utsname.h... yes
> checking time.h usability... yes
> checking time.h presence... yes
> checking for time.h... yes
> checking for unistd.h... (cached) yes
> checking errno.h usability... yes
> checking errno.h presence... yes
> checking for errno.h... yes
> checking for inttypes.h... (cached) yes
> checking limits.h usability... yes
> checking limits.h presence... yes
> checking for limits.h... yes
> checking stdarg.h usability... yes
> checking stdarg.h presence... yes
> checking for stdarg.h... yes
> checking stdbool.h usability... yes
> checking stdbool.h presence... yes
> checking for stdbool.h... yes
> checking for stdint.h... (cached) yes
> checking for string.h... (cached) yes
> checking whether setjmp.h is POSIX.1 compatible... yes
> checking whether sigsetjmp is declared... yes
> checking whether siglongjmp is declared... yes
> checking for GNU C library with version >= 2... yes
> checking return type of signal handlers... void
> checking for pid_t... yes
> checking for size_t... yes
> checking whether SIZE_MAX is declared... yes
> checking for blkcnt_t... yes
> checking for type of socket length... socklen_t *
> checking for stack_t... yes
> checking for intptr_t... yes
> checking for uintptr_t... yes
> checking whether byte ordering is bigendian... no
> checking for an ANSI C-conforming const... yes
> checking for gcc option to accept ISO C99... -std=gnu99
> checking for gcc -std=gnu99 option to accept ISO Standard C... (cached) -std=gnu99
> checking for inline... inline
> checking size of int... 4
> checking size of long... 4
> checking size of long long... 8
> checking size of double... 8
> checking size of long double... 12
> checking size of size_t... 4
> checking whether we can compute C Make dependencies... yes, using gcc -std=gnu99 -MM
> checking whether gcc -std=gnu99 supports -c -o FILE.lo... yes
> checking for gcc -std=gnu99 option to support OpenMP... -fopenmp
> checking how to get verbose linking output from gfortran... -v
> checking for Fortran 77 libraries of gfortran...  -L/usr/local/lib -L/usr/lib/gcc/i586-suse-linux/4.3 -L/usr/lib/gcc/i586-suse-linux/4.3/../../../../i586-suse-linux/lib -L/usr/lib/gcc/i586-suse-linux/4.3/../../.. -lgfortranbegin -lgfortran -lm
> checking how to get verbose linking output from gcc -std=gnu99... -v
> checking for C libraries of gcc -std=gnu99...  -L/usr/local/lib -L/usr/lib/gcc/i586-suse-linux/4.3 -L/usr/lib/gcc/i586-suse-linux/4.3/../../../../i586-suse-linux/lib -L/usr/lib/gcc/i586-suse-linux/4.3/../../.. -lgcc_s
> checking for dummy main to link with Fortran 77 libraries... none
> checking for Fortran 77 name-mangling scheme... lower case, underscore, no extra underscore
> checking whether gfortran appends underscores to external names... yes
> checking whether gfortran appends extra underscores to external names... no
> checking whether mixed C/Fortran code can be run... yes
> checking whether gfortran and gcc -std=gnu99 agree on int and double... yes
> checking whether gfortran and gcc -std=gnu99 agree on double complex... yes
> checking for gfortran option to support OpenMP... -fopenmp
> checking whether g++ accepts -M for generating dependencies... yes
> checking for g++ option to support OpenMP... -fopenmp
> checking whether we can compute ObjC Make dependencies... no
> checking whether C runtime needs -D__NO_MATH_INLINES... no
> checking for xmkmf... /usr/bin/xmkmf
> checking for off_t... yes
> checking for working alloca.h... yes
> checking for alloca... yes
> checking whether alloca is declared... yes
> checking whether expm1 exists and is declared... yes
> checking whether hypot exists and is declared... yes
> checking whether log1p exists and is declared... yes
> checking whether log2 exists and is declared... yes
> checking whether log10 exists and is declared... yes
> checking whether nearbyint exists and is declared... yes
> checking whether nearbyintl exists and is declared... yes
> checking whether powl exists and is declared... yes
> checking whether rint exists and is declared... yes
> checking whether rintl exists and is declared... yes
> checking whether va_copy exists and is declared... yes
> checking for isblank... yes
> checking whether time exists and is declared... yes
> checking for fseeko... yes
> checking for ftello... yes
> checking for matherr... yes
> checking whether fcntl exists and is declared... yes
> checking whether getgrgid exists and is declared... yes
> checking whether getpwuid exists and is declared... yes
> checking whether sigaction exists and is declared... yes
> checking whether sigaltstack exists and is declared... yes
> checking whether sigemptyset exists and is declared... yes
> checking whether fdopen exists and is declared... yes
> checking whether popen exists and is declared... yes
> checking whether setenv exists and is declared... yes
> checking whether unsetenv exists and is declared... yes
> checking whether getrlimit exists and is declared... yes
> checking whether getrusage exists and is declared... yes
> checking whether chmod exists and is declared... yes
> checking whether mkfifo exists and is declared... yes
> checking whether stat exists and is declared... yes
> checking whether umask exists and is declared... yes
> checking whether gettimeofday exists and is declared... yes
> checking whether times exists and is declared... yes
> checking whether access exists and is declared... yes
> checking whether chdir exists and is declared... yes
> checking whether execv exists and is declared... yes
> checking whether ftruncate exists and is declared... yes
> checking whether getcwd exists and is declared... yes
> checking whether getuid exists and is declared... yes
> checking whether link exists and is declared... yes
> checking whether readlink exists and is declared... yes
> checking whether symlink exists and is declared... yes
> checking whether sysconf exists and is declared... yes
> checking for putenv... yes
> checking whether putenv is declared... yes
> checking for vasprintf... yes
> checking whether vasprintf is declared... yes
> checking for mempcpy... yes
> checking for realpath... yes
> checking whether realpath is declared... yes
> checking whether glob exists and is declared... yes
> checking for isnan... yes
> checking whether isfinite is declared... yes
> checking whether isnan is declared... yes
> checking whether you have IEEE 754 floating-point arithmetic... yes
> checking whether putenv("FOO") can unset an environment variable... yes
> checking whether putenv("FOO=") can unset an environment variable... no
> checking for nl_langinfo and CODESET... yes
> checking for acosh... yes
> checking for asinh... yes
> checking for atanh... yes
> checking for mkdtemp... yes
> checking for snprintf... yes
> checking for strdup... yes
> checking for strncasecmp... yes
> checking for vsnprintf... yes
> checking whether acosh is declared... yes
> checking whether asinh is declared... yes
> checking whether atanh is declared... yes
> checking whether mkdtemp is declared... yes
> checking whether snprintf is declared... yes
> checking whether strdup is declared... yes
> checking whether strncasecmp is declared... yes
> checking whether vsnprintf is declared... yes
> checking for library containing connect... none required
> checking for library containing gethostbyname... none required
> checking for library containing xdr_string... none required
> checking for __setfpucw... no
> checking for working calloc... yes
> checking for working isfinite... yes
> checking for working log1p... yes
> checking whether ftell works correctly on files opened for append... yes
> checking for working sigaction... yes
> checking whether mktime sets errno... no
> checking whether C99 double complex is supported... 
> checking complex.h usability... yes
> checking complex.h presence... yes
> checking for complex.h... yes
> checking for double complex... yes
> yes
> checking whether cabs exists and is declared... yes
> checking whether carg exists and is declared... yes
> checking whether cexp exists and is declared... yes
> checking whether clog exists and is declared... yes
> checking whether csqrt exists and is declared... yes
> checking whether cpow exists and is declared... yes
> checking whether ccos exists and is declared... yes
> checking whether csin exists and is declared... yes
> checking whether ctan exists and is declared... yes
> checking whether cacos exists and is declared... yes
> checking whether casin exists and is declared... yes
> checking whether catan exists and is declared... yes
> checking whether ccosh exists and is declared... yes
> checking whether csinh exists and is declared... yes
> checking whether ctanh exists and is declared... yes
> checking for cblas_cdotu_sub in vecLib framework... no
> checking iconv.h usability... yes
> checking iconv.h presence... yes
> checking for iconv.h... yes
> checking for iconv... yes
> checking whether iconv accepts "UTF-8", "latin1", "ASCII" and "UCS-*"... yes
> checking for iconvlist... no
> checking for iconv... yes
> checking for iconv declaration... install-shextern size_t iconv (iconv_t cd, char * *inbuf, size_t *inbytesleft, char * *outbuf, size_t *outbytesleft);
> checking wchar.h usability... yes
> checking wchar.h presence... yes
> checking for wchar.h... yes
> checking wctype.h usability... yes
> checking wctype.h presence... yes
> checking for wctype.h... yes
> checking whether mbrtowc exists and is declared... yes
> checking whether wcrtomb exists and is declared... yes
> checking whether wcscoll exists and is declared... yes
> checking whether wcsftime exists and is declared... yes
> checking whether wcstod exists and is declared... yes
> checking whether mbstowcs exists and is declared... yes
> checking whether wcstombs exists and is declared... yes
> checking whether wctrans exists and is declared... yes
> checking whether iswblank exists and is declared... yes
> checking whether wctype exists and is declared... yes
> checking whether iswctype exists and is declared... yes
> checking for wctrans_t... yes
> checking for mbstate_t... yes
> checking for ICU... no
> checking for X... libraries , headers 
> checking for gethostbyname... yes
> checking for connect... yes
> checking for remove... yes
> checking for shmat... yes
> checking for IceConnectionNumber in -lICE... yes
> checking X11/Intrinsic.h usability... yes
> checking X11/Intrinsic.h presence... yes
> checking for X11/Intrinsic.h... yes
> checking for XtToolkitInitialize in -lXt... yes
> using X11 ... yes
> checking for KeySym... yes
> checking X11/Xmu/Atoms.h usability... yes
> checking X11/Xmu/Atoms.h presence... yes
> checking for X11/Xmu/Atoms.h... yes
> checking for XmuInternAtom in -lXmu... yes
> checking whether pkg-config knows about cairo and pango... yes
> checking whether cairo including pango is >= 1.2 and works... yes
> checking for tclConfig.sh... no
> checking for tclConfig.sh in library (sub)directories... /usr/lib/tclConfig.sh
> checking for tkConfig.sh... no
> checking for tkConfig.sh in library (sub)directories... /usr/lib/tkConfig.sh
> checking tcl.h usability... yes
> checking tcl.h presence... yes
> checking for tcl.h... yes
> checking tk.h usability... yes
> checking tk.h presence... yes
> checking for tk.h... yes
> checking whether compiling/linking Tcl/Tk code works... yes
> checking for BSD networking... yes
> checking if jpeglib version >= 6b... yes
> checking for jpeg_destroy_compress in -ljpeg... yes
> checking for main in -lz... yes
> checking if libpng version >= 1.2.7... yes
> checking for png_create_write_struct in -lpng... yes
> checking tiffio.h usability... yes
> checking tiffio.h presence... yes
> checking for tiffio.h... yes
> checking for TIFFOpen in -ltiff... yes
> checking rpc/types.h usability... yes
> checking rpc/types.h presence... yes
> checking for rpc/types.h... yes
> checking for rpc/xdr.h... yes
> checking for XDR support... yes
> checking whether zlib support needs to be compiled... yes
> checking mmap support for zlib... yes
> checking whether bzip2 support needs to be compiled... yes
> checking for lzma_version_number in -llzma... no
> checking whether PCRE support needs to be compiled... yes
> checking whether leap seconds are treated according to POSIX... yes
> checking for setitimer... yes
> checking for special C compiler options needed for large files... no
> checking for _FILE_OFFSET_BITS value needed for large files... 64
> checking for _LARGEFILE_SOURCE value needed for large files... no
> checking whether KERN_USRSTACK sysctl is supported... no
> checking for visible __lib_stack_end... yes
> checking for lpr... no
> checking for lp... no
> checking for paperconf... false
> checking for java... no
> checking for javac... no
> checking for javah... no
> checking for jar... no
> checking whether Java compiler works... no
> checking whether Java compiler works for version 1.4... no
> checking whether Java interpreter works... no
> checking for i686-suse-linux-gnu-gfortran... no
> checking for i686-suse-linux-gnu-g95... no
> checking for i686-suse-linux-gnu-xlf95... no
> checking for i686-suse-linux-gnu-f95... no
> checking for i686-suse-linux-gnu-fort... no
> checking for i686-suse-linux-gnu-ifort... no
> checking for i686-suse-linux-gnu-ifc... no
> checking for i686-suse-linux-gnu-efc... no
> checking for i686-suse-linux-gnu-pgf95... no
> checking for i686-suse-linux-gnu-lf95... no
> checking for i686-suse-linux-gnu-ftn... no
> checking for i686-suse-linux-gnu-xlf90... no
> checking for i686-suse-linux-gnu-f90... no
> checking for i686-suse-linux-gnu-pgf90... no
> checking for i686-suse-linux-gnu-pghpf... no
> checking for i686-suse-linux-gnu-epcf90... no
> checking for i686-suse-linux-gnu-g77... no
> checking for i686-suse-linux-gnu-xlf... no
> checking for i686-suse-linux-gnu-f77... no
> checking for i686-suse-linux-gnu-frt... no
> checking for i686-suse-linux-gnu-pgf77... no
> checking for i686-suse-linux-gnu-cf77... no
> checking for i686-suse-linux-gnu-fort77... no
> checking for i686-suse-linux-gnu-fl32... no
> checking for i686-suse-linux-gnu-af77... no
> checking for gfortran... gfortran
> checking whether we are using the GNU Fortran compiler... yes
> checking whether gfortran accepts -g... yes
> checking for i686-suse-linux-gnu-gfortran... gfortran
> checking whether we are using the GNU Fortran compiler... (cached) yes
> checking whether gfortran accepts -g... (cached) yes
> checking if libtool supports shared libraries... yes
> checking whether to build shared libraries... yes
> checking whether to build static libraries... no
> checking for gfortran option to produce PIC... -fPIC
> checking if gfortran PIC flag -fPIC works... yes
> checking if gfortran static flag -static works... yes
> checking if gfortran supports -c -o file.o... yes
> checking if gfortran supports -c -o file.o... (cached) yes
> checking whether the gfortran linker (/usr/i586-suse-linux/bin/ld) supports shared libraries... yes
> checking dynamic linker characteristics... GNU/Linux ld.so
> checking how to hardcode library paths into programs... immediate
> checking for Fortran flag to compile .f90 files... none
> checking for Fortran flag to compile .f95 files... none
> checking for gfortran option to support OpenMP... -fopenmp
> checking for recommended packages... yes
> checking whether NLS is requested... yes
> 
> Configuring src/extra/intl directory
> checking whether make sets $(MAKE)... yes
> checking for a thread-safe mkdir -p... /bin/mkdir -p
> checking for msgfmt... /usr/bin/msgfmt
> checking for gmsgfmt... /usr/bin/msgfmt
> checking for xgettext... /usr/bin/xgettext
> checking for msgmerge... /usr/bin/msgmerge
> checking whether we are using the GNU C Library 2 or newer... yes
> checking for i686-suse-linux-gnu-ranlib... ranlib
> checking for simple visibility declarations... yes
> checking for inline... inline
> checking for stdint.h... yes
> checking for stdlib.h... (cached) yes
> checking for unistd.h... (cached) yes
> checking for sys/param.h... (cached) yes
> checking for getpagesize... yes
> checking for working mmap... yes
> checking whether integer division by zero raises SIGFPE... yes
> checking for inttypes.h... yes
> checking for unsigned long long int... yes
> checking for inttypes.h... (cached) yes
> checking whether the inttypes.h PRIxNN macros are broken... no
> checking whether imported symbols can be declared weak... yes
> checking for multithread API to use... none
> checking argz.h usability... yes
> checking argz.h presence... yes
> checking for argz.h... yes
> checking for inttypes.h... (cached) yes
> checking for limits.h... (cached) yes
> checking for unistd.h... (cached) yes
> checking for sys/param.h... (cached) yes
> checking for getcwd... yes
> checking for getegid... yes
> checking for geteuid... yes
> checking for getgid... yes
> checking for getuid... yes
> checking for mempcpy... (cached) yes
> checking for munmap... yes
> checking for stpcpy... yes
> checking for strcasecmp... yes
> checking for strdup... (cached) yes
> checking for strtoul... yes
> checking for tsearch... yes
> checking for argz_count... yes
> checking for argz_stringify... yes
> checking for argz_next... yes
> checking for __fsetlocking... yes
> checking whether feof_unlocked is declared... yes
> checking whether fgets_unlocked is declared... yes
> checking for iconv... (cached) yes
> checking for iconv declaration... (cached) install-shextern size_t iconv (iconv_t cd, char * *inbuf, size_t *inbytesleft, char * *outbuf, size_t *outbytesleft);
> checking for NL_LOCALE_NAME macro... yes
> checking for bison... no
> checking for long long int... yes
> checking for long double... yes
> checking for wchar_t... yes
> checking for wint_t... yes
> checking for intmax_t... yes
> checking whether printf() supports POSIX/XSI format strings... yes
> checking whether we are using the GNU C Library 2.1 or newer... yes
> checking for stdint.h... (cached) yes
> checking for SIZE_MAX... yes
> checking for stdint.h... (cached) yes
> checking for CFPreferencesCopyAppValue... no
> checking for CFLocaleCopyCurrent... no
> checking for ptrdiff_t... yes
> checking stddef.h usability... yes
> checking stddef.h presence... yes
> checking for stddef.h... yes
> checking for stdlib.h... (cached) yes
> checking for string.h... (cached) yes
> checking for asprintf... yes
> checking for fwprintf... yes
> checking for putenv... (cached) yes
> checking for setenv... yes
> checking for setlocale... yes
> checking for snprintf... (cached) yes
> checking for wcslen... yes
> checking whether _snprintf is declared... no
> checking whether _snwprintf is declared... no
> checking whether getc_unlocked is declared... yes
> checking for nl_langinfo and CODESET... (cached) yes
> checking for LC_MESSAGES... yes
> checking for shared library run path origin... done
> checking for CFPreferencesCopyAppValue... (cached) no
> checking for CFLocaleCopyCurrent... (cached) no
> checking whether included gettext is requested... no
> checking for GNU gettext in libc... yes
> checking whether to use NLS... yes
> checking where the gettext function comes from... libc
> Finished configuring src/extra/intl directory
> 
> using as R_SHELL for scripts ... /bin/sh
> configure: creating ./config.status
> config.status: creating Makeconf
> config.status: creating Makefile
> config.status: creating doc/Makefile
> config.status: creating doc/html/Makefile
> config.status: creating doc/manual/Makefile
> config.status: creating etc/Makefile
> config.status: creating etc/Makeconf
> config.status: creating etc/Renviron
> config.status: creating etc/ldpaths
> config.status: creating m4/Makefile
> config.status: creating po/Makefile.in
> config.status: creating share/Makefile
> config.status: creating src/Makefile
> config.status: creating src/appl/Makefile
> config.status: creating src/extra/Makefile
> config.status: creating src/extra/blas/Makefile
> config.status: creating src/extra/bzip2/Makefile
> config.status: creating src/extra/intl/Makefile
> config.status: creating src/extra/pcre/Makefile
> config.status: creating src/extra/tre/Makefile
> config.status: creating src/extra/xdr/Makefile
> config.status: creating src/extra/xz/Makefile
> config.status: creating src/extra/zlib/Makefile
> config.status: creating src/include/Makefile
> config.status: creating src/include/Rmath.h0
> config.status: creating src/include/R_ext/Makefile
> config.status: creating src/library/Recommended/Makefile
> config.status: creating src/library/Makefile
> config.status: creating src/library/base/DESCRIPTION
> config.status: creating src/library/base/Makefile
> config.status: creating src/library/compiler/DESCRIPTION
> config.status: creating src/library/compiler/Makefile
> config.status: creating src/library/datasets/DESCRIPTION
> config.status: creating src/library/datasets/Makefile
> config.status: creating src/library/graphics/DESCRIPTION
> config.status: creating src/library/graphics/Makefile
> config.status: creating src/library/grDevices/DESCRIPTION
> config.status: creating src/library/grDevices/Makefile
> config.status: creating src/library/grDevices/src/Makefile
> config.status: creating src/library/grid/DESCRIPTION
> config.status: creating src/library/grid/Makefile
> config.status: creating src/library/grid/src/Makefile
> config.status: creating src/library/methods/DESCRIPTION
> config.status: creating src/library/methods/Makefile
> config.status: creating src/library/methods/src/Makefile
> config.status: creating src/library/profile/Makefile
> config.status: creating src/library/stats/DESCRIPTION
> config.status: creating src/library/stats/Makefile
> config.status: creating src/library/stats/src/Makefile
> config.status: creating src/library/stats4/DESCRIPTION
> config.status: creating src/library/stats4/Makefile
> config.status: creating src/library/splines/DESCRIPTION
> config.status: creating src/library/splines/Makefile
> config.status: creating src/library/splines/src/Makefile
> config.status: creating src/library/tcltk/DESCRIPTION
> config.status: creating src/library/tcltk/Makefile
> config.status: creating src/library/tcltk/src/Makefile
> config.status: creating src/library/tools/DESCRIPTION
> config.status: creating src/library/tools/Makefile
> config.status: creating src/library/tools/src/Makefile
> config.status: creating src/library/utils/DESCRIPTION
> config.status: creating src/library/utils/Makefile
> config.status: creating src/main/Makefile
> config.status: creating src/modules/Makefile
> config.status: creating src/modules/X11/Makefile
> config.status: creating src/modules/internet/Makefile
> config.status: creating src/modules/lapack/Makefile
> config.status: creating src/modules/vfonts/Makefile
> config.status: creating src/nmath/Makefile
> config.status: creating src/nmath/standalone/Makefile
> config.status: creating src/scripts/Makefile
> config.status: creating src/scripts/R.sh
> config.status: creating src/scripts/Rcmd
> config.status: creating src/scripts/f77_f2c
> config.status: creating src/scripts/mkinstalldirs
> config.status: creating src/scripts/pager
> config.status: creating src/unix/Makefile
> config.status: creating tests/Makefile
> config.status: creating tests/Embedding/Makefile
> config.status: creating tests/Examples/Makefile
> config.status: creating tests/Native/Makefile
> config.status: creating tools/Makefile
> config.status: creating src/include/config.h
> config.status: executing libtool commands
> config.status: executing po-directories commands
> config.status: creating po/POTFILES
> config.status: creating po/Makefile
> config.status: executing stamp-h commands
> 
> R is now configured for i686-suse-linux-gnu
> 
>  Source directory:          .
>  Installation directory:    /usr
> 
>  C compiler:                gcc -std=gnu99  -march=i586 -mtune=i686 -fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables
>  Fortran 77 compiler:       gfortran  -march=i586 -mtune=i686 -fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables
> 
>  C++ compiler:              g++  -march=i586 -mtune=i686 -fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables
>  Fortran 90/95 compiler:    gfortran -g -O2
>  Obj-C compiler:	      
> 
>  Interfaces supported:      X11, tcltk
>  External libraries:        readline
>  Additional capabilities:   PNG, JPEG, TIFF, NLS, cairo
>  Options enabled:           shared R library, shared BLAS, R profiling
> 
>  Recommended packages:      yes
> 
> configure: WARNING: I could not determine a PDF viewer
> --- should use xdg-utils, but indeed no PDF viewer is installed. should I? ---
> 
> 
> 
> --- snipped lots of compilation ---
> 
> building package 'base'
> make[4]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/src/library/base'
> mkdir -p -- ../../../library/base/demo
> mkdir -p -- ../../../library/base/po
> make[4]: Leaving directory `/usr/src/packages/BUILD/R-2.13.2/src/library/base'
> make[3]: Leaving directory `/usr/src/packages/BUILD/R-2.13.2/src/library/base'
> make[3]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/src/library/tools'
> building package 'tools'
> 
> -- builds fine ---
> 
> make[3]: Leaving directory `/usr/src/packages/BUILD/R-2.13.2/src/library/tools'
> make[3]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/src/library/utils'
> building package 'utils'
> 
> -- builds fine ---
> 
> make[3]: Leaving directory `/usr/src/packages/BUILD/R-2.13.2/src/library/utils'
> make[3]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/src/library/grDevices'
> building package 'grDevices'
> 
> ---builds fine --
> 
> make[3]: Leaving directory `/usr/src/packages/BUILD/R-2.13.2/src/library/grDevices'
> make[3]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/src/library/graphics'
> building package 'graphics'
> 
> ...----everythings looks ok, but now:
> 
> make[1]: Leaving directory `/usr/src/packages/BUILD/R-2.13.2/tests'
> make[1]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/po'
> make[2]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/po'
> installing translations:
> mkdir -p -- ../share/locale/en/LC_MESSAGES
>  en
> mkdir -p -- ../share/locale/en_GB/LC_MESSAGES
>  en_GB
> mkdir -p -- ../share/locale/es/LC_MESSAGES
>  es
> mkdir -p -- ../share/locale/fr/LC_MESSAGES
>  fr
> mkdir -p -- ../share/locale/de/LC_MESSAGES
>  de
> mkdir -p -- ../share/locale/it/LC_MESSAGES
>  it
> mkdir -p -- ../share/locale/ja/LC_MESSAGES
>  ja
> mkdir -p -- ../share/locale/ko/LC_MESSAGES
>  ko
> mkdir -p -- ../share/locale/nn/LC_MESSAGES
>  nn
> mkdir -p -- ../share/locale/pt_BR/LC_MESSAGES
>  pt_BR
> mkdir -p -- ../share/locale/ru/LC_MESSAGES
>  ru
> mkdir -p -- ../share/locale/tr/LC_MESSAGES
>  tr
> mkdir -p -- ../share/locale/zh_CN/LC_MESSAGES
>  zh_CN
> mkdir -p -- ../share/locale/zh_TW/LC_MESSAGES
>  zh_TW
> mkdir -p -- ../share/locale/en at quot/LC_MESSAGES
>  en at quot
> make[2]: Leaving directory `/usr/src/packages/BUILD/R-2.13.2/po'
> make[1]: Leaving directory `/usr/src/packages/BUILD/R-2.13.2/po'
> 
> --- make docs gives seg-fault ?!
> 
> you should 'make docs' now ...
> make[1]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/doc'
> 
> *** caught segfault ***
> address 0xffffffe3, cause 'memory not mapped'
> 
> Traceback:
> 1: grep("[^[:blank:][:cntrl:]]", unlist(Rd[sections == "TEXT"]),     perl = TRUE, useBytes = TRUE)
> 2: prepare2_Rd(Rd, Rdfile)
> 3: tools:::prepare_Rd(tools::parse_Rd("./NEWS.Rd"), stages = "install")
> 4: saveRDS(tools:::prepare_Rd(tools::parse_Rd("./NEWS.Rd"), stages = "install"),     "NEWS.rds")
> aborting ...
> /bin/sh: line 1: 19586 Done                    echo "options(warn=1);saveRDS(tools:::prepare_Rd(tools::parse_Rd(\"./NEWS.Rd\"), stages = 'install'), 'NEWS.rds')"
>     19587 Segmentation fault      | ../bin/R --vanilla --slave
> make[1]: *** [NEWS.rds] Error 139
> make[1]: Leaving directory `/usr/src/packages/BUILD/R-2.13.2/doc'
> make: [docs] Error 2 (ignored)
> make[1]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/src/library'
> make[2]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/src/library'
> installing parsed Rd
> make[3]: Entering directory `/usr/src/packages/BUILD/R-2.13.2/src/library'
> 
> *** caught segfault ***
> address 0xffffffe3, cause 'memory not mapped'
> 
> Traceback:
> 1: grep("[^[:blank:][:cntrl:]]", unlist(Rd[sections == "TEXT"]),     perl = TRUE, useBytes = TRUE)
> 2: prepare2_Rd(Rd, Rdfile)
> 3: prepare_Rd(f, encoding = encoding, defines = os, stages = stages,     warningCalls = FALSE, stage2 = step > 1L, stage3 = step >         2L)
> 4:
> FUN(c("/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/AIC.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ARMAacf.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ARMAtoMA.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Beta.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Binomial.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Cauchy.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Chisquare.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Distributions.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Exponential.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Fdist.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/GammaDist.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Geometric.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/HoltWinters.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Hypergeometric.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/IQR.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/KalmanLike.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Logistic.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Lognormal.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Multinom.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/NLSstAsymptotic.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/NLSstClosestX.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/NLSstLfAsymptote.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/NLSstRtAsymptote.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/NegBinomial.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Normal.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Poisson.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSD.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSasymp.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSasympOff.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSasympOrig.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSbiexp.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSfol.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSfpl.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSgompertz.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSlogis.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSmicmen.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SSweibull.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/SignRank.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/StructTS.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/TDist.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Tukey.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/TukeyHSD.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Uniform.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Weibull.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/Wilcoxon.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/acf.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/acf2AR.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/add1.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/addmargins.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/aggregate.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/alias.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/anova.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/anova.glm.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/anova.lm.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/anova.mlm.Rd",
> "/usr/src/packages/BUILD/
> R-2.13.2/src/library/stats/man/ansari.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/aov.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/approxfun.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ar.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ar.ols.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/arima.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/arima.sim.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/arima0.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/as.hclust.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/asOneSidedFormula.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ave.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/bandwidth.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/bartlett.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/binom.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/biplot.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/biplot.princomp.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/birthday.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/box.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/cancor.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/case.names.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/checkMFClasses.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/chisq.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/cmdscale.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/coef.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/complete.cases.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/confint.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/constrOptim.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/contrast.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/contrasts.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/convolve.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/cophenetic.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/cor.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/cor.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/cov.wt.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/cpgram.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/cutree.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/decompose.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/delete.response.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/dendrapply.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/dendrogram.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/density.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/deriv.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/deviance.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/df.residual.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/diffinv.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/dist.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/dummy.coef.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ecdf.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/eff.aovlist.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/effects.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/embed.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/expand.model.frame.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/extractAIC.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/factanal.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/factor.scope.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/family.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/fft.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/filter.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/fisher.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/fitted.values.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/fivenum.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/fligner.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/formula.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/formula.nls.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/friedman.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ftable.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ftable.formula.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/getInitial.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/glm.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/glm.control.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/glm.summaries.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/hclust.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/heatmap.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/identify.hclust.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/influence.measures.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/integrate.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/interaction.plot.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/is.empty.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/isoreg.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/kernapply.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/kernel.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/kmeans.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/kruskal.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ks.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ksmooth.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/lag.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/lag.plot.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/line.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/lm.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/lm.influence.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/lm.summaries.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/lmfit.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/loadings.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/loess.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/loess.control.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/logLik.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/loglin.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/lowess.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ls.diag.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ls.print.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/lsfit.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/mad.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/mahalanobis.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/make.link.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/makepredictcall.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/manova.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/mantelhaen.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/mauchly.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/mcnemar.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/median.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/medpolish.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/model.extract.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/model.frame.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/model.matrix.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/model.tables.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/monthplot.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/mood.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/na.action.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/na.contiguous.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/na.fail.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/nafns.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/naprint.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/nextn.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/nlm.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/nlminb.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/nls.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/nls.control.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/nobs.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/numericDeriv.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/offset.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/oneway.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/optim.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/optimize.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/order.dendrogram.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/p.adjust.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/pairwise.prop.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/pairwise.t.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/pairwise.table.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/pairwise.wilcox.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.HoltWinters.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.acf.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.density.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.isoreg.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.lm.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.ppr.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.profile.nls.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.spec.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.stepfun.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/plot.ts.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/poisson.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/poly.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/power.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/power.anova.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/power.prop.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/power.t.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/pp.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ppoints.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ppr.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/prcomp.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/predict.HoltWinters.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/predict.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/predict.arima.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/predict.glm.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/predict.lm.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/predict.loess.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/predict.nls.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/predict.smooth.spline.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/preplot.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/princomp.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/print.power.htest.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/print.ts.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/printCoefmat.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/profile.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/profile.nls.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/proj.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/prop.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/prop.trend.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/qqnorm.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/quade.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/quantile.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/r2dtable.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/read.ftable.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/rect.hclust.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/relevel.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/reorder.dendrogram.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/reorder.factor.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/replications.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/reshape.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/residuals.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/runmed.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/scatter.smooth.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/screeplot.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/sd.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/se.contrast.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/selfStart.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/setNames.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/shapiro.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/simulate.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/smooth.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/smooth.spline.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/smoothEnds.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/sortedXyData.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/spec.ar.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/spec.pgram.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/spec.taper.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/spectrum.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/splinefun.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/start.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/stat.anova.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/stats-defunct.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/stats-deprecated.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/stats-package.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/step.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/stepfun.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/stl.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/stlmethods.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/summary.aov.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/summary.glm.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/summary.lm.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/summary.manova.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/summary.nls.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/summary.princomp.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/supsmu.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/symnum.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/t.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/termplot.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/terms.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/terms.formula.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/terms.object.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/time.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/toeplitz.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ts-defunct.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ts-methods.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ts.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ts.plot.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/ts.union.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/tsSmooth.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/tsdiag.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/tsp.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/uniroot.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/update.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/update.formula.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/var.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/varimax.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/vcov.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/weighted.mean.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/weighted.residuals.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/weights.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/wilcox.test.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/window.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/xtabs.Rd",
> "/usr/src/packages/BUILD/R-2.13.2/src/library/stats/man/zC.Rd")[[1L]], ...)
> 5: lapply(files, .fetch_Rd_object) 6: .build_Rd_db(dir, manfiles,
> db_file = db_file, encoding = encoding,     built_file = built_file)
> 7: tools:::.install_package_Rd_objects("./stats",
> "../../library/stats") aborting ... /bin/sh: line 2: 19617
> Done                    echo
> "options(warn=1);tools:::.install_package_Rd_objects('./stats',
> '../../library/stats')" 19618 Segmentation fault      |
> R_DEFAULT_PACKAGES=NULL ../../bin/R --vanilla --slave make[3]: ***
> [stats.Rdts] Error 1 make[3]: *** Waiting for unfinished jobs....
> 
> *** caught segfault ***
> address 0xffffffe3, cause 'memory not mapped'
> 
> 
> --- and so on for each package
> --- snipped a lot --
> 
> make[3]: Leaving directory `/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/src'
> installing to /usr/src/packages/BUILD/R-2.13.2/library/survival/libs
> ** R
> ** data
> **  moving datasets to lazyload DB
> ** inst
> ** preparing package for lazy loading
> ** help
> 
> *** caught segfault ***
> address 0xffffffe3, cause 'memory not mapped'
> 
> Traceback:
> 1: grep("[^[:blank:][:cntrl:]]", unlist(Rd[sections == "TEXT"]),     perl = TRUE, useBytes = TRUE)
> 2: prepare2_Rd(Rd, Rdfile)
> 3: prepare_Rd(f, encoding = encoding, defines = os, stages = stages,     warningCalls = FALSE, stage2 = step > 1L, stage3 = step >         2L)
> 4: FUN(c("/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/S[  407.724261] serial8250: too much work for irq4
> urv.Rd", "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/aareg.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/aml.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/anova.coxph.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/attrassign.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/basehaz.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/bladder.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/cch.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/cgd.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/clogit.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/cluster.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/colon.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/cox.zph.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/coxph.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/coxph.control.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/coxph.detail.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/coxph.object.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/dsurvreg.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/frailty.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/heart.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/is.ratetable.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/kidney.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/lines.survfit.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/lung.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/mgus.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/model.frame.coxph.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/model.matrix.coxph.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/nwtco.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/ovarian.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/pbc.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/pbcseq.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/plot.aareg.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/plot.cox.zph.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/plot.survfit.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/predict.coxph.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/predict.survreg.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/print.aareg.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/print.summary.coxph.Rd",
> "/tmp/RtmpNIJVkk/
> R.INSTALL14eab96c/survival/man/print.summary.survexp.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/print.summary.survfit.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/print.survfit.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/pspline.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/pyears.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/ratetable.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/ratetableDate.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/rats.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/residuals.coxph.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/residuals.survreg.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/ridge.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/stanford2.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/strata.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/summary.aareg.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/summary.coxph.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/summary.survexp.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/summary.survfit.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survConcordance.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survSplit.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survdiff.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survexp.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survexp.fit.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survexp.us.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survfit.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survfit.coxph.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survfit.formula.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survfit.object.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survfitcoxph.fit.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survival-internal.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survobrien.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survreg.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survreg.control.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survreg.distributions.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survreg.object.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/survregDtest.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/tcut.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/tobin.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/tt.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/untangle.specials.Rd",
> "/tmp/RtmpNIJVkk/R.INSTALL14eab96c/survival/man/veteran.Rd")[[1L]],     ...)
> 5: lapply(files, .fetch_Rd_object) 6: .build_Rd_db(dir, manfiles,
> db_file = db_file, encoding = encoding,     built_file = built_file)
> 7: .install_package_Rd_objects(".", instdir, encoding) 8:
> doTryCatch(return(expr), name, parentenv, handler) 9: tryCatchOne(expr,
> names, parentenv, handlers[[1L]]) 10: tryCatchList(expr, classes,
> parentenv, handlers) 11: tryCatch(expr, error = function(e) {    call
> <- conditionCall(e)    if (!is.null(call)) {        if
> (identical(call[[1L]], quote(doTryCatch)))             call <-
> sys.call(-4L)        dcall <- deparse(call)[1L]        prefix <-
> paste("Error in", dcall, ": ")        LONG <- 75L        msg <-
> conditionMessage(e)        sm <- strsplit(msg, "\n")[[1L]]        w <-
> 14L + nchar(dcall, type = "w") + nchar(sm[1L], type = "w")        if
> (is.na(w))             w <- 14L + nchar(dcall, type = "b") +
> nchar(sm[1L],                 type = "b")        if (w >
> LONG)             prefix <- paste(prefix, "\n  ", sep = "")    }
> else prefix <- "Error : "    msg <- paste(prefix, conditionMessage(e),
> "\n", sep = "")    .Internal(seterrmessage(msg[1L]))    if (!silent &&
> identical(getOption("show.error.messages"),         TRUE))
> {        cat(msg, file =
> stderr())        .Internal(printDeferredWarnings())    }
> invisible(structure(msg, class = "try-error"))}) 12:
> try(.install_package_Rd_objects(".", instdir, encoding)) 13:
> do_install_source(pkg_name, instdir, pkg, desc) 14: do_install(pkg) 15:
> tools:::.install_packages()
> aborting ... /usr/src/packages/BUILD/R-2.13.2/bin/INSTALL: line 34:
> 19667 Done                    echo 'tools:::.install_packages()' 19668
> Segmentation fault      | R_DEFAULT_PACKAGES= LC_COLLATE=C
> "${R_HOME}/bin/R" $myArgs --slave --args ${args} make[2]: ***
> [survival.ts] Error 1 make[2]: Leaving directory
> `/usr/src/packages/BUILD/R-2.13.2/src/library/Recommended' make[1]: ***
> [recommended-packages] Error 2 make[1]: Leaving directory
> `/usr/src/packages/BUILD/R-2.13.2/src/library/Recommended' make: ***
> [stamp-recommended] Error 2 error: Bad exit status
> from /var/tmp/rpm-tmp.54603 (%build)
> 
> 
> RPM build errors:
>    cannot open Pubkeys index using db3 - No such file or directory (2)
>    Bad exit status from /var/tmp/rpm-tmp.54603 (%build)
> [  414.685190] Power down.
> 
> ---
> 
>> 
>> There is no problem with e.g. i686 Fedora 14.
>> 
> 
> Detlef
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Peter Dalgaard, Professor
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From m.cowley at garvan.org.au  Wed Oct  5 11:36:02 2011
From: m.cowley at garvan.org.au (Mark Cowley)
Date: Wed, 5 Oct 2011 20:36:02 +1100
Subject: [Rd] suppressing stderr output from system() calls
Message-ID: <972B666A-E4F0-4479-9C45-13428A5AD0B7@garvan.org.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111005/1df2fac2/attachment.pl>

From simon.urbanek at r-project.org  Wed Oct  5 16:45:46 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 5 Oct 2011 10:45:46 -0400
Subject: [Rd] suppressing stderr output from system() calls
In-Reply-To: <972B666A-E4F0-4479-9C45-13428A5AD0B7@garvan.org.au>
References: <972B666A-E4F0-4479-9C45-13428A5AD0B7@garvan.org.au>
Message-ID: <6F876B33-09D6-4E9B-9DBA-C2A648A32F8C@r-project.org>

See ?system, in particular ignore.stdout, ignore.stderr and intern.

Cheers,
Simon


On Oct 5, 2011, at 5:36 AM, Mark Cowley wrote:

> Dear list,
> I'm trying to suppress/redirect/squash the output from commands like install.packages, or download.file. The problem is that none of: sink(..., type="message"), sink(..., type="output"), capture.output, suppressMessages are quite doing the trick. Output gets written to the stderr stream, despite any combination of the above suppression commands.
> According to ?sink:
> Messages sent to ?stderr()? (including those from ?message?, ?warning? and ?stop?) can be diverted by ?sink(type = "message")? (see below).
> 
> I'm pretty sure it's the system(), or .Internal() calls which are the culprit, which currently write the majority (all?) of their output to the stderr stream.
> 
> Simple example:
> con <- file("stderr.txt", "w")
> sink(con, type="message")
> system("ls")
> sink(NULL, type="message")
> close(con)
> # instead of the output going to stderr.txt, it gets printed to the console.
> 
> # no good either
> capture.output(system("ls"))
> character(0)
> 
> This is an issue, since i'm writing GenePattern modules to run R code, and if anything is written to stderr, then the job gets hit with a 'job failed' status, when all that might have happened is an R package got installed, or a file got downloaded via FTP.
> 
> Any ideas? Can system() and .Internal() output be redirected to stdout?
> 
> cheers,
> Mark
> 
> 
> sessionInfo()
> R version 2.13.1 (2011-07-08)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
> 
> locale:
> [1] en_AU.UTF-8/en_AU.UTF-8/C/C/en_AU.UTF-8/en_AU.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base     
>> 
> 
> 
> 
> -----------------------------------------------------
> Mark Cowley, PhD
> 
> Pancreatic Cancer Program | Peter Wills Bioinformatics Centre
> Garvan Institute of Medical Research, Sydney, Australia
> -----------------------------------------------------
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Wed Oct  5 16:46:26 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 5 Oct 2011 15:46:26 +0100 (BST)
Subject: [Rd] suppressing stderr output from system() calls
In-Reply-To: <972B666A-E4F0-4479-9C45-13428A5AD0B7@garvan.org.au>
References: <972B666A-E4F0-4479-9C45-13428A5AD0B7@garvan.org.au>
Message-ID: <alpine.LFD.2.02.1110051545220.10651@gannet.stats.ox.ac.uk>

See ?system2 to answer your subject line.

But you seem confused about external programs and R's own stdout() 
connection.  Have you read the R News article on connections?

On Wed, 5 Oct 2011, Mark Cowley wrote:

> Dear list,
> I'm trying to suppress/redirect/squash the output from commands like install.packages, or download.file. The problem is that none of: sink(..., type="message"), sink(..., type="output"), capture.output, suppressMessages are quite doing the trick. Output gets written to the stderr stream, despite any combination of the above suppression commands.
> According to ?sink:
> Messages sent to ?stderr()? (including those from ?message?, ?warning? and ?stop?) can be diverted by ?sink(type = "message")? (see below).
>
> I'm pretty sure it's the system(), or .Internal() calls which are the culprit, which currently write the majority (all?) of their output to the stderr stream.
>
> Simple example:
> con <- file("stderr.txt", "w")
> sink(con, type="message")
> system("ls")
> sink(NULL, type="message")
> close(con)
> # instead of the output going to stderr.txt, it gets printed to the console.
>
> # no good either
> capture.output(system("ls"))
> character(0)
>
> This is an issue, since i'm writing GenePattern modules to run R code, and if anything is written to stderr, then the job gets hit with a 'job failed' status, when all that might have happened is an R package got installed, or a file got downloaded via FTP.
>
> Any ideas? Can system() and .Internal() output be redirected to stdout?
>
> cheers,
> Mark
>
>
> sessionInfo()
> R version 2.13.1 (2011-07-08)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>
> locale:
> [1] en_AU.UTF-8/en_AU.UTF-8/C/C/en_AU.UTF-8/en_AU.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>
>
>
> -----------------------------------------------------
> Mark Cowley, PhD
>
> Pancreatic Cancer Program | Peter Wills Bioinformatics Centre
> Garvan Institute of Medical Research, Sydney, Australia
> -----------------------------------------------------
>
>
> 	[[alternative HTML version deleted]]
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From mtmorgan at fhcrc.org  Wed Oct  5 18:59:39 2011
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Wed, 05 Oct 2011 09:59:39 -0700
Subject: [Rd] suppressing stderr output from system() calls
In-Reply-To: <972B666A-E4F0-4479-9C45-13428A5AD0B7@garvan.org.au>
References: <972B666A-E4F0-4479-9C45-13428A5AD0B7@garvan.org.au>
Message-ID: <4E8C8CFB.60107@fhcrc.org>

On 10/05/2011 02:36 AM, Mark Cowley wrote:
> Dear list,

> I'm trying to suppress/redirect/squash the output from commands like
> install.packages, or download.file. The problem is that none of:
> sink(..., type="message"), sink(..., type="output"), capture.output,
> suppressMessages are quite doing the trick. Output gets written to
> the stderr stream, despite any combination of the above suppression
> commands.

Hi Mark --

For download.file, the argument quiet=TRUE suppresses output messages; 
this option can be used in ... for install.packages, too (according to 
the documentation). This is good enough to quieten the regular chatter 
on a successful operation. To catch errors and suppress warnings also, 
maybe a construct like

url = "http://r-project.org/doesnotexist"
tryCatch(suppressWarnings(
     capture.output(download.file(url, tempfile(), quiet=TRUE))),
     error=function(...) {})

Martin

> According to ?sink:
> Messages sent to ?stderr()? (including those from ?message?, ?warning? and ?stop?) can be diverted by ?sink(type = "message")? (see below).
>
> I'm pretty sure it's the system(), or .Internal() calls which are the culprit, which currently write the majority (all?) of their output to the stderr stream.
>
> Simple example:
> con<- file("stderr.txt", "w")
> sink(con, type="message")
> system("ls")
> sink(NULL, type="message")
> close(con)
> # instead of the output going to stderr.txt, it gets printed to the console.
>
> # no good either
> capture.output(system("ls"))
> character(0)
>
> This is an issue, since i'm writing GenePattern modules to run R code, and if anything is written to stderr, then the job gets hit with a 'job failed' status, when all that might have happened is an R package got installed, or a file got downloaded via FTP.
>
> Any ideas? Can system() and .Internal() output be redirected to stdout?
>
> cheers,
> Mark
>
>
> sessionInfo()
> R version 2.13.1 (2011-07-08)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>
> locale:
> [1] en_AU.UTF-8/en_AU.UTF-8/C/C/en_AU.UTF-8/en_AU.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>
>
>
> -----------------------------------------------------
> Mark Cowley, PhD
>
> Pancreatic Cancer Program | Peter Wills Bioinformatics Centre
> Garvan Institute of Medical Research, Sydney, Australia
> -----------------------------------------------------
>
>
> 	[[alternative HTML version deleted]]
>
>
>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Computational Biology
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N. PO Box 19024 Seattle, WA 98109

Location: M1-B861
Telephone: 206 667-2793


From ripley at stats.ox.ac.uk  Wed Oct  5 19:04:41 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 5 Oct 2011 18:04:41 +0100 (BST)
Subject: [Rd] R-devel (2.14 alpha) Windows binary
In-Reply-To: <alpine.LFD.2.02.1110050947210.3620@toucan.stats.ox.ac.uk>
References: <CAF42j23ff7d8O77RLjdPuhunJsNbgcYLrqSAqmdN79doFNCeJA@mail.gmail.com>
	<F2FEE7DF-8F0D-4F3E-8A28-6B5EFEAE1612@cbs.dk>
	<alpine.LFD.2.02.1110050947210.3620@toucan.stats.ox.ac.uk>
Message-ID: <alpine.LFD.2.02.1110051742260.15319@gannet.stats.ox.ac.uk>

An automated build (done on winbuilder) will take a few days: people 
are too busy this week.

For the time being, I have put a current Windows installer for R 
2.14.0 alpha at
http://www.stats.ox.ac.uk/pub/RWin/R-2.14.0alpha-win.exe
I am unlikely to update it often (and I too am busy this week).

On Wed, 5 Oct 2011, Prof Brian Ripley wrote:

> On Wed, 5 Oct 2011, Peter Dalgaard wrote:
>
>> I suspect that the Windows build system just hasn't caught on to the short 
>> time between 2.13.2 and the start of run-in for 2.14.0. I think the usual 
>> logic is that pre-releases of the next version replace the patch releases 
>> of the old one (by definition, there shouldn't be updates to 2.13.2 
>> anyway).
>
> Correct, but it also does not have a 'R 2.15.0 devel' (not that there is such 
> a thing: R-devel does not have a version number). In fact it has
>
> ncftp /pub/R/bin/windows/base > ls -l
> ...
> -rw-rw-r--    1 0        1001     40213201 Sep 30 19:18 R-2.13.2-win.exe
> -rw-rw-r--    1 0        1001     41018043 Oct  4 11:49 
> R-2.13.2patched-win.exe
> -rw-rw-r--    1 0        1001     47707488 Oct  2 10:45 R-2.14.0dev-win.exe
> ...
>
> so R-2.14.0dev-win.exe would be a pretty good surrogate for R 2.14.0 alpha 
> until that is available.
>
>> 
>> -pd
>> 
>> On Oct 5, 2011, at 00:46 , Dan Tenenbaum wrote:
>> 
>>> Hello,
>>> This question popped up on the bioc-devel list, I'm forwarding it here.
>>> 
>>> I know that sources for R-2.14 alpha can be found here:
>>> 
>>> http://cran.r-project.org/src/base-prerelease/
>>> 
>>> But the OP (below) is asking about Windows binaries.
>>> 
>>> Dan
>>> 
>>> 
>>> 
>>> ---------- Forwarded message ----------
>>> From: Stefan McKinnon H?j-Edwards <Stefan.Hoj-Edwards at agrsci.dk>
>>> Date: 2011/10/4
>>> Subject: Re: [Bioc-devel] Bioc 2.9 New Package submissions. The
>>> October deadlines are fast approaching.
>>> To: "bioc-devel at r-project.org" <bioc-devel at r-project.org>
>>> 
>>> 
>>> According to the BioC release plan, we should use R-2.14.0 devel-alpha
>>> to check our packages.
>>> But on cran, we can either choose R 2.13.2
>>> (http://cran.r-project.org/bin/windows/base/) or R 2.15.0 devel
>>> (http://cran.r-project.org/bin/windows/base/rdevel.html). Am I missing
>>> something? And will it again be possible to get the binaries for
>>> Windows of the 2.14.0 devel-alpha?
>>> 
>>> 
>>> Kind regards
>>> Stefan McKinnon H?j-Edwards              Dept. of Molecular Biology and 
>>> Genetics
>>> Ph.D. Fellow                             Aarhus University
>>>                                         Blichers All? 20, Postboks 50
>>>                                         DK-8830 Tjele
>>> Tel.: +45 8715 7969                      Tel.: +45 8715 6000
>>> Email: Stefan.Hoj-Edwards at agrsci.dk      Web: www.agrsci.dk
>>> 
>>> 
>>> 
>>> 
>>> -----Oprindelig meddelelse-----
>>> Date: Mon, 03 Oct 2011 16:36:15 -0700
>>> From: Marc Carlson <mcarlson at fhcrc.org>
>>> To: bioc-devel at r-project.org
>>> Subject: [Bioc-devel] Bioc 2.9 New Package submissions. The October
>>>        deadlines are fast approaching.
>>> Message-ID: <4E8A46EF.3030007 at fhcrc.org>
>>> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>>> 
>>> Dear Bioconductor developers,
>>> 
>>> 
>>> This announcement is for package authors who are in the process of
>>> developing packages for inclusion in the upcoming 2.9 release of
>>> Bioconductor in October.
>>> 
>>> The deadline to make a submission for this release is going to be
>>> October 10th, 2011. Packages submitted after the deadline will probably
>>> not provide us with sufficient time for inclusion in this release.
>>> Earlier submissions are encouraged as it provides more time to correct
>>> issues raised during the review process and probably has an improved
>>> chance of making it into the release.
>>> 
>>> If you do not have your package ready in time for this deadline, your
>>> package will still be included in our development branch of Bioconductor
>>> and will be scheduled for inclusion in the subsequent release version of
>>> Bioconductor.
>>> 
>>> 
>>> Other important deadlines to consider are listed on our Release
>>> schedule. If you have packages in the repository (and most of you do),
>>> it is probably a good idea to follow the following link and see the
>>> other deadlines that are approaching.
>>> 
>>> http://www.bioconductor.org/developers/release-schedule/
>>> 
>>> 
>>> 
>>> Sincerely,
>>> 
>>>
>>>   The Biocore Team
>>> 
>>> _______________________________________________
>>> Bioc-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/bioc-devel
>>> 
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>> 
>> -- 
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>> 
>
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From dtenenba at fhcrc.org  Wed Oct  5 19:06:51 2011
From: dtenenba at fhcrc.org (Dan Tenenbaum)
Date: Wed, 5 Oct 2011 10:06:51 -0700
Subject: [Rd] R-devel (2.14 alpha) Windows binary
In-Reply-To: <13932_1317834284_4E8C8E2C_13932_7836_1_alpine.LFD.2.02.1110051742260.15319@gannet.stats.ox.ac.uk>
References: <CAF42j23ff7d8O77RLjdPuhunJsNbgcYLrqSAqmdN79doFNCeJA@mail.gmail.com>
	<F2FEE7DF-8F0D-4F3E-8A28-6B5EFEAE1612@cbs.dk>
	<alpine.LFD.2.02.1110050947210.3620@toucan.stats.ox.ac.uk>
	<13932_1317834284_4E8C8E2C_13932_7836_1_alpine.LFD.2.02.1110051742260.15319@gannet.stats.ox.ac.uk>
Message-ID: <CAF42j212hy+pMr6vK6pA_k8dsa7XJuHys4p4-J_y2YYwEr5nrw@mail.gmail.com>

On Wed, Oct 5, 2011 at 10:04 AM, Prof Brian Ripley
<ripley at stats.ox.ac.uk> wrote:
> An automated build (done on winbuilder) will take a few days: people are too
> busy this week.
>
> For the time being, I have put a current Windows installer for R 2.14.0
> alpha at
> http://www.stats.ox.ac.uk/pub/RWin/R-2.14.0alpha-win.exe
> I am unlikely to update it often (and I too am busy this week).

It looks like R 2.14.0 alpha is available on CRAN:

http://cran.r-project.org/bin/windows/base/rdevel.html

Thanks,
Dan

>
> On Wed, 5 Oct 2011, Prof Brian Ripley wrote:
>
>> On Wed, 5 Oct 2011, Peter Dalgaard wrote:
>>
>>> I suspect that the Windows build system just hasn't caught on to the
>>> short time between 2.13.2 and the start of run-in for 2.14.0. I think the
>>> usual logic is that pre-releases of the next version replace the patch
>>> releases of the old one (by definition, there shouldn't be updates to 2.13.2
>>> anyway).
>>
>> Correct, but it also does not have a 'R 2.15.0 devel' (not that there is
>> such a thing: R-devel does not have a version number). In fact it has
>>
>> ncftp /pub/R/bin/windows/base > ls -l
>> ...
>> -rw-rw-r-- ? ?1 0 ? ? ? ?1001 ? ? 40213201 Sep 30 19:18 R-2.13.2-win.exe
>> -rw-rw-r-- ? ?1 0 ? ? ? ?1001 ? ? 41018043 Oct ?4 11:49
>> R-2.13.2patched-win.exe
>> -rw-rw-r-- ? ?1 0 ? ? ? ?1001 ? ? 47707488 Oct ?2 10:45
>> R-2.14.0dev-win.exe
>> ...
>>
>> so R-2.14.0dev-win.exe would be a pretty good surrogate for R 2.14.0 alpha
>> until that is available.
>>
>>>
>>> -pd
>>>
>>> On Oct 5, 2011, at 00:46 , Dan Tenenbaum wrote:
>>>
>>>> Hello,
>>>> This question popped up on the bioc-devel list, I'm forwarding it here.
>>>>
>>>> I know that sources for R-2.14 alpha can be found here:
>>>>
>>>> http://cran.r-project.org/src/base-prerelease/
>>>>
>>>> But the OP (below) is asking about Windows binaries.
>>>>
>>>> Dan
>>>>
>>>>
>>>>
>>>> ---------- Forwarded message ----------
>>>> From: Stefan McKinnon H?j-Edwards <Stefan.Hoj-Edwards at agrsci.dk>
>>>> Date: 2011/10/4
>>>> Subject: Re: [Bioc-devel] Bioc 2.9 New Package submissions. The
>>>> October deadlines are fast approaching.
>>>> To: "bioc-devel at r-project.org" <bioc-devel at r-project.org>
>>>>
>>>>
>>>> According to the BioC release plan, we should use R-2.14.0 devel-alpha
>>>> to check our packages.
>>>> But on cran, we can either choose R 2.13.2
>>>> (http://cran.r-project.org/bin/windows/base/) or R 2.15.0 devel
>>>> (http://cran.r-project.org/bin/windows/base/rdevel.html). Am I missing
>>>> something? And will it again be possible to get the binaries for
>>>> Windows of the 2.14.0 devel-alpha?
>>>>
>>>>
>>>> Kind regards
>>>> Stefan McKinnon H?j-Edwards ? ? ? ? ? ? ?Dept. of Molecular Biology and
>>>> Genetics
>>>> Ph.D. Fellow ? ? ? ? ? ? ? ? ? ? ? ? ? ? Aarhus University
>>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?Blichers All? 20, Postboks 50
>>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?DK-8830 Tjele
>>>> Tel.: +45 8715 7969 ? ? ? ? ? ? ? ? ? ? ?Tel.: +45 8715 6000
>>>> Email: Stefan.Hoj-Edwards at agrsci.dk ? ? ?Web: www.agrsci.dk
>>>>
>>>>
>>>>
>>>>
>>>> -----Oprindelig meddelelse-----
>>>> Date: Mon, 03 Oct 2011 16:36:15 -0700
>>>> From: Marc Carlson <mcarlson at fhcrc.org>
>>>> To: bioc-devel at r-project.org
>>>> Subject: [Bioc-devel] Bioc 2.9 New Package submissions. The October
>>>> ? ? ? deadlines are fast approaching.
>>>> Message-ID: <4E8A46EF.3030007 at fhcrc.org>
>>>> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>>>>
>>>> Dear Bioconductor developers,
>>>>
>>>>
>>>> This announcement is for package authors who are in the process of
>>>> developing packages for inclusion in the upcoming 2.9 release of
>>>> Bioconductor in October.
>>>>
>>>> The deadline to make a submission for this release is going to be
>>>> October 10th, 2011. Packages submitted after the deadline will probably
>>>> not provide us with sufficient time for inclusion in this release.
>>>> Earlier submissions are encouraged as it provides more time to correct
>>>> issues raised during the review process and probably has an improved
>>>> chance of making it into the release.
>>>>
>>>> If you do not have your package ready in time for this deadline, your
>>>> package will still be included in our development branch of Bioconductor
>>>> and will be scheduled for inclusion in the subsequent release version of
>>>> Bioconductor.
>>>>
>>>>
>>>> Other important deadlines to consider are listed on our Release
>>>> schedule. If you have packages in the repository (and most of you do),
>>>> it is probably a good idea to follow the following link and see the
>>>> other deadlines that are approaching.
>>>>
>>>> http://www.bioconductor.org/developers/release-schedule/
>>>>
>>>>
>>>>
>>>> Sincerely,
>>>>
>>>>
>>>> ?The Biocore Team
>>>>
>>>> _______________________________________________
>>>> Bioc-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/bioc-devel
>>>>
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>> --
>>> Peter Dalgaard, Professor,
>>> Center for Statistics, Copenhagen Business School
>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>> Phone: (+45)38153501
>>> Email: pd.mes at cbs.dk ?Priv: PDalgd at gmail.com
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>
>> --
>> Brian D. Ripley, ? ? ? ? ? ? ? ? ?ripley at stats.ox.ac.uk
>> Professor of Applied Statistics, ?http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford, ? ? ? ? ? ? Tel: ?+44 1865 272861 (self)
>> 1 South Parks Road, ? ? ? ? ? ? ? ? ? ? +44 1865 272866 (PA)
>> Oxford OX1 3TG, UK ? ? ? ? ? ? ? ?Fax: ?+44 1865 272595
>
> --
> Brian D. Ripley, ? ? ? ? ? ? ? ? ?ripley at stats.ox.ac.uk
> Professor of Applied Statistics, ?http://www.stats.ox.ac.uk/~ripley/
> University of Oxford, ? ? ? ? ? ? Tel: ?+44 1865 272861 (self)
> 1 South Parks Road, ? ? ? ? ? ? ? ? ? ? +44 1865 272866 (PA)
> Oxford OX1 3TG, UK ? ? ? ? ? ? ? ?Fax: ?+44 1865 272595


From murdoch.duncan at gmail.com  Wed Oct  5 19:39:59 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 05 Oct 2011 13:39:59 -0400
Subject: [Rd] R-devel (2.14 alpha) Windows binary
In-Reply-To: <CAF42j212hy+pMr6vK6pA_k8dsa7XJuHys4p4-J_y2YYwEr5nrw@mail.gmail.com>
References: <CAF42j23ff7d8O77RLjdPuhunJsNbgcYLrqSAqmdN79doFNCeJA@mail.gmail.com>	<F2FEE7DF-8F0D-4F3E-8A28-6B5EFEAE1612@cbs.dk>	<alpine.LFD.2.02.1110050947210.3620@toucan.stats.ox.ac.uk>	<13932_1317834284_4E8C8E2C_13932_7836_1_alpine.LFD.2.02.1110051742260.15319@gannet.stats.ox.ac.uk>
	<CAF42j212hy+pMr6vK6pA_k8dsa7XJuHys4p4-J_y2YYwEr5nrw@mail.gmail.com>
Message-ID: <4E8C966F.2060009@gmail.com>

On 05/10/2011 1:06 PM, Dan Tenenbaum wrote:
> On Wed, Oct 5, 2011 at 10:04 AM, Prof Brian Ripley
> <ripley at stats.ox.ac.uk>  wrote:
> >  An automated build (done on winbuilder) will take a few days: people are too
> >  busy this week.
> >
> >  For the time being, I have put a current Windows installer for R 2.14.0
> >  alpha at
> >  http://www.stats.ox.ac.uk/pub/RWin/R-2.14.0alpha-win.exe
> >  I am unlikely to update it often (and I too am busy this week).
>
> It looks like R 2.14.0 alpha is available on CRAN:
>
> http://cran.r-project.org/bin/windows/base/rdevel.html

That's temporary:  R-devel should point to R-devel, not to the alpha.  
Soon there will be three links:  one for R-patched (based on 2.13.2, 
probably without any changes unless some emergency crops up), one for 
R-testing (the alpha, beta, RC series), and one for R-devel (2.15.0-to-be).

"Soon" might mean tomorrow, or it might take longer.

Duncan Murdoch

> Thanks,
> Dan
>
> >
> >  On Wed, 5 Oct 2011, Prof Brian Ripley wrote:
> >
> >>  On Wed, 5 Oct 2011, Peter Dalgaard wrote:
> >>
> >>>  I suspect that the Windows build system just hasn't caught on to the
> >>>  short time between 2.13.2 and the start of run-in for 2.14.0. I think the
> >>>  usual logic is that pre-releases of the next version replace the patch
> >>>  releases of the old one (by definition, there shouldn't be updates to 2.13.2
> >>>  anyway).
> >>
> >>  Correct, but it also does not have a 'R 2.15.0 devel' (not that there is
> >>  such a thing: R-devel does not have a version number). In fact it has
> >>
> >>  ncftp /pub/R/bin/windows/base>  ls -l
> >>  ...
> >>  -rw-rw-r--    1 0        1001     40213201 Sep 30 19:18 R-2.13.2-win.exe
> >>  -rw-rw-r--    1 0        1001     41018043 Oct  4 11:49
> >>  R-2.13.2patched-win.exe
> >>  -rw-rw-r--    1 0        1001     47707488 Oct  2 10:45
> >>  R-2.14.0dev-win.exe
> >>  ...
> >>
> >>  so R-2.14.0dev-win.exe would be a pretty good surrogate for R 2.14.0 alpha
> >>  until that is available.
> >>
> >>>
> >>>  -pd
> >>>
> >>>  On Oct 5, 2011, at 00:46 , Dan Tenenbaum wrote:
> >>>
> >>>>  Hello,
> >>>>  This question popped up on the bioc-devel list, I'm forwarding it here.
> >>>>
> >>>>  I know that sources for R-2.14 alpha can be found here:
> >>>>
> >>>>  http://cran.r-project.org/src/base-prerelease/
> >>>>
> >>>>  But the OP (below) is asking about Windows binaries.
> >>>>
> >>>>  Dan
> >>>>
> >>>>
> >>>>
> >>>>  ---------- Forwarded message ----------
> >>>>  From: Stefan McKinnon H?j-Edwards<Stefan.Hoj-Edwards at agrsci.dk>
> >>>>  Date: 2011/10/4
> >>>>  Subject: Re: [Bioc-devel] Bioc 2.9 New Package submissions. The
> >>>>  October deadlines are fast approaching.
> >>>>  To: "bioc-devel at r-project.org"<bioc-devel at r-project.org>
> >>>>
> >>>>
> >>>>  According to the BioC release plan, we should use R-2.14.0 devel-alpha
> >>>>  to check our packages.
> >>>>  But on cran, we can either choose R 2.13.2
> >>>>  (http://cran.r-project.org/bin/windows/base/) or R 2.15.0 devel
> >>>>  (http://cran.r-project.org/bin/windows/base/rdevel.html). Am I missing
> >>>>  something? And will it again be possible to get the binaries for
> >>>>  Windows of the 2.14.0 devel-alpha?
> >>>>
> >>>>
> >>>>  Kind regards
> >>>>  Stefan McKinnon H?j-Edwards              Dept. of Molecular Biology and
> >>>>  Genetics
> >>>>  Ph.D. Fellow                             Aarhus University
> >>>>                                          Blichers All? 20, Postboks 50
> >>>>                                          DK-8830 Tjele
> >>>>  Tel.: +45 8715 7969                      Tel.: +45 8715 6000
> >>>>  Email: Stefan.Hoj-Edwards at agrsci.dk      Web: www.agrsci.dk
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>  -----Oprindelig meddelelse-----
> >>>>  Date: Mon, 03 Oct 2011 16:36:15 -0700
> >>>>  From: Marc Carlson<mcarlson at fhcrc.org>
> >>>>  To: bioc-devel at r-project.org
> >>>>  Subject: [Bioc-devel] Bioc 2.9 New Package submissions. The October
> >>>>         deadlines are fast approaching.
> >>>>  Message-ID:<4E8A46EF.3030007 at fhcrc.org>
> >>>>  Content-Type: text/plain; charset=ISO-8859-1; format=flowed
> >>>>
> >>>>  Dear Bioconductor developers,
> >>>>
> >>>>
> >>>>  This announcement is for package authors who are in the process of
> >>>>  developing packages for inclusion in the upcoming 2.9 release of
> >>>>  Bioconductor in October.
> >>>>
> >>>>  The deadline to make a submission for this release is going to be
> >>>>  October 10th, 2011. Packages submitted after the deadline will probably
> >>>>  not provide us with sufficient time for inclusion in this release.
> >>>>  Earlier submissions are encouraged as it provides more time to correct
> >>>>  issues raised during the review process and probably has an improved
> >>>>  chance of making it into the release.
> >>>>
> >>>>  If you do not have your package ready in time for this deadline, your
> >>>>  package will still be included in our development branch of Bioconductor
> >>>>  and will be scheduled for inclusion in the subsequent release version of
> >>>>  Bioconductor.
> >>>>
> >>>>
> >>>>  Other important deadlines to consider are listed on our Release
> >>>>  schedule. If you have packages in the repository (and most of you do),
> >>>>  it is probably a good idea to follow the following link and see the
> >>>>  other deadlines that are approaching.
> >>>>
> >>>>  http://www.bioconductor.org/developers/release-schedule/
> >>>>
> >>>>
> >>>>
> >>>>  Sincerely,
> >>>>
> >>>>
> >>>>    The Biocore Team
> >>>>
> >>>>  _______________________________________________
> >>>>  Bioc-devel at r-project.org mailing list
> >>>>  https://stat.ethz.ch/mailman/listinfo/bioc-devel
> >>>>
> >>>>  ______________________________________________
> >>>>  R-devel at r-project.org mailing list
> >>>>  https://stat.ethz.ch/mailman/listinfo/r-devel
> >>>
> >>>  --
> >>>  Peter Dalgaard, Professor,
> >>>  Center for Statistics, Copenhagen Business School
> >>>  Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> >>>  Phone: (+45)38153501
> >>>  Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> >>>
> >>>  ______________________________________________
> >>>  R-devel at r-project.org mailing list
> >>>  https://stat.ethz.ch/mailman/listinfo/r-devel
> >>>
> >>
> >>  --
> >>  Brian D. Ripley,                  ripley at stats.ox.ac.uk
> >>  Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> >>  University of Oxford,             Tel:  +44 1865 272861 (self)
> >>  1 South Parks Road,                     +44 1865 272866 (PA)
> >>  Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> >  --
> >  Brian D. Ripley,                  ripley at stats.ox.ac.uk
> >  Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> >  University of Oxford,             Tel:  +44 1865 272861 (self)
> >  1 South Parks Road,                     +44 1865 272866 (PA)
> >  Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From sctonidandel at davidson.edu  Wed Oct  5 20:16:47 2011
From: sctonidandel at davidson.edu (Tonidandel, Scott)
Date: Wed, 5 Oct 2011 18:16:47 +0000
Subject: [Rd] Question about Rweb
Message-ID: <096E99C76E4DCC469728CD4104D7C9B602A8F0@MBX10A.davidson.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111005/5f7b564b/attachment.pl>

From simon.urbanek at r-project.org  Wed Oct  5 21:06:29 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 5 Oct 2011 15:06:29 -0400
Subject: [Rd] Question about Rweb
In-Reply-To: <096E99C76E4DCC469728CD4104D7C9B602A8F0@MBX10A.davidson.edu>
References: <096E99C76E4DCC469728CD4104D7C9B602A8F0@MBX10A.davidson.edu>
Message-ID: <1567A640-1E4F-4E7E-8FC6-74FFEAA247DA@r-project.org>


On Oct 5, 2011, at 2:16 PM, Tonidandel, Scott wrote:

> Greetings,
> 
> I am working on creating an interactive website that will generate R-code for users based in the information they input on the site. Currently, the R-code can be generated and downloaded to be run locally on a computer with R. However, I have noticed a number of applications out there that instead submit the code directly to an R-web server. Some examples seem to be:
> 
> http://www.biostatisticien.eu/cgi-bin/Rweb/buildModules.cgi
> 
> http://quantpsy.org/interact/mlr2.htm
> 
> http://pbil.univ-lyon1.fr/Rweb/
> 
> I would like to do something similar and set up R-web on a university server to execute my code. My trouble comes in terms of finding out more information regarding how to do this. Most of my searches of Rweb tend to point me to:
> 
> http://www.math.montana.edu/Rweb/
> 
> But the associated links are all defunct. The R-Cran help pages related to R web also point to this now defunct website. I am at a loss regarding what to do.
> 
> So, the question is, can someone out there tell me if it is possible to install Rweb on one of my own university servers and where can one go to learn how to do this? Thanks in advance for any advice.
> 

I may be biased, but I would recommend using FastRWeb, it's much more efficient and has a lot of advantages (allows pre-loading of data and code, supports parallel connections etc.).

See
http://rforge.net/FastRWeb
and
https://www.urbanek.info/research/pub/urbanek-iasc08.pdf

We use it heavily internally for a lot of things we do, so it's definitely a very active project (in fact I know about several people using it externally as well). In case you get convinced that this is a good option, please feel free to contact me if you have any questions and need any help.

Cheers,
Simon


From r.ted.byers at gmail.com  Wed Oct  5 22:00:21 2011
From: r.ted.byers at gmail.com (Ted Byers)
Date: Wed, 5 Oct 2011 16:00:21 -0400
Subject: [Rd] Question about Rweb
In-Reply-To: <1567A640-1E4F-4E7E-8FC6-74FFEAA247DA@r-project.org>
References: <096E99C76E4DCC469728CD4104D7C9B602A8F0@MBX10A.davidson.edu>
	<1567A640-1E4F-4E7E-8FC6-74FFEAA247DA@r-project.org>
Message-ID: <45ca01cc8399$6ae06eb0$40a14c10$@gmail.com>

Hi Simon,

Any chance of getting step by instructions on setting it up to work with a
web server like Apache's httpd server (I have Apache's web server running,
actually a couple instances on different ports, and I do all my CGI
programming using Perl)?

I am not so much looking to provide a web interface for working with R, but
rather want to write CGI programs that use R for specific analyses and
graphics.  I was considering writing my R scripts as usual (using the
capabilities of QRMlib and RQuantLib, in particular), and have them invoked
by a cgi script written in perl.  But your description suggests it can be
made faster.  Each package I looked at for doing this was interesting, but I
always got stuck at the point of figuring out how to get Apache's httpd
server to run my R scripts.  Your description suggests that a request
requiring R can be just passed onto Rserve, but how does one set that up;
i.e. to pass the request arguments through to the R script, and to tell
Rserve which R script to use?

Any insights on setting this up would be appreciated.

On http://rforge.net/FastRWeb/files/, I read that FastRWeb is to be
installed using "install.packages('FastRWeb',,'http://www.rforge.net/')",
but that gives me the following message:

> install.packages('FastRWeb',,'http://www.rforge.net/')
Installing package(s) into 'C:\Users\Ted\Documents/R/win-library/2.12'
(as 'lib' is unspecified)
Warning message:
In getDependencies(pkgs, dependencies, available, lib) :
  package 'FastRWeb' is not available
>

This was on:

R version 2.12.0 (2010-10-15)
Copyright (C) 2010 The R Foundation for Statistical Computing
ISBN 3-900051-07-0
Platform: x86_64-pc-mingw32/x64 (64-bit)

Thanks

Ted


> -----Original Message-----
> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-
> project.org] On Behalf Of Simon Urbanek
> Sent: October-05-11 3:06 PM
> To: Tonidandel, Scott
> Cc: r-devel at r-project.org
> Subject: Re: [Rd] Question about Rweb
> 
> 
> On Oct 5, 2011, at 2:16 PM, Tonidandel, Scott wrote:
> 
> > Greetings,
> >
> > I am working on creating an interactive website that will generate
R-code
> [snip]
> I may be biased, but I would recommend using FastRWeb, it's much more
> efficient and has a lot of advantages (allows pre-loading of data and
code,
> supports parallel connections etc.).
> 
> See
> http://rforge.net/FastRWeb
> and
> https://www.urbanek.info/research/pub/urbanek-iasc08.pdf
> 
> We use it heavily internally for a lot of things we do, so it's definitely
a very
> active project (in fact I know about several people using it externally as
well).
> In case you get convinced that this is a good option, please feel free to
> contact me if you have any questions and need any help.
> 
> Cheers,
> Simon
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From hpages at fhcrc.org  Wed Oct  5 22:33:03 2011
From: hpages at fhcrc.org (=?ISO-8859-1?Q?Herv=E9_Pag=E8s?=)
Date: Wed, 05 Oct 2011 13:33:03 -0700
Subject: [Rd] Question about Rweb
In-Reply-To: <45ca01cc8399$6ae06eb0$40a14c10$@gmail.com>
References: <096E99C76E4DCC469728CD4104D7C9B602A8F0@MBX10A.davidson.edu>	<1567A640-1E4F-4E7E-8FC6-74FFEAA247DA@r-project.org>
	<45ca01cc8399$6ae06eb0$40a14c10$@gmail.com>
Message-ID: <4E8CBEFF.6030500@fhcrc.org>

Hi,

On 11-10-05 01:00 PM, Ted Byers wrote:
> Hi Simon,
>
> Any chance of getting step by instructions on setting it up to work with a
> web server like Apache's httpd server (I have Apache's web server running,
> actually a couple instances on different ports, and I do all my CGI
> programming using Perl)?
>
> I am not so much looking to provide a web interface for working with R, but
> rather want to write CGI programs that use R for specific analyses and
> graphics.  I was considering writing my R scripts as usual (using the
> capabilities of QRMlib and RQuantLib, in particular), and have them invoked
> by a cgi script written in perl.  But your description suggests it can be
> made faster.  Each package I looked at for doing this was interesting, but I
> always got stuck at the point of figuring out how to get Apache's httpd
> server to run my R scripts.  Your description suggests that a request
> requiring R can be just passed onto Rserve, but how does one set that up;
> i.e. to pass the request arguments through to the R script, and to tell
> Rserve which R script to use?
>
> Any insights on setting this up would be appreciated.
>
> On http://rforge.net/FastRWeb/files/, I read that FastRWeb is to be
> installed using "install.packages('FastRWeb',,'http://www.rforge.net/')",

The same page also shows that only the source package and the Mac binary
are available.

> but that gives me the following message:
>
>> install.packages('FastRWeb',,'http://www.rforge.net/')
> Installing package(s) into 'C:\Users\Ted\Documents/R/win-library/2.12'
> (as 'lib' is unspecified)
> Warning message:
> In getDependencies(pkgs, dependencies, available, lib) :
>    package 'FastRWeb' is not available
>>
>
> This was on:
>
> R version 2.12.0 (2010-10-15)
> Copyright (C) 2010 The R Foundation for Statistical Computing
> ISBN 3-900051-07-0
> Platform: x86_64-pc-mingw32/x64 (64-bit)

No Windows binary.

Cheers,
H.

>
> Thanks
>
> Ted
>
>
>> -----Original Message-----
>> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-
>> project.org] On Behalf Of Simon Urbanek
>> Sent: October-05-11 3:06 PM
>> To: Tonidandel, Scott
>> Cc: r-devel at r-project.org
>> Subject: Re: [Rd] Question about Rweb
>>
>>
>> On Oct 5, 2011, at 2:16 PM, Tonidandel, Scott wrote:
>>
>>> Greetings,
>>>
>>> I am working on creating an interactive website that will generate
> R-code
>> [snip]
>> I may be biased, but I would recommend using FastRWeb, it's much more
>> efficient and has a lot of advantages (allows pre-loading of data and
> code,
>> supports parallel connections etc.).
>>
>> See
>> http://rforge.net/FastRWeb
>> and
>> https://www.urbanek.info/research/pub/urbanek-iasc08.pdf
>>
>> We use it heavily internally for a lot of things we do, so it's definitely
> a very
>> active project (in fact I know about several people using it externally as
> well).
>> In case you get convinced that this is a good option, please feel free to
>> contact me if you have any questions and need any help.
>>
>> Cheers,
>> Simon
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Herv? Pag?s

Program in Computational Biology
Division of Public Health Sciences
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N, M1-B514
P.O. Box 19024
Seattle, WA 98109-1024

E-mail: hpages at fhcrc.org
Phone:  (206) 667-5791
Fax:    (206) 667-1319


From simon.urbanek at r-project.org  Wed Oct  5 23:06:45 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 5 Oct 2011 17:06:45 -0400
Subject: [Rd] Question about Rweb
In-Reply-To: <45ca01cc8399$6ae06eb0$40a14c10$@gmail.com>
References: <096E99C76E4DCC469728CD4104D7C9B602A8F0@MBX10A.davidson.edu>
	<1567A640-1E4F-4E7E-8FC6-74FFEAA247DA@r-project.org>
	<45ca01cc8399$6ae06eb0$40a14c10$@gmail.com>
Message-ID: <35A53345-D6DA-4656-8479-CDBF057CB390@r-project.org>

Ted,

On Oct 5, 2011, at 4:00 PM, Ted Byers wrote:

> Hi Simon,
> 
> Any chance of getting step by instructions on setting it up to work with a
> web server like Apache's httpd server (I have Apache's web server running,
> actually a couple instances on different ports, and I do all my CGI
> programming using Perl)?
> 

The setup is really easy (it supports either CGI or PHP), but you're on the wrong platform :P see below.


> I am not so much looking to provide a web interface for working with R, but
> rather want to write CGI programs that use R for specific analyses and
> graphics.  I was considering writing my R scripts as usual (using the
> capabilities of QRMlib and RQuantLib, in particular), and have them invoked
> by a cgi script written in perl.  But your description suggests it can be
> made faster.  Each package I looked at for doing this was interesting, but I
> always got stuck at the point of figuring out how to get Apache's httpd
> server to run my R scripts.  Your description suggests that a request
> requiring R can be just passed onto Rserve, but how does one set that up;
> i.e. to pass the request arguments through to the R script, and to tell
> Rserve which R script to use?
> 
> Any insights on setting this up would be appreciated.
> 
> On http://rforge.net/FastRWeb/files/, I read that FastRWeb is to be
> installed using "install.packages('FastRWeb',,'http://www.rforge.net/')",
> but that gives me the following message:
> 
>> install.packages('FastRWeb',,'http://www.rforge.net/')
> Installing package(s) into 'C:\Users\Ted\Documents/R/win-library/2.12'
> (as 'lib' is unspecified)
> Warning message:
> In getDependencies(pkgs, dependencies, available, lib) :
>  package 'FastRWeb' is not available
>> 
> 
> This was on:
> 
> R version 2.12.0 (2010-10-15)
> Copyright (C) 2010 The R Foundation for Statistical Computing
> ISBN 3-900051-07-0
> Platform: x86_64-pc-mingw32/x64 (64-bit)
> 

Well, technically, you can run it on Windows, but I would not recommend it. Windows is a really bad server platform, especially with R (no fork, no parallel connections, no unix sockets ...).

The standard configuration in FastRWeb assumes a unix server (the more common case) and it really consists of install.packages() and then copying Rcgi from the cgi-bin directory of the installed FastRWeb package to your web server's cgi-bin and starting Rserve (via /var/FastRWeb/code/start). Alternatively, you can use the PHP client from Rserve instead of CGI.

If you really want to use Windows, I have fixed the Windows build so it should work, but you'll have to configure it by hand -- but as I said, I strongly discourage the use of Windows for any R-related server activities - there are too many security implications and it's far less efficient.

Cheers,
Simon



> Thanks
> 
> Ted
> 
> 
>> -----Original Message-----
>> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-
>> project.org] On Behalf Of Simon Urbanek
>> Sent: October-05-11 3:06 PM
>> To: Tonidandel, Scott
>> Cc: r-devel at r-project.org
>> Subject: Re: [Rd] Question about Rweb
>> 
>> 
>> On Oct 5, 2011, at 2:16 PM, Tonidandel, Scott wrote:
>> 
>>> Greetings,
>>> 
>>> I am working on creating an interactive website that will generate
> R-code
>> [snip]
>> I may be biased, but I would recommend using FastRWeb, it's much more
>> efficient and has a lot of advantages (allows pre-loading of data and
> code,
>> supports parallel connections etc.).
>> 
>> See
>> http://rforge.net/FastRWeb
>> and
>> https://www.urbanek.info/research/pub/urbanek-iasc08.pdf
>> 
>> We use it heavily internally for a lot of things we do, so it's definitely
> a very
>> active project (in fact I know about several people using it externally as
> well).
>> In case you get convinced that this is a good option, please feel free to
>> contact me if you have any questions and need any help.
>> 
>> Cheers,
>> Simon
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From r.ted.byers at gmail.com  Thu Oct  6 00:06:57 2011
From: r.ted.byers at gmail.com (Ted Byers)
Date: Wed, 5 Oct 2011 18:06:57 -0400
Subject: [Rd] Question about Rweb
In-Reply-To: <35A53345-D6DA-4656-8479-CDBF057CB390@r-project.org>
References: <096E99C76E4DCC469728CD4104D7C9B602A8F0@MBX10A.davidson.edu>
	<1567A640-1E4F-4E7E-8FC6-74FFEAA247DA@r-project.org>
	<45ca01cc8399$6ae06eb0$40a14c10$@gmail.com>
	<35A53345-D6DA-4656-8479-CDBF057CB390@r-project.org>
Message-ID: <46a401cc83ab$1a27bd40$4e7737c0$@gmail.com>

Hi Simon,

> -----Original Message-----
> From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
> Sent: October-05-11 5:07 PM
> To: Ted Byers
> Cc: 'Tonidandel, Scott'; r-devel at r-project.org
> Subject: Re: [Rd] Question about Rweb
> 
> Ted,
> 
> On Oct 5, 2011, at 4:00 PM, Ted Byers wrote:
> 
> > Hi Simon,
> >
> > Any chance of getting step by instructions on setting it up to work
> > with a web server like Apache's httpd server (I have Apache's web
> > server running, actually a couple instances on different ports, and I
> > do all my CGI programming using Perl)?
> >
> 
> The setup is really easy (it supports either CGI or PHP), but you're on
the
> wrong platform :P see below.
> 
Actually, I haven't had much choice with regard to platform.  I presently
work in a Windows only shop.

> [snip]
> > On http://rforge.net/FastRWeb/files/, I read that FastRWeb is to be
> > installed using
> > "install.packages('FastRWeb',,'http://www.rforge.net/')",
> > but that gives me the following message:
> >
> >> install.packages('FastRWeb',,'http://www.rforge.net/')
> > Installing package(s) into 'C:\Users\Ted\Documents/R/win-library/2.12'
> > (as 'lib' is unspecified)
> > Warning message:
> > In getDependencies(pkgs, dependencies, available, lib) :
> >  package 'FastRWeb' is not available
> >>
> >
> > This was on:
> >
> > R version 2.12.0 (2010-10-15)
> > Copyright (C) 2010 The R Foundation for Statistical Computing ISBN
> > 3-900051-07-0
> > Platform: x86_64-pc-mingw32/x64 (64-bit)
> >
> 
> Well, technically, you can run it on Windows, but I would not recommend
it.
> Windows is a really bad server platform, especially with R (no fork, no
parallel
> connections, no unix sockets ...).
> 
Yes, I know it's limitations, but at present I have no option but to deal
with it.

> The standard configuration in FastRWeb assumes a unix server (the more
> common case) and it really consists of install.packages() and then copying
> Rcgi from the cgi-bin directory of the installed FastRWeb package to your
> web server's cgi-bin and starting Rserve (via /var/FastRWeb/code/start).
> Alternatively, you can use the PHP client from Rserve instead of CGI.
> 
> If you really want to use Windows, I have fixed the Windows build so it
> should work, but you'll have to configure it by hand -- but as I said, I
strongly
> discourage the use of Windows for any R-related server activities - there
are
> too many security implications and it's far less efficient.
>
;-)

I have the machine that will be doing the real work behind several layers of
security.

How do I modify the command
""install.packages('FastRWeb',,'http://www.rforge.net/')"," so that it uses
RTools to build it for Windows?

Thanks

Ted

PS: I may have a machine soon to set up with Linux (the OS on that machine
crashed, got corrupted, so I'll have to wipe its disk and install de novo.
Is there a preferred distribution of Linux you can recommend (one for which
I can download DVD disk images so I can burn install DVDs on one of my
Windows boxes, or are they all pretty much the same?


From m.cowley at garvan.org.au  Thu Oct  6 00:59:02 2011
From: m.cowley at garvan.org.au (Mark Cowley)
Date: Thu, 6 Oct 2011 09:59:02 +1100
Subject: [Rd] suppressing stderr output from system() calls
In-Reply-To: <4E8C8CFB.60107@fhcrc.org>
References: <972B666A-E4F0-4479-9C45-13428A5AD0B7@garvan.org.au>
	<4E8C8CFB.60107@fhcrc.org>
Message-ID: <A1683254-0EEF-4ADF-86E0-C13570C9D5A8@garvan.org.au>

Thanks Martin, Simon and Brian,
They're all good suggestions for code that I write, however how can I suppress stderr from pre-existing code. For instance, install.packages has 3 system calls.
Perhaps a better worded question would be: how can I redirect the output of this command:

install.packages("MASS", lib="/tmp", type="source")

As I mentioned before, sink doesn't do the trick
con <- file("stderr.txt", "w")
sink(con, type="message")
install.packages("MASS", lib="/tmp", type="source")
sink(NULL, type="message")
close(con)

Martin will be familiar with the Bioconductor package oligo, which likes to download pd info package on the fly and install them - the embedded call to download.file is noisy, as is the resulting installation of said package.

Short of rewriting install.package & all code which has embedded install.packages calls, are there any other ways?

@Brian, thanks for the pointer to the news article on connections - I did learn something there
cheers,

Mark

On 06/10/2011, at 3:59 AM, Martin Morgan wrote:

> On 10/05/2011 02:36 AM, Mark Cowley wrote:
>> Dear list,
> 
>> I'm trying to suppress/redirect/squash the output from commands like
>> install.packages, or download.file. The problem is that none of:
>> sink(..., type="message"), sink(..., type="output"), capture.output,
>> suppressMessages are quite doing the trick. Output gets written to
>> the stderr stream, despite any combination of the above suppression
>> commands.
> 
> Hi Mark --
> 
> For download.file, the argument quiet=TRUE suppresses output messages; this option can be used in ... for install.packages, too (according to the documentation). This is good enough to quieten the regular chatter on a successful operation. To catch errors and suppress warnings also, maybe a construct like
> 
> url = "http://r-project.org/doesnotexist"
> tryCatch(suppressWarnings(
>    capture.output(download.file(url, tempfile(), quiet=TRUE))),
>    error=function(...) {})
> 
> Martin
> 
>> According to ?sink:
>> Messages sent to ?stderr()? (including those from ?message?, ?warning? and ?stop?) can be diverted by ?sink(type = "message")? (see below).
>> 
>> I'm pretty sure it's the system(), or .Internal() calls which are the culprit, which currently write the majority (all?) of their output to the stderr stream.
>> 
>> Simple example:
>> con<- file("stderr.txt", "w")
>> sink(con, type="message")
>> system("ls")
>> sink(NULL, type="message")
>> close(con)
>> # instead of the output going to stderr.txt, it gets printed to the console.
>> 
>> # no good either
>> capture.output(system("ls"))
>> character(0)
>> 
>> This is an issue, since i'm writing GenePattern modules to run R code, and if anything is written to stderr, then the job gets hit with a 'job failed' status, when all that might have happened is an R package got installed, or a file got downloaded via FTP.
>> 
>> Any ideas? Can system() and .Internal() output be redirected to stdout?
>> 
>> cheers,
>> Mark
>> 
>> 
>> sessionInfo()
>> R version 2.13.1 (2011-07-08)
>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>> 
>> locale:
>> [1] en_AU.UTF-8/en_AU.UTF-8/C/C/en_AU.UTF-8/en_AU.UTF-8
>> 
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>> 
>> 
>> 
>> 
>> -----------------------------------------------------
>> Mark Cowley, PhD
>> 
>> Pancreatic Cancer Program | Peter Wills Bioinformatics Centre
>> Garvan Institute of Medical Research, Sydney, Australia
>> -----------------------------------------------------
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> 
>> 
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 
> -- 
> Computational Biology
> Fred Hutchinson Cancer Research Center
> 1100 Fairview Ave. N. PO Box 19024 Seattle, WA 98109
> 
> Location: M1-B861
> Telephone: 206 667-2793


From simon.urbanek at r-project.org  Thu Oct  6 03:54:18 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 5 Oct 2011 21:54:18 -0400
Subject: [Rd] Question about Rweb
In-Reply-To: <46a401cc83ab$1a27bd40$4e7737c0$@gmail.com>
References: <096E99C76E4DCC469728CD4104D7C9B602A8F0@MBX10A.davidson.edu>
	<1567A640-1E4F-4E7E-8FC6-74FFEAA247DA@r-project.org>
	<45ca01cc8399$6ae06eb0$40a14c10$@gmail.com>
	<35A53345-D6DA-4656-8479-CDBF057CB390@r-project.org>
	<46a401cc83ab$1a27bd40$4e7737c0$@gmail.com>
Message-ID: <056DB147-35AA-4FC5-AB10-DBF16C4100F9@r-project.org>

Ted,

On Oct 5, 2011, at 6:06 PM, Ted Byers wrote:

> Hi Simon,
> 
>> -----Original Message-----
>> From: Simon Urbanek [mailto:simon.urbanek at r-project.org]
>> Sent: October-05-11 5:07 PM
>> To: Ted Byers
>> Cc: 'Tonidandel, Scott'; r-devel at r-project.org
>> Subject: Re: [Rd] Question about Rweb
>> 
>> Ted,
>> 
>> On Oct 5, 2011, at 4:00 PM, Ted Byers wrote:
>> 
>>> Hi Simon,
>>> 
>>> Any chance of getting step by instructions on setting it up to work
>>> with a web server like Apache's httpd server (I have Apache's web
>>> server running, actually a couple instances on different ports, and I
>>> do all my CGI programming using Perl)?
>>> 
>> 
>> The setup is really easy (it supports either CGI or PHP), but you're on
> the
>> wrong platform :P see below.
>> 
> Actually, I haven't had much choice with regard to platform.  I presently
> work in a Windows only shop.
> 
>> [snip]
>>> On http://rforge.net/FastRWeb/files/, I read that FastRWeb is to be
>>> installed using
>>> "install.packages('FastRWeb',,'http://www.rforge.net/')",
>>> but that gives me the following message:
>>> 
>>>> install.packages('FastRWeb',,'http://www.rforge.net/')
>>> Installing package(s) into 'C:\Users\Ted\Documents/R/win-library/2.12'
>>> (as 'lib' is unspecified)
>>> Warning message:
>>> In getDependencies(pkgs, dependencies, available, lib) :
>>> package 'FastRWeb' is not available
>>>> 
>>> 
>>> This was on:
>>> 
>>> R version 2.12.0 (2010-10-15)
>>> Copyright (C) 2010 The R Foundation for Statistical Computing ISBN
>>> 3-900051-07-0
>>> Platform: x86_64-pc-mingw32/x64 (64-bit)
>>> 
>> 
>> Well, technically, you can run it on Windows, but I would not recommend
> it.
>> Windows is a really bad server platform, especially with R (no fork, no
> parallel
>> connections, no unix sockets ...).
>> 
> Yes, I know it's limitations, but at present I have no option but to deal
> with it.
> 
>> The standard configuration in FastRWeb assumes a unix server (the more
>> common case) and it really consists of install.packages() and then copying
>> Rcgi from the cgi-bin directory of the installed FastRWeb package to your
>> web server's cgi-bin and starting Rserve (via /var/FastRWeb/code/start).
>> Alternatively, you can use the PHP client from Rserve instead of CGI.
>> 
>> If you really want to use Windows, I have fixed the Windows build so it
>> should work, but you'll have to configure it by hand -- but as I said, I
> strongly
>> discourage the use of Windows for any R-related server activities - there
> are
>> too many security implications and it's far less efficient.
>> 
> ;-)
> 
> I have the machine that will be doing the real work behind several layers of
> security.
> 
> How do I modify the command
> ""install.packages('FastRWeb',,'http://www.rforge.net/')"," so that it uses
> RTools to build it for Windows?
> 

Just re-run it, I have fixed the Windows build so I think the binary should be there. I had to run after I sent the e-mail so I didn't get to check one point, though: the Rcgi.exe binary may be either 32-bit or 64-bit which in the latter case may be a problem on 32-bit machine, but I see you have 64-bit Windows so you should be fine in either case.

However, you'll need to setup the FastRWeb tree. I did not change the defaults so it still expects things to live in /var/FastRWeb by default, so if you have Rtools, you may succeed in running the install.sh script (in the installed FastRWeb package -- see system.file("install.sh",package="FastRWeb"))  that was designed from unix even on Windows. The only difference is that you will want to remove the "socket ..." line from rserve.conf since Windows doesn't support it. If you don't have Rtools, you can simply start Rserve by hand - and then read Rserve docs about the options you have for pre-loading of packages and code. I didn't actually test the Windows setup with a web server so feedback is welcome.


> PS: I may have a machine soon to set up with Linux (the OS on that machine
> crashed, got corrupted, so I'll have to wipe its disk and install de novo.
> Is there a preferred distribution of Linux you can recommend (one for which
> I can download DVD disk images so I can burn install DVDs on one of my
> Windows boxes, or are they all pretty much the same?
> 

Ubuntu is currently the most popular and works out of the box on most machines. Personally, I prefer Debian on servers, but there is not a big difference.

Cheers,
Simon


From therneau at mayo.edu  Thu Oct  6 14:06:45 2011
From: therneau at mayo.edu (Terry Therneau)
Date: Thu, 06 Oct 2011 07:06:45 -0500
Subject: [Rd] multiple defines of diag
Message-ID: <1317902805.14951.37.camel@nemo>

The current coxme code has functions that depend on bdsmatrix and others
that depend on Matrix, both those pacakges define S4 methods for diag.
When loaded, the message appears:
   replacing previous import ?diag? when loading ?Matrix? 

Questions:
  1. Do I need to worry about this?  If so, what can I do about it?
I suppose I could add an importFrom directive, but it will be a pain
unless there is an "allbut(diag)" option I'm not aware of.  (I assume
that methods and classes can be listed in importFrom, i.e., there are no
importMethodsFrom or importClassesFrom functions).

  2. If I don't need to worry, is there a way to turn the message off?
I as a developer need to see it, but users don't and it may worry them
unnecessarily.  Updating all 17 of my test/*.Rout.save files is a
nuisance as well, but only a nuisance.

I'd like to upload this to CRAN soon as I have users asking for the
updated lmekin function (which uses Matrix).  In the long term all the
bdsmatrix functions will be replaced by Matrix, but that requires major
changes to C code so "long" is the operative word. 

Thanks,
  Terry T.


From jayemerson at gmail.com  Thu Oct  6 15:37:26 2011
From: jayemerson at gmail.com (Jay Emerson)
Date: Thu, 6 Oct 2011 09:37:26 -0400
Subject: [Rd] Question about Rweb
Message-ID: <CALbRwZbWcNFQ_LJ-nhcv9q5Xgt85LrsMO9swRauVxkRJ_iXWEA@mail.gmail.com>

Ted,

Simon may be biased, but I am not.  I'm barely a few days into
Rserve/FastRWeb and am blown away (and frustrated that I didn't have a
good excuse to give it a try sooner).  I'm still in the process of
refining my setup (including a fresh installation of Apache2 on my
Ubuntu box), and have documented the steps, which attempt to
synthesize information from Simon's various docs and from my own
communications with him.

I will make these available, but if you drop me an email I'll send you
my current draft.  I can't wait to get beyond the obvious usage cases
into some of the more advanced functionality.

Jay

-- 
John W. Emerson (Jay)
Associate Professor of Statistics
Department of Statistics
Yale University
http://www.stat.yale.edu/~jay


From kasperdanielhansen at gmail.com  Thu Oct  6 16:00:41 2011
From: kasperdanielhansen at gmail.com (Kasper Daniel Hansen)
Date: Thu, 6 Oct 2011 10:00:41 -0400
Subject: [Rd] multiple defines of diag
In-Reply-To: <1317902805.14951.37.camel@nemo>
References: <1317902805.14951.37.camel@nemo>
Message-ID: <CAC2h7uvpzF4ew=aGHhniu=TrjuRzmFqn_C18Wdagqd9BM+ahdA@mail.gmail.com>

Terry,

if you're using two packages that both define a diag function/method
you absolutely _have_ to resolve this using your NAMESPACE.  [Update:
I see both are methods.  I actually don't know what happens when you
have the same generic in both packages]

And yes, there is both an importClassesFrom and importMethodsFrom.

Since import() grabs everything you need to selectively import
functions/methods/classes from at least one of the two packages.  I
have been in the same situation, and it is painful to figure out all
the stuff you need from the package you selectively import.  A while
ago I suggested having something like
  importExcept
to selectively exclude specific functions when you have a name clash,
but I don't think anyone took up my suggestion.

Kasper

On Thu, Oct 6, 2011 at 8:06 AM, Terry Therneau <therneau at mayo.edu> wrote:
> The current coxme code has functions that depend on bdsmatrix and others
> that depend on Matrix, both those pacakges define S4 methods for diag.
> When loaded, the message appears:
> ? replacing previous import ?diag? when loading ?Matrix?
>
> Questions:
> ?1. Do I need to worry about this? ?If so, what can I do about it?
> I suppose I could add an importFrom directive, but it will be a pain
> unless there is an "allbut(diag)" option I'm not aware of. ?(I assume
> that methods and classes can be listed in importFrom, i.e., there are no
> importMethodsFrom or importClassesFrom functions).
>
> ?2. If I don't need to worry, is there a way to turn the message off?
> I as a developer need to see it, but users don't and it may worry them
> unnecessarily. ?Updating all 17 of my test/*.Rout.save files is a
> nuisance as well, but only a nuisance.
>
> I'd like to upload this to CRAN soon as I have users asking for the
> updated lmekin function (which uses Matrix). ?In the long term all the
> bdsmatrix functions will be replaced by Matrix, but that requires major
> changes to C code so "long" is the operative word.
>
> Thanks,
> ?Terry T.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From edd at debian.org  Thu Oct  6 18:20:14 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 6 Oct 2011 11:20:14 -0500
Subject: [Rd] Question about Rweb
In-Reply-To: <CALbRwZbWcNFQ_LJ-nhcv9q5Xgt85LrsMO9swRauVxkRJ_iXWEA@mail.gmail.com>
References: <CALbRwZbWcNFQ_LJ-nhcv9q5Xgt85LrsMO9swRauVxkRJ_iXWEA@mail.gmail.com>
Message-ID: <20109.54590.448849.303973@max.nulle.part>


On 6 October 2011 at 09:37, Jay Emerson wrote:
| Ted,
| 
| Simon may be biased, but I am not.  I'm barely a few days into
| Rserve/FastRWeb and am blown away (and frustrated that I didn't have a
| good excuse to give it a try sooner).  I'm still in the process of
| refining my setup (including a fresh installation of Apache2 on my
| Ubuntu box), and have documented the steps, which attempt to
| synthesize information from Simon's various docs and from my own
| communications with him.
| 
| I will make these available, but if you drop me an email I'll send you
| my current draft.  I can't wait to get beyond the obvious usage cases
| into some of the more advanced functionality.

I bite.  Given that I already package Rserve for Debian (and hence Ubuntu)
and may need something like FastRWeb (or Rapache) I should have a look.

Can you send me your stuff?  In a nutshell, why this and not Rapache (for
which Jeff Horner has a ppa on launchpad so it also works out of the box).

Dirk

-- 
New Rcpp master class for R and C++ integration is scheduled for 
San Francisco (Oct 8), more details / reg.info available at
http://www.revolutionanalytics.com/products/training/public/rcpp-master-class.php


From edd at debian.org  Thu Oct  6 18:26:11 2011
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 6 Oct 2011 11:26:11 -0500
Subject: [Rd] Question about Rweb
In-Reply-To: <056DB147-35AA-4FC5-AB10-DBF16C4100F9@r-project.org>
References: <096E99C76E4DCC469728CD4104D7C9B602A8F0@MBX10A.davidson.edu>
	<1567A640-1E4F-4E7E-8FC6-74FFEAA247DA@r-project.org>
	<45ca01cc8399$6ae06eb0$40a14c10$@gmail.com>
	<35A53345-D6DA-4656-8479-CDBF057CB390@r-project.org>
	<46a401cc83ab$1a27bd40$4e7737c0$@gmail.com>
	<056DB147-35AA-4FC5-AB10-DBF16C4100F9@r-project.org>
Message-ID: <20109.54947.779425.205223@max.nulle.part>


On 5 October 2011 at 21:54, Simon Urbanek wrote:
| Ubuntu is currently the most popular and works out of the box on most machines. Personally, I prefer Debian on servers, but there is not a big difference.

<off-topic alert>
  Ubuntu also comes in at least four flavours: ubuntu (Gnome look), kubuntu
  (KDE), xubuntu (XFCE) and 'server'.  So it is easy to overlook the server
  product which is also excellent. If you install it, it start with just six
  or seven processes running -- perfect for customization on top of something
  truly barebones.

  And the end of the day it depends on what update cycle you want to
  subscribe too. The bi-annual Ubuntu releases are nice.  I also _really_
  like Debian testing which is like a rolling 'current/fresh/yet stable'
  release.  CRAN uses that for a few machines, and I can never remember if
  rforge and r-forge, respectively, are on stable or testing.

  I often use Ubuntu and just re-build whatever I need never versions of by
  rebuilding the packages locally in 'package building chroot' on
  Ubuntu. Best of both worlds for me.

  If there are follow-ups, they should probably go to r-sig-debian.
</off-topic alert>

Best, Dirk

-- 
New Rcpp master class for R and C++ integration is scheduled for 
San Francisco (Oct 8), more details / reg.info available at
http://www.revolutionanalytics.com/products/training/public/rcpp-master-class.php


From jayemerson at gmail.com  Thu Oct  6 19:07:16 2011
From: jayemerson at gmail.com (Jay Emerson)
Date: Thu, 6 Oct 2011 13:07:16 -0400
Subject: [Rd] Question about Rweb
In-Reply-To: <20109.54590.448849.303973@max.nulle.part>
References: <CALbRwZbWcNFQ_LJ-nhcv9q5Xgt85LrsMO9swRauVxkRJ_iXWEA@mail.gmail.com>
	<20109.54590.448849.303973@max.nulle.part>
Message-ID: <CALbRwZZnXzUF5B_Ly5gdY-BLdEE3zQQRaL+kQqvSqLOqbb8ymg@mail.gmail.com>

Simon or Jeff had best answer your latter query on
strengths/weaknesses of each model.  I could hazard a guess, but would
probably be wrong.  !-)  I can't send attachments here, so decided to
put the draft on my blog and will revise as needed.  Feedback welcome,
and I need to make it friendlier and provide more detail in places.
Apologies in advance for errors/omissions, etc... that are my own
fault, not Simon's.

http://jayemerson.blogspot.com/2011/10/setting-up-fastrwebrserve-on-ubuntu.html

On Thu, Oct 6, 2011 at 12:20 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
>
> On 6 October 2011 at 09:37, Jay Emerson wrote:
> | Ted,
> |
> | Simon may be biased, but I am not. ?I'm barely a few days into
> | Rserve/FastRWeb and am blown away (and frustrated that I didn't have a
> | good excuse to give it a try sooner). ?I'm still in the process of
> | refining my setup (including a fresh installation of Apache2 on my
> | Ubuntu box), and have documented the steps, which attempt to
> | synthesize information from Simon's various docs and from my own
> | communications with him.
> |
> | I will make these available, but if you drop me an email I'll send you
> | my current draft. ?I can't wait to get beyond the obvious usage cases
> | into some of the more advanced functionality.
>
> I bite. ?Given that I already package Rserve for Debian (and hence Ubuntu)
> and may need something like FastRWeb (or Rapache) I should have a look.
>
> Can you send me your stuff? ?In a nutshell, why this and not Rapache (for
> which Jeff Horner has a ppa on launchpad so it also works out of the box).
>
> Dirk
>
> --
> New Rcpp master class for R and C++ integration is scheduled for
> San Francisco (Oct 8), more details / reg.info available at
> http://www.revolutionanalytics.com/products/training/public/rcpp-master-class.php
>



-- 
John W. Emerson (Jay)
Associate Professor of Statistics
Department of Statistics
Yale University
http://www.stat.yale.edu/~jay


From hpages at fhcrc.org  Thu Oct  6 19:10:43 2011
From: hpages at fhcrc.org (=?ISO-8859-1?Q?Herv=E9_Pag=E8s?=)
Date: Thu, 06 Oct 2011 10:10:43 -0700
Subject: [Rd] cbind() crashes on raw vectors
In-Reply-To: <22DD113B-230D-482C-9894-2EB0D6CC6B67@r-project.org>
References: <4E7CF03F.7090100@fhcrc.org>
	<22DD113B-230D-482C-9894-2EB0D6CC6B67@r-project.org>
Message-ID: <4E8DE113.5050001@fhcrc.org>

On 11-09-25 01:06 PM, Simon Urbanek wrote:
> Thanks, now fixed.

Thanks Simon,
H.

> Simon
>
>
> On Sep 23, 2011, at 4:46 PM, Herv? Pag?s wrote:
>
>> Hi,
>>
>> cbind() doesn't seem to like raw vectors:
>>
>>> df<- cbind(a=integer(4000), b=raw(4000))
>>> df
>> *** glibc detected *** /home/hpages/R-2.13.1/bin/exec/R: malloc(): memory corruption: 0x0000000002d73ca0 ***
>> ======= Backtrace: =========
>> /lib/x86_64-linux-gnu/libc.so.6(+0x79d7a)[0x7f3592b91d7a]
>> /lib/x86_64-linux-gnu/libc.so.6(__libc_malloc+0x6e)[0x7f3592b9431e]
>> /lib/libreadline.so.5(xmalloc+0x6)[0x7f3592620ab6]
>> /lib/libreadline.so.5(add_history+0xbe)[0x7f359262136e]
>> /home/hpages/R-2.13.1/lib/libR.so(+0x1b6538)[0x7f35936bd538]
>> /lib/libreadline.so.5(rl_callback_read_char+0x8c)[0x7f359261cb1c]
>> /home/hpages/R-2.13.1/lib/libR.so(+0x1b6f74)[0x7f35936bdf74]
>> /home/hpages/R-2.13.1/lib/libR.so(Rf_ReplIteration+0xe7)[0x7f3593610eb7]
>> /home/hpages/R-2.13.1/lib/libR.so(+0x10a260)[0x7f3593611260]
>> /home/hpages/R-2.13.1/lib/libR.so(run_Rmainloop+0x50)[0x7f3593611780]
>> /home/hpages/R-2.13.1/bin/exec/R(main+0x1b)[0x40085b]
>> /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xff)[0x7f3592b36eff]
>> /home/hpages/R-2.13.1/bin/exec/R[0x400779]
>> ======= Memory map: ========
>> 00400000-00401000 r-xp 00000000 08:01 3811201  /home/hpages/R-2.13.1/bin/exec/R
>> 00600000-00601000 r--p 00000000 08:01 3811201  /home/hpages/R-2.13.1/bin/exec/R
>> 00601000-00602000 rw-p 00001000 08:01 3811201  /home/hpages/R-2.13.1/bin/exec/R
>> 02583000-03b16000 rw-p 00000000 00:00 0  [heap]
>> 7f358c000000-7f358c021000 rw-p 00000000 00:00 0
>> 7f358c021000-7f3590000000 ---p 00000000 00:00 0
>> 7f3590342000-7f3590357000 r-xp 00000000 08:06 8155  /lib/x86_64-linux-gnu/libgcc_s.so.1
>> 7f3590357000-7f3590556000 ---p 00015000 08:06 8155  /lib/x86_64-linux-gnu/libgcc_s.so.1
>> 7f3590556000-7f3590557000 r--p 00014000 08:06 8155  /lib/x86_64-linux-gnu/libgcc_s.so.1
>> 7f3590557000-7f3590558000 rw-p 00015000 08:06 8155  /lib/x86_64-linux-gnu/libgcc_s.so.1
>> 7f3590558000-7f35905c4000 r-xp 00000000 08:01 3818237  /home/hpages/R-2.13.1/library/stats/libs/stats.so
>> 7f35905c4000-7f35907c3000 ---p 0006c000 08:01 3818237  /home/hpages/R-2.13.1/library/stats/libs/stats.so
>> 7f35907c3000-7f35907c5000 r--p 0006b000 08:01 3818237  /home/hpages/R-2.13.1/library/stats/libs/stats.so
>> 7f35907c5000-7f35907c7000 rw-p 0006d000 08:01 3818237  /home/hpages/R-2.13.1/library/stats/libs/stats.so
>> 7f35907c7000-7f359083a000 rw-p 00000000 00:00 0
>> 7f359083a000-7f359085c000 r-xp 00000000 08:01 3817784  /home/hpages/R-2.13.1/library/grDevices/libs/grDevices.so
>> 7f359085c000-7f3590a5b000 ---p 00022000 08:01 3817784  /home/hpages/R-2.13.1/library/grDevices/libs/grDevices.so
>> 7f3590a5b000-7f3590a5c000 r--p 00021000 08:01 3817784  /home/hpages/R-2.13.1/library/grDevices/libs/grDevices.so
>> 7f3590a5c000-7f3590a5d000 rw-p 00022000 08:01 3817784  /home/hpages/R-2.13.1/library/grDevices/libs/grDevices.so
>> 7f3590b61000-7f3590b63000 r-xp 00000000 08:07 671027  /usr/lib/x86_64-linux-gnu/gconv/ISO8859-1.so
>> 7f3590b63000-7f3590d62000 ---p 00002000 08:07 671027  /usr/lib/x86_64-linux-gnu/gconv/ISO8859-1.so
>> 7f3590d62000-7f3590d63000 r--p 00001000 08:07 671027  /usr/lib/x86_64-linux-gnu/gconv/ISO8859-1.so
>> 7f3590d63000-7f3590d64000 rw-p 00002000 08:07 671027  /usr/lib/x86_64-linux-gnu/gconv/ISO8859-1.so
>> 7f3590d64000-7f3590de6000 rw-p 00000000 00:00 0
>> 7f3590de6000-7f3590ded000 r-xp 00000000 08:01 3818288  /home/hpages/R-2.13.1/library/methods/libs/methods.so
>> 7f3590ded000-7f3590fec000 ---p 00007000 08:01 3818288  /home/hpages/R-2.13.1/library/methods/libs/methods.so
>> 7f3590fec000-7f3590fed000 r--p 00006000 08:01 3818288  /home/hpages/R-2.13.1/library/methods/libs/methods.so
>> 7f3590fed000-7f3590fee000 rw-p 00007000 08:01 3818288  /home/hpages/R-2.13.1/library/methods/libs/methods.so
>> 7f3590fee000-7f3590ffa000 r-xp 00000000 08:06 8319  /lib/x86_64-linux-gnu/libnss_files-2.13.so
>> 7f3590ffa000-7f35911f9000 ---p 0000c000 08:06 8319  /lib/x86_64-linux-gnu/libnss_files-2.13.so
>> 7f35911f9000-7f35911fa000 r--p 0000b000 08:06 8319  /lib/x86_64-linux-gnu/libnss_files-2.13.so
>> 7f35911fa000-7f35911fb000 rw-p 0000c000 08:06 8319  /lib/x86_64-linux-gnu/libnss_files-2.13.so
>> 7f35911fb000-7f3591206000 r-xp 00000000 08:06 8321  /lib/x86_64-linux-gnu/libnss_nis-2.13.so
>> 7f3591206000-7f3591405000 ---p 0000b000 08:06 8321  /lib/x86_64-linux-gnu/libnss_nis-2.13.so
>> 7f3591405000-7f3591406000 r--p 0000a000 08:06 8321  /lib/x86_64-linux-gnu/libnss_nis-2.13.so
>> 7f3591406000-7f3591407000 rw-p 0000b000 08:06 8321  /lib/x86_64-linux-gnu/libnss_nis-2.13.so
>> 7f3591407000-7f359141e000 r-xp 00000000 08:06 8316  /lib/x86_64-linux-gnu/libnsl-2.13.so
>> 7f359141e000-7f359161d000 ---p 00017000 08:06 8316  /lib/x86_64-linux-gnu/libnsl-2.13.so
>> 7f359161d000-7f359161e000 r--p 00016000 08:06 8316  /lib/x86_64-linux-gnu/libnsl-2.13.so
>> 7f359161e000-7f359161f000 rw-p 00017000 08:06 8316  /lib/x86_64-linux-gnu/libnsl-2.13.so
>> 7f359161f000-7f3591621000 rw-p 00000000 00:00 0
>> 7f3591621000-7f3591629000 r-xp 00000000 08:06 8317  /lib/x86_64-linux-gnu/libnss_compat-2.13.so
>> 7f3591629000-7f3591828000 ---p 00008000 08:06 8317  /lib/x86_64-linux-gnu/libnss_compat-2.13.so
>> 7f3591828000-7f3591829000 r--p 00007000 08:06 8317  /lib/x86_64-linux-gnu/libnss_compat-2.13.so
>> 7f3591829000-7f359182a000 rw-p 00008000 08:06 8317  /lib/x86_64-linux-gnu/libnss_compat-2.13.so
>> 7f359182a000-7f3591d21000 r--p 00000000 08:07 590549  /usr/lib/locale/locale-archive
>> 7f3591d21000-7f3591d61000 r-xp 00000000 08:06 8139  /lib/libncurses.so.5.7
>> 7f3591d61000-7f3591f60000 ---p 00040000 08:06 8139  /lib/libncurses.so.5.7
>> 7f3591f60000-7f3591f64000 r--p 0003f000 08:06 8139  /lib/libncurses.so.5.7
>> 7f3591f64000-7f3591f65000 rw-p 00043000 08:06 8139  /lib/libncurses.so.5.7
>> 7f3591f65000-7f3591f6c000 r-xp 00000000 08:06 8326  /lib/x86_64-linux-gnu/librt-2.13.so
>> 7f3591f6c000-7f359216b000 ---p 00007000 08:06 8326  /lib/x86_64-linux-gnu/librt-2.13.so
>> 7f359216b000-7f359216c000 r--p 00006000 08:06 8326  /lib/x86_64-linux-gnu/librt-2.13.soAborted
>>
>> This is with R 2.13.1 but it also crashes recent R devel.
>>
>> Thanks,
>> H.
>>
>>> sessionInfo()
>> R version 2.13.1 (2011-07-08)
>> Platform: x86_64-unknown-linux-gnu (64-bit)
>>
>> locale:
>> [1] LC_CTYPE=en_CA.UTF-8       LC_NUMERIC=C
>> [3] LC_TIME=en_CA.UTF-8        LC_COLLATE=en_CA.UTF-8
>> [5] LC_MONETARY=C              LC_MESSAGES=en_CA.UTF-8
>> [7] LC_PAPER=en_CA.UTF-8       LC_NAME=C
>> [9] LC_ADDRESS=C               LC_TELEPHONE=C
>> [11] LC_MEASUREMENT=en_CA.UTF-8 LC_IDENTIFICATION=C
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> --
>> Herv? Pag?s
>>
>> Program in Computational Biology
>> Division of Public Health Sciences
>> Fred Hutchinson Cancer Research Center
>> 1100 Fairview Ave. N, M1-B514
>> P.O. Box 19024
>> Seattle, WA 98109-1024
>>
>> E-mail: hpages at fhcrc.org
>> Phone:  (206) 667-5791
>> Fax:    (206) 667-1319
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>


-- 
Herv? Pag?s

Program in Computational Biology
Division of Public Health Sciences
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N, M1-B514
P.O. Box 19024
Seattle, WA 98109-1024

E-mail: hpages at fhcrc.org
Phone:  (206) 667-5791
Fax:    (206) 667-1319


From therneau at mayo.edu  Thu Oct  6 19:19:13 2011
From: therneau at mayo.edu (Terry Therneau)
Date: Thu, 06 Oct 2011 12:19:13 -0500
Subject: [Rd] multiple defines of diag
In-Reply-To: <CAC2h7uvpzF4ew=aGHhniu=TrjuRzmFqn_C18Wdagqd9BM+ahdA@mail.gmail.com>
References: <1317902805.14951.37.camel@nemo>
	<CAC2h7uvpzF4ew=aGHhniu=TrjuRzmFqn_C18Wdagqd9BM+ahdA@mail.gmail.com>
Message-ID: <1317921553.14951.63.camel@nemo>


On Thu, 2011-10-06 at 10:00 -0400, Kasper Daniel Hansen wrote:
> if you're using two packages that both define a diag function/method
> you absolutely _have_ to resolve this using your NAMESPACE.  [Update:
> I see both are methods.  I actually don't know what happens when you
> have the same generic in both packages]
> 

Your response made me look further, with some surprising results.

1. Sequential loading
tmt226% R --vanilla
R version 2.13.0 (2011-04-13)

> library(bdsmatrix)
> tmat <- bdsmatrix(c(3,2,2,4),
    c(22,1,2,21,3,20,19,4,18,17,5,16,15,6,7, 8,14,9,10,13,11,12),
    matrix(c(1,0,1,1,0,0,1,1,0,1,0,10,0, 
           0,1,1,0,1,1,0,1,1,0,1,0,10), ncol=2))
> tmat[1:7,1:7]     [,1] [,2] [,3] [,4] [,5] [,6] [,7]
[1,]   22    1    2    0    0    0    0
[2,]    1   21    3    0    0    0    0
[3,]    2    3   20    0    0    0    0
[4,]    0    0    0   19    4    0    0
[5,]    0    0    0    4   18    0    0
[6,]    0    0    0    0    0   17    5> 

> diag(tmat)
 [1] 22 21 20 19 18 17 16 15 14 13 12 10 10

> library(Matrix)
Loading required package: lattice

Attaching package: 'Matrix'

The following object(s) are masked from 'package:base':

    det

> diag(tmat)
 [1] 22 21 20 19 18 17 16 15 14 13 12 10 10

  Things to note: 
         in this case I did not get a message about overwriting the diag
method, 
         it works.  

This was not my experience with ranef(), an S3 generic that coxme, nlme,
and lme4 all define; there whichever library loaded last did not
discover existing methods.  That is, if one loaded nlme after coxme,
then ranef(a coxme object) would not dispatch ranef.coxme.  Our solution
(Doug Bates and I) was to have both coxme and lme4 import ranef and
fixef from the nlme library.
  However, per above it appears to work with S4 generics.
  Can I count on it though?

-------------

Case 2:

tmt229% R --vanilla
R version 2.13.0 (2011-04-13)

> library(coxme)
Loading required package: survival
Loading required package: splines
Loading required package: bdsmatrix
Loading required package: nlme
Loading required package: Matrix
Loading required package: lattice

Attaching package: 'Matrix'

The following object(s) are masked from 'package:base':

    det

Warning message:
replacing previous import ?diag? when loading ?Matrix? 

> tmat <- bdsmatrix(c(3,2,2,4), 
              c(22,1,2,21,3,20,19,4,18,17,5,16,15,6,7,
                8,14,9,10,13,11,12),
              matrix(c(1,0,1,1,0,0,1,1,0,1,0,10,0,
                       0,1,1,0,1,1,0,1,1,0,1,0,10), ncol=2))
>diag(tmat)
 [1] 22 21 20 19 18 17 16 15 14 13 12 10 10


 Things to note:
     I now get a warning message about diag. Why only here?
     Per the earlier comment I'm not importing all of nlme, just the two
generics
     It still works

(This example isn't reproducable for others: the coxme library on CRAN
does not yet have a Matrix dependency.)


From simon.urbanek at r-project.org  Thu Oct  6 19:23:14 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 6 Oct 2011 13:23:14 -0400
Subject: [Rd] Question about Rweb
In-Reply-To: <20109.54590.448849.303973@max.nulle.part>
References: <CALbRwZbWcNFQ_LJ-nhcv9q5Xgt85LrsMO9swRauVxkRJ_iXWEA@mail.gmail.com>
	<20109.54590.448849.303973@max.nulle.part>
Message-ID: <0A5AC6FB-FACF-41E6-8C99-E1E6B9E50337@r-project.org>


On Oct 6, 2011, at 12:20 PM, Dirk Eddelbuettel wrote:

> 
> On 6 October 2011 at 09:37, Jay Emerson wrote:
> | Ted,
> | 
> | Simon may be biased, but I am not.  I'm barely a few days into
> | Rserve/FastRWeb and am blown away (and frustrated that I didn't have a
> | good excuse to give it a try sooner).  I'm still in the process of
> | refining my setup (including a fresh installation of Apache2 on my
> | Ubuntu box), and have documented the steps, which attempt to
> | synthesize information from Simon's various docs and from my own
> | communications with him.
> | 
> | I will make these available, but if you drop me an email I'll send you
> | my current draft.  I can't wait to get beyond the obvious usage cases
> | into some of the more advanced functionality.
> 
> I bite.  Given that I already package Rserve for Debian (and hence Ubuntu)
> and may need something like FastRWeb (or Rapache) I should have a look.
> 
> Can you send me your stuff?  In a nutshell, why this and not Rapache (for
> which Jeff Horner has a ppa on launchpad so it also works out of the box).
> 

FastRWeb is server-independent, easier to deploy on machines you have limited rights (i.e., you don't need to compile against apache or edit its configuration) and cleaner to debug because the client layer is so thin (the front-end doesn't die if R crashes). Also since Rserve is the back-end you can use its features such as updating data in the instance (control commands) or connect into the live instance from R itself to work interactively. Also you can technically separate web server and R server machines if you want to (or do load balancing etc.).

It is also a little more than just infrastructure, e.g. it does query parsing for you and takes care of things like graphics etc. Clearly, that is something you can do equally well do with a layer on top RApache, so that's not a technical issue. That said, I don't know RApache well enough to provide a comprehensive comparison, because I don't have control over the machines that my stuff will be deployed on, so RApache is not an option for my particular use.

Cheers,
Simon


From kasperdanielhansen at gmail.com  Thu Oct  6 19:53:00 2011
From: kasperdanielhansen at gmail.com (Kasper Daniel Hansen)
Date: Thu, 6 Oct 2011 13:53:00 -0400
Subject: [Rd] multiple defines of diag
In-Reply-To: <1317921553.14951.63.camel@nemo>
References: <1317902805.14951.37.camel@nemo>
	<CAC2h7uvpzF4ew=aGHhniu=TrjuRzmFqn_C18Wdagqd9BM+ahdA@mail.gmail.com>
	<1317921553.14951.63.camel@nemo>
Message-ID: <CAC2h7usz8=K7MRBteyQb_tHozc+2-bL0sgSn43wMtpYLb+CgBA@mail.gmail.com>

On Thu, Oct 6, 2011 at 1:19 PM, Terry Therneau <therneau at mayo.edu> wrote:
>
> On Thu, 2011-10-06 at 10:00 -0400, Kasper Daniel Hansen wrote:
>> if you're using two packages that both define a diag function/method
>> you absolutely _have_ to resolve this using your NAMESPACE. ?[Update:
>> I see both are methods. ?I actually don't know what happens when you
>> have the same generic in both packages]
>>
>
> Your response made me look further, with some surprising results.
>
> 1. Sequential loading
> tmt226% R --vanilla
> R version 2.13.0 (2011-04-13)
>
>> library(bdsmatrix)
>> tmat <- bdsmatrix(c(3,2,2,4),
> ? ?c(22,1,2,21,3,20,19,4,18,17,5,16,15,6,7, 8,14,9,10,13,11,12),
> ? ?matrix(c(1,0,1,1,0,0,1,1,0,1,0,10,0,
> ? ? ? ? ? 0,1,1,0,1,1,0,1,1,0,1,0,10), ncol=2))
>> tmat[1:7,1:7] ? ? [,1] [,2] [,3] [,4] [,5] [,6] [,7]
> [1,] ? 22 ? ?1 ? ?2 ? ?0 ? ?0 ? ?0 ? ?0
> [2,] ? ?1 ? 21 ? ?3 ? ?0 ? ?0 ? ?0 ? ?0
> [3,] ? ?2 ? ?3 ? 20 ? ?0 ? ?0 ? ?0 ? ?0
> [4,] ? ?0 ? ?0 ? ?0 ? 19 ? ?4 ? ?0 ? ?0
> [5,] ? ?0 ? ?0 ? ?0 ? ?4 ? 18 ? ?0 ? ?0
> [6,] ? ?0 ? ?0 ? ?0 ? ?0 ? ?0 ? 17 ? ?5>
>
>> diag(tmat)
> ?[1] 22 21 20 19 18 17 16 15 14 13 12 10 10
>
>> library(Matrix)
> Loading required package: lattice
>
> Attaching package: 'Matrix'
>
> The following object(s) are masked from 'package:base':
>
> ? ?det
>
>> diag(tmat)
> ?[1] 22 21 20 19 18 17 16 15 14 13 12 10 10
>
> ?Things to note:
> ? ? ? ? in this case I did not get a message about overwriting the diag
> method,
> ? ? ? ? it works.
>
> This was not my experience with ranef(), an S3 generic that coxme, nlme,
> and lme4 all define; there whichever library loaded last did not
> discover existing methods. ?That is, if one loaded nlme after coxme,
> then ranef(a coxme object) would not dispatch ranef.coxme. ?Our solution
> (Doug Bates and I) was to have both coxme and lme4 import ranef and
> fixef from the nlme library.
> ?However, per above it appears to work with S4 generics.
> ?Can I count on it though?

My _guess_ is that you cannot depend on this in general.  What if the
two generics have different signatures, say one uses x,y and the other
uses x,y,z?

Kasper


>
> -------------
>
> Case 2:
>
> tmt229% R --vanilla
> R version 2.13.0 (2011-04-13)
>
>> library(coxme)
> Loading required package: survival
> Loading required package: splines
> Loading required package: bdsmatrix
> Loading required package: nlme
> Loading required package: Matrix
> Loading required package: lattice
>
> Attaching package: 'Matrix'
>
> The following object(s) are masked from 'package:base':
>
> ? ?det
>
> Warning message:
> replacing previous import ?diag? when loading ?Matrix?
>
>> tmat <- bdsmatrix(c(3,2,2,4),
> ? ? ? ? ? ? ?c(22,1,2,21,3,20,19,4,18,17,5,16,15,6,7,
> ? ? ? ? ? ? ? ?8,14,9,10,13,11,12),
> ? ? ? ? ? ? ?matrix(c(1,0,1,1,0,0,1,1,0,1,0,10,0,
> ? ? ? ? ? ? ? ? ? ? ? 0,1,1,0,1,1,0,1,1,0,1,0,10), ncol=2))
>>diag(tmat)
> ?[1] 22 21 20 19 18 17 16 15 14 13 12 10 10
>
>
> ?Things to note:
> ? ? I now get a warning message about diag. Why only here?
> ? ? Per the earlier comment I'm not importing all of nlme, just the two
> generics
> ? ? It still works
>
> (This example isn't reproducable for others: the coxme library on CRAN
> does not yet have a Matrix dependency.)
>
>
>
>
>
>


From tim.triche at gmail.com  Thu Oct  6 22:14:16 2011
From: tim.triche at gmail.com (Tim Triche, Jr.)
Date: Thu, 6 Oct 2011 13:14:16 -0700
Subject: [Rd] parallel::mclapply() dummy function on Windows?
Message-ID: <CAC+N9BWkeqy_fAPuXk5VuCc7_z3fNon3YefYwg8XqO9QSoVUyg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111006/7e5e4857/attachment.pl>

From ripley at stats.ox.ac.uk  Fri Oct  7 08:25:18 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 7 Oct 2011 07:25:18 +0100 (BST)
Subject: [Rd] parallel::mclapply() dummy function on Windows?
In-Reply-To: <CAC+N9BWkeqy_fAPuXk5VuCc7_z3fNon3YefYwg8XqO9QSoVUyg@mail.gmail.com>
References: <CAC+N9BWkeqy_fAPuXk5VuCc7_z3fNon3YefYwg8XqO9QSoVUyg@mail.gmail.com>
Message-ID: <alpine.LFD.2.02.1110070711170.21223@gannet.stats.ox.ac.uk>

On Thu, 6 Oct 2011, Tim Triche, Jr. wrote:

> Hi all,
>
> Would it be possible to have the new 'parallel' library export a dummy
> function, something akin to
>
> if(Windows) mclapply <- lapply
>
> to paper over the lack of fork() support on said platform?  This may not be
> the world's greatest idea, but it would make it easier for me to maintain my
> package and still offer most users good parallel support.  Plus, I can't

Why would it make it easier?  And how could using a dummy for 'most 
users' (who are on Windows) offer them 'good parallel support'?

> really see where it would cause problems, but then I don't develop R,
> myself.

Take a look at e.g. package 'boot' to see how to offer alternatives. 
(A version that uses 'parallel' is pending on CRAN, or see 
http://www.stats.ox.ac.uk/pub/R/boot_1.3-3.tar.gz .) Package 
'parallel' may in future offer a higher-level abstraction layer that 
makes offers such a choice, but as the 'boot' code shows, deciding 
what to send to the workers in a snow-style cluster is not simple.

Note that it is not just Windows that lacks fork support: some 
front-ends (notably Rstudio) do not work with forking at present. And 
some parts of parallel (and multicore/snow) do not work reliably on 
some OSes (e.g. Solaris).

> Thanks for any thoughts on the matter.
>
> 	[[alternative HTML version deleted]]

Please do follow the posting guide: no HTML and use the signature 
block for your real name and credentials.

>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From anderluh at tmo.at  Fri Oct  7 11:14:29 2011
From: anderluh at tmo.at (alex)
Date: Fri, 7 Oct 2011 02:14:29 -0700 (PDT)
Subject: [Rd] segfault after .C call.
In-Reply-To: <CAEOrW49gOkrjGDDaryVb+CqNkcr9jHqhG6VmJbd8cAFOqWrr0g@mail.gmail.com>
References: <CAEOrW49gOkrjGDDaryVb+CqNkcr9jHqhG6VmJbd8cAFOqWrr0g@mail.gmail.com>
Message-ID: <1317978869148-3881461.post@n4.nabble.com>

Have you ever tried to use .Call instead of .C?
my segfault-problem was solved by using .Call but I am just a beginner and
can not explain why this is

Alex

--
View this message in context: http://r.789695.n4.nabble.com/segfault-after-C-call-tp3872557p3881461.html
Sent from the R devel mailing list archive at Nabble.com.


From jeff.a.ryan at gmail.com  Fri Oct  7 15:09:46 2011
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Fri, 7 Oct 2011 08:09:46 -0500
Subject: [Rd] tzone DB lawsuit Implications for R-project?
Message-ID: <FFB0A46F-2B96-4A8E-8F7F-B47CB9E45F1D@gmail.com>

Does anyone from core have a comment on the implications for the R-project on this:

http://www.theregister.co.uk/2011/10/07/unix_time_zone_database_destroyed/

Given the inclusion of the TZ database with R as well as the functionality used by R, is this something that the FSF is looking at yet?

Best,Jeff

From ripley at stats.ox.ac.uk  Fri Oct  7 17:51:17 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 7 Oct 2011 16:51:17 +0100 (BST)
Subject: [Rd] tzone DB lawsuit Implications for R-project?
In-Reply-To: <FFB0A46F-2B96-4A8E-8F7F-B47CB9E45F1D@gmail.com>
References: <FFB0A46F-2B96-4A8E-8F7F-B47CB9E45F1D@gmail.com>
Message-ID: <alpine.LFD.2.02.1110071637540.10231@gannet.stats.ox.ac.uk>

Not as yet.  Many much bigger users than us (almost all Unix-alike 
OSes, Java, Tcl, MySQL, PostgreSQL, Oracle, ...) have more resources 
to investigate.

Note that we only use the database on Windows, and only because OS 
services are woefully inadequate on that platform: we could go back to 
using those services ....

On Fri, 7 Oct 2011, Jeff Ryan wrote:

> Does anyone from core have a comment on the implications for the R-project on this:
>
> http://www.theregister.co.uk/2011/10/07/unix_time_zone_database_destroyed/
>
> Given the inclusion of the TZ database with R as well as the functionality used by R, is this something that the FSF is looking at yet?
>
> Best,Jeff
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From tim.triche at gmail.com  Fri Oct  7 21:05:15 2011
From: tim.triche at gmail.com (Tim Triche, Jr.)
Date: Fri, 7 Oct 2011 12:05:15 -0700
Subject: [Rd] parallel::mclapply() dummy function on Windows?
In-Reply-To: <alpine.LFD.2.02.1110070711170.21223@gannet.stats.ox.ac.uk>
References: <CAC+N9BWkeqy_fAPuXk5VuCc7_z3fNon3YefYwg8XqO9QSoVUyg@mail.gmail.com>
	<alpine.LFD.2.02.1110070711170.21223@gannet.stats.ox.ac.uk>
Message-ID: <CAC+N9BUsVw81OgiPkMm=9FYJ5EzhkXf-CJf3smWVJWVuEvCSHQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111007/bddd7e8e/attachment.pl>

From ripley at stats.ox.ac.uk  Fri Oct  7 21:40:39 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 7 Oct 2011 20:40:39 +0100 (BST)
Subject: [Rd] parallel::mclapply() dummy function on Windows?
In-Reply-To: <CAC+N9BUsVw81OgiPkMm=9FYJ5EzhkXf-CJf3smWVJWVuEvCSHQ@mail.gmail.com>
References: <CAC+N9BWkeqy_fAPuXk5VuCc7_z3fNon3YefYwg8XqO9QSoVUyg@mail.gmail.com>
	<alpine.LFD.2.02.1110070711170.21223@gannet.stats.ox.ac.uk>
	<CAC+N9BUsVw81OgiPkMm=9FYJ5EzhkXf-CJf3smWVJWVuEvCSHQ@mail.gmail.com>
Message-ID: <alpine.LFD.2.02.1110072037350.18351@gannet.stats.ox.ac.uk>

On Fri, 7 Oct 2011, Tim Triche, Jr. wrote:

> On Thu, Oct 6, 2011 at 11:25 PM, Prof Brian Ripley <ripley at stats.ox.ac.uk>
> wrote:
> 
> Why would it make it easier? ?And how could using a dummy for 'most
> users' (who are on Windows) offer them 'good parallel support'?
> 
> 
> Good point. ?Most of my users are on unix, because my use of mclapply() is
> primarily to expedite processing of raw scanner data. ?Only a handful of
> users for the packages that call mclapply() are on Windows. ?Right now, I
> default to having parallel=FALSE flags all over the place, but I'd prefer
> for the default to be "go as fast as practical in the common case", i.e.,
> Unix. ?It would have been more accurate for me to say "I would like to
> parallelize by default, without having the methods fail on Windows in the
> default configuration" than to claim that I want "good parallel support" for
> Windows. ?When I have tried using the foreach/doMC combination in the past,
> it has not worked out satisfactorily, so I don't know how well I can support
> Windows users... period.
>
>       Take a look at e.g. package 'boot' to see how to offer
>       alternatives. (A version that uses 'parallel' is pending on
>       CRAN, or see http://www.stats.ox.ac.uk/pub/R/boot_1.3-3.tar.gz
>       .) Package 'parallel' may in future offer a higher-level
>       abstraction layer that makes offers such a choice, but as the
>       'boot' code shows, deciding what to send to the workers in a
>       snow-style cluster is not simple.
> 
> 
> It seems similar to what I do (off topic: why do you use the file extension
> '.q' for all of the R/S code files?): pass flags around. ?I suppose I was

*I* don't: the author did.  It was the recommendation for S long ago: 
.S is taken and .q stood for qpe, at one time (mind 1980s, AFAIR) the 
proposed name for 'new S'.

> just being lazy, but I would love to default to "go as fast as possible"
> without having Windows users get left out in the cold (unless they add flags
> to their function calls).?
> 
> Thank you for your suggestions, I will look into this further.
> 
> --
> Tim Triche, Jr.
> USC Biostatistics
> 
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jfox at mcmaster.ca  Sat Oct  8 03:03:58 2011
From: jfox at mcmaster.ca (John Fox)
Date: Fri, 7 Oct 2011 21:03:58 -0400
Subject: [Rd] parallel::mclapply() dummy function on Windows?
In-Reply-To: <CAC+N9BUsVw81OgiPkMm=9FYJ5EzhkXf-CJf3smWVJWVuEvCSHQ@mail.gmail.com>
References: <CAC+N9BWkeqy_fAPuXk5VuCc7_z3fNon3YefYwg8XqO9QSoVUyg@mail.gmail.com>	<alpine.LFD.2.02.1110070711170.21223@gannet.stats.ox.ac.uk>
	<CAC+N9BUsVw81OgiPkMm=9FYJ5EzhkXf-CJf3smWVJWVuEvCSHQ@mail.gmail.com>
Message-ID: <008801cc8556$290fba40$7b2f2ec0$@mcmaster.ca>

Dear Tim,

> -----Original Message-----
> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-project.org]
On
> Behalf Of Tim Triche, Jr.
> Sent: October-07-11 3:05 PM
> To: Prof Brian Ripley
> Cc: r-devel
> Subject: Re: [Rd] parallel::mclapply() dummy function on Windows?
> 
> On Thu, Oct 6, 2011 at 11:25 PM, Prof Brian Ripley
> <ripley at stats.ox.ac.uk>wrote:
> 
> >
> > Why would it make it easier?  And how could using a dummy for 'most
users'
> > (who are on Windows) offer them 'good parallel support'?
> 
> 
> Good point.  Most of my users are on unix, because my use of mclapply() is
> primarily to expedite processing of raw scanner data.  Only a handful of
> users for the packages that call mclapply() are on Windows.  Right now, I
> default to having parallel=FALSE flags all over the place, but I'd prefer
for
> the default to be "go as fast as practical in the common case", i.e.,
Unix.
> It would have been more accurate for me to say "I would like to
parallelize
> by default, without having the methods fail on Windows in the default
> configuration" than to claim that I want "good parallel support" for
Windows.
> When I have tried using the foreach/doMC combination in the past, it has
not
> worked out satisfactorily, so I don't know how well I can support Windows
> users... period.

Why don't you just apply the approach you initially suggested in your own
package, defining mclapply() the way you want it? 

I hope this helps,
 John

> 
> Take a look at e.g. package 'boot' to see how to offer alternatives. (A
> > version that uses 'parallel' is pending on CRAN, or see
> > http://www.stats.ox.ac.uk/pub/**R/boot_1.3-3.tar.gz<http://www.stats.o
> > x.ac.uk/pub/R/boot_1.3-3.tar.gz>.) Package 'parallel' may in future
> > offer a higher-level abstraction layer that makes offers such a choice,
but
> as the 'boot' code shows, deciding what to send to the workers in a snow-
> style cluster is not simple.
> >
> 
> It seems similar to what I do (off topic: why do you use the file
extension
> '.q' for all of the R/S code files?): pass flags around.  I suppose I was
> just being lazy, but I would love to default to "go as fast as possible"
> without having Windows users get left out in the cold (unless they add
flags
> to their function calls).
> 
> Thank you for your suggestions, I will look into this further.
> 
> --
> Tim Triche, Jr.
> USC Biostatistics
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From joachim.harloff at joachimharloff.de  Fri Oct  7 19:01:07 2011
From: joachim.harloff at joachimharloff.de (Joachim Harloff)
Date: Fri,  7 Oct 2011 19:01:07 +0200
Subject: [Rd] BitSet equivalent? Java code usable?
Message-ID: <r02010500-1068-F3AA0DA8F10511E097AB0017F2F04CA2@[192.168.0.5]>

Hi all,

I consider writing a R package on statistics for the sorting method as a hobby. I have written a private Java application that I could use as a basis. Therefore I'd like to ask two questions:

1) logical vectors: Bit storage (small) and capable of bit operations?
The Java application relies on BitSet(s) for efficiency reasons. Arrays of logical values cost far too much memory (in the 2nd level heap etc.) while chunks of BitSets easily fit into the first processor cache. Moreover the Bit operations or, xor, and, andnot, cardinality, clone, flip, equals, intersects are much faster done for BitSets than equivalent functions written for logical arrays. Is there any equivalent for BitSet in R? The vector type "logical" seems to be not equally powerful and I do not know its memory requirements. In BitSets a Bit requires just one Bit, no more.

2) Can Java code be used?
Can I use some Java code for a R package (without translating it first to C. This is not always simple)? Probably this sounds ugly but it would greatly simplify the task for me.

Regards,
Joachim Harloff


From johnny.jp.22 at gmail.com  Fri Oct  7 19:01:56 2011
From: johnny.jp.22 at gmail.com (Johnny Paulo)
Date: Fri, 7 Oct 2011 18:01:56 +0100
Subject: [Rd] Pb building sets of S4 / RefClass objects with package "sets"
Message-ID: <CAJi8Hmaof0i11oYdNFeH6qxMAHpE-UgWZTCdCg-XMKRusxqM-w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111007/3e02c4d1/attachment.pl>

From mtmorgan at fhcrc.org  Sat Oct  8 14:15:41 2011
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Sat, 08 Oct 2011 05:15:41 -0700
Subject: [Rd] parallel::mclapply() dummy function on Windows?
In-Reply-To: <008801cc8556$290fba40$7b2f2ec0$@mcmaster.ca>
References: <CAC+N9BWkeqy_fAPuXk5VuCc7_z3fNon3YefYwg8XqO9QSoVUyg@mail.gmail.com>	<alpine.LFD.2.02.1110070711170.21223@gannet.stats.ox.ac.uk>	<CAC+N9BUsVw81OgiPkMm=9FYJ5EzhkXf-CJf3smWVJWVuEvCSHQ@mail.gmail.com>
	<008801cc8556$290fba40$7b2f2ec0$@mcmaster.ca>
Message-ID: <4E903EED.7070007@fhcrc.org>

On 10/07/2011 06:03 PM, John Fox wrote:
> Dear Tim,
>
>> -----Original Message-----
>> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-project.org]
> On
>> Behalf Of Tim Triche, Jr.
>> Sent: October-07-11 3:05 PM
>> To: Prof Brian Ripley
>> Cc: r-devel
>> Subject: Re: [Rd] parallel::mclapply() dummy function on Windows?
>>
>> On Thu, Oct 6, 2011 at 11:25 PM, Prof Brian Ripley
>> <ripley at stats.ox.ac.uk>wrote:
>>
>>>
>>> Why would it make it easier?  And how could using a dummy for 'most
> users'
>>> (who are on Windows) offer them 'good parallel support'?
>>
>>
>> Good point.  Most of my users are on unix, because my use of mclapply() is
>> primarily to expedite processing of raw scanner data.  Only a handful of
>> users for the packages that call mclapply() are on Windows.  Right now, I
>> default to having parallel=FALSE flags all over the place, but I'd prefer
> for
>> the default to be "go as fast as practical in the common case", i.e.,
> Unix.
>> It would have been more accurate for me to say "I would like to
> parallelize
>> by default, without having the methods fail on Windows in the default
>> configuration" than to claim that I want "good parallel support" for
> Windows.
>> When I have tried using the foreach/doMC combination in the past, it has
> not
>> worked out satisfactorily, so I don't know how well I can support Windows
>> users... period.
>
> Why don't you just apply the approach you initially suggested in your own
> package, defining mclapply() the way you want it?

Hi John et al.,

Individual packages will become littered with ad hoc solutions, 
constructed without, for instance, the wisdom and experience of Prof. 
Ripley about platforms or environments in which it is appropriate to use 
mclapply. For instance, Tim's pseudo-code if (Windows) ... translated as 
if (.Platform$OS.type == "windows") doesn't sound like its the correct 
test; at least

   exists("mclapply", getNamespace("parallel"))

but probably more. Also, doesn't parallel's name space differ between 
platforms, requiring the package author to import(parallel) rather than 
the better practice of importFrom(parallel, mclapply) ?

Martin

>
> I hope this helps,
>   John
>
>>
>> Take a look at e.g. package 'boot' to see how to offer alternatives. (A
>>> version that uses 'parallel' is pending on CRAN, or see
>>> http://www.stats.ox.ac.uk/pub/**R/boot_1.3-3.tar.gz<http://www.stats.o
>>> x.ac.uk/pub/R/boot_1.3-3.tar.gz>.) Package 'parallel' may in future
>>> offer a higher-level abstraction layer that makes offers such a choice,
> but
>> as the 'boot' code shows, deciding what to send to the workers in a snow-
>> style cluster is not simple.
>>>
>>
>> It seems similar to what I do (off topic: why do you use the file
> extension
>> '.q' for all of the R/S code files?): pass flags around.  I suppose I was
>> just being lazy, but I would love to default to "go as fast as possible"
>> without having Windows users get left out in the cold (unless they add
> flags
>> to their function calls).
>>
>> Thank you for your suggestions, I will look into this further.
>>
>> --
>> Tim Triche, Jr.
>> USC Biostatistics
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Computational Biology
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N. PO Box 19024 Seattle, WA 98109

Location: M1-B861
Telephone: 206 667-2793


From jfox at mcmaster.ca  Sat Oct  8 14:48:57 2011
From: jfox at mcmaster.ca (John Fox)
Date: Sat, 8 Oct 2011 08:48:57 -0400
Subject: [Rd] parallel::mclapply() dummy function on Windows?
In-Reply-To: <4E903EED.7070007@fhcrc.org>
References: <CAC+N9BWkeqy_fAPuXk5VuCc7_z3fNon3YefYwg8XqO9QSoVUyg@mail.gmail.com>	<alpine.LFD.2.02.1110070711170.21223@gannet.stats.ox.ac.uk>	<CAC+N9BUsVw81OgiPkMm=9FYJ5EzhkXf-CJf3smWVJWVuEvCSHQ@mail.gmail.com>	<008801cc8556$290fba40$7b2f2ec0$@mcmaster.ca>
	<4E903EED.7070007@fhcrc.org>
Message-ID: <002501cc85b8$a5b94180$f12bc480$@mcmaster.ca>

Dear Martin,

I don't have an opinion about whether what Tim wants to do is a good idea,
but was responding to his comment that he would need "parallel=FALSE flags
all over the place." Why could he not simply define

 	mclapply <- if (.Platform$OS.type == "windows") base::lapply else
parallel::mclapply

in his package?

Best,
 John

> -----Original Message-----
> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-project.org]
On
> Behalf Of Martin Morgan
> Sent: October-08-11 8:16 AM
> To: John Fox
> Cc: ttriche at usc.edu; 'Prof Brian Ripley'; 'r-devel'
> Subject: Re: [Rd] parallel::mclapply() dummy function on Windows?
> 
> On 10/07/2011 06:03 PM, John Fox wrote:
> > Dear Tim,
> >
> >> -----Original Message-----
> >> From: r-devel-bounces at r-project.org
> >> [mailto:r-devel-bounces at r-project.org]
> > On
> >> Behalf Of Tim Triche, Jr.
> >> Sent: October-07-11 3:05 PM
> >> To: Prof Brian Ripley
> >> Cc: r-devel
> >> Subject: Re: [Rd] parallel::mclapply() dummy function on Windows?
> >>
> >> On Thu, Oct 6, 2011 at 11:25 PM, Prof Brian Ripley
> >> <ripley at stats.ox.ac.uk>wrote:
> >>
> >>>
> >>> Why would it make it easier?  And how could using a dummy for 'most
> > users'
> >>> (who are on Windows) offer them 'good parallel support'?
> >>
> >>
> >> Good point.  Most of my users are on unix, because my use of
> >> mclapply() is primarily to expedite processing of raw scanner data.
> >> Only a handful of users for the packages that call mclapply() are on
> >> Windows.  Right now, I default to having parallel=FALSE flags all
> >> over the place, but I'd prefer
> > for
> >> the default to be "go as fast as practical in the common case", i.e.,
> > Unix.
> >> It would have been more accurate for me to say "I would like to
> > parallelize
> >> by default, without having the methods fail on Windows in the default
> >> configuration" than to claim that I want "good parallel support" for
> > Windows.
> >> When I have tried using the foreach/doMC combination in the past, it
> >> has
> > not
> >> worked out satisfactorily, so I don't know how well I can support
> >> Windows users... period.
> >
> > Why don't you just apply the approach you initially suggested in your
> > own package, defining mclapply() the way you want it?
> 
> Hi John et al.,
> 
> Individual packages will become littered with ad hoc solutions,
constructed
> without, for instance, the wisdom and experience of Prof.
> Ripley about platforms or environments in which it is appropriate to use
> mclapply. For instance, Tim's pseudo-code if (Windows) ... translated as
if
> (.Platform$OS.type == "windows") doesn't sound like its the correct test;
at
> least
> 
>    exists("mclapply", getNamespace("parallel"))
> 
> but probably more. Also, doesn't parallel's name space differ between
> platforms, requiring the package author to import(parallel) rather than
the
> better practice of importFrom(parallel, mclapply) ?
> 
> Martin
> 
> >
> > I hope this helps,
> >   John
> >
> >>
> >> Take a look at e.g. package 'boot' to see how to offer alternatives.
> >> (A
> >>> version that uses 'parallel' is pending on CRAN, or see
> >>> http://www.stats.ox.ac.uk/pub/**R/boot_1.3-3.tar.gz<http://www.stats
> >>> .o
> >>> x.ac.uk/pub/R/boot_1.3-3.tar.gz>.) Package 'parallel' may in future
> >>> offer a higher-level abstraction layer that makes offers such a
> >>> choice,
> > but
> >> as the 'boot' code shows, deciding what to send to the workers in a
> >> snow- style cluster is not simple.
> >>>
> >>
> >> It seems similar to what I do (off topic: why do you use the file
> > extension
> >> '.q' for all of the R/S code files?): pass flags around.  I suppose I
> >> was just being lazy, but I would love to default to "go as fast as
> possible"
> >> without having Windows users get left out in the cold (unless they
> >> add
> > flags
> >> to their function calls).
> >>
> >> Thank you for your suggestions, I will look into this further.
> >>
> >> --
> >> Tim Triche, Jr.
> >> USC Biostatistics
> >>
> >> 	[[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 
> --
> Computational Biology
> Fred Hutchinson Cancer Research Center
> 1100 Fairview Ave. N. PO Box 19024 Seattle, WA 98109
> 
> Location: M1-B861
> Telephone: 206 667-2793
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ligges at statistik.tu-dortmund.de  Sat Oct  8 15:51:07 2011
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 08 Oct 2011 15:51:07 +0200
Subject: [Rd] BitSet equivalent? Java code usable?
In-Reply-To: <r02010500-1068-F3AA0DA8F10511E097AB0017F2F04CA2@[192.168.0.5]>
References: <r02010500-1068-F3AA0DA8F10511E097AB0017F2F04CA2@[192.168.0.5]>
Message-ID: <4E90554B.1060500@statistik.tu-dortmund.de>



On 07.10.2011 19:01, Joachim Harloff wrote:
> Hi all,
>
> I consider writing a R package on statistics for the sorting method as a hobby. I have written a private Java application that I could use as a basis. Therefore I'd like to ask two questions:
>
> 1) logical vectors: Bit storage (small) and capable of bit operations?
> The Java application relies on BitSet(s) for efficiency reasons. Arrays of logical values cost far too much memory (in the 2nd level heap etc.) while chunks of BitSets easily fit into the first processor cache. Moreover the Bit operations or, xor, and, andnot, cardinality, clone, flip, equals, intersects are much faster done for BitSets than equivalent functions written for logical arrays. Is there any equivalent for BitSet in R? The vector type "logical" seems to be not equally powerful and I do not know its memory requirements. In BitSets a Bit requires just one Bit, no more.

Logical values in R do have at least 3 values: TRUE, FALSE and NA, hence 
cannot be implemented in one bit.


> 2) Can Java code be used?
> Can I use some Java code for a R package (without translating it first to C. This is not always simple)? Probably this sounds ugly but it would greatly simplify the task for me.

See the rJava package.

Best,
Uwe Ligges


>
> Regards,
> Joachim Harloff
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Sat Oct  8 15:56:35 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 8 Oct 2011 14:56:35 +0100 (BST)
Subject: [Rd] parallel::mclapply() dummy function on Windows?
In-Reply-To: <002501cc85b8$a5b94180$f12bc480$@mcmaster.ca>
References: <CAC+N9BWkeqy_fAPuXk5VuCc7_z3fNon3YefYwg8XqO9QSoVUyg@mail.gmail.com>
	<alpine.LFD.2.02.1110070711170.21223@gannet.stats.ox.ac.uk>
	<CAC+N9BUsVw81OgiPkMm=9FYJ5EzhkXf-CJf3smWVJWVuEvCSHQ@mail.gmail.com>
	<008801cc8556$290fba40$7b2f2ec0$@mcmaster.ca>
	<4E903EED.7070007@fhcrc.org>
	<002501cc85b8$a5b94180$f12bc480$@mcmaster.ca>
Message-ID: <alpine.LFD.2.02.1110081449150.9913@gannet.stats.ox.ac.uk>

On Sat, 8 Oct 2011, John Fox wrote:

> Dear Martin,
>
> I don't have an opinion about whether what Tim wants to do is a good idea,
> but was responding to his comment that he would need "parallel=FALSE flags
> all over the place." Why could he not simply define
>
> 	mclapply <- if (.Platform$OS.type == "windows") base::lapply else
> parallel::mclapply
>
> in his package?

Because mclapply has additional arguments that would be passed by FUN 
to lapply as part of ... .

We are contemplating having wrappers of mclapply and pvec on Windows 
equivalent to the behaviour with mc.cores = 1 on Unix.  But that is 
nothing to do with original specious claim to which I responded: if 
you want good parallel performance for most users you need also to 
support both parLapply and mclapply (or at least, parLapply with a 
fork cluster).

I think the import issue is a red herring: these functions are not 
called often enough for parallel::mclapply to be inefficient.  And 
really importFrom is only better practice for things that will always 
be used, since it moves the computation from as-needed to every time 
the package is loaded.

>
> Best,
> John
>
>> -----Original Message-----
>> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-project.org]
> On
>> Behalf Of Martin Morgan
>> Sent: October-08-11 8:16 AM
>> To: John Fox
>> Cc: ttriche at usc.edu; 'Prof Brian Ripley'; 'r-devel'
>> Subject: Re: [Rd] parallel::mclapply() dummy function on Windows?
>>
>> On 10/07/2011 06:03 PM, John Fox wrote:
>>> Dear Tim,
>>>
>>>> -----Original Message-----
>>>> From: r-devel-bounces at r-project.org
>>>> [mailto:r-devel-bounces at r-project.org]
>>> On
>>>> Behalf Of Tim Triche, Jr.
>>>> Sent: October-07-11 3:05 PM
>>>> To: Prof Brian Ripley
>>>> Cc: r-devel
>>>> Subject: Re: [Rd] parallel::mclapply() dummy function on Windows?
>>>>
>>>> On Thu, Oct 6, 2011 at 11:25 PM, Prof Brian Ripley
>>>> <ripley at stats.ox.ac.uk>wrote:
>>>>
>>>>>
>>>>> Why would it make it easier?  And how could using a dummy for 'most
>>> users'
>>>>> (who are on Windows) offer them 'good parallel support'?
>>>>
>>>>
>>>> Good point.  Most of my users are on unix, because my use of
>>>> mclapply() is primarily to expedite processing of raw scanner data.
>>>> Only a handful of users for the packages that call mclapply() are on
>>>> Windows.  Right now, I default to having parallel=FALSE flags all
>>>> over the place, but I'd prefer
>>> for
>>>> the default to be "go as fast as practical in the common case", i.e.,
>>> Unix.
>>>> It would have been more accurate for me to say "I would like to
>>> parallelize
>>>> by default, without having the methods fail on Windows in the default
>>>> configuration" than to claim that I want "good parallel support" for
>>> Windows.
>>>> When I have tried using the foreach/doMC combination in the past, it
>>>> has
>>> not
>>>> worked out satisfactorily, so I don't know how well I can support
>>>> Windows users... period.
>>>
>>> Why don't you just apply the approach you initially suggested in your
>>> own package, defining mclapply() the way you want it?
>>
>> Hi John et al.,
>>
>> Individual packages will become littered with ad hoc solutions,
> constructed
>> without, for instance, the wisdom and experience of Prof.
>> Ripley about platforms or environments in which it is appropriate to use
>> mclapply. For instance, Tim's pseudo-code if (Windows) ... translated as
> if
>> (.Platform$OS.type == "windows") doesn't sound like its the correct test;
> at
>> least
>>
>>    exists("mclapply", getNamespace("parallel"))
>>
>> but probably more. Also, doesn't parallel's name space differ between
>> platforms, requiring the package author to import(parallel) rather than
> the
>> better practice of importFrom(parallel, mclapply) ?
>>
>> Martin
>>
>>>
>>> I hope this helps,
>>>   John
>>>
>>>>
>>>> Take a look at e.g. package 'boot' to see how to offer alternatives.
>>>> (A
>>>>> version that uses 'parallel' is pending on CRAN, or see
>>>>> http://www.stats.ox.ac.uk/pub/**R/boot_1.3-3.tar.gz<http://www.stats
>>>>> .o
>>>>> x.ac.uk/pub/R/boot_1.3-3.tar.gz>.) Package 'parallel' may in future
>>>>> offer a higher-level abstraction layer that makes offers such a
>>>>> choice,
>>> but
>>>> as the 'boot' code shows, deciding what to send to the workers in a
>>>> snow- style cluster is not simple.
>>>>>
>>>>
>>>> It seems similar to what I do (off topic: why do you use the file
>>> extension
>>>> '.q' for all of the R/S code files?): pass flags around.  I suppose I
>>>> was just being lazy, but I would love to default to "go as fast as
>> possible"
>>>> without having Windows users get left out in the cold (unless they
>>>> add
>>> flags
>>>> to their function calls).
>>>>
>>>> Thank you for your suggestions, I will look into this further.
>>>>
>>>> --
>>>> Tim Triche, Jr.
>>>> USC Biostatistics
>>>>
>>>> 	[[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>> --
>> Computational Biology
>> Fred Hutchinson Cancer Research Center
>> 1100 Fairview Ave. N. PO Box 19024 Seattle, WA 98109
>>
>> Location: M1-B861
>> Telephone: 206 667-2793
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jfox at mcmaster.ca  Sat Oct  8 16:41:33 2011
From: jfox at mcmaster.ca (John Fox)
Date: Sat, 8 Oct 2011 10:41:33 -0400
Subject: [Rd] parallel::mclapply() dummy function on Windows?
In-Reply-To: <alpine.LFD.2.02.1110081449150.9913@gannet.stats.ox.ac.uk>
References: <CAC+N9BWkeqy_fAPuXk5VuCc7_z3fNon3YefYwg8XqO9QSoVUyg@mail.gmail.com>
	<alpine.LFD.2.02.1110070711170.21223@gannet.stats.ox.ac.uk>
	<CAC+N9BUsVw81OgiPkMm=9FYJ5EzhkXf-CJf3smWVJWVuEvCSHQ@mail.gmail.com>
	<008801cc8556$290fba40$7b2f2ec0$@mcmaster.ca>
	<4E903EED.7070007@fhcrc.org>
	<002501cc85b8$a5b94180$f12bc480$@mcmaster.ca>
	<alpine.LFD.2.02.1110081449150.9913@gannet.stats.ox.ac.uk>
Message-ID: <003801cc85c8$608760a0$219621e0$@mcmaster.ca>

Dear Brian,

> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
> Sent: October-08-11 9:57 AM
> To: John Fox
> Cc: 'Martin Morgan'; ttriche at usc.edu; 'r-devel'
> Subject: RE: [Rd] parallel::mclapply() dummy function on Windows?
> 
> On Sat, 8 Oct 2011, John Fox wrote:
> 
> > Dear Martin,
> >
> > I don't have an opinion about whether what Tim wants to do is a good
> > idea, but was responding to his comment that he would need
> > "parallel=FALSE flags all over the place." Why could he not simply
> > define
> >
> > 	mclapply <- if (.Platform$OS.type == "windows") base::lapply else
> > parallel::mclapply
> >
> > in his package?
> 
> Because mclapply has additional arguments that would be passed by FUN to
> lapply as part of ... .

I did think of that and took a look at mclapply() before I responded. All of
the additional arguments occur after ... and have defaults. I assumed from
the original posting that Tim Triche is using the defaults (otherwise I
don't think he would have made his original suggestion), but even if he is
not, he could define mclapply() in his package as something like

mclapply <- if (.Platform$OS.type != "windows") parallel::mclapply
	else function(X, FUN, ..., mc.preschedule = TRUE, mc.set.seed =
TRUE,
         			mc.silent = FALSE, mc.cores =
getOption("mc.cores", 2L),
         			mc.cleanup = TRUE, mc.allow.recursive =
TRUE))
			base::lapply(X, FUN, ...)

As I said, I won't pretend that I know whether his general approach is
sound.

Best,
 John

> 
> We are contemplating having wrappers of mclapply and pvec on Windows
> equivalent to the behaviour with mc.cores = 1 on Unix.  But that is
nothing
> to do with original specious claim to which I responded: if you want good
> parallel performance for most users you need also to support both
parLapply
> and mclapply (or at least, parLapply with a fork cluster).
> 
> I think the import issue is a red herring: these functions are not called
> often enough for parallel::mclapply to be inefficient.  And really
importFrom
> is only better practice for things that will always be used, since it
moves
> the computation from as-needed to every time the package is loaded.
> 
> >
> > Best,
> > John
> >
> >> -----Original Message-----
> >> From: r-devel-bounces at r-project.org
> >> [mailto:r-devel-bounces at r-project.org]
> > On
> >> Behalf Of Martin Morgan
> >> Sent: October-08-11 8:16 AM
> >> To: John Fox
> >> Cc: ttriche at usc.edu; 'Prof Brian Ripley'; 'r-devel'
> >> Subject: Re: [Rd] parallel::mclapply() dummy function on Windows?
> >>
> >> On 10/07/2011 06:03 PM, John Fox wrote:
> >>> Dear Tim,
> >>>
> >>>> -----Original Message-----
> >>>> From: r-devel-bounces at r-project.org
> >>>> [mailto:r-devel-bounces at r-project.org]
> >>> On
> >>>> Behalf Of Tim Triche, Jr.
> >>>> Sent: October-07-11 3:05 PM
> >>>> To: Prof Brian Ripley
> >>>> Cc: r-devel
> >>>> Subject: Re: [Rd] parallel::mclapply() dummy function on Windows?
> >>>>
> >>>> On Thu, Oct 6, 2011 at 11:25 PM, Prof Brian Ripley
> >>>> <ripley at stats.ox.ac.uk>wrote:
> >>>>
> >>>>>
> >>>>> Why would it make it easier?  And how could using a dummy for
> >>>>> 'most
> >>> users'
> >>>>> (who are on Windows) offer them 'good parallel support'?
> >>>>
> >>>>
> >>>> Good point.  Most of my users are on unix, because my use of
> >>>> mclapply() is primarily to expedite processing of raw scanner data.
> >>>> Only a handful of users for the packages that call mclapply() are
> >>>> on Windows.  Right now, I default to having parallel=FALSE flags
> >>>> all over the place, but I'd prefer
> >>> for
> >>>> the default to be "go as fast as practical in the common case",
> >>>> i.e.,
> >>> Unix.
> >>>> It would have been more accurate for me to say "I would like to
> >>> parallelize
> >>>> by default, without having the methods fail on Windows in the
> >>>> default configuration" than to claim that I want "good parallel
> >>>> support" for
> >>> Windows.
> >>>> When I have tried using the foreach/doMC combination in the past,
> >>>> it has
> >>> not
> >>>> worked out satisfactorily, so I don't know how well I can support
> >>>> Windows users... period.
> >>>
> >>> Why don't you just apply the approach you initially suggested in
> >>> your own package, defining mclapply() the way you want it?
> >>
> >> Hi John et al.,
> >>
> >> Individual packages will become littered with ad hoc solutions,
> > constructed
> >> without, for instance, the wisdom and experience of Prof.
> >> Ripley about platforms or environments in which it is appropriate to
> >> use mclapply. For instance, Tim's pseudo-code if (Windows) ...
> >> translated as
> > if
> >> (.Platform$OS.type == "windows") doesn't sound like its the correct
> >> test;
> > at
> >> least
> >>
> >>    exists("mclapply", getNamespace("parallel"))
> >>
> >> but probably more. Also, doesn't parallel's name space differ between
> >> platforms, requiring the package author to import(parallel) rather
> >> than
> > the
> >> better practice of importFrom(parallel, mclapply) ?
> >>
> >> Martin
> >>
> >>>
> >>> I hope this helps,
> >>>   John
> >>>
> >>>>
> >>>> Take a look at e.g. package 'boot' to see how to offer alternatives.
> >>>> (A
> >>>>> version that uses 'parallel' is pending on CRAN, or see
> >>>>> http://www.stats.ox.ac.uk/pub/**R/boot_1.3-3.tar.gz<http://www.sta
> >>>>> ts
> >>>>> .o
> >>>>> x.ac.uk/pub/R/boot_1.3-3.tar.gz>.) Package 'parallel' may in
> >>>>> future offer a higher-level abstraction layer that makes offers
> >>>>> such a choice,
> >>> but
> >>>> as the 'boot' code shows, deciding what to send to the workers in a
> >>>> snow- style cluster is not simple.
> >>>>>
> >>>>
> >>>> It seems similar to what I do (off topic: why do you use the file
> >>> extension
> >>>> '.q' for all of the R/S code files?): pass flags around.  I suppose
> >>>> I was just being lazy, but I would love to default to "go as fast
> >>>> as
> >> possible"
> >>>> without having Windows users get left out in the cold (unless they
> >>>> add
> >>> flags
> >>>> to their function calls).
> >>>>
> >>>> Thank you for your suggestions, I will look into this further.
> >>>>
> >>>> --
> >>>> Tim Triche, Jr.
> >>>> USC Biostatistics
> >>>>
> >>>> 	[[alternative HTML version deleted]]
> >>>>
> >>>> ______________________________________________
> >>>> R-devel at r-project.org mailing list
> >>>> https://stat.ethz.ch/mailman/listinfo/r-devel
> >>>
> >>> ______________________________________________
> >>> R-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-devel
> >>
> >>
> >> --
> >> Computational Biology
> >> Fred Hutchinson Cancer Research Center
> >> 1100 Fairview Ave. N. PO Box 19024 Seattle, WA 98109
> >>
> >> Location: M1-B861
> >> Telephone: 206 667-2793
> >>
> >> ______________________________________________
> >> R-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> 
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From maechler at stat.math.ethz.ch  Sat Oct  8 20:12:51 2011
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Sat, 8 Oct 2011 20:12:51 +0200
Subject: [Rd] Pb building sets of S4 / RefClass objects with package
	"sets"
In-Reply-To: <CAJi8Hmaof0i11oYdNFeH6qxMAHpE-UgWZTCdCg-XMKRusxqM-w@mail.gmail.com>
References: <CAJi8Hmaof0i11oYdNFeH6qxMAHpE-UgWZTCdCg-XMKRusxqM-w@mail.gmail.com>
Message-ID: <20112.37539.445308.67506@stat.math.ethz.ch>

There is no visible reason why you should ask this on R-devel.

Please do not misuse R-deve, but rather use R-help.

>>>>> "JP" == Johnny Paulo <johnny.jp.22 at gmail.com>
>>>>>     on Fri, 7 Oct 2011 18:01:56 +0100 writes:

    > Hi, does anyone know if it is possible to construct sets
    > of S4 objects?  It seems the constructor set does not
    > like it:

    > Error in as.vector(x, "character") : cannot coerce type
    > 'environment' to vector of type 'character'

    > Regards

    > Johnny

    > PS: by the way, does anyone know where I can find some
    > examples using the cset class from the "sets" package,
    > beside the one in the standard doc?


From maechler at stat.math.ethz.ch  Sat Oct  8 20:15:38 2011
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Sat, 8 Oct 2011 20:15:38 +0200
Subject: [Rd] median and data frames
In-Reply-To: <19898.51781.659704.798338@stat.math.ethz.ch>
References: <4DB85617.8090706@pburns.seanet.com>
	<BANLkTin6Cic0RhGdV_KWHcSz6JE5vj9igA@mail.gmail.com>
	<19898.51781.659704.798338@stat.math.ethz.ch>
Message-ID: <20112.37706.211881.267949@stat.math.ethz.ch>

>>>>> Martin Maechler <maechler at stat.math.ethz.ch>
>>>>>     on Fri, 29 Apr 2011 16:25:09 +0200 writes:

>>>>> Paul Johnson <pauljohn32 at gmail.com>
>>>>>     on Thu, 28 Apr 2011 00:20:27 -0500 writes:

    >> On Wed, Apr 27, 2011 at 12:44 PM, Patrick Burns
    >> <pburns at pburns.seanet.com> wrote:
    >>> Here are some data frames:
    >>> 
    >>> df3.2 <- data.frame(1:3, 7:9) df4.2 <- data.frame(1:4,
    >>> 7:10) df3.3 <- data.frame(1:3, 7:9, 10:12) df4.3 <-
    >>> data.frame(1:4, 7:10, 10:13) df3.4 <- data.frame(1:3,
    >>> 7:9, 10:12, 15:17) df4.4 <- data.frame(1:4, 7:10, 10:13,
    >>> 15:18)
    >>> 
    >>> Now here are some commands and their answers:

    >>>> median(df4.4)
    >>> [1] ?8.5 11.5
    >>>> median(df3.2[c(1,2,3),])
    >>> [1] 2 8
    >>>> median(df3.2[c(1,3,2),])
    >>> [1] ?2 NA Warning message: In mean.default(X[[2L]], ...)
    >>> : ?argument is not numeric or logical: returning NA
    >>> 
    >>> 
    >>> 
    >>> The sessionInfo is below, but it looks to me like the
    >>> present behavior started in 2.10.0.
    >>> 
    >>> Sometimes it gets the right answer. ?I'd be grateful to
    >>> hear how it does that -- I can't figure it out.
    >>> 

    > Hello, Pat.

    >> Nice poetry there!  I think I have an actual answer, as
    >> opposed to the usual crap I spew.

    >> I would agree if you said median.data.frame ought to be
    >> written to work columnwise, similar to mean.data.frame.

    >> apply and sapply always give the correct answer

    >>> apply(df3.3, 2, median)
    >> X1.3 X7.9 X10.12 2 8 11

    >     [...........]

    > exactly

    >> mean.data.frame is now implemented as

    >> mean.data.frame <- function(x, ...) sapply(x, mean, ...)

    > exactly.

    > My personal oppinion is that mean.data.frame() should
    > never have been written.  People should know, or learn, to
    > use apply functions for such a task.

    > The unfortunate fact that mean.data.frame() exists makes
    > people think that median.data.frame() should too, and then

    >   var.data.frame() sd.data.frame() mad.data.frame()
    > min.data.frame() max.data.frame() ...  ...

    > all just in order to *not* to have to know sapply() ????

    > No, rather not.

    > My vote is for deprecating mean.data.frame().
    > Martin

This has now happened -- for R 2.14.0 and later.
As raised in this thread in April, there's a similar
"extra helpful" behavior within the sd() function,
and we've also deprecated that.

In addition -- getting back to Pat Burns' original post,
I'm also proposing to change  median(<data.frame>)  
such that it produces an error instead of the current "sometimes
correct" (but mostly not!) results. 

Martin


From pauljohn32 at gmail.com  Sun Oct  9 21:49:21 2011
From: pauljohn32 at gmail.com (Paul Johnson)
Date: Sun, 9 Oct 2011 14:49:21 -0500
Subject: [Rd] "What Calls What" diagram. Flow Chart?
Message-ID: <CAErODj9AZS1JnnKXDGP1-Pv0NkT941Rt8sV15o5Gy08Gn-5PDw@mail.gmail.com>

I don't know the right computer science words for this question, I'm
afraid. Apology in advance.

How do you find your way around in somebody else's code?  If the user
runs a specific command, and wants to know how the data is managed
until the result is returned, what to do ?

I've tried this manually with tools like mtrace and browser. This is a
bit frustrating because the browser does not stay in effect until the
work is done. It quits at the end of the function.  So you have to
attach the browser to the functions that are called there, and so
forth.  But that doesn't quite put everything together.

Example.  Recently I was trying to find out where the package lavaan's
calculations for the function cfa are actually done and it was a
maddening chase from one function to the next, as data was
re-organized and options were filled in. lavaan's "cfa" function
reformats some options, then the work gets done by an eval.

cfa> fit <- cfa(HS.model, data=HolzingerSwineford1939)
debugging in: cfa(HS.model, data = HolzingerSwineford1939)
debug: {
    mc <- match.call()
    mc$model.type = as.character(mc[[1L]])
    if (length(mc$model.type) == 3L)
        mc$model.type <- mc$model.type[3L]
    mc$int.ov.free = TRUE
    mc$int.lv.free = FALSE
    mc$auto.fix.first = !std.lv
    mc$auto.fix.single = TRUE
    mc$auto.var = TRUE
    mc$auto.cov.lv.x = TRUE
    mc$auto.cov.y = TRUE
    mc[[1L]] <- as.name("lavaan")
    eval(mc, parent.frame())
}

The value of "mc" that gets executed by eval is this

Browse[2]> mc
lavaan(model.syntax = HS.model, data = HolzingerSwineford1939,
    model.type = "cfa", int.ov.free = TRUE, int.lv.free = FALSE,
    auto.fix.first = TRUE, auto.fix.single = TRUE, auto.var = TRUE,
    auto.cov.lv.x = TRUE, auto.cov.y = TRUE)

So then I need to but a debug on "lavaan" and step through that, see
what it does.

Is there a way to make a list of the functions that are called "pop
out", possibly with a flow chart?

Consider lm,  I want to know

lm -> lm.fit ->  .Fortran("dqrls")

I'm not asking for a conceptual UML diagram, so far as I know.

The kind of trace information you get with gdb in C programs and
shallow steps with "n" would probably help. I would not need to keep
attaching more functions with debug.

pj

-- 
Paul E. Johnson
Professor, Political Science
1541 Lilac Lane, Room 504
University of Kansas


From henrik.parn at bio.ntnu.no  Sat Oct  8 14:54:00 2011
From: henrik.parn at bio.ntnu.no (=?ISO-8859-1?Q?Henrik_P=E4rn?=)
Date: Sat, 08 Oct 2011 14:54:00 +0200
Subject: [Rd] help text for which.min
Message-ID: <4E9047E8.8000809@bio.ntnu.no>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111008/970899be/attachment.pl>

From henrik.parn at bio.ntnu.no  Sat Oct  8 15:32:49 2011
From: henrik.parn at bio.ntnu.no (=?ISO-8859-1?Q?Henrik_P=E4rn?=)
Date: Sat, 08 Oct 2011 15:32:49 +0200
Subject: [Rd] help text for which.min
In-Reply-To: <4E9047E8.8000809@bio.ntnu.no>
References: <4E9047E8.8000809@bio.ntnu.no>
Message-ID: <4E905101.3080306@bio.ntnu.no>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111008/99cb2fdf/attachment.pl>

From pauljohn32 at gmail.com  Mon Oct 10 17:31:20 2011
From: pauljohn32 at gmail.com (Paul Johnson)
Date: Mon, 10 Oct 2011 10:31:20 -0500
Subject: [Rd] "What Calls What" diagram. Flow Chart?
In-Reply-To: <3D59DF35E7CF3E42BA70C23BD5CBE6A85F5E6034FE@exvic-mbx04.nexus.csiro.au>
References: <CAErODj9AZS1JnnKXDGP1-Pv0NkT941Rt8sV15o5Gy08Gn-5PDw@mail.gmail.com>
	<3D59DF35E7CF3E42BA70C23BD5CBE6A85F5E6034FE@exvic-mbx04.nexus.csiro.au>
Message-ID: <CAErODj85qgWCf7hUhZ5-dr0LuQ=7KfX-=xGndjybq6gqwK=JMA@mail.gmail.com>

On Sun, Oct 9, 2011 at 5:29 PM,  <Mark.Bravington at csiro.au> wrote:
> Hi Paul
>
> Have you tried
>
> mvbutils::foodweb( where=asNamespace( 'lavaan'))
>
> (assuming lavaan has a namespace, otherwise where='package:lavaan')?
>
> Sounds like it's what you're after--
>
> Mark
>
Thanks, Mark. The foodweb graph for lavaan is a bit overwhelming.

The graph shows everything it finds that might be called any time, it
doesn't help me trace the path of a specific user call to a particular
function. So I'm not entirely sure it is doing what I hope for.

While matching the graph against the source code, it seems to me some
R language idioms can confuse/break the foodweb.  When eval is called
on a string object, then I think function calls can escape detection.
In the cfa example code I put in the original post, the function
"lavaan" is called by eval, and as far as I can tell in the foodweb
output, that connection is not found.

I'm still studying your package, of course, but here's (I think) an
example, I know "cfa" does call "lavaan" though eval, but this code

library(lavaan)
library(mvbutils)
mvbutils::foodweb( where=asNamespace( 'lavaan'))

myfw <- mvbutils::foodweb( where=asNamespace( 'lavaan'))

callers.of("lavaan", myfw)


> [1] "independence.model"      "independence.model.fit"
[3] "independence.model.fit2" "setLavaanOptions"




-- 
Paul E. Johnson
Professor, Political Science
1541 Lilac Lane, Room 504
University of Kansas


From wdunlap at tibco.com  Mon Oct 10 18:03:21 2011
From: wdunlap at tibco.com (William Dunlap)
Date: Mon, 10 Oct 2011 16:03:21 +0000
Subject: [Rd] "What Calls What" diagram. Flow Chart?
In-Reply-To: <CAErODj85qgWCf7hUhZ5-dr0LuQ=7KfX-=xGndjybq6gqwK=JMA@mail.gmail.com>
References: <CAErODj9AZS1JnnKXDGP1-Pv0NkT941Rt8sV15o5Gy08Gn-5PDw@mail.gmail.com>
	<3D59DF35E7CF3E42BA70C23BD5CBE6A85F5E6034FE@exvic-mbx04.nexus.csiro.au>
	<CAErODj85qgWCf7hUhZ5-dr0LuQ=7KfX-=xGndjybq6gqwK=JMA@mail.gmail.com>
Message-ID: <E66794E69CFDE04D9A70842786030B931E8CCE@PA-MBX03.na.tibco.com>

Have you tried using trace()?  E.g.,
  > library(lavaan)
  > trace(lavaan)
  >  HS.model <- ' visual  =~ x1 + x2 + x3
  +                    textual =~ x4 + x5 + x6
  +                    speed   =~ x7 + x8 + x9 '
  >      
  >      fit <- cfa(HS.model, data=HolzingerSwineford1939)
  trace: lavaan(model.syntax = HS.model, data = HolzingerSwineford1939, 
      model.type = "cfa", int.ov.free = TRUE, int.lv.free = FALSE, 
      auto.fix.first = TRUE, auto.fix.single = TRUE, auto.var = TRUE, 
      auto.cov.lv.x = TRUE, auto.cov.y = TRUE)
or, to see who is calling what and what eval is evaluating,
  > trace(lavaan, quote(cat(sapply(sys.calls(), function(e)deparse(e)[1]), sep="\n   ")))
  Tracing function "lavaan" in package "lavaan"
  [1] "lavaan"
  > trace(eval, quote(cat("   ", deparse(expr), "\n")))
  Tracing function "eval" in package "base"
  [1] "eval"
  >  HS.model <- ' visual  =~ x1 + x2 + x3
  +                    textual =~ x4 + x5 + x6
  +                    speed   =~ x7 + x8 + x9 '
  >      
  >      fit <- cfa(HS.model, data=HolzingerSwineford1939)
  Tracing eval(mc, parent.frame()) on entry 
      lavaan(model.syntax = HS.model, data = HolzingerSwineford1939,      model.type = "cfa", int.ov.free = TRUE, int.lv.free = FALSE,      auto.fix.first =   TRUE, auto.fix.single = TRUE, auto.var = TRUE,      auto.cov.lv.x = TRUE, auto.cov.y = TRUE) 
Tracing lavaan(model.syntax = HS.model, data = HolzingerSwineford1939,  .... on entry 
  cfa(HS.model, data = HolzingerSwineford1939)
     eval(mc, parent.frame())
     eval(expr, envir, enclos)
     lavaan(model.syntax = HS.model, data = HolzingerSwineford1939, 
     .doTrace(cat(sapply(sys.calls(), function(e) deparse(e)[1]), 
     eval.parent(exprObj)
     eval(expr, p)
     eval(expr, envir, enclos)
  Tracing eval(parse(text = x)[[1L]]) on entry 
      ~visual 
  Tracing eval(parse(text = x)[[1L]]) on entry 
      ~x1 + x2 + x3 
  Tracing eval(parse(text = x)[[1L]]) on entry 
      ~textual 
  Tracing eval(parse(text = x)[[1L]]) on entry 
      ~x4 + x5 + x6 
  Tracing eval(parse(text = x)[[1L]]) on entry 
      ~speed 
  Tracing eval(parse(text = x)[[1L]]) on entry 
      ~x7 + x8 + x9 
  Tracing eval(formal.args[[deparse(substitute(arg))]]) on entry 
      c("no", "ifany", "always") 
  Tracing eval(formal.args[[deparse(substitute(arg))]]) on entry 
      c("shell", "quick", "radix") 
  Tracing eval(formal.args[[deparse(substitute(arg))]]) on entry 
      c("pearson", "kendall", "spearman")

Bill Dunlap
Spotfire, TIBCO Software
wdunlap tibco.com 

> -----Original Message-----
> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-project.org] On Behalf Of Paul Johnson
> Sent: Monday, October 10, 2011 8:31 AM
> To: Mark.Bravington at csiro.au; R Devel List
> Subject: Re: [Rd] "What Calls What" diagram. Flow Chart?
> 
> On Sun, Oct 9, 2011 at 5:29 PM,  <Mark.Bravington at csiro.au> wrote:
> > Hi Paul
> >
> > Have you tried
> >
> > mvbutils::foodweb( where=asNamespace( 'lavaan'))
> >
> > (assuming lavaan has a namespace, otherwise where='package:lavaan')?
> >
> > Sounds like it's what you're after--
> >
> > Mark
> >
> Thanks, Mark. The foodweb graph for lavaan is a bit overwhelming.
> 
> The graph shows everything it finds that might be called any time, it
> doesn't help me trace the path of a specific user call to a particular
> function. So I'm not entirely sure it is doing what I hope for.
> 
> While matching the graph against the source code, it seems to me some
> R language idioms can confuse/break the foodweb.  When eval is called
> on a string object, then I think function calls can escape detection.
> In the cfa example code I put in the original post, the function
> "lavaan" is called by eval, and as far as I can tell in the foodweb
> output, that connection is not found.
> 
> I'm still studying your package, of course, but here's (I think) an
> example, I know "cfa" does call "lavaan" though eval, but this code
> 
> library(lavaan)
> library(mvbutils)
> mvbutils::foodweb( where=asNamespace( 'lavaan'))
> 
> myfw <- mvbutils::foodweb( where=asNamespace( 'lavaan'))
> 
> callers.of("lavaan", myfw)
> 
> 
> > [1] "independence.model"      "independence.model.fit"
> [3] "independence.model.fit2" "setLavaanOptions"
> 
> 
> 
> 
> --
> Paul E. Johnson
> Professor, Political Science
> 1541 Lilac Lane, Room 504
> University of Kansas
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From oliver at first.in-berlin.de  Mon Oct 10 23:21:59 2011
From: oliver at first.in-berlin.de (oliver)
Date: Mon, 10 Oct 2011 23:21:59 +0200
Subject: [Rd] "Speeding tickets for R and Stata"
Message-ID: <20111010212159.GA3192@siouxsie>

Hello,

an article on that topic:
  http://ekonometrics.blogspot.com/2011/04/speeding-tickets-for-r-and-stata.html


Ciao,
   Oliver


From m.cowley at garvan.org.au  Tue Oct 11 02:48:58 2011
From: m.cowley at garvan.org.au (Mark Cowley)
Date: Tue, 11 Oct 2011 11:48:58 +1100
Subject: [Rd] R CMD INSTALL writes to stderr
Message-ID: <FC9BE859-2E91-492A-A0B3-34A565E9084A@garvan.org.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111011/cb2dfb95/attachment.pl>

From simon.urbanek at r-project.org  Tue Oct 11 03:23:47 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 10 Oct 2011 21:23:47 -0400
Subject: [Rd] R CMD INSTALL writes to stderr
In-Reply-To: <FC9BE859-2E91-492A-A0B3-34A565E9084A@garvan.org.au>
References: <FC9BE859-2E91-492A-A0B3-34A565E9084A@garvan.org.au>
Message-ID: <F7873F53-1083-4B95-9955-69B31724D8BD@r-project.org>


On Oct 10, 2011, at 8:48 PM, Mark Cowley wrote:

> Dear list,
> (this is a follow up from a previous query)
> 
> Why does R CMD INSTALL write most of its messages to stderr? If it wrote to stdout, then we could capture its output within an R session when calling 
> sink("stdout.txt", type="output")
> install.packages("MASS", type="source")
> sink()
> 
> As it stands, the stderr messages can't be captured via sink/capture.output/suppressMessages within an R session. Interestingly, the make output goes to stdout, but the R messages go to stderr:
> 
> # the 'make' output goes to stdout
> $ R --vanilla CMD INSTALL -l /tmp MASS_7.3-14.tar.gz 2>/dev/null
> gcc-4.2 -arch i386 -std=gnu99 -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/i386  -I/usr/local/include    -fPIC  -g -O2 -c MASS.c -o MASS.o
> gcc-4.2 -arch i386 -std=gnu99 -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/i386  -I/usr/local/include    -fPIC  -g -O2 -c lqs.c -o lqs.o
> gcc-4.2 -arch i386 -std=gnu99 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/usr/local/lib -o MASS.so MASS.o lqs.o -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
> gcc-4.2 -arch x86_64 -std=gnu99 -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/x86_64  -I/usr/local/include    -fPIC  -g -O2 -c MASS.c -o MASS.o
> gcc-4.2 -arch x86_64 -std=gnu99 -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/x86_64  -I/usr/local/include    -fPIC  -g -O2 -c lqs.c -o lqs.o
> gcc-4.2 -arch x86_64 -std=gnu99 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/usr/local/lib -o MASS.so MASS.o lqs.o -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
> 
> # the R CMD INSTALL output goes to stderr
> $ R --vanilla CMD INSTALL -l /tmp MASS_7.3-14.tar.gz >/dev/null
> * installing *source* package ?MASS? ...
> ** libs
> *** arch - i386
> installing to /private/tmp/MASS/libs/i386
> *** arch - x86_64
> installing to /private/tmp/MASS/libs/x86_64
> ** R
> ** data
> **  moving datasets to lazyload DB
> ** inst
> ** preparing package for lazy loading
> ** help
> *** installing help indices
> ** building package indices ...
> ** testing if installed package can be loaded
> 
> * DONE (MASS)
> 
> $ R --vanilla CMD INSTALL -l /tmp MASS_7.3-14.tar.gz &>/dev/null
> # no output
> 
> Why do I care? i'm writing some software which uses R behind the scenes, and would like to suppress the messages that are produced by install.packages() when R libraries are being installed.
> 
> So, will it be possible for R CMD INSTALL output be written to stdout in the future?
> 

It can simply with 2>&1

I agree that this doesn't help you with install.packages directly. There are various degrees of ugliness that you can apply - ranging from using INSTALL_opts to force routing to stdout, to using your own system() front-end to handle the details yourself.

Why you don't simply use a variation of system("R -e 'install.packages(...)'", ...) where you have full control over the routing and yet sill use install.packages? That is generally how custom installers do this ... It sort of seems what you are trying to do anyway since you don't want the internal R output ... 

Cheers,
Simon


> kind regards,
> Mark
> 
> 
> -----------------------------------------------------
> Mark Cowley, PhD
> 
> Pancreatic Cancer Program | Peter Wills Bioinformatics Centre
> Garvan Institute of Medical Research, Sydney, Australia
> -----------------------------------------------------
> 
> sessionInfo()
> R version 2.13.1 (2011-07-08)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
> 
> locale:
> [1] en_AU.UTF-8/en_AU.UTF-8/C/C/en_AU.UTF-8/en_AU.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base     
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From m.cowley at garvan.org.au  Tue Oct 11 05:09:18 2011
From: m.cowley at garvan.org.au (Mark Cowley)
Date: Tue, 11 Oct 2011 14:09:18 +1100
Subject: [Rd] R CMD INSTALL writes to stderr
In-Reply-To: <F7873F53-1083-4B95-9955-69B31724D8BD@r-project.org>
References: <FC9BE859-2E91-492A-A0B3-34A565E9084A@garvan.org.au>
	<F7873F53-1083-4B95-9955-69B31724D8BD@r-project.org>
Message-ID: <AA3A17DD-35C0-4450-9D28-D79370BA911B@garvan.org.au>

Thanks for the tip Simon,
i've just written a simplified version of install.packages -- install.package.file which will silently R CMD INSTALL a package, assuming you've already downloaded it & if there's an installation problem, the R CMD INSTALL output is spat to stderr. Code available if anyone's interested

cheers,
Mark


On 11/10/2011, at 12:23 PM, Simon Urbanek wrote:

> 
> On Oct 10, 2011, at 8:48 PM, Mark Cowley wrote:
> 
>> Dear list,
>> (this is a follow up from a previous query)
>> 
>> Why does R CMD INSTALL write most of its messages to stderr? If it wrote to stdout, then we could capture its output within an R session when calling 
>> sink("stdout.txt", type="output")
>> install.packages("MASS", type="source")
>> sink()
>> 
>> As it stands, the stderr messages can't be captured via sink/capture.output/suppressMessages within an R session. Interestingly, the make output goes to stdout, but the R messages go to stderr:
>> 
>> # the 'make' output goes to stdout
>> $ R --vanilla CMD INSTALL -l /tmp MASS_7.3-14.tar.gz 2>/dev/null
>> gcc-4.2 -arch i386 -std=gnu99 -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/i386  -I/usr/local/include    -fPIC  -g -O2 -c MASS.c -o MASS.o
>> gcc-4.2 -arch i386 -std=gnu99 -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/i386  -I/usr/local/include    -fPIC  -g -O2 -c lqs.c -o lqs.o
>> gcc-4.2 -arch i386 -std=gnu99 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/usr/local/lib -o MASS.so MASS.o lqs.o -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
>> gcc-4.2 -arch x86_64 -std=gnu99 -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/x86_64  -I/usr/local/include    -fPIC  -g -O2 -c MASS.c -o MASS.o
>> gcc-4.2 -arch x86_64 -std=gnu99 -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/x86_64  -I/usr/local/include    -fPIC  -g -O2 -c lqs.c -o lqs.o
>> gcc-4.2 -arch x86_64 -std=gnu99 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/usr/local/lib -o MASS.so MASS.o lqs.o -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
>> 
>> # the R CMD INSTALL output goes to stderr
>> $ R --vanilla CMD INSTALL -l /tmp MASS_7.3-14.tar.gz >/dev/null
>> * installing *source* package ?MASS? ...
>> ** libs
>> *** arch - i386
>> installing to /private/tmp/MASS/libs/i386
>> *** arch - x86_64
>> installing to /private/tmp/MASS/libs/x86_64
>> ** R
>> ** data
>> **  moving datasets to lazyload DB
>> ** inst
>> ** preparing package for lazy loading
>> ** help
>> *** installing help indices
>> ** building package indices ...
>> ** testing if installed package can be loaded
>> 
>> * DONE (MASS)
>> 
>> $ R --vanilla CMD INSTALL -l /tmp MASS_7.3-14.tar.gz &>/dev/null
>> # no output
>> 
>> Why do I care? i'm writing some software which uses R behind the scenes, and would like to suppress the messages that are produced by install.packages() when R libraries are being installed.
>> 
>> So, will it be possible for R CMD INSTALL output be written to stdout in the future?
>> 
> 
> It can simply with 2>&1
> 
> I agree that this doesn't help you with install.packages directly. There are various degrees of ugliness that you can apply - ranging from using INSTALL_opts to force routing to stdout, to using your own system() front-end to handle the details yourself.
> 
> Why you don't simply use a variation of system("R -e 'install.packages(...)'", ...) where you have full control over the routing and yet sill use install.packages? That is generally how custom installers do this ... It sort of seems what you are trying to do anyway since you don't want the internal R output ... 
> 
> Cheers,
> Simon
> 
> 
>> kind regards,
>> Mark
>> 
>> 
>> -----------------------------------------------------
>> Mark Cowley, PhD
>> 
>> Pancreatic Cancer Program | Peter Wills Bioinformatics Centre
>> Garvan Institute of Medical Research, Sydney, Australia
>> -----------------------------------------------------
>> 
>> sessionInfo()
>> R version 2.13.1 (2011-07-08)
>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>> 
>> locale:
>> [1] en_AU.UTF-8/en_AU.UTF-8/C/C/en_AU.UTF-8/en_AU.UTF-8
>> 
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base     
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
> 


From andre.zege at gmail.com  Tue Oct 11 18:33:14 2011
From: andre.zege at gmail.com (A Zege)
Date: Tue, 11 Oct 2011 09:33:14 -0700 (PDT)
Subject: [Rd] how to make a true binary package?
Message-ID: <1318350794267-3895117.post@n4.nabble.com>


I'd like to have a version of a package that doesn't include sources. I
thought that this could be achieved by using binary option in R CMD build,
but in fact it packages source code that could be easily printed once the
library is loaded. Is there an option to avoid visibility of the source? 

Another related question is how to install two versions of the same package,
so that i could load either of them? I am sure this could be done, just
cannot find this in docs.

I am using R 2.12.1 on Red Hat Lunix 

--
View this message in context: http://r.789695.n4.nabble.com/how-to-make-a-true-binary-package-tp3895117p3895117.html
Sent from the R devel mailing list archive at Nabble.com.


From ligges at statistik.tu-dortmund.de  Tue Oct 11 18:39:38 2011
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 11 Oct 2011 18:39:38 +0200
Subject: [Rd] how to make a true binary package?
In-Reply-To: <1318350794267-3895117.post@n4.nabble.com>
References: <1318350794267-3895117.post@n4.nabble.com>
Message-ID: <4E94714A.8050603@statistik.tu-dortmund.de>



On 11.10.2011 18:33, A Zege wrote:
>
> I'd like to have a version of a package that doesn't include sources. I
> thought that this could be achieved by using binary option in R CMD build,
> but in fact it packages source code that could be easily printed once the
> library is loaded. Is there an option to avoid visibility of the source?

R is open source software ...

Anyway, for C sources: these cannot be printed easily in a binary 
package. But then make sure your license is file given you link against 
something under GPL ...


> Another related question is how to install two versions of the same package,
> so that i could load either of them? I am sure this could be done, just
> cannot find this in docs.

You can install each version of the package into a separate library.

Uwe Ligges





>
> I am using R 2.12.1 on Red Hat Lunix
>
> --
> View this message in context: http://r.789695.n4.nabble.com/how-to-make-a-true-binary-package-tp3895117p3895117.html
> Sent from the R devel mailing list archive at Nabble.com.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch.duncan at gmail.com  Tue Oct 11 18:43:30 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 11 Oct 2011 12:43:30 -0400
Subject: [Rd] how to make a true binary package?
In-Reply-To: <1318350794267-3895117.post@n4.nabble.com>
References: <1318350794267-3895117.post@n4.nabble.com>
Message-ID: <4E947232.70301@gmail.com>

On 11/10/2011 12:33 PM, A Zege wrote:
> I'd like to have a version of a package that doesn't include sources. I
> thought that this could be achieved by using binary option in R CMD build,
> but in fact it packages source code that could be easily printed once the
> library is loaded. Is there an option to avoid visibility of the source?

No.  As Uwe said, R is an open source project.  We like to encourage 
others to be open source too.

Duncan Murdoch

> Another related question is how to install two versions of the same package,
> so that i could load either of them? I am sure this could be done, just
> cannot find this in docs.
>
> I am using R 2.12.1 on Red Hat Lunix
>
> --
> View this message in context: http://r.789695.n4.nabble.com/how-to-make-a-true-binary-package-tp3895117p3895117.html
> Sent from the R devel mailing list archive at Nabble.com.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From andre.zege at gmail.com  Tue Oct 11 19:09:23 2011
From: andre.zege at gmail.com (A Zege)
Date: Tue, 11 Oct 2011 10:09:23 -0700 (PDT)
Subject: [Rd] how to make a true binary package?
In-Reply-To: <4E947232.70301@gmail.com>
References: <1318350794267-3895117.post@n4.nabble.com>
	<4E947232.70301@gmail.com>
Message-ID: <1318352963569-3895262.post@n4.nabble.com>

OK, gentlemen, i agree with you in general. I was not talking about a general
purpose, general use package that one prepares for CRAN. I am sure you are
familiar professionally or can imagine situations where you need to
demonstrate a solution to a specific task without fully disclosing the
details -- sometimes even hard core open source adherents need to sacrifice
desire for openness for some prosaic purposes, like getting paid :).
Compilable languages give an easy solution of a binary code. It sounds like
if one wants true binary, he has to recode in C++. I thought it's possible
in R as well, i thought this was discussed even as a default behavior for
next version of R to make stuff go faster. Maybe not. Thanks, anyway.


--
View this message in context: http://r.789695.n4.nabble.com/how-to-make-a-true-binary-package-tp3895117p3895262.html
Sent from the R devel mailing list archive at Nabble.com.


From simon.urbanek at r-project.org  Tue Oct 11 19:41:37 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 11 Oct 2011 13:41:37 -0400
Subject: [Rd] how to make a true binary package?
In-Reply-To: <1318352963569-3895262.post@n4.nabble.com>
References: <1318350794267-3895117.post@n4.nabble.com>
	<4E947232.70301@gmail.com>
	<1318352963569-3895262.post@n4.nabble.com>
Message-ID: <38F19D98-1709-462C-AA32-A294F39E92B2@r-project.org>


On Oct 11, 2011, at 1:09 PM, A Zege wrote:

> OK, gentlemen, i agree with you in general. I was not talking about a general
> purpose, general use package that one prepares for CRAN. I am sure you are
> familiar professionally or can imagine situations where you need to
> demonstrate a solution to a specific task without fully disclosing the
> details -- sometimes even hard core open source adherents need to sacrifice
> desire for openness for some prosaic purposes, like getting paid :).

Those are fairly disjoint concepts - open source doesn't mean you can't get paid. Also the fact that the source is accessible doesn't mean that it is legal for someone else to take it - you define what you allow in the license. Note, for example that Java bytecode can be easily disassembled into readable Java source form and yet there is a lot of commercial software written in Java.


> Compilable languages give an easy solution of a binary code. It sounds like
> if one wants true binary, he has to recode in C++. I thought it's possible
> in R as well, i thought this was discussed even as a default behavior for
> next version of R to make stuff go faster. Maybe not. Thanks, anyway.
> 

You can compile the functions and strip the source code from the bytecode objects. Such a thing can be serialized without revealing the original source code. However, you can still de-compile it, and R doesn't guarantee that such stripped objects will continue to work, so your mileage will vary and you may want to check if it's what you want.

There are obvious other ways you could use that are much simpler - such as encrypt your sources. Nothing is completely bullet-proof, it's just a matter of how much work it requires to break whichever method you choose.

Cheers,
Simon


From spencer.graves at prodsyse.com  Tue Oct 11 19:55:55 2011
From: spencer.graves at prodsyse.com (Spencer Graves)
Date: Tue, 11 Oct 2011 10:55:55 -0700
Subject: [Rd] how to make a true binary package?
In-Reply-To: <38F19D98-1709-462C-AA32-A294F39E92B2@r-project.org>
References: <1318350794267-3895117.post@n4.nabble.com>
	<4E947232.70301@gmail.com>
	<1318352963569-3895262.post@n4.nabble.com>
	<38F19D98-1709-462C-AA32-A294F39E92B2@r-project.org>
Message-ID: <4E94832B.3090902@prodsyse.com>

       One of the most secure options, I think, is to provide a 
web-based tool to do the computations.  I know one case where this was 
done.  The clients probably did not even know that R was being used to 
do the computations.  They had an application or a procedure for 
uploading their data to a secure web site, which then returned answers.  
This too can be defeated by determined hackers, but if you are careful 
about your encryption, etc., you can make it quite difficult for them.


       Hope this helps.
       Spencer


On 10/11/2011 10:41 AM, Simon Urbanek wrote:
> On Oct 11, 2011, at 1:09 PM, A Zege wrote:
>
>> OK, gentlemen, i agree with you in general. I was not talking about a general
>> purpose, general use package that one prepares for CRAN. I am sure you are
>> familiar professionally or can imagine situations where you need to
>> demonstrate a solution to a specific task without fully disclosing the
>> details -- sometimes even hard core open source adherents need to sacrifice
>> desire for openness for some prosaic purposes, like getting paid :).
> Those are fairly disjoint concepts - open source doesn't mean you can't get paid. Also the fact that the source is accessible doesn't mean that it is legal for someone else to take it - you define what you allow in the license. Note, for example that Java bytecode can be easily disassembled into readable Java source form and yet there is a lot of commercial software written in Java.
>
>
>> Compilable languages give an easy solution of a binary code. It sounds like
>> if one wants true binary, he has to recode in C++. I thought it's possible
>> in R as well, i thought this was discussed even as a default behavior for
>> next version of R to make stuff go faster. Maybe not. Thanks, anyway.
>>
> You can compile the functions and strip the source code from the bytecode objects. Such a thing can be serialized without revealing the original source code. However, you can still de-compile it, and R doesn't guarantee that such stripped objects will continue to work, so your mileage will vary and you may want to check if it's what you want.
>
> There are obvious other ways you could use that are much simpler - such as encrypt your sources. Nothing is completely bullet-proof, it's just a matter of how much work it requires to break whichever method you choose.
>
> Cheers,
> Simon
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From b.rowlingson at lancaster.ac.uk  Tue Oct 11 23:57:00 2011
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue, 11 Oct 2011 22:57:00 +0100
Subject: [Rd] how to make a true binary package?
In-Reply-To: <1318352963569-3895262.post@n4.nabble.com>
References: <1318350794267-3895117.post@n4.nabble.com>
	<4E947232.70301@gmail.com>
	<1318352963569-3895262.post@n4.nabble.com>
Message-ID: <CANVKczNRxycXcmoFAw=dNbQr5J7014r+LimxgCHGaW22cdb6eA@mail.gmail.com>

On Tue, Oct 11, 2011 at 6:09 PM, A Zege <andre.zege at gmail.com> wrote:
> OK, gentlemen, i agree with you in general. I was not talking about a general
> purpose, general use package that one prepares for CRAN. I am sure you are
> familiar professionally or can imagine situations where you need to
> demonstrate a solution to a specific task without fully disclosing the
> details -- sometimes even hard core open source adherents need to sacrifice
> desire for openness for some prosaic purposes, like getting paid :).
> Compilable languages give an easy solution of a binary code. It sounds like
> if one wants true binary, he has to recode in C++. I thought it's possible
> in R as well, i thought this was discussed even as a default behavior for
> next version of R to make stuff go faster. Maybe not. Thanks, anyway.
>

 [deja vu all over again]

 What you seem to want to do is code obfuscation. With C, the
obfuscation is caused by it being turned into machine code
instructions, making exact reconstruction of the C source impossible,
but reconstruction of the code as assembly language and hence reverse
engineering very possible.

 With R, there is no compilation to machine code, so plain R source
code has to be available to the R interpreter [exception: see Simon's
talk of bytecode]. Any encryption you put on has to be decrypted by
the user in order to run it. I've said this a few times on R-help and
maybe R-devel too.

 If someone is offering to pay you, then if you tell them they can see
the source code then they should want to pay you more.

 There's also nothing to stop you putting a restrictive license on
your source code - including clauses like 'if you look at the contents
of any *.R files you are in breach of this license'. These things
might even stand up in court.

 Barry 'Not a lawyer' Rowlingson


From joachim.harloff at joachimharloff.de  Mon Oct 10 21:24:53 2011
From: joachim.harloff at joachimharloff.de (Joachim Harloff)
Date: Mon, 10 Oct 2011 21:24:53 +0200
Subject: [Rd] BitSet equivalent? Java code usable?
In-Reply-To: <CALRHPV1_BFu2=pEw9dPFvyMXbT_emQT9+AiODOZJcBdKKmqZVQ@mail.gmail.com>
Message-ID: <r02010500-1068-88811752F37511E0BAAF0017F2F04CA2@[192.168.0.3]>

> If you don't have NAs in your bits, you might be able to use the raw
> vector type. A raw value is one byte (8 bits), doesn't support NAs and
> supports bit operations on all the bits at once:
> 
>   &, |, !, xor
> 
> You'd probably want to wrap it into a class that allows a more
> BitSet-like view of it though. Maybe there's a package out there that
> does that already?
> 
> ....and if you DO have NAs, you could use two raw vectors (or two
> consecutive raw-vector bits per BitSet bit).
> 
> Good luck!
> 
> /Tommy
> 
Hi Tommy and Uwe,

thank you. I thought about similar things. Moreover, there are dynamic size equivalents for BitSets available for C++ (e.g. from Boost. It should be possible to create similar code on one's own)(unfortunately I am ignorant about Assembler programming) and these could build the basis for a new type in R.
Yes, a two bit value still was fourfold efficient in memory usage than a byte. This would probably pay off more than fourfold in terms of CPU time due to much less cache related activity. But was it also more efficient in the number of processing steps involved? As you wrote it required creating a new class where each &, |, !, xor operation needs a redefinition involving (at least) one additional bitmask operation.
To answer this question I'd need more knowledge about the basics of R's basic types and memory allocation. Are they compiled in C? Fortran? Using the GNU compiler? How could I serialize? Sorry, I never cared about that. Maybe there is a good resource about it on the R web site.
Even more computation steps in terms of a choice between different bitmasks will arise from the question: What do we do about NAs? 
NA + 0 -> NA or NA + 0 -> 0 ?
NA + NA -> NA or NA + NA -> 0?
Does one NA in one bit field influence the values of other bit fields of the same BitSet(s)?
And so on. The truth table is going to have many interesting variants besides the obvious solution. 
What does this mean for the efficiency gains expected? Do they vanish?

Well at least now I know which questions to tackle next. Thank you. - It's just a hobby and will take considerable time to hatch.

Joachim


From tommy.fortes at gmail.com  Mon Oct 10 19:21:12 2011
From: tommy.fortes at gmail.com (Tommy Fortes)
Date: Mon, 10 Oct 2011 10:21:12 -0700
Subject: [Rd] BitSet equivalent? Java code usable?
In-Reply-To: <4E90554B.1060500@statistik.tu-dortmund.de>
References: <r02010500-1068-F3AA0DA8F10511E097AB0017F2F04CA2@192.168.0.5>
	<4E90554B.1060500@statistik.tu-dortmund.de>
Message-ID: <CALRHPV1_BFu2=pEw9dPFvyMXbT_emQT9+AiODOZJcBdKKmqZVQ@mail.gmail.com>

If you don't have NAs in your bits, you might be able to use the raw
vector type. A raw value is one byte (8 bits), doesn't support NAs and
supports bit operations on all the bits at once:

  &, |, !, xor

You'd probably want to wrap it into a class that allows a more
BitSet-like view of it though. Maybe there's a package out there that
does that already?

...and if you DO have NAs, you could use two raw vectors (or two
consecutive raw-vector bits per BitSet bit).

Good luck!

/Tommy

2011/10/8 Uwe Ligges <ligges at statistik.tu-dortmund.de>:
>
>
> On 07.10.2011 19:01, Joachim Harloff wrote:
>>
>> Hi all,
>>
>> I consider writing a R package on statistics for the sorting method as a
>> hobby. I have written a private Java application that I could use as a
>> basis. Therefore I'd like to ask two questions:
>>
>> 1) logical vectors: Bit storage (small) and capable of bit operations?
>> The Java application relies on BitSet(s) for efficiency reasons. Arrays of
>> logical values cost far too much memory (in the 2nd level heap etc.) while
>> chunks of BitSets easily fit into the first processor cache. Moreover the
>> Bit operations or, xor, and, andnot, cardinality, clone, flip, equals,
>> intersects are much faster done for BitSets than equivalent functions
>> written for logical arrays. Is there any equivalent for BitSet in R? The
>> vector type "logical" seems to be not equally powerful and I do not know its
>> memory requirements. In BitSets a Bit requires just one Bit, no more.
>
> Logical values in R do have at least 3 values: TRUE, FALSE and NA, hence
> cannot be implemented in one bit.
>
>
>> 2) Can Java code be used?
>> Can I use some Java code for a R package (without translating it first to
>> C. This is not always simple)? Probably this sounds ugly but it would
>> greatly simplify the task for me.
>
> See the rJava package.
>
> Best,
> Uwe Ligges
>
>
>>
>> Regards,
>> Joachim Harloff
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From ostrouchovg at ornl.gov  Tue Oct 11 15:58:58 2011
From: ostrouchovg at ornl.gov (George Ostrouchov)
Date: Tue, 11 Oct 2011 09:58:58 -0400
Subject: [Rd] R CMD INSTALL configure.args and CC customization
Message-ID: <4E944BA2.30007@ornl.gov>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111011/2486a805/attachment.pl>

From mspiegel at renci.org  Tue Oct 11 16:16:08 2011
From: mspiegel at renci.org (Michael Spiegel)
Date: Tue, 11 Oct 2011 14:16:08 +0000
Subject: [Rd] [R-sig-hpc] R CMD INSTALL configure.args and CC
	customization
In-Reply-To: <4E944BA2.30007@ornl.gov>
References: <4E944BA2.30007@ornl.gov>
Message-ID: <7539F2BB274A034C9FE4BE8E134DC5BE0151172E@MAIL-MBX2.ad.renci.org>

Thanks! This is a possible solution, but I would argue not a preferable solution. I'd advocate a mechanism that provides transparent support for MPI, analogous to the way that R 2.13.0 and upwards provides transparent support for OpenMP. Expressing a personal opinion, I would stress the importance of providing both shared memory and message parallel parallelism out-of-the-box in the R interpreter. To use OpenMP or MPI the user would need to have runtime libraries pre-installed on their system. This patch would make it easier for a library to auto-detect an MPI implementation, assuming mpicc is in the path.

My initial post on r-devel had a bug, sorry about that. I've posted a new patch on r-sig-hpc that behaves as intended. It is available here: https://stat.ethz.ch/pipermail/r-sig-hpc/2011-September/001104.html.

-----Original Message-----
From: r-sig-hpc-bounces at r-project.org [mailto:r-sig-hpc-bounces at r-project.org] On Behalf Of George Ostrouchov
Sent: Tuesday, October 11, 2011 9:59 AM
To: michael.m.spiegler at gmail.com
Cc: r-sig-hpc at r-project.org; r-devel at r-project.org
Subject: Re: [R-sig-hpc] R CMD INSTALL configure.args and CC customization

One way to deal with this is to install R itself with mpicc. Then all packages are installed with mpicc and get the required MPI libraries and includes by default. I have done this with R-2.13.0 on an Opteron cluster running CentOS-5 a while ago and so far it has worked out great.

I crosspost to r-sig-hpc and welcome others to comment if there are potential downsides to this solution.

George


> Michael Spiegel michael.m.spiegel at gmail.com 
> <mailto:r-devel%40r-project.org?Subject=Re%3A%20%5BRd%5D%20R%20CMD%20I
> NSTALL%20configure.args%20and%20CC%20customization&In-Reply-To=%3CCANw
> u5-rGUYrC73vRo04GJCdW_ZQerycbVU4K_2Dun1ytqNXQ7g%40mail.gmail.com%3E>
> /Fri Sep 9 20:40:42 CEST 2011/
> I am running into the following issue that has been previously 
> reported on the R-devel mailing list. The short version is that I'm 
> writing a package for MPI, and I'd like to change CC and SHLIB_LD to 
> "mpicc". Trying to change them in Makevars.in has no effect, because 
> the values are clobbered by /etc/R/Makeconf. Will the following 
> changes to Makeconf.in introduce any problems?
>
> --Michael

--
George Ostrouchov
Statistics and Data Sciences Group
Computer Science and Mathematics Division Oak Ridge National Laboratory
(865) 574-3137  http://www.csm.ornl.gov/~ost


	[[alternative HTML version deleted]]

_______________________________________________
R-sig-hpc mailing list
R-sig-hpc at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-sig-hpc


From nalimilan at club.fr  Mon Oct 10 18:38:28 2011
From: nalimilan at club.fr (Milan Bouchet-Valat)
Date: Mon, 10 Oct 2011 18:38:28 +0200
Subject: [Rd] gettext domain and namespaces
Message-ID: <1318264708.1689.17.camel@milan>

Hi!

I thought having a NAMESPACE file in an R package was enough to pass the
correct 'domain' argument to gettext(), but it can't get this to work
with a Rcommander plugin I'm developing[1]. Is that a know bug? Or is
this related to the fact that Rcmdr does some black magic when loading
plugins?

I know my PO files are correctly named since Rcmdr is able to show
translated strings in the menus it loads from my package (using domain
R-$PACKAGE). What can I to to debug this further?

Thanks for your help.


1: https://r-forge.r-project.org/projects/rcmdr-tms/


From jwiley.psych at gmail.com  Wed Oct 12 09:24:25 2011
From: jwiley.psych at gmail.com (Joshua Wiley)
Date: Wed, 12 Oct 2011 00:24:25 -0700
Subject: [Rd] trace an Rd conversion error in R cmd check
Message-ID: <CANz9Z_LT_Tc1BuA2czguBB6tO8mTOspU+akc661-Sou4Lsg4zg@mail.gmail.com>

Hi All,

Apologies if this is a very naive question.  Is there a way to see the
particular Rd file being processed right before a warning/error
occurs?  As far as I can tell, all my .Rd files use have names and
titles and they are unique between Rd files (sometimes in a file I use
something like \name{foo} \title{Foo}).  I seem to be able to convert
files to latex using: R CMD Rdconv --type=latex on all my Rd files
without problems.

Here is the warning and error:

* checking PDF version of manual ... ERROR
Rd conversion errors:
Warning in file(con, "r") :
  file("") only supports open = "w+" and open = "w+b": using the former
Error : : Sections \title, and \name must exist and be unique in Rd files

I am using:

R Under development (unstable) (2011-10-11 r57214)
Platform: x86_64-pc-mingw32/x64 (64-bit)
on Windows 7 with Rtools 2.14 and MikTeX 2.9

Any suggestions or pointers to manuals/documentation would be greatly
appreciated.

Thanks,

Josh


-- 
Joshua Wiley
Ph.D. Student, Health Psychology
Programmer Analyst II, ATS Statistical Consulting Group
University of California, Los Angeles
https://joshuawiley.com/


From murdoch.duncan at gmail.com  Wed Oct 12 13:02:53 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 12 Oct 2011 07:02:53 -0400
Subject: [Rd] trace an Rd conversion error in R cmd check
In-Reply-To: <CANz9Z_LT_Tc1BuA2czguBB6tO8mTOspU+akc661-Sou4Lsg4zg@mail.gmail.com>
References: <CANz9Z_LT_Tc1BuA2czguBB6tO8mTOspU+akc661-Sou4Lsg4zg@mail.gmail.com>
Message-ID: <4E9573DD.8090809@gmail.com>

On 11-10-12 3:24 AM, Joshua Wiley wrote:
> Hi All,
>
> Apologies if this is a very naive question.  Is there a way to see the
> particular Rd file being processed right before a warning/error
> occurs?  As far as I can tell, all my .Rd files use have names and
> titles and they are unique between Rd files (sometimes in a file I use
> something like \name{foo} \title{Foo}).  I seem to be able to convert
> files to latex using: R CMD Rdconv --type=latex on all my Rd files
> without problems.
>
> Here is the warning and error:
>
> * checking PDF version of manual ... ERROR
> Rd conversion errors:
> Warning in file(con, "r") :
>    file("") only supports open = "w+" and open = "w+b": using the former
> Error : : Sections \title, and \name must exist and be unique in Rd files

It does normally list the name.  In your case, that appears to be "", 
based on the warning.

I don't know how this would come about (I don't believe "" is a legal 
filename in Windows).

If you could make a copy of the package available, I might be able to 
track this down.

Duncan Murdoch

>
> I am using:
>
> R Under development (unstable) (2011-10-11 r57214)
> Platform: x86_64-pc-mingw32/x64 (64-bit)
> on Windows 7 with Rtools 2.14 and MikTeX 2.9
>
> Any suggestions or pointers to manuals/documentation would be greatly
> appreciated.
>
> Thanks,
>
> Josh
>
>


From ripley at stats.ox.ac.uk  Wed Oct 12 13:10:03 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 12 Oct 2011 12:10:03 +0100 (BST)
Subject: [Rd] trace an Rd conversion error in R cmd check
In-Reply-To: <CANz9Z_LT_Tc1BuA2czguBB6tO8mTOspU+akc661-Sou4Lsg4zg@mail.gmail.com>
References: <CANz9Z_LT_Tc1BuA2czguBB6tO8mTOspU+akc661-Sou4Lsg4zg@mail.gmail.com>
Message-ID: <alpine.LFD.2.02.1110121206260.27187@toucan.stats.ox.ac.uk>

R CMD check is R code: you can run the R code for yourself using R's 
debugging facilities.  In this case start with 'R CMD Rd2pdf pkg-name' 
(which should give the same error, as that is what R CMD check calls), 
then run that R code directly (there are comments in the code in 
R-devel about how to do so).

On Wed, 12 Oct 2011, Joshua Wiley wrote:

> Hi All,
>
> Apologies if this is a very naive question.  Is there a way to see the
> particular Rd file being processed right before a warning/error
> occurs?  As far as I can tell, all my .Rd files use have names and
> titles and they are unique between Rd files (sometimes in a file I use
> something like \name{foo} \title{Foo}).  I seem to be able to convert
> files to latex using: R CMD Rdconv --type=latex on all my Rd files
> without problems.
>
> Here is the warning and error:
>
> * checking PDF version of manual ... ERROR
> Rd conversion errors:
> Warning in file(con, "r") :
>  file("") only supports open = "w+" and open = "w+b": using the former
> Error : : Sections \title, and \name must exist and be unique in Rd files
>
> I am using:
>
> R Under development (unstable) (2011-10-11 r57214)
> Platform: x86_64-pc-mingw32/x64 (64-bit)
> on Windows 7 with Rtools 2.14 and MikTeX 2.9
>
> Any suggestions or pointers to manuals/documentation would be greatly
> appreciated.

This is far too rare a problem to be documented in detail.

> Thanks,
>
> Josh
>
>
> -- 
> Joshua Wiley
> Ph.D. Student, Health Psychology
> Programmer Analyst II, ATS Statistical Consulting Group
> University of California, Los Angeles
> https://joshuawiley.com/
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From friendly at yorku.ca  Wed Oct 12 18:33:12 2011
From: friendly at yorku.ca (Michael Friendly)
Date: Wed, 12 Oct 2011 12:33:12 -0400
Subject: [Rd] NOTE: unstated dependencies in examples
Message-ID: <4E95C148.6010708@yorku.ca>

Using R 2.13.1, I am now getting the following NOTE when I run R CMD 
check on my HistData
package

* checking for unstated dependencies in examples ... NOTE
'library' or 'require' calls not declared from:
   gplots sp

Under R 2.12.x, I didn't get these notes.

I have ~ 25 .Rd files in this package, and AFAICS, every example uses 
library or require for the
functions used;  the DESCRIPTION file has the long list of Suggests, 
which previously was sufficient
for packages used in examples.

Suggests: gtools, KernSmooth, maps, ggplot2, proto, grid, reshape, plyr, 
lattice, ReadImages, car

But I have no way to find the .Rd file(s) that triggered this note.

  What is the tool used in R CMD check to make this diagnosis?  It would 
be better
if this reported the .Rd file(s) that triggered this note.
Is it possible that this note could be specious?

-Michael

-- 
Michael Friendly     Email: friendly AT yorku DOT ca
Professor, Psychology Dept.
York University      Voice: 416 736-5115 x66249 Fax: 416 736-5814
4700 Keele Street    Web:   http://www.datavis.ca
Toronto, ONT  M3J 1P3 CANADA


From jwiley.psych at gmail.com  Wed Oct 12 18:45:58 2011
From: jwiley.psych at gmail.com (Joshua Wiley)
Date: Wed, 12 Oct 2011 09:45:58 -0700
Subject: [Rd] trace an Rd conversion error in R cmd check
In-Reply-To: <alpine.LFD.2.02.1110121206260.27187@toucan.stats.ox.ac.uk>
References: <CANz9Z_LT_Tc1BuA2czguBB6tO8mTOspU+akc661-Sou4Lsg4zg@mail.gmail.com>
	<alpine.LFD.2.02.1110121206260.27187@toucan.stats.ox.ac.uk>
Message-ID: <CANz9Z_KDFHtdD4cLcKsOLQeJ+Lmp6vfLSPZbk35aY8fMZWJG=Q@mail.gmail.com>

Thanks to Drs. Murdoch and Ripley for your fast and helpful replies.
I did not realize that R CMD check was R code, so that was incredibly
useful.

I spent the morning working on debugging this, and I think I must have
messed up setting up the Windows tool chain, because I get the error
even when running R CMD check on other packages (e.g., MASS).  I am
still not sure what exactly I am missing/setup incorrectly.  R
compiled from source and passed make check all without any trouble.  I
can install packages, and I can make PDFs using tools:::..Rd2pdf, but
when I try to use Rd2pdf on a package instead of specific files I get
the error.

Looking at the R code for CMD check helped me better understand the
process and I will just work with my tool chain until I get things
working.

Thanks again!

Josh



On Wed, Oct 12, 2011 at 4:10 AM, Prof Brian Ripley
<ripley at stats.ox.ac.uk> wrote:
> R CMD check is R code: you can run the R code for yourself using R's
> debugging facilities. ?In this case start with 'R CMD Rd2pdf pkg-name'
> (which should give the same error, as that is what R CMD check calls), then
> run that R code directly (there are comments in the code in R-devel about
> how to do so).
>
> On Wed, 12 Oct 2011, Joshua Wiley wrote:
>
>> Hi All,
>>
>> Apologies if this is a very naive question. ?Is there a way to see the
>> particular Rd file being processed right before a warning/error
>> occurs? ?As far as I can tell, all my .Rd files use have names and
>> titles and they are unique between Rd files (sometimes in a file I use
>> something like \name{foo} \title{Foo}). ?I seem to be able to convert
>> files to latex using: R CMD Rdconv --type=latex on all my Rd files
>> without problems.
>>
>> Here is the warning and error:
>>
>> * checking PDF version of manual ... ERROR
>> Rd conversion errors:
>> Warning in file(con, "r") :
>> ?file("") only supports open = "w+" and open = "w+b": using the former
>> Error : : Sections \title, and \name must exist and be unique in Rd files
>>
>> I am using:
>>
>> R Under development (unstable) (2011-10-11 r57214)
>> Platform: x86_64-pc-mingw32/x64 (64-bit)
>> on Windows 7 with Rtools 2.14 and MikTeX 2.9
>>
>> Any suggestions or pointers to manuals/documentation would be greatly
>> appreciated.
>
> This is far too rare a problem to be documented in detail.
>
>> Thanks,
>>
>> Josh
>>
>>
>> --
>> Joshua Wiley
>> Ph.D. Student, Health Psychology
>> Programmer Analyst II, ATS Statistical Consulting Group
>> University of California, Los Angeles
>> https://joshuawiley.com/
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
> --
> Brian D. Ripley, ? ? ? ? ? ? ? ? ?ripley at stats.ox.ac.uk
> Professor of Applied Statistics, ?http://www.stats.ox.ac.uk/~ripley/
> University of Oxford, ? ? ? ? ? ? Tel: ?+44 1865 272861 (self)
> 1 South Parks Road, ? ? ? ? ? ? ? ? ? ? +44 1865 272866 (PA)
> Oxford OX1 3TG, UK ? ? ? ? ? ? ? ?Fax: ?+44 1865 272595
>



-- 
Joshua Wiley
Ph.D. Student, Health Psychology
Programmer Analyst II, ATS Statistical Consulting Group
University of California, Los Angeles
https://joshuawiley.com/


From spencer.graves at prodsyse.com  Wed Oct 12 19:12:44 2011
From: spencer.graves at prodsyse.com (Spencer Graves)
Date: Wed, 12 Oct 2011 10:12:44 -0700
Subject: [Rd] trace an Rd conversion error in R cmd check
In-Reply-To: <alpine.LFD.2.02.1110121206260.27187@toucan.stats.ox.ac.uk>
References: <CANz9Z_LT_Tc1BuA2czguBB6tO8mTOspU+akc661-Sou4Lsg4zg@mail.gmail.com>
	<alpine.LFD.2.02.1110121206260.27187@toucan.stats.ox.ac.uk>
Message-ID: <4E95CA8C.8050907@prodsyse.com>

Hi, Josh:


       Have you had a recent version that passed "R CMD check"?  If yes, 
I suggest you save your recent changes then revert to that earlier 
version and add your recent changes back in again one at a time.  I've 
done that many times.  (It's also a major reason I make changes as small 
as I can and run "R CMD check" after each one.  Then if I get something 
like this I can't figure out, there aren't many changes to scan through 
to find the problem.)


       Hope this helps.
       Spencer


On 10/12/2011 4:10 AM, Prof Brian Ripley wrote:
> R CMD check is R code: you can run the R code for yourself using R's
> debugging facilities.  In this case start with 'R CMD Rd2pdf pkg-name'
> (which should give the same error, as that is what R CMD check calls),
> then run that R code directly (there are comments in the code in
> R-devel about how to do so).
>
> On Wed, 12 Oct 2011, Joshua Wiley wrote:
>
>> Hi All,
>>
>> Apologies if this is a very naive question.  Is there a way to see the
>> particular Rd file being processed right before a warning/error
>> occurs?  As far as I can tell, all my .Rd files use have names and
>> titles and they are unique between Rd files (sometimes in a file I use
>> something like \name{foo} \title{Foo}).  I seem to be able to convert
>> files to latex using: R CMD Rdconv --type=latex on all my Rd files
>> without problems.
>>
>> Here is the warning and error:
>>
>> * checking PDF version of manual ... ERROR
>> Rd conversion errors:
>> Warning in file(con, "r") :
>>  file("") only supports open = "w+" and open = "w+b": using the former
>> Error : : Sections \title, and \name must exist and be unique in Rd
>> files
>>
>> I am using:
>>
>> R Under development (unstable) (2011-10-11 r57214)
>> Platform: x86_64-pc-mingw32/x64 (64-bit)
>> on Windows 7 with Rtools 2.14 and MikTeX 2.9
>>
>> Any suggestions or pointers to manuals/documentation would be greatly
>> appreciated.
>
> This is far too rare a problem to be documented in detail.
>
>> Thanks,
>>
>> Josh
>>
>>
>> --
>> Joshua Wiley
>> Ph.D. Student, Health Psychology
>> Programmer Analyst II, ATS Statistical Consulting Group
>> University of California, Los Angeles
>> https://joshuawiley.com/
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>


-- 
Spencer Graves, PE, PhD
President and Chief Technology Officer
Structure Inspection and Monitoring, Inc.
751 Emerson Ct.
San Jos?, CA 95126
ph:  408-655-4567
web:  www.structuremonitoring.com


From wdunlap at tibco.com  Wed Oct 12 19:32:28 2011
From: wdunlap at tibco.com (William Dunlap)
Date: Wed, 12 Oct 2011 17:32:28 +0000
Subject: [Rd] trace an Rd conversion error in R cmd check
In-Reply-To: <CANz9Z_KDFHtdD4cLcKsOLQeJ+Lmp6vfLSPZbk35aY8fMZWJG=Q@mail.gmail.com>
References: <CANz9Z_LT_Tc1BuA2czguBB6tO8mTOspU+akc661-Sou4Lsg4zg@mail.gmail.com>
	<alpine.LFD.2.02.1110121206260.27187@toucan.stats.ox.ac.uk>
	<CANz9Z_KDFHtdD4cLcKsOLQeJ+Lmp6vfLSPZbk35aY8fMZWJG=Q@mail.gmail.com>
Message-ID: <E66794E69CFDE04D9A70842786030B931E97F6@PA-MBX03.na.tibco.com>

Good luck in tracking down the problem.  I won't give
any help there.

I've seen this sort of error message (or worse) when using
system.file() and the desired file didn't exist.  If that
is the problem, add the newish argument mustWork=TRUE to
the call to system.file so you get an error message from system.file
instead of a warning or inappropriate behavior from the function
that is confused by the "" that system.file() returns when the
desired file doesn't exist.

  > con <- file(system.file(package="base", "noSuchFile"), "r")
  Warning message:
  In file(system.file(package = "base", "noSuchFile"), "r") :
    file("") only supports open = "w+" and open = "w+b": using the former
  > con <- file(system.file(package="base", "noSuchFile", mustWork=TRUE), "r")
  Error in system.file(package = "base", "noSuchFile", mustWork = TRUE) : 
    no file found

Bill Dunlap
Spotfire, TIBCO Software
wdunlap tibco.com 

> -----Original Message-----
> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-project.org] On Behalf Of Joshua Wiley
> Sent: Wednesday, October 12, 2011 9:46 AM
> To: r-devel at r-project
> Subject: Re: [Rd] trace an Rd conversion error in R cmd check
> 
> Thanks to Drs. Murdoch and Ripley for your fast and helpful replies.
> I did not realize that R CMD check was R code, so that was incredibly
> useful.
> 
> I spent the morning working on debugging this, and I think I must have
> messed up setting up the Windows tool chain, because I get the error
> even when running R CMD check on other packages (e.g., MASS).  I am
> still not sure what exactly I am missing/setup incorrectly.  R
> compiled from source and passed make check all without any trouble.  I
> can install packages, and I can make PDFs using tools:::..Rd2pdf, but
> when I try to use Rd2pdf on a package instead of specific files I get
> the error.
> 
> Looking at the R code for CMD check helped me better understand the
> process and I will just work with my tool chain until I get things
> working.
> 
> Thanks again!
> 
> Josh
> 
> 
> 
> On Wed, Oct 12, 2011 at 4:10 AM, Prof Brian Ripley
> <ripley at stats.ox.ac.uk> wrote:
> > R CMD check is R code: you can run the R code for yourself using R's
> > debugging facilities. ?In this case start with 'R CMD Rd2pdf pkg-name'
> > (which should give the same error, as that is what R CMD check calls), then
> > run that R code directly (there are comments in the code in R-devel about
> > how to do so).
> >
> > On Wed, 12 Oct 2011, Joshua Wiley wrote:
> >
> >> Hi All,
> >>
> >> Apologies if this is a very naive question. ?Is there a way to see the
> >> particular Rd file being processed right before a warning/error
> >> occurs? ?As far as I can tell, all my .Rd files use have names and
> >> titles and they are unique between Rd files (sometimes in a file I use
> >> something like \name{foo} \title{Foo}). ?I seem to be able to convert
> >> files to latex using: R CMD Rdconv --type=latex on all my Rd files
> >> without problems.
> >>
> >> Here is the warning and error:
> >>
> >> * checking PDF version of manual ... ERROR
> >> Rd conversion errors:
> >> Warning in file(con, "r") :
> >> ?file("") only supports open = "w+" and open = "w+b": using the former
> >> Error : : Sections \title, and \name must exist and be unique in Rd files
> >>
> >> I am using:
> >>
> >> R Under development (unstable) (2011-10-11 r57214)
> >> Platform: x86_64-pc-mingw32/x64 (64-bit)
> >> on Windows 7 with Rtools 2.14 and MikTeX 2.9
> >>
> >> Any suggestions or pointers to manuals/documentation would be greatly
> >> appreciated.
> >
> > This is far too rare a problem to be documented in detail.
> >
> >> Thanks,
> >>
> >> Josh
> >>
> >>
> >> --
> >> Joshua Wiley
> >> Ph.D. Student, Health Psychology
> >> Programmer Analyst II, ATS Statistical Consulting Group
> >> University of California, Los Angeles
> >> https://joshuawiley.com/
> >>
> >> ______________________________________________
> >> R-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-devel
> >>
> >
> > --
> > Brian D. Ripley, ? ? ? ? ? ? ? ? ?ripley at stats.ox.ac.uk
> > Professor of Applied Statistics, ?http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford, ? ? ? ? ? ? Tel: ?+44 1865 272861 (self)
> > 1 South Parks Road, ? ? ? ? ? ? ? ? ? ? +44 1865 272866 (PA)
> > Oxford OX1 3TG, UK ? ? ? ? ? ? ? ?Fax: ?+44 1865 272595
> >
> 
> 
> 
> --
> Joshua Wiley
> Ph.D. Student, Health Psychology
> Programmer Analyst II, ATS Statistical Consulting Group
> University of California, Los Angeles
> https://joshuawiley.com/
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

From htl10 at users.sourceforge.net  Wed Oct 12 21:01:24 2011
From: htl10 at users.sourceforge.net (Hin-Tak Leung)
Date: Wed, 12 Oct 2011 20:01:24 +0100 (BST)
Subject: [Rd] a couple of small problems with current R devel branch
Message-ID: <1318446084.18932.YahooMailClassic@web29509.mail.ird.yahoo.com>

These are small enough problems with R devel branch yesterday I thought I'll just post here and hope somebody will fix them soon (or may have already been fixed today), rather than filing at the bugzilla.

- "R CMD check --use-valgrind --use-gct <mypackage>" gives:

------------------------------
Error in gzfile(file, "rb") : 
  can only weakly reference/finalize reference objects
Calls: library -> find.package -> lapply -> FUN -> readRDS -> gzfile
Execution halted
------------------------------

That doesn't comes from my code - it appears that the "--use-valgrind --use-gct " options does not like readRDS(), which is in the base package.

- a small typo in "R/src/library/base/man/readRDS.Rd" while I looked at the error above - note the repeated "support for":

--------------------
  interface has been stable since \R 1.7.0, except that support for
  support for types of compression was added in \R 2.10.0 (previously
--------------------

TIA.



From Greg.Snow at imail.org  Wed Oct 12 21:57:44 2011
From: Greg.Snow at imail.org (Greg Snow)
Date: Wed, 12 Oct 2011 13:57:44 -0600
Subject: [Rd] how to make a true binary package?
In-Reply-To: <1318352963569-3895262.post@n4.nabble.com>
References: <1318350794267-3895117.post@n4.nabble.com>
	<4E947232.70301@gmail.com> <1318352963569-3895262.post@n4.nabble.com>
Message-ID: <B37C0A15B8FB3C468B5BC7EBC7DA14CC6356C2E83A@LP-EXMBVS10.CO.IHC.COM>

If you want to hide some code from accidental or casual sight then I have had some success with adding something like this to the .R file for a package (the petals function in TeachingDemos in this case):

.onAttach <- function(...) {
    petals <- petals
    attr(petals,'source') <- "Don't Cheat!"
    assign('petals',petals,'package:TeachingDemos')
}

Though that would only slow an experienced R programmer down by maybe 10 seconds if they really wanted to see the code, it might take an intermediate level R programmer a whole minute to figure out how to work around this.  But it would prevent an honest user that knew of a license or agreement to not look at the code from accidentally seeing what they agreed not to.

You could also include something in the code that checked the attribute and stopped working if it was changed or somehow notified you of the change.  Combining this with the license agreements as others have said might give you additional recourse.

You can see the petals.R file in the TeachingDemos package on R-forge for another example of obfuscating (bleaching) a key piece of code.  Combining the 2 might slow down an expert by a whole 30 seconds, but at least they would not be able to claim that they accidentally saw the code.

Whether this violates the spirit of R licensing or not is another issue.

-- 
Gregory (Greg) L. Snow Ph.D.
Statistical Data Center
Intermountain Healthcare
greg.snow at imail.org
801.408.8111


> -----Original Message-----
> From: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-
> project.org] On Behalf Of A Zege
> Sent: Tuesday, October 11, 2011 11:09 AM
> To: r-devel at r-project.org
> Subject: Re: [Rd] how to make a true binary package?
> 
> OK, gentlemen, i agree with you in general. I was not talking about a
> general
> purpose, general use package that one prepares for CRAN. I am sure you
> are
> familiar professionally or can imagine situations where you need to
> demonstrate a solution to a specific task without fully disclosing the
> details -- sometimes even hard core open source adherents need to
> sacrifice
> desire for openness for some prosaic purposes, like getting paid :).
> Compilable languages give an easy solution of a binary code. It sounds
> like
> if one wants true binary, he has to recode in C++. I thought it's
> possible
> in R as well, i thought this was discussed even as a default behavior
> for
> next version of R to make stuff go faster. Maybe not. Thanks, anyway.
> 
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/how-to-
> make-a-true-binary-package-tp3895117p3895262.html
> Sent from the R devel mailing list archive at Nabble.com.
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch.duncan at gmail.com  Wed Oct 12 22:43:19 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 12 Oct 2011 16:43:19 -0400
Subject: [Rd] how to make a true binary package?
In-Reply-To: <B37C0A15B8FB3C468B5BC7EBC7DA14CC6356C2E83A@LP-EXMBVS10.CO.IHC.COM>
References: <1318350794267-3895117.post@n4.nabble.com>	<4E947232.70301@gmail.com>
	<1318352963569-3895262.post@n4.nabble.com>
	<B37C0A15B8FB3C468B5BC7EBC7DA14CC6356C2E83A@LP-EXMBVS10.CO.IHC.COM>
Message-ID: <4E95FBE7.6010400@gmail.com>

On 12/10/2011 3:57 PM, Greg Snow wrote:
> If you want to hide some code from accidental or casual sight then I have had some success with adding something like this to the .R file for a package (the petals function in TeachingDemos in this case):
>
> .onAttach<- function(...) {
>      petals<- petals
>      attr(petals,'source')<- "Don't Cheat!"
>      assign('petals',petals,'package:TeachingDemos')
> }
>
> Though that would only slow an experienced R programmer down by maybe 10 seconds if they really wanted to see the code, it might take an intermediate level R programmer a whole minute to figure out how to work around this.  But it would prevent an honest user that knew of a license or agreement to not look at the code from accidentally seeing what they agreed not to.

You should be aware that this will no longer work in R 2.14.0, which 
finally drops the "source" attribute.  This would achieve a similar effect:

srcfile <- srcfilecopy("", "Don't cheat")
srcref <- srcref(srcfile, c(1,1,1,12))
attr(petals, "srcref") <- srcref

Duncan Murdoch

> You could also include something in the code that checked the attribute and stopped working if it was changed or somehow notified you of the change.  Combining this with the license agreements as others have said might give you additional recourse.
>
> You can see the petals.R file in the TeachingDemos package on R-forge for another example of obfuscating (bleaching) a key piece of code.  Combining the 2 might slow down an expert by a whole 30 seconds, but at least they would not be able to claim that they accidentally saw the code.
>
> Whether this violates the spirit of R licensing or not is another issue.
>


From xie at yihui.name  Thu Oct 13 03:00:34 2011
From: xie at yihui.name (Yihui Xie)
Date: Wed, 12 Oct 2011 20:00:34 -0500
Subject: [Rd] NOTE: unstated dependencies in examples
In-Reply-To: <4E95C148.6010708@yorku.ca>
References: <4E95C148.6010708@yorku.ca>
Message-ID: <CANROs4ejvnNGEwLreTg6_R4s65Dyxb_CipipVdHDSmDm51xv4w@mail.gmail.com>

You have this in Jevons.Rd:

# show as balloonplots

if (require(gplots)) {


and this in Snow.Rd:

%\dontrun{

library(sp)


It will certainly be helpful if R CMD check can provide more
informative messages (in this case, e.g, point out the Rd files).

Regards,
Yihui
--
Yihui Xie <xieyihui at gmail.com>
Phone: 515-294-2465 Web: http://yihui.name
Department of Statistics, Iowa State University
2215 Snedecor Hall, Ames, IA



On Wed, Oct 12, 2011 at 11:33 AM, Michael Friendly <friendly at yorku.ca> wrote:
> Using R 2.13.1, I am now getting the following NOTE when I run R CMD check
> on my HistData
> package
>
> * checking for unstated dependencies in examples ... NOTE
> 'library' or 'require' calls not declared from:
> ?gplots sp
>
> Under R 2.12.x, I didn't get these notes.
>
> I have ~ 25 .Rd files in this package, and AFAICS, every example uses
> library or require for the
> functions used; ?the DESCRIPTION file has the long list of Suggests, which
> previously was sufficient
> for packages used in examples.
>
> Suggests: gtools, KernSmooth, maps, ggplot2, proto, grid, reshape, plyr,
> lattice, ReadImages, car
>
> But I have no way to find the .Rd file(s) that triggered this note.
>
> ?What is the tool used in R CMD check to make this diagnosis? ?It would be
> better
> if this reported the .Rd file(s) that triggered this note.
> Is it possible that this note could be specious?
>
> -Michael
>
> --
> Michael Friendly ? ? Email: friendly AT yorku DOT ca
> Professor, Psychology Dept.
> York University ? ? ?Voice: 416 736-5115 x66249 Fax: 416 736-5814
> 4700 Keele Street ? ?Web: ? http://www.datavis.ca
> Toronto, ONT ?M3J 1P3 CANADA
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From jwiley.psych at gmail.com  Thu Oct 13 06:55:48 2011
From: jwiley.psych at gmail.com (Joshua Wiley)
Date: Wed, 12 Oct 2011 21:55:48 -0700
Subject: [Rd] trace an Rd conversion error in R cmd check
In-Reply-To: <4E95CA8C.8050907@prodsyse.com>
References: <CANz9Z_LT_Tc1BuA2czguBB6tO8mTOspU+akc661-Sou4Lsg4zg@mail.gmail.com>
	<alpine.LFD.2.02.1110121206260.27187@toucan.stats.ox.ac.uk>
	<4E95CA8C.8050907@prodsyse.com>
Message-ID: <CANz9Z_KWXycJe0T6tvFSx7GNUbAQEuDpPu2hJi+89_urQG8H3A@mail.gmail.com>

Hi Spencer,

Yes, I have versions that pass, but it is not package specific (i.e.,
I can download other package sources from CRAN and if I run R CMD
check on them, I get the same error).  When I run R CMD check using R
2.13.1 or R 2.13.2 it is fine.  Using either:

compiled from source:
R Under development (unstable) (2011-10-12 r57226)
Platform: x86_64-pc-mingw32/x64 (64-bit)

pre-built binary:
R Under development (unstable) (2011-10-10 r57203)
Platform: x86_64-pc-mingw32/x64 (64-bit)

I get the file error.  I am going to keep poking around and try Bill's
suggestion adding mustWork=TRUE.

Cheers,

Josh

On Wed, Oct 12, 2011 at 10:12 AM, Spencer Graves
<spencer.graves at prodsyse.com> wrote:
> Hi, Josh:
>
>
> ? ? ?Have you had a recent version that passed "R CMD check"? ?If yes, I
> suggest you save your recent changes then revert to that earlier version and
> add your recent changes back in again one at a time. ?I've done that many
> times. ?(It's also a major reason I make changes as small as I can and run
> "R CMD check" after each one. ?Then if I get something like this I can't
> figure out, there aren't many changes to scan through to find the problem.)
>
>
> ? ? ?Hope this helps.
> ? ? ?Spencer
>
>
> On 10/12/2011 4:10 AM, Prof Brian Ripley wrote:
>>
>> R CMD check is R code: you can run the R code for yourself using R's
>> debugging facilities. ?In this case start with 'R CMD Rd2pdf pkg-name'
>> (which should give the same error, as that is what R CMD check calls),
>> then run that R code directly (there are comments in the code in
>> R-devel about how to do so).
>>
>> On Wed, 12 Oct 2011, Joshua Wiley wrote:
>>
>>> Hi All,
>>>
>>> Apologies if this is a very naive question. ?Is there a way to see the
>>> particular Rd file being processed right before a warning/error
>>> occurs? ?As far as I can tell, all my .Rd files use have names and
>>> titles and they are unique between Rd files (sometimes in a file I use
>>> something like \name{foo} \title{Foo}). ?I seem to be able to convert
>>> files to latex using: R CMD Rdconv --type=latex on all my Rd files
>>> without problems.
>>>
>>> Here is the warning and error:
>>>
>>> * checking PDF version of manual ... ERROR
>>> Rd conversion errors:
>>> Warning in file(con, "r") :
>>> ?file("") only supports open = "w+" and open = "w+b": using the former
>>> Error : : Sections \title, and \name must exist and be unique in Rd
>>> files
>>>
>>> I am using:
>>>
>>> R Under development (unstable) (2011-10-11 r57214)
>>> Platform: x86_64-pc-mingw32/x64 (64-bit)
>>> on Windows 7 with Rtools 2.14 and MikTeX 2.9
>>>
>>> Any suggestions or pointers to manuals/documentation would be greatly
>>> appreciated.
>>
>> This is far too rare a problem to be documented in detail.
>>
>>> Thanks,
>>>
>>> Josh
>>>
>>>
>>> --
>>> Joshua Wiley
>>> Ph.D. Student, Health Psychology
>>> Programmer Analyst II, ATS Statistical Consulting Group
>>> University of California, Los Angeles
>>> https://joshuawiley.com/
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>
>
>
> --
> Spencer Graves, PE, PhD
> President and Chief Technology Officer
> Structure Inspection and Monitoring, Inc.
> 751 Emerson Ct.
> San Jos?, CA 95126
> ph: ?408-655-4567
> web: ?www.structuremonitoring.com
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>



-- 
Joshua Wiley
Ph.D. Student, Health Psychology
Programmer Analyst II, ATS Statistical Consulting Group
University of California, Los Angeles
https://joshuawiley.com/


From ligges at statistik.tu-dortmund.de  Thu Oct 13 17:34:16 2011
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Thu, 13 Oct 2011 17:34:16 +0200
Subject: [Rd] NOTE: unstated dependencies in examples
In-Reply-To: <CANROs4ejvnNGEwLreTg6_R4s65Dyxb_CipipVdHDSmDm51xv4w@mail.gmail.com>
References: <4E95C148.6010708@yorku.ca>
	<CANROs4ejvnNGEwLreTg6_R4s65Dyxb_CipipVdHDSmDm51xv4w@mail.gmail.com>
Message-ID: <4E9704F8.1060306@statistik.tu-dortmund.de>

I looked at the code and since this is not that trivial to change, I 
think we can well live with typing

grep -r gplots ./man

which is not too hard to run on the source package, I believe.

Best wishes,
Uwe




On 13.10.2011 03:00, Yihui Xie wrote:
> You have this in Jevons.Rd:
>
> # show as balloonplots
>
> if (require(gplots)) {
>
>
> and this in Snow.Rd:
>
> %\dontrun{
>
> library(sp)
>
>
> It will certainly be helpful if R CMD check can provide more
> informative messages (in this case, e.g, point out the Rd files).
>
> Regards,
> Yihui
> --
> Yihui Xie<xieyihui at gmail.com>
> Phone: 515-294-2465 Web: http://yihui.name
> Department of Statistics, Iowa State University
> 2215 Snedecor Hall, Ames, IA
>
>
>
> On Wed, Oct 12, 2011 at 11:33 AM, Michael Friendly<friendly at yorku.ca>  wrote:
>> Using R 2.13.1, I am now getting the following NOTE when I run R CMD check
>> on my HistData
>> package
>>
>> * checking for unstated dependencies in examples ... NOTE
>> 'library' or 'require' calls not declared from:
>>   gplots sp
>>
>> Under R 2.12.x, I didn't get these notes.
>>
>> I have ~ 25 .Rd files in this package, and AFAICS, every example uses
>> library or require for the
>> functions used;  the DESCRIPTION file has the long list of Suggests, which
>> previously was sufficient
>> for packages used in examples.
>>
>> Suggests: gtools, KernSmooth, maps, ggplot2, proto, grid, reshape, plyr,
>> lattice, ReadImages, car
>>
>> But I have no way to find the .Rd file(s) that triggered this note.
>>
>>   What is the tool used in R CMD check to make this diagnosis?  It would be
>> better
>> if this reported the .Rd file(s) that triggered this note.
>> Is it possible that this note could be specious?
>>
>> -Michael
>>
>> --
>> Michael Friendly     Email: friendly AT yorku DOT ca
>> Professor, Psychology Dept.
>> York University      Voice: 416 736-5115 x66249 Fax: 416 736-5814
>> 4700 Keele Street    Web:   http://www.datavis.ca
>> Toronto, ONT  M3J 1P3 CANADA
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From alok.jadhav at credit-suisse.com  Thu Oct 13 09:20:54 2011
From: alok.jadhav at credit-suisse.com (Alok Jadhav)
Date: Thu, 13 Oct 2011 00:20:54 -0700 (PDT)
Subject: [Rd] how to return a matrix of strings from c to R ?
Message-ID: <1318490454016-3900763.post@n4.nabble.com>

I am a bit confused about usage of R internal functions. I am able to send a
char vector from C to R but not sure on how to send a vector of strings etc.

My code looks like this.

<code>

                SEXP result =
PROTECT(Rf_allocMatrix(STRSXP,s->n_rics,s->n_fields));

		int i,j;
		for (i=0; i < s->n_rics; i++)
		{
			for (j=0; j < s->n_fields; j++)
			{
				std::string text = s->data[j][i];
				result[j][i] = R_alloc( text.length(), sizeof(char));
				//strcpy(result[j][i], text.c_str());
				SET_STRING_ELT(result[j][i],0,Rf_mkChar(text.c_str()));
			}
		}

//		memcpy(result,s->data.ref(),s->n_fields*s->n_rics*sizeof(200));
		UNPROTECT(1);
		return result;

</code>

Can someone please make me understand this usecase and how to resolve it?

thanks,
Alok

--
View this message in context: http://r.789695.n4.nabble.com/how-to-return-a-matrix-of-strings-from-c-to-R-tp3900763p3900763.html
Sent from the R devel mailing list archive at Nabble.com.


From friendly at yorku.ca  Fri Oct 14 14:57:09 2011
From: friendly at yorku.ca (Michael Friendly)
Date: Fri, 14 Oct 2011 08:57:09 -0400
Subject: [Rd] NOTE: unstated dependencies in examples
In-Reply-To: <4E9704F8.1060306@statistik.tu-dortmund.de>
References: <4E95C148.6010708@yorku.ca>
	<CANROs4ejvnNGEwLreTg6_R4s65Dyxb_CipipVdHDSmDm51xv4w@mail.gmail.com>
	<4E9704F8.1060306@statistik.tu-dortmund.de>
Message-ID: <4E9831A5.9010701@yorku.ca>

On 10/13/2011 11:34 AM, Uwe Ligges wrote:
> I looked at the code and since this is not that trivial to change, I
> think we can well live with typing
>
> grep -r gplots ./man
>
> which is not too hard to run on the source package, I believe.
>
> Best wishes,
> Uwe
>
Yes, that's quite easy, if I wanted to search for files mentioning 
gplots.  However, the NOTE was misleading:

  'library' or 'require' calls not declared from:
  gplots sp

suggesting that I had used a function from those packages somewhere 
without a library() or require().  It turned out that I had just omitted 
those packages from the Suggests: line in DESCRIPTION.  So,
perhaps it would be more informative to say:

  'library' or 'require' calls not declared in Depends: or Suggests: from:
  gplots sp

-Michael

>
>
>
> On 13.10.2011 03:00, Yihui Xie wrote:
>> You have this in Jevons.Rd:
>>
>> # show as balloonplots
>>
>> if (require(gplots)) {
>>
>>
>> and this in Snow.Rd:
>>
>> %\dontrun{
>>
>> library(sp)
>>
>>
>> It will certainly be helpful if R CMD check can provide more
>> informative messages (in this case, e.g, point out the Rd files).
>>
>> Regards,
>> Yihui
>> --
>> Yihui Xie<xieyihui at gmail.com>
>> Phone: 515-294-2465 Web: http://yihui.name
>> Department of Statistics, Iowa State University
>> 2215 Snedecor Hall, Ames, IA
>>
>>
>>
>> On Wed, Oct 12, 2011 at 11:33 AM, Michael Friendly<friendly at yorku.ca>
>> wrote:
>>> Using R 2.13.1, I am now getting the following NOTE when I run R CMD
>>> check
>>> on my HistData
>>> package
>>>
>>> * checking for unstated dependencies in examples ... NOTE
>>> 'library' or 'require' calls not declared from:
>>> gplots sp
>>>
>>> Under R 2.12.x, I didn't get these notes.
>>>
>>> I have ~ 25 .Rd files in this package, and AFAICS, every example uses
>>> library or require for the
>>> functions used; the DESCRIPTION file has the long list of Suggests,
>>> which
>>> previously was sufficient
>>> for packages used in examples.
>>>
>>> Suggests: gtools, KernSmooth, maps, ggplot2, proto, grid, reshape, plyr,
>>> lattice, ReadImages, car
>>>
>>> But I have no way to find the .Rd file(s) that triggered this note.
>>>
>>> What is the tool used in R CMD check to make this diagnosis? It would be
>>> better
>>> if this reported the .Rd file(s) that triggered this note.
>>> Is it possible that this note could be specious?
>>>
>>> -Michael
>>>
>>> --
>>> Michael Friendly Email: friendly AT yorku DOT ca
>>> Professor, Psychology Dept.
>>> York University Voice: 416 736-5115 x66249 Fax: 416 736-5814
>>> 4700 Keele Street Web: http://www.datavis.ca
>>> Toronto, ONT M3J 1P3 CANADA
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>


-- 
Michael Friendly     Email: friendly AT yorku DOT ca
Professor, Psychology Dept.
York University      Voice: 416 736-5115 x66249 Fax: 416 736-5814
4700 Keele Street    Web:   http://www.datavis.ca
Toronto, ONT  M3J 1P3 CANADA


From jari.oksanen at oulu.fi  Fri Oct 14 15:18:38 2011
From: jari.oksanen at oulu.fi (Jari Oksanen)
Date: Fri, 14 Oct 2011 16:18:38 +0300
Subject: [Rd] NOTE: unstated dependencies in examples
In-Reply-To: <4E9704F8.1060306@statistik.tu-dortmund.de>
References: <4E95C148.6010708@yorku.ca>
	<CANROs4ejvnNGEwLreTg6_R4s65Dyxb_CipipVdHDSmDm51xv4w@mail.gmail.com>
	<4E9704F8.1060306@statistik.tu-dortmund.de>
Message-ID: <1318598318.9098.14.camel@tagine>

On Thu, 2011-10-13 at 17:34 +0200, Uwe Ligges wrote:
> I looked at the code and since this is not that trivial to change, I 
> think we can well live with typing
> 
> grep -r gplots ./man
> 
> which is not too hard to run on the source package, I believe.
> 
> Best wishes,
> Uwe
> 
Uwe & others,

This is OK if you want to identify the cause of the problems. However,
the basic problem was that checking required something that is not
required: there was one example that was not run, and one case where the
loading of the package was not necessary (if(require(<package>))). I do
believe that handling this kind of cases is difficult in automatic
checking. However, I think they need not be checked: there should be a
new case of package reference in addition to 'depends', 'suggests' and
'enhances' -- something like 'benefitsfrom'.

This is now actual to me, since I'm adding 'parallel' support to my
package, but there seems to be no clean way of doing this with the
current checking procedures. I use the 'parallel' support only if the
package is available (in R >= 2.14.0, not yet released), and there are
multiple cores. If there is only once cpu or there is not yet 
'parallel' package, nothing bad will happen: things will only work like
they worked earlier without 'parallel' package. I haven't found out how
to do this cleanly for R CMD check (it is clean for my code since there
the usage is checked). If I add "suggests: parallel" I get R CMD check
error for the current and previous R -- for no reason. So currently I
don't mention 'parallel' at all in DESCRIPTION: I get a NOTE and
Warnings ('require' call not declared, no visible definitions), but this
is a smaller  problem than having a spurious failure, and failing to
have this package for a system where it works quite normally.

The new DESCRIPTION keyword could be used for packages that are useful
but not necessary, so that the package can be quite well be used without
these packages, but it may have some extra options or functionality with
those packages. This sounds like a suggestion to me, but in R language
suggestions cannot be refused.

Cheers, jari oksanen

> 
> On 13.10.2011 03:00, Yihui Xie wrote:
> > You have this in Jevons.Rd:
> >
> > # show as balloonplots
> >
> > if (require(gplots)) {
> >
> >
> > and this in Snow.Rd:
> >
> > %\dontrun{
> >
> > library(sp)
> >
> >
> > It will certainly be helpful if R CMD check can provide more
> > informative messages (in this case, e.g, point out the Rd files).
> >
> > Regards,
> > Yihui
> > --
> > Yihui Xie<xieyihui at gmail.com>
> > Phone: 515-294-2465 Web: http://yihui.name
> > Department of Statistics, Iowa State University
> > 2215 Snedecor Hall, Ames, IA
> >
> >
> >
> > On Wed, Oct 12, 2011 at 11:33 AM, Michael Friendly<friendly at yorku.ca>  wrote:
> >> Using R 2.13.1, I am now getting the following NOTE when I run R CMD check
> >> on my HistData
> >> package
> >>
> >> * checking for unstated dependencies in examples ... NOTE
> >> 'library' or 'require' calls not declared from:
> >>   gplots sp
> >>
> >> Under R 2.12.x, I didn't get these notes.
> >>
> >> I have ~ 25 .Rd files in this package, and AFAICS, every example uses
> >> library or require for the
> >> functions used;  the DESCRIPTION file has the long list of Suggests, which
> >> previously was sufficient
> >> for packages used in examples.
> >>
> >> Suggests: gtools, KernSmooth, maps, ggplot2, proto, grid, reshape, plyr,
> >> lattice, ReadImages, car
> >>
> >> But I have no way to find the .Rd file(s) that triggered this note.
> >>
> >>   What is the tool used in R CMD check to make this diagnosis?  It would be
> >> better
> >> if this reported the .Rd file(s) that triggered this note.
> >> Is it possible that this note could be specious?
> >>
> >> -Michael
> >>
> >> --
> >> Michael Friendly     Email: friendly AT yorku DOT ca
> >> Professor, Psychology Dept.
> >> York University      Voice: 416 736-5115 x66249 Fax: 416 736-5814
> >> 4700 Keele Street    Web:   http://www.datavis.ca
> >> Toronto, ONT  M3J 1P3 CANADA
> >>
> >> ______________________________________________
> >> R-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-devel
> >>
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch.duncan at gmail.com  Fri Oct 14 15:26:38 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 14 Oct 2011 09:26:38 -0400
Subject: [Rd] NOTE: unstated dependencies in examples
In-Reply-To: <1318598318.9098.14.camel@tagine>
References: <4E95C148.6010708@yorku.ca>	<CANROs4ejvnNGEwLreTg6_R4s65Dyxb_CipipVdHDSmDm51xv4w@mail.gmail.com>	<4E9704F8.1060306@statistik.tu-dortmund.de>
	<1318598318.9098.14.camel@tagine>
Message-ID: <4E98388E.4000802@gmail.com>

On 14/10/2011 9:18 AM, Jari Oksanen wrote:
> On Thu, 2011-10-13 at 17:34 +0200, Uwe Ligges wrote:
> >  I looked at the code and since this is not that trivial to change, I
> >  think we can well live with typing
> >
> >  grep -r gplots ./man
> >
> >  which is not too hard to run on the source package, I believe.
> >
> >  Best wishes,
> >  Uwe
> >
> Uwe&  others,
>
> This is OK if you want to identify the cause of the problems. However,
> the basic problem was that checking required something that is not
> required: there was one example that was not run, and one case where the
> loading of the package was not necessary (if(require(<package>))). I do
> believe that handling this kind of cases is difficult in automatic
> checking. However, I think they need not be checked: there should be a
> new case of package reference in addition to 'depends', 'suggests' and
> 'enhances' -- something like 'benefitsfrom'.

Users use those declarations when they ask to install dependencies.  If 
you don't declare a dependence on a contributed package, users will have 
to manually install it.

> This is now actual to me, since I'm adding 'parallel' support to my
> package, but there seems to be no clean way of doing this with the
> current checking procedures. I use the 'parallel' support only if the
> package is available (in R>= 2.14.0, not yet released), and there are
> multiple cores.

Temporarily maintain two releases of your package:  one for R < 2.14.0 
that doesn't mention parallel, and one for R >= 2.14.0 that does.  The 
second one should declare its dependence on R >= 2.14.0.  If support for 
parallel is your only change, you don't need to do anything for the 
previous one:  CRAN will not replace it in the 2.13.x repository if the 
new one needs a newer R.

Duncan Murdoch

> If there is only once cpu or there is not yet
> 'parallel' package, nothing bad will happen: things will only work like
> they worked earlier without 'parallel' package. I haven't found out how
> to do this cleanly for R CMD check (it is clean for my code since there
> the usage is checked). If I add "suggests: parallel" I get R CMD check
> error for the current and previous R -- for no reason. So currently I
> don't mention 'parallel' at all in DESCRIPTION: I get a NOTE and
> Warnings ('require' call not declared, no visible definitions), but this
> is a smaller  problem than having a spurious failure, and failing to
> have this package for a system where it works quite normally.
>
> The new DESCRIPTION keyword could be used for packages that are useful
> but not necessary, so that the package can be quite well be used without
> these packages, but it may have some extra options or functionality with
> those packages. This sounds like a suggestion to me, but in R language
> suggestions cannot be refused.
>
> Cheers, jari oksanen
>
> >
> >  On 13.10.2011 03:00, Yihui Xie wrote:
> >  >  You have this in Jevons.Rd:
> >  >
> >  >  # show as balloonplots
> >  >
> >  >  if (require(gplots)) {
> >  >
> >  >
> >  >  and this in Snow.Rd:
> >  >
> >  >  %\dontrun{
> >  >
> >  >  library(sp)
> >  >
> >  >
> >  >  It will certainly be helpful if R CMD check can provide more
> >  >  informative messages (in this case, e.g, point out the Rd files).
> >  >
> >  >  Regards,
> >  >  Yihui
> >  >  --
> >  >  Yihui Xie<xieyihui at gmail.com>
> >  >  Phone: 515-294-2465 Web: http://yihui.name
> >  >  Department of Statistics, Iowa State University
> >  >  2215 Snedecor Hall, Ames, IA
> >  >
> >  >
> >  >
> >  >  On Wed, Oct 12, 2011 at 11:33 AM, Michael Friendly<friendly at yorku.ca>   wrote:
> >  >>  Using R 2.13.1, I am now getting the following NOTE when I run R CMD check
> >  >>  on my HistData
> >  >>  package
> >  >>
> >  >>  * checking for unstated dependencies in examples ... NOTE
> >  >>  'library' or 'require' calls not declared from:
> >  >>    gplots sp
> >  >>
> >  >>  Under R 2.12.x, I didn't get these notes.
> >  >>
> >  >>  I have ~ 25 .Rd files in this package, and AFAICS, every example uses
> >  >>  library or require for the
> >  >>  functions used;  the DESCRIPTION file has the long list of Suggests, which
> >  >>  previously was sufficient
> >  >>  for packages used in examples.
> >  >>
> >  >>  Suggests: gtools, KernSmooth, maps, ggplot2, proto, grid, reshape, plyr,
> >  >>  lattice, ReadImages, car
> >  >>
> >  >>  But I have no way to find the .Rd file(s) that triggered this note.
> >  >>
> >  >>    What is the tool used in R CMD check to make this diagnosis?  It would be
> >  >>  better
> >  >>  if this reported the .Rd file(s) that triggered this note.
> >  >>  Is it possible that this note could be specious?
> >  >>
> >  >>  -Michael
> >  >>
> >  >>  --
> >  >>  Michael Friendly     Email: friendly AT yorku DOT ca
> >  >>  Professor, Psychology Dept.
> >  >>  York University      Voice: 416 736-5115 x66249 Fax: 416 736-5814
> >  >>  4700 Keele Street    Web:   http://www.datavis.ca
> >  >>  Toronto, ONT  M3J 1P3 CANADA
> >  >>
> >  >>  ______________________________________________
> >  >>  R-devel at r-project.org mailing list
> >  >>  https://stat.ethz.ch/mailman/listinfo/r-devel
> >  >>
> >  >
> >  >  ______________________________________________
> >  >  R-devel at r-project.org mailing list
> >  >  https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> >  ______________________________________________
> >  R-devel at r-project.org mailing list
> >  https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From simon.urbanek at r-project.org  Fri Oct 14 15:29:20 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 14 Oct 2011 09:29:20 -0400
Subject: [Rd] how to return a matrix of strings from c to R ?
In-Reply-To: <1318490454016-3900763.post@n4.nabble.com>
References: <1318490454016-3900763.post@n4.nabble.com>
Message-ID: <7C580604-2FA8-48AA-88B2-9D94C5096F5B@r-project.org>


On Oct 13, 2011, at 3:20 AM, Alok Jadhav wrote:

> I am a bit confused about usage of R internal functions. I am able to send a
> char vector from C to R but not sure on how to send a vector of strings etc.
> 
> My code looks like this.
> 
> <code>
> 
>                SEXP result =
> PROTECT(Rf_allocMatrix(STRSXP,s->n_rics,s->n_fields));
> 
> 		int i,j;
> 		for (i=0; i < s->n_rics; i++)
> 		{
> 			for (j=0; j < s->n_fields; j++)
> 			{
> 				std::string text = s->data[j][i];
> 				result[j][i] = R_alloc( text.length(), sizeof(char));
> 				//strcpy(result[j][i], text.c_str());
> 				SET_STRING_ELT(result[j][i],0,Rf_mkChar(text.c_str()));
> 			}
> 		}
> 
> //		memcpy(result,s->data.ref(),s->n_fields*s->n_rics*sizeof(200));
> 		UNPROTECT(1);
> 		return result;
> 
> </code>
> 
> Can someone please make me understand this usecase and how to resolve it?
> 

It's more simple than that:

int rows = s->n_rics, cols = s->n_fields;
SEXP result = PROTECT(Rf_allocMatrix(STRSXP, rows, cols));
for (int i = 0; i < rows; i++) for (int j = 0; j < cols; j++) 
	SET_STRING_ELT(result, i + j * rows, Rf_mkChar(s->data[j][i].c_str()));
UNPROTECT(1);
return result;

Cheers,
Simon



> thanks,
> Alok
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/how-to-return-a-matrix-of-strings-from-c-to-R-tp3900763p3900763.html
> Sent from the R devel mailing list archive at Nabble.com.
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From jari.oksanen at oulu.fi  Fri Oct 14 16:10:21 2011
From: jari.oksanen at oulu.fi (Jari Oksanen)
Date: Fri, 14 Oct 2011 17:10:21 +0300
Subject: [Rd] NOTE: unstated dependencies in examples
In-Reply-To: <4E98388E.4000802@gmail.com>
Message-ID: <CABE1D7D.19027%jari.oksanen@oulu.fi>

On 14/10/11 16:26 PM, "Duncan Murdoch" <murdoch.duncan at gmail.com> wrote:

> On 14/10/2011 9:18 AM, Jari Oksanen wrote:

>>> 
>> Uwe&  others,
>> 
>> This is OK if you want to identify the cause of the problems. However,
>> the basic problem was that checking required something that is not
>> required: there was one example that was not run, and one case where the
>> loading of the package was not necessary (if(require(<package>))). I do
>> believe that handling this kind of cases is difficult in automatic
>> checking. However, I think they need not be checked: there should be a
>> new case of package reference in addition to 'depends', 'suggests' and
>> 'enhances' -- something like 'benefitsfrom'.
> 
> Users use those declarations when they ask to install dependencies.  If
> you don't declare a dependence on a contributed package, users will have
> to manually install it.
> 
Howdy,

This is a pretty weak argument in this particular case: 'parallel' is not a
contributed package so that you cannot install it. You either have it or you
don't have it. In latter case, nothing happens, but everything works like
usual. In the former case, you may have some new things.

(Having 'parallel' as a contributed package for R < 2.14.0 would be a great
idea but not something I dare to suggest.)

>> This is now actual to me, since I'm adding 'parallel' support to my
>> package, but there seems to be no clean way of doing this with the
>> current checking procedures. I use the 'parallel' support only if the
>> package is available (in R>= 2.14.0, not yet released), and there are
>> multiple cores.
> 
> Temporarily maintain two releases of your package:  one for R < 2.14.0
> that doesn't mention parallel, and one for R >= 2.14.0 that does.  The
> second one should declare its dependence on R >= 2.14.0.  If support for
> parallel is your only change, you don't need to do anything for the
> previous one:  CRAN will not replace it in the 2.13.x repository if the
> new one needs a newer R.
> 
Forking my package was indeed one of the three alternatives I have
considered. In this case forking sounds really weird: for R < 2.13.0 both
forks would work identically. The only difference being how they are handled
by R checkers. 

Cheers, Jari Oksanen
-- 
Jari Oksanen, Dept Biology, Univ Oulu, 90014 Finland
jari.oksanen at oulu.fi, Ph. +358 400 408593, http://cc.oulu.fi/~jarioksa


From murdoch.duncan at gmail.com  Fri Oct 14 16:15:25 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 14 Oct 2011 10:15:25 -0400
Subject: [Rd] NOTE: unstated dependencies in examples
In-Reply-To: <CABE1D7D.19027%jari.oksanen@oulu.fi>
References: <CABE1D7D.19027%jari.oksanen@oulu.fi>
Message-ID: <4E9843FD.5030506@gmail.com>

On 14/10/2011 10:10 AM, Jari Oksanen wrote:
> On 14/10/11 16:26 PM, "Duncan Murdoch"<murdoch.duncan at gmail.com>  wrote:
>
> >  On 14/10/2011 9:18 AM, Jari Oksanen wrote:
>
> >>>
> >>  Uwe&   others,
> >>
> >>  This is OK if you want to identify the cause of the problems. However,
> >>  the basic problem was that checking required something that is not
> >>  required: there was one example that was not run, and one case where the
> >>  loading of the package was not necessary (if(require(<package>))). I do
> >>  believe that handling this kind of cases is difficult in automatic
> >>  checking. However, I think they need not be checked: there should be a
> >>  new case of package reference in addition to 'depends', 'suggests' and
> >>  'enhances' -- something like 'benefitsfrom'.
> >
> >  Users use those declarations when they ask to install dependencies.  If
> >  you don't declare a dependence on a contributed package, users will have
> >  to manually install it.
> >
> Howdy,
>
> This is a pretty weak argument in this particular case: 'parallel' is not a
> contributed package so that you cannot install it. You either have it or you
> don't have it. In latter case, nothing happens, but everything works like
> usual. In the former case, you may have some new things.
>
> (Having 'parallel' as a contributed package for R<  2.14.0 would be a great
> idea but not something I dare to suggest.)
>
> >>  This is now actual to me, since I'm adding 'parallel' support to my
> >>  package, but there seems to be no clean way of doing this with the
> >>  current checking procedures. I use the 'parallel' support only if the
> >>  package is available (in R>= 2.14.0, not yet released), and there are
> >>  multiple cores.
> >
> >  Temporarily maintain two releases of your package:  one for R<  2.14.0
> >  that doesn't mention parallel, and one for R>= 2.14.0 that does.  The
> >  second one should declare its dependence on R>= 2.14.0.  If support for
> >  parallel is your only change, you don't need to do anything for the
> >  previous one:  CRAN will not replace it in the 2.13.x repository if the
> >  new one needs a newer R.
> >
> Forking my package was indeed one of the three alternatives I have
> considered. In this case forking sounds really weird: for R<  2.13.0 both
> forks would work identically. The only difference being how they are handled
> by R checkers.

I don't see why it's weird to require that a version that uses a 
facility that is in 2.14.0 but no earlier versions should have to 
declare that.  Sure, you can put all sorts of conditional tests into 
your code so that it avoids using the new facility in older versions, 
but isn't it simpler to just declare the dependency and avoid cluttering 
your code with those tests?

Duncan Murdoch


From ligges at statistik.tu-dortmund.de  Fri Oct 14 18:00:06 2011
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Fri, 14 Oct 2011 18:00:06 +0200
Subject: [Rd] NOTE: unstated dependencies in examples
In-Reply-To: <4E9843FD.5030506@gmail.com>
References: <CABE1D7D.19027%jari.oksanen@oulu.fi> <4E9843FD.5030506@gmail.com>
Message-ID: <4E985C86.7000500@statistik.tu-dortmund.de>



On 14.10.2011 16:15, Duncan Murdoch wrote:
> On 14/10/2011 10:10 AM, Jari Oksanen wrote:
>> On 14/10/11 16:26 PM, "Duncan Murdoch"<murdoch.duncan at gmail.com> wrote:
>>
>> > On 14/10/2011 9:18 AM, Jari Oksanen wrote:
>>
>> >>>
>> >> Uwe& others,
>> >>
>> >> This is OK if you want to identify the cause of the problems. However,
>> >> the basic problem was that checking required something that is not
>> >> required: there was one example that was not run, and one case
>> where the
>> >> loading of the package was not necessary (if(require(<package>))).
>> I do
>> >> believe that handling this kind of cases is difficult in automatic
>> >> checking. However, I think they need not be checked: there should be a
>> >> new case of package reference in addition to 'depends', 'suggests' and
>> >> 'enhances' -- something like 'benefitsfrom'.
>> >
>> > Users use those declarations when they ask to install dependencies. If
>> > you don't declare a dependence on a contributed package, users will
>> have
>> > to manually install it.
>> >
>> Howdy,
>>
>> This is a pretty weak argument in this particular case: 'parallel' is
>> not a
>> contributed package so that you cannot install it. You either have it
>> or you
>> don't have it. In latter case, nothing happens, but everything works like
>> usual. In the former case, you may have some new things.
>>
>> (Having 'parallel' as a contributed package for R< 2.14.0 would be a
>> great
>> idea but not something I dare to suggest.)
>>
>> >> This is now actual to me, since I'm adding 'parallel' support to my
>> >> package, but there seems to be no clean way of doing this with the
>> >> current checking procedures. I use the 'parallel' support only if the
>> >> package is available (in R>= 2.14.0, not yet released), and there are
>> >> multiple cores.
>> >
>> > Temporarily maintain two releases of your package: one for R< 2.14.0
>> > that doesn't mention parallel, and one for R>= 2.14.0 that does. The
>> > second one should declare its dependence on R>= 2.14.0. If support for
>> > parallel is your only change, you don't need to do anything for the
>> > previous one: CRAN will not replace it in the 2.13.x repository if the
>> > new one needs a newer R.
>> >
>> Forking my package was indeed one of the three alternatives I have
>> considered. In this case forking sounds really weird: for R< 2.13.0 both
>> forks would work identically. The only difference being how they are
>> handled
>> by R checkers.
>
> I don't see why it's weird to require that a version that uses a
> facility that is in 2.14.0 but no earlier versions should have to
> declare that. Sure, you can put all sorts of conditional tests into your
> code so that it avoids using the new facility in older versions, but
> isn't it simpler to just declare the dependency and avoid cluttering
> your code with those tests?

Indeed, I think you should update your package and declare the 
dependency on R >= 2.14.0. This seems to be a cleanest possible 
approach. Distributing a contributed parallel package without 
functionality for R < 2.14.0 is not, why should anybody develop code for 
R versions that won't be supported any more in due course?

Best,
Uwe Ligges




>
> Duncan Murdoch


From jari.oksanen at oulu.fi  Fri Oct 14 18:52:58 2011
From: jari.oksanen at oulu.fi (Jari Oksanen)
Date: Fri, 14 Oct 2011 19:52:58 +0300
Subject: [Rd] NOTE: unstated dependencies in examples
In-Reply-To: <4E985C86.7000500@statistik.tu-dortmund.de>
Message-ID: <CABE439A.19030%jari.oksanen@oulu.fi>

On 14/10/11 19:00 PM, "Uwe Ligges" <ligges at statistik.tu-dortmund.de> wrote:

> 
> 
> On 14.10.2011 16:15, Duncan Murdoch wrote:
>> On 14/10/2011 10:10 AM, Jari Oksanen wrote:
>>> On 14/10/11 16:26 PM, "Duncan Murdoch"<murdoch.duncan at gmail.com> wrote:
>>> 
>>>> On 14/10/2011 9:18 AM, Jari Oksanen wrote:
>>> 
>>>>>> 
>>>>> Uwe& others,
>>>>> 
>>>>> This is OK if you want to identify the cause of the problems. However,
>>>>> the basic problem was that checking required something that is not
>>>>> required: there was one example that was not run, and one case
>>> where the
>>>>> loading of the package was not necessary (if(require(<package>))).
>>> I do
>>>>> believe that handling this kind of cases is difficult in automatic
>>>>> checking. However, I think they need not be checked: there should be a
>>>>> new case of package reference in addition to 'depends', 'suggests' and
>>>>> 'enhances' -- something like 'benefitsfrom'.
>>>> 
>>>> Users use those declarations when they ask to install dependencies. If
>>>> you don't declare a dependence on a contributed package, users will
>>> have
>>>> to manually install it.
>>>> 
>>> Howdy,
>>> 
>>> This is a pretty weak argument in this particular case: 'parallel' is
>>> not a
>>> contributed package so that you cannot install it. You either have it
>>> or you
>>> don't have it. In latter case, nothing happens, but everything works like
>>> usual. In the former case, you may have some new things.
>>> 
>>> (Having 'parallel' as a contributed package for R< 2.14.0 would be a
>>> great
>>> idea but not something I dare to suggest.)
>>> 
>>>>> This is now actual to me, since I'm adding 'parallel' support to my
>>>>> package, but there seems to be no clean way of doing this with the
>>>>> current checking procedures. I use the 'parallel' support only if the
>>>>> package is available (in R>= 2.14.0, not yet released), and there are
>>>>> multiple cores.
>>>> 
>>>> Temporarily maintain two releases of your package: one for R< 2.14.0
>>>> that doesn't mention parallel, and one for R>= 2.14.0 that does. The
>>>> second one should declare its dependence on R>= 2.14.0. If support for
>>>> parallel is your only change, you don't need to do anything for the
>>>> previous one: CRAN will not replace it in the 2.13.x repository if the
>>>> new one needs a newer R.
>>>> 
>>> Forking my package was indeed one of the three alternatives I have
>>> considered. In this case forking sounds really weird: for R< 2.13.0 both
>>> forks would work identically. The only difference being how they are
>>> handled
>>> by R checkers.
>> 
>> I don't see why it's weird to require that a version that uses a
>> facility that is in 2.14.0 but no earlier versions should have to
>> declare that. Sure, you can put all sorts of conditional tests into your
>> code so that it avoids using the new facility in older versions, but
>> isn't it simpler to just declare the dependency and avoid cluttering
>> your code with those tests?
> 
> Indeed, I think you should update your package and declare the
> dependency on R >= 2.14.0. This seems to be a cleanest possible
> approach. Distributing a contributed parallel package without
> functionality for R < 2.14.0 is not, why should anybody develop code for
> R versions that won't be supported any more in due course?

Here one reason: Our PC labs have now R version 2.12.something and it is not
in my power to upgrade R, but that depends on the will of our computing
centre. If it will upgraded, it will not be 2.14.something. A simple desire
to be able to use the package in the environment were I work sounds a valid
personal reason.

A second point is that the package would not *depend* or anything on R >=
2.14.0. It could be faster in some cases, but not in all. It would just as
legitimate to have a condition, that the package cannot be used by those
poor sods who don't have but one processor (and I was one just a short time
ago). Indeed, this is exactly the same condition: you *must* have a hardware
I want you to have, and the version of R I want to have. I won't make that
requirement.

Like I wrote in my previous message, I had considered three choices. One was
forking, another was delaying the release of these features till 2.14.* is
old, and the third was to depend on 'snow' *and* 'multicore' instead of
'paralle'. Now the second choice sounds the best.

Cheers, Jari Oksanen

-- 
Jari Oksanen, Dept Biology, Univ Oulu, 90014 Finland
jari.oksanen at oulu.fi, Ph. +358 400 408593, http://cc.oulu.fi/~jarioksa


From ligges at statistik.tu-dortmund.de  Fri Oct 14 19:17:39 2011
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Fri, 14 Oct 2011 19:17:39 +0200
Subject: [Rd] NOTE: unstated dependencies in examples
In-Reply-To: <CABE439A.19030%jari.oksanen@oulu.fi>
References: <CABE439A.19030%jari.oksanen@oulu.fi>
Message-ID: <4E986EB3.2020200@statistik.tu-dortmund.de>



On 14.10.2011 18:52, Jari Oksanen wrote:
> On 14/10/11 19:00 PM, "Uwe Ligges"<ligges at statistik.tu-dortmund.de>  wrote:
>
>>
>>
>> On 14.10.2011 16:15, Duncan Murdoch wrote:
>>> On 14/10/2011 10:10 AM, Jari Oksanen wrote:
>>>> On 14/10/11 16:26 PM, "Duncan Murdoch"<murdoch.duncan at gmail.com>  wrote:
>>>>
>>>>> On 14/10/2011 9:18 AM, Jari Oksanen wrote:
>>>>
>>>>>>>
>>>>>> Uwe&  others,
>>>>>>
>>>>>> This is OK if you want to identify the cause of the problems. However,
>>>>>> the basic problem was that checking required something that is not
>>>>>> required: there was one example that was not run, and one case
>>>> where the
>>>>>> loading of the package was not necessary (if(require(<package>))).
>>>> I do
>>>>>> believe that handling this kind of cases is difficult in automatic
>>>>>> checking. However, I think they need not be checked: there should be a
>>>>>> new case of package reference in addition to 'depends', 'suggests' and
>>>>>> 'enhances' -- something like 'benefitsfrom'.
>>>>>
>>>>> Users use those declarations when they ask to install dependencies. If
>>>>> you don't declare a dependence on a contributed package, users will
>>>> have
>>>>> to manually install it.
>>>>>
>>>> Howdy,
>>>>
>>>> This is a pretty weak argument in this particular case: 'parallel' is
>>>> not a
>>>> contributed package so that you cannot install it. You either have it
>>>> or you
>>>> don't have it. In latter case, nothing happens, but everything works like
>>>> usual. In the former case, you may have some new things.
>>>>
>>>> (Having 'parallel' as a contributed package for R<  2.14.0 would be a
>>>> great
>>>> idea but not something I dare to suggest.)
>>>>
>>>>>> This is now actual to me, since I'm adding 'parallel' support to my
>>>>>> package, but there seems to be no clean way of doing this with the
>>>>>> current checking procedures. I use the 'parallel' support only if the
>>>>>> package is available (in R>= 2.14.0, not yet released), and there are
>>>>>> multiple cores.
>>>>>
>>>>> Temporarily maintain two releases of your package: one for R<  2.14.0
>>>>> that doesn't mention parallel, and one for R>= 2.14.0 that does. The
>>>>> second one should declare its dependence on R>= 2.14.0. If support for
>>>>> parallel is your only change, you don't need to do anything for the
>>>>> previous one: CRAN will not replace it in the 2.13.x repository if the
>>>>> new one needs a newer R.
>>>>>
>>>> Forking my package was indeed one of the three alternatives I have
>>>> considered. In this case forking sounds really weird: for R<  2.13.0 both
>>>> forks would work identically. The only difference being how they are
>>>> handled
>>>> by R checkers.
>>>
>>> I don't see why it's weird to require that a version that uses a
>>> facility that is in 2.14.0 but no earlier versions should have to
>>> declare that. Sure, you can put all sorts of conditional tests into your
>>> code so that it avoids using the new facility in older versions, but
>>> isn't it simpler to just declare the dependency and avoid cluttering
>>> your code with those tests?
>>
>> Indeed, I think you should update your package and declare the
>> dependency on R>= 2.14.0. This seems to be a cleanest possible
>> approach. Distributing a contributed parallel package without
>> functionality for R<  2.14.0 is not, why should anybody develop code for
>> R versions that won't be supported any more in due course?
>
> Here one reason: Our PC labs have now R version 2.12.something and it is not
> in my power to upgrade R,but that depends on the will of our computing
> centre.


So other people from the administration tell you which software to use 
for teaching? And what happens if they tell you only Excel is available? 
... weird ...


> If it will upgraded, it will not be 2.14.something. A simple desire
> to be able to use the package in the environment were I work sounds a valid
> personal reason.

You can still use the old version there, if the new version depends on R 
 >= 2.14.0. The old version will stay in the binary repositories for old 
versions of R and in the package archives of the source repository as 
well. I think Duncan explained that already.


> A second point is that the package would not *depend* or anything on R>=
> 2.14.0.

But it depends on it: it won't pass the checks for R < 2.14.0.


> It could be faster in some cases, but not in all. It would just as
> legitimate to have a condition, that the package cannot be used by those
> poor sods who don't have but one processor (and I was one just a short time
> ago).
>
> Indeed, this is exactly the same condition: you *must* have a hardware
> I want you to have, and the version of R I want to have. I won't make that
> requirement.

Why is the hardware relevant to use the parallel (or your) package? You 
can also use it with one cpu.

Best,
Uwe


> Like I wrote in my previous message, I had considered three choices. One was
> forking, another was delaying the release of these features till 2.14.* is
> old, and the third was to depend on 'snow' *and* 'multicore' instead of
> 'paralle'. Now the second choice sounds the best.
>
> Cheers, Jari Oksanen
>


From nick.sabbe at ugent.be  Fri Oct 14 20:53:15 2011
From: nick.sabbe at ugent.be (Nick Sabbe)
Date: Fri, 14 Oct 2011 20:53:15 +0200
Subject: [Rd] NOTE: unstated dependencies in examples
In-Reply-To: <4E986EB3.2020200@statistik.tu-dortmund.de>
References: <CABE439A.19030%jari.oksanen@oulu.fi>
	<4E986EB3.2020200@statistik.tu-dortmund.de>
Message-ID: <018201cc8aa2$884378c0$98ca6a40$@sabbe@ugent.be>

> 
> So other people from the administration tell you which software to use
> for teaching? And what happens if they tell you only Excel is
> available?
> ... weird ...
> 

On the contrary, I should say: very common. We have hardly any control over
what is installed on the application servers at our university (let alone
how well it is installed).

> You can still use the old version there, if the new version depends on
> R
>  >= 2.14.0. The old version will stay in the binary repositories for
> old
> versions of R and in the package archives of the source repository as
> well. I think Duncan explained that already.

Then what about new features that don't depend on parallel? Maintenance hell
is born, just because you effectively force somebody to fork (True, the R
builders are not the ones forcing people to stay on some "old" version, yet
this scenario is not that strange that it should be ditched without regard).

> 
> 
> > A second point is that the package would not *depend* or anything on
> R>=
> > 2.14.0.
> 
> But it depends on it: it won't pass the checks for R < 2.14.0.

Somewhat silly if it only depends on it because of the check, no?


Nick Sabbe
--
ping: nick.sabbe at ugent.be
link: http://biomath.ugent.be
wink: A1.056, Coupure Links 653, 9000 Gent
ring: 09/264.59.36

-- Do Not Disapprove


From ligges at statistik.tu-dortmund.de  Fri Oct 14 21:30:34 2011
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Fri, 14 Oct 2011 21:30:34 +0200
Subject: [Rd] NOTE: unstated dependencies in examples
In-Reply-To: <018201cc8aa2$884378c0$98ca6a40$@sabbe@ugent.be>
References: <CABE439A.19030%jari.oksanen@oulu.fi>
	<4E986EB3.2020200@statistik.tu-dortmund.de>
	<018201cc8aa2$884378c0$98ca6a40$@sabbe@ugent.be>
Message-ID: <4E988DDA.1070101@statistik.tu-dortmund.de>



On 14.10.2011 20:53, Nick Sabbe wrote:
>>
>> So other people from the administration tell you which software to use
>> for teaching? And what happens if they tell you only Excel is
>> available?
>> ... weird ...
>>
>
> On the contrary, I should say: very common. We have hardly any control over
> what is installed on the application servers at our university (let alone
> how well it is installed).
>
>> You can still use the old version there, if the new version depends on
>> R
>>   >= 2.14.0. The old version will stay in the binary repositories for
>> old
>> versions of R and in the package archives of the source repository as
>> well. I think Duncan explained that already.
>
> Then what about new features that don't depend on parallel?


What I do not understand (both in the reasoning of this thread and in 
practise): How do you install the package with its new features if you 
cannot install a new version of R with its new features? And why is it 
so important to get the new features of the package but not to get a new 
version of R with new features and many bugfixes?

If it is possible for you to install a new version of that package in 
your labs, you are also able to install a new version of R, right?



> Maintenance hell
> is born, just because you effectively force somebody to fork (True, the R
> builders are not the ones forcing people to stay on some "old" version, yet
> this scenario is not that strange that it should be ditched without regard).
>
>>
>>
>>> A second point is that the package would not *depend* or anything on
>> R>=
>>> 2.14.0.
>>
>> But it depends on it: it won't pass the checks for R<  2.14.0.
>
> Somewhat silly if it only depends on it because of the check, no?

Yes, somewhat, but actually I still do not see the reason why the new 
package should be able to work under R < 2.14.0 (see above).

Also note that the package would be accepted on CRAN as is, if you 
declared "parallel" as a Suggests, as far as I understand Jari. At least 
binaries for Windows for old R versions will be built, since I am 
checking with
_R_CHECK_FORCE_SUGGESTS_=FALSE
on Windows.  Therefore, I believe (I haven't seen the package) this 
discussion is meaningless anyway.

Best,
Uwe Ligges






>
>
> Nick Sabbe
> --
> ping: nick.sabbe at ugent.be
> link: http://biomath.ugent.be
> wink: A1.056, Coupure Links 653, 9000 Gent
> ring: 09/264.59.36
>
> -- Do Not Disapprove
>
>
>


From hpages at fhcrc.org  Sat Oct 15 01:51:23 2011
From: hpages at fhcrc.org (=?ISO-8859-1?Q?Herv=E9_Pag=E8s?=)
Date: Fri, 14 Oct 2011 16:51:23 -0700
Subject: [Rd] Creating a package skeleton with no flesh
Message-ID: <4E98CAFB.6030109@fhcrc.org>

Hi,

Wouldn't it be awesome if package.skeleton() could be used to
produce, well... a package skeleton? In a fresh R session:

   > package.skeleton("mypkg")
   Error in !have : invalid argument type

This (not very informative) error message seems to occur because
I'm trying to create a skeleton with no flesh on it:

   > foo <- function() {}
   > package.skeleton("mypkg")
   Creating directories ...
   Creating DESCRIPTION ...
   Creating NAMESPACE ...
   Creating Read-and-delete-me ...
   Saving functions and data ...
   Making help files ...
   Done.
   Further steps are described in './mypkg/Read-and-delete-me'.

A package with nothing defined in it is still a valid package.

Thanks,
H.

-- 
Herv? Pag?s

Program in Computational Biology
Division of Public Health Sciences
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N, M1-B514
P.O. Box 19024
Seattle, WA 98109-1024

E-mail: hpages at fhcrc.org
Phone:  (206) 667-5791
Fax:    (206) 667-1319


From hpages at fhcrc.org  Sat Oct 15 02:46:07 2011
From: hpages at fhcrc.org (=?windows-1252?Q?Herv=E9_Pag=E8s?=)
Date: Fri, 14 Oct 2011 17:46:07 -0700
Subject: [Rd] .onLoad failing because could not find function "loadMethod"
Message-ID: <4E98D7CF.8090108@fhcrc.org>

Hi,

This strange warning happen sometimes when running 'R CMD check':

   * checking whether the package can be loaded with stated dependencies 
... WARNING

   Error : .onLoad failed in loadNamespace() for ?pkgB?, details:
     call: length(new("A"))
     error: could not find function "loadMethod"
   Error: package/namespace load failed for ?pkgB?
   Execution halted

   It looks like this package (or one of its dependent packages) has an
   unstated dependence on a standard package.  All dependencies must be
   declared in DESCRIPTION.
   See the information on DESCRIPTION files in the chapter ?Creating R
   packages? of the ?Writing R Extensions? manual.

The same warning is reported during the 2 next checks:

   * checking whether the package can be unloaded cleanly ... WARNING
   <same error here>
   * checking whether the namespace can be loaded with stated 
dependencies ... WARNING
   <same error here>

It seems to happen when pkgB has code in its .onLoad hook that
tries to call a method defined in pkgA (pkgB imports pkgA) on an object
'x' that is an instance of a class defined in pkgA. For some obscure
reason it seems that, at the time the .onLoad hook is executed, the
methods package (which is imported in both packages) is not working
properly.

I've put 2 toy packages here that illustrate the problem:

   https://rapidshare.com/files/4043144391/pkgA_1.0.tar.gz

   https://rapidshare.com/files/1959508331/pkgB_1.0.tar.gz

I'm using R version 2.14.0 alpha (2011-10-10 r57211).

The .onLoad hook in pkgB is:

.onLoad <- function(libname, pkgname)
{
     showMethods("length")
     length(new("A"))
}

Class A and the length method for this class is defined in pkgA.

Because of the showMethods("length") statement, you should see this
when running R CMD check pkgB_1.0.tar.gz:

   * checking whether the package can be loaded with stated dependencies 
... WARNING
   Function: length (package base)
   x="A"

   Error : .onLoad failed in loadNamespace() for ?pkgB?, details:
     call: length(new("A"))
     error: could not find function "loadMethod"
   Error: package/namespace load failed for ?pkgB?
   Execution halted

Any insight on this would be appreciated.

Thanks,
H.

-- 
Herv? Pag?s

Program in Computational Biology
Division of Public Health Sciences
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N, M1-B514
P.O. Box 19024
Seattle, WA 98109-1024

E-mail: hpages at fhcrc.org
Phone:  (206) 667-5791
Fax:    (206) 667-1319


From hpages at fhcrc.org  Sat Oct 15 02:47:51 2011
From: hpages at fhcrc.org (=?windows-1252?Q?Herv=E9_Pag=E8s?=)
Date: Fri, 14 Oct 2011 17:47:51 -0700
Subject: [Rd] .onLoad failing because could not find function
	"loadMethod"
In-Reply-To: <4E98D7CF.8090108@fhcrc.org>
References: <4E98D7CF.8090108@fhcrc.org>
Message-ID: <4E98D837.6030204@fhcrc.org>

On 11-10-14 05:46 PM, Herv? Pag?s wrote:
[...]
>
> I've put 2 toy packages here that illustrate the problem:
>
> https://rapidshare.com/files/4043144391/pkgA_1.0.tar.gz
>
> https://rapidshare.com/files/1959508331/pkgB_1.0.tar.gz

arghh, sorry for the broken links. I'll try to put those packages
somewhere else.

H.


From hpages at fhcrc.org  Sat Oct 15 02:53:54 2011
From: hpages at fhcrc.org (=?windows-1252?Q?Herv=E9_Pag=E8s?=)
Date: Fri, 14 Oct 2011 17:53:54 -0700
Subject: [Rd] .onLoad failing because could not find function
	"loadMethod"
In-Reply-To: <4E98D837.6030204@fhcrc.org>
References: <4E98D7CF.8090108@fhcrc.org> <4E98D837.6030204@fhcrc.org>
Message-ID: <4E98D9A2.2020500@fhcrc.org>

On 11-10-14 05:47 PM, Herv? Pag?s wrote:
> On 11-10-14 05:46 PM, Herv? Pag?s wrote:
> [...]
>>
>> I've put 2 toy packages here that illustrate the problem:
>>
>> https://rapidshare.com/files/4043144391/pkgA_1.0.tar.gz
>>
>> https://rapidshare.com/files/1959508331/pkgB_1.0.tar.gz
>
> arghh, sorry for the broken links. I'll try to put those packages
> somewhere else.

You can download the packages with:

   wget --no-check-certificate 
https://rapidshare.com/files/4043144391/pkgA_1.0.tar.gz

   wget --no-check-certificate 
https://rapidshare.com/files/1959508331/pkgB_1.0.tar.gz

Cheers,
H.


From jari.oksanen at oulu.fi  Sat Oct 15 08:52:53 2011
From: jari.oksanen at oulu.fi (Jari Oksanen)
Date: Sat, 15 Oct 2011 09:52:53 +0300
Subject: [Rd] NOTE: unstated dependencies in examples
In-Reply-To: <4E988DDA.1070101@statistik.tu-dortmund.de>
Message-ID: <CABF0875.19058%jari.oksanen@oulu.fi>

Hello folks,

To get it short, I cut out most of the spurious controversy, and go to the
key point (and it also helps to go to sauna and then sleep well all night):

On 14/10/11 22:30 PM, "Uwe Ligges" <ligges at statistik.tu-dortmund.de> wrote:

> 
> Also note that the package would be accepted on CRAN as is, if you
> declared "parallel" as a Suggests, as far as I understand Jari. At least
> binaries for Windows for old R versions will be built, since I am
> checking with
> _R_CHECK_FORCE_SUGGESTS_=FALSE
> on Windows.  Therefore, I believe (I haven't seen the package) this
> discussion is meaningless anyway.

This is fine and solve the problems I anticipated. I did not know about this
possibility. It was not shown in R CMD check --help, nor in the usual
manuals I read: it seems to be mentioned in R-ints.texi, but not in
R-exts.texi nor in R-admin.texi.

Although I feel well at the moment, I return to the old team: about the kind
of keyword describing packages that you don't necessarily need, and which
are used in style

if(require(foo)) {do_something_fancy_with_foo::foo()}

They are "Sugar: parallel, foo". They are not necessarily needed, if you
don't have you don't necessarily even know you need them.

Then about old R and new packages: many of us are in situations where we
must use an old version of R. However, we can still install packages in
private libraries without admin privileges. They may not be system-wide, and
they can be wiped out in the next boot, or you may need to have them in your
USB stick, but installing a package is rather a light operation  which can
be be done except in most paranoid systems. One year I burned an R
installation to a CD that I distributed to the students so that they could
run R in a PC class with too ancient R. In one occasion I gave students
temporary usernames to my personal Linux desktop so that they could log in
to my desktop from the class for one analysis (but that is in general too
clumsy as Windows did not have good X11).

New package versions can contain bug fixed and some enhanced functionality
in addition to radical new features that require bleeding edge R.
Personally, I try to keep my release versions such that they work in
current, previous and future major versions of R. Currently I test the
package more or less regularly in R 2.13.2 and R-to-be-2.14.0 in MacOS, and
in 2.12.2 and R-to-be-2.15.0 in Linux, and I expect the release version to
pass all these. The development version can fail in older R, but then we
(the team) must judge if we merge such failing features to the release.

Cheers, Jari Oksanen


From murdoch.duncan at gmail.com  Sat Oct 15 14:47:03 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 15 Oct 2011 08:47:03 -0400
Subject: [Rd] NOTE: unstated dependencies in examples
In-Reply-To: <CABF0875.19058%jari.oksanen@oulu.fi>
References: <CABF0875.19058%jari.oksanen@oulu.fi>
Message-ID: <4E9980C7.2040108@gmail.com>

On 15/10/2011 2:52 AM, Jari Oksanen wrote:
> Hello folks,
>
> To get it short, I cut out most of the spurious controversy, and go to the
> key point (and it also helps to go to sauna and then sleep well all night):
>
> On 14/10/11 22:30 PM, "Uwe Ligges"<ligges at statistik.tu-dortmund.de>  wrote:
>
> >
> >  Also note that the package would be accepted on CRAN as is, if you
> >  declared "parallel" as a Suggests, as far as I understand Jari. At least
> >  binaries for Windows for old R versions will be built, since I am
> >  checking with
> >  _R_CHECK_FORCE_SUGGESTS_=FALSE
> >  on Windows.  Therefore, I believe (I haven't seen the package) this
> >  discussion is meaningless anyway.
>
> This is fine and solve the problems I anticipated. I did not know about this
> possibility. It was not shown in R CMD check --help, nor in the usual
> manuals I read: it seems to be mentioned in R-ints.texi, but not in
> R-exts.texi nor in R-admin.texi.
>
> Although I feel well at the moment, I return to the old team: about the kind
> of keyword describing packages that you don't necessarily need, and which
> are used in style
>
> if(require(foo)) {do_something_fancy_with_foo::foo()}
>
> They are "Sugar: parallel, foo". They are not necessarily needed, if you
> don't have you don't necessarily even know you need them.

That is exactly what Suggests is for.

The checks are designed to check that your code doesn't have errors like 
the one in the sample above.  If they can't find the suggested package, 
they can't check it.  That is why suggested packages need to be 
available for the checks.

Duncan Murdoch

> Then about old R and new packages: many of us are in situations where we
> must use an old version of R. However, we can still install packages in
> private libraries without admin privileges. They may not be system-wide, and
> they can be wiped out in the next boot, or you may need to have them in your
> USB stick, but installing a package is rather a light operation  which can
> be be done except in most paranoid systems. One year I burned an R
> installation to a CD that I distributed to the students so that they could
> run R in a PC class with too ancient R. In one occasion I gave students
> temporary usernames to my personal Linux desktop so that they could log in
> to my desktop from the class for one analysis (but that is in general too
> clumsy as Windows did not have good X11).
>
> New package versions can contain bug fixed and some enhanced functionality
> in addition to radical new features that require bleeding edge R.
> Personally, I try to keep my release versions such that they work in
> current, previous and future major versions of R. Currently I test the
> package more or less regularly in R 2.13.2 and R-to-be-2.14.0 in MacOS, and
> in 2.12.2 and R-to-be-2.15.0 in Linux, and I expect the release version to
> pass all these. The development version can fail in older R, but then we
> (the team) must judge if we merge such failing features to the release.
>
> Cheers, Jari Oksanen
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch.duncan at gmail.com  Sat Oct 15 14:50:04 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 15 Oct 2011 08:50:04 -0400
Subject: [Rd] Creating a package skeleton with no flesh
In-Reply-To: <4E98CAFB.6030109@fhcrc.org>
References: <4E98CAFB.6030109@fhcrc.org>
Message-ID: <4E99817C.3060406@gmail.com>

On 14/10/2011 7:51 PM, Herv? Pag?s wrote:
> Hi,
>
> Wouldn't it be awesome if package.skeleton() could be used to
> produce, well... a package skeleton? In a fresh R session:

Empty packages are almost identical, differing only in the name entry in 
the DESCRIPTION file.  So why not do this once manually, and just copy 
it into place the next time you need one?  Why do you ask other people 
to do work that is trivial for you to do?

Duncan Murdoch

>     >  package.skeleton("mypkg")
>     Error in !have : invalid argument type
>
> This (not very informative) error message seems to occur because
> I'm trying to create a skeleton with no flesh on it:
>
>     >  foo<- function() {}
>     >  package.skeleton("mypkg")
>     Creating directories ...
>     Creating DESCRIPTION ...
>     Creating NAMESPACE ...
>     Creating Read-and-delete-me ...
>     Saving functions and data ...
>     Making help files ...
>     Done.
>     Further steps are described in './mypkg/Read-and-delete-me'.
>
> A package with nothing defined in it is still a valid package.
>
> Thanks,
> H.
>


From ligges at statistik.tu-dortmund.de  Sat Oct 15 16:45:21 2011
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 15 Oct 2011 16:45:21 +0200
Subject: [Rd] .onLoad failing because could not find function
	"loadMethod"
In-Reply-To: <4E98D9A2.2020500@fhcrc.org>
References: <4E98D7CF.8090108@fhcrc.org> <4E98D837.6030204@fhcrc.org>
	<4E98D9A2.2020500@fhcrc.org>
Message-ID: <4E999C81.3030301@statistik.tu-dortmund.de>



On 15.10.2011 02:53, Herv? Pag?s wrote:
> On 11-10-14 05:47 PM, Herv? Pag?s wrote:
>> On 11-10-14 05:46 PM, Herv? Pag?s wrote:
>> [...]
>>>
>>> I've put 2 toy packages here that illustrate the problem:
>>>
>>> https://rapidshare.com/files/4043144391/pkgA_1.0.tar.gz
>>>
>>> https://rapidshare.com/files/1959508331/pkgB_1.0.tar.gz
>>
>> arghh, sorry for the broken links. I'll try to put those packages
>> somewhere else.
>
> You can download the packages with:
>
> wget --no-check-certificate
> https://rapidshare.com/files/4043144391/pkgA_1.0.tar.gz
>
> wget --no-check-certificate
> https://rapidshare.com/files/1959508331/pkgB_1.0.tar.gz


At least I cannot download and all my guesses need the DESCRIPTION and 
NAMESPACE files in order to verify.

Uwe


> Cheers,
> H.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ligges at statistik.tu-dortmund.de  Sat Oct 15 17:41:48 2011
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 15 Oct 2011 17:41:48 +0200
Subject: [Rd] .onLoad failing because could not find function
	"loadMethod"
In-Reply-To: <4E98D7CF.8090108@fhcrc.org>
References: <4E98D7CF.8090108@fhcrc.org>
Message-ID: <4E99A9BC.5040005@statistik.tu-dortmund.de>

The thing that happens during the check is that the methods package is 
not among the automatically loaded and attached packages.

When the pkgB packages is attached, the Namespaces of pkgA and methods 
are loaded but not attached.

Note that one of the checks tells you:

"A namespace must be able to be loaded with just the base namespace
loaded: otherwise if the namespace gets loaded by a saved object, the
session will be unable to start."


If you like to see into the details more easily, just start R with

R  R_DEFAULT_PACKAGES=NULL
and then try to
  library("pkgB")
and you are able to reproduce the check messages.

You can avoid n-1 Warnings/Errors in the checks by adding
library("methods")
in your .onLoad function, but of course you cannot get rid of the check 
that checks that the package can be loaded with the base namespace only.

Best,
Uwe Ligges








On 15.10.2011 02:46, Herv? Pag?s wrote:
> Hi,
>
> This strange warning happen sometimes when running 'R CMD check':
>
> * checking whether the package can be loaded with stated dependencies
> ... WARNING
>
> Error : .onLoad failed in loadNamespace() for ?pkgB?, details:
> call: length(new("A"))
> error: could not find function "loadMethod"
> Error: package/namespace load failed for ?pkgB?
> Execution halted
>
> It looks like this package (or one of its dependent packages) has an
> unstated dependence on a standard package. All dependencies must be
> declared in DESCRIPTION.
> See the information on DESCRIPTION files in the chapter ?Creating R
> packages? of the ?Writing R Extensions? manual.
>
> The same warning is reported during the 2 next checks:
>
> * checking whether the package can be unloaded cleanly ... WARNING
> <same error here>
> * checking whether the namespace can be loaded with stated dependencies
> ... WARNING
> <same error here>
>
> It seems to happen when pkgB has code in its .onLoad hook that
> tries to call a method defined in pkgA (pkgB imports pkgA) on an object
> 'x' that is an instance of a class defined in pkgA. For some obscure
> reason it seems that, at the time the .onLoad hook is executed, the
> methods package (which is imported in both packages) is not working
> properly.
>
> I've put 2 toy packages here that illustrate the problem:
>
> https://rapidshare.com/files/4043144391/pkgA_1.0.tar.gz
>
> https://rapidshare.com/files/1959508331/pkgB_1.0.tar.gz
>
> I'm using R version 2.14.0 alpha (2011-10-10 r57211).
>
> The .onLoad hook in pkgB is:
>
> .onLoad <- function(libname, pkgname)
> {
> showMethods("length")
> length(new("A"))
> }
>
> Class A and the length method for this class is defined in pkgA.
>
> Because of the showMethods("length") statement, you should see this
> when running R CMD check pkgB_1.0.tar.gz:
>
> * checking whether the package can be loaded with stated dependencies
> ... WARNING
> Function: length (package base)
> x="A"
>
> Error : .onLoad failed in loadNamespace() for ?pkgB?, details:
> call: length(new("A"))
> error: could not find function "loadMethod"
> Error: package/namespace load failed for ?pkgB?
> Execution halted
>
> Any insight on this would be appreciated.
>
> Thanks,
> H.
>


From mtmorgan at fhcrc.org  Sat Oct 15 18:09:32 2011
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Sat, 15 Oct 2011 09:09:32 -0700 (PDT)
Subject: [Rd] .onLoad failing because could not find
	function	"loadMethod"
In-Reply-To: <4E99A9BC.5040005@statistik.tu-dortmund.de>
Message-ID: <1084787233.64.1318694972506.JavaMail.root@zimbra4.fhcrc.org>



----- Original Message -----
> The thing that happens during the check is that the methods package is
> not among the automatically loaded and attached packages.
> 
> When the pkgB packages is attached, the Namespaces of pkgA and methods
> are loaded but not attached.
> 
> Note that one of the checks tells you:
> 
> "A namespace must be able to be loaded with just the base namespace
> loaded: otherwise if the namespace gets loaded by a saved object, the
> session will be unable to start."
> 
> 
> If you like to see into the details more easily, just start R with
> 
> R R_DEFAULT_PACKAGES=NULL
> and then try to
> library("pkgB")
> and you are able to reproduce the check messages.

yep, but .onLoad code can be written as

  a = new("A")
  length(a)

the error is on length(a) -- after methods::new has been found. Also, inserting a browser() call in .onLoad and then 

Browse[1]> names(getNamespaceInfo(parent.env(environment()), "imports"))
[1] "base"    "methods" "pkgA"    "pkgA"   

or 

Browse[1]> findFunction("loadMethod")
[[1]]
<environment: 0x752d90>
attr(,"name")
[1] "imports:pkgB"

shows that the methods name space is where it should be. It is the dispatch on the promoted length (in pkgA) that is awry.

Martin

> 
> You can avoid n-1 Warnings/Errors in the checks by adding
> library("methods")
> in your .onLoad function, but of course you cannot get rid of the
> check
> that checks that the package can be loaded with the base namespace
> only.
> 
> Best,
> Uwe Ligges
> 
> 
> 
> 
> 
> 
> 
> 
> On 15.10.2011 02:46, Herv? Pag?s wrote:
> > Hi,
> >
> > This strange warning happen sometimes when running 'R CMD check':
> >
> > * checking whether the package can be loaded with stated
> > dependencies
> > ... WARNING
> >
> > Error : .onLoad failed in loadNamespace() for ?pkgB?, details:
> > call: length(new("A"))
> > error: could not find function "loadMethod"
> > Error: package/namespace load failed for ?pkgB?
> > Execution halted
> >
> > It looks like this package (or one of its dependent packages) has an
> > unstated dependence on a standard package. All dependencies must be
> > declared in DESCRIPTION.
> > See the information on DESCRIPTION files in the chapter ?Creating R
> > packages? of the ?Writing R Extensions? manual.
> >
> > The same warning is reported during the 2 next checks:
> >
> > * checking whether the package can be unloaded cleanly ... WARNING
> > <same error here>
> > * checking whether the namespace can be loaded with stated
> > dependencies
> > ... WARNING
> > <same error here>
> >
> > It seems to happen when pkgB has code in its .onLoad hook that
> > tries to call a method defined in pkgA (pkgB imports pkgA) on an
> > object
> > 'x' that is an instance of a class defined in pkgA. For some obscure
> > reason it seems that, at the time the .onLoad hook is executed, the
> > methods package (which is imported in both packages) is not working
> > properly.
> >
> > I've put 2 toy packages here that illustrate the problem:
> >
> > https://rapidshare.com/files/4043144391/pkgA_1.0.tar.gz
> >
> > https://rapidshare.com/files/1959508331/pkgB_1.0.tar.gz
> >
> > I'm using R version 2.14.0 alpha (2011-10-10 r57211).
> >
> > The .onLoad hook in pkgB is:
> >
> > .onLoad <- function(libname, pkgname)
> > {
> > showMethods("length")
> > length(new("A"))
> > }
> >
> > Class A and the length method for this class is defined in pkgA.
> >
> > Because of the showMethods("length") statement, you should see this
> > when running R CMD check pkgB_1.0.tar.gz:
> >
> > * checking whether the package can be loaded with stated
> > dependencies
> > ... WARNING
> > Function: length (package base)
> > x="A"
> >
> > Error : .onLoad failed in loadNamespace() for ?pkgB?, details:
> > call: length(new("A"))
> > error: could not find function "loadMethod"
> > Error: package/namespace load failed for ?pkgB?
> > Execution halted
> >
> > Any insight on this would be appreciated.
> >
> > Thanks,
> > H.
> >
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From htl10 at users.sourceforge.net  Sat Oct 15 20:32:59 2011
From: htl10 at users.sourceforge.net (Hin-Tak Leung)
Date: Sat, 15 Oct 2011 19:32:59 +0100 (BST)
Subject: [Rd] gctorture() and gzfile() doesn't get along.
Message-ID: <1318703579.81858.YahooMailClassic@web29515.mail.ird.yahoo.com>

Found the simpliest way of seeing I bug I encountered doing "R CMD check --use-gct": Just launch R (with --vanilla), and do this:

> ?gctorture
# this work
> gctorture()
> ?gctorture
Error in gzfile(file, "rb") : 
  can only weakly reference/finalize reference objects
# this does not


It seems that when gctorture() is on gzfile() doesn't work.



From hintak_leung at yahoo.co.uk  Sat Oct 15 20:35:36 2011
From: hintak_leung at yahoo.co.uk (Hin-Tak Leung)
Date: Sat, 15 Oct 2011 19:35:36 +0100 (BST)
Subject: [Rd] gctorture() and gzfile() doesn't get along.
In-Reply-To: <1318703579.81858.YahooMailClassic@web29515.mail.ird.yahoo.com>
Message-ID: <1318703736.66480.YahooMailClassic@web29513.mail.ird.yahoo.com>

--- On Sat, 15/10/11, Hin-Tak Leung <htl10 at users.sourceforge.net> wrote:

> Found the simpliest way of seeing I
> bug I encountered doing "R CMD check --use-gct": Just launch
> R (with --vanilla), and do this:
> 
> > ?gctorture
> # this work
> > gctorture()
> > ?gctorture
> Error in gzfile(file, "rb") : 
> ? can only weakly reference/finalize reference
> objects
> # this does not
> 
> 
> It seems that when gctorture() is on gzfile() doesn't
> work.

Forgot to mentioned that this was first seen with R svn, but I am getting it with R 2.13.2 as well. Don't know when the bug got in, but it is not the first time I ran --use-gct (a year or two ago?) and it used to work.


From simon.urbanek at r-project.org  Sun Oct 16 00:45:17 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sat, 15 Oct 2011 18:45:17 -0400
Subject: [Rd] gctorture() and gzfile() doesn't get along.
In-Reply-To: <1318703579.81858.YahooMailClassic@web29515.mail.ird.yahoo.com>
References: <1318703579.81858.YahooMailClassic@web29515.mail.ird.yahoo.com>
Message-ID: <81A4C8F0-90E5-40FC-9768-5C16AE5ED78B@r-project.org>

Thanks, now fixed. It affected almost all connections.
Simon


On Oct 15, 2011, at 2:32 PM, Hin-Tak Leung wrote:

> Found the simpliest way of seeing I bug I encountered doing "R CMD check --use-gct": Just launch R (with --vanilla), and do this:
> 
>> ?gctorture
> # this work
>> gctorture()
>> ?gctorture
> Error in gzfile(file, "rb") : 
>  can only weakly reference/finalize reference objects
> # this does not
> 
> 
> It seems that when gctorture() is on gzfile() doesn't work.
> 
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From htl10 at users.sourceforge.net  Sun Oct 16 02:11:49 2011
From: htl10 at users.sourceforge.net (Hin-Tak Leung)
Date: Sun, 16 Oct 2011 01:11:49 +0100 (BST)
Subject: [Rd] gctorture() and gzfile() doesn't get along.
In-Reply-To: <81A4C8F0-90E5-40FC-9768-5C16AE5ED78B@r-project.org>
Message-ID: <1318723909.34598.YahooMailClassic@web29505.mail.ird.yahoo.com>

--- On Sat, 15/10/11, Simon Urbanek <simon.urbanek at r-project.org> wrote:

> Thanks, now fixed. It affected almost
> all connections.
> Simon

Many thanks. Hopefully having gctorture() working would help - am having heap corruption problems and valgrind aborts :-).

> On Oct 15, 2011, at 2:32 PM, Hin-Tak Leung wrote:
> 
> > Found the simpliest way of seeing I bug I encountered
> doing "R CMD check --use-gct": Just launch R (with
> --vanilla), and do this:
> > 
> >> ?gctorture
> > # this work
> >> gctorture()
> >> ?gctorture
> > Error in gzfile(file, "rb") : 
> >? can only weakly reference/finalize reference
> objects
> > # this does not
> > 
> > 
> > It seems that when gctorture() is on gzfile() doesn't
> work.
> > 
> > 
> > ______________________________________________
> > R-devel at r-project.org
> mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> > 
> > 
> 
>


From patrick.giraudoux at univ-fcomte.fr  Sun Oct 16 09:50:55 2011
From: patrick.giraudoux at univ-fcomte.fr (Patrick Giraudoux)
Date: Sun, 16 Oct 2011 09:50:55 +0200
Subject: [Rd] Error in gzfile(file,
	mode) when checking a package with  rcmd check
Message-ID: <4E9A8CDF.70801@univ-fcomte.fr>

Hi,

For the first time I have a strange behaviour when checking a package 
before 'packaging' the code. Looks like a file cannot be read.

rcmd check pgirmess

* using log directory 'U:/Documents and Settings/pgiraudo/Mes 
documents/R/pgir_arch/pgirmess_arch/On work/pgirmess.Rcheck'
* using R version 2.13.2 (2011-09-30)
* using platform: i386-pc-mingw32 (32-bit)
* using session charset: ISO8859-1
* checking for file 'pgirmess/DESCRIPTION' ... OK
* this is package 'pgirmess' version '1.5.2'
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking for .dll and .exe files ... OK
* checking whether package 'pgirmess' can be installed ... ERROR
Installation failed.
See 'U:/Documents and Settings/pgiraudo/Mes 
documents/R/pgir_arch/pgirmess_arch/On 
work/pgirmess.Rcheck/00install.out' for details.


In '00install.out',  I get:

* installing *source* package 'pgirmess' ...
** R
** data
** preparing package for lazy loading
** help
*** installing help indices
** building package indices ...
** testing if installed package can be loaded Error in gzfile(file, 
mode) : cannot open the connection
Calls: %in% -> match -> installed.packages -> saveRDS -> gzfile
In addition: Warning message:
In gzfile(file, mode) :
   cannot open compressed file 
'U:\DOCUME~1\Admin\LOCALS~1\Temp\RtmpwWcmem/libloc_U%3a%2fDocuments%20and%20Settings%2fpgiraudo%2fMes%20documents%2fR%2fpgir_arch%2fpgirmess_arch%2fOn%20work%2fpgirmess.RcheckVersion,Priority,Depends,Imports,LinkingTo,Suggests,Enhances,OS_type,License,Archs,Built.rds', 
probable reason 'No such file or directory'
Execution halted
ERROR: loading failed
* removing 
'U:/DOCUME~1/pgiraudo/MESDOC~1/R/PGIR_A~1/PGIRME~1/ONWORK~1/PGIRME~1.RCH/pgirmess'

Any hint welcome ! I am stuck on that.

Patrick


From patrick.giraudoux at univ-fcomte.fr  Sun Oct 16 11:02:06 2011
From: patrick.giraudoux at univ-fcomte.fr (Patrick Giraudoux)
Date: Sun, 16 Oct 2011 11:02:06 +0200
Subject: [Rd] Error in gzfile(file,
 mode) when checking a package with  rcmd check
In-Reply-To: <4E9A8CDF.70801@univ-fcomte.fr>
References: <4E9A8CDF.70801@univ-fcomte.fr>
Message-ID: <4E9A9D8E.1090304@univ-fcomte.fr>

PS: looks like if it has something to do with moving from R 2.13.1 to R 
2.13.2, since I cannot even check earlier versions of the pgirmess 
package that where well checked and compiled under earlier R versions.


Le 16/10/2011 09:50, Patrick Giraudoux a ?crit :
> Hi,
>
> For the first time I have a strange behaviour when checking a package 
> before 'packaging' the code. Looks like a file cannot be read.
>
> rcmd check pgirmess
>
> * using log directory 'U:/Documents and Settings/pgiraudo/Mes 
> documents/R/pgir_arch/pgirmess_arch/On work/pgirmess.Rcheck'
> * using R version 2.13.2 (2011-09-30)
> * using platform: i386-pc-mingw32 (32-bit)
> * using session charset: ISO8859-1
> * checking for file 'pgirmess/DESCRIPTION' ... OK
> * this is package 'pgirmess' version '1.5.2'
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking for .dll and .exe files ... OK
> * checking whether package 'pgirmess' can be installed ... ERROR
> Installation failed.
> See 'U:/Documents and Settings/pgiraudo/Mes 
> documents/R/pgir_arch/pgirmess_arch/On 
> work/pgirmess.Rcheck/00install.out' for details.
>
>
> In '00install.out',  I get:
>
> * installing *source* package 'pgirmess' ...
> ** R
> ** data
> ** preparing package for lazy loading
> ** help
> *** installing help indices
> ** building package indices ...
> ** testing if installed package can be loaded Error in gzfile(file, 
> mode) : cannot open the connection
> Calls: %in% -> match -> installed.packages -> saveRDS -> gzfile
> In addition: Warning message:
> In gzfile(file, mode) :
>   cannot open compressed file 
> 'U:\DOCUME~1\Admin\LOCALS~1\Temp\RtmpwWcmem/libloc_U%3a%2fDocuments%20and%20Settings%2fpgiraudo%2fMes%20documents%2fR%2fpgir_arch%2fpgirmess_arch%2fOn%20work%2fpgirmess.RcheckVersion,Priority,Depends,Imports,LinkingTo,Suggests,Enhances,OS_type,License,Archs,Built.rds', 
> probable reason 'No such file or directory'
> Execution halted
> ERROR: loading failed
> * removing 
> 'U:/DOCUME~1/pgiraudo/MESDOC~1/R/PGIR_A~1/PGIRME~1/ONWORK~1/PGIRME~1.RCH/pgirmess'
>
> Any hint welcome ! I am stuck on that.
>
> Patrick


From patrick.giraudoux at univ-fcomte.fr  Sun Oct 16 11:27:34 2011
From: patrick.giraudoux at univ-fcomte.fr (Patrick Giraudoux)
Date: Sun, 16 Oct 2011 11:27:34 +0200
Subject: [Rd] Error in gzfile(file,
 mode) when checking a package with  rcmd check
In-Reply-To: <4E9A9D8E.1090304@univ-fcomte.fr>
References: <4E9A8CDF.70801@univ-fcomte.fr> <4E9A9D8E.1090304@univ-fcomte.fr>
Message-ID: <4E9AA386.7010008@univ-fcomte.fr>

Also have just tried to build the package with no preliminary check. The 
package apparently builds OK, tar.gz as well as binary .zip. Really 
looks like the error has to do with the rcmd check command 
specifically... May it be a bug ? Suppose I am not the only one to have 
checked a package since R 2.13.2 has been delivered ?

Patrick


Le 16/10/2011 11:02, Patrick Giraudoux a ?crit :
> PS: looks like if it has something to do with moving from R 2.13.1 to 
> R 2.13.2, since I cannot even check earlier versions of the pgirmess 
> package that where well checked and compiled under earlier R versions.
>
>
> Le 16/10/2011 09:50, Patrick Giraudoux a ?crit :
>> Hi,
>>
>> For the first time I have a strange behaviour when checking a package 
>> before 'packaging' the code. Looks like a file cannot be read.
>>
>> rcmd check pgirmess
>>
>> * using log directory 'U:/Documents and Settings/pgiraudo/Mes 
>> documents/R/pgir_arch/pgirmess_arch/On work/pgirmess.Rcheck'
>> * using R version 2.13.2 (2011-09-30)
>> * using platform: i386-pc-mingw32 (32-bit)
>> * using session charset: ISO8859-1
>> * checking for file 'pgirmess/DESCRIPTION' ... OK
>> * this is package 'pgirmess' version '1.5.2'
>> * checking package dependencies ... OK
>> * checking if this is a source package ... OK
>> * checking for .dll and .exe files ... OK
>> * checking whether package 'pgirmess' can be installed ... ERROR
>> Installation failed.
>> See 'U:/Documents and Settings/pgiraudo/Mes 
>> documents/R/pgir_arch/pgirmess_arch/On 
>> work/pgirmess.Rcheck/00install.out' for details.
>>
>>
>> In '00install.out',  I get:
>>
>> * installing *source* package 'pgirmess' ...
>> ** R
>> ** data
>> ** preparing package for lazy loading
>> ** help
>> *** installing help indices
>> ** building package indices ...
>> ** testing if installed package can be loaded Error in gzfile(file, 
>> mode) : cannot open the connection
>> Calls: %in% -> match -> installed.packages -> saveRDS -> gzfile
>> In addition: Warning message:
>> In gzfile(file, mode) :
>>   cannot open compressed file 
>> 'U:\DOCUME~1\Admin\LOCALS~1\Temp\RtmpwWcmem/libloc_U%3a%2fDocuments%20and%20Settings%2fpgiraudo%2fMes%20documents%2fR%2fpgir_arch%2fpgirmess_arch%2fOn%20work%2fpgirmess.RcheckVersion,Priority,Depends,Imports,LinkingTo,Suggests,Enhances,OS_type,License,Archs,Built.rds', 
>> probable reason 'No such file or directory'
>> Execution halted
>> ERROR: loading failed
>> * removing 
>> 'U:/DOCUME~1/pgiraudo/MESDOC~1/R/PGIR_A~1/PGIRME~1/ONWORK~1/PGIRME~1.RCH/pgirmess'
>>
>> Any hint welcome ! I am stuck on that.
>>
>> Patrick
>


From hb at biostat.ucsf.edu  Sun Oct 16 14:58:23 2011
From: hb at biostat.ucsf.edu (Henrik Bengtsson)
Date: Sun, 16 Oct 2011 14:58:23 +0200
Subject: [Rd] trace an Rd conversion error in R cmd check
In-Reply-To: <CANz9Z_LT_Tc1BuA2czguBB6tO8mTOspU+akc661-Sou4Lsg4zg@mail.gmail.com>
References: <CANz9Z_LT_Tc1BuA2czguBB6tO8mTOspU+akc661-Sou4Lsg4zg@mail.gmail.com>
Message-ID: <CAFDcVCQrq08yszwASxEpVKOCR+JHuN-vCbynSWsxkd90WHk6Ng@mail.gmail.com>

Hi.

On Wed, Oct 12, 2011 at 9:24 AM, Joshua Wiley <jwiley.psych at gmail.com> wrote:
> Hi All,
>
> Apologies if this is a very naive question. ?Is there a way to see the
> particular Rd file being processed right before a warning/error
> occurs? ?As far as I can tell, all my .Rd files use have names and
> titles and they are unique between Rd files (sometimes in a file I use
> something like \name{foo} \title{Foo}). ?I seem to be able to convert
> files to latex using: R CMD Rdconv --type=latex on all my Rd files
> without problems.
>
> Here is the warning and error:
>
> * checking PDF version of manual ... ERROR
> Rd conversion errors:
> Warning in file(con, "r") :
> ?file("") only supports open = "w+" and open = "w+b": using the former
> Error : : Sections \title, and \name must exist and be unique in Rd files

For what it is worth: I also get this error when I try to "R CMD
check" any of my many packages on R Under development (unstable)
(2011-10-13 r57231) on Windows 7.  It does not occur with R version
2.14.0 alpha (2011-10-14 r57245).  I haven't had time to troubleshoot
this and I figured I'll wait a few revisions.

The error does not occur when using tools::checkRd(), e.g.

> setwd("R.methodsS3/man/");
> filenames <- list.files(pattern="[.]Rd$");
> dummy <- sapply(pathnames, FUN=tools::checkRd);
>

/Henrik

>
> I am using:
>
> R Under development (unstable) (2011-10-11 r57214)
> Platform: x86_64-pc-mingw32/x64 (64-bit)
> on Windows 7 with Rtools 2.14 and MikTeX 2.9
>
> Any suggestions or pointers to manuals/documentation would be greatly
> appreciated.
>
> Thanks,
>
> Josh
>
>
> --
> Joshua Wiley
> Ph.D. Student, Health Psychology
> Programmer Analyst II, ATS Statistical Consulting Group
> University of California, Los Angeles
> https://joshuawiley.com/
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From jwiley.psych at gmail.com  Sun Oct 16 17:54:41 2011
From: jwiley.psych at gmail.com (Joshua Wiley)
Date: Sun, 16 Oct 2011 08:54:41 -0700
Subject: [Rd] Error in gzfile(file,
 mode) when checking a package with rcmd check
In-Reply-To: <4E9AA386.7010008@univ-fcomte.fr>
References: <4E9A8CDF.70801@univ-fcomte.fr> <4E9A9D8E.1090304@univ-fcomte.fr>
	<4E9AA386.7010008@univ-fcomte.fr>
Message-ID: <CANz9Z_Le2kOxm6GkGmeMnWjtB0DexLq6jSvQOJdCvNwHsSkzZQ@mail.gmail.com>

Hmm, I have not had any difficulty with 2.13.2 on
x86_64-pc-mingw32/x64, but I do have trouble with R CMD check on R
devel, as has another user now.  It is never with building or
installing, just the checking.  In my case, the error comes when
building the manual.

2011/10/16 Patrick Giraudoux <patrick.giraudoux at univ-fcomte.fr>:
> Also have just tried to build the package with no preliminary check. The
> package apparently builds OK, tar.gz as well as binary .zip. Really looks
> like the error has to do with the rcmd check command specifically... May it
> be a bug ? Suppose I am not the only one to have checked a package since R
> 2.13.2 has been delivered ?
>
> Patrick
>
>
> Le 16/10/2011 11:02, Patrick Giraudoux a ?crit :
>>
>> PS: looks like if it has something to do with moving from R 2.13.1 to R
>> 2.13.2, since I cannot even check earlier versions of the pgirmess package
>> that where well checked and compiled under earlier R versions.
>>
>>
>> Le 16/10/2011 09:50, Patrick Giraudoux a ?crit :
>>>
>>> Hi,
>>>
>>> For the first time I have a strange behaviour when checking a package
>>> before 'packaging' the code. Looks like a file cannot be read.
>>>
>>> rcmd check pgirmess
>>>
>>> * using log directory 'U:/Documents and Settings/pgiraudo/Mes
>>> documents/R/pgir_arch/pgirmess_arch/On work/pgirmess.Rcheck'
>>> * using R version 2.13.2 (2011-09-30)
>>> * using platform: i386-pc-mingw32 (32-bit)
>>> * using session charset: ISO8859-1
>>> * checking for file 'pgirmess/DESCRIPTION' ... OK
>>> * this is package 'pgirmess' version '1.5.2'
>>> * checking package dependencies ... OK
>>> * checking if this is a source package ... OK
>>> * checking for .dll and .exe files ... OK
>>> * checking whether package 'pgirmess' can be installed ... ERROR
>>> Installation failed.
>>> See 'U:/Documents and Settings/pgiraudo/Mes
>>> documents/R/pgir_arch/pgirmess_arch/On work/pgirmess.Rcheck/00install.out'
>>> for details.
>>>
>>>
>>> In '00install.out', ?I get:
>>>
>>> * installing *source* package 'pgirmess' ...
>>> ** R
>>> ** data
>>> ** preparing package for lazy loading
>>> ** help
>>> *** installing help indices
>>> ** building package indices ...
>>> ** testing if installed package can be loaded Error in gzfile(file, mode)
>>> : cannot open the connection
>>> Calls: %in% -> match -> installed.packages -> saveRDS -> gzfile
>>> In addition: Warning message:
>>> In gzfile(file, mode) :
>>> ?cannot open compressed file
>>> 'U:\DOCUME~1\Admin\LOCALS~1\Temp\RtmpwWcmem/libloc_U%3a%2fDocuments%20and%20Settings%2fpgiraudo%2fMes%20documents%2fR%2fpgir_arch%2fpgirmess_arch%2fOn%20work%2fpgirmess.RcheckVersion,Priority,Depends,Imports,LinkingTo,Suggests,Enhances,OS_type,License,Archs,Built.rds',
>>> probable reason 'No such file or directory'
>>> Execution halted
>>> ERROR: loading failed
>>> * removing
>>> 'U:/DOCUME~1/pgiraudo/MESDOC~1/R/PGIR_A~1/PGIRME~1/ONWORK~1/PGIRME~1.RCH/pgirmess'
>>>
>>> Any hint welcome ! I am stuck on that.
>>>
>>> Patrick
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>



-- 
Joshua Wiley
Ph.D. Student, Health Psychology
Programmer Analyst II, ATS Statistical Consulting Group
University of California, Los Angeles
https://joshuawiley.com/


From rpeng at jhsph.edu  Mon Oct 17 14:22:46 2011
From: rpeng at jhsph.edu (Roger D. Peng)
Date: Mon, 17 Oct 2011 08:22:46 -0400
Subject: [Rd] "What Calls What" diagram. Flow Chart?
In-Reply-To: <CAErODj9AZS1JnnKXDGP1-Pv0NkT941Rt8sV15o5Gy08Gn-5PDw@mail.gmail.com>
References: <CAErODj9AZS1JnnKXDGP1-Pv0NkT941Rt8sV15o5Gy08Gn-5PDw@mail.gmail.com>
Message-ID: <CAE_NaA22J=ZpCUP1qnjYdmUpoHn2Uvz-4CSgoLR2FdeLkYHUBA@mail.gmail.com>

Paul, the 'cacher' package might have what you need. The 'graphcode'
and 'objectcode' functions might be useful. Granted, this package is
not really designed for visualizing code per se, but you can use the
functionality nonetheless.

-roger

On Sun, Oct 9, 2011 at 3:49 PM, Paul Johnson <pauljohn32 at gmail.com> wrote:
> I don't know the right computer science words for this question, I'm
> afraid. Apology in advance.
>
> How do you find your way around in somebody else's code? ?If the user
> runs a specific command, and wants to know how the data is managed
> until the result is returned, what to do ?
>
> I've tried this manually with tools like mtrace and browser. This is a
> bit frustrating because the browser does not stay in effect until the
> work is done. It quits at the end of the function. ?So you have to
> attach the browser to the functions that are called there, and so
> forth. ?But that doesn't quite put everything together.
>
> Example. ?Recently I was trying to find out where the package lavaan's
> calculations for the function cfa are actually done and it was a
> maddening chase from one function to the next, as data was
> re-organized and options were filled in. lavaan's "cfa" function
> reformats some options, then the work gets done by an eval.
>
> cfa> fit <- cfa(HS.model, data=HolzingerSwineford1939)
> debugging in: cfa(HS.model, data = HolzingerSwineford1939)
> debug: {
> ? ?mc <- match.call()
> ? ?mc$model.type = as.character(mc[[1L]])
> ? ?if (length(mc$model.type) == 3L)
> ? ? ? ?mc$model.type <- mc$model.type[3L]
> ? ?mc$int.ov.free = TRUE
> ? ?mc$int.lv.free = FALSE
> ? ?mc$auto.fix.first = !std.lv
> ? ?mc$auto.fix.single = TRUE
> ? ?mc$auto.var = TRUE
> ? ?mc$auto.cov.lv.x = TRUE
> ? ?mc$auto.cov.y = TRUE
> ? ?mc[[1L]] <- as.name("lavaan")
> ? ?eval(mc, parent.frame())
> }
>
> The value of "mc" that gets executed by eval is this
>
> Browse[2]> mc
> lavaan(model.syntax = HS.model, data = HolzingerSwineford1939,
> ? ?model.type = "cfa", int.ov.free = TRUE, int.lv.free = FALSE,
> ? ?auto.fix.first = TRUE, auto.fix.single = TRUE, auto.var = TRUE,
> ? ?auto.cov.lv.x = TRUE, auto.cov.y = TRUE)
>
> So then I need to but a debug on "lavaan" and step through that, see
> what it does.
>
> Is there a way to make a list of the functions that are called "pop
> out", possibly with a flow chart?
>
> Consider lm, ?I want to know
>
> lm -> lm.fit -> ?.Fortran("dqrls")
>
> I'm not asking for a conceptual UML diagram, so far as I know.
>
> The kind of trace information you get with gdb in C programs and
> shallow steps with "n" would probably help. I would not need to keep
> attaching more functions with debug.
>
> pj
>
> --
> Paul E. Johnson
> Professor, Political Science
> 1541 Lilac Lane, Room 504
> University of Kansas
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>



-- 
Roger D. Peng? |? http://www.biostat.jhsph.edu/~rpeng/


From hadley at rice.edu  Tue Oct 18 15:37:04 2011
From: hadley at rice.edu (Hadley Wickham)
Date: Tue, 18 Oct 2011 08:37:04 -0500
Subject: [Rd] readRDS and saveRDS
Message-ID: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>

Hi all,

Is there any chance that readRDS and saveRDS might one day become
read.rds and write.rds?  That would make them more consistent with the
other reading and writing functions.

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From jeffrey.ryan at lemnica.com  Tue Oct 18 16:50:41 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Tue, 18 Oct 2011 09:50:41 -0500
Subject: [Rd] readRDS and saveRDS
In-Reply-To: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
References: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
Message-ID: <CABDUZc8u1tZXmg1Q620rjyYYCm4vM_3LzWDJaiPmAR6sbYWyPw@mail.gmail.com>

I'd second this.

Though my thinking was to add writeRDS instead of saveRDS.

Jeff

On Tue, Oct 18, 2011 at 8:37 AM, Hadley Wickham <hadley at rice.edu> wrote:
> Hi all,
>
> Is there any chance that readRDS and saveRDS might one day become
> read.rds and write.rds? ?That would make them more consistent with the
> other reading and writing functions.
>
> Hadley
>
> --
> Assistant Professor / Dobelman Family Junior Chair
> Department of Statistics / Rice University
> http://had.co.nz/
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From murdoch.duncan at gmail.com  Tue Oct 18 18:34:17 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 18 Oct 2011 12:34:17 -0400
Subject: [Rd] readRDS and saveRDS
In-Reply-To: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
References: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
Message-ID: <4E9DAA89.7050601@gmail.com>

On 18/10/2011 9:37 AM, Hadley Wickham wrote:
> Hi all,
>
> Is there any chance that readRDS and saveRDS might one day become
> read.rds and write.rds?  That would make them more consistent with the
> other reading and writing functions.

Ending names in .foo is a bad idea because of the S3 naming conventions, 
so I think this is unlikely.  But you can always create an alias yourself...

Duncan Murdoch


From hadley at rice.edu  Tue Oct 18 18:37:06 2011
From: hadley at rice.edu (Hadley Wickham)
Date: Tue, 18 Oct 2011 11:37:06 -0500
Subject: [Rd] readRDS and saveRDS
In-Reply-To: <4E9DAA89.7050601@gmail.com>
References: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
	<4E9DAA89.7050601@gmail.com>
Message-ID: <CABdHhvHUw8D_ejfaxmkUqtB7hZ-F595TuZVBre2D9_az1UcgfA@mail.gmail.com>

>> Is there any chance that readRDS and saveRDS might one day become
>> read.rds and write.rds? ?That would make them more consistent with the
>> other reading and writing functions.
>
> Ending names in .foo is a bad idea because of the S3 naming conventions, so
> I think this is unlikely. ?But you can always create an alias yourself...

It just makes teaching that much harder.  We have the pairs:

* read.csv and write.csv
* load and save
* readRDS and saveRDS

Even loadRDS/saveRDS or readRDS/writeRDS would be better than the current combo.

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From jeffrey.ryan at lemnica.com  Tue Oct 18 18:47:56 2011
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Tue, 18 Oct 2011 11:47:56 -0500
Subject: [Rd] readRDS and saveRDS
In-Reply-To: <CABdHhvHUw8D_ejfaxmkUqtB7hZ-F595TuZVBre2D9_az1UcgfA@mail.gmail.com>
References: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
	<4E9DAA89.7050601@gmail.com>
	<CABdHhvHUw8D_ejfaxmkUqtB7hZ-F595TuZVBre2D9_az1UcgfA@mail.gmail.com>
Message-ID: <CABDUZc-HvCh2EsTCmn3QFMYD7JbE-Tqy16h8w8yY0YrXcr+Seg@mail.gmail.com>

As load involves a side-effect, I would think that loadRDS is a bad idea.

That said, read/write is far more consistent across all languages and
internally with R than read/save is.

My (worthless) vote is for writeRDS.

Jeff

On Tue, Oct 18, 2011 at 11:37 AM, Hadley Wickham <hadley at rice.edu> wrote:
>>> Is there any chance that readRDS and saveRDS might one day become
>>> read.rds and write.rds? ?That would make them more consistent with the
>>> other reading and writing functions.
>>
>> Ending names in .foo is a bad idea because of the S3 naming conventions, so
>> I think this is unlikely. ?But you can always create an alias yourself...
>
> It just makes teaching that much harder. ?We have the pairs:
>
> * read.csv and write.csv
> * load and save
> * readRDS and saveRDS
>
> Even loadRDS/saveRDS or readRDS/writeRDS would be better than the current combo.
>
> Hadley
>
> --
> Assistant Professor / Dobelman Family Junior Chair
> Department of Statistics / Rice University
> http://had.co.nz/
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From gavin.simpson at ucl.ac.uk  Tue Oct 18 18:53:51 2011
From: gavin.simpson at ucl.ac.uk (Gavin Simpson)
Date: Tue, 18 Oct 2011 17:53:51 +0100
Subject: [Rd] readRDS and saveRDS
In-Reply-To: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
References: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
Message-ID: <1318956831.12384.41.camel@prometheus.geog.ucl.ac.uk>

On Tue, 2011-10-18 at 08:37 -0500, Hadley Wickham wrote:
> Hi all,
> 
> Is there any chance that readRDS and saveRDS might one day become
> read.rds and write.rds?  That would make them more consistent with the
> other reading and writing functions.
> 
> Hadley
> 

I would hope not. Those would then look like S3 methods for class "rds"
and cause confusion of a different sort.

It would be better to make the existing read.foo and write.foo functions
drop their "." but that is unlikely to happen given all the code that
would inevitably break.

G

-- 
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
 Dr. Gavin Simpson             [t] +44 (0)20 7679 0522
 ECRC, UCL Geography,          [f] +44 (0)20 7679 0565
 Pearson Building,             [e] gavin.simpsonATNOSPAMucl.ac.uk
 Gower Street, London          [w] http://www.ucl.ac.uk/~ucfagls/
 UK. WC1E 6BT.                 [w] http://www.freshwaters.org.uk
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%


From murdoch.duncan at gmail.com  Tue Oct 18 18:56:59 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 18 Oct 2011 12:56:59 -0400
Subject: [Rd] readRDS and saveRDS
In-Reply-To: <CABdHhvHUw8D_ejfaxmkUqtB7hZ-F595TuZVBre2D9_az1UcgfA@mail.gmail.com>
References: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
	<4E9DAA89.7050601@gmail.com>
	<CABdHhvHUw8D_ejfaxmkUqtB7hZ-F595TuZVBre2D9_az1UcgfA@mail.gmail.com>
Message-ID: <4E9DAFDB.90700@gmail.com>

On 18/10/2011 12:37 PM, Hadley Wickham wrote:
> >>  Is there any chance that readRDS and saveRDS might one day become
> >>  read.rds and write.rds?  That would make them more consistent with the
> >>  other reading and writing functions.
> >
> >  Ending names in .foo is a bad idea because of the S3 naming conventions, so
> >  I think this is unlikely.  But you can always create an alias yourself...
>
> It just makes teaching that much harder.  We have the pairs:
>
> * read.csv and write.csv
> * load and save
> * readRDS and saveRDS
>
> Even loadRDS/saveRDS or readRDS/writeRDS would be better than the current combo.

Every problem is an opportunity.  Think of this as an example of why 
it's important to think about the names you give to functions.

Duncan Murdoch


From hpages at fhcrc.org  Tue Oct 18 19:05:49 2011
From: hpages at fhcrc.org (=?ISO-8859-1?Q?Herv=E9_Pag=E8s?=)
Date: Tue, 18 Oct 2011 10:05:49 -0700
Subject: [Rd] Creating a package skeleton with no flesh
In-Reply-To: <4E99817C.3060406@gmail.com>
References: <4E98CAFB.6030109@fhcrc.org> <4E99817C.3060406@gmail.com>
Message-ID: <4E9DB1ED.6070704@fhcrc.org>

On 11-10-15 05:50 AM, Duncan Murdoch wrote:
> On 14/10/2011 7:51 PM, Herv? Pag?s wrote:
>> Hi,
>>
>> Wouldn't it be awesome if package.skeleton() could be used to
>> produce, well... a package skeleton? In a fresh R session:
>
> Empty packages are almost identical, differing only in the name entry in
> the DESCRIPTION file.

And also in the name and content of man/mypkg-package.Rd

> So why not do this once manually, and just copy it
> into place the next time you need one? Why do you ask other people to do
> work that is trivial for you to do?

I'm reporting a bug. Bugs that have easy workarounds are still bugs
aren't they? In that particular case, the culprit is this line:

   have <- unlist(lapply(list, exists, envir = environment))

which could be replaced by this one:

   have <- vapply(list, exists, TRUE, envir = environment)

so at least the code doesn't break before the test for "no R objects
specified or available" can be performed. It still doesn't make sense
that package.skeleton() is not supporting that case though...

Thanks,
H.

>
> Duncan Murdoch
>
>> > package.skeleton("mypkg")
>> Error in !have : invalid argument type
>>
>> This (not very informative) error message seems to occur because
>> I'm trying to create a skeleton with no flesh on it:
>>
>> > foo<- function() {}
>> > package.skeleton("mypkg")
>> Creating directories ...
>> Creating DESCRIPTION ...
>> Creating NAMESPACE ...
>> Creating Read-and-delete-me ...
>> Saving functions and data ...
>> Making help files ...
>> Done.
>> Further steps are described in './mypkg/Read-and-delete-me'.
>>
>> A package with nothing defined in it is still a valid package.
>>
>> Thanks,
>> H.
>>
>


-- 
Herv? Pag?s

Program in Computational Biology
Division of Public Health Sciences
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N, M1-B514
P.O. Box 19024
Seattle, WA 98109-1024

E-mail: hpages at fhcrc.org
Phone:  (206) 667-5791
Fax:    (206) 667-1319


From geoffjentry at hexdump.org  Tue Oct 18 20:35:37 2011
From: geoffjentry at hexdump.org (Geoff Jentry)
Date: Tue, 18 Oct 2011 11:35:37 -0700 (PDT)
Subject: [Rd] readRDS and saveRDS
In-Reply-To: <CABdHhvHUw8D_ejfaxmkUqtB7hZ-F595TuZVBre2D9_az1UcgfA@mail.gmail.com>
References: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
	<4E9DAA89.7050601@gmail.com>
	<CABdHhvHUw8D_ejfaxmkUqtB7hZ-F595TuZVBre2D9_az1UcgfA@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.1110181134560.24600@cardinals.dreamhost.com>

On Tue, 18 Oct 2011, Hadley Wickham wrote:
> * read.csv and write.csv
> * load and save
> * readRDS and saveRDS
>
> Even loadRDS/saveRDS or readRDS/writeRDS would be better than the current combo.

You could change the CSV functions to readCSV and writeCSV :)


From jwiley.psych at gmail.com  Tue Oct 18 21:16:46 2011
From: jwiley.psych at gmail.com (Joshua Wiley)
Date: Tue, 18 Oct 2011 12:16:46 -0700
Subject: [Rd] readRDS and saveRDS
In-Reply-To: <4E9DAA89.7050601@gmail.com>
References: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
	<4E9DAA89.7050601@gmail.com>
Message-ID: <CANz9Z_JCrVEbjHqpc=4mQD+Ce=XZTA6NL2ktSpB4KZtbRdELyA@mail.gmail.com>

On Tue, Oct 18, 2011 at 9:34 AM, Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
> On 18/10/2011 9:37 AM, Hadley Wickham wrote:
>>
>> Hi all,
>>
>> Is there any chance that readRDS and saveRDS might one day become
>> read.rds and write.rds? ?That would make them more consistent with the
>> other reading and writing functions.
>
> Ending names in .foo is a bad idea because of the S3 naming conventions, so
> I think this is unlikely. ?But you can always create an alias yourself...

I always thought that S3 was part of the reason for read.ext write.ext. In:

"/path/file.ext"

the "class" of the file is "ext".  I kind of like the idea of taking
this farther, generic functions read/write dispatch to the appropriate
method depending on the class of the file.  Generally, only read/write
would be used, specifying the specific method as needed.  read.rda and
write.rda could replace load/save where: dat <- read.rda() would
create an environment, dat rather than simply loading them into the
global environment.

Though this is more of a hypothetical situation than a suggestion for change.


>
> Duncan Murdoch
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>



-- 
Joshua Wiley
Ph.D. Student, Health Psychology
Programmer Analyst II, ATS Statistical Consulting Group
University of California, Los Angeles
https://joshuawiley.com/


From hadley at rice.edu  Tue Oct 18 22:36:48 2011
From: hadley at rice.edu (Hadley Wickham)
Date: Tue, 18 Oct 2011 15:36:48 -0500
Subject: [Rd] readRDS and saveRDS
In-Reply-To: <CANz9Z_JCrVEbjHqpc=4mQD+Ce=XZTA6NL2ktSpB4KZtbRdELyA@mail.gmail.com>
References: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
	<4E9DAA89.7050601@gmail.com>
	<CANz9Z_JCrVEbjHqpc=4mQD+Ce=XZTA6NL2ktSpB4KZtbRdELyA@mail.gmail.com>
Message-ID: <CABdHhvFJyO2eesS+sbGV40YHuLg95ny5r2Yeu8uGW28yWM7s4Q@mail.gmail.com>

>> Ending names in .foo is a bad idea because of the S3 naming conventions, so
>> I think this is unlikely. ?But you can always create an alias yourself...
>
> I always thought that S3 was part of the reason for read.ext write.ext. In:
>
> "/path/file.ext"
>
> the "class" of the file is "ext". ?I kind of like the idea of taking
> this farther, generic functions read/write dispatch to the appropriate
> method depending on the class of the file. ?Generally, only read/write
> would be used, specifying the specific method as needed. ?read.rda and
> write.rda could replace load/save where: dat <- read.rda() would
> create an environment, dat rather than simply loading them into the
> global environment.
>
> Though this is more of a hypothetical situation than a suggestion for change.

That makes me think of a generic read that would dispatch not on the
class of the first argument (which would always be a string), but
would instead dispatch on the file extension.  So read("x.csv") would
call read.csv, read("cache.rds") would use readRDS etc. Of course it
doesn't work in complete generality, but it's a fun idea to think
about.

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From kw.stat at gmail.com  Wed Oct 19 00:45:28 2011
From: kw.stat at gmail.com (Kevin Wright)
Date: Tue, 18 Oct 2011 17:45:28 -0500
Subject: [Rd] readRDS and saveRDS
In-Reply-To: <CABdHhvFJyO2eesS+sbGV40YHuLg95ny5r2Yeu8uGW28yWM7s4Q@mail.gmail.com>
References: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
	<4E9DAA89.7050601@gmail.com>
	<CANz9Z_JCrVEbjHqpc=4mQD+Ce=XZTA6NL2ktSpB4KZtbRdELyA@mail.gmail.com>
	<CABdHhvFJyO2eesS+sbGV40YHuLg95ny5r2Yeu8uGW28yWM7s4Q@mail.gmail.com>
Message-ID: <CAKFxdiTMktXGwHfp=KSPDO22gCw4+Q86Es4x5=R5w9wEks=xUg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111018/aa6bfb8b/attachment.pl>

From kw.stat at gmail.com  Wed Oct 19 01:00:17 2011
From: kw.stat at gmail.com (Kevin Wright)
Date: Tue, 18 Oct 2011 18:00:17 -0500
Subject: [Rd] readRDS and saveRDS
In-Reply-To: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
References: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
Message-ID: <CAKFxdiT9jXx=Hw6C0SrnFp7E1S+mWPXUDRFCAB3XvROVQnPUvw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111018/b24707ff/attachment.pl>

From hpages at fhcrc.org  Wed Oct 19 02:32:27 2011
From: hpages at fhcrc.org (=?ISO-8859-1?Q?Herv=E9_Pag=E8s?=)
Date: Tue, 18 Oct 2011 17:32:27 -0700
Subject: [Rd] readRDS and saveRDS
In-Reply-To: <CAKFxdiT9jXx=Hw6C0SrnFp7E1S+mWPXUDRFCAB3XvROVQnPUvw@mail.gmail.com>
References: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
	<CAKFxdiT9jXx=Hw6C0SrnFp7E1S+mWPXUDRFCAB3XvROVQnPUvw@mail.gmail.com>
Message-ID: <4E9E1A9B.9070909@fhcrc.org>

On 11-10-18 04:00 PM, Kevin Wright wrote:
> Hadley,
>
> Any chance of changing fun.aggregate to FUN and value_var to value.var?
>
> aggregate(.., FUN, ...)
> acast(..., fun.aggregate, ...)
>
> cast(..., value.var)
> acast(..., value_var)
>
> Side note: My fantasy for R 3.0 would be to fix the obvious inconsistencies
> in function names/arguments, use Roxygen format for the documentation,
> change the egregious [ , , drop=TRUE] to FALSE and paste(..., sep=""),
> install packages on the fly, and improve consistency for functions dealing
> with colors (hex, 0-1, 0-255, etc).

Sounds like a dream ;-) Please add to that list dropping the
stringsAsFactors "feature" and fixing
c(factor(c("a", "b")), factor(c("c", "a"))).

Thanks!
H.

>
> Kevin
>
>
> On Tue, Oct 18, 2011 at 8:37 AM, Hadley Wickham<hadley at rice.edu>  wrote:
>
>> Hi all,
>>
>> Is there any chance that readRDS and saveRDS might one day become
>> read.rds and write.rds?  That would make them more consistent with the
>> other reading and writing functions.
>>
>> Hadley
>>
>> --
>> Assistant Professor / Dobelman Family Junior Chair
>> Department of Statistics / Rice University
>> http://had.co.nz/
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Herv? Pag?s

Program in Computational Biology
Division of Public Health Sciences
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N, M1-B514
P.O. Box 19024
Seattle, WA 98109-1024

E-mail: hpages at fhcrc.org
Phone:  (206) 667-5791
Fax:    (206) 667-1319


From dtenenba at fhcrc.org  Wed Oct 19 07:52:43 2011
From: dtenenba at fhcrc.org (Dan Tenenbaum)
Date: Tue, 18 Oct 2011 22:52:43 -0700
Subject: [Rd] No R-2.14 beta executable for windows?
Message-ID: <CAF42j23yea4mUUVrCdBOL7zho1WArrPLtUJQ12j5b0ci9opxaw@mail.gmail.com>

The link to the installer exe here:

http://cran.fhcrc.org/bin/windows/base/rtest.html

...has been broken for a couple days....?

Thanks
Dan


From pdalgd at gmail.com  Wed Oct 19 08:24:56 2011
From: pdalgd at gmail.com (peter dalgaard)
Date: Wed, 19 Oct 2011 08:24:56 +0200
Subject: [Rd] No R-2.14 beta executable for windows?
In-Reply-To: <CAF42j23yea4mUUVrCdBOL7zho1WArrPLtUJQ12j5b0ci9opxaw@mail.gmail.com>
References: <CAF42j23yea4mUUVrCdBOL7zho1WArrPLtUJQ12j5b0ci9opxaw@mail.gmail.com>
Message-ID: <44604059-1AD7-49F2-8AF2-008234B33E3F@gmail.com>


On Oct 19, 2011, at 07:52 , Dan Tenenbaum wrote:

> The link to the installer exe here:
> 
> http://cran.fhcrc.org/bin/windows/base/rtest.html
> 
> ...has been broken for a couple days....?
> 

Looks like a local mirroring issue, CRAN master works, so does the .dk mirror.

Getting cutting-edge test releases from a mirror is a bit of a contradiction in terms anyways, because of the mirroring delays. 

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From simon.urbanek at r-project.org  Wed Oct 19 15:20:55 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 19 Oct 2011 09:20:55 -0400
Subject: [Rd] readRDS and saveRDS
In-Reply-To: <4E9E1A9B.9070909@fhcrc.org>
References: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
	<CAKFxdiT9jXx=Hw6C0SrnFp7E1S+mWPXUDRFCAB3XvROVQnPUvw@mail.gmail.com>
	<4E9E1A9B.9070909@fhcrc.org>
Message-ID: <F24B29EB-F63E-41A7-A04C-FF07C6D3852A@r-project.org>


On Oct 18, 2011, at 8:32 PM, Herv? Pag?s wrote:

> On 11-10-18 04:00 PM, Kevin Wright wrote:
>> Hadley,
>> 
>> Any chance of changing fun.aggregate to FUN and value_var to value.var?
>> 
>> aggregate(.., FUN, ...)
>> acast(..., fun.aggregate, ...)
>> 
>> cast(..., value.var)
>> acast(..., value_var)
>> 
>> Side note: My fantasy for R 3.0 would be to fix the obvious inconsistencies
>> in function names/arguments, use Roxygen format for the documentation,
>> change the egregious [ , , drop=TRUE] to FALSE and paste(..., sep=""),
>> install packages on the fly, and improve consistency for functions dealing
>> with colors (hex, 0-1, 0-255, etc).
> 
> Sounds like a dream ;-) Please add to that list dropping the
> stringsAsFactors "feature" and fixing
> c(factor(c("a", "b")), factor(c("c", "a"))).
> 

Can you, please, post any such ideas for making S/R consistent, especially if it breaks backward compatibility, to the Aleph mailing list? Comments from non-R users that find R inconsistent are also welcome if they substantiate their claims.
http://lists.rforge.net/cgi-bin/mailman/listinfo/aleph-devel
(If you have a better idea where to collect it in a single place, I'm all ear).
I'd like to collect as many such ideas as possible so we don't forget something in unlikely case Aleph gets off the ground. :)

Thanks,
Simon



> Thanks!
> H.
> 
>> 
>> Kevin
>> 
>> 
>> On Tue, Oct 18, 2011 at 8:37 AM, Hadley Wickham<hadley at rice.edu>  wrote:
>> 
>>> Hi all,
>>> 
>>> Is there any chance that readRDS and saveRDS might one day become
>>> read.rds and write.rds?  That would make them more consistent with the
>>> other reading and writing functions.
>>> 
>>> Hadley
>>> 
>>> --
>>> Assistant Professor / Dobelman Family Junior Chair
>>> Department of Statistics / Rice University
>>> http://had.co.nz/
>>> 
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 
> -- 
> Herv? Pag?s
> 
> Program in Computational Biology
> Division of Public Health Sciences
> Fred Hutchinson Cancer Research Center
> 1100 Fairview Ave. N, M1-B514
> P.O. Box 19024
> Seattle, WA 98109-1024
> 
> E-mail: hpages at fhcrc.org
> Phone:  (206) 667-5791
> Fax:    (206) 667-1319
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From jorismeys at gmail.com  Wed Oct 19 15:54:41 2011
From: jorismeys at gmail.com (Joris Meys)
Date: Wed, 19 Oct 2011 15:54:41 +0200
Subject: [Rd] readRDS and saveRDS
In-Reply-To: <F24B29EB-F63E-41A7-A04C-FF07C6D3852A@r-project.org>
References: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
	<CAKFxdiT9jXx=Hw6C0SrnFp7E1S+mWPXUDRFCAB3XvROVQnPUvw@mail.gmail.com>
	<4E9E1A9B.9070909@fhcrc.org>
	<F24B29EB-F63E-41A7-A04C-FF07C6D3852A@r-project.org>
Message-ID: <CAO1zAVYFTbEVbGd1-YRBKGAZTq--i6iwZcOpVsQD8YMGmK0ECA@mail.gmail.com>

2011/10/19 Simon Urbanek <simon.urbanek at r-project.org>:
>
> I'd like to collect as many such ideas as possible so we don't forget something in unlikely case Aleph gets off the ground. :)
>
> Thanks,
> Simon
>

Simon,

>From our department :

Yes, You Can!

Give us an A
Give us an L
Give us an E
Give us a P
Give us an H

Give us Aleph!  (please please pretty please...)

Cheers (and tons of them)
Joris

-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Applied mathematics, biometrics and process control

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


From kevin.r.coombes at gmail.com  Wed Oct 19 16:08:02 2011
From: kevin.r.coombes at gmail.com (Kevin R. Coombes)
Date: Wed, 19 Oct 2011 09:08:02 -0500
Subject: [Rd] readRDS and saveRDS
In-Reply-To: <F24B29EB-F63E-41A7-A04C-FF07C6D3852A@r-project.org>
References: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
	<CAKFxdiT9jXx=Hw6C0SrnFp7E1S+mWPXUDRFCAB3XvROVQnPUvw@mail.gmail.com>
	<4E9E1A9B.9070909@fhcrc.org>
	<F24B29EB-F63E-41A7-A04C-FF07C6D3852A@r-project.org>
Message-ID: <4E9ED9C2.7010700@gmail.com>

I have no idea what "aleph" is now or is likely to become.

If I follow your URL for the mailing list and click on the "archives" 
link, it tells me that there are no posts and the archive is empty, 
which makes it rather difficult to find out what aleph is (or why I 
should care).

Perhaps there is a web site somewhere that describes (plans for) aleph 
so someone who wants to find out what you are talking about can get a 
little information?

Best,
     Kevin

On 10/19/2011 8:20 AM, Simon Urbanek wrote:
> Can you, please, post any such ideas for making S/R consistent, especially if it breaks backward compatibility, to the Aleph mailing list? Comments from non-R users that find R inconsistent are also welcome if they substantiate their claims.
> http://lists.rforge.net/cgi-bin/mailman/listinfo/aleph-devel
> (If you have a better idea where to collect it in a single place, I'm all ear).
> I'd like to collect as many such ideas as possible so we don't forget something in unlikely case Aleph gets off the ground. :)
>
> Thanks,
> Simon


From jorismeys at gmail.com  Wed Oct 19 16:09:32 2011
From: jorismeys at gmail.com (Joris Meys)
Date: Wed, 19 Oct 2011 16:09:32 +0200
Subject: [Rd] readRDS and saveRDS
In-Reply-To: <4E9ED9C2.7010700@gmail.com>
References: <CABdHhvFEpU2zjcV+_Xd_vzrcM__VZ2PMSUgjKCHGYm38Xh+W2w@mail.gmail.com>
	<CAKFxdiT9jXx=Hw6C0SrnFp7E1S+mWPXUDRFCAB3XvROVQnPUvw@mail.gmail.com>
	<4E9E1A9B.9070909@fhcrc.org>
	<F24B29EB-F63E-41A7-A04C-FF07C6D3852A@r-project.org>
	<4E9ED9C2.7010700@gmail.com>
Message-ID: <CAO1zAVasx6dCf5WuNx3+ysiHv3=0Fvs7oy-DYwLni+5r=r30rA@mail.gmail.com>

You find some (very brief) information here :
http://www.rforge.net/mediawiki/index.php/Aleph

Cheers
Joris

On Wed, Oct 19, 2011 at 4:08 PM, Kevin R. Coombes
<kevin.r.coombes at gmail.com> wrote:
> I have no idea what "aleph" is now or is likely to become.
>
> If I follow your URL for the mailing list and click on the "archives" link,
> it tells me that there are no posts and the archive is empty, which makes it
> rather difficult to find out what aleph is (or why I should care).
>
> Perhaps there is a web site somewhere that describes (plans for) aleph so
> someone who wants to find out what you are talking about can get a little
> information?
>
> Best,
> ? ?Kevin
>
> On 10/19/2011 8:20 AM, Simon Urbanek wrote:
>>
>> Can you, please, post any such ideas for making S/R consistent, especially
>> if it breaks backward compatibility, to the Aleph mailing list? Comments
>> from non-R users that find R inconsistent are also welcome if they
>> substantiate their claims.
>> http://lists.rforge.net/cgi-bin/mailman/listinfo/aleph-devel
>> (If you have a better idea where to collect it in a single place, I'm all
>> ear).
>> I'd like to collect as many such ideas as possible so we don't forget
>> something in unlikely case Aleph gets off the ground. :)
>>
>> Thanks,
>> Simon
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>



-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Applied mathematics, biometrics and process control

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


From csardi at rmki.kfki.hu  Wed Oct 19 20:05:34 2011
From: csardi at rmki.kfki.hu (=?ISO-8859-1?B?R+Fib3IgQ3PhcmRp?=)
Date: Wed, 19 Oct 2011 14:05:34 -0400
Subject: [Rd] RFC: 'igraph' package update and backward compatibility
Message-ID: <CABtg=KkMw9Yxk+pQWYkw9A1LLuCYqztAw027XSiteZmTCfpHJw@mail.gmail.com>

Dear R developers,

I am seeking advice on some $subject matter.

My package will have an update soon, that is not backward compatible
with the current version. It will likely break much of the existing
code. Many (~50) packages depend on 'igraph' and they, too,  will most
probably break with the new version.

My intended solution is, that I create a snapshot of the current
package, under another name (igraph0), and ask package maintainers to
depend on that version. Then, after a short time, I'll update the
current igraph version.

Do you see any drawbacks of this solution? Is there some existing
practice for situations like this? Suggestions are greatly
appreciated.

Btw. an alternative would be to ask them to depend on the exact
current version of the package. This is an easier solution, but it
won't give people the opportunity to load both versions of the package
at the same time, if they want to run their old code.

Thank You, Best Regards,
Gabor

-- 
Gabor Csardi <csardi.gabor at gmail.com> Dept. Statistics, Harvard University


From nashjc at uottawa.ca  Wed Oct 19 21:42:11 2011
From: nashjc at uottawa.ca (John C Nash)
Date: Wed, 19 Oct 2011 15:42:11 -0400
Subject: [Rd] list of operations that preserve attributes
Message-ID: <4E9F2813.6010904@uottawa.ca>

I've been trying to prepare some wrappers for optimization objective functions and
gradients that use try() to check for computable functions. I'm also trying to do scaling
as per optim() so that a number of methods that are available on CRAN and R-Forge can use
parameter and function scaling. This got me into minor trouble when I scaled a gradient or
Hessian and the "inadmissible" attribute I had created suddenly disappeared. When I
discovered why -- that some operations don't preserve attributes -- I started to look for
a list of which ops preserve attributes and which don't. The code snippet below shows that
matrix multiplication (%*%) does not, while multiplication by a vector (simple *) does.
I'm not really surprised that some ops don't preserve attributes, particularly those that
are binary like multiplication, but it might be nice to know which operations and special
functions do so.

rm(list=ls())
m<-matrix(1:4,nrow=2, ncol=2)
print(m)
attributes(m)
attr(m,"check")<-"***"
attributes(m)
bigm<-10*m
str(bigm)
bigm1<-diag(c(1,1))%*%m
str(bigm1)
bigm1<-c(1,2)*m
str(bigm1)
print(bigm1)
arraym<-as.array(m)
str(arraym)
tanm<-tan(m)
str(tanm)


Best,

John Nash


From hpages at fhcrc.org  Wed Oct 19 22:13:55 2011
From: hpages at fhcrc.org (=?ISO-8859-1?Q?Herv=E9_Pag=E8s?=)
Date: Wed, 19 Oct 2011 13:13:55 -0700
Subject: [Rd] No R-2.14 beta executable for windows?
In-Reply-To: <44604059-1AD7-49F2-8AF2-008234B33E3F@gmail.com>
References: <CAF42j23yea4mUUVrCdBOL7zho1WArrPLtUJQ12j5b0ci9opxaw@mail.gmail.com>
	<44604059-1AD7-49F2-8AF2-008234B33E3F@gmail.com>
Message-ID: <4E9F2F83.3090104@fhcrc.org>

Hi,

On 11-10-18 11:24 PM, peter dalgaard wrote:
>
> On Oct 19, 2011, at 07:52 , Dan Tenenbaum wrote:
>
>> The link to the installer exe here:
>>
>> http://cran.fhcrc.org/bin/windows/base/rtest.html
>>
>> ...has been broken for a couple days....?
>>
>
> Looks like a local mirroring issue, CRAN master works, so does the .dk mirror.

Not just us. Try this mirror for example:

   http://cran.freestatistics.org//bin/windows/base/rtest.html

and there are others.

Ours did get the new R-2.14 beta executable during the last rsync
though (which happened last night around 2 am Seattle time).

>
> Getting cutting-edge test releases from a mirror is a bit of a contradiction in terms anyways, because of the mirroring delays.
>

Well, I guess for most people lagging 24h behind is still good
enough "cutting-edge-ness".

Thanks,
H.

-- 
Herv? Pag?s

Program in Computational Biology
Division of Public Health Sciences
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N, M1-B514
P.O. Box 19024
Seattle, WA 98109-1024

E-mail: hpages at fhcrc.org
Phone:  (206) 667-5791
Fax:    (206) 667-1319


From dtenenba at fhcrc.org  Wed Oct 19 22:19:01 2011
From: dtenenba at fhcrc.org (Dan Tenenbaum)
Date: Wed, 19 Oct 2011 13:19:01 -0700
Subject: [Rd] No R-2.14 beta executable for windows?
In-Reply-To: <44604059-1AD7-49F2-8AF2-008234B33E3F@gmail.com>
References: <CAF42j23yea4mUUVrCdBOL7zho1WArrPLtUJQ12j5b0ci9opxaw@mail.gmail.com>
	<44604059-1AD7-49F2-8AF2-008234B33E3F@gmail.com>
Message-ID: <CAF42j22+7ZMwtqcM3qKcvsd1X7tcc9Gf8bUROZfvUiGF59vcfA@mail.gmail.com>

Hi Peter,

On Tue, Oct 18, 2011 at 11:24 PM, peter dalgaard <pdalgd at gmail.com> wrote:
>
> On Oct 19, 2011, at 07:52 , Dan Tenenbaum wrote:
>
>> The link to the installer exe here:
>>
>> http://cran.fhcrc.org/bin/windows/base/rtest.html
>>
>> ...has been broken for a couple days....?
>>
>
> Looks like a local mirroring issue, CRAN master works, so does the .dk mirror.
>

Can you clarify where the CRAN master can be found?

According to:
http://cran.r-project.org/mirror-howto.html

"The CRAN master site at WU Wien, Austria, can be found at the URLs
http://cran.r-project.org
ftp://cran.r-project.org/pub/R/
rsync: cran.r-project.org::CRAN"

And yet cran.r-project.org is exactly where I could NOT find this installer.

Thanks,
Dan


> Getting cutting-edge test releases from a mirror is a bit of a contradiction in terms anyways, because of the mirroring delays.
>
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Email: pd.mes at cbs.dk ?Priv: PDalgd at gmail.com
>
>
>
>
>
>
>
>
>


From dtenenba at fhcrc.org  Wed Oct 19 22:22:10 2011
From: dtenenba at fhcrc.org (Dan Tenenbaum)
Date: Wed, 19 Oct 2011 13:22:10 -0700
Subject: [Rd] No R-2.14 beta executable for windows?
In-Reply-To: <CAF42j22+7ZMwtqcM3qKcvsd1X7tcc9Gf8bUROZfvUiGF59vcfA@mail.gmail.com>
References: <CAF42j23yea4mUUVrCdBOL7zho1WArrPLtUJQ12j5b0ci9opxaw@mail.gmail.com>
	<44604059-1AD7-49F2-8AF2-008234B33E3F@gmail.com>
	<CAF42j22+7ZMwtqcM3qKcvsd1X7tcc9Gf8bUROZfvUiGF59vcfA@mail.gmail.com>
Message-ID: <CAF42j23+dV_Gkxb5S5Whk-TbkvvLxy2RCarfuatkrszPj_UUJA@mail.gmail.com>

On Wed, Oct 19, 2011 at 1:19 PM, Dan Tenenbaum <dtenenba at fhcrc.org> wrote:
> Hi Peter,
>
> On Tue, Oct 18, 2011 at 11:24 PM, peter dalgaard <pdalgd at gmail.com> wrote:
>>
>> On Oct 19, 2011, at 07:52 , Dan Tenenbaum wrote:
>>
>>> The link to the installer exe here:
>>>
>>> http://cran.fhcrc.org/bin/windows/base/rtest.html
>>>
>>> ...has been broken for a couple days....?
>>>
>>
>> Looks like a local mirroring issue, CRAN master works, so does the .dk mirror.
>>
>
> Can you clarify where the CRAN master can be found?
>
> According to:
> http://cran.r-project.org/mirror-howto.html
>
> "The CRAN master site at WU Wien, Austria, can be found at the URLs
> http://cran.r-project.org
> ftp://cran.r-project.org/pub/R/
> rsync: cran.r-project.org::CRAN"
>
> And yet cran.r-project.org is exactly where I could NOT find this installer.

Just to clarify...in my original email, the URL I meant to put in was this:

http://cran.r-project.org/bin/windows/base/rtest.html

That page had a broken link to the installer for a couple days.

Putting in the FHCRC mirror was just a mistake on my part.

I understand where CRAN master is supposed to be.

Dan


>
> Thanks,
> Dan
>
>
>> Getting cutting-edge test releases from a mirror is a bit of a contradiction in terms anyways, because of the mirroring delays.
>>
>> --
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Email: pd.mes at cbs.dk ?Priv: PDalgd at gmail.com
>>
>>
>>
>>
>>
>>
>>
>>
>>
>


From ripley at stats.ox.ac.uk  Wed Oct 19 22:30:17 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 19 Oct 2011 21:30:17 +0100 (BST)
Subject: [Rd] list of operations that preserve attributes
In-Reply-To: <4E9F2813.6010904@uottawa.ca>
References: <4E9F2813.6010904@uottawa.ca>
Message-ID: <alpine.LFD.2.02.1110192125470.7044@gannet.stats.ox.ac.uk>

There is a description in the 'Blue Book' (Becker et al, 1988) of when 
attributes are supposed to be preserved, and R mostly conforms to it.

This is discussed somewhere relevant in the R documentation:  I would 
have to search for exactly where, so I leave that to you.

On Wed, 19 Oct 2011, John C Nash wrote:

> I've been trying to prepare some wrappers for optimization objective functions and
> gradients that use try() to check for computable functions. I'm also trying to do scaling
> as per optim() so that a number of methods that are available on CRAN and R-Forge can use
> parameter and function scaling. This got me into minor trouble when I scaled a gradient or
> Hessian and the "inadmissible" attribute I had created suddenly disappeared. When I
> discovered why -- that some operations don't preserve attributes -- I started to look for
> a list of which ops preserve attributes and which don't. The code snippet below shows that
> matrix multiplication (%*%) does not, while multiplication by a vector (simple *) does.
> I'm not really surprised that some ops don't preserve attributes, particularly those that
> are binary like multiplication, but it might be nice to know which operations and special
> functions do so.
>
> rm(list=ls())
> m<-matrix(1:4,nrow=2, ncol=2)
> print(m)
> attributes(m)
> attr(m,"check")<-"***"
> attributes(m)
> bigm<-10*m
> str(bigm)
> bigm1<-diag(c(1,1))%*%m
> str(bigm1)
> bigm1<-c(1,2)*m
> str(bigm1)
> print(bigm1)
> arraym<-as.array(m)
> str(arraym)
> tanm<-tan(m)
> str(tanm)
>
>
> Best,
>
> John Nash
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From hpages at fhcrc.org  Wed Oct 19 23:25:25 2011
From: hpages at fhcrc.org (=?windows-1252?Q?Herv=E9_Pag=E8s?=)
Date: Wed, 19 Oct 2011 14:25:25 -0700
Subject: [Rd] warnings issued at installation time not reported by 'R CMD
	check'
Message-ID: <4E9F4045.1010700@fhcrc.org>

Hi,

Warnings issued at installation time are not reported by 'R CMD check'.

Some of them are really important and telling something very useful
to the developer. See for example this warning:

 
http://bioconductor.org/checkResults/2.9/bioc-LATEST/globaltest/wilson2-checksrc.html

Actually, there is no formal warning reported by 'R CMD check' for
this package but if you scroll down the report and look at the output
produced during installation (globaltest.Rcheck/00install.out), you'll
see this:

   * installing *source* package ?globaltest? ...
   ** R
   ** data
   ** inst
   ** preparing package for lazy loading
   Warning in .simpleDuplicateClass(def, prev) :
     A specification for class ?data.frameOrNULL? in package 
?globaltest? seems equivalent to one from package ?Biobase? and is not 
turning on duplicate class definitions for this class
   Creating a generic function for ?sort? from package ?base? in package 
?globaltest?
   Creating a generic function for ?model.matrix? from package ?stats? 
in package ?globaltest?
   Creating a generic function for ?coefficients? from package ?stats? 
in package ?globaltest?
   Creating a generic function for ?fitted.values? from package ?stats? 
in package ?globaltest?
   Creating a generic function for ?residuals? from package ?stats? in 
package ?globaltest?
   ** help
   *** installing help indices
   ** building package indices ...
   *** tangling vignette sources ...
    ?GlobalTest.Rnw?
    ?GlobalTest_deprecated.Rnw?
   ** testing if installed package can be loaded

   * DONE (globaltest)

Why isn't this warning reported by 'R CMD check'?

Also the output of 'R CMD build' is not saying anything:

 
http://bioconductor.org/checkResults/2.9/bioc-LATEST/globaltest/wilson2-buildsrc.html

even though the package was installed to re-build the vignettes.
'R CMD build' might not be the place for issuing this kind of warning
though but 'R CMD check' definitely is.

This is with 2.14.0 beta (2011-10-16 r57266) on 64-bit openSUSE 11.4.

Thanks,
H.

-- 
Herv? Pag?s

Program in Computational Biology
Division of Public Health Sciences
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N, M1-B514
P.O. Box 19024
Seattle, WA 98109-1024

E-mail: hpages at fhcrc.org
Phone:  (206) 667-5791
Fax:    (206) 667-1319


From macrakis at alum.mit.edu  Wed Oct 19 23:34:34 2011
From: macrakis at alum.mit.edu (Stavros Macrakis)
Date: Wed, 19 Oct 2011 17:34:34 -0400
Subject: [Rd] Speed difference between df$a[1] and df[1,"a"]
Message-ID: <CACLVabWD_7ZLzjUwAt1dLPsTkpHL8uphwt4bftE=gkorMm8b6Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111019/4addbee3/attachment.pl>

From r.m.krug at gmail.com  Thu Oct 20 09:21:25 2011
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Thu, 20 Oct 2011 09:21:25 +0200
Subject: [Rd] RFC: 'igraph' package update and backward compatibility
In-Reply-To: <CABtg=KkMw9Yxk+pQWYkw9A1LLuCYqztAw027XSiteZmTCfpHJw@mail.gmail.com>
References: <CABtg=KkMw9Yxk+pQWYkw9A1LLuCYqztAw027XSiteZmTCfpHJw@mail.gmail.com>
Message-ID: <CAGhLh6HFr54M3_qG7QJj_G0Zm6y0O_mUg6MBDoo_whsCkYQB9w@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111020/8f884b6a/attachment.pl>

From r.m.krug at gmail.com  Thu Oct 20 09:21:53 2011
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Thu, 20 Oct 2011 09:21:53 +0200
Subject: [Rd] RFC: 'igraph' package update and backward compatibility
In-Reply-To: <CAGhLh6HFr54M3_qG7QJj_G0Zm6y0O_mUg6MBDoo_whsCkYQB9w@mail.gmail.com>
References: <CABtg=KkMw9Yxk+pQWYkw9A1LLuCYqztAw027XSiteZmTCfpHJw@mail.gmail.com>
	<CAGhLh6HFr54M3_qG7QJj_G0Zm6y0O_mUg6MBDoo_whsCkYQB9w@mail.gmail.com>
Message-ID: <CAGhLh6E0b+jQVzcGDkXVTR2UBjW_nmn8HQPTYdKWcF6xZAevDg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111020/a37e2fa4/attachment.pl>

From ripley at stats.ox.ac.uk  Thu Oct 20 09:33:15 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 20 Oct 2011 08:33:15 +0100 (BST)
Subject: [Rd] RFC: 'igraph' package update and backward compatibility
In-Reply-To: <CAGhLh6HFr54M3_qG7QJj_G0Zm6y0O_mUg6MBDoo_whsCkYQB9w@mail.gmail.com>
References: <CABtg=KkMw9Yxk+pQWYkw9A1LLuCYqztAw027XSiteZmTCfpHJw@mail.gmail.com>
	<CAGhLh6HFr54M3_qG7QJj_G0Zm6y0O_mUg6MBDoo_whsCkYQB9w@mail.gmail.com>
Message-ID: <alpine.LFD.2.02.1110200827340.12993@gannet.stats.ox.ac.uk>

On Thu, 20 Oct 2011, Rainer M Krug wrote:

> On Wed, Oct 19, 2011 at 8:05 PM, G?bor Cs?rdi <csardi at rmki.kfki.hu> wrote:
>
>> Dear R developers,
>>
>> I am seeking advice on some $subject matter.

If this is intended to be a CRAN update, then really you need to ask 
the CRAN crew about the possible implications (and I've sent a private 
reply to G?bor and them).

>> My package will have an update soon, that is not backward compatible
>> with the current version. It will likely break much of the existing
>> code. Many (~50) packages depend on 'igraph' and they, too,  will most
>> probably break with the new version.
>>
>
> Don't forget the indirect dependencies - might be many more.

Why would they need to change?  There are indeed current 50 CRAN/BioC 
packages which directly depend on igraph according to 
tools::dependsOnPkgs().  However, there are another 12 which 
'Suggests: igraph', and those might need to change.

>
> One approach used by e.g. ggplot and roxygen, is to call the new package
> ggplot2 or roxygen2. This would not break old packages.
>
>
>> My intended solution is, that I create a snapshot of the current
>> package, under another name (igraph0), and ask package maintainers to
>> depend on that version. Then, after a short time, I'll update the
>> current igraph version.
>>
>
> I would rather give the new one a a new name by appending the 2
>
>
>> Do you see any drawbacks of this solution? Is there some existing
>> practice for situations like this? Suggestions are greatly
>> appreciated.
>>
>
> Well - they require immediate action by the package maintainers. Yo could
> put a warning in the original iplot package, that the package is not updated
> any more and that a switch to iplot 2 is suggested. So no immediate action
> by the package maintainers is required.
>
> Cheers,
>
> Rainer
>
>
>> Btw. an alternative would be to ask them to depend on the exact
>> current version of the package. This is an easier solution, but it
>> won't give people the opportunity to load both versions of the package
>> at the same time, if they want to run their old code.
>>
>> Thank You, Best Regards,
>> Gabor
>>
>> --
>> Gabor Csardi <csardi.gabor at gmail.com> Dept. Statistics, Harvard University
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
>
>
> -- 
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology,
> UCT), Dipl. Phys. (Germany)
>
> Centre of Excellence for Invasion Biology
> Stellenbosch University
> South Africa
>
> Tel :       +33 - (0)9 53 10 27 44
> Cell:       +33 - (0)6 85 62 59 98
> Fax (F):       +33 - (0)9 58 10 27 44
>
> Fax (D):    +49 - (0)3 21 21 25 22 44
>
> email:      Rainer at krugs.de
>
> Skype:      RMkrug
>
> 	[[alternative HTML version deleted]]
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From csardi at rmki.kfki.hu  Thu Oct 20 13:21:49 2011
From: csardi at rmki.kfki.hu (=?ISO-8859-1?B?R+Fib3IgQ3PhcmRp?=)
Date: Thu, 20 Oct 2011 07:21:49 -0400
Subject: [Rd] RFC: 'igraph' package update and backward compatibility
In-Reply-To: <alpine.LFD.2.02.1110200817080.12993@gannet.stats.ox.ac.uk>
References: <CABtg=KkMw9Yxk+pQWYkw9A1LLuCYqztAw027XSiteZmTCfpHJw@mail.gmail.com>
	<alpine.LFD.2.02.1110200817080.12993@gannet.stats.ox.ac.uk>
Message-ID: <CABtg=Kkj+XExkE5vmi10o7WsYBYUuM9nGfR-iFJ=740wWZ_+CA@mail.gmail.com>

Thanks for the insight!

It is indeed true that naming the new version 'igraph1' (this is a
better name for the change it introduces), is optimal for the existing
packages.

I was a bit reluctant to do this, because of two reasons. First,
igraph exists as a Python package, and a C library as well, and I was
afraid that it would cause confusion for users to have different names
for the different packages. I can already see the emails with people
asking questions about the difference between Python igraph and R
igraph1 and whether igraph1 is available for Python, etc.

The second reason was that I want users to use the newer version of
the package; I was afraid that most them would probably not notice
that there is a new version under a different name. But this issue is
neatly solved by a warning in the old package, as Rainer suggested.

Hmmmm, it is a hard decision. I think I'll just write an email to the
maintainers of the packages in question and see how many of them
responds. Maybe breaking a couple of unmaintained packages is not a
huge tragedy. But of course I can see the burden for CRAN maintainers
and don't want to exploit them.

Thank you,
Gabor

On Thu, Oct 20, 2011 at 3:27 AM, Prof Brian Ripley
<ripley at stats.ox.ac.uk> wrote:
> We've had examples of that approach (e.g. mclust02) and also of packages
> becoming foo2 (e.g. ggplot2).
>
> The problem is
>
>> ask package maintainers to depend on that version.
>
> In our experience that takes years to achieve! ?I think that any solution
> which requires the maintainers of 50 others to submit new versions is going
> to cause a lot of work for the CRAN crew and not be very comprehensive.
>
> I do prefer the igraph2 route. ?But you also need to be aware that would
> need igraph to be maintained for a long time to come: our experience with
> e.g. ncdf/ncdf4 is that the maintainers simply do not change. ?(In the case
> of ggplot, the author did not even migrate his own dependent packages!)
>
> I think you should assume that a high proportion of packages are not
> actively maintained.
>
> Cc:ed to CRAN, since it is really Kurt's place to advise you what CRAN would
> like.
>
> Brian Ripley
>
> On Wed, 19 Oct 2011, G?bor Cs?rdi wrote:
>
>> Dear R developers,
>>
>> I am seeking advice on some $subject matter.
>>
>> My package will have an update soon, that is not backward compatible
>> with the current version. It will likely break much of the existing
>> code. Many (~50) packages depend on 'igraph' and they, too, ?will most
>> probably break with the new version.
>>
>> My intended solution is, that I create a snapshot of the current
>> package, under another name (igraph0), and ask package maintainers to
>> depend on that version. Then, after a short time, I'll update the
>> current igraph version.
>>
>> Do you see any drawbacks of this solution? Is there some existing
>> practice for situations like this? Suggestions are greatly
>> appreciated.
>>
>> Btw. an alternative would be to ask them to depend on the exact
>> current version of the package. This is an easier solution, but it
>> won't give people the opportunity to load both versions of the package
>> at the same time, if they want to run their old code.
>>
>> Thank You, Best Regards,
>> Gabor
>>
>> --
>> Gabor Csardi <csardi.gabor at gmail.com> Dept. Statistics, Harvard University
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
> --
> Brian D. Ripley, ? ? ? ? ? ? ? ? ?ripley at stats.ox.ac.uk
> Professor of Applied Statistics, ?http://www.stats.ox.ac.uk/~ripley/
> University of Oxford, ? ? ? ? ? ? Tel: ?+44 1865 272861 (self)
> 1 South Parks Road, ? ? ? ? ? ? ? ? ? ? +44 1865 272866 (PA)
> Oxford OX1 3TG, UK ? ? ? ? ? ? ? ?Fax: ?+44 1865 272595



-- 
Gabor Csardi <csardi at rmki.kfki.hu>? ?? MTA KFKI RMKI


From hadley at rice.edu  Thu Oct 20 16:56:27 2011
From: hadley at rice.edu (Hadley Wickham)
Date: Thu, 20 Oct 2011 09:56:27 -0500
Subject: [Rd] RFC: 'igraph' package update and backward compatibility
In-Reply-To: <CABtg=KkMw9Yxk+pQWYkw9A1LLuCYqztAw027XSiteZmTCfpHJw@mail.gmail.com>
References: <CABtg=KkMw9Yxk+pQWYkw9A1LLuCYqztAw027XSiteZmTCfpHJw@mail.gmail.com>
Message-ID: <CABdHhvEUeXmsQRQx4fax6WaVu31r4=-AkVmrzkqTKgOnFk+HoQ@mail.gmail.com>

> My package will have an update soon, that is not backward compatible
> with the current version. It will likely break much of the existing
> code. Many (~50) packages depend on 'igraph' and they, too, ?will most
> probably break with the new version.
>
> My intended solution is, that I create a snapshot of the current
> package, under another name (igraph0), and ask package maintainers to
> depend on that version. Then, after a short time, I'll update the
> current igraph version.

The optimal solution would be if R packages could depend on a specific
version of a package, and a user could have multiple packages
installed, and different versions loaded simultaneously so that
different packages could depend on different versions.  This is what
(e.g.) ruby gems do. Unfortunately this is a hard problem to solve -
namespaces go some way to help, but I think there are still
outstanding S3 and S4 issues.

My work around of renaming packages after API breaking changes is
definitely a sub-optimal fix.

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From murdoch.duncan at gmail.com  Thu Oct 20 17:41:22 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 20 Oct 2011 11:41:22 -0400
Subject: [Rd] RFC: 'igraph' package update and backward compatibility
In-Reply-To: <CABdHhvEUeXmsQRQx4fax6WaVu31r4=-AkVmrzkqTKgOnFk+HoQ@mail.gmail.com>
References: <CABtg=KkMw9Yxk+pQWYkw9A1LLuCYqztAw027XSiteZmTCfpHJw@mail.gmail.com>
	<CABdHhvEUeXmsQRQx4fax6WaVu31r4=-AkVmrzkqTKgOnFk+HoQ@mail.gmail.com>
Message-ID: <4EA04122.50707@gmail.com>

On 11-10-20 10:56 AM, Hadley Wickham wrote:
>> My package will have an update soon, that is not backward compatible
>> with the current version. It will likely break much of the existing
>> code. Many (~50) packages depend on 'igraph' and they, too,  will most
>> probably break with the new version.
>>
>> My intended solution is, that I create a snapshot of the current
>> package, under another name (igraph0), and ask package maintainers to
>> depend on that version. Then, after a short time, I'll update the
>> current igraph version.
>
> The optimal solution would be if R packages could depend on a specific
> version of a package, and a user could have multiple packages
> installed, and different versions loaded simultaneously so that
> different packages could depend on different versions.  This is what
> (e.g.) ruby gems do. Unfortunately this is a hard problem to solve -
> namespaces go some way to help, but I think there are still
> outstanding S3 and S4 issues.

We did have an attempt at that for some versions, but I don't think it 
ever achieved all of its goals, and we've dropped it.

I'm not sure it would be "optimal" even if it was completely 
implemented.  It introduces a lot of complexity.  Simplicity is better, 
even if it is sometimes more work.

>
> My work around of renaming packages after API breaking changes is
> definitely a sub-optimal fix.

Yes.  The optimal solution would be for all the packages that use yours 
to update to the latest version.  More work, but they end up in a better 
place.  (Or even better, if all package writers got it right the first 
time :-).

Duncan Murdoch


From hadley at rice.edu  Thu Oct 20 17:57:00 2011
From: hadley at rice.edu (Hadley Wickham)
Date: Thu, 20 Oct 2011 10:57:00 -0500
Subject: [Rd] RFC: 'igraph' package update and backward compatibility
In-Reply-To: <4EA04122.50707@gmail.com>
References: <CABtg=KkMw9Yxk+pQWYkw9A1LLuCYqztAw027XSiteZmTCfpHJw@mail.gmail.com>
	<CABdHhvEUeXmsQRQx4fax6WaVu31r4=-AkVmrzkqTKgOnFk+HoQ@mail.gmail.com>
	<4EA04122.50707@gmail.com>
Message-ID: <CABdHhvE6Db9-j9q5Or3Na3-KU+h1wNkFaH57rhDeBiXm5ritaw@mail.gmail.com>

> We did have an attempt at that for some versions, but I don't think it ever
> achieved all of its goals, and we've dropped it.

Yes, I remembered it used to be possible to do versioned installs, but
I don't think you could ever have them loaded simultaneously.

> I'm not sure it would be "optimal" even if it was completely implemented.
> ?It introduces a lot of complexity. ?Simplicity is better, even if it is
> sometimes more work.

But the current simplicity also makes more work - each time a new
package is uploaded to CRAN all dependencies need to be rechecked.
That would not be the case if packages could specify versioned
dependencies.

Another problem that I face is that I often release a new version of
plyr at the same time as a new version of ggplot2.  The new version of
ggplot2 requires the latest version of plyr, but
install.packages("ggplot2") will not reinstall plyr if it is present
but an outdated version.  Dependencies are checked at build time, but
not install time.

>> My work around of renaming packages after API breaking changes is
>> definitely a sub-optimal fix.
>
> Yes. ?The optimal solution would be for all the packages that use yours to
> update to the latest version. ?More work, but they end up in a better place.
> ?(Or even better, if all package writers got it right the first time :-).

The problem is not just packages, but reproducible code in general.
As it stands currently, to make sure a script continues to work in the
long run you need a library containing the versions of the packages
you used at the time. It would be a little easier if you could do
library("ggplot2", version = 0.85) or similar.  (Ignoring the other
difficulties of capturing the current version of R, other system
libraries, OS, hardware etc).

Generally, the absence of versioned dependencies makes it extremely
difficult to aggressively improve the design of a package. You are
locked into your first attempt at an API because it is so difficult
for users to work with the non-latest version.  Namespaces help with
this a little (by not exporting experimental functions), but I find
there are many initial design decisions that I now regret in ggplot2,
and I can not easily remedy them without breaking large amounts of
existing code or starting work on ggplot3.

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From geoffjentry at hexdump.org  Thu Oct 20 18:25:41 2011
From: geoffjentry at hexdump.org (Geoff Jentry)
Date: Thu, 20 Oct 2011 09:25:41 -0700 (PDT)
Subject: [Rd] RFC: 'igraph' package update and backward compatibility
In-Reply-To: <CABdHhvEUeXmsQRQx4fax6WaVu31r4=-AkVmrzkqTKgOnFk+HoQ@mail.gmail.com>
References: <CABtg=KkMw9Yxk+pQWYkw9A1LLuCYqztAw027XSiteZmTCfpHJw@mail.gmail.com>
	<CABdHhvEUeXmsQRQx4fax6WaVu31r4=-AkVmrzkqTKgOnFk+HoQ@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.1110200924560.4545@cardinals.dreamhost.com>

On Thu, 20 Oct 2011, Hadley Wickham wrote:
> The optimal solution would be if R packages could depend on a specific
> version of a package, and a user could have multiple packages

You used to be able to have a versioned install of a package, and then 
load a particular version.  Not sure when it was removed.


From ligges at statistik.tu-dortmund.de  Thu Oct 20 18:33:31 2011
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Thu, 20 Oct 2011 18:33:31 +0200
Subject: [Rd] RFC: 'igraph' package update and backward compatibility
In-Reply-To: <Pine.LNX.4.64.1110200924560.4545@cardinals.dreamhost.com>
References: <CABtg=KkMw9Yxk+pQWYkw9A1LLuCYqztAw027XSiteZmTCfpHJw@mail.gmail.com>
	<CABdHhvEUeXmsQRQx4fax6WaVu31r4=-AkVmrzkqTKgOnFk+HoQ@mail.gmail.com>
	<Pine.LNX.4.64.1110200924560.4545@cardinals.dreamhost.com>
Message-ID: <4EA04D5B.40008@statistik.tu-dortmund.de>



On 20.10.2011 18:25, Geoff Jentry wrote:
> On Thu, 20 Oct 2011, Hadley Wickham wrote:
>> The optimal solution would be if R packages could depend on a specific
>> version of a package, and a user could have multiple packages
>
> You used to be able to have a versioned install of a package, and then
> load a particular version. Not sure when it was removed.

See the NEWS files.

Anyway, it was always intended for development purposes only. You can 
still install various versions into separate libraries and explicitly 
load from such libraries.  Both, the removed feature and my suggested 
workaround were/are *not* intended for "production use".

Best,
Uwe Ligges






>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From amartine at ucsc.cl  Tue Oct 18 16:56:13 2011
From: amartine at ucsc.cl (Alba Martinez-Ruiz)
Date: Tue, 18 Oct 2011 07:56:13 -0700 (PDT)
Subject: [Rd] cygwing warming when creating a package in windows
Message-ID: <1318949773672-3915660.post@n4.nabble.com>

Dear All,

I am a beginner creating R packages.  I followed the Leisch (2009) tutorial
and the document ?Writing R Extensions? to write an example.

I installed R 2.12.2 (I also tried R2.13.2),  the last version of Rtools and
the recommended packages in a PC with Windows 7 Home Premium.

I can run  R CMD INSTALL linmod in the command prompt and the R CMD check
linmod. The following outputs are obtained:

* installing *source* package 'linmod' ...
** R
** preparing package for lazy loading
** help
*** installing help indices
** building package indices ...
** testing if installed package can be loaded

* DONE (linmod)

* using log directory 'D:/mypkg/linmod.Rcheck'
* using R version 2.12.2 (2011-02-25)
* using platform: i386-pc-mingw32 (32-bit)
* using session charset: ISO8859-1
* checking for file 'linmod/DESCRIPTION' ... OK
* checking extension type ... Package
* this is package 'linmod' version '1.0'
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking for executable files ... OK
* checking whether package 'linmod' can be installed ... OK
* checking package directory ... OK
* checking for portable file names ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking for unstated dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... OK
* checking Rd metadata ... WARNING
Rd files with duplicated alias 'linmod.default':
  linmod.Rd linmod.default.Rd
Rd files with duplicated alias 'linmod.formula':
  linmod.Rd linmod.formula.Rd
Rd files with duplicated alias 'print.linmod':
  linmod.Rd print.linmod.Rd
Rd files with duplicated alias 'summary.linmod':
  linmod.Rd summary.linmod.Rd
* checking Rd cross-references ... WARNING
Unknown package(s) '<pkg>' in Rd xrefs
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking examples ... OK
* checking PDF version of manual ... OK
WARNING: There were 2 warnings, see   'D:/my pkg/linmod.Rcheck/00check.log'
for details

I don?t know if it is possible to run R CMD build linmod even though I have
two warning. But if I do it, I get the following cygwin warning:

cygwin warning:
MS-DOS style path detected: D:/mypkg/linmod_1.0.tar
Preferred POSIX equivalent is: /cygdrive/d/mypkg/linmod_1.0.tar
CYGWIN environment variable option ?nodosfilewarning? turns off this
warning.
Consult the user?s guide for more details about POSIX paths:
http://cygwin.com/cygwin-ug-net/using.html#using-pathnames

I am not a Linux expert, and I don?t how to fix this error (I couldn?t find
any help in the manuals or forums, at least for me). Please, any help would
be really appreciated. 

Many thanks in advance.

Alba Martinez-Ruiz
-------------------------
Facultad de Ingenier?a
Universidad Cat?lica de la Ssma. Concepci?n
Alonso de Rivera 2850,
C.P. 409-0541 Concepci?n, Chile
Tel: + 0056 41 2345232
Fax: + 0056 41 2345300

--
View this message in context: http://r.789695.n4.nabble.com/cygwing-warming-when-creating-a-package-in-windows-tp3915660p3915660.html
Sent from the R devel mailing list archive at Nabble.com.


From jwiley.psych at gmail.com  Thu Oct 20 21:06:19 2011
From: jwiley.psych at gmail.com (Joshua Wiley)
Date: Thu, 20 Oct 2011 12:06:19 -0700
Subject: [Rd] cygwing warming when creating a package in windows
In-Reply-To: <1318949773672-3915660.post@n4.nabble.com>
References: <1318949773672-3915660.post@n4.nabble.com>
Message-ID: <00CCDF26-FA7A-41AB-BBB2-544CBFDDAD0D@gmail.com>

That. Cygwin warning is expected on Windows.  You can still build the package and it should be fine, although it looks like the documentation may need a bit of tweaking to pass R CMD check.  2.13.2 is the latest version of R, and I would recommend using it over 2.12.2.  Both for the improvements and because others on this list tend to have the later version so helping is easier.

Cheers,

Josh

On Oct 18, 2011, at 7:56, Alba Martinez-Ruiz <amartine at ucsc.cl> wrote:

> Dear All,
> 
> I am a beginner creating R packages.  I followed the Leisch (2009) tutorial
> and the document ?Writing R Extensions? to write an example.
> 
> I installed R 2.12.2 (I also tried R2.13.2),  the last version of Rtools and
> the recommended packages in a PC with Windows 7 Home Premium.
> 
> I can run  R CMD INSTALL linmod in the command prompt and the R CMD check
> linmod. The following outputs are obtained:
> 
> * installing *source* package 'linmod' ...
> ** R
> ** preparing package for lazy loading
> ** help
> *** installing help indices
> ** building package indices ...
> ** testing if installed package can be loaded
> 
> * DONE (linmod)
> 
> * using log directory 'D:/mypkg/linmod.Rcheck'
> * using R version 2.12.2 (2011-02-25)
> * using platform: i386-pc-mingw32 (32-bit)
> * using session charset: ISO8859-1
> * checking for file 'linmod/DESCRIPTION' ... OK
> * checking extension type ... Package
> * this is package 'linmod' version '1.0'
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking for executable files ... OK
> * checking whether package 'linmod' can be installed ... OK
> * checking package directory ... OK
> * checking for portable file names ... OK
> * checking DESCRIPTION meta-information ... OK
> * checking top-level files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies ... OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking for unstated dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... OK
> * checking Rd files ... OK
> * checking Rd metadata ... WARNING
> Rd files with duplicated alias 'linmod.default':
>  linmod.Rd linmod.default.Rd
> Rd files with duplicated alias 'linmod.formula':
>  linmod.Rd linmod.formula.Rd
> Rd files with duplicated alias 'print.linmod':
>  linmod.Rd print.linmod.Rd
> Rd files with duplicated alias 'summary.linmod':
>  linmod.Rd summary.linmod.Rd
> * checking Rd cross-references ... WARNING
> Unknown package(s) '<pkg>' in Rd xrefs
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking examples ... OK
> * checking PDF version of manual ... OK
> WARNING: There were 2 warnings, see   'D:/my pkg/linmod.Rcheck/00check.log'
> for details
> 
> I don?t know if it is possible to run R CMD build linmod even though I have
> two warning. But if I do it, I get the following cygwin warning:
> 
> cygwin warning:
> MS-DOS style path detected: D:/mypkg/linmod_1.0.tar
> Preferred POSIX equivalent is: /cygdrive/d/mypkg/linmod_1.0.tar
> CYGWIN environment variable option ?nodosfilewarning? turns off this
> warning.
> Consult the user?s guide for more details about POSIX paths:
> http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
> 
> I am not a Linux expert, and I don?t how to fix this error (I couldn?t find
> any help in the manuals or forums, at least for me). Please, any help would
> be really appreciated. 
> 
> Many thanks in advance.
> 
> Alba Martinez-Ruiz
> -------------------------
> Facultad de Ingenier?a
> Universidad Cat?lica de la Ssma. Concepci?n
> Alonso de Rivera 2850,
> C.P. 409-0541 Concepci?n, Chile
> Tel: + 0056 41 2345232
> Fax: + 0056 41 2345300
> 
> --
> View this message in context: http://r.789695.n4.nabble.com/cygwing-warming-when-creating-a-package-in-windows-tp3915660p3915660.html
> Sent from the R devel mailing list archive at Nabble.com.
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch.duncan at gmail.com  Thu Oct 20 21:14:30 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 20 Oct 2011 15:14:30 -0400
Subject: [Rd] cygwing warming when creating a package in windows
In-Reply-To: <00CCDF26-FA7A-41AB-BBB2-544CBFDDAD0D@gmail.com>
References: <1318949773672-3915660.post@n4.nabble.com>
	<00CCDF26-FA7A-41AB-BBB2-544CBFDDAD0D@gmail.com>
Message-ID: <4EA07316.9010801@gmail.com>

On 20/10/2011 3:06 PM, Joshua Wiley wrote:
> That Cygwin warning is expected on Windows.

It can be suppressed by setting an environment variable named CYGWIN 
with value nodosfilewarning, e.g. by doing this at the command line:

SET CYGWIN=nodosfilewarning

Duncan Murdoch


> You can still build the package and it should be fine, although it looks like the documentation may need a bit of tweaking to pass R CMD check.  2.13.2 is the latest version of R, and I would recommend using it over 2.12.2.  Both for the improvements and because others on this list tend to have the later version so helping is easier.
>
> Cheers,
>
> Josh
>
> On Oct 18, 2011, at 7:56, Alba Martinez-Ruiz<amartine at ucsc.cl>  wrote:
>
> >  Dear All,
> >
> >  I am a beginner creating R packages.  I followed the Leisch (2009) tutorial
> >  and the document ?Writing R Extensions? to write an example.
> >
> >  I installed R 2.12.2 (I also tried R2.13.2),  the last version of Rtools and
> >  the recommended packages in a PC with Windows 7 Home Premium.
> >
> >  I can run  R CMD INSTALL linmod in the command prompt and the R CMD check
> >  linmod. The following outputs are obtained:
> >
> >  * installing *source* package 'linmod' ...
> >  ** R
> >  ** preparing package for lazy loading
> >  ** help
> >  *** installing help indices
> >  ** building package indices ...
> >  ** testing if installed package can be loaded
> >
> >  * DONE (linmod)
> >
> >  * using log directory 'D:/mypkg/linmod.Rcheck'
> >  * using R version 2.12.2 (2011-02-25)
> >  * using platform: i386-pc-mingw32 (32-bit)
> >  * using session charset: ISO8859-1
> >  * checking for file 'linmod/DESCRIPTION' ... OK
> >  * checking extension type ... Package
> >  * this is package 'linmod' version '1.0'
> >  * checking package dependencies ... OK
> >  * checking if this is a source package ... OK
> >  * checking for executable files ... OK
> >  * checking whether package 'linmod' can be installed ... OK
> >  * checking package directory ... OK
> >  * checking for portable file names ... OK
> >  * checking DESCRIPTION meta-information ... OK
> >  * checking top-level files ... OK
> >  * checking index information ... OK
> >  * checking package subdirectories ... OK
> >  * checking R files for non-ASCII characters ... OK
> >  * checking R files for syntax errors ... OK
> >  * checking whether the package can be loaded ... OK
> >  * checking whether the package can be loaded with stated dependencies ... OK
> >  * checking whether the package can be unloaded cleanly ... OK
> >  * checking for unstated dependencies in R code ... OK
> >  * checking S3 generic/method consistency ... OK
> >  * checking replacement functions ... OK
> >  * checking foreign function calls ... OK
> >  * checking R code for possible problems ... OK
> >  * checking Rd files ... OK
> >  * checking Rd metadata ... WARNING
> >  Rd files with duplicated alias 'linmod.default':
> >   linmod.Rd linmod.default.Rd
> >  Rd files with duplicated alias 'linmod.formula':
> >   linmod.Rd linmod.formula.Rd
> >  Rd files with duplicated alias 'print.linmod':
> >   linmod.Rd print.linmod.Rd
> >  Rd files with duplicated alias 'summary.linmod':
> >   linmod.Rd summary.linmod.Rd
> >  * checking Rd cross-references ... WARNING
> >  Unknown package(s) '<pkg>' in Rd xrefs
> >  * checking for missing documentation entries ... OK
> >  * checking for code/documentation mismatches ... OK
> >  * checking Rd \usage sections ... OK
> >  * checking Rd contents ... OK
> >  * checking for unstated dependencies in examples ... OK
> >  * checking examples ... OK
> >  * checking PDF version of manual ... OK
> >  WARNING: There were 2 warnings, see   'D:/my pkg/linmod.Rcheck/00check.log'
> >  for details
> >
> >  I don?t know if it is possible to run R CMD build linmod even though I have
> >  two warning. But if I do it, I get the following cygwin warning:
> >
> >  cygwin warning:
> >  MS-DOS style path detected: D:/mypkg/linmod_1.0.tar
> >  Preferred POSIX equivalent is: /cygdrive/d/mypkg/linmod_1.0.tar
> >  CYGWIN environment variable option ?nodosfilewarning? turns off this
> >  warning.
> >  Consult the user?s guide for more details about POSIX paths:
> >  http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
> >
> >  I am not a Linux expert, and I don?t how to fix this error (I couldn?t find
> >  any help in the manuals or forums, at least for me). Please, any help would
> >  be really appreciated.
> >
> >  Many thanks in advance.
> >
> >  Alba Martinez-Ruiz
> >  -------------------------
> >  Facultad de Ingenier?a
> >  Universidad Cat?lica de la Ssma. Concepci?n
> >  Alonso de Rivera 2850,
> >  C.P. 409-0541 Concepci?n, Chile
> >  Tel: + 0056 41 2345232
> >  Fax: + 0056 41 2345300
> >
> >  --
> >  View this message in context: http://r.789695.n4.nabble.com/cygwing-warming-when-creating-a-package-in-windows-tp3915660p3915660.html
> >  Sent from the R devel mailing list archive at Nabble.com.
> >
> >  ______________________________________________
> >  R-devel at r-project.org mailing list
> >  https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From allane at cybaea.com  Thu Oct 20 22:58:43 2011
From: allane at cybaea.com (Allan Engelhardt)
Date: Thu, 20 Oct 2011 21:58:43 +0100
Subject: [Rd] Speed difference between df$a[1] and df[1,"a"]
In-Reply-To: <CACLVabWD_7ZLzjUwAt1dLPsTkpHL8uphwt4bftE=gkorMm8b6Q@mail.gmail.com>
References: <CACLVabWD_7ZLzjUwAt1dLPsTkpHL8uphwt4bftE=gkorMm8b6Q@mail.gmail.com>
Message-ID: <4EA08B83.6020901@cybaea.com>

`$` and `[` are primitives while `[.data.frame` is a longish R function 
that does all sorts of clever things.

On 19/10/11 22:34, Stavros Macrakis wrote:
> I was surprised to find that df$a[1] is an order of magnitude faster than
> df[1,"a"]:
>
>> df<- data.frame(a=1:10)
>> system.time(replicate(100000, df$a[3]))
>     user  system elapsed
>     0.36    0.00    0.36
>
>> system.time(replicate(100000, df[3,"a"]))
>     user  system elapsed
>     4.09    0.00    4.09
>
>
> A priori, I'd have thought that combining the row and column selections into
> a single operation would at worst be equally fast, at best would be faster
> by having fewer intermediate results and avoiding redundant operations.
>
> I thought this might be because df[,] builds a data frame before simplifying
> it to a vector, but with drop=F, it is even slower, so that doesn't seem to
> be the problem:
>
>> system.time(replicate(100000, df[3,"a",drop=FALSE]))
>     user  system elapsed
>    15.00    0.00   14.99
>
>
> I then wondered if it might be because '[' allows multiple columns and
> handles rownames. Sure enough, '[[,]]', which allows only one column, and
> does not handle rownames, is almost 3x faster:
>
>> system.time(replicate(100000, df[[3,"a"]]))
>     user  system elapsed
>     1.48    0.00    1.48
>
>
> ...but it is still 4x slower than $[].
>
> The timings are not sensitive to the number of rows in df (except for the
> drop=FALSE case, which is much slower for large dfs).  I will be avoiding
> [,] and [[,]] when I don't need their functionality, but I still wonder why
> they should be so much slower than $[].
>
>              -s
>
> R 2.13.1 on Windows 7, i7-860 (2.8GHz) 8GB RAM
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From tlumley at uw.edu  Fri Oct 21 07:23:24 2011
From: tlumley at uw.edu (Thomas Lumley)
Date: Thu, 20 Oct 2011 22:23:24 -0700
Subject: [Rd] Speed difference between df$a[1] and df[1,"a"]
In-Reply-To: <CACLVabWD_7ZLzjUwAt1dLPsTkpHL8uphwt4bftE=gkorMm8b6Q@mail.gmail.com>
References: <CACLVabWD_7ZLzjUwAt1dLPsTkpHL8uphwt4bftE=gkorMm8b6Q@mail.gmail.com>
Message-ID: <CAJ55+dLtBJDWD=fRVqMuOWKs8tZ7bewmgcC0tbCSm+oQ3y2NXQ@mail.gmail.com>

On Wed, Oct 19, 2011 at 2:34 PM, Stavros Macrakis <macrakis at alum.mit.edu> wrote:
> I was surprised to find that df$a[1] is an order of magnitude faster than
> df[1,"a"]:

Yes.  This treats a data frame as a list, and is much faster.

> I thought this might be because df[,] builds a data frame before simplifying
> it to a vector, but with drop=F, it is even slower, so that doesn't seem to
> be the problem:

drop=FALSE creates a data frame first, and then simplifies it to a
vector, so this test isn't showing what you think it is.

> I then wondered if it might be because '[' allows multiple columns and
> handles rownames. Sure enough, '[[,]]', which allows only one column, and
> does not handle rownames, is almost 3x faster:

That's part of it, but if you look at [.data.frame you see there is
also quite a bit of copying that could be avoided in simple cases but
is hard to avoid in full generality.

    -thomas

-- 
Thomas Lumley
Professor of Biostatistics
University of Auckland


From croosen at mango-solutions.com  Fri Oct 21 14:39:53 2011
From: croosen at mango-solutions.com (Charles Roosen)
Date: Fri, 21 Oct 2011 13:39:53 +0100
Subject: [Rd] Contributors on R-Forge
Message-ID: <3CBFCFB1FEFFA841BA83ADF2F2A9C6FA01BF66A3@mango-data1.Mango.local>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111021/c437fa51/attachment.pl>

From Thorn.Thaler at rdls.nestle.com  Fri Oct 21 14:57:16 2011
From: Thorn.Thaler at rdls.nestle.com (Thaler, Thorn, LAUSANNE,
	Applied Mathematics)
Date: Fri, 21 Oct 2011 14:57:16 +0200
Subject: [Rd] droplevels: drops contrasts as well
Message-ID: <F54EF8F1B477CF448729593FE421F646645E50@HQVEVE0032.nestle.com>

Dear all,

Today I figured out that there is a neat function called droplevels,
which, well, drops unused levels in a data frame. I tried the function
with some of my data sets and it turned out that not only the unused
levels were dropped but also the contrasts I set via "C". I had a look
into the code, and this behaviour arises from the fact that droplevels
uses simply factor to drop the unused levels, which uses the default
contrasts as set by options("contrasts").

I think this behaviour is annoying, because if one does not look
carefully enough, one looses the contrasts silently. Hence may I suggest
to change the code of droplevels to something like the following:

droplevels <- function (x, except = NULL, ...) {
    ix <- vapply(x, is.factor, NA)
    if (!is.null(except)) 
        ix[except] <- FALSE
    co <- lapply(x[ix], function(fa) attr(fa, "contrasts"))
    x[ix] <- mapply(function(fa, co) {
      if (nlevels(factor(fa)) == 1) {
        factor(fa)
      } else {
        C(factor(fa), co)
      }
    }, x[ix], co, SIMPLIFY = FALSE)
    x
}

which keeps the original contrasts AND drops the unused levels?
Similarly, droplevels.factor should be changed to

droplevels.factor  <- function (x, ...) {
  co <- attr(x, "contrasts")
  if (nlevels(factor(x)) == 1) {
    factor(x)
  } else {
    C(factor(x), co)
  }
}

The nlevels statement is necessary since C does not work if there are
less than 2 levels.

Any comments appreciated.


KR,

-Thorn


From nalimilan at club.fr  Fri Oct 21 15:00:25 2011
From: nalimilan at club.fr (Milan Bouchet-Valat)
Date: Fri, 21 Oct 2011 15:00:25 +0200
Subject: [Rd] Contributors on R-Forge
In-Reply-To: <3CBFCFB1FEFFA841BA83ADF2F2A9C6FA01BF66A3@mango-data1.Mango.local>
References: <3CBFCFB1FEFFA841BA83ADF2F2A9C6FA01BF66A3@mango-data1.Mango.local>
Message-ID: <1319202026.9174.6.camel@milan>

Le vendredi 21 octobre 2011 ? 13:39 +0100, Charles Roosen a ?crit :
> Hi,
> 
>  
> I've recently taken over maintenance for the "xtable" package, and have
> set it up on R-Forge.  At the moment I'm pondering what the best way is
> to handle submitted patches.  Basically, is it better to:
>  
> 
> 1)      Be non-restrictive regarding committer status, let individuals
> change the code with minimal pre-commit review, and figure changes can
> be reviewed before release.
> 
> 2)      Accept patches and basically log them as issues to look at in
> detail before putting them in.
I'd say you'd better review patches before they go in, as it would be
quite ugly to fix things afterwards, right before the release. If a
patch is buggy, better catch problems early instead of waiting for
changes to add up: then, it will be harder to find out the origin of the
bug. It also allows you to spot small issues like styling and
indentation, that you wouldn't bother to fix once they've been
committed.

You can give people committer status, but ask them to post their patches
as issues before committing. This reduces the burden imposed on the
reviewer/maintainer.


Regards


From mdowle at mdowle.plus.com  Fri Oct 21 16:12:15 2011
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Fri, 21 Oct 2011 15:12:15 +0100
Subject: [Rd] Contributors on R-Forge
References: <3CBFCFB1FEFFA841BA83ADF2F2A9C6FA01BF66A3@mango-data1.Mango.local>
	<1319202026.9174.6.camel@milan>
Message-ID: <j7ruka$c5v$1@dough.gmane.org>


"Milan Bouchet-Valat" <nalimilan at club.fr> wrote in message 
news:1319202026.9174.6.camel at milan...
> Le vendredi 21 octobre 2011 ? 13:39 +0100, Charles Roosen a ?crit :
>> Hi,
>>
>>
>> I've recently taken over maintenance for the "xtable" package, and have
>> set it up on R-Forge.  At the moment I'm pondering what the best way is
>> to handle submitted patches.  Basically, is it better to:
>>
>>
>> 1)      Be non-restrictive regarding committer status, let individuals
>> change the code with minimal pre-commit review, and figure changes can
>> be reviewed before release.
>>
>> 2)      Accept patches and basically log them as issues to look at in
>> detail before putting them in.
> I'd say you'd better review patches before they go in, as it would be
> quite ugly to fix things afterwards, right before the release. If a
> patch is buggy, better catch problems early instead of waiting for
> changes to add up: then, it will be harder to find out the origin of the
> bug. It also allows you to spot small issues like styling and
> indentation, that you wouldn't bother to fix once they've been
> committed.
>
> You can give people committer status, but ask them to post their patches
> as issues before committing. This reduces the burden imposed on the
> reviewer/maintainer.
>
My view :

1) Yes, be non-restrictive but impose some ground rules :

    i) each commit should pass 'R CMD check'

    ii) each new feature or bug fix should have an associated
    test added to the test suite (run by R CMD check), and an
    item added to NEWS (by the committer).

    iii) all developers subscribe to the -commits list and review
    each commit in a timely manner when the unified diff arrives
    in your inbox. If something is wrong or forgotten, ask the
    committer to fix it there and then.

Matthew


>
> Regards
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From hb at biostat.ucsf.edu  Fri Oct 21 16:38:58 2011
From: hb at biostat.ucsf.edu (Henrik Bengtsson)
Date: Fri, 21 Oct 2011 07:38:58 -0700
Subject: [Rd] trace an Rd conversion error in R cmd check
In-Reply-To: <CAFDcVCQrq08yszwASxEpVKOCR+JHuN-vCbynSWsxkd90WHk6Ng@mail.gmail.com>
References: <CANz9Z_LT_Tc1BuA2czguBB6tO8mTOspU+akc661-Sou4Lsg4zg@mail.gmail.com>
	<CAFDcVCQrq08yszwASxEpVKOCR+JHuN-vCbynSWsxkd90WHk6Ng@mail.gmail.com>
Message-ID: <CAFDcVCRUokor-53_AgzSpkaOfq1eYpcEryNCXHYyhTiDiMgJpw@mail.gmail.com>

To close this thread, this issue appears to have been solved in R
devel since at least r57339 (also confirmed with r57348).

/Henrik

On Sun, Oct 16, 2011 at 5:58 AM, Henrik Bengtsson <hb at biostat.ucsf.edu> wrote:
> Hi.
>
> On Wed, Oct 12, 2011 at 9:24 AM, Joshua Wiley <jwiley.psych at gmail.com> wrote:
>> Hi All,
>>
>> Apologies if this is a very naive question. ?Is there a way to see the
>> particular Rd file being processed right before a warning/error
>> occurs? ?As far as I can tell, all my .Rd files use have names and
>> titles and they are unique between Rd files (sometimes in a file I use
>> something like \name{foo} \title{Foo}). ?I seem to be able to convert
>> files to latex using: R CMD Rdconv --type=latex on all my Rd files
>> without problems.
>>
>> Here is the warning and error:
>>
>> * checking PDF version of manual ... ERROR
>> Rd conversion errors:
>> Warning in file(con, "r") :
>> ?file("") only supports open = "w+" and open = "w+b": using the former
>> Error : : Sections \title, and \name must exist and be unique in Rd files
>
> For what it is worth: I also get this error when I try to "R CMD
> check" any of my many packages on R Under development (unstable)
> (2011-10-13 r57231) on Windows 7. ?It does not occur with R version
> 2.14.0 alpha (2011-10-14 r57245). ?I haven't had time to troubleshoot
> this and I figured I'll wait a few revisions.
>
> The error does not occur when using tools::checkRd(), e.g.
>
>> setwd("R.methodsS3/man/");
>> filenames <- list.files(pattern="[.]Rd$");
>> dummy <- sapply(pathnames, FUN=tools::checkRd);
>>
>
> /Henrik
>
>>
>> I am using:
>>
>> R Under development (unstable) (2011-10-11 r57214)
>> Platform: x86_64-pc-mingw32/x64 (64-bit)
>> on Windows 7 with Rtools 2.14 and MikTeX 2.9
>>
>> Any suggestions or pointers to manuals/documentation would be greatly
>> appreciated.
>>
>> Thanks,
>>
>> Josh
>>
>>
>> --
>> Joshua Wiley
>> Ph.D. Student, Health Psychology
>> Programmer Analyst II, ATS Statistical Consulting Group
>> University of California, Los Angeles
>> https://joshuawiley.com/
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>


From xie at yihui.name  Fri Oct 21 16:44:28 2011
From: xie at yihui.name (Yihui Xie)
Date: Fri, 21 Oct 2011 09:44:28 -0500
Subject: [Rd] Contributors on R-Forge
In-Reply-To: <3CBFCFB1FEFFA841BA83ADF2F2A9C6FA01BF66A3@mango-data1.Mango.local>
References: <3CBFCFB1FEFFA841BA83ADF2F2A9C6FA01BF66A3@mango-data1.Mango.local>
Message-ID: <CANROs4c9N6ONv+RTpW0u9-t02H1oYWB3Mtk1hZ5-yWOCgApKmg@mail.gmail.com>

Hi,

I'd encourage you to consider using github as the place for
development, and sync to r-forge so users can install the devel
version by install.packages(..., repos =
'http://r-forge.r-project.org') and r-forge can also do R CMD
build/check for you once in a while.

The reason to use github is that it makes the development *so* much
more transparent and easier to interact with the person who submitted
you patches. Let me show you by an example:
https://github.com/klutometis/roxygen/pull/16 When I first moved from
roxygen to roxygen2 I found a few issues which are not terribly hard
to fix, so I just forked a version and did the fixes, and sent the
original developers a pull request (a patch). They can review the
patch online, and even comment in *specific* lines of the patch and
tell you where you need to revise and resubmit. It is also very easy
for the original author to accept a patch once it is done. I have
never seen anywhere else we can "discuss" a patch as if we were
sitting together and someone pointed to you this line is good, that
line needs improvement, ...

For the quality of the package regarding the patches, I'd also
recommend the package testthat -- when another person submits a patch
to you, it might be good to ask him/her to submit a corresponding test
case, and you can check if this patch will break other of your tests,
or prevent yourself in the future from breaking this new test. This
can make a developer more confident about the package.

BTW, it is good to know xtable is going to be under maintainence. Thanks!

Regards,
Yihui
--
Yihui Xie <xieyihui at gmail.com>
Phone: 515-294-2465 Web: http://yihui.name
Department of Statistics, Iowa State University
2215 Snedecor Hall, Ames, IA



On Fri, Oct 21, 2011 at 7:39 AM, Charles Roosen
<croosen at mango-solutions.com> wrote:
> Hi,
>
>
>
> I've recently taken over maintenance for the "xtable" package, and have
> set it up on R-Forge. ?At the moment I'm pondering what the best way is
> to handle submitted patches. ?Basically, is it better to:
>
>
>
> 1) ? ? ?Be non-restrictive regarding committer status, let individuals
> change the code with minimal pre-commit review, and figure changes can
> be reviewed before release.
>
> 2) ? ? ?Accept patches and basically log them as issues to look at in
> detail before putting them in.
>
>
>
> I'd welcome feedback from package authors regarding pros and cons, or a
> "third way" that's better that either. ?Either privately or to the list.
>
>
>
> Thanks,
>
> Charlie
>
>
>
> Charles Roosen, PhD
>
> Technical Director
>
> Mango Solutions AG
>
>
>
>
>
> T: +41 (0)61 206 92 91
>
> M: +41 (0)79 248 70 71
>
> F: +41 (0) 61 206 92 99
>
>
> www.mango-solutions.com <http://www.mango-solutions.com>
>
>
>
> Mango Solutions AG
>
> Aeschenvorstadt 36
>
> 4051 Basel
>
> Switzerland
>
>
>
>
>
> LEGAL NOTICE
> \ This message is intended for the use of...{{dropped:14}}
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From mailinglist.honeypot at gmail.com  Fri Oct 21 16:45:57 2011
From: mailinglist.honeypot at gmail.com (Steve Lianoglou)
Date: Fri, 21 Oct 2011 10:45:57 -0400
Subject: [Rd] Contributors on R-Forge
In-Reply-To: <3CBFCFB1FEFFA841BA83ADF2F2A9C6FA01BF66A3@mango-data1.Mango.local>
References: <3CBFCFB1FEFFA841BA83ADF2F2A9C6FA01BF66A3@mango-data1.Mango.local>
Message-ID: <CAHA9McPAvCnqya9R+jwYozXX4ne+xPF=1dzqbjFxx2BvP-GjfQ@mail.gmail.com>

Hi,

I know you mentioned you just set this up on r-forge, but I think
using something like github works better in "these types" of
scenarios.

The ability for an external entity to clone a repository, change it,
provide the patch via a "pull request" I think is great.

You (as the project owner) can also comment on the pull request (in
general, or on a line by line basis), allowing it to be refined
"online."

You can then easily pull in the code change to your repo if you deem
it to be up to snuff.

This way, people can quite actively take part in your project without
being "full fledged committers." When someone crosses your "threshold
of trust" ... say you you know/believe that heir code changes are
inline w/ your vision and your standards (or whatever your line might
be), you can also easily give them full commit access to your project
so you don't have to do the pull request/review dance, etc.

You of course lose r-forge's cross platform building ability, but you
may get the same by taking advantage of git's ability to "talk to"
subversion repos and push your git repo to the r-forge's subversion
repo when you are ready to submit to CRAN and take advantage of
r-forge's automated building and submission mojo.

My 2 cents,
-steve

-- 
Steve Lianoglou
Graduate Student: Computational Systems Biology
?| Memorial Sloan-Kettering Cancer Center
?| Weill Medical College of Cornell University
Contact Info: http://cbio.mskcc.org/~lianos/contact


From mailinglist.honeypot at gmail.com  Fri Oct 21 16:54:25 2011
From: mailinglist.honeypot at gmail.com (Steve Lianoglou)
Date: Fri, 21 Oct 2011 10:54:25 -0400
Subject: [Rd] Contributors on R-Forge
In-Reply-To: <CANROs4c9N6ONv+RTpW0u9-t02H1oYWB3Mtk1hZ5-yWOCgApKmg@mail.gmail.com>
References: <3CBFCFB1FEFFA841BA83ADF2F2A9C6FA01BF66A3@mango-data1.Mango.local>
	<CANROs4c9N6ONv+RTpW0u9-t02H1oYWB3Mtk1hZ5-yWOCgApKmg@mail.gmail.com>
Message-ID: <CAHA9McNgOSMmvQ9xpEMb9ciObL+AeJSGkXhzUW5LkPaRTT_bhw@mail.gmail.com>

Looke like Yihui and I are on the same page.

Just wanted to add another comment with respect to his point here:

> I'd encourage you to consider using github as the place for
> development, and sync to r-forge so users can install the devel
> version by install.packages(..., repos =
> 'http://r-forge.r-project.org') and r-forge can also do R CMD
> build/check for you once in a while.

Hadley's devtools package:
https://github.com/hadley/devtools

Has an install_github function which allows you to install a package
directly from github as well:

https://github.com/hadley/devtools/blob/master/R/install.r#L57

-steve

-- 
Steve Lianoglou
Graduate Student: Computational Systems Biology
?| Memorial Sloan-Kettering Cancer Center
?| Weill Medical College of Cornell University
Contact Info: http://cbio.mskcc.org/~lianos/contact


From spencer.graves at prodsyse.com  Fri Oct 21 21:38:22 2011
From: spencer.graves at prodsyse.com (Spencer Graves)
Date: Fri, 21 Oct 2011 12:38:22 -0700
Subject: [Rd] Contributors on R-Forge
In-Reply-To: <CAHA9McNgOSMmvQ9xpEMb9ciObL+AeJSGkXhzUW5LkPaRTT_bhw@mail.gmail.com>
References: <3CBFCFB1FEFFA841BA83ADF2F2A9C6FA01BF66A3@mango-data1.Mango.local>
	<CANROs4c9N6ONv+RTpW0u9-t02H1oYWB3Mtk1hZ5-yWOCgApKmg@mail.gmail.com>
	<CAHA9McNgOSMmvQ9xpEMb9ciObL+AeJSGkXhzUW5LkPaRTT_bhw@mail.gmail.com>
Message-ID: <4EA1CA2E.3010300@prodsyse.com>

Hi, Charles:


On 10/21/2011 7:54 AM, Steve Lianoglou wrote:
> Looke like Yihui and I are on the same page.
>
> Just wanted to add another comment with respect to his point here:
>
>> I'd encourage you to consider using github as the place for
>> development, and sync to r-forge so users can install the devel
>> version by install.packages(..., repos =
>> 'http://r-forge.r-project.org') and r-forge can also do R CMD
>> build/check for you once in a while.
> Hadley's devtools package:
> https://github.com/hadley/devtools
>
> Has an install_github function which allows you to install a package
> directly from github as well:
>
> https://github.com/hadley/devtools/blob/master/R/install.r#L57
>
> -steve


       As one of perhaps several who recommended you try R-Forge, I will 
quote here something I read on this list:  "Don't do as I say.  Do as 
Hadley does."  (I thought that was in a Fortune, but I can't find it now.)


       I have not used github in this way but with synching to R-Forge, 
it sounds like a great way to have the best of both worlds.


       Spencer

>


-- 
Spencer Graves, PE, PhD
President and Chief Technology Officer
Structure Inspection and Monitoring, Inc.
751 Emerson Ct.
San Jos?, CA 95126
ph:  408-655-4567
web:  www.structuremonitoring.com


From htl10 at users.sourceforge.net  Sat Oct 22 02:57:44 2011
From: htl10 at users.sourceforge.net (Hin-Tak Leung)
Date: Sat, 22 Oct 2011 01:57:44 +0100 (BST)
Subject: [Rd] Sweave, cairo_pdf, CJK, ghostscript
Message-ID: <1319245064.6460.YahooMailClassic@web29520.mail.ird.yahoo.com>

I have had some fun in the last few days trying to put together an annotated map of China with R and some public GIS data:

http://sourceforge.net/projects/outmodedbonsai/files/snpMatrix%20next/1.17.7.11/China_Choropleth_Maps.pdf/download

It is done, and rather nice... there are a few issues:

- the default pdf() device cannot do CJK with embedded fonts - and cairo_pdf() is not hooked up to Sweave yet. I have had a quick look, and it does not look too complicated, other than the fact that cairo_pdf() is mutually exclusive with pdf(); and the jpeg/png are new to 2.13 so it is probably just nobody has gotten round to it. (and cairo_pdf() also behaves differently with the onefile option). I guess I am almost saying I might get my hand dirty or help somebody else who wants to. So it is probably best to start some discussion.

- Some of the ghostscript/CID font instructions in pdf() are a bit bizarre...

- An earlier version of the above map does not work well with part of ghostscript (http://bugs.ghostscript.com/show_bug.cgi?id=692620). So that limits to some extent post-processing of cairo_pdf() output.




From htl10 at users.sourceforge.net  Sat Oct 22 07:34:31 2011
From: htl10 at users.sourceforge.net (Hin-Tak Leung)
Date: Sat, 22 Oct 2011 06:34:31 +0100 (BST)
Subject: [Rd] patch to add cairo support to Sweave (Re: Sweave, cairo_pdf,
	CJK, ghostscript)
Message-ID: <1319261671.87414.YahooMailClassic@web29511.mail.ird.yahoo.com>

It was as easy as I thought it was half a day ago - here is a patch against R trunk to add cairo support to the Sweave driver, an example Sweave input, and the resulting output. A few more notes:

- obviously the documentation needs to be updated... a bit more work to do.

- some check to make sure "cairo" and "pdf" are not both set would be nice, as well as checking capabilities() for cairo support, etc.

- pdflatex from texlive2007 (fedora 15) emits a couple of warnings - but seems harmless enough:

=================
pdfTeX warning: pdflatex (file ./CairoTest-another1.pdf): PDF inclusion: found PDF version <1.5>, but at most version <1.4> allowed

pdfTeX warning: pdflatex (file ./CairoTest-another1.pdf): PDF inclusion: Page Group detected which pdfTeX can't handle. Ignoring it.
==================

I am fairly sure that this is too late to be included in R 2.14 (already in code freeze and due in less than 10 days..), but harmless enough to go into trunk and 2.14.1?

--- On Sat, 22/10/11, Hin-Tak Leung <htl10 at users.sourceforge.net> wrote:

> I have had some fun in the last few
> days trying to put together an annotated map of China with R
> and some public GIS data:
> 
> http://sourceforge.net/projects/outmodedbonsai/files/snpMatrix%20next/1.17.7.11/China_Choropleth_Maps.pdf/download
> 
> It is done, and rather nice... there are a few issues:
> 
> - the default pdf() device cannot do CJK with embedded
> fonts - and cairo_pdf() is not hooked up to Sweave yet. I
> have had a quick look, and it does not look too complicated,
> other than the fact that cairo_pdf() is mutually exclusive
> with pdf(); and the jpeg/png are new to 2.13 so it is
> probably just nobody has gotten round to it. (and
> cairo_pdf() also behaves differently with the onefile
> option). I guess I am almost saying I might get my hand
> dirty or help somebody else who wants to. So it is probably
> best to start some discussion.
> 
> - Some of the ghostscript/CID font instructions in pdf()
> are a bit bizarre...
> 
> - An earlier version of the above map does not work well
> with part of ghostscript (http://bugs.ghostscript.com/show_bug.cgi?id=692620). So
> that limits to some extent post-processing of cairo_pdf()
> output.
> 
> 
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: R-Sweave-cairo.patch
Type: text/x-patch
Size: 2373 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111022/fa25ce2b/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: CairoTest.pdf
Type: application/pdf
Size: 25366 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111022/fa25ce2b/attachment.pdf>

From murdoch.duncan at gmail.com  Sat Oct 22 13:53:26 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 22 Oct 2011 07:53:26 -0400
Subject: [Rd] Sweave, cairo_pdf, CJK, ghostscript
In-Reply-To: <1319245064.6460.YahooMailClassic@web29520.mail.ird.yahoo.com>
References: <1319245064.6460.YahooMailClassic@web29520.mail.ird.yahoo.com>
Message-ID: <4EA2AEB6.8080805@gmail.com>

On 11-10-21 8:57 PM, Hin-Tak Leung wrote:
> I have had some fun in the last few days trying to put together an annotated map of China with R and some public GIS data:
>
> http://sourceforge.net/projects/outmodedbonsai/files/snpMatrix%20next/1.17.7.11/China_Choropleth_Maps.pdf/download
>
> It is done, and rather nice... there are a few issues:
>
> - the default pdf() device cannot do CJK with embedded fonts - and cairo_pdf() is not hooked up to Sweave yet. I have had a quick look, and it does not look too complicated, other than the fact that cairo_pdf() is mutually exclusive with pdf(); and the jpeg/png are new to 2.13 so it is probably just nobody has gotten round to it. (and cairo_pdf() also behaves differently with the onefile option). I guess I am almost saying I might get my hand dirty or help somebody else who wants to. So it is probably best to start some discussion.

It is not hard to write your own device functions, especially in 2.14.0. 
  See rgl::rgl.Sweave for an example.

Duncan Murdoch

> - Some of the ghostscript/CID font instructions in pdf() are a bit bizarre...
>
> - An earlier version of the above map does not work well with part of ghostscript (http://bugs.ghostscript.com/show_bug.cgi?id=692620). So that limits to some extent post-processing of cairo_pdf() output.
>
>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Sat Oct 22 18:43:11 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 22 Oct 2011 17:43:11 +0100 (BST)
Subject: [Rd] Sweave, cairo_pdf, CJK, ghostscript
In-Reply-To: <4EA2AEB6.8080805@gmail.com>
References: <1319245064.6460.YahooMailClassic@web29520.mail.ird.yahoo.com>
	<4EA2AEB6.8080805@gmail.com>
Message-ID: <alpine.LFD.2.02.1110221741160.17274@gannet.stats.ox.ac.uk>

On Sat, 22 Oct 2011, Duncan Murdoch wrote:

> On 11-10-21 8:57 PM, Hin-Tak Leung wrote:
>> I have had some fun in the last few days trying to put together an 
>> annotated map of China with R and some public GIS data:
>> 
>> http://sourceforge.net/projects/outmodedbonsai/files/snpMatrix%20next/1.17.7.11/China_Choropleth_Maps.pdf/download
>> 
>> It is done, and rather nice... there are a few issues:
>> 
>> - the default pdf() device cannot do CJK with embedded fonts - and 
>> cairo_pdf() is not hooked up to Sweave yet. I have had a quick look, and it 
>> does not look too complicated, other than the fact that cairo_pdf() is 
>> mutually exclusive with pdf(); and the jpeg/png are new to 2.13 so it is 
>> probably just nobody has gotten round to it. (and cairo_pdf() also behaves 
>> differently with the onefile option). I guess I am almost saying I might 
>> get my hand dirty or help somebody else who wants to. So it is probably 
>> best to start some discussion.
>
> It is not hard to write your own device functions, especially in 2.14.0.  See 
> rgl::rgl.Sweave for an example.

And guess what the example in the Sweave manual uses?  cairo_pdf() ...

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From htl10 at users.sourceforge.net  Mon Oct 24 00:06:23 2011
From: htl10 at users.sourceforge.net (Hin-Tak Leung)
Date: Sun, 23 Oct 2011 23:06:23 +0100 (BST)
Subject: [Rd] Sweave, cairo_pdf, CJK, ghostscript
In-Reply-To: <alpine.LFD.2.02.1110221741160.17274@gannet.stats.ox.ac.uk>
Message-ID: <1319407583.64158.YahooMailClassic@web29514.mail.ird.yahoo.com>

--- On Sat, 22/10/11, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:

> On Sat, 22 Oct 2011, Duncan Murdoch
> wrote:
> 
> > On 11-10-21 8:57 PM, Hin-Tak Leung wrote:
> >> I have had some fun in the last few days trying to
> put together an annotated map of China with R and some
> public GIS data:
> >> 
> >> http://sourceforge.net/projects/outmodedbonsai/files/snpMatrix%20next/1.17.7.11/China_Choropleth_Maps.pdf/download
> >> 
> >> It is done, and rather nice... there are a few
> issues:
> >> 
> >> - the default pdf() device cannot do CJK with
> embedded fonts - and cairo_pdf() is not hooked up to Sweave
> yet. I have had a quick look, and it does not look too
> complicated, other than the fact that cairo_pdf() is
> mutually exclusive with pdf(); and the jpeg/png are new to
> 2.13 so it is probably just nobody has gotten round to it.
> (and cairo_pdf() also behaves differently with the onefile
> option). I guess I am almost saying I might get my hand
> dirty or help somebody else who wants to. So it is probably
> best to start some discussion.
> > 
> > It is not hard to write your own device functions,
> especially in 2.14.0.? See rgl::rgl.Sweave for an
> example.
> 
> And guess what the example in the Sweave manual uses??
> cairo_pdf() ...

I don't want a new device - I just wanted cairo_pdf() to be hooked up to Sweave as an alternative to the default pdf(). See my later post with the patch against  R trunk and the worked examples.

It looks like cairo_pdf() is just using my current fontconfig settings.



From ricardosousa2000 at clix.pt  Mon Oct 24 12:31:17 2011
From: ricardosousa2000 at clix.pt (RMSOPS)
Date: Mon, 24 Oct 2011 03:31:17 -0700 (PDT)
Subject: [Rd] strsplit convert data
Message-ID: <1319452277838-3932704.post@n4.nabble.com>


I am using the following code but I do not know the debug and run for
 correct errors

 library (tcltk)


 file <-tclvalue (tkgetOpenFile ())
   if (nchar (file))
   {
     tkmessageBox ("Select the file")
   }
 else
   {
     tkmessageBox (message = paste ("Was select file", file))
     Dataset <- read.table (file, header = FALSE, sep = "", na.strings =
"NA", dec =".", strip.white = TRUE)
      Dataset
 }

 input <- readLine (Dataset)
 input
 close (Dataset)
 input <- gsub ('*','', input)
 in.s <- strsplit (input, '')
 id <- sort (unique (unlist (in.s)))

 # Create the output matrix
  output <- matrix (0, ncol = length (id), nrow = length (in.s))
  colNames (output) <- id

  for (i in seq_along (in.s)) {
      output [i, unlist (in.s [[i]])] <- 1
  }
  
 write.csv (output, file = res.csv)

 Thanks















--
View this message in context: http://r.789695.n4.nabble.com/strsplit-convert-data-tp3932704p3932704.html
Sent from the R devel mailing list archive at Nabble.com.


From evarist.planet at irbbarcelona.org  Mon Oct 24 15:04:18 2011
From: evarist.planet at irbbarcelona.org (Evarist Planet)
Date: Mon, 24 Oct 2011 15:04:18 +0200
Subject: [Rd] C function is wrong under Windows 7
Message-ID: <CAHXx1xOMrWpv63a85aOASXQD2yBQa01sL-4-+25UDhv0SkAaOA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111024/ff053b63/attachment.pl>

From asr at ufl.edu  Mon Oct 24 16:43:59 2011
From: asr at ufl.edu (Allen S. Rout)
Date: Mon, 24 Oct 2011 10:43:59 -0400
Subject: [Rd] RFC: 'igraph' package update and backward compatibility
In-Reply-To: <CABdHhvE6Db9-j9q5Or3Na3-KU+h1wNkFaH57rhDeBiXm5ritaw@mail.gmail.com>
References: <CABtg=KkMw9Yxk+pQWYkw9A1LLuCYqztAw027XSiteZmTCfpHJw@mail.gmail.com>	<CABdHhvEUeXmsQRQx4fax6WaVu31r4=-AkVmrzkqTKgOnFk+HoQ@mail.gmail.com>	<4EA04122.50707@gmail.com>
	<CABdHhvE6Db9-j9q5Or3Na3-KU+h1wNkFaH57rhDeBiXm5ritaw@mail.gmail.com>
Message-ID: <j83tjg$3v6$1@dough.gmane.org>

On 10/20/2011 11:57 AM, Hadley Wickham wrote:

> Generally, the absence of versioned dependencies makes it extremely
> difficult to aggressively improve the design of a package.

I think that aggressively varying a given packages' API would be
confusing to most users, and damage acceptance of the package.

No matter how implemented, the semantic work remains: if ggplot2 V0.89
has features I desire, I must re-examine all of my code in light of
all the changes between V0.80 and current.  Ugh.

I think that many folks desire to upgrade because of some process like
"Oh!  I see on the list that Hadley fixed [irritating inconvenience] I
was wrestling with.  I can now use [recent happy thing] on my code I
wrote last January.

Making that a difficult, thought-intensive process would, IMO, hurt more 
people than it would help.  By a lot.

> I can not easily remedy them without breaking large amounts of
> existing code or starting work on ggplot3.

My sense is that your position is unusual: you are doing original
research all up and down the stack of visualization, representation,
analysis...  This means that you have bona-fide new structures, which
would simply demand new APIs, with much greater frequency than many
coders.

Maybe the answer is to lower your internal resistance to revising the
package name?  This would accomplish your multiple-versioning cleanly,
and clearly communicate the immiscibility of the Old Code with the New
to your customer base.  You clearly see a large hump of work to be
done before you move to the new version, but you could give yourself
permission to rev it every.. what; year?  Two?

ggplot2012?   :)

- Allen S. Rout


From tlumley at uw.edu  Mon Oct 24 18:36:53 2011
From: tlumley at uw.edu (Thomas Lumley)
Date: Mon, 24 Oct 2011 09:36:53 -0700
Subject: [Rd] C function is wrong under Windows 7
In-Reply-To: <CAHXx1xOMrWpv63a85aOASXQD2yBQa01sL-4-+25UDhv0SkAaOA@mail.gmail.com>
References: <CAHXx1xOMrWpv63a85aOASXQD2yBQa01sL-4-+25UDhv0SkAaOA@mail.gmail.com>
Message-ID: <CAJ55+dKZmKfzdpFeo0NEOtceTER=5dPFM1QQaQBofe2yef=W7g@mail.gmail.com>

On Mon, Oct 24, 2011 at 6:04 AM, Evarist Planet
<evarist.planet at irbbarcelona.org> wrote:
> Dear mailing list,
>
> I have a C function that gives me a wrong result when I run it under Windows
> 7.

The fact that you extract pointers to the contents of fchr and sign
before coercing them to REALSXP is deeply suspicious to me, though I
admit I don't see how it causes the problem, since you don't use the
new versions, you don't overwrite them, and the old versions should
still be protected as arguments to the function.

> SEXP getEs(SEXP fchr, SEXP sign)
> {
> ?int i, nfchr, nsign;
> ?double *rfchr = REAL(fchr), *res;
> ?int *rsign = INTEGER(sign);
>
> ?PROTECT(fchr = coerceVector(fchr, REALSXP));
> ?PROTECT(sign = coerceVector(sign, REALSXP));
>
> ?nfchr = length(fchr);
> ?nsign = length(sign);
>
> ?SEXP es;
> ?PROTECT(es = allocVector(REALSXP, nfchr));
> ?res = REAL(es);
>
> ?double nr = getNr(rfchr, rsign, nsign);
>
> ?SEXP phit;
> ?PROTECT(phit = allocVector(REALSXP, nfchr));
> ?double *rphit;
> ?rphit = REAL(phit);
> ?for(i = 0; i < nfchr; i++) rphit[i] = 0.0;
> ?getPhit(rfchr, rsign, nsign, nr, rphit);
> ?cumsum(rphit, nfchr);
>
> ?SEXP pmiss;
> ?PROTECT(pmiss = allocVector(REALSXP, nfchr));
> ?double *rpmiss;
> ?rpmiss = REAL(pmiss);
> ?for(i = 0; i < nfchr; i++) rpmiss[i] = 0.0;
> ?getPmiss(rsign, nfchr, nsign, rpmiss);
> ?cumsum(rpmiss, nfchr);
>
> ?for (i = 0; i < nfchr; ++i) {
> ? res[i] = rphit[i] - rpmiss[i];
> ? }
>
> ?UNPROTECT(5);
> ?return es;
> }
>
> Could you please help me to find out what I am doing wrong?
>
> Many thanks in advance,
>
> --
> Evarist Planet
> Research officer, Bioinformatics and Biostatistics unit
> IRB Barcelona
> Tel (+34) 93 402 0553
> Fax (+34) 93 402 0257
>
> evarist.planet at irbbarcelona.org
> http://www.irbbarcelona.org/bioinformatics
>
> ? ? ? ?[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>



-- 
Thomas Lumley
Professor of Biostatistics
University of Auckland


From mtmorgan at fhcrc.org  Mon Oct 24 18:38:25 2011
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Mon, 24 Oct 2011 09:38:25 -0700
Subject: [Rd] C function is wrong under Windows 7
In-Reply-To: <CAHXx1xOMrWpv63a85aOASXQD2yBQa01sL-4-+25UDhv0SkAaOA@mail.gmail.com>
References: <CAHXx1xOMrWpv63a85aOASXQD2yBQa01sL-4-+25UDhv0SkAaOA@mail.gmail.com>
Message-ID: <4EA59481.6010209@fhcrc.org>

On 10/24/2011 06:04 AM, Evarist Planet wrote:
> Dear mailing list,
>
> I have a C function that gives me a wrong result when I run it under Windows

Hi Evarist --

It seems like this can be written reasonably efficiently in R?

getEs <-function(fchr, sign) {
     nfchr <- length(fchr)
     nsign <- length(sign)

     nr <- sum(abs(fchr[sign]))

     phit <- numeric(nfchr)
     phit[sign] <- abs(fchr[sign]) / nr
     phit <- cumsum(phit)

     pmiss <- numeric(nfchr)
     pmiss[-sign] <- 1 / (nfchr - nsign)
     pmiss <- cumsum(pmiss)

     phit - pmiss
}

es.c <- .Call('getEs',score,s,PACKAGE='phenoTest')
all.equal(es.c, getEs(score, s))

(for your C code, it would help to have a simple reproducible example 
that doesn't rely on phenoTest).

Martin

> 7.
>
> This is the code under Linux (RHEL5):
>> library(phenoTest)
>> data(epheno)
>> sign<- sample(featureNames(epheno))[1:20]
>> score<- getFc(epheno)[,1]
>> head(score)
> 1007_s_at   1053_at    117_at    121_at 1255_g_at   1294_at
> -1.183019  1.113544  1.186186 -1.034779 -1.044456 -1.023471
>> s<- which(names(score) %in% sign)
>> es.c<- .Call('getEs',score,s,PACKAGE='phenoTest')
>> head(es.c)
> [1] -0.001020408 -0.002040816 -0.003061224 -0.004081633 -0.005102041
> [6] -0.006122449
>> es.c<- .Call('getEs',score,s,PACKAGE='phenoTest')
>> head(es.c)
> [1] -0.001020408 -0.002040816 -0.003061224 -0.004081633 -0.005102041
> [6] -0.006122449
>> sessionInfo()
> R version 2.13.0 (2011-04-13)
> Platform: x86_64-redhat-linux-gnu (64-bit)
>
> locale:
> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> [5] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8
> [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
> [9] LC_ADDRESS=C               LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] phenoTest_1.1.1      RSQLite_0.8-4        DBI_0.2-5
> [4] Heatplus_1.22.0      annotate_1.30.1      AnnotationDbi_1.14.1
> [7] Biobase_2.12.2
>
> loaded via a namespace (and not attached):
> [1] affyio_1.20.0       biomaRt_2.8.1       Biostrings_2.21.6
> [4] Category_2.18.0     cluster_1.13.3      gdata_2.7.1
> [7] genefilter_1.34.0   gplots_2.10.1       graph_1.30.0
> [10] grid_2.13.0         GSEABase_1.14.0     gtools_2.6.2
> [13] hgu133a.db_2.5.0    Hmisc_3.8-3         hopach_2.12.0
> [16] IRanges_1.11.11     lattice_0.19-23     limma_3.8.3
> [19] Matrix_0.9996875-3  mgcv_1.7-5          nlme_3.1-100
> [22] oligoClasses_1.14.0 RBGL_1.22.0         RCurl_1.6-10
> [25] SNPchip_1.16.0      splines_2.13.0      survival_2.36-5
> [28] tools_2.13.0        XML_3.4-0           xtable_1.5-6
>
> As you see es.c is correct. I checked it doing the same computation with R.
> It also runs without problems under Mac. I run valgrind on the same piece of
> code and got no errors.
>
> This is the same piece of code under Windows 7:
>> library(phenoTest)
>> data(epheno)
>> sign<- sample(featureNames(epheno))[1:20]
>> score<- getFc(epheno)[,1]
>> head(score)
> 1007_s_at   1053_at    117_at    121_at 1255_g_at   1294_at
> -1.183019  1.113544  1.186186 -1.034779 -1.044456 -1.023471
>> s<- which(names(score) %in% sign)
>> es.c<- .Call('getEs',score,s,PACKAGE='phenoTest')
>> head(es.c)
> [1] 1.447208e+215 1.447208e+215 1.447208e+215 1.447208e+215 1.447208e+215
> 1.447208e+215
>> es.c<- .Call('getEs',score,s,PACKAGE='phenoTest')
>> head(es.c)
> [1] 3.176615e+170 3.176615e+170 3.176615e+170 3.176615e+170 3.176615e+170
> 3.176615e+170
>> sessionInfo()
>
> R version 2.14.0 alpha (2011-10-13 r57240)
> Platform: i386-pc-mingw32/i386 (32-bit)
>
> locale:
> [1] LC_COLLATE=Spanish_Spain.1252  LC_CTYPE=Spanish_Spain.1252
> [3] LC_MONETARY=Spanish_Spain.1252 LC_NUMERIC=C
> [5] LC_TIME=Spanish_Spain.1252
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] phenoTest_1.1.1       RSQLite_0.10.0        DBI_0.2-5
> [4] Heatplus_1.99.0       annotate_1.31.1       AnnotationDbi_1.15.36
> [7] Biobase_2.13.10
>
> loaded via a namespace (and not attached):
> [1] affyio_1.21.2        biomaRt_2.9.3        Biostrings_2.21.11
> [4] Category_2.19.1      cluster_1.14.0       gdata_2.8.2
> [7] genefilter_1.35.0    gplots_2.10.1        graph_1.31.2
> [10] grid_2.14.0          GSEABase_1.15.0      gtools_2.6.2
> [13] hgu133a.db_2.6.3     Hmisc_3.8-3          hopach_2.13.1
> [16] IRanges_1.11.31      lattice_0.19-33      limma_3.9.21
> [19] Matrix_1.0-0         mgcv_1.7-8           nlme_3.1-102
> [22] oligoClasses_1.15.56 RBGL_1.29.0          RCurl_1.6-10.1
> [25] SNPchip_1.17.0       splines_2.14.0       survival_2.36-10
> [28] tools_2.14.0         XML_3.4-2.2          xtable_1.6-0
> [31] zlibbioc_0.1.8
>
> es.c is not correct under Windows. It also gives a different result when i
> rerun the same function.
>
> This is the C code:
> #include "getEs.h"
> #include<R.h>
> #include<Rinternals.h>
>
> double absolute(double x)
> {
>   if (x<0)
>   return (-x);
>   else
>   return (x);
> }
>
> void cumsum(double *x, int len)
> {
>   int i;
>   for (i = 1; i<  len; ++i) {
>     *(x + i) = *(x + i) + *(x + i -1);
>   }
> }
>
> double getNr(double *fchr, int *sign, int signLen)
> {
>   int i;
>   double nr;
>   nr = 0.0;
>   for (i = 0; i<  signLen; ++i) {
>     nr = absolute(fchr[sign[i] -1]) + nr;
>     }
>   return nr;
> }
>
> void getPhit(double *fchr, int *sign, int signLen, double nr, double *phit)
> {
>   int i;
>   for (i = 0; i<  signLen; ++i) {
>     *(phit + sign[i]-1) = absolute(*(fchr + sign[i]-1)) / nr;
>     }
> }
>
> void getPmiss(int *sign, int fchrLen, int signLen, double *pmiss)
> {
>   int i;
>   double tmp = 1.0 / (fchrLen-signLen);
>   for (i = 0; i<  fchrLen; ++i) {
>     *(pmiss + i) = tmp;
>     }
>   for (i = 0; i<  signLen; ++i) {
>     *(pmiss + sign[i]-1) = 0;
>     }
> }
>
> SEXP getEs(SEXP fchr, SEXP sign)
> {
>   int i, nfchr, nsign;
>   double *rfchr = REAL(fchr), *res;
>   int *rsign = INTEGER(sign);
>
>   PROTECT(fchr = coerceVector(fchr, REALSXP));
>   PROTECT(sign = coerceVector(sign, REALSXP));
>
>   nfchr = length(fchr);
>   nsign = length(sign);
>
>   SEXP es;
>   PROTECT(es = allocVector(REALSXP, nfchr));
>   res = REAL(es);
>
>   double nr = getNr(rfchr, rsign, nsign);
>
>   SEXP phit;
>   PROTECT(phit = allocVector(REALSXP, nfchr));
>   double *rphit;
>   rphit = REAL(phit);
>   for(i = 0; i<  nfchr; i++) rphit[i] = 0.0;
>   getPhit(rfchr, rsign, nsign, nr, rphit);
>   cumsum(rphit, nfchr);
>
>   SEXP pmiss;
>   PROTECT(pmiss = allocVector(REALSXP, nfchr));
>   double *rpmiss;
>   rpmiss = REAL(pmiss);
>   for(i = 0; i<  nfchr; i++) rpmiss[i] = 0.0;
>   getPmiss(rsign, nfchr, nsign, rpmiss);
>   cumsum(rpmiss, nfchr);
>
>   for (i = 0; i<  nfchr; ++i) {
>     res[i] = rphit[i] - rpmiss[i];
>     }
>
>   UNPROTECT(5);
>   return es;
> }
>
> Could you please help me to find out what I am doing wrong?
>
> Many thanks in advance,
>
> --
> Evarist Planet
> Research officer, Bioinformatics and Biostatistics unit
> IRB Barcelona
> Tel (+34) 93 402 0553
> Fax (+34) 93 402 0257
>
> evarist.planet at irbbarcelona.org
> http://www.irbbarcelona.org/bioinformatics
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Computational Biology
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N. PO Box 19024 Seattle, WA 98109

Location: M1-B861
Telephone: 206 667-2793


From tlumley at uw.edu  Mon Oct 24 18:41:14 2011
From: tlumley at uw.edu (Thomas Lumley)
Date: Mon, 24 Oct 2011 09:41:14 -0700
Subject: [Rd] droplevels: drops contrasts as well
In-Reply-To: <F54EF8F1B477CF448729593FE421F646645E50@HQVEVE0032.nestle.com>
References: <F54EF8F1B477CF448729593FE421F646645E50@HQVEVE0032.nestle.com>
Message-ID: <CAJ55+d+41EsjF0_PsjJcsFX2xc6-BFvbZZyOkOFjLg4yEpDn1Q@mail.gmail.com>

On Fri, Oct 21, 2011 at 5:57 AM, Thaler, Thorn, LAUSANNE, Applied
Mathematics <Thorn.Thaler at rdls.nestle.com> wrote:
> Dear all,
>
> Today I figured out that there is a neat function called droplevels,
> which, well, drops unused levels in a data frame. I tried the function
> with some of my data sets and it turned out that not only the unused
> levels were dropped but also the contrasts I set via "C". I had a look
> into the code, and this behaviour arises from the fact that droplevels
> uses simply factor to drop the unused levels, which uses the default
> contrasts as set by options("contrasts").
>
> I think this behaviour is annoying, because if one does not look
> carefully enough, one looses the contrasts silently. Hence may I suggest
> to change the code of droplevels to something like the following:

This silently changes the contrasts -- eg, if the first level of the
factor is one of the empty levels, the reference level used by
contr.treatment() will change.  Also, if the contrasts are a matrix
rather than specifying a contrast function, the matrix will be invalid
for the the new factor.

I think just having a warning would be better -- in general it's not
clear what (if anything) it means to have the same contrasts on
factors with different numbers of levels.

   -thomas

-- 
Thomas Lumley
Professor of Biostatistics
University of Auckland


From nalimilan at club.fr  Mon Oct 24 19:28:55 2011
From: nalimilan at club.fr (Milan Bouchet-Valat)
Date: Mon, 24 Oct 2011 19:28:55 +0200
Subject: [Rd] strsplit convert data
In-Reply-To: <1319452277838-3932704.post@n4.nabble.com>
References: <1319452277838-3932704.post@n4.nabble.com>
Message-ID: <1319477336.8217.1.camel@milan>

Le lundi 24 octobre 2011 ? 03:31 -0700, RMSOPS a ?crit :
> I am using the following code but I do not know the debug and run for
>  correct errors
> 
>  library (tcltk)
> 
> 
>  file <-tclvalue (tkgetOpenFile ())
>    if (nchar (file))
>    {
>      tkmessageBox ("Select the file")
>    }
>  else
>    {
>      tkmessageBox (message = paste ("Was select file", file))
>      Dataset <- read.table (file, header = FALSE, sep = "", na.strings =
> "NA", dec =".", strip.white = TRUE)
>       Dataset
>  }
> 
>  input <- readLine (Dataset)
>  input
>  close (Dataset)
>  input <- gsub ('*','', input)
>  in.s <- strsplit (input, '')
>  id <- sort (unique (unlist (in.s)))
> 
>  # Create the output matrix
>   output <- matrix (0, ncol = length (id), nrow = length (in.s))
>   colNames (output) <- id
> 
>   for (i in seq_along (in.s)) {
>       output [i, unlist (in.s [[i]])] <- 1
>   }
>   
>  write.csv (output, file = res.csv)
Hm, that code triggers many errors. What's the problem you'd like help
on? You can't reasonably expect people to fix all of your code... ;-)


From ricardosousa2000 at clix.pt  Tue Oct 25 00:34:00 2011
From: ricardosousa2000 at clix.pt (RMSOPS)
Date: Mon, 24 Oct 2011 15:34:00 -0700 (PDT)
Subject: [Rd] strsplit convert data
In-Reply-To: <1319477336.8217.1.camel@milan>
References: <1319452277838-3932704.post@n4.nabble.com>
	<1319477336.8217.1.camel@milan>
Message-ID: <1319495640961-3934808.post@n4.nabble.com>


Hello

   To be more specific, my problem is here
 Line <-dataset $ Items [i]
   print (line)
   in.s <- strsplit (line, '')

 I am reading lines from a file
 Line 1 A, B, C, D, G
 Line 2 A, C, E,
 ...
 line n F, G

 the problem is that I can not make the split of the comma, so I can not get
the
 output
      A B C D E F G O
 [1,] 1 1 1 1 1 0 0 0
 [2,] 1 0 1 0 1 0 0 1
 [n] 0 0 0 0 0 1 1 0















--
View this message in context: http://r.789695.n4.nabble.com/strsplit-convert-data-tp3932704p3934808.html
Sent from the R devel mailing list archive at Nabble.com.


From bibiko at eva.mpg.de  Tue Oct 25 01:04:46 2011
From: bibiko at eva.mpg.de (=?iso-8859-1?Q?Hans-J=F6rg_Bibiko?=)
Date: Tue, 25 Oct 2011 01:04:46 +0200
Subject: [Rd] strsplit convert data
In-Reply-To: <1319495640961-3934808.post@n4.nabble.com>
References: <1319452277838-3932704.post@n4.nabble.com>
	<1319477336.8217.1.camel@milan>
	<1319495640961-3934808.post@n4.nabble.com>
Message-ID: <D79B01D9-051E-4833-B155-39B97CAF4AC0@eva.mpg.de>

On 25 Oct 2011, at 00:34, RMSOPS wrote:
>   To be more specific, my problem is here
> Line <-dataset $ Items [i]
>   print (line)
>   in.s <- strsplit (line, '')
> 
> I am reading lines from a file
> Line 1 A, B, C, D, G
> Line 2 A, C, E,
> ...
> line n F, G
> 
> the problem is that I can not make the split of the comma, so I can not get
> the
> output
>      A B C D E F G O
> [1,] 1 1 1 1 1 0 0 0
> [2,] 1 0 1 0 1 0 0 1
> [n] 0 0 0 0 0 1 1 0

Hi,

hmm, to be honest I didn't get your point yet but let me try.

If you read lines like :

"A, B, C, D, G" etc.

then you can split them by using:

strsplit(line, ', *')
[1] "A" "B" "C" "D" "G"

[', *' is a regular expression to match a "," followed by 0 or more spaces]

Then next issue I see here is that you create num times output matrices in your for loop "for(i in 1:num)" and overwrite the file res.csv all the time. Either you know in beforehand which columns could appear (and how many rows) then you can create your matrix before that loop or you should go with cbind() and rbind() resp. or similar.


Hope that helps a bit,
--Hans

From Thorn.Thaler at rdls.nestle.com  Tue Oct 25 09:26:05 2011
From: Thorn.Thaler at rdls.nestle.com (Thaler, Thorn, LAUSANNE,
	Applied Mathematics)
Date: Tue, 25 Oct 2011 09:26:05 +0200
Subject: [Rd] droplevels: drops contrasts as well
In-Reply-To: <CAJ55+d+41EsjF0_PsjJcsFX2xc6-BFvbZZyOkOFjLg4yEpDn1Q@mail.gmail.com>
References: <F54EF8F1B477CF448729593FE421F646645E50@HQVEVE0032.nestle.com>
	<CAJ55+d+41EsjF0_PsjJcsFX2xc6-BFvbZZyOkOFjLg4yEpDn1Q@mail.gmail.com>
Message-ID: <F54EF8F1B477CF448729593FE421F646645F7C@HQVEVE0032.nestle.com>

> > I think this behaviour is annoying, because if one does not look
> > carefully enough, one looses the contrasts silently. Hence may I
> suggest
> > to change the code of droplevels to something like the following:
> 
> This silently changes the contrasts -- eg, if the first level of the
> factor is one of the empty levels, the reference level used by
> contr.treatment() will change.  Also, if the contrasts are a matrix
> rather than specifying a contrast function, the matrix will be invalid
> for the the new factor.

Well, you are right and while I'm not so much concerned about the first
issue you've outlined (the change in the baseline - I think if I decide
to drop unused levels, I'm aware that a non-existing level cannot be the
baseline any more), the second point is clearly an issue I've
overlooked. 

> I think just having a warning would be better -- in general it's not
> clear what (if anything) it means to have the same contrasts on
> factors with different numbers of levels.

Would be an option. I think this should be the minimum. Still, I think a
behaviour like:
1.) if contrasts are defined as matrix issue a warning and use default
contrasts (that is nothing changes as compared to now, but that a
warning is issued)
2.) if the contrasts are defined as a function, use the function for
re-computing the contrasts.

would be more desirable, as contrasts can be seen as a general setting
of how coefficients should be interpreted too (e.g. for a balanced data
set with sum "contrasts", the intercept corresponds to the overall mean,
beta1 to the difference of the overall mean and group 1 and so on),
rather than looking at them from the literal point of view (e.g. "I want
to compare level A vs level B & C"). While from the latter point of view
I agree that the same contrasts on factors with different numbers of
levels are not really meaningful, I still see the benefit if I take the
other point of view: If I drop a level, I may be still interested in
comparing the overall mean with the group means bearing in mind that
maybe some groups are not present any more in the data set.

Do you see my point? However, it is not the biggest issue, as one can
change the contrasts rather easily oneself, but I think at least some
information/warning should be issued that the old contrasts are not used
any more.


KR,

-Thorn


> 
> 
>    -thomas
> 
> --
> Thomas Lumley
> Professor of Biostatistics
> University of Auckland


From mark.heckmann at gmx.de  Tue Oct 25 11:21:27 2011
From: mark.heckmann at gmx.de (Mark Heckmann)
Date: Tue, 25 Oct 2011 11:21:27 +0200
Subject: [Rd] R fails when converting units using Hershey-Fonts
Message-ID: <7E039D56-F37A-4D54-8461-BAADFDFB649C@gmx.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111025/501ecc32/attachment.pl>

From ricardosousa2000 at clix.pt  Tue Oct 25 14:59:04 2011
From: ricardosousa2000 at clix.pt (RMSOPS)
Date: Tue, 25 Oct 2011 05:59:04 -0700 (PDT)
Subject: [Rd] strsplit convert data
In-Reply-To: <D79B01D9-051E-4833-B155-39B97CAF4AC0@eva.mpg.de>
References: <1319452277838-3932704.post@n4.nabble.com>
	<1319477336.8217.1.camel@milan>
	<1319495640961-3934808.post@n4.nabble.com>
	<D79B01D9-051E-4833-B155-39B97CAF4AC0@eva.mpg.de>
Message-ID: <1319547544761-3936661.post@n4.nabble.com>

Hello Hans,

Thanks for the reply, 

already changed and it gives me the following error

Error in strsplit(line, ",*") : non-character argument

#dataset read file
dataset 
num<-nrow(dataset) 
num 

#results
> dataset
    A.B
1 A,B,D
2   F,G
3 A,B,E
4   F,G
5   E,H
6   A,E
7   E,H
8 A,B,C
9   E,H
> num<-nrow(dataset)
> num
[1] 9

#


#read lines in the file 
for(i in 1:num) 
{ 
  line<-dataset$Items[i] 
  print(line) 
  line<-dataset$Items[i]
*  in.s <- strsplit(line, ', *')*
  d <- sort (unique (unlist (in.s))) 

 # Create the output matrix 
  output <- matrix (0, ncol = length (id), nrow = length (in.s)) 
  colNames (output) <- id 

  for (i in seq_along (in.s)) { 
      output [i, unlist (in.s [[i]])] <- 1 
  } 

the idea was to create a cycle matrix.
 columns have the set of items (A ... B)
 rows of the matrix (output) and the value 1 if present and 0 if the line is
not present.

--
View this message in context: http://r.789695.n4.nabble.com/strsplit-convert-data-tp3932704p3936661.html
Sent from the R devel mailing list archive at Nabble.com.


From bibiko at eva.mpg.de  Tue Oct 25 15:08:08 2011
From: bibiko at eva.mpg.de (=?iso-8859-1?Q?Hans-J=F6rg_Bibiko?=)
Date: Tue, 25 Oct 2011 15:08:08 +0200
Subject: [Rd] strsplit convert data
In-Reply-To: <1319547544761-3936661.post@n4.nabble.com>
References: <1319452277838-3932704.post@n4.nabble.com>
	<1319477336.8217.1.camel@milan>
	<1319495640961-3934808.post@n4.nabble.com>
	<D79B01D9-051E-4833-B155-39B97CAF4AC0@eva.mpg.de>
	<1319547544761-3936661.post@n4.nabble.com>
Message-ID: <0294B86E-1A40-4BE9-B72B-AC31F8B23DB7@eva.mpg.de>


On 25 Oct 2011, at 14:59, RMSOPS wrote:

> Error in strsplit(line, ",*") : non-character argument

I wrote strsplit(line, ", *")

a " " [space] between , and * !!

Cheers,
--Hans


From jorismeys at gmail.com  Tue Oct 25 15:26:10 2011
From: jorismeys at gmail.com (Joris Meys)
Date: Tue, 25 Oct 2011 15:26:10 +0200
Subject: [Rd] strsplit convert data
In-Reply-To: <1319547544761-3936661.post@n4.nabble.com>
References: <1319452277838-3932704.post@n4.nabble.com>
	<1319477336.8217.1.camel@milan>
	<1319495640961-3934808.post@n4.nabble.com>
	<D79B01D9-051E-4833-B155-39B97CAF4AC0@eva.mpg.de>
	<1319547544761-3936661.post@n4.nabble.com>
Message-ID: <CAO1zAVZRDRxn1yKg1zW9SjR2zFK2D5i0WVSp_9PvUcgcNfHB3g@mail.gmail.com>

This is a question for R-Help, not for R-devel by all means. You're
lucky to get an answer, but please use the right channels in the
future.

Cheers
Joris

On Tue, Oct 25, 2011 at 2:59 PM, RMSOPS <ricardosousa2000 at clix.pt> wrote:
> Hello Hans,
>
> Thanks for the reply,
>
> already changed and it gives me the following error
>
> Error in strsplit(line, ",*") : non-character argument
>
> #dataset read file
> dataset
> num<-nrow(dataset)
> num
>
> #results
>> dataset
> ? ?A.B
> 1 A,B,D
> 2 ? F,G
> 3 A,B,E
> 4 ? F,G
> 5 ? E,H
> 6 ? A,E
> 7 ? E,H
> 8 A,B,C
> 9 ? E,H
>> num<-nrow(dataset)
>> num
> [1] 9
>
> #
>
>
> #read lines in the file
> for(i in 1:num)
> {
> ?line<-dataset$Items[i]
> ?print(line)
> ?line<-dataset$Items[i]
> * ?in.s <- strsplit(line, ', *')*
> ?d <- sort (unique (unlist (in.s)))
>
> ?# Create the output matrix
> ?output <- matrix (0, ncol = length (id), nrow = length (in.s))
> ?colNames (output) <- id
>
> ?for (i in seq_along (in.s)) {
> ? ? ?output [i, unlist (in.s [[i]])] <- 1
> ?}
>
> the idea was to create a cycle matrix.
> ?columns have the set of items (A ... B)
> ?rows of the matrix (output) and the value 1 if present and 0 if the line is
> not present.
>
> --
> View this message in context: http://r.789695.n4.nabble.com/strsplit-convert-data-tp3932704p3936661.html
> Sent from the R devel mailing list archive at Nabble.com.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>



-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Mathematical Modelling, Statistics and Bio-Informatics

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


From simon.urbanek at r-project.org  Tue Oct 25 17:48:43 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 25 Oct 2011 11:48:43 -0400
Subject: [Rd] R fails when converting units using Hershey-Fonts
In-Reply-To: <7E039D56-F37A-4D54-8461-BAADFDFB649C@gmx.de>
References: <7E039D56-F37A-4D54-8461-BAADFDFB649C@gmx.de>
Message-ID: <465FF9BA-3A06-4367-9BFE-6DDDB3770260@r-project.org>

Thanks, now fixed.
Simon


On Oct 25, 2011, at 5:21 AM, Mark Heckmann wrote:

> I run into some problems when trying to convert units using Hershey-Fonts: R chrashes.
> 
>> library(grid)
>> label <- "some text"
>> pushViewport(viewport(gp=gpar(fontfamily="HersheySerif")))
>> convertHeight(stringHeight(label), unitTo="mm")              
> 
> *** caught segfault ***
> address 0xadc838f8, cause 'memory not mapped'
> 
> Traceback:
> 1: .Call(fnname, ..., PACKAGE = "grid")
> 2: grid.Call("L_convert", x, as.integer(whatfrom), as.integer(whatto),     valid.units(unitTo))
> 3: convertUnit(x, unitTo, "y", "dimension", "y", "dimension", valueOnly = valueOnly)
> 4: convertHeight(stringHeight(label), unitTo = "mm")
> 
> Possible actions:
> 1: abort (with core dump, if enabled)
> 2: normal R exit
> 3: exit R without saving workspace
> 4: exit R saving workspace
> 
> 
> System: MacOS 10.6.4
> R version 2.13.2 (2011-09-30)
> Platform: i386-apple-darwin9.8.0/i386 (32-bit)
> 
> ???????????????????????????????????????
> Mark Heckmann
> Blog: www.markheckmann.de
> R-Blog: http://ryouready.wordpress.com
> 
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From mtmorgan at fhcrc.org  Tue Oct 25 20:57:42 2011
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Tue, 25 Oct 2011 11:57:42 -0700
Subject: [Rd] Windows download.file sometimes pauses / truncates large files
Message-ID: <4EA706A6.2080106@fhcrc.org>

With

C:\Users\User>R --version
R version 2.14.0 RC (2011-10-23 r57410)
Copyright (C) 2011 The R Foundation for Statistical Computing
ISBN 3-900051-07-0
Platform: x86_64-pc-mingw32/x64 (64-bit)

running

download.file('http://www.ebi.ac.uk/microarray-as/ae/files/E-TABM-25/E-TABM-25.raw.1.zip', 
tempfile())

sometimes gets 52% (according to the dialog box) of the way through, and 
then pauses or, when running R CMD check, truncates (see 
http://bioconductor.org/checkResults/devel/bioc-LATEST/ArrayExpress/moscato1-checksrc.html).

I tried options(internet.info=0, timeout=600), without effect; the 
messages from internet.info are the same on successful and failed downloads.

Thank you,

Martin
-- 
Computational Biology
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N. PO Box 19024 Seattle, WA 98109

Location: M1-B861
Telephone: 206 667-2793


From stefan.theussl at wu.ac.at  Tue Oct 25 21:11:44 2011
From: stefan.theussl at wu.ac.at (Stefan Theussl)
Date: Tue, 25 Oct 2011 21:11:44 +0200
Subject: [Rd] CRAN Master Server Upgrade - Advance Notice
Message-ID: <4EA709F0.8010800@wu.ac.at>

To all CRAN-users/uploaders/mirror-Providers: The CRAN master server 
will be upgraded on Nov., 2nd.

Technology never stands still, so there comes a point when we need to 
upgrade our hardware to keep up with todays market.

At the moment we are migrating data to the new server and test it as 
best as possible. The server will provide exactly the same content that 
CRAN already provides, but faster, and hopefully saver and better.

The move is being done for several reasons:
- There is better hardware technology available.
- Better technology means faster processing to meet the requirements.
- Hardware devices have a finite life.

The move will take place on Nov.,2nd in the afternoon (~2pm EST). Thus 
keep in mind that the web and ftp service will not be available at that 
time.

Best regards,
CRAN staff


From mtmorgan at fhcrc.org  Tue Oct 25 22:37:10 2011
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Tue, 25 Oct 2011 13:37:10 -0700
Subject: [Rd] Windows download.file sometimes pauses / truncates large
 files
In-Reply-To: <12112_1319569106_4EA706D2_12112_16688_2_4EA706A6.2080106@fhcrc.org>
References: <12112_1319569106_4EA706D2_12112_16688_2_4EA706A6.2080106@fhcrc.org>
Message-ID: <4EA71DF6.4080003@fhcrc.org>

On 10/25/2011 11:57 AM, Martin Morgan wrote:
> With
>
> C:\Users\User>R --version
> R version 2.14.0 RC (2011-10-23 r57410)
> Copyright (C) 2011 The R Foundation for Statistical Computing
> ISBN 3-900051-07-0
> Platform: x86_64-pc-mingw32/x64 (64-bit)
>
> running
>
> download.file('http://www.ebi.ac.uk/microarray-as/ae/files/E-TABM-25/E-TABM-25.raw.1.zip',
> tempfile())
>
> sometimes gets 52% (according to the dialog box) of the way through, and
> then pauses or, when running R CMD check, truncates (see
> http://bioconductor.org/checkResults/devel/bioc-LATEST/ArrayExpress/moscato1-checksrc.html).
>
>
> I tried options(internet.info=0, timeout=600), without effect; the
> messages from internet.info are the same on successful and failed
> downloads.

I'll rescind this; it is not an R-specific problem.

>
> Thank you,
>
> Martin


-- 
Computational Biology
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N. PO Box 19024 Seattle, WA 98109

Location: M1-B861
Telephone: 206 667-2793


From valentin.todorov at chello.at  Tue Oct 25 23:34:21 2011
From: valentin.todorov at chello.at (Valentin Todorov)
Date: Tue, 25 Oct 2011 14:34:21 -0700 (PDT)
Subject: [Rd] R CMD build - will reset the timestamps of all files in a
 package
In-Reply-To: <BANLkTimC_Mb3FaseNavHqWmrJ3hSKnACkA@mail.gmail.com>
References: <BANLkTimC_Mb3FaseNavHqWmrJ3hSKnACkA@mail.gmail.com>
Message-ID: <1319578461080-3938360.post@n4.nabble.com>

After half a year of silence on this issue I would dare ask again: is this
intended, why and how can I avoid it?

Best regards,
Valentin


...
I wonder why (R version 2.13.0 and after) the command "R CMD build"
sets the timestamp of all files in the package to the current
date/time. This seems not to be mentioned in the list of changes. Is
there an option to avoid this?
...
______________________________________________
R-devel@ mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel



--
View this message in context: http://r.789695.n4.nabble.com/R-CMD-build-will-reset-the-timestamps-of-all-files-in-a-package-tp3492257p3938360.html
Sent from the R devel mailing list archive at Nabble.com.


From maechler at stat.math.ethz.ch  Wed Oct 26 09:16:29 2011
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 26 Oct 2011 09:16:29 +0200
Subject: [Rd] R CMD build - will reset the timestamps of all files in a
 package
In-Reply-To: <1319578461080-3938360.post@n4.nabble.com>
References: <BANLkTimC_Mb3FaseNavHqWmrJ3hSKnACkA@mail.gmail.com>
	<1319578461080-3938360.post@n4.nabble.com>
Message-ID: <20135.46029.155473.435795@stat.math.ethz.ch>

>>>>> Valentin Todorov <valentin.todorov at chello.at>
>>>>>     on Tue, 25 Oct 2011 14:34:21 -0700 writes:

    > After half a year of silence on this issue I would dare
    > ask again: is this intended, why and how can I avoid it?

    > Best regards, Valentin


    > ...  I wonder why (R version 2.13.0 and after) the command
    > "R CMD build" sets the timestamp of all files in the
    > package to the current date/time. This seems not to be
    > mentioned in the list of changes. Is there an option to
    > avoid this?  ...

Yes, upgrade to R 2.14.0 (now in "RC" = Release Candidate state)
or newer (and don't use Windows).
The 'NEWS' entry is

    ? R CMD build on a Unix-alike (only) now tries to preserve dates on
      files it copies from its input directory.  (This was the
      undocumented behaviour prior to R 2.13.0.)

Best regards,
and thanks for persevering ( and *NO thanks* for using Nabble :-( )

Martin


From maechler at stat.math.ethz.ch  Wed Oct 26 09:20:45 2011
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 26 Oct 2011 09:20:45 +0200
Subject: [Rd] strsplit convert data
In-Reply-To: <CAO1zAVZRDRxn1yKg1zW9SjR2zFK2D5i0WVSp_9PvUcgcNfHB3g@mail.gmail.com>
References: <1319452277838-3932704.post@n4.nabble.com>
	<1319477336.8217.1.camel@milan>
	<1319495640961-3934808.post@n4.nabble.com>
	<D79B01D9-051E-4833-B155-39B97CAF4AC0@eva.mpg.de>
	<1319547544761-3936661.post@n4.nabble.com>
	<CAO1zAVZRDRxn1yKg1zW9SjR2zFK2D5i0WVSp_9PvUcgcNfHB3g@mail.gmail.com>
Message-ID: <20135.46285.479673.800315@stat.math.ethz.ch>

>>>>> Joris Meys <jorismeys at gmail.com>
>>>>>     on Tue, 25 Oct 2011 15:26:10 +0200 writes:

    > This is a question for R-Help, not for R-devel by all
    > means. You're lucky to get an answer, but please use the
    > right channels in the future.

Yes indeed!

{@ others: do not help in such cases;  R-devel is *not* for such questions!}

Martin Maechler
(as  'mailing lists @r-project.org'  site administrator).

    > Cheers Joris


From Thierry.ONKELINX at inbo.be  Wed Oct 26 11:46:43 2011
From: Thierry.ONKELINX at inbo.be (ONKELINX, Thierry)
Date: Wed, 26 Oct 2011 09:46:43 +0000
Subject: [Rd] Error message library()
Message-ID: <AA818EAD2576BC488B4F623941DA74275556099D@inbomail.inbo.be>

Dear all,

When one tries to load a non-installed package you get the error: 

Error in library(xyz) : there is no package called 'xyz'

I noticed on several occasions that this puzzles beginners. Therefore I suggest to change the error description in:

Error in library(xyz) : there is no package called 'xyz' installed on this machine. Check the name of the package or use install.packages("xyz") to install it.

Best regards,

Thierry

----------------------------------------------------------------------------
ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek
team Biometrie & Kwaliteitszorg
Gaverstraat 4
9500 Geraardsbergen
Belgium

Research Institute for Nature and Forest
team Biometrics & Quality Assurance
Gaverstraat 4
9500 Geraardsbergen
Belgium

tel. + 32 54/436 185
Thierry.Onkelinx at inbo.be
www.inbo.be

To call in the statistician after the experiment is done may be no more than asking him to perform a post-mortem examination: he may be able to say what the experiment died of.
~ Sir Ronald Aylmer Fisher

The plural of anecdote is not data.
~ Roger Brinner

The combination of some data and an aching desire for an answer does not ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey


From manuel.lopez-ibanez at ulb.ac.be  Wed Oct 26 16:49:32 2011
From: manuel.lopez-ibanez at ulb.ac.be (=?ISO-8859-1?Q?Manuel_L=F3pez-Ib=E1=F1ez?=)
Date: Wed, 26 Oct 2011 16:49:32 +0200
Subject: [Rd] typo in hcl.Rd
Message-ID: <4EA81DFC.2070705@ulb.ac.be>

This doesn't seem important enough to create a bug report.

Apply to http://svn.r-project.org/R/trunk/src/library/grDevices/man/hcl.Rd


Cheers,
	Manuel.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: fix-hcl.Rd.diff
Type: text/x-diff
Size: 405 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111026/062887ad/attachment.bin>

From murdoch.duncan at gmail.com  Wed Oct 26 17:20:44 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 26 Oct 2011 11:20:44 -0400
Subject: [Rd] typo in hcl.Rd
In-Reply-To: <4EA81DFC.2070705@ulb.ac.be>
References: <4EA81DFC.2070705@ulb.ac.be>
Message-ID: <4EA8254C.9040405@gmail.com>

On 26/10/2011 10:49 AM, Manuel L?pez-Ib??ez wrote:
> This doesn't seem important enough to create a bug report.
>
> Apply to http://svn.r-project.org/R/trunk/src/library/grDevices/man/hcl.Rd
>

Thanks, will do.

Duncan Murdoch


From nalimilan at club.fr  Wed Oct 26 12:49:16 2011
From: nalimilan at club.fr (Milan Bouchet-Valat)
Date: Wed, 26 Oct 2011 12:49:16 +0200
Subject: [Rd] Error message library()
In-Reply-To: <AA818EAD2576BC488B4F623941DA74275556099D@inbomail.inbo.be>
References: <AA818EAD2576BC488B4F623941DA74275556099D@inbomail.inbo.be>
Message-ID: <1319626156.18216.15.camel@milan>

Le mercredi 26 octobre 2011 ? 09:46 +0000, ONKELINX, Thierry a ?crit :
> Dear all,
> 
> When one tries to load a non-installed package you get the error: 
> 
> Error in library(xyz) : there is no package called 'xyz'
> 
> I noticed on several occasions that this puzzles beginners. Therefore
> I suggest to change the error description in:
> 
> Error in library(xyz) : there is no package called 'xyz' installed on
> this machine. Check the name of the package or use
> install.packages("xyz") to install it.
Couldn't R even directly ask for installing if it exists on CRAN? Like:
Error in library(xyz) : package 'xyz' is not installed on this machine.
Do you want to install it? [Y/n]

Regards


From simon.urbanek at r-project.org  Wed Oct 26 18:34:54 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 26 Oct 2011 12:34:54 -0400
Subject: [Rd] Error message library()
In-Reply-To: <1319626156.18216.15.camel@milan>
References: <AA818EAD2576BC488B4F623941DA74275556099D@inbomail.inbo.be>
	<1319626156.18216.15.camel@milan>
Message-ID: <1EE3E368-AEF7-450C-9331-234A7CBEAE4E@r-project.org>


On Oct 26, 2011, at 6:49 AM, Milan Bouchet-Valat wrote:

> Le mercredi 26 octobre 2011 ? 09:46 +0000, ONKELINX, Thierry a ?crit :
>> Dear all,
>> 
>> When one tries to load a non-installed package you get the error: 
>> 
>> Error in library(xyz) : there is no package called 'xyz'
>> 
>> I noticed on several occasions that this puzzles beginners. Therefore
>> I suggest to change the error description in:
>> 
>> Error in library(xyz) : there is no package called 'xyz' installed on
>> this machine. Check the name of the package or use
>> install.packages("xyz") to install it.
> Couldn't R even directly ask for installing if it exists on CRAN? Like:
> Error in library(xyz) : package 'xyz' is not installed on this machine.
> Do you want to install it? [Y/n]
> 

Please, no! We don't want to enter the realm of the computer assuming it knows what you want to do (which is becoming too common nowadays, unfortunately, making the interaction more and more annoying). For some users this error simply means that they mistyped the package name, so fetching CRAN repos on that behalf ranges somewhere between overkill and stupidity. If the user can't type install.packages() then I am certainly not confident that the user can use R for any reasonable data analysis.

Cheers,
Simon


From nalimilan at club.fr  Wed Oct 26 19:05:11 2011
From: nalimilan at club.fr (Milan Bouchet-Valat)
Date: Wed, 26 Oct 2011 19:05:11 +0200
Subject: [Rd] Error message library()
In-Reply-To: <1EE3E368-AEF7-450C-9331-234A7CBEAE4E@r-project.org>
References: <AA818EAD2576BC488B4F623941DA74275556099D@inbomail.inbo.be>
	<1319626156.18216.15.camel@milan>
	<1EE3E368-AEF7-450C-9331-234A7CBEAE4E@r-project.org>
Message-ID: <1319648716.18216.38.camel@milan>

Le mercredi 26 octobre 2011 ? 12:34 -0400, Simon Urbanek a ?crit :
> Please, no! We don't want to enter the realm of the computer assuming
> it knows what you want to do (which is becoming too common nowadays,
> unfortunately, making the interaction more and more annoying). For
> some users this error simply means that they mistyped the package
> name, so fetching CRAN repos on that behalf ranges somewhere between
> overkill and stupidity.
If we need to connect to CRAN to do that, I indeed withdraw my
suggestion. I had in mind a feature that's present in Bash in some
recent Linux distributions: when a program doesn't exist on the system,
tell the user in what package it can be found (it also detects typos in
program names).

> If the user can't type install.packages() then I am certainly not
> confident that the user can use R for any reasonable data analysis.
There's certainly some truth in your statement. ;-)

OTOH it seems package authors have tried raising the barrier to a quite
high level, and even when knowing what you do, you can get the package
names wrong. Consider for example :
Snowball, but snow and snowfall
rJava and rJython, but RODBC and RWeka
(not to pick on Kurt at all, there are many other examples, but I'm
mainly using these - great - packages)

Maybe a less controversial improvement would be to ask "Did you mean
XXX?" if a package with a very similar name is *installed*. That
wouldn't require fetching information from CRAN, and would most of the
time be helpful (people install packages they use).


Regards


From simon.urbanek at r-project.org  Wed Oct 26 19:24:48 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 26 Oct 2011 13:24:48 -0400
Subject: [Rd] Error message library()
In-Reply-To: <1319648716.18216.38.camel@milan>
References: <AA818EAD2576BC488B4F623941DA74275556099D@inbomail.inbo.be>
	<1319626156.18216.15.camel@milan>
	<1EE3E368-AEF7-450C-9331-234A7CBEAE4E@r-project.org>
	<1319648716.18216.38.camel@milan>
Message-ID: <DB47B86B-78EE-49B5-A80D-DF770A2222DB@r-project.org>


On Oct 26, 2011, at 1:05 PM, Milan Bouchet-Valat wrote:

> Le mercredi 26 octobre 2011 ? 12:34 -0400, Simon Urbanek a ?crit :
>> Please, no! We don't want to enter the realm of the computer assuming
>> it knows what you want to do (which is becoming too common nowadays,
>> unfortunately, making the interaction more and more annoying). For
>> some users this error simply means that they mistyped the package
>> name, so fetching CRAN repos on that behalf ranges somewhere between
>> overkill and stupidity.
> If we need to connect to CRAN to do that, I indeed withdraw my
> suggestion. I had in mind a feature that's present in Bash in some
> recent Linux distributions: when a program doesn't exist on the system,
> tell the user in what package it can be found (it also detects typos in
> program names).
> 

Yes, and that thing drives me crazy so the first thing I do on Ubuntu is to remove it (which is not as easy as it should due to a bug in the bash script as it turns out - another story :P). In 99% of cases it's useless since the suggestions are based on typos ...


>> If the user can't type install.packages() then I am certainly not
>> confident that the user can use R for any reasonable data analysis.
> There's certainly some truth in your statement. ;-)
> 
> OTOH it seems package authors have tried raising the barrier to a quite
> high level, and even when knowing what you do, you can get the package
> names wrong. Consider for example :
> Snowball, but snow and snowfall
> rJava and rJython, but RODBC and RWeka
> (not to pick on Kurt at all, there are many other examples, but I'm
> mainly using these - great - packages)
> 

Well, seeing one of my packages on the list I have to say that there were good reasons, albeit they may not be known to the user, especially since the reasons may be obsolete by now.


> Maybe a less controversial improvement would be to ask "Did you mean
> XXX?" if a package with a very similar name is *installed*. That
> wouldn't require fetching information from CRAN, and would most of the
> time be helpful (people install packages they use).
> 

Yes, that could be an optional feature -- I do want to stress the *optional* in the sentence, though.

BTW: an ever more intuitive solution (IMHO) would be to auto-complete package names in library( ... Deepayan? ;) That is non-intrusive and in line with the general use of R.

Cheers,
Simon


> 
> Regards
> 
> 


From kw.stat at gmail.com  Wed Oct 26 20:13:24 2011
From: kw.stat at gmail.com (Kevin Wright)
Date: Wed, 26 Oct 2011 13:13:24 -0500
Subject: [Rd] Error message library()
In-Reply-To: <AA818EAD2576BC488B4F623941DA74275556099D@inbomail.inbo.be>
References: <AA818EAD2576BC488B4F623941DA74275556099D@inbomail.inbo.be>
Message-ID: <CAKFxdiRsCm4zBsNsaMrhPaNwTbVY61ky3PMwaXqusH8Zr1oFKA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111026/b04d52ca/attachment.pl>

From hadley at rice.edu  Wed Oct 26 22:06:32 2011
From: hadley at rice.edu (Hadley Wickham)
Date: Thu, 27 Oct 2011 07:06:32 +1100
Subject: [Rd] Error message library()
In-Reply-To: <1EE3E368-AEF7-450C-9331-234A7CBEAE4E@r-project.org>
References: <AA818EAD2576BC488B4F623941DA74275556099D@inbomail.inbo.be>
	<1319626156.18216.15.camel@milan>
	<1EE3E368-AEF7-450C-9331-234A7CBEAE4E@r-project.org>
Message-ID: <CABdHhvFSy74UdHKNSswaom-QviFH6ugZY+yPQFdPcS0OXOiO+g@mail.gmail.com>

> Please, no! We don't want to enter the realm of the computer assuming it knows what you want to do (which is becoming too common nowadays, unfortunately, making the interaction more and more annoying). For some users this error simply means that they mistyped the package name, so fetching CRAN repos on that behalf ranges somewhere between overkill and stupidity. If the user can't type install.packages() then I am certainly not confident that the user can use R for any reasonable data analysis.

In that case, maybe a better message should be:

> library(xyz)
Error in library(xyz) : there is no package called 'xyz'.
Are you sure you are smart enough to use R?

;)

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From simon.urbanek at r-project.org  Wed Oct 26 22:35:03 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 26 Oct 2011 16:35:03 -0400
Subject: [Rd] Error message library()
In-Reply-To: <CABdHhvFSy74UdHKNSswaom-QviFH6ugZY+yPQFdPcS0OXOiO+g@mail.gmail.com>
References: <AA818EAD2576BC488B4F623941DA74275556099D@inbomail.inbo.be>
	<1319626156.18216.15.camel@milan>
	<1EE3E368-AEF7-450C-9331-234A7CBEAE4E@r-project.org>
	<CABdHhvFSy74UdHKNSswaom-QviFH6ugZY+yPQFdPcS0OXOiO+g@mail.gmail.com>
Message-ID: <30B68BF9-5FF5-4D7B-A4C2-E1B53112E621@r-project.org>


On Oct 26, 2011, at 4:06 PM, Hadley Wickham wrote:

>> Please, no! We don't want to enter the realm of the computer assuming it knows what you want to do (which is becoming too common nowadays, unfortunately, making the interaction more and more annoying). For some users this error simply means that they mistyped the package name, so fetching CRAN repos on that behalf ranges somewhere between overkill and stupidity. If the user can't type install.packages() then I am certainly not confident that the user can use R for any reasonable data analysis.
> 
> In that case, maybe a better message should be:
> 
>> library(xyz)
> Error in library(xyz) : there is no package called 'xyz'.
> Are you sure you are smart enough to use R?
> 
> ;)
> 

Unfortunately we are in code freeze, so it will only make it into 2.14.0 patched ... ;)

Cheers,
Simon


From proebuck at mdanderson.org  Thu Oct 27 17:52:21 2011
From: proebuck at mdanderson.org (Roebuck,Paul L)
Date: Thu, 27 Oct 2011 10:52:21 -0500
Subject: [Rd] Error message library()
In-Reply-To: <1319626156.18216.15.camel@milan>
Message-ID: <CACEE865.22FB0%proebuck@mdanderson.org>

On 10/26/11 5:49 AM, "Milan Bouchet-Valat" <nalimilan at club.fr> wrote:

> Le mercredi 26 octobre 2011 ? 09:46 +0000, ONKELINX, Thierry a ?crit :
>
>> When one tries to load a non-installed package you get the error:
>>
>> Error in library(xyz) : there is no package called 'xyz'
>>
>> I noticed on several occasions that this puzzles beginners. Therefore
>> I suggest to change the error description in:
>>
>> Error in library(xyz) : there is no package called 'xyz' installed on
>> this machine. Check the name of the package or
>> use
install.packages("xyz") to install it.
>
> Couldn't R even directly ask for installing if it exists on CRAN? Like:
> Error in library(xyz) : package 'xyz' is not installed on this machine.
> Do you want to install it? [Y/n]

I'd agree the message should be reworded, but prompting is overkill
for normal users.

Error in library(xyz) : package 'xyz' is not installed.

Nonetheless, Kevin Wright's function is interesting.


From ggrothendieck at gmail.com  Thu Oct 27 19:45:47 2011
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 27 Oct 2011 13:45:47 -0400
Subject: [Rd] Error message library()
In-Reply-To: <AA818EAD2576BC488B4F623941DA74275556099D@inbomail.inbo.be>
References: <AcyTxCo9RKpmf3tDRQSomV5bOCzJvQ==>
	<AA818EAD2576BC488B4F623941DA74275556099D@inbomail.inbo.be>
Message-ID: <CAP01uRnrVx8eyYPG9bU=PDXZ0bFNJf72S-Ex=qqoSECjL3qNMQ@mail.gmail.com>

On Wed, Oct 26, 2011 at 5:46 AM, ONKELINX, Thierry
<Thierry.ONKELINX at inbo.be> wrote:
> Dear all,
>
> When one tries to load a non-installed package you get the error:
>
> Error in library(xyz) : there is no package called 'xyz'
>
> I noticed on several occasions that this puzzles beginners. Therefore I suggest to change the error description in:
>
> Error in library(xyz) : there is no package called 'xyz' installed on this machine. Check the name of the package or use install.packages("xyz") to install it.
>
> Best regards,
>

Perhaps it could report where it looked and couldn't find it:

There is no package called 'xyz' in "C:/R/win-library/2.13" and
"C:/R/R-2.13.2/library"




-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From nalimilan at club.fr  Thu Oct 27 20:10:48 2011
From: nalimilan at club.fr (Milan Bouchet-Valat)
Date: Thu, 27 Oct 2011 20:10:48 +0200
Subject: [Rd] Error message library()
In-Reply-To: <CAP01uRnrVx8eyYPG9bU=PDXZ0bFNJf72S-Ex=qqoSECjL3qNMQ@mail.gmail.com>
References: <AcyTxCo9RKpmf3tDRQSomV5bOCzJvQ==>
	<AA818EAD2576BC488B4F623941DA74275556099D@inbomail.inbo.be>
	<CAP01uRnrVx8eyYPG9bU=PDXZ0bFNJf72S-Ex=qqoSECjL3qNMQ@mail.gmail.com>
Message-ID: <1319739048.31302.1.camel@milan>

Le jeudi 27 octobre 2011 ? 13:45 -0400, Gabor Grothendieck a ?crit :
> Perhaps it could report where it looked and couldn't find it:
> 
> There is no package called 'xyz' in "C:/R/win-library/2.13" and
> "C:/R/R-2.13.2/library"
I think it would be even more scary for beginners, and advanced users
probably know how to find their library path.


Regards


From ggrothendieck at gmail.com  Thu Oct 27 20:36:01 2011
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 27 Oct 2011 14:36:01 -0400
Subject: [Rd] Error message library()
In-Reply-To: <1319739048.31302.1.camel@milan>
References: <AA818EAD2576BC488B4F623941DA74275556099D@inbomail.inbo.be>
	<CAP01uRnrVx8eyYPG9bU=PDXZ0bFNJf72S-Ex=qqoSECjL3qNMQ@mail.gmail.com>
	<1319739048.31302.1.camel@milan>
Message-ID: <CAP01uRk3apdCcZWMKudo_Q1vxgWmuhQ6cquQOnwH5C9qm+t4EA@mail.gmail.com>

On Thu, Oct 27, 2011 at 2:10 PM, Milan Bouchet-Valat <nalimilan at club.fr> wrote:
> Le jeudi 27 octobre 2011 ? 13:45 -0400, Gabor Grothendieck a ?crit :
>> Perhaps it could report where it looked and couldn't find it:
>>
>> There is no package called 'xyz' in "C:/R/win-library/2.13" and
>> "C:/R/R-2.13.2/library"
> I think it would be even more scary for beginners, and advanced users
> probably know how to find their library path.
>

Many beginners are advanced but just don't know R.  Its better to give
them the information they need.  With this they can discover what is
there even without knowing the relevant R commands.

-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From timothy.c.bates at gmail.com  Thu Oct 27 20:43:34 2011
From: timothy.c.bates at gmail.com (Timothy Bates)
Date: Thu, 27 Oct 2011 19:43:34 +0100
Subject: [Rd] Error message library()
In-Reply-To: <CAP01uRk3apdCcZWMKudo_Q1vxgWmuhQ6cquQOnwH5C9qm+t4EA@mail.gmail.com>
References: <AA818EAD2576BC488B4F623941DA74275556099D@inbomail.inbo.be>
	<CAP01uRnrVx8eyYPG9bU=PDXZ0bFNJf72S-Ex=qqoSECjL3qNMQ@mail.gmail.com>
	<1319739048.31302.1.camel@milan>
	<CAP01uRk3apdCcZWMKudo_Q1vxgWmuhQ6cquQOnwH5C9qm+t4EA@mail.gmail.com>
Message-ID: <C7EC4866-472D-401C-BE89-EDA52A5F1599@gmail.com>

I agree: much nicer to say what went wrong than to say "there is no package"

And many people will not know what R's paths are.

Why not add in a hint about what to do, like:  "try running install.packages("xyz") "

t


> ggrothendieck
> Many beginners are advanced but just don't know R.  Its better to give
> them the information they need.  With this they can discover what is
> there even without knowing the relevant R commands.

On Oct 27, 2011, at 7:36 PM, Gabor Grothendieck wrote:
> On Thu, Oct 27, 2011 at 2:10 PM, Milan Bouchet-Valat <nalimilan at club.fr> wrote:
>> Le jeudi 27 octobre 2011 ? 13:45 -0400, Gabor Grothendieck a ?crit :
>>> Perhaps it could report where it looked and couldn't find it:
>>> 
>>> There is no package called 'xyz' in "C:/R/win-library/2.13" and
>>> "C:/R/R-2.13.2/library"
>> I think it would be even more scary for beginners, and advanced users
>> probably know how to find their library path.


From ripley at stats.ox.ac.uk  Fri Oct 28 12:12:57 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 28 Oct 2011 11:12:57 +0100 (BST)
Subject: [Rd] tzone DB lawsuit Implications for R-project?
In-Reply-To: <alpine.LFD.2.02.1110071637540.10231@gannet.stats.ox.ac.uk>
References: <FFB0A46F-2B96-4A8E-8F7F-B47CB9E45F1D@gmail.com>
	<alpine.LFD.2.02.1110071637540.10231@gannet.stats.ox.ac.uk>
Message-ID: <alpine.LFD.2.02.1110281111130.21866@gannet.stats.ox.ac.uk>

To put this nest-poking to rest, see
http://www.iana.org/time-zones


On Fri, 7 Oct 2011, Prof Brian Ripley wrote:

> Not as yet.  Many much bigger users than us (almost all Unix-alike OSes, 
> Java, Tcl, MySQL, PostgreSQL, Oracle, ...) have more resources to 
> investigate.
>
> Note that we only use the database on Windows, and only because OS services 
> are woefully inadequate on that platform: we could go back to using those 
> services ....
>
> On Fri, 7 Oct 2011, Jeff Ryan wrote:
>
>> Does anyone from core have a comment on the implications for the R-project 
>> on this:
>> 
>> http://www.theregister.co.uk/2011/10/07/unix_time_zone_database_destroyed/
>> 
>> Given the inclusion of the TZ database with R as well as the functionality 
>> used by R, is this something that the FSF is looking at yet?
>> 
>> Best,Jeff
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>> 
>
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From renaud at mancala.cbio.uct.ac.za  Fri Oct 28 12:49:43 2011
From: renaud at mancala.cbio.uct.ac.za (Renaud Gaujoux)
Date: Fri, 28 Oct 2011 12:49:43 +0200
Subject: [Rd] Error message library()
Message-ID: <4EAA88C7.3080302@cbio.uct.ac.za>

"BTW: an ever more intuitive solution (IMHO) would be to auto-complete package names in library( ... Deepayan?;)  That is non-intrusive and in line with the general use of R." (Simon)

This is indeed a long wanted feature and to my surprise it actually already exists!!! (seems that Deepayan did not tell anybody about it ;) )
The help page ?completion in the utils package explains how to enable it:

utils::rc.settings(ipck=TRUE)

It simply worked on my Ubuntu box -- and directly went in my .Rprofile :)
Hope this helps.

Renaud

-- 
Renaud Gaujoux
Computational Biology - University of Cape Town
South Africa


From jorismeys at gmail.com  Fri Oct 28 12:49:44 2011
From: jorismeys at gmail.com (Joris Meys)
Date: Fri, 28 Oct 2011 12:49:44 +0200
Subject: [Rd] tzone DB lawsuit Implications for R-project?
In-Reply-To: <alpine.LFD.2.02.1110281111130.21866@gannet.stats.ox.ac.uk>
References: <FFB0A46F-2B96-4A8E-8F7F-B47CB9E45F1D@gmail.com>
	<alpine.LFD.2.02.1110071637540.10231@gannet.stats.ox.ac.uk>
	<alpine.LFD.2.02.1110281111130.21866@gannet.stats.ox.ac.uk>
Message-ID: <CAO1zAVZwYxUv74ED5sN3qjNdPxPBSLJRyTf9W99wZ_CY8V92Aw@mail.gmail.com>

And an article with some extra information on it:

http://www.usatoday.com/tech/news/story/2011-10-16/time-zone-database-ICANN/50793890/1

On Fri, Oct 28, 2011 at 12:12 PM, Prof Brian Ripley
<ripley at stats.ox.ac.uk> wrote:
> To put this nest-poking to rest, see
> http://www.iana.org/time-zones
>
>
> On Fri, 7 Oct 2011, Prof Brian Ripley wrote:
>
>> Not as yet. ?Many much bigger users than us (almost all Unix-alike OSes,
>> Java, Tcl, MySQL, PostgreSQL, Oracle, ...) have more resources to
>> investigate.
>>
>> Note that we only use the database on Windows, and only because OS
>> services are woefully inadequate on that platform: we could go back to using
>> those services ....
>>
>> On Fri, 7 Oct 2011, Jeff Ryan wrote:
>>
>>> Does anyone from core have a comment on the implications for the
>>> R-project on this:
>>>
>>>
>>> http://www.theregister.co.uk/2011/10/07/unix_time_zone_database_destroyed/
>>>
>>> Given the inclusion of the TZ database with R as well as the
>>> functionality used by R, is this something that the FSF is looking at yet?
>>>
>>> Best,Jeff
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>
>> --
>> Brian D. Ripley, ? ? ? ? ? ? ? ? ?ripley at stats.ox.ac.uk
>> Professor of Applied Statistics, ?http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford, ? ? ? ? ? ? Tel: ?+44 1865 272861 (self)
>> 1 South Parks Road, ? ? ? ? ? ? ? ? ? ? +44 1865 272866 (PA)
>> Oxford OX1 3TG, UK ? ? ? ? ? ? ? ?Fax: ?+44 1865 272595
>>
>
> --
> Brian D. Ripley, ? ? ? ? ? ? ? ? ?ripley at stats.ox.ac.uk
> Professor of Applied Statistics, ?http://www.stats.ox.ac.uk/~ripley/
> University of Oxford, ? ? ? ? ? ? Tel: ?+44 1865 272861 (self)
> 1 South Parks Road, ? ? ? ? ? ? ? ? ? ? +44 1865 272866 (PA)
> Oxford OX1 3TG, UK ? ? ? ? ? ? ? ?Fax: ?+44 1865 272595
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>



-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Mathematical Modelling, Statistics and Bio-Informatics

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


From renaud at mancala.cbio.uct.ac.za  Fri Oct 28 16:36:21 2011
From: renaud at mancala.cbio.uct.ac.za (Renaud Gaujoux)
Date: Fri, 28 Oct 2011 16:36:21 +0200
Subject: [Rd] Output multiline verbatim in Rd files with \Sexpr in PDF manual
Message-ID: <4EAABDE5.9040602@cbio.uct.ac.za>

Hi,

I want to output some generated text in verbatim in a Rd file, but do 
not succeed in getting it render well in all versions (text, html and pdf).
I tried something like:

\Sexpr[results=verbatim, stage=render]{cat("line\nnext line")}

I use Rdconv to render each version of the man page.
This produced the expected effect in html, but resulted in a single line 
"line next line" in the pdf and text versions.
Moreover, if I add an empty line as in:

\Sexpr[results=verbatim, stage=render]{cat("line\nnext line\n\nyet 
another line")}

then the html is still correctly rendered, the text version correctly 
shows the empty newline (but still not the firts line break), and the 
pdf cannot be generated from the Latex code (because \AsIs breaks on the 
newline).

I tried several combination of options (results=text, rd) and rd 
commands (\cr, \preformated) but these are always somehow escaped when 
generating the Latex file.
Is there a way to go around these issues? Maybe I am not using the 
correct way.

Thank you.

Renaud

-- 
Renaud Gaujoux
Computational Biology - University of Cape Town
South Africa


From renaud at mancala.cbio.uct.ac.za  Fri Oct 28 16:49:03 2011
From: renaud at mancala.cbio.uct.ac.za (Renaud Gaujoux)
Date: Fri, 28 Oct 2011 16:49:03 +0200
Subject: [Rd] R CMD check and error in an \Sexpr in an Rd file
Message-ID: <4EAAC0DF.7060704@cbio.uct.ac.za>

Hi,

another Rd related issue I encountered is that if an error occurs in an 
\Sexpr in an Rd file, then on get the following error:

* checking for portable compilation flags in Makevars ... OK
* checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS) ... OK
* checking examples ... ERROR
Error in paste(before, x, after, sep = "") : object 'exfile' not found
Execution halted

To reproduce, put a call like this in an Rd section:

\Sexpr[results=verbatim, stage=render]{x <- 1; stop("sexpr error")}

The strange thing is that it occurs at the example checking step.
Not sure why it does not break before.

Thank you.

Renaud

PS: I am on R version 2.13.2 (2011-09-30) - x86_64-pc-linux-gnu (64-bit)

-- 
Renaud Gaujoux
Computational Biology - University of Cape Town
South Africa


From murdoch.duncan at gmail.com  Fri Oct 28 16:52:42 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 28 Oct 2011 10:52:42 -0400
Subject: [Rd] Output multiline verbatim in Rd files with \Sexpr in PDF
 manual
In-Reply-To: <4EAABDE5.9040602@cbio.uct.ac.za>
References: <4EAABDE5.9040602@cbio.uct.ac.za>
Message-ID: <4EAAC1BA.5020907@gmail.com>

On 28/10/2011 10:36 AM, Renaud Gaujoux wrote:
> Hi,
>
> I want to output some generated text in verbatim in a Rd file, but do
> not succeed in getting it render well in all versions (text, html and pdf).
> I tried something like:
>
> \Sexpr[results=verbatim, stage=render]{cat("line\nnext line")}
>
> I use Rdconv to render each version of the man page.
> This produced the expected effect in html, but resulted in a single line
> "line next line" in the pdf and text versions.
> Moreover, if I add an empty line as in:
>
> \Sexpr[results=verbatim, stage=render]{cat("line\nnext line\n\nyet
> another line")}
>
> then the html is still correctly rendered, the text version correctly
> shows the empty newline (but still not the firts line break), and the
> pdf cannot be generated from the Latex code (because \AsIs breaks on the
> newline).
>
> I tried several combination of options (results=text, rd) and rd
> commands (\cr, \preformated) but these are always somehow escaped when
> generating the Latex file.
> Is there a way to go around these issues? Maybe I am not using the
> correct way.

Which version of R are you using?  There was a bug in 2.13.2 that caused 
some strange behaviour.

Duncan Murdoch


From murdoch.duncan at gmail.com  Fri Oct 28 16:53:39 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 28 Oct 2011 10:53:39 -0400
Subject: [Rd] R CMD check and error in an \Sexpr in an Rd file
In-Reply-To: <4EAAC0DF.7060704@cbio.uct.ac.za>
References: <4EAAC0DF.7060704@cbio.uct.ac.za>
Message-ID: <4EAAC1F3.8020505@gmail.com>

On 28/10/2011 10:49 AM, Renaud Gaujoux wrote:
> Hi,
>
> another Rd related issue I encountered is that if an error occurs in an
> \Sexpr in an Rd file, then on get the following error:
>
> * checking for portable compilation flags in Makevars ... OK
> * checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS) ... OK
> * checking examples ... ERROR
> Error in paste(before, x, after, sep = "") : object 'exfile' not found
> Execution halted
>
> To reproduce, put a call like this in an Rd section:
>
> \Sexpr[results=verbatim, stage=render]{x<- 1; stop("sexpr error")}
>
> The strange thing is that it occurs at the example checking step.
> Not sure why it does not break before.
>
> Thank you.
>
> Renaud
>
> PS: I am on R version 2.13.2 (2011-09-30) - x86_64-pc-linux-gnu (64-bit)
>

I would update to 2.13.2 patched, or the release candidate of 2.14.0.

Duncan Murdoch


From simon.urbanek at r-project.org  Fri Oct 28 17:14:24 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 28 Oct 2011 11:14:24 -0400
Subject: [Rd] Error message library()
In-Reply-To: <4EAA88C7.3080302@cbio.uct.ac.za>
References: <4EAA88C7.3080302@cbio.uct.ac.za>
Message-ID: <BE5A340C-6469-49B4-88E7-A59EC110A558@r-project.org>


On Oct 28, 2011, at 6:49 AM, Renaud Gaujoux wrote:

> "BTW: an ever more intuitive solution (IMHO) would be to auto-complete package names in library( ... Deepayan?;)  That is non-intrusive and in line with the general use of R." (Simon)
> 
> This is indeed a long wanted feature and to my surprise it actually already exists!!! (seems that Deepayan did not tell anybody about it ;) )
> The help page ?completion in the utils package explains how to enable it:
> 
> utils::rc.settings(ipck=TRUE)
> 

Oh, well, the fact that it's off by default defeats the purpose, since the users that would benefit from it most are unlikely to mess with local configuration files...
But thanks for finding it!
Simon



> It simply worked on my Ubuntu box -- and directly went in my .Rprofile :)
> Hope this helps.
> 
> Renaud
> 
> -- 
> Renaud Gaujoux
> Computational Biology - University of Cape Town
> South Africa
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From murdoch.duncan at gmail.com  Fri Oct 28 17:25:30 2011
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 28 Oct 2011 11:25:30 -0400
Subject: [Rd] R CMD check and error in an \Sexpr in an Rd file
In-Reply-To: <4EAAC1F3.8020505@gmail.com>
References: <4EAAC0DF.7060704@cbio.uct.ac.za> <4EAAC1F3.8020505@gmail.com>
Message-ID: <4EAAC96A.2020803@gmail.com>

On 28/10/2011 10:53 AM, Duncan Murdoch wrote:
> On 28/10/2011 10:49 AM, Renaud Gaujoux wrote:
> >  Hi,
> >
> >  another Rd related issue I encountered is that if an error occurs in an
> >  \Sexpr in an Rd file, then on get the following error:
> >
> >  * checking for portable compilation flags in Makevars ... OK
> >  * checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS) ... OK
> >  * checking examples ... ERROR
> >  Error in paste(before, x, after, sep = "") : object 'exfile' not found
> >  Execution halted
> >
> >  To reproduce, put a call like this in an Rd section:
> >
> >  \Sexpr[results=verbatim, stage=render]{x<- 1; stop("sexpr error")}
> >
> >  The strange thing is that it occurs at the example checking step.
> >  Not sure why it does not break before.
> >
> >  Thank you.
> >
> >  Renaud
> >
> >  PS: I am on R version 2.13.2 (2011-09-30) - x86_64-pc-linux-gnu (64-bit)
> >
>
> I would update to 2.13.2 patched, or the release candidate of 2.14.0.

Oops, sorry, 2.13.2 is "final", so I didn't backport the patch.  2.14.0 
is what you should get.

Duncan Murdoch


From ggrothendieck at gmail.com  Fri Oct 28 18:02:03 2011
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 28 Oct 2011 12:02:03 -0400
Subject: [Rd] Error message library()
In-Reply-To: <4EAA88C7.3080302@cbio.uct.ac.za>
References: <4EAA88C7.3080302@cbio.uct.ac.za>
Message-ID: <CAP01uRnLSdRXqnQMF+q662eycj9jPjjumX9Vh_tyKReZjDjUNg@mail.gmail.com>

On Fri, Oct 28, 2011 at 6:49 AM, Renaud Gaujoux
<renaud at mancala.cbio.uct.ac.za> wrote:
> "BTW: an ever more intuitive solution (IMHO) would be to auto-complete
> package names in library( ... Deepayan?;) ?That is non-intrusive and in line
> with the general use of R." (Simon)
>
> This is indeed a long wanted feature and to my surprise it actually already
> exists!!! (seems that Deepayan did not tell anybody about it ;) )
> The help page ?completion in the utils package explains how to enable it:
>
> utils::rc.settings(ipck=TRUE)
>
> It simply worked on my Ubuntu box -- and directly went in my .Rprofile :)
> Hope this helps.
>

Also in terms of what exists now, on Windows the Packages > Load
Package menu on Rgui provides a gui interface to library() from which
one chooses the package from a list so one can't ask for one that does
not exist.

-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From dwinsemius at comcast.net  Fri Oct 28 22:20:53 2011
From: dwinsemius at comcast.net (David Winsemius)
Date: Fri, 28 Oct 2011 16:20:53 -0400
Subject: [Rd] Error message library()
In-Reply-To: <CAP01uRnLSdRXqnQMF+q662eycj9jPjjumX9Vh_tyKReZjDjUNg@mail.gmail.com>
References: <4EAA88C7.3080302@cbio.uct.ac.za>
	<CAP01uRnLSdRXqnQMF+q662eycj9jPjjumX9Vh_tyKReZjDjUNg@mail.gmail.com>
Message-ID: <E16D511C-258A-4FC3-8528-2D6BDCE25858@comcast.net>


On Oct 28, 2011, at 12:02 PM, Gabor Grothendieck wrote:

> On Fri, Oct 28, 2011 at 6:49 AM, Renaud Gaujoux
> <renaud at mancala.cbio.uct.ac.za> wrote:
>> "BTW: an ever more intuitive solution (IMHO) would be to auto- 
>> complete
>> package names in library( ... Deepayan?;)  That is non-intrusive  
>> and in line
>> with the general use of R." (Simon)
>>
>> This is indeed a long wanted feature and to my surprise it actually  
>> already
>> exists!!! (seems that Deepayan did not tell anybody about it ;) )
>> The help page ?completion in the utils package explains how to  
>> enable it:
>>
>> utils::rc.settings(ipck=TRUE)
>>
>> It simply worked on my Ubuntu box -- and directly went in  
>> my .Rprofile :)
>> Hope this helps.
>>
>
> Also in terms of what exists now, on Windows the Packages > Load
> Package menu on Rgui provides a gui interface to library() from which
> one chooses the package from a list so one can't ask for one that does
> not exist.
>
On a Mac with R.app the same facility exists which I how I check to  
see if a package is available in one of four forms (mac-binary, mac- 
source, Bioc-binary, Bioc-source).

--
David Winsemius, MD
West Hartford, CT


From hintak_leung at yahoo.co.uk  Fri Oct 28 23:35:55 2011
From: hintak_leung at yahoo.co.uk (Hin-Tak Leung)
Date: Fri, 28 Oct 2011 22:35:55 +0100 (BST)
Subject: [Rd] Sweave, cairo_pdf, CJK, ghostscript
Message-ID: <1319837755.2360.YahooMailClassic@web29514.mail.ird.yahoo.com>

Reading ?RWeaveLatex more carefully, I worked out that the outcome I want could be achieved without patching R, by having this towards the beginning:

<<custom=hide>>=
  cairo <- function(name, width, height, ...)
  grDevices::cairo_pdf(file = paste(name, "pdf", sep = "."),
                       width = width, height = height)
@

Then declaring grdevice= like this:

<<another1,fig=TRUE,pdf=FALSE,grdevice=cairo,eval=TRUE,width=6,height=3>>=
grid.text("\u4F60\u597D", y=2/3, gp=gpar(fontfamily="CNS1"))
@

So all is well. is there any chance of either updating ?RWeaveLatex with this actual use-case example, or make it easier with the attached patch (and updated version of what I did, just adding the corresponding documentation)? I thought there might be a a use for cairo_ps() as well, but then most people who can do latex could do pdflatex, especially those who has cairo installed.

FWIW, besides Chinese, I am doing Tibetan and Arabic as well - needed/wanted those two for Sichuan (south-western China) and Ningxia (northern western, just south of Mongolia).

--- On Sun, 23/10/11, Hin-Tak Leung <htl10 at users.sourceforge.net> wrote:

> --- On Sat, 22/10/11, Prof Brian
> Ripley <ripley at stats.ox.ac.uk>
> wrote:
> 
> > On Sat, 22 Oct 2011, Duncan Murdoch
> > wrote:
> > 
> > > On 11-10-21 8:57 PM, Hin-Tak Leung wrote:
> > >> I have had some fun in the last few days
> trying to
> > put together an annotated map of China with R and
> some
> > public GIS data:
> > >> 
> > >> http://sourceforge.net/projects/outmodedbonsai/files/snpMatrix%20next/1.17.7.11/China_Choropleth_Maps.pdf/download
> > >> 
> > >> It is done, and rather nice... there are a
> few
> > issues:
> > >> 
> > >> - the default pdf() device cannot do CJK
> with
> > embedded fonts - and cairo_pdf() is not hooked up to
> Sweave
> > yet. I have had a quick look, and it does not look
> too
> > complicated, other than the fact that cairo_pdf() is
> > mutually exclusive with pdf(); and the jpeg/png are
> new to
> > 2.13 so it is probably just nobody has gotten round to
> it.
> > (and cairo_pdf() also behaves differently with the
> onefile
> > option). I guess I am almost saying I might get my
> hand
> > dirty or help somebody else who wants to. So it is
> probably
> > best to start some discussion.
> > > 
> > > It is not hard to write your own device
> functions,
> > especially in 2.14.0.? See rgl::rgl.Sweave for an
> > example.
> > 
> > And guess what the example in the Sweave manual
> uses??
> > cairo_pdf() ...
> 
> I don't want a new device - I just wanted cairo_pdf() to be
> hooked up to Sweave as an alternative to the default pdf().
> See my later post with the patch against? R trunk and
> the worked examples.
> 
> It looks like cairo_pdf() is just using my current
> fontconfig settings.
> 
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cairo.diff
Type: text/x-patch
Size: 3261 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111028/1bdcd1a8/attachment.bin>

From zhaoyitj2010 at gmail.com  Fri Oct 28 15:03:32 2011
From: zhaoyitj2010 at gmail.com (Yi Zhao)
Date: Fri, 28 Oct 2011 09:03:32 -0400
Subject: [Rd] Question about how to compile .zip for Windows
In-Reply-To: <CAPZUjw-=MFgiQhNpXOAiP97VF09FQOSDVHqn8=O2kecvz+sKcg@mail.gmail.com>
References: <CAPZUjw-=MFgiQhNpXOAiP97VF09FQOSDVHqn8=O2kecvz+sKcg@mail.gmail.com>
Message-ID: <CAPZUjw-dhZNTVj-YUxN2VZutB7QW4GsT=3RPJvy_VEm61JjCBQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111028/9a359f3a/attachment.pl>

From zhaoyitj2010 at gmail.com  Sat Oct 29 05:33:23 2011
From: zhaoyitj2010 at gmail.com (Yi Zhao)
Date: Fri, 28 Oct 2011 23:33:23 -0400
Subject: [Rd] Question about multiple-precision floating-point computations
Message-ID: <CAPZUjw95GW+ga8Yi3o0JfPVpnz7WhGomwcjTAkOtxciy0-e-cA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20111028/d409e0c5/attachment.pl>

From ligges at statistik.tu-dortmund.de  Sat Oct 29 16:44:44 2011
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 29 Oct 2011 16:44:44 +0200
Subject: [Rd] Question about multiple-precision floating-point
	computations
In-Reply-To: <CAPZUjw95GW+ga8Yi3o0JfPVpnz7WhGomwcjTAkOtxciy0-e-cA@mail.gmail.com>
References: <CAPZUjw95GW+ga8Yi3o0JfPVpnz7WhGomwcjTAkOtxciy0-e-cA@mail.gmail.com>
Message-ID: <4EAC115C.7020700@statistik.tu-dortmund.de>

See, for example, package Rmpfr.

Uwe Ligges



On 29.10.2011 05:33, Yi Zhao wrote:
> Dear all,
>
> I am trying to programming a R package in C++, which need calculate the
> number 25 digits after the dot.
>
> Is there any package offer this function? I am still a beginner. Please help
> me!
>
> Thanks a lot!
>
> Yi Zhao
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ligges at statistik.tu-dortmund.de  Sat Oct 29 16:45:38 2011
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 29 Oct 2011 16:45:38 +0200
Subject: [Rd] Question about how to compile .zip for Windows
In-Reply-To: <CAPZUjw-dhZNTVj-YUxN2VZutB7QW4GsT=3RPJvy_VEm61JjCBQ@mail.gmail.com>
References: <CAPZUjw-=MFgiQhNpXOAiP97VF09FQOSDVHqn8=O2kecvz+sKcg@mail.gmail.com>
	<CAPZUjw-dhZNTVj-YUxN2VZutB7QW4GsT=3RPJvy_VEm61JjCBQ@mail.gmail.com>
Message-ID: <4EAC1192.9020104@statistik.tu-dortmund.de>



On 28.10.2011 15:03, Yi Zhao wrote:
> Dear all,
>
> Thanks for Baptiste's help. He offered me the website
>
> http://win-builder.r-project.org/ This is very good.
>
> However, I face another problem recently that I need to program a package,
> which require 'multiple-precision floating-point computations'. I found that
> MPFR is very good tools. It can be installed on the linux system, if you
> want to use it just include some head files.
>
> So my problem is my computer can only compile the linux version package not
> the windows .zip version. And also If I want to use the website above, it
> doesn't install the MPFR. I want to try to compile it directly on my
> computer. I stuck here.



See the examples in package Rmpfr. You can make use of the same setting 
on winbuilder.

Uwe Ligges

> Thanks
>
> Yi Zhao
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From bbolker at gmail.com  Sat Oct 29 16:12:45 2011
From: bbolker at gmail.com (Ben Bolker)
Date: Sat, 29 Oct 2011 10:12:45 -0400
Subject: [Rd] minor typos
Message-ID: <4EAC09DD.70409@gmail.com>


R-devel doc/NEWS.Rd (SVN 57472) contains:

   \item There are two new options for typesetting PDF manuals from
      Rd files.  These are \samp{beramono} and \samp{inconsolata}, and
      used the named font for mononspaced output. They are intended to
      be used in combination with \samp{times}, and
      \samp{times,inconsolata,hyper} is now the default for the
      reference manual and package manuals.  If you do not have that
      font installed, you can set \env{R_RD4PF} to one of the other
      options: see the \sQuote{R Installation and Administration Manual}.



  Should the second line there be "use the named font for monospaced
output ..." ?

  Also,

http://cran.r-project.org/bin/macosx/

 contains (second paragraph): "Altough we take precautions when
assembling binaries, please use the normal precautions with downloaded
executables. "  -- should be "Although" ...


From pdalgd at gmail.com  Sat Oct 29 17:59:27 2011
From: pdalgd at gmail.com (peter dalgaard)
Date: Sat, 29 Oct 2011 17:59:27 +0200
Subject: [Rd] minor typos
In-Reply-To: <4EAC09DD.70409@gmail.com>
References: <4EAC09DD.70409@gmail.com>
Message-ID: <FDDF5B68-BE96-4FA1-A3A6-85F1FF85C365@gmail.com>


On Oct 29, 2011, at 16:12 , Ben Bolker wrote:

> 
> R-devel doc/NEWS.Rd (SVN 57472) contains:
> 
>   \item There are two new options for typesetting PDF manuals from
>      Rd files.  These are \samp{beramono} and \samp{inconsolata}, and
>      used the named font for mononspaced output. They are intended to
>      be used in combination with \samp{times}, and
>      \samp{times,inconsolata,hyper} is now the default for the
>      reference manual and package manuals.  If you do not have that
>      font installed, you can set \env{R_RD4PF} to one of the other
>      options: see the \sQuote{R Installation and Administration Manual}.
> 
> 
> 
>  Should the second line there be "use the named font for monospaced
> output ..." ?

Yes, fixed (in both senses).

> 
>  Also,
> 
> http://cran.r-project.org/bin/macosx/
> 
> contains (second paragraph): "Altough we take precautions when
> assembling binaries, please use the normal precautions with downloaded
> executables. "  -- should be "Although" ...
> 

I'll leave that one for the CRAN masters


-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From ripley at stats.ox.ac.uk  Sat Oct 29 19:06:23 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 29 Oct 2011 18:06:23 +0100 (BST)
Subject: [Rd] Question about how to compile .zip for Windows
In-Reply-To: <4EAC1192.9020104@statistik.tu-dortmund.de>
References: <CAPZUjw-=MFgiQhNpXOAiP97VF09FQOSDVHqn8=O2kecvz+sKcg@mail.gmail.com>
	<CAPZUjw-dhZNTVj-YUxN2VZutB7QW4GsT=3RPJvy_VEm61JjCBQ@mail.gmail.com>
	<4EAC1192.9020104@statistik.tu-dortmund.de>
Message-ID: <alpine.LFD.2.02.1110291804400.25631@gannet.stats.ox.ac.uk>

On Sat, 29 Oct 2011, Uwe Ligges wrote:

>
>
> On 28.10.2011 15:03, Yi Zhao wrote:
>> Dear all,
>> 
>> Thanks for Baptiste's help. He offered me the website
>> 
>> http://win-builder.r-project.org/ This is very good.
>> 
>> However, I face another problem recently that I need to program a package,
>> which require 'multiple-precision floating-point computations'. I found 
>> that
>> MPFR is very good tools. It can be installed on the linux system, if you
>> want to use it just include some head files.
>> 
>> So my problem is my computer can only compile the linux version package not
>> the windows .zip version. And also If I want to use the website above, it
>> doesn't install the MPFR. I want to try to compile it directly on my
>> computer. I stuck here.
>
>
>
> See the examples in package Rmpfr. You can make use of the same setting on 
> winbuilder.

In other words, we do have a pre-compiled mpfr for Windows, and it 
*is* installed on winbuilder.  You can get it from 
http://www.stats.ox.ac.uk/pub/Rtools/ for your own use.

>
> Uwe Ligges
>
>> Thanks
>> 
>> Yi Zhao
>>
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From hadley at rice.edu  Mon Oct 31 00:01:05 2011
From: hadley at rice.edu (Hadley Wickham)
Date: Mon, 31 Oct 2011 10:01:05 +1100
Subject: [Rd] Small feature request for help(package = ...)
Message-ID: <CABdHhvFtBYAdNQQ84a+K8tZyjic8ayWy-4hLEff3rWuA2aJRMg@mail.gmail.com>

Currently help(package = S4) looks like:

coef-methods            Methods for Function 'coef' in Package 'stats4'
confint-methods         Methods for Function 'confint' in Package
                        'stats4'
logLik-methods          Methods for Function 'logLik' in Package
                        'stats4'
mle                     Maximum Likelihood Estimation
mle-class               Class '"mle"' for Results of Maximum Likelihood
                        Estimation

I think it would be more useful if it looked like:

methods?coef            Methods for Function 'coef' in Package 'stats4'
methods?confint         Methods for Function 'confint' in Package
                        'stats4'
methods?logLik          Methods for Function 'logLik' in Package
                        'stats4'
?mle                     Maximum Likelihood Estimation
class?mle               Class '"mle"' for Results of Maximum Likelihood
                        Estimation

And similarly help(package = base) could have

?":"                       Colon Operator
?"::"                      Double Colon and Triple Colon Operators
?"@"                       Extract Slots
?Arithmetic              Arithmetic Operators


That would make help just a little bit easier to use for the newcomer.
 What do you think?

Hadley

-- 
Assistant Professor / Dobelman Family Junior Chair
Department of Statistics / Rice University
http://had.co.nz/


From renaud at mancala.cbio.uct.ac.za  Mon Oct 31 13:13:48 2011
From: renaud at mancala.cbio.uct.ac.za (Renaud Gaujoux)
Date: Mon, 31 Oct 2011 14:13:48 +0200
Subject: [Rd] R CMD check and error in an \Sexpr in an Rd file
In-Reply-To: <4EAAC96A.2020803@gmail.com>
References: <4EAAC0DF.7060704@cbio.uct.ac.za> <4EAAC1F3.8020505@gmail.com>
	<4EAAC96A.2020803@gmail.com>
Message-ID: <4EAE90FC.7010200@cbio.uct.ac.za>

Thank you Duncan.

I tried with:
* using R version 2.14.0 RC (2011-10-24 r57417)
* using platform: x86_64-unknown-linux-gnu (64-bit)

But I still get the errors for verbatim multiline and the strange error 
if an error occurs in \Sexpr.
Is your patch included in this version? I will try now with 
R-rc_2011-10-27_r57452.tar.gz.

Renaud

On 28/10/2011 17:25, Duncan Murdoch wrote:
> On 28/10/2011 10:53 AM, Duncan Murdoch wrote:
>> On 28/10/2011 10:49 AM, Renaud Gaujoux wrote:
>> >  Hi,
>> >
>> >  another Rd related issue I encountered is that if an error occurs 
>> in an
>> >  \Sexpr in an Rd file, then on get the following error:
>> >
>> >  * checking for portable compilation flags in Makevars ... OK
>> >  * checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS) ... OK
>> >  * checking examples ... ERROR
>> >  Error in paste(before, x, after, sep = "") : object 'exfile' not 
>> found
>> >  Execution halted
>> >
>> >  To reproduce, put a call like this in an Rd section:
>> >
>> >  \Sexpr[results=verbatim, stage=render]{x<- 1; stop("sexpr error")}
>> >
>> >  The strange thing is that it occurs at the example checking step.
>> >  Not sure why it does not break before.
>> >
>> >  Thank you.
>> >
>> >  Renaud
>> >
>> >  PS: I am on R version 2.13.2 (2011-09-30) - x86_64-pc-linux-gnu 
>> (64-bit)
>> >
>>
>> I would update to 2.13.2 patched, or the release candidate of 2.14.0.
>
> Oops, sorry, 2.13.2 is "final", so I didn't backport the patch.  
> 2.14.0 is what you should get.
>
> Duncan Murdoch


From ligges at statistik.tu-dortmund.de  Mon Oct 31 13:19:55 2011
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 31 Oct 2011 13:19:55 +0100
Subject: [Rd] R CMD check and error in an \Sexpr in an Rd file
In-Reply-To: <4EAE90FC.7010200@cbio.uct.ac.za>
References: <4EAAC0DF.7060704@cbio.uct.ac.za> <4EAAC1F3.8020505@gmail.com>
	<4EAAC96A.2020803@gmail.com> <4EAE90FC.7010200@cbio.uct.ac.za>
Message-ID: <4EAE926B.6040102@statistik.tu-dortmund.de>



On 31.10.2011 13:13, Renaud Gaujoux wrote:
> Thank you Duncan.
>
> I tried with:
> * using R version 2.14.0 RC (2011-10-24 r57417)
> * using platform: x86_64-unknown-linux-gnu (64-bit)
>
> But I still get the errors for verbatim multiline and the strange error
> if an error occurs in \Sexpr.
> Is your patch included in this version? I will try now with
> R-rc_2011-10-27_r57452.tar.gz.

Try R-2.14.0, it is already released. Or R-devel.

Best,
Uwe Ligges


>
> Renaud
>
> On 28/10/2011 17:25, Duncan Murdoch wrote:
>> On 28/10/2011 10:53 AM, Duncan Murdoch wrote:
>>> On 28/10/2011 10:49 AM, Renaud Gaujoux wrote:
>>> > Hi,
>>> >
>>> > another Rd related issue I encountered is that if an error occurs
>>> in an
>>> > \Sexpr in an Rd file, then on get the following error:
>>> >
>>> > * checking for portable compilation flags in Makevars ... OK
>>> > * checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS) ... OK
>>> > * checking examples ... ERROR
>>> > Error in paste(before, x, after, sep = "") : object 'exfile' not found
>>> > Execution halted
>>> >
>>> > To reproduce, put a call like this in an Rd section:
>>> >
>>> > \Sexpr[results=verbatim, stage=render]{x<- 1; stop("sexpr error")}
>>> >
>>> > The strange thing is that it occurs at the example checking step.
>>> > Not sure why it does not break before.
>>> >
>>> > Thank you.
>>> >
>>> > Renaud
>>> >
>>> > PS: I am on R version 2.13.2 (2011-09-30) - x86_64-pc-linux-gnu
>>> (64-bit)
>>> >
>>>
>>> I would update to 2.13.2 patched, or the release candidate of 2.14.0.
>>
>> Oops, sorry, 2.13.2 is "final", so I didn't backport the patch. 2.14.0
>> is what you should get.
>>
>> Duncan Murdoch
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From renaud at mancala.cbio.uct.ac.za  Mon Oct 31 13:23:33 2011
From: renaud at mancala.cbio.uct.ac.za (Renaud Gaujoux)
Date: Mon, 31 Oct 2011 14:23:33 +0200
Subject: [Rd] R CMD check and error in an \Sexpr in an Rd file
In-Reply-To: <4EAE926B.6040102@statistik.tu-dortmund.de>
References: <4EAAC0DF.7060704@cbio.uct.ac.za> <4EAAC1F3.8020505@gmail.com>
	<4EAAC96A.2020803@gmail.com> <4EAE90FC.7010200@cbio.uct.ac.za>
	<4EAE926B.6040102@statistik.tu-dortmund.de>
Message-ID: <4EAE9345.5000209@cbio.uct.ac.za>

I do not see it on main CRAN home page.
Do you mean http://cran.r-project.org/src/base-prerelease/R-latest.tar.gz ?

On 31/10/2011 14:19, Uwe Ligges wrote:
>
>
> On 31.10.2011 13:13, Renaud Gaujoux wrote:
>> Thank you Duncan.
>>
>> I tried with:
>> * using R version 2.14.0 RC (2011-10-24 r57417)
>> * using platform: x86_64-unknown-linux-gnu (64-bit)
>>
>> But I still get the errors for verbatim multiline and the strange error
>> if an error occurs in \Sexpr.
>> Is your patch included in this version? I will try now with
>> R-rc_2011-10-27_r57452.tar.gz.
>
> Try R-2.14.0, it is already released. Or R-devel.
>
> Best,
> Uwe Ligges
>
>
>>
>> Renaud
>>
>> On 28/10/2011 17:25, Duncan Murdoch wrote:
>>> On 28/10/2011 10:53 AM, Duncan Murdoch wrote:
>>>> On 28/10/2011 10:49 AM, Renaud Gaujoux wrote:
>>>> > Hi,
>>>> >
>>>> > another Rd related issue I encountered is that if an error occurs
>>>> in an
>>>> > \Sexpr in an Rd file, then on get the following error:
>>>> >
>>>> > * checking for portable compilation flags in Makevars ... OK
>>>> > * checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS) 
>>>> ... OK
>>>> > * checking examples ... ERROR
>>>> > Error in paste(before, x, after, sep = "") : object 'exfile' not 
>>>> found
>>>> > Execution halted
>>>> >
>>>> > To reproduce, put a call like this in an Rd section:
>>>> >
>>>> > \Sexpr[results=verbatim, stage=render]{x<- 1; stop("sexpr error")}
>>>> >
>>>> > The strange thing is that it occurs at the example checking step.
>>>> > Not sure why it does not break before.
>>>> >
>>>> > Thank you.
>>>> >
>>>> > Renaud
>>>> >
>>>> > PS: I am on R version 2.13.2 (2011-09-30) - x86_64-pc-linux-gnu
>>>> (64-bit)
>>>> >
>>>>
>>>> I would update to 2.13.2 patched, or the release candidate of 2.14.0.
>>>
>>> Oops, sorry, 2.13.2 is "final", so I didn't backport the patch. 2.14.0
>>> is what you should get.
>>>
>>> Duncan Murdoch
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel


From ligges at statistik.tu-dortmund.de  Mon Oct 31 13:26:47 2011
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 31 Oct 2011 13:26:47 +0100
Subject: [Rd] R CMD check and error in an \Sexpr in an Rd file
In-Reply-To: <4EAE9345.5000209@cbio.uct.ac.za>
References: <4EAAC0DF.7060704@cbio.uct.ac.za> <4EAAC1F3.8020505@gmail.com>
	<4EAAC96A.2020803@gmail.com> <4EAE90FC.7010200@cbio.uct.ac.za>
	<4EAE926B.6040102@statistik.tu-dortmund.de>
	<4EAE9345.5000209@cbio.uct.ac.za>
Message-ID: <4EAE9407.5020309@statistik.tu-dortmund.de>



On 31.10.2011 13:23, Renaud Gaujoux wrote:
> I do not see it on main CRAN home page.
> Do you mean http://cran.r-project.org/src/base-prerelease/R-latest.tar.gz ?

Home page is not yet updated, see today's announcement by Peter Dalgaard 
who said it is at:
http://cran.r-project.org/src/base/R-2/R-2.14.0.tar.gz

Uwe Ligges


> On 31/10/2011 14:19, Uwe Ligges wrote:
>>
>>
>> On 31.10.2011 13:13, Renaud Gaujoux wrote:
>>> Thank you Duncan.
>>>
>>> I tried with:
>>> * using R version 2.14.0 RC (2011-10-24 r57417)
>>> * using platform: x86_64-unknown-linux-gnu (64-bit)
>>>
>>> But I still get the errors for verbatim multiline and the strange error
>>> if an error occurs in \Sexpr.
>>> Is your patch included in this version? I will try now with
>>> R-rc_2011-10-27_r57452.tar.gz.
>>
>> Try R-2.14.0, it is already released. Or R-devel.
>>
>> Best,
>> Uwe Ligges
>>
>>
>>>
>>> Renaud
>>>
>>> On 28/10/2011 17:25, Duncan Murdoch wrote:
>>>> On 28/10/2011 10:53 AM, Duncan Murdoch wrote:
>>>>> On 28/10/2011 10:49 AM, Renaud Gaujoux wrote:
>>>>> > Hi,
>>>>> >
>>>>> > another Rd related issue I encountered is that if an error occurs
>>>>> in an
>>>>> > \Sexpr in an Rd file, then on get the following error:
>>>>> >
>>>>> > * checking for portable compilation flags in Makevars ... OK
>>>>> > * checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS)
>>>>> ... OK
>>>>> > * checking examples ... ERROR
>>>>> > Error in paste(before, x, after, sep = "") : object 'exfile' not
>>>>> found
>>>>> > Execution halted
>>>>> >
>>>>> > To reproduce, put a call like this in an Rd section:
>>>>> >
>>>>> > \Sexpr[results=verbatim, stage=render]{x<- 1; stop("sexpr error")}
>>>>> >
>>>>> > The strange thing is that it occurs at the example checking step.
>>>>> > Not sure why it does not break before.
>>>>> >
>>>>> > Thank you.
>>>>> >
>>>>> > Renaud
>>>>> >
>>>>> > PS: I am on R version 2.13.2 (2011-09-30) - x86_64-pc-linux-gnu
>>>>> (64-bit)
>>>>> >
>>>>>
>>>>> I would update to 2.13.2 patched, or the release candidate of 2.14.0.
>>>>
>>>> Oops, sorry, 2.13.2 is "final", so I didn't backport the patch. 2.14.0
>>>> is what you should get.
>>>>
>>>> Duncan Murdoch
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Mon Oct 31 13:28:29 2011
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 31 Oct 2011 12:28:29 +0000 (GMT)
Subject: [Rd] R CMD check and error in an \Sexpr in an Rd file
In-Reply-To: <4EAE9345.5000209@cbio.uct.ac.za>
References: <4EAAC0DF.7060704@cbio.uct.ac.za> <4EAAC1F3.8020505@gmail.com>
	<4EAAC96A.2020803@gmail.com> <4EAE90FC.7010200@cbio.uct.ac.za>
	<4EAE926B.6040102@statistik.tu-dortmund.de>
	<4EAE9345.5000209@cbio.uct.ac.za>
Message-ID: <alpine.LFD.2.02.1110311225400.19333@gannet.stats.ox.ac.uk>

On Mon, 31 Oct 2011, Renaud Gaujoux wrote:

> I do not see it on main CRAN home page.

No, but see the announcement on R-announce this morning:
https://stat.ethz.ch/pipermail/r-help/2011-October/294203.html

Things which need human intervention can take some hours: the CRAN 
front page and binary distributions are two of those.

> Do you mean http://cran.r-project.org/src/base-prerelease/R-latest.tar.gz ?
>
> On 31/10/2011 14:19, Uwe Ligges wrote:
>> 
>> 
>> On 31.10.2011 13:13, Renaud Gaujoux wrote:
>>> Thank you Duncan.
>>> 
>>> I tried with:
>>> * using R version 2.14.0 RC (2011-10-24 r57417)
>>> * using platform: x86_64-unknown-linux-gnu (64-bit)
>>> 
>>> But I still get the errors for verbatim multiline and the strange error
>>> if an error occurs in \Sexpr.
>>> Is your patch included in this version? I will try now with
>>> R-rc_2011-10-27_r57452.tar.gz.
>> 
>> Try R-2.14.0, it is already released. Or R-devel.
>> 
>> Best,
>> Uwe Ligges
>> 
>> 
>>> 
>>> Renaud
>>> 
>>> On 28/10/2011 17:25, Duncan Murdoch wrote:
>>>> On 28/10/2011 10:53 AM, Duncan Murdoch wrote:
>>>>> On 28/10/2011 10:49 AM, Renaud Gaujoux wrote:
>>>>> > Hi,
>>>>> >
>>>>> > another Rd related issue I encountered is that if an error occurs
>>>>> in an
>>>>> > \Sexpr in an Rd file, then on get the following error:
>>>>> >
>>>>> > * checking for portable compilation flags in Makevars ... OK
>>>>> > * checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS) ... OK
>>>>> > * checking examples ... ERROR
>>>>> > Error in paste(before, x, after, sep = "") : object 'exfile' not found
>>>>> > Execution halted
>>>>> >
>>>>> > To reproduce, put a call like this in an Rd section:
>>>>> >
>>>>> > \Sexpr[results=verbatim, stage=render]{x<- 1; stop("sexpr error")}
>>>>> >
>>>>> > The strange thing is that it occurs at the example checking step.
>>>>> > Not sure why it does not break before.
>>>>> >
>>>>> > Thank you.
>>>>> >
>>>>> > Renaud
>>>>> >
>>>>> > PS: I am on R version 2.13.2 (2011-09-30) - x86_64-pc-linux-gnu
>>>>> (64-bit)
>>>>> >
>>>>> 
>>>>> I would update to 2.13.2 patched, or the release candidate of 2.14.0.
>>>> 
>>>> Oops, sorry, 2.13.2 is "final", so I didn't backport the patch. 2.14.0
>>>> is what you should get.
>>>> 
>>>> Duncan Murdoch
>>> 
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From pdalgd at gmail.com  Mon Oct 31 13:35:28 2011
From: pdalgd at gmail.com (peter dalgaard)
Date: Mon, 31 Oct 2011 13:35:28 +0100
Subject: [Rd] R CMD check and error in an \Sexpr in an Rd file
In-Reply-To: <4EAE9345.5000209@cbio.uct.ac.za>
References: <4EAAC0DF.7060704@cbio.uct.ac.za> <4EAAC1F3.8020505@gmail.com>
	<4EAAC96A.2020803@gmail.com> <4EAE90FC.7010200@cbio.uct.ac.za>
	<4EAE926B.6040102@statistik.tu-dortmund.de>
	<4EAE9345.5000209@cbio.uct.ac.za>
Message-ID: <312AD5D5-135F-417E-A157-69082C04FCE5@gmail.com>


On Oct 31, 2011, at 13:23 , Renaud Gaujoux wrote:

> I do not see it on main CRAN home page.
> Do you mean http://cran.r-project.org/src/base-prerelease/R-latest.tar.gz ?

Links need to be updated. Have a look in

http://cran.r-project.org/src/base/R-2

> 
> On 31/10/2011 14:19, Uwe Ligges wrote:
>> 
>> 
>> On 31.10.2011 13:13, Renaud Gaujoux wrote:
>>> Thank you Duncan.
>>> 
>>> I tried with:
>>> * using R version 2.14.0 RC (2011-10-24 r57417)
>>> * using platform: x86_64-unknown-linux-gnu (64-bit)
>>> 
>>> But I still get the errors for verbatim multiline and the strange error
>>> if an error occurs in \Sexpr.
>>> Is your patch included in this version? I will try now with
>>> R-rc_2011-10-27_r57452.tar.gz.
>> 
>> Try R-2.14.0, it is already released. Or R-devel.
>> 
>> Best,
>> Uwe Ligges
>> 
>> 
>>> 
>>> Renaud
>>> 
>>> On 28/10/2011 17:25, Duncan Murdoch wrote:
>>>> On 28/10/2011 10:53 AM, Duncan Murdoch wrote:
>>>>> On 28/10/2011 10:49 AM, Renaud Gaujoux wrote:
>>>>> > Hi,
>>>>> >
>>>>> > another Rd related issue I encountered is that if an error occurs
>>>>> in an
>>>>> > \Sexpr in an Rd file, then on get the following error:
>>>>> >
>>>>> > * checking for portable compilation flags in Makevars ... OK
>>>>> > * checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS) ... OK
>>>>> > * checking examples ... ERROR
>>>>> > Error in paste(before, x, after, sep = "") : object 'exfile' not found
>>>>> > Execution halted
>>>>> >
>>>>> > To reproduce, put a call like this in an Rd section:
>>>>> >
>>>>> > \Sexpr[results=verbatim, stage=render]{x<- 1; stop("sexpr error")}
>>>>> >
>>>>> > The strange thing is that it occurs at the example checking step.
>>>>> > Not sure why it does not break before.
>>>>> >
>>>>> > Thank you.
>>>>> >
>>>>> > Renaud
>>>>> >
>>>>> > PS: I am on R version 2.13.2 (2011-09-30) - x86_64-pc-linux-gnu
>>>>> (64-bit)
>>>>> >
>>>>> 
>>>>> I would update to 2.13.2 patched, or the release candidate of 2.14.0.
>>>> 
>>>> Oops, sorry, 2.13.2 is "final", so I didn't backport the patch. 2.14.0
>>>> is what you should get.
>>>> 
>>>> Duncan Murdoch
>>> 
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Peter Dalgaard, Professor
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From renaud at mancala.cbio.uct.ac.za  Mon Oct 31 13:44:11 2011
From: renaud at mancala.cbio.uct.ac.za (Renaud Gaujoux)
Date: Mon, 31 Oct 2011 14:44:11 +0200
Subject: [Rd] R CMD check and error in an \Sexpr in an Rd file
In-Reply-To: <alpine.LFD.2.02.1110311225400.19333@gannet.stats.ox.ac.uk>
References: <4EAAC0DF.7060704@cbio.uct.ac.za> <4EAAC1F3.8020505@gmail.com>
	<4EAAC96A.2020803@gmail.com> <4EAE90FC.7010200@cbio.uct.ac.za>
	<4EAE926B.6040102@statistik.tu-dortmund.de>
	<4EAE9345.5000209@cbio.uct.ac.za>
	<alpine.LFD.2.02.1110311225400.19333@gannet.stats.ox.ac.uk>
Message-ID: <4EAE981B.2090101@cbio.uct.ac.za>

Thank you very much Duncan, Uwe and Peter.
Sorry if I missed the announcement, I follow more r-devel than r-help, 
which I find a bit hard to quickly read.
Will try now on the 2.14.0.

Renaud

On 31/10/2011 14:28, Prof Brian Ripley wrote:
> On Mon, 31 Oct 2011, Renaud Gaujoux wrote:
>
>> I do not see it on main CRAN home page.
>
> No, but see the announcement on R-announce this morning:
> https://stat.ethz.ch/pipermail/r-help/2011-October/294203.html
>
> Things which need human intervention can take some hours: the CRAN 
> front page and binary distributions are two of those.
>
>> Do you mean 
>> http://cran.r-project.org/src/base-prerelease/R-latest.tar.gz ?
>>
>> On 31/10/2011 14:19, Uwe Ligges wrote:
>>>
>>>
>>> On 31.10.2011 13:13, Renaud Gaujoux wrote:
>>>> Thank you Duncan.
>>>>
>>>> I tried with:
>>>> * using R version 2.14.0 RC (2011-10-24 r57417)
>>>> * using platform: x86_64-unknown-linux-gnu (64-bit)
>>>>
>>>> But I still get the errors for verbatim multiline and the strange 
>>>> error
>>>> if an error occurs in \Sexpr.
>>>> Is your patch included in this version? I will try now with
>>>> R-rc_2011-10-27_r57452.tar.gz.
>>>
>>> Try R-2.14.0, it is already released. Or R-devel.
>>>
>>> Best,
>>> Uwe Ligges
>>>
>>>
>>>>
>>>> Renaud
>>>>
>>>> On 28/10/2011 17:25, Duncan Murdoch wrote:
>>>>> On 28/10/2011 10:53 AM, Duncan Murdoch wrote:
>>>>>> On 28/10/2011 10:49 AM, Renaud Gaujoux wrote:
>>>>>> > Hi,
>>>>>> >
>>>>>> > another Rd related issue I encountered is that if an error occurs
>>>>>> in an
>>>>>> > \Sexpr in an Rd file, then on get the following error:
>>>>>> >
>>>>>> > * checking for portable compilation flags in Makevars ... OK
>>>>>> > * checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS) 
>>>>>> ... OK
>>>>>> > * checking examples ... ERROR
>>>>>> > Error in paste(before, x, after, sep = "") : object 'exfile' 
>>>>>> not found
>>>>>> > Execution halted
>>>>>> >
>>>>>> > To reproduce, put a call like this in an Rd section:
>>>>>> >
>>>>>> > \Sexpr[results=verbatim, stage=render]{x<- 1; stop("sexpr error")}
>>>>>> >
>>>>>> > The strange thing is that it occurs at the example checking step.
>>>>>> > Not sure why it does not break before.
>>>>>> >
>>>>>> > Thank you.
>>>>>> >
>>>>>> > Renaud
>>>>>> >
>>>>>> > PS: I am on R version 2.13.2 (2011-09-30) - x86_64-pc-linux-gnu
>>>>>> (64-bit)
>>>>>> >
>>>>>>
>>>>>> I would update to 2.13.2 patched, or the release candidate of 
>>>>>> 2.14.0.
>>>>>
>>>>> Oops, sorry, 2.13.2 is "final", so I didn't backport the patch. 
>>>>> 2.14.0
>>>>> is what you should get.
>>>>>
>>>>> Duncan Murdoch
>>>>
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>


From maechler at stat.math.ethz.ch  Mon Oct 31 16:42:06 2011
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 31 Oct 2011 16:42:06 +0100
Subject: [Rd] R CMD check and error in an \Sexpr in an Rd file
In-Reply-To: <4EAE981B.2090101@cbio.uct.ac.za>
References: <4EAAC0DF.7060704@cbio.uct.ac.za> <4EAAC1F3.8020505@gmail.com>
	<4EAAC96A.2020803@gmail.com> <4EAE90FC.7010200@cbio.uct.ac.za>
	<4EAE926B.6040102@statistik.tu-dortmund.de>
	<4EAE9345.5000209@cbio.uct.ac.za>
	<alpine.LFD.2.02.1110311225400.19333@gannet.stats.ox.ac.uk>
	<4EAE981B.2090101@cbio.uct.ac.za>
Message-ID: <20142.49614.800768.930561@stat.math.ethz.ch>


    > Thank you very much Duncan, Uwe and Peter.  Sorry if I
    > missed the announcement, I follow more r-devel than
    > r-help, which I find a bit hard to quickly read.  

But please --- this concerns every one on R-devel ---
if you do not subscribe to R-help,
then do subscribe to R-announce -- that one has about
one posting *per month* and is really only for important
announcements (and basically reserved for R-core to post).

See a list of *all*  R-announce postings of  2011 :

  https://stat.ethz.ch/pipermail/r-announce/2011/date.html

with the 2.14.0 announcement at the end.

Martin Maechler, ETH Zurich


    > Will try now on the 2.14.0.

    > Renaud

    > On 31/10/2011 14:28, Prof Brian Ripley wrote:
    >> On Mon, 31 Oct 2011, Renaud Gaujoux wrote:
    >> 
    >>> I do not see it on main CRAN home page.
    >> 
    >> No, but see the announcement on R-announce this morning:
    >> https://stat.ethz.ch/pipermail/r-help/2011-October/294203.html
    >> 
    >> Things which need human intervention can take some hours:
    >> the CRAN front page and binary distributions are two of
    >> those.
    >> 
    >>> Do you mean
    >>> http://cran.r-project.org/src/base-prerelease/R-latest.tar.gz
    >>> ?
    >>> 
    >>> On 31/10/2011 14:19, Uwe Ligges wrote:
    >>>> 
    >>>> 
    >>>> On 31.10.2011 13:13, Renaud Gaujoux wrote:
    >>>>> Thank you Duncan.
    >>>>> 
    >>>>> I tried with: * using R version 2.14.0 RC (2011-10-24
    >>>>> r57417) * using platform: x86_64-unknown-linux-gnu
    >>>>> (64-bit)
    >>>>> 
    >>>>> But I still get the errors for verbatim multiline and
    >>>>> the strange error if an error occurs in \Sexpr.  Is
    >>>>> your patch included in this version? I will try now
    >>>>> with R-rc_2011-10-27_r57452.tar.gz.
    >>>> 
    >>>> Try R-2.14.0, it is already released. Or R-devel.
    >>>> 
    >>>> Best, Uwe Ligges
    >>>> 
    >>>> 
    >>>>> 
>>>> Renaud
>>>>
>>>> On 28/10/2011 17:25, Duncan Murdoch wrote:
>>>>> On 28/10/2011 10:53 AM, Duncan Murdoch wrote:
>>>>>> On 28/10/2011 10:49 AM, Renaud Gaujoux wrote:
>>>>>> > Hi,
>>>>>> >
>>>>>> > another Rd related issue I encountered is that if an error occurs
>>>>>> in an
>>>>>> > \Sexpr in an Rd file, then on get the following error:
>>>>>> >
>>>>>> > * checking for portable compilation flags in Makevars ... OK
>>>>>> > * checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS) 
>>>>>> ... OK
>>>>>> > * checking examples ... ERROR
>>>>>> > Error in paste(before, x, after, sep = "") : object 'exfile' 
>>>>>> not found
>>>>>> > Execution halted
>>>>>> >
>>>>>> > To reproduce, put a call like this in an Rd section:
>>>>>> >
>>>>>> > \Sexpr[results=verbatim, stage=render]{x<- 1; stop("sexpr error")}
>>>>>> >
>>>>>> > The strange thing is that it occurs at the example checking step.
>>>>>> > Not sure why it does not break before.
>>>>>> >
>>>>>> > Thank you.
>>>>>> >
>>>>>> > Renaud
>>>>>> >
>>>>>> > PS: I am on R version 2.13.2 (2011-09-30) - x86_64-pc-linux-gnu
>>>>>> (64-bit)
>>>>>> >
>>>>>>
>>>>>> I would update to 2.13.2 patched, or the release candidate of 
>>>>>> 2.14.0.
>>>>>
>>>>> Oops, sorry, 2.13.2 is "final", so I didn't backport the patch. 
>>>>> 2.14.0
>>>>> is what you should get.
>>>>>
>>>>> Duncan Murdoch
>>>>
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>

______________________________________________
R-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel


From kasperdanielhansen at gmail.com  Mon Oct 31 16:55:11 2011
From: kasperdanielhansen at gmail.com (Kasper Daniel Hansen)
Date: Mon, 31 Oct 2011 11:55:11 -0400
Subject: [Rd] R CMD check and error in an \Sexpr in an Rd file
In-Reply-To: <20142.49614.800768.930561@stat.math.ethz.ch>
References: <4EAAC0DF.7060704@cbio.uct.ac.za> <4EAAC1F3.8020505@gmail.com>
	<4EAAC96A.2020803@gmail.com> <4EAE90FC.7010200@cbio.uct.ac.za>
	<4EAE926B.6040102@statistik.tu-dortmund.de>
	<4EAE9345.5000209@cbio.uct.ac.za>
	<alpine.LFD.2.02.1110311225400.19333@gannet.stats.ox.ac.uk>
	<4EAE981B.2090101@cbio.uct.ac.za>
	<20142.49614.800768.930561@stat.math.ethz.ch>
Message-ID: <CAC2h7uu+NPQA9FcapcvnNk9Ao4mRT0vNg6yderVB_Yf_9uCfsw@mail.gmail.com>

Martin,

I am pretty sure (but I will probably be proven wrong) that when
r-announce was created it was stated that every email got sent to both
r-help and r-devel, and I see I have received emails from r-announce
in the past despite only being subscribed to r-devel and not r-help.
For example, I can find the announcement of R-2.13.0 (posted by P
Dalgaard) (and many earlier versions), but not R-2.13.1.  While I am
pretty sure I have only subscribed to r-help for a brief period many
years ago, I did switch my r-devel subscription from one email address
to another.

I infer from your email that r-announce emails are no longer sent to
r-devel subscribers (which is consistent with the text on
  https://stat.ethz.ch/mailman/listinfo/r-announce
).

Kasper


On Mon, Oct 31, 2011 at 11:42 AM, Martin Maechler
<maechler at stat.math.ethz.ch> wrote:
>
> ? ?> Thank you very much Duncan, Uwe and Peter. ?Sorry if I
> ? ?> missed the announcement, I follow more r-devel than
> ? ?> r-help, which I find a bit hard to quickly read.
>
> But please --- this concerns every one on R-devel ---
> if you do not subscribe to R-help,
> then do subscribe to R-announce -- that one has about
> one posting *per month* and is really only for important
> announcements (and basically reserved for R-core to post).
>
> See a list of *all* ?R-announce postings of ?2011 :
>
> ?https://stat.ethz.ch/pipermail/r-announce/2011/date.html
>
> with the 2.14.0 announcement at the end.
>
> Martin Maechler, ETH Zurich
>
>
> ? ?> Will try now on the 2.14.0.
>
> ? ?> Renaud
>
> ? ?> On 31/10/2011 14:28, Prof Brian Ripley wrote:
> ? ?>> On Mon, 31 Oct 2011, Renaud Gaujoux wrote:
> ? ?>>
> ? ?>>> I do not see it on main CRAN home page.
> ? ?>>
> ? ?>> No, but see the announcement on R-announce this morning:
> ? ?>> https://stat.ethz.ch/pipermail/r-help/2011-October/294203.html
> ? ?>>
> ? ?>> Things which need human intervention can take some hours:
> ? ?>> the CRAN front page and binary distributions are two of
> ? ?>> those.
> ? ?>>
> ? ?>>> Do you mean
> ? ?>>> http://cran.r-project.org/src/base-prerelease/R-latest.tar.gz
> ? ?>>> ?
> ? ?>>>
> ? ?>>> On 31/10/2011 14:19, Uwe Ligges wrote:
> ? ?>>>>
> ? ?>>>>
> ? ?>>>> On 31.10.2011 13:13, Renaud Gaujoux wrote:
> ? ?>>>>> Thank you Duncan.
> ? ?>>>>>
> ? ?>>>>> I tried with: * using R version 2.14.0 RC (2011-10-24
> ? ?>>>>> r57417) * using platform: x86_64-unknown-linux-gnu
> ? ?>>>>> (64-bit)
> ? ?>>>>>
> ? ?>>>>> But I still get the errors for verbatim multiline and
> ? ?>>>>> the strange error if an error occurs in \Sexpr. ?Is
> ? ?>>>>> your patch included in this version? I will try now
> ? ?>>>>> with R-rc_2011-10-27_r57452.tar.gz.
> ? ?>>>>
> ? ?>>>> Try R-2.14.0, it is already released. Or R-devel.
> ? ?>>>>
> ? ?>>>> Best, Uwe Ligges
> ? ?>>>>
> ? ?>>>>
> ? ?>>>>>
>>>>> Renaud
>>>>>
>>>>> On 28/10/2011 17:25, Duncan Murdoch wrote:
>>>>>> On 28/10/2011 10:53 AM, Duncan Murdoch wrote:
>>>>>>> On 28/10/2011 10:49 AM, Renaud Gaujoux wrote:
>>>>>>> > Hi,
>>>>>>> >
>>>>>>> > another Rd related issue I encountered is that if an error occurs
>>>>>>> in an
>>>>>>> > \Sexpr in an Rd file, then on get the following error:
>>>>>>> >
>>>>>>> > * checking for portable compilation flags in Makevars ... OK
>>>>>>> > * checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS)
>>>>>>> ... OK
>>>>>>> > * checking examples ... ERROR
>>>>>>> > Error in paste(before, x, after, sep = "") : object 'exfile'
>>>>>>> not found
>>>>>>> > Execution halted
>>>>>>> >
>>>>>>> > To reproduce, put a call like this in an Rd section:
>>>>>>> >
>>>>>>> > \Sexpr[results=verbatim, stage=render]{x<- 1; stop("sexpr error")}
>>>>>>> >
>>>>>>> > The strange thing is that it occurs at the example checking step.
>>>>>>> > Not sure why it does not break before.
>>>>>>> >
>>>>>>> > Thank you.
>>>>>>> >
>>>>>>> > Renaud
>>>>>>> >
>>>>>>> > PS: I am on R version 2.13.2 (2011-09-30) - x86_64-pc-linux-gnu
>>>>>>> (64-bit)
>>>>>>> >
>>>>>>>
>>>>>>> I would update to 2.13.2 patched, or the release candidate of
>>>>>>> 2.14.0.
>>>>>>
>>>>>> Oops, sorry, 2.13.2 is "final", so I didn't backport the patch.
>>>>>> 2.14.0
>>>>>> is what you should get.
>>>>>>
>>>>>> Duncan Murdoch
>>>>>
>>>>> ______________________________________________
>>>>> R-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From hintak_leung at yahoo.co.uk  Mon Oct 31 22:56:25 2011
From: hintak_leung at yahoo.co.uk (Hin-Tak Leung)
Date: Mon, 31 Oct 2011 21:56:25 +0000 (GMT)
Subject: [Rd] Sweave, cairo_pdf, xetex, CJK (Re:  Sweave, cairo_pdf, CJK,
	ghostscript)
In-Reply-To: <1319837755.2360.YahooMailClassic@web29514.mail.ird.yahoo.com>
Message-ID: <1320098185.89713.YahooMailClassic@web29515.mail.ird.yahoo.com>

I am still doing some cosmetic things (adding annotations with some of the really minority languages in Sichuan), but here are a few misc tips and quirks so far:

- cairo_pdf() behaves differently via "R CMD Sweave <file>" vs Sweave("file") within R. The former produces a lot of warnings about not being able to determine strwidth and have to substitute. Probably understandable, but still annoying.

- It generates pdf 1.5 - when used in combination with xetex, - which uses xdvipdfmx for pdf generation, and xdvipdfmx has the rather disturbing behavior of *silently* *skipping* included pdf's that's higher than the default (instead of do it with warning like pdfTeX) so no graphics will be included, unless xetex is run with -output-driver="xdvipdfmx -V 5"... to declare to output pdf 1.5 .

- xetex needs noae in \usepackage{SWeave}. FWIW, Werner Lemberg's CJK (the LaTeX package) can work without declaring noae, so that's my preferred choice at the moment, although I have got both of them working, for doing Chinese in a LaTeX document.

I think some of these information should go into the man page of cairo_pdf()...

--- On Fri, 28/10/11, Hin-Tak Leung <hintak_leung at yahoo.co.uk> wrote:

> Reading ?RWeaveLatex more carefully,
> I worked out that the outcome I want could be achieved
> without patching R, by having this towards the beginning:
> 
> <<custom=hide>>=
> ? cairo <- function(name, width, height, ...)
> ? grDevices::cairo_pdf(file = paste(name, "pdf", sep =
> "."),
> ? ? ? ? ? ? ? ?
> ? ? ???width = width, height =
> height)
> @
> 
> Then declaring grdevice= like this:
> 
> <<another1,fig=TRUE,pdf=FALSE,grdevice=cairo,eval=TRUE,width=6,height=3>>=
> grid.text("\u4F60\u597D", y=2/3,
> gp=gpar(fontfamily="CNS1"))
> @
> 
> So all is well. is there any chance of either updating
> ?RWeaveLatex with this actual use-case example, or make it
> easier with the attached patch (and updated version of what
> I did, just adding the corresponding documentation)? I
> thought there might be a a use for cairo_ps() as well, but
> then most people who can do latex could do pdflatex,
> especially those who has cairo installed.
> 
> FWIW, besides Chinese, I am doing Tibetan and Arabic as
> well - needed/wanted those two for Sichuan (south-western
> China) and Ningxia (northern western, just south of
> Mongolia).
> 
> --- On Sun, 23/10/11, Hin-Tak Leung <htl10 at users.sourceforge.net>
> wrote:
> 
> > --- On Sat, 22/10/11, Prof Brian
> > Ripley <ripley at stats.ox.ac.uk>
> > wrote:
> > 
> > > On Sat, 22 Oct 2011, Duncan Murdoch
> > > wrote:
> > > 
> > > > On 11-10-21 8:57 PM, Hin-Tak Leung wrote:
> > > >> I have had some fun in the last few
> days
> > trying to
> > > put together an annotated map of China with R
> and
> > some
> > > public GIS data:
> > > >> 
> > > >> http://sourceforge.net/projects/outmodedbonsai/files/snpMatrix%20next/1.17.7.11/China_Choropleth_Maps.pdf/download
> > > >> 
> > > >> It is done, and rather nice... there are
> a
> > few
> > > issues:
> > > >> 
> > > >> - the default pdf() device cannot do
> CJK
> > with
> > > embedded fonts - and cairo_pdf() is not hooked up
> to
> > Sweave
> > > yet. I have had a quick look, and it does not
> look
> > too
> > > complicated, other than the fact that cairo_pdf()
> is
> > > mutually exclusive with pdf(); and the jpeg/png
> are
> > new to
> > > 2.13 so it is probably just nobody has gotten
> round to
> > it.
> > > (and cairo_pdf() also behaves differently with
> the
> > onefile
> > > option). I guess I am almost saying I might get
> my
> > hand
> > > dirty or help somebody else who wants to. So it
> is
> > probably
> > > best to start some discussion.
> > > > 
> > > > It is not hard to write your own device
> > functions,
> > > especially in 2.14.0.? See rgl::rgl.Sweave for
> an
> > > example.
> > > 
> > > And guess what the example in the Sweave manual
> > uses??
> > > cairo_pdf() ...
> > 
> > I don't want a new device - I just wanted cairo_pdf()
> to be
> > hooked up to Sweave as an alternative to the default
> pdf().
> > See my later post with the patch against? R trunk
> and
> > the worked examples.
> > 
> > It looks like cairo_pdf() is just using my current
> > fontconfig settings.
> > 
> >


From simon.urbanek at r-project.org  Mon Oct 31 23:43:34 2011
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 31 Oct 2011 18:43:34 -0400
Subject: [Rd] Sweave, cairo_pdf, xetex, CJK (Re:  Sweave, cairo_pdf, CJK,
	ghostscript)
In-Reply-To: <1320098185.89713.YahooMailClassic@web29515.mail.ird.yahoo.com>
References: <1320098185.89713.YahooMailClassic@web29515.mail.ird.yahoo.com>
Message-ID: <1F45FA64-761D-432C-A523-8FE402FE127F@r-project.org>


On Oct 31, 2011, at 5:56 PM, Hin-Tak Leung wrote:

> I am still doing some cosmetic things (adding annotations with some of the really minority languages in Sichuan), but here are a few misc tips and quirks so far:
> 
> - cairo_pdf() behaves differently via "R CMD Sweave <file>" vs Sweave("file") within R. The former produces a lot of warnings about not being able to determine strwidth and have to substitute. Probably understandable, but still annoying.
> 
> - It generates pdf 1.5 - when used in combination with xetex, - which uses xdvipdfmx for pdf generation, and xdvipdfmx has the rather disturbing behavior of *silently* *skipping* included pdf's that's higher than the default (instead of do it with warning like pdfTeX) so no graphics will be included, unless xetex is run with -output-driver="xdvipdfmx -V 5"... to declare to output pdf 1.5 .
> 
> - xetex needs noae in \usepackage{SWeave}. FWIW, Werner Lemberg's CJK (the LaTeX package) can work without declaring noae, so that's my preferred choice at the moment, although I have got both of them working, for doing Chinese in a LaTeX document.
> 
> I think some of these information should go into the man page of cairo_pdf()...
> 

Well, I don't see how most of the above is in any way relevant. What PDF gets generated really depends on the cairo version you are using, not on R. Only most recent versions of Cairo (1.10.x) switched the format to PDF-1.5 and added format restriction functions, they are not available in general. In addition, PDF-1.5 is 8 years old, so whatever tools can't deal with it are seriously out of date.

Cheers,
Simon



> --- On Fri, 28/10/11, Hin-Tak Leung <hintak_leung at yahoo.co.uk> wrote:
> 
>> Reading ?RWeaveLatex more carefully,
>> I worked out that the outcome I want could be achieved
>> without patching R, by having this towards the beginning:
>> 
>> <<custom=hide>>=
>>   cairo <- function(name, width, height, ...)
>>   grDevices::cairo_pdf(file = paste(name, "pdf", sep =
>> "."),
>>                
>>        width = width, height =
>> height)
>> @
>> 
>> Then declaring grdevice= like this:
>> 
>> <<another1,fig=TRUE,pdf=FALSE,grdevice=cairo,eval=TRUE,width=6,height=3>>=
>> grid.text("\u4F60\u597D", y=2/3,
>> gp=gpar(fontfamily="CNS1"))
>> @
>> 
>> So all is well. is there any chance of either updating
>> ?RWeaveLatex with this actual use-case example, or make it
>> easier with the attached patch (and updated version of what
>> I did, just adding the corresponding documentation)? I
>> thought there might be a a use for cairo_ps() as well, but
>> then most people who can do latex could do pdflatex,
>> especially those who has cairo installed.
>> 
>> FWIW, besides Chinese, I am doing Tibetan and Arabic as
>> well - needed/wanted those two for Sichuan (south-western
>> China) and Ningxia (northern western, just south of
>> Mongolia).
>> 
>> --- On Sun, 23/10/11, Hin-Tak Leung <htl10 at users.sourceforge.net>
>> wrote:
>> 
>>> --- On Sat, 22/10/11, Prof Brian
>>> Ripley <ripley at stats.ox.ac.uk>
>>> wrote:
>>> 
>>>> On Sat, 22 Oct 2011, Duncan Murdoch
>>>> wrote:
>>>> 
>>>>> On 11-10-21 8:57 PM, Hin-Tak Leung wrote:
>>>>>> I have had some fun in the last few
>> days
>>> trying to
>>>> put together an annotated map of China with R
>> and
>>> some
>>>> public GIS data:
>>>>>> 
>>>>>> http://sourceforge.net/projects/outmodedbonsai/files/snpMatrix%20next/1.17.7.11/China_Choropleth_Maps.pdf/download
>>>>>> 
>>>>>> It is done, and rather nice... there are
>> a
>>> few
>>>> issues:
>>>>>> 
>>>>>> - the default pdf() device cannot do
>> CJK
>>> with
>>>> embedded fonts - and cairo_pdf() is not hooked up
>> to
>>> Sweave
>>>> yet. I have had a quick look, and it does not
>> look
>>> too
>>>> complicated, other than the fact that cairo_pdf()
>> is
>>>> mutually exclusive with pdf(); and the jpeg/png
>> are
>>> new to
>>>> 2.13 so it is probably just nobody has gotten
>> round to
>>> it.
>>>> (and cairo_pdf() also behaves differently with
>> the
>>> onefile
>>>> option). I guess I am almost saying I might get
>> my
>>> hand
>>>> dirty or help somebody else who wants to. So it
>> is
>>> probably
>>>> best to start some discussion.
>>>>> 
>>>>> It is not hard to write your own device
>>> functions,
>>>> especially in 2.14.0.  See rgl::rgl.Sweave for
>> an
>>>> example.
>>>> 
>>>> And guess what the example in the Sweave manual
>>> uses? 
>>>> cairo_pdf() ...
>>> 
>>> I don't want a new device - I just wanted cairo_pdf()
>> to be
>>> hooked up to Sweave as an alternative to the default
>> pdf().
>>> See my later post with the patch against  R trunk
>> and
>>> the worked examples.
>>> 
>>> It looks like cairo_pdf() is just using my current
>>> fontconfig settings.
>>> 
>>> 
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 


From aleixrvr.info at gmail.com  Mon Oct 31 16:53:27 2011
From: aleixrvr.info at gmail.com (Aleix Ruiz de Villa)
Date: Mon, 31 Oct 2011 16:53:27 +0100
Subject: [Rd] Question about copying reference objects using the initialize
	method
Message-ID: <CAGnmr57=uxTf+7POZ6=gOOuu5h4RmLJ_4VD1SvuhR1NtAaXuFQ@mail.gmail.com>

Dears,

I have a question about copying reference objects using the initialize method.

1) If the latter has no arguments, there is no problem to copy an object.

myClass = setRefClass("myClass", fields = list(value = "numeric") )

myClass$methods(initialize = function(...){

? value <<- 1

? callSuper(...)
})

newObject = myClass$new()
newObject$value = 2
copyObject = newObject$copy()
copyObject$value = 3
print(newObject$value)
print(copyObject$value)


2) However, if the initialize method has arguments, I get an error:

myClass = setRefClass("myClass", fields = list(value = "numeric") )
myClass$methods(initialize = function(extValue, ...){

? value <<- extValue

? callSuper(...)
})
newObject = myClass$new(extValue = 2)
copyObject = newObject$copy()

Error in .Object$initialize(...) :
  argument "extValue" is missing, with no default


I understand that copy() first builds another instance of the object
and then copies the fields. But it calls new without arguments...

3) One solution would be the initialize values by default

myClass = setRefClass("myClass", fields = list(value = "numeric") )

myClass$methods(initialize = function(extValue = 1, ...){

  value <<- extValue

  callSuper(...)
})

newObject = myClass$new(extValue = 2)
copyObject = newObject$copy()


But I have a long list of arguments, so this way would be a little
uncomfortable. On the other hand, I've been told that in OOP, the idea
of the initialise method is to use the minimum information to build
the oject. So passing a long list of arguments is not a good idea.


4) Another option is to first build the object and then set the parameters

myClass = setRefClass("myClass", fields = list(value = "numeric") )

myClass$methods(setPar = function(extValue = 1, ...){

  value <<- extValue

  return()
})

newObject = myClass$new()
newObject$setPar(extValue = 2)
copyObject = newObject$copy()


It works fine.

Anyway I am curious to know if there is any way to use the initialize
method with arguments that is not a problem with copy().


Thank!

Aleix Ruiz de Villa


