From edd @end|ng |rom deb|@n@org  Tue Apr  1 01:17:48 2025
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 31 Mar 2025 18:17:48 -0500
Subject: [Rd] R CMD check and CRAN's Rust policy
In-Reply-To: <4a3d45bb-9df2-4cc7-a7ef-5183f9613d03@gmail.com>
References: <6ea9752b54b347e682240bc024665cef@sund.ku.dk>
 <9CB72F1A-D397-4133-B8D6-C7B9CD04A4A1@R-project.org>
 <32ad0520e7784407b08ad105304b714b@sund.ku.dk>
 <66df3450-ed40-4d0c-b40b-626b75eabf0b@gmail.com>
 <CAL3ufUKSkMXpgSD6-o7dC7tZuD+DmpHaq2JUzuF9+9dosE+XEA@mail.gmail.com>
 <4eb96716-9f8c-4f4e-8d2d-a43feba44392@gmail.com>
 <df6bc0fc-1699-4691-a83c-1606d5db72a7@gmail.com>
 <19f561ae-d787-4f27-b3ba-f63c9b65fba5@gmail.com>
 <CAL3ufUJVe_jgfHH==EcfxuGiSbQ13KRXTSEP8-oYKafCPNR-+A@mail.gmail.com>
 <703123c9-c09e-4e14-8f4e-75ffd3c5931f@gmail.com>
 <CAL3ufULb0DDV94_m9kX2S2iTgiTqSaBUBo7ZD1PTVF6F-Gyb5A@mail.gmail.com>
 <17675b90-69a0-4f21-8d17-27aa2a8fda33@gmail.com>
 <483fe286-5a17-459c-8faf-f87208663188@gmail.com>
 <4a3d45bb-9df2-4cc7-a7ef-5183f9613d03@gmail.com>
Message-ID: <26603.8860.322941.868158@rob.eddelbuettel.com>


It is also pretty straightforward to roll your own actions and / or use
different, simpler YAML setups. I still use a 'rolled forward and maintained
by me now version' of the shell script many of us started with at Travis CI.
It works, is portable across multiple CI backend, and is still a shell script
and easy to customize. I eventually added basic actions that fetch it / do
the setup.  Would be easy to deploy a modified rcmdcheck with it too. It only
covers linux (where it works rather well with r2u for speed, ease of use and
reliability) and macOS, both arm64 and x86_64. See [1] if interested.

Dirk

[1] https://eddelbuettel.github.io/r-ci/

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr  1 01:20:00 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 31 Mar 2025 19:20:00 -0400
Subject: [Rd] R CMD check and CRAN's Rust policy
In-Reply-To: <4a3d45bb-9df2-4cc7-a7ef-5183f9613d03@gmail.com>
References: <6ea9752b54b347e682240bc024665cef@sund.ku.dk>
 <9CB72F1A-D397-4133-B8D6-C7B9CD04A4A1@R-project.org>
 <32ad0520e7784407b08ad105304b714b@sund.ku.dk>
 <66df3450-ed40-4d0c-b40b-626b75eabf0b@gmail.com>
 <CAL3ufUKSkMXpgSD6-o7dC7tZuD+DmpHaq2JUzuF9+9dosE+XEA@mail.gmail.com>
 <4eb96716-9f8c-4f4e-8d2d-a43feba44392@gmail.com>
 <df6bc0fc-1699-4691-a83c-1606d5db72a7@gmail.com>
 <19f561ae-d787-4f27-b3ba-f63c9b65fba5@gmail.com>
 <CAL3ufUJVe_jgfHH==EcfxuGiSbQ13KRXTSEP8-oYKafCPNR-+A@mail.gmail.com>
 <703123c9-c09e-4e14-8f4e-75ffd3c5931f@gmail.com>
 <CAL3ufULb0DDV94_m9kX2S2iTgiTqSaBUBo7ZD1PTVF6F-Gyb5A@mail.gmail.com>
 <17675b90-69a0-4f21-8d17-27aa2a8fda33@gmail.com>
 <483fe286-5a17-459c-8faf-f87208663188@gmail.com>
 <4a3d45bb-9df2-4cc7-a7ef-5183f9613d03@gmail.com>
Message-ID: <8866a57b-fa81-4993-be17-3d9095ebc1c5@gmail.com>

On 2025-03-31 4:50 p.m., Duncan Murdoch wrote:
> Just for fun I forked rcmdcheck and added arguments to it to allow
> particular messages to be changed in severity.
> 
> For example, if the WARNING message says something which matches the
> regexp "Compiled code should not call entry points which might terminate
> R" you could run
> 
>     rcmdcheck::rcmdcheck(".", demote = list(warnings = "Compiled code
> should not call entry points which might terminate R"))
> 
> and the warning will be counted as a NOTE.  The decision about whether
> to signal an error from the run will be based on the value after demotion.
> 
>    I haven't done anything with the Github action, but users can play
> with this fork if they like.  It can be installed using
> 
>     remotes::install_github("dmurdoch/rcmdcheck")

Sorry, that should be

   remotes::install_github("dmurdoch/rcmdcheck at demotions")

Duncan Murdoch

> 
> You can install custom builds in a Github action fairly easily, but it's
> hard to add a new argument to a call deep within the action script.  A
> simpler approach would be to fork my fork and set the default value for
> "demote" to whatever you want, then install your own fork during the
> Github action.
> 
> Comments are welcome.
> 
> Duncan Murdoch
> 
> 
> On 2025-03-31 1:48 p.m., Ben Bolker wrote:
>>
>>
>> On 2025-03-31 1:04 p.m., Duncan Murdoch wrote:
>>> On 2025-03-31 12:41 p.m., Josiah Parry wrote:
>>>> Duncan, the changes to symbols checking was introduced March 22nd see
>>>> https://bugs.r-project.org/show_bug.cgi?id=18789 <https://bugs.r-
>>>> project.org/show_bug.cgi?id=18789> and https://developer.r-
>>>> project.org/blosxom.cgi/R-devel/NEWS/2025/03/22#n2025-03-22 <https://
>>>> developer.r-project.org/blosxom.cgi/R-devel/
>>>> NEWS/2025/03/22#n2025-03-22>. But that is unrelated.
>>>
>>> Sorry, I missed that.
>>>
>>>>
>>>> To Tim's comment?the check is a simple grep of the installation?log
>>>> for "Downloading crates." This could be easily circumvented on CRAN
>>>> and locally by suppressing stdout/err. But that would be adversarial
>>>> and I would like to adhere to the intent of the check.
>>>
>>> I think Tim was suggesting that you modify your Github action to ignore
>>> this particular warning.? The warning would still appear, but it
>>> wouldn't cause a check failure.
>>>
>>> Duncan Murdoch
>>
>>      At a very quick look, I don't see an easy way to do that (but I am
>> admittedly really bad at doing stuff with Github actions). Maybe longer
>> term, but it feels like the best way to do this would be to request a
>> feature in `rcmdcheck` that allowed the user to request ignoring
>> specific warnings (e.g. specified by regexp?), then expose that feature
>> in the r-check-package action (or whatever it's called ...)
>>
>>>
>>>
>>>
>>>>
>>>>
>>>>
>>>> On Mon, Mar 31, 2025 at 9:23?AM Duncan Murdoch
>>>> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>>>>
>>>>   ??? On 2025-03-31 11:50 a.m., Josiah Parry wrote:
>>>>   ???? > Following up with this as I address the new R-devel "Compiled code
>>>>   ???? > should not call entry points which might terminate R" WARNING and
>>>>   ??? this
>>>>   ???? > issue has reared its head again.
>>>>   ???? >
>>>>   ???? > Would a path forward be an environment variable similar
>>>>   ???? > to?_R_CHECK_CRAN_INCOMING_ to skip this check primarily for GitHub
>>>>   ???? > Actions and CI?
>>>>
>>>>   ??? The "Compiled code should not call entry points which might
>>>>   ??? terminate R"
>>>>   ??? isn't a new warning.? I think the last change to it was made in 2022.
>>>>
>>>>   ??? Maybe your code, or code in one of the libraries you use, has
>>>> changed?
>>>>
>>>>   ??? Duncan Murdoch
>>>>
>>>>
>>>>
>>>>
>>>>   ???? >
>>>>   ???? > Or, alternatively, if this could be a NOTE when the `--as-cran`
>>>> flag
>>>>   ???? > isn't set but a WARNING when it is?
>>>>   ???? >
>>>>   ???? > Re-vendoring dependencies each time they are changed during the
>>>>   ???? > development lifecycle is quite a bit. However, vendoring once
>>>>   ??? prior to
>>>>   ???? > publishing makes good sense.
>>>>   ???? >
>>>>   ???? > Is there a balance we can strike here to lower development
>>>>   ??? friction but
>>>>   ???? > also ensure the robust package installation requirements when
>>>>   ??? expected?
>>>>   ???? >
>>>>   ???? > Using
>>>>   ???? >
>>>>   ???? >
>>>>   ???? >
>>>>   ???? >
>>>>   ???? > On Sun, Mar 2, 2025 at 11:42?AM Duncan Murdoch
>>>>   ??? <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>
>>>>   ???? > <mailto:murdoch.duncan at gmail.com
>>>>   ??? <mailto:murdoch.duncan at gmail.com>>> wrote:
>>>>   ???? >
>>>>   ???? >? ? ?On 2025-03-02 1:09 p.m., Ben Bolker wrote:
>>>>   ???? >? ? ? >? ? I, like Duncan, am just following along here. I think
>>>> there
>>>>   ???? >? ? ?might be
>>>>   ???? >? ? ? > two distinct questions which it would be useful to keep
>>>>   ??? distinct:
>>>>   ???? >? ? ? >
>>>>   ???? >? ? ? >? ? * how to silence the rust-check if desired?
>>>>   ???? >? ? ? >
>>>>   ???? >? ? ? >? ? ?rather than debating whether the rust-check should be
>>>>   ??? always-on,
>>>>   ???? >? ? ? > on-for-CRAN-only, etc., would it provide for useful
>>>>   ??? flexibility
>>>>   ???? >? ? ?to add
>>>>   ???? >? ? ? > an environment variable that enables/disables this
>>>>   ???? >? ? ?functionality?? There
>>>>   ???? >? ? ? > are already 168 of these environment variables, how much
>>>> would
>>>>   ???? >? ? ?one more
>>>>   ???? >? ? ? > cost?
>>>>   ???? >
>>>>   ???? >? ? ?I may have misunderstood Josiah.? I thought his message said
>>>>   ??? that it is
>>>>   ???? >? ? ?already easy to silence the check, by stopping the code from
>>>>   ??? issuing
>>>>   ???? >? ? ?the
>>>>   ???? >? ? ?message the check is looking for.
>>>>   ???? >
>>>>   ???? >? ? ?Presumably the package shouldn't do that, but if there's an
>>>>   ??? environment
>>>>   ???? >? ? ?variable that can be set to do it, then the repository or
>>>>   ??? user can
>>>>   ???? >? ? ?choose to do it, so there's no need for R to add another
>>>>   ??? environment
>>>>   ???? >? ? ?variable.
>>>>   ???? >
>>>>   ???? >? ? ?BTW, as far as I can see current R-devel doesn't issue an
>>>>   ??? error, it
>>>>   ???? >? ? ?just
>>>>   ???? >? ? ?issues warnings about two issues:
>>>>   ???? >
>>>>   ???? >? ? ? ? - the package is downloading crates
>>>>   ???? >? ? ? ? - the rustc compiler doesn't report a version number
>>>>   ???? >
>>>>   ???? >? ? ?Duncan Murdoch
>>>>   ???? >
>>>>   ???? >? ? ? >
>>>>   ???? >? ? ? >? ? ?I'm not sure how adding an environment variable to
>>>>   ??? allow easier
>>>>   ???? >? ? ? > user/alternate-repository control of the check is
>>>> "against the
>>>>   ???? >? ? ?spirit of
>>>>   ???? >? ? ? > the check" ...
>>>>   ???? >? ? ? >
>>>>   ???? >? ? ? >? ? ?All the existing check-regulating env variables ...
>>>>   ???? >? ? ? >
>>>>   ???? >? ? ? > cd src/library/tools/R
>>>>   ???? >? ? ? > grep 'Sys.getenv("_R_CHECK' * | sed -e
>>>>   ??? 's/^.*Sys.getenv(//' | sed -e
>>>>   ???? >? ? ? > 's/[,)].*//' | sort | uniq | wc
>>>>   ???? >? ? ? >
>>>>   ???? >? ? ? >
>>>>   ???? >? ? ? >? ? ?* should CRAN allow Rust crates to be downloaded?
>>>>   ???? >? ? ? >
>>>>   ???? >? ? ? >? ? ?This is a much more fundamental policy decision, which
>>>>   ??? I have no
>>>>   ???? >? ? ? > opinion about.
>>>>   ???? >? ? ? >
>>>>   ???? >? ? ? >? ? ?cheers
>>>>   ???? >? ? ? >? ? ? Ben Bolker
>>>>   ???? >? ? ? >
>>>>   ???? >? ? ? >
>>>>   ???? >? ? ? >
>>>>   ???? >? ? ? >
>>>>   ???? >? ? ? > On 2025-03-02 12:21 p.m., Duncan Murdoch wrote:
>>>>   ???? >? ? ? >> On 2025-03-02 11:03 a.m., Josiah Parry wrote:
>>>>   ???? >? ? ? >>> Well this has surely veered off course!
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>> As the one who filed the BugZilla report, I'd like to
>>>>   ??? redirect the
>>>>   ???? >? ? ? >>> conversation and provide further context.
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>> The question should?be /"how do we get a dialogue
>>>>   ??? started on this
>>>>   ???? >? ? ? >>> bugzilla issue before the next minor /
>>>>   ???? >? ? ? >>> /release of R?"/
>>>>   ???? >? ? ? >>
>>>>   ???? >? ? ? >> Isn't this exactly that dialogue?
>>>>   ???? >? ? ? >>
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>> The current check for Rust-based R package's downloading
>>>>   ??? external
>>>>   ???? >? ? ? >>> dependencies works by looking at
>>>>   ???? >? ? ? >>> the output logs for the presence of? "Downloading
>>>>   ??? crates." This
>>>>   ???? >? ? ?can is
>>>>   ???? >? ? ? >>> an entirely fine requirement for
>>>>   ???? >? ? ? >>> CRAN?however, due to the fact that it is an error,
>>>> packages
>>>>   ???? >? ? ? >>> distributed through other repositories
>>>>   ???? >? ? ? >>> fail the R-CMD check.
>>>>   ???? >? ? ? >>
>>>>   ???? >? ? ? >> I think you misunderstood me.? CRAN shares the view I
>>>>   ??? gave that you
>>>>   ???? >? ? ? >> should be able to run old code to reproduce old
>>>> results, but
>>>>   ???? >? ? ?they aren't
>>>>   ???? >? ? ? >> the only ones.? That's always been a goal of R.
>>>>   ???? >? ? ? >>
>>>>   ???? >? ? ? >>> Folks who use R-universe or PPM or some mysterious third
>>>>   ??? thing
>>>>   ???? >? ? ?may not
>>>>   ???? >? ? ? >>> share the same philosophy as
>>>>   ???? >? ? ? >>> CRAN and prefer the convenience of fetching the
>>>>   ??? dependencies at
>>>>   ???? >? ? ? >>> compile time and not vendoring them.
>>>>   ???? >? ? ? >>> An alternative would be for the check to be optionally
>>>>   ??? skipped or
>>>>   ???? >? ? ? >>> become a NOTE when the CRAN
>>>>   ???? >? ? ? >>> flag is not set and an ERROR otherwise. Skipping this
>>>> CRAN
>>>>   ???? >? ? ?check is as
>>>>   ???? >? ? ? >>> easy as adding `--quiet`
>>>>   ???? >? ? ? >>> or setting an environment variable?but that is against
>>>> the
>>>>   ???? >? ? ?spirit of
>>>>   ???? >? ? ? >>> the check.
>>>>   ???? >? ? ? >>
>>>>   ???? >? ? ? >> If it is that easy to skip the check, then I really
>>>> don't see
>>>>   ???? >? ? ?the issue.
>>>>   ???? >? ? ? >>? ??Just ask the repository where you want to put your
>>>>   ??? package to
>>>>   ???? >? ? ?put that
>>>>   ???? >? ? ? >> option or environment variable in place, and there's no
>>>>   ??? longer a
>>>>   ???? >? ? ?problem.
>>>>   ???? >? ? ? >>
>>>>   ???? >? ? ? >> Duncan Murdoch
>>>>   ???? >? ? ? >>
>>>>   ???? >? ? ? >>> Ideally, the check can remain, but scoped appropriately.
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>> On Sun, Mar 2, 2025 at 6:49?AM Duncan Murdoch
>>>>   ???? >? ? ? >>> <murdoch.duncan at gmail.com
>>>>   ??? <mailto:murdoch.duncan at gmail.com> <mailto:murdoch.duncan at gmail.com
>>>>   ??? <mailto:murdoch.duncan at gmail.com>>
>>>>   ???? >? ? ?<mailto:murdoch.duncan at gmail.com
>>>>   ??? <mailto:murdoch.duncan at gmail.com> <mailto:murdoch.duncan at gmail.com
>>>>   ??? <mailto:murdoch.duncan at gmail.com>>>>
>>>>   ???? >? ? ?wrote:
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>>? ??? You seem to be taking a confontational tone, which
>>>>   ??? isn't
>>>>   ???? >? ? ?likely to
>>>>   ???? >? ? ? >>>? ??? encourage a reasonable dialogue.
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>>? ??? I've looked for other messages on this, and didn't
>>>>   ??? see any
>>>>   ???? >? ? ?besides
>>>>   ???? >? ? ? >>> this
>>>>   ???? >? ? ? >>>? ??? one explaining why including check_rust() in the
>>>>   ??? checks is
>>>>   ???? >? ? ?a problem.
>>>>   ???? >? ? ? >>>? ??? The problem you talk about here is that it
>>>> encourages
>>>>   ???? >? ? ?vendoring,
>>>>   ???? >? ? ? >>> which
>>>>   ???? >? ? ? >>>? ??? makes it harder for package authors to count
>>>> downloads.
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>>? ??? To be honest, that doesn't seem like a very serious
>>>>   ???? >? ? ?problem.? I
>>>>   ???? >? ? ? >>> assume
>>>>   ???? >? ? ? >>>? ??? the packages ("crates") we are talking about are
>>>> open
>>>>   ???? >? ? ?source, so
>>>>   ???? >? ? ? >>>? ??? this is
>>>>   ???? >? ? ? >>>? ??? entirely in the spirit of how they are allowed to be
>>>>   ???? >? ? ?distributed.
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>>? ??? If they aren't open source, then users of those
>>>>   ??? packages
>>>>   ???? >? ? ?should be
>>>>   ???? >? ? ? >>>? ??? warned about that, and a check failure is a good
>>>>   ??? way to do
>>>>   ???? >? ? ?that.
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>>? ??? So you need to explain why it is important to be
>>>>   ??? able to
>>>>   ???? >? ? ?download and
>>>>   ???? >? ? ? >>>? ??? install software and not be warned about it.
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>>? ??? I am not in R Core or CRAN, but I can suggest why
>>>> it is
>>>>   ???? >? ? ?better to
>>>>   ???? >? ? ? >>>? ??? include source in the package:? it makes the use of
>>>>   ??? that
>>>>   ???? >? ? ?package more
>>>>   ???? >? ? ? >>>? ??? reliable in the future.? It's not uncommon to run
>>>> an R
>>>>   ???? >? ? ?computation
>>>>   ???? >? ? ? >>> that
>>>>   ???? >? ? ? >>>? ??? was written a few years ago.? Sometimes libraries
>>>> or R
>>>>   ???? >? ? ?have changed,
>>>>   ???? >? ? ? >>>? ??? and
>>>>   ???? >? ? ? >>>? ??? a user will need to go back to a previous version to
>>>>   ???? >? ? ?reproduce the
>>>>   ???? >? ? ? >>>? ??? calculation.? Being able to able to rebuild a
>>>>   ??? system as it
>>>>   ???? >? ? ?would have
>>>>   ???? >? ? ? >>>? ??? been back then is important.
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>>? ??? Is that possible if the package needs to make a
>>>>   ??? download?? The
>>>>   ???? >? ? ? >>> download
>>>>   ???? >? ? ? >>>? ??? site that worked a few years ago may no longer
>>>>   ??? exist.? If
>>>>   ???? >? ? ?the site
>>>>   ???? >? ? ? >>>? ??? exists, the code versions there may be different.
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>>? ??? Those are some of the issues that Simon was
>>>>   ??? alluding to.
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>>? ??? Duncan Murdoch
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>>? ??? On 2025-03-02 5:45 a.m., Mossa Merhi Reimert via
>>>>   ??? R-devel
>>>>   ???? >? ? ?wrote:
>>>>   ???? >? ? ? >>>? ???? > Dear Simon Urbanek,
>>>>   ???? >? ? ? >>>? ???? >
>>>>   ???? >? ? ? >>>? ???? > There has been very little engagement with the
>>>>   ??? issue I
>>>>   ???? >? ? ?referred
>>>>   ???? >? ? ? >>>? ??? to. If it was decided that this ?check? ought to be
>>>>   ??? part
>>>>   ???? >? ? ?of the
>>>>   ???? >? ? ? >>>? ??? default checks for R,
>>>>   ???? >? ? ? >>>? ???? > then that could have been written to us. Either
>>>>   ??? on the
>>>>   ???? >? ? ? >>> bugs.r-project.org <http://bugs.r-project.org>
>>>>   ??? <http://bugs.r-project.org <http://bugs.r-project.org>>
>>>>   ???? >? ? ?<http://bugs.r-project.org <http://bugs.r-project.org>
>>>>   ??? <http://bugs.r-project.org <http://bugs.r-project.org>>> or the
>>>> proposed
>>>>   ???? >? ? ? >>>? ??? patch. Before we talk about anything else,
>>>>   ???? >? ? ? >>>? ???? > it does seem very strange that we cannot get a
>>>>   ??? reasonable
>>>>   ???? >? ? ? >>>? ??? dialogue going.
>>>>   ???? >? ? ? >>>? ???? >
>>>>   ???? >? ? ? >>>? ???? > I would like to say that the R/Rust community
>>>>   ??? has grown
>>>>   ???? >? ? ? >>>? ??? substantially. From my end, there are 3 bindings
>>>>   ??? project,
>>>>   ???? >? ? ?extendr,
>>>>   ???? >? ? ? >>>? ??? savvy, and roxido.
>>>>   ???? >? ? ? >>>? ???? > Then, there are now many rust-based packages on
>>>>   ??? CRAN,
>>>>   ???? >? ? ?see this
>>>>   ???? >? ? ? >>>? ??? most recent compiled list
>>>>   ???? > https://github.com/nanxstats/r-rust-pkgs
>>>>   ??? <https://github.com/nanxstats/r-rust-pkgs>
>>>>   ???? >? ? ?<https://github.com/nanxstats/r-rust-pkgs
>>>>   ??? <https://github.com/nanxstats/r-rust-pkgs>>
>>>>   ???? >? ? ? >>>? ??? <https://github.com/nanxstats/r-rust-pkgs
>>>>   ??? <https://github.com/nanxstats/r-rust-pkgs>
>>>>   ???? >? ? ?<https://github.com/nanxstats/r-rust-pkgs
>>>>   ??? <https://github.com/nanxstats/r-rust-pkgs>>>.
>>>>   ???? >? ? ? >>>? ???? > There is also proof-of-concept
>>>>   ???? >? ? ? >>> https://github.com/r-rust/hellorust
>>>>   ??? <https://github.com/r-rust/hellorust>
>>>>   ???? >? ? ?<https://github.com/r-rust/hellorust
>>>>   ??? <https://github.com/r-rust/hellorust>>
>>>>   ???? >? ? ? >>>? ??? <https://github.com/r-rust/hellorust
>>>>   ??? <https://github.com/r-rust/hellorust>
>>>>   ???? >? ? ?<https://github.com/r-rust/hellorust
>>>>   ??? <https://github.com/r-rust/hellorust>>> that integrates `cargo`,
>>>>   ???? >? ? ? >>>? ??? rust?s official build system, with R?s package
>>>>   ??? build system,
>>>>   ???? >? ? ? >>>? ???? > and https://github.com/extendr/hellorustc
>>>>   ??? <https://github.com/extendr/hellorustc>
>>>>   ???? >? ? ?<https://github.com/extendr/hellorustc
>>>>   ??? <https://github.com/extendr/hellorustc>>
>>>>   ???? >? ? ? >>>? ??? <https://github.com/extendr/hellorustc
>>>>   ??? <https://github.com/extendr/hellorustc>
>>>>   ???? >? ? ?<https://github.com/extendr/hellorustc
>>>>   ??? <https://github.com/extendr/hellorustc>>>, which showcases how Rust
>>>>   ???? >? ? ? >>>? ??? compiler could be directly linked with R?s package
>>>>   ??? system.
>>>>   ???? >? ? ? >>>? ???? >
>>>>   ???? >? ? ? >>>? ???? >? ?Let me say, that the current R CMD check is
>>>>   ??? not meant
>>>>   ???? >? ? ?to be
>>>>   ???? >? ? ? >>>? ??? ?helpful?. When a package is built, `cargo` tells
>>>>   ??? the user
>>>>   ???? >? ? ? >>>? ??? ?Downloading crates?.
>>>>   ???? >? ? ? >>>? ???? > Thus, this information is already conveyed to
>>>>   ??? the user.
>>>>   ???? >? ? ? >>>? ???? >
>>>>   ???? >? ? ? >>>? ???? > Personally, I do wish we could debate this
>>>>   ??? requirement
>>>>   ???? >? ? ?further. I
>>>>   ???? >? ? ? >>>? ??? do not believe that having R-packages on CRAN
>>>>   ??? vendor rust
>>>>   ???? >? ? ? >>> dependencies
>>>>   ???? >? ? ? >>>? ???? > as a good policy. Download statistics is a
>>>> success
>>>>   ???? >? ? ?metric of a
>>>>   ???? >? ? ? >>>? ??? given r-package and rust packages. By insisting on
>>>>   ???? >? ? ?vendoring, and
>>>>   ???? >? ? ? >>> thus
>>>>   ???? >? ? ? >>>? ???? > side-stepping `cargo` / crates.io
>>>>   ??? <http://crates.io> <http://crates.io <http://crates.io>>
>>>>   ???? >? ? ?<http://crates.io <http://crates.io> <http://crates.io
>>>>   ??? <http://crates.io>>>, we are
>>>>   ???? >? ? ? >>>? ??? robbing upstream authors of their download-numbers.
>>>>   ??? I do
>>>>   ???? >? ? ?not think
>>>>   ???? >? ? ? >>>? ??? such policy is honourable.
>>>>   ???? >? ? ? >>>? ???? >
>>>>   ???? >? ? ? >>>? ???? > While C/C++ do not have official package
>>>>   ??? repositories,
>>>>   ???? >? ? ?it could
>>>>   ???? >? ? ? >>>? ??? be thought of, as fair game, to have CRAN act as a
>>>>   ??? pseudo
>>>>   ???? >? ? ?package
>>>>   ???? >? ? ? >>>? ??? manager for C/C++ libraries.
>>>>   ???? >? ? ? >>>? ???? > I?m not going to argue for or against this part.
>>>>   ???? >? ? ? >>>? ???? >
>>>>   ???? >? ? ? >>>? ???? > There are many objections from the CRAN side to
>>>>   ??? all things
>>>>   ???? >? ? ? >>>? ??? related to Rust. I don?t want to open multiple
>>>>   ??? topics in
>>>>   ???? >? ? ?the same
>>>>   ???? >? ? ? >>>? ??? thread.
>>>>   ???? >? ? ? >>>? ???? > But there is plenty to bring up. And I had
>>>> hoped we
>>>>   ???? >? ? ?could talk
>>>>   ???? >? ? ? >>>? ??? this little issue through, before embarking on a
>>>> larger
>>>>   ???? >? ? ?discussion.
>>>>   ???? >? ? ? >>>? ???? > I do not appreciate the ?random demands?
>>>> comment, as
>>>>   ???? >? ? ?this is not
>>>>   ???? >? ? ? >>>? ??? a demand, nor is it random.
>>>>   ???? >? ? ? >>>? ???? > I have inquired my end of the community for
>>>>   ??? suggestions
>>>>   ???? >? ? ? >>>? ???? > to compile a larger proposal, but then I was
>>>> afraid
>>>>   ???? >? ? ?that this
>>>>   ???? >? ? ? >>>? ??? would be perceived as a big, bulky demand.
>>>>   ???? >? ? ? >>>? ???? >
>>>>   ???? >? ? ? >>>? ???? > Rust is not C/C++/Java, and the support for Rust
>>>>   ??? cannot
>>>>   ???? >? ? ?look like
>>>>   ???? >? ? ? >>>? ??? the support for these languages.
>>>>   ???? >? ? ? >>>? ???? >
>>>>   ???? >? ? ? >>>? ???? >
>>>>   ???? >? ? ? >>>? ???? >
>>>>   ???? >? ? ? >>>? ???? > From: Simon Urbanek <simon.urbanek at R-project.org>
>>>>   ???? >? ? ? >>>? ???? > Date: Sunday, 2 March 2025 at 00.39
>>>>   ???? >? ? ? >>>? ???? > To: Mossa Merhi Reimert <mossa at sund.ku.dk
>>>>   ??? <mailto:mossa at sund.ku.dk>
>>>>   ???? >? ? ?<mailto:mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>>
>>>>   ???? >? ? ? >>> <mailto:mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>
>>>>   ??? <mailto:mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>>>>
>>>>   ???? >? ? ? >>>? ???? > Cc: r-devel at r-project.org
>>>>   ??? <mailto:r-devel at r-project.org>
>>>>   ???? >? ? ?<mailto:r-devel at r-project.org <mailto:r-devel at r-project.org>>
>>>>   ??? <mailto:r-devel at r-project.org <mailto:r-devel at r-project.org>
>>>>   ???? >? ? ?<mailto:r-devel at r-project.org <mailto:r-devel at r-project.org>>>
>>>>   ???? >? ? ? >>>? ??? <r-devel at r-project.org
>>>>   ??? <mailto:r-devel at r-project.org> <mailto:r-devel at r-project.org
>>>>   ??? <mailto:r-devel at r-project.org>>
>>>>   ???? >? ? ?<mailto:r-devel at r-project.org <mailto:r-devel at r-project.org>
>>>>   ??? <mailto:r-devel at r-project.org <mailto:r-devel at r-project.org>>>>
>>>>   ???? >? ? ? >>>? ???? > Subject: Re: [Rd] R CMD check and CRAN's Rust
>>>> policy
>>>>   ???? >? ? ? >>>? ???? > [Du f?r ikke ofte mails fra
>>>>   ??? simon.urbanek at r-project.org <mailto:simon.urbanek at r-project.org>
>>>>   ???? >? ? ?<mailto:simon.urbanek at r-project.org
>>>>   ??? <mailto:simon.urbanek at r-project.org>>
>>>>   ???? >? ? ? >>>? ??? <mailto:simon.urbanek at r-project.org
>>>>   ??? <mailto:simon.urbanek at r-project.org>
>>>>   ???? >? ? ?<mailto:simon.urbanek at r-project.org
>>>>   ??? <mailto:simon.urbanek at r-project.org>>>. F? mere at vide om, hvorfor
>>>>   ???? >? ? ? >>>? ??? dette er vigtigt, p?
>>>>   ???? > https://aka.ms/LearnAboutSenderIdentification
>>>>   ??? <https://aka.ms/LearnAboutSenderIdentification>
>>>>   ???? >? ? ?<https://aka.ms/LearnAboutSenderIdentification
>>>>   ??? <https://aka.ms/LearnAboutSenderIdentification>>
>>>>   ???? >? ? ? >>>? ??? <https://aka.ms/LearnAboutSenderIdentification
>>>>   ??? <https://aka.ms/LearnAboutSenderIdentification>
>>>>   ???? >? ? ?<https://aka.ms/LearnAboutSenderIdentification
>>>>   ??? <https://aka.ms/LearnAboutSenderIdentification>>> ]
>>>>   ???? >? ? ? >>>? ???? >
>>>>   ???? >? ? ? >>>? ???? > Mossa,
>>>>   ???? >? ? ? >>>? ???? >
>>>>   ???? >? ? ? >>>? ???? > the issue you cite is lacking any pertinent
>>>>   ??? information
>>>>   ???? >? ? ?and it's
>>>>   ???? >? ? ? >>>? ??? not even clear why it should be an issue. The
>>>> check is
>>>>   ???? >? ? ?perfectly
>>>>   ???? >? ? ? >>>? ??? justified, it just reports whether a package
>>>> using rust
>>>>   ???? >? ? ?declares
>>>>   ???? >? ? ? >>>? ??? this correctly and where it downloads 3rd party
>>>>   ??? content -
>>>>   ???? >? ? ?something
>>>>   ???? >? ? ? >>>? ??? that is important to R users in general and not
>>>>   ??? related to
>>>>   ???? >? ? ?CRAN. I
>>>>   ???? >? ? ? >>>? ??? don't see how any of this is "prohibitive" it just
>>>>   ??? calls
>>>>   ???? >? ? ?out what
>>>>   ???? >? ? ? >>>? ??? the package is already doing.
>>>>   ???? >? ? ? >>>? ???? >
>>>>   ???? >? ? ? >>>? ???? > As discussed before, my hope was that the "R"ust
>>>>   ???? >? ? ?community will
>>>>   ???? >? ? ? >>>? ??? mature enough to work on proper support. It is not
>>>>   ??? clear
>>>>   ???? >? ? ?that it
>>>>   ???? >? ? ? >>>? ??? happened yet, but once it does it would make sense
>>>>   ??? to talk
>>>>   ???? >? ? ?about
>>>>   ???? >? ? ? >>>? ??? support just as we have for C, C++ and Java, so
>>>>   ??? certainly that
>>>>   ???? >? ? ? >>>? ??? should be the right discussion. However, it will
>>>>   ??? have to
>>>>   ???? >? ? ?start with
>>>>   ???? >? ? ? >>>? ??? some thinking and a proposal on how the associated
>>>>   ??? issues
>>>>   ???? >? ? ?(compiler
>>>>   ???? >? ? ? >>>? ??? support, versioning, dependency sources etc.) are
>>>> to be
>>>>   ???? >? ? ?addressed,
>>>>   ???? >? ? ? >>>? ??? as opposed to making random demands. All this has
>>>>   ??? nothing
>>>>   ???? >? ? ?to do with
>>>>   ???? >? ? ? >>>? ??? CRAN so the issue you mention seems irrelevant to
>>>> the
>>>>   ???? >? ? ?progress. Also
>>>>   ???? >? ? ? >>>? ??? I'd like to know what are the "challenges
>>>> embedded in R
>>>>   ???? >? ? ?itself".
>>>>   ???? >? ? ? >>>? ???? >
>>>>   ???? >? ? ? >>>? ???? > Cheers,
>>>>   ???? >? ? ? >>>? ???? > Simon
>>>>   ???? >? ? ? >>>? ???? >
>>>>   ???? >? ? ? >>>? ???? >
>>>>   ???? >? ? ? >>>? ???? >> On Mar 2, 2025, at 8:45 AM, Mossa Merhi
>>>> Reimert via
>>>>   ???? >? ? ?R-devel
>>>>   ???? >? ? ? >>>? ??? <r-devel at r-project.org
>>>>   ??? <mailto:r-devel at r-project.org> <mailto:r-devel at r-project.org
>>>>   ??? <mailto:r-devel at r-project.org>>
>>>>   ???? >? ? ?<mailto:r-devel at r-project.org <mailto:r-devel at r-project.org>
>>>>   ??? <mailto:r-devel at r-project.org <mailto:r-devel at r-project.org>>>>
>>>> wrote:
>>>>   ???? >? ? ? >>>? ???? >>
>>>>   ???? >? ? ? >>>? ???? >> Hello everyone!
>>>>   ???? >? ? ? >>>? ???? >>
>>>>   ???? >? ? ? >>>? ???? >> I'm Mossa, I'm one of the maintainers of
>>>>   ??? extendr, an
>>>>   ???? >? ? ?automated
>>>>   ???? >? ? ? >>>? ??? generation of bindings project for
>>>>   ???? >? ? ? >>>? ???? >> Rust code, for use in R-packages.
>>>>   ???? >? ? ? >>>? ???? >>
>>>>   ???? >? ? ? >>>? ???? >> I'm writing to you, as R 4.4.3 was just
>>>>   ??? released, and
>>>>   ???? >? ? ?there have
>>>>   ???? >? ? ? >>>? ??? not been
>>>>   ???? >? ? ? >>>? ???? >> follow-up on an issue important to us. Link
>>>> to the
>>>>   ???? >? ? ?issue as
>>>>   ???? >? ? ? >>>? ??? discussed on r-devel
>>>>   ???? >? ? ? >>>? ???? >>
>>>>   ???? > https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html
>>>>   ??? <https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html>
>>>>   ???? > ???? ?<https://stat.ethz.ch/pipermail/r-devel/2024-
>>>> October/083666.html
>>>>   ??? <https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html>>
>>>>   ???? >? ? ? >>>
>>>>   ???? > ???? ?<https://stat.ethz.ch/pipermail/r-devel/2024-
>>>> October/083666.html
>>>>   ??? <https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html>
>>>>   ???? > ???? ?<https://stat.ethz.ch/pipermail/r-devel/2024-
>>>> October/083666.html
>>>>   ??? <https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html>>>
>>>>   ???? >? ? ? >>>? ???? >>
>>>>   ???? >? ? ? >>>? ???? >> A community member has provided a suggestion
>>>> to a
>>>>   ???? >? ? ?patch here
>>>>   ???? >? ? ? >>> https://github.com/r-devel/r-svn/pull/182
>>>>   ??? <https://github.com/r-devel/r-svn/pull/182>
>>>>   ???? >? ? ?<https://github.com/r-devel/r-svn/pull/182
>>>>   ??? <https://github.com/r-devel/r-svn/pull/182>>
>>>>   ???? >? ? ? >>>? ??? <https://github.com/r-devel/r-svn/pull/182
>>>>   ??? <https://github.com/r-devel/r-svn/pull/182>
>>>>   ???? >? ? ?<https://github.com/r-devel/r-svn/pull/182
>>>>   ??? <https://github.com/r-devel/r-svn/pull/182>>>, and we have also
>>>>   ???? >? ? ? >>>? ??? attempted to bring it up on
>>>>   ???? >? ? ? >>>? ???? >> Bugzilla:
>>>>   ???? > https://bugs.r-project.org/show_bug.cgi?id=18806
>>>>   ??? <https://bugs.r-project.org/show_bug.cgi?id=18806>
>>>>   ???? >? ? ?<https://bugs.r-project.org/show_bug.cgi?id=18806
>>>>   ??? <https://bugs.r-project.org/show_bug.cgi?id=18806>>
>>>>   ???? >? ? ? >>>? ??? <https://bugs.r-project.org/show_bug.cgi?id=18806
>>>>   ??? <https://bugs.r-project.org/show_bug.cgi?id=18806>
>>>>   ???? >? ? ?<https://bugs.r-project.org/show_bug.cgi?id=18806
>>>>   ??? <https://bugs.r-project.org/show_bug.cgi?id=18806>>>
>>>>   ???? >? ? ? >>>? ???? >>
>>>>   ???? >? ? ? >>>? ???? >> TLDR: Default `R CMD check` uses additional
>>>>   ???? >? ? ?CRAN-specific checks
>>>>   ???? >? ? ? >>>? ??? for Rust,
>>>>   ???? >? ? ? >>>? ???? >> instead of keeping this behind the --as-cran
>>>> flag.
>>>>   ???? >? ? ? >>>? ???? >>
>>>>   ???? >? ? ? >>>? ???? >> I would like to say, that there is a growing
>>>>   ??? interest
>>>>   ???? >? ? ?in Rust
>>>>   ???? >? ? ? >>>? ??? within the R community.
>>>>   ???? >? ? ? >>>? ???? >> And generally, Rust becoming a widely adopted
>>>>   ??? language
>>>>   ???? >? ? ?within
>>>>   ???? >? ? ? >>>? ??? the Python community (including the scientific part
>>>>   ??? of that
>>>>   ???? >? ? ? >>>? ??? community). It is time to deal with the
>>>>   ???? >? ? ? >>>? ???? >> pain points with using Rust in R.
>>>>   ???? >? ? ? >>>? ???? >>
>>>>   ???? >? ? ? >>>? ???? >> Therefore, I would kindly ask that we have a
>>>>   ??? dialogue
>>>>   ???? >? ? ?on how to
>>>>   ???? >? ? ? >>>? ??? remedy the issue above first, and how we may deal
>>>> with
>>>>   ???? >? ? ?other issues
>>>>   ???? >? ? ? >>>? ??? going forward. There are both challenges embedded
>>>> in R
>>>>   ???? >? ? ?itself, and
>>>>   ???? >? ? ? >>>? ??? the current CRAN policy for Rust is prohibitive.
>>>>   ???? >? ? ? >>>? ???? >>
>>>>   ???? >? ? ? >>>? ???? >>
>>>>   ???? >? ? ? >>>? ???? >>
>>>>   ???? >? ? ? >>>? ???? >> Mossa Merhi Reimert
>>>>   ???? >? ? ? >>>? ???? >> Postdoctoral Researcher
>>>>   ???? >? ? ? >>>? ???? >>
>>>>   ???? >? ? ? >>>? ???? >> K?benhavns Universitet
>>>>   ???? >? ? ? >>>? ???? >> Department of Veterinary and Animal Sciences
>>>>   ???? >? ? ? >>>? ???? >> Animal Welfare and Disease Control
>>>>   ???? >? ? ? >>>? ???? >> Gr?nneg?rdsvej 8
>>>>   ???? >? ? ? >>>? ???? >> 1870 Frederiksberg C
>>>>   ???? >? ? ? >>>? ???? >> Denmark
>>>>   ???? >? ? ? >>>? ???? >>
>>>>   ???? >? ? ? >>>? ???? >> +45 35324135
>>>>   ???? >? ? ? >>>? ???? >> mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>
>>>>   ??? <mailto:mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>>
>>>>   ???? >? ? ? >>>? ??? <mailto:mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>
>>>>   ???? >? ? ?<mailto:mossa at sund.ku.dk
>>>>   ??? <mailto:mossa at sund.ku.dk>>><mailto:mossa at sund.ku.dk
>>>>   ??? <mailto:mossa at sund.ku.dk>
>>>>   ???? >? ? ?<mailto:mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>>
>>>>   ???? >? ? ? >>>? ??? <mailto:mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>
>>>>   ??? <mailto:mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>>>>
>>>>   ???? >? ? ? >>>? ???? >>
>>>>   ???? >? ? ? >>>? ???? >>
>>>>   ???? >? ? ? >>>? ???? >>? ? ? ? [[alternative HTML version deleted]]
>>>>   ???? >? ? ? >>>? ???? >>
>>>>   ???? >? ? ? >>>? ???? >> ______________________________________________
>>>>   ???? >? ? ? >>>? ???? >> R-devel at r-project.org
>>>>   ??? <mailto:R-devel at r-project.org> <mailto:R-devel at r-project.org
>>>>   ??? <mailto:R-devel at r-project.org>>
>>>>   ???? >? ? ?<mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>
>>>>   ??? <mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>>>
>>>>   ???? >? ? ?mailing list
>>>>   ???? >? ? ? >>>? ???? >> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>   ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>>   ???? >? ? ?<https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>   ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>>
>>>>   ???? >? ? ? >>>? ??? <https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>   ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>>   ???? >? ? ?<https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>   ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>>>
>>>>   ???? >? ? ? >>>? ???? >
>>>>   ???? >? ? ? >>>? ???? >? ? ? ?[[alternative HTML version deleted]]
>>>>   ???? >? ? ? >>>? ???? >
>>>>   ???? >? ? ? >>>? ???? > ______________________________________________
>>>>   ???? >? ? ? >>>? ???? > R-devel at r-project.org
>>>>   ??? <mailto:R-devel at r-project.org> <mailto:R-devel at r-project.org
>>>>   ??? <mailto:R-devel at r-project.org>>
>>>>   ???? >? ? ?<mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>
>>>>   ??? <mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>>>
>>>>   ???? >? ? ?mailing list
>>>>   ???? >? ? ? >>>? ???? > https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>   ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>>   ???? >? ? ?<https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>   ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>>
>>>>   ???? >? ? ? >>>? ??? <https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>   ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>>   ???? >? ? ?<https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>   ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>>>
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>>? ??? ______________________________________________
>>>>   ???? >? ? ? >>> R-devel at r-project.org <mailto:R-devel at r-project.org>
>>>>   ??? <mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>>
>>>>   ???? >? ? ?<mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>
>>>>   ??? <mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>>>
>>>>   ???? >? ? ?mailing list
>>>>   ???? >? ? ? >>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>   ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>>   ???? >? ? ?<https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>   ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>>
>>>>   ???? >? ? ? >>>? ??? <https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>   ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>>   ???? >? ? ?<https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>   ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>>>
>>>>   ???? >? ? ? >>>
>>>>   ???? >? ? ? >>
>>>>   ???? >? ? ? >> ______________________________________________
>>>>   ???? >? ? ? >> R-devel at r-project.org <mailto:R-devel at r-project.org>
>>>>   ??? <mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>>
>>>>   ??? mailing list
>>>>   ???? >? ? ? >> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>   ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>>   ???? >? ? ?<https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>   ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>>
>>>>   ???? >? ? ? >
>>>>   ???? >
>>>>   ???? >? ? ?______________________________________________
>>>>   ???? > R-devel at r-project.org <mailto:R-devel at r-project.org>
>>>>   ??? <mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>>
>>>>   ??? mailing list
>>>>   ???? > https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>   ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>>   ???? >? ? ?<https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>   ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>>
>>>>   ???? >
>>>>
>>>
>>
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr  1 02:44:01 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 31 Mar 2025 20:44:01 -0400
Subject: [Rd] R CMD check and CRAN's Rust policy
In-Reply-To: <8866a57b-fa81-4993-be17-3d9095ebc1c5@gmail.com>
References: <6ea9752b54b347e682240bc024665cef@sund.ku.dk>
 <9CB72F1A-D397-4133-B8D6-C7B9CD04A4A1@R-project.org>
 <32ad0520e7784407b08ad105304b714b@sund.ku.dk>
 <66df3450-ed40-4d0c-b40b-626b75eabf0b@gmail.com>
 <CAL3ufUKSkMXpgSD6-o7dC7tZuD+DmpHaq2JUzuF9+9dosE+XEA@mail.gmail.com>
 <4eb96716-9f8c-4f4e-8d2d-a43feba44392@gmail.com>
 <df6bc0fc-1699-4691-a83c-1606d5db72a7@gmail.com>
 <19f561ae-d787-4f27-b3ba-f63c9b65fba5@gmail.com>
 <CAL3ufUJVe_jgfHH==EcfxuGiSbQ13KRXTSEP8-oYKafCPNR-+A@mail.gmail.com>
 <703123c9-c09e-4e14-8f4e-75ffd3c5931f@gmail.com>
 <CAL3ufULb0DDV94_m9kX2S2iTgiTqSaBUBo7ZD1PTVF6F-Gyb5A@mail.gmail.com>
 <17675b90-69a0-4f21-8d17-27aa2a8fda33@gmail.com>
 <483fe286-5a17-459c-8faf-f87208663188@gmail.com>
 <4a3d45bb-9df2-4cc7-a7ef-5183f9613d03@gmail.com>
 <8866a57b-fa81-4993-be17-3d9095ebc1c5@gmail.com>
Message-ID: <deb30b2e-e67c-45c5-a67c-4a66403de2a2@gmail.com>

One more change to

    remotes::install_github("dmurdoch/rcmdcheck at demotions")

Now the changes in message severity have to be coded into the 
DESCRIPTION file of the package being checked.  For example, add this line:

Config/rcmdcheck/demote/warnings:
   Compiled code should not call entry points which might terminate

The message being matched has to appear all on one line, but multiple 
patterns can be given on separate lines.  Embedded newlines are not 
allowed.  A simple fixed grep is used to match it to the check log.
See the ?rcmdcheck help page for more details.

Duncan Murdoch

On 2025-03-31 7:20 p.m., Duncan Murdoch wrote:
> On 2025-03-31 4:50 p.m., Duncan Murdoch wrote:
>> Just for fun I forked rcmdcheck and added arguments to it to allow
>> particular messages to be changed in severity.
>>
>> For example, if the WARNING message says something which matches the
>> regexp "Compiled code should not call entry points which might terminate
>> R" you could run
>>
>>      rcmdcheck::rcmdcheck(".", demote = list(warnings = "Compiled code
>> should not call entry points which might terminate R"))
>>
>> and the warning will be counted as a NOTE.  The decision about whether
>> to signal an error from the run will be based on the value after demotion.
>>
>>     I haven't done anything with the Github action, but users can play
>> with this fork if they like.  It can be installed using
>>
>>      remotes::install_github("dmurdoch/rcmdcheck")
> 
> Sorry, that should be
> 
>     remotes::install_github("dmurdoch/rcmdcheck at demotions")
> 
> Duncan Murdoch
> 
>>
>> You can install custom builds in a Github action fairly easily, but it's
>> hard to add a new argument to a call deep within the action script.  A
>> simpler approach would be to fork my fork and set the default value for
>> "demote" to whatever you want, then install your own fork during the
>> Github action.
>>
>> Comments are welcome.
>>
>> Duncan Murdoch
>>
>>
>> On 2025-03-31 1:48 p.m., Ben Bolker wrote:
>>>
>>>
>>> On 2025-03-31 1:04 p.m., Duncan Murdoch wrote:
>>>> On 2025-03-31 12:41 p.m., Josiah Parry wrote:
>>>>> Duncan, the changes to symbols checking was introduced March 22nd see
>>>>> https://bugs.r-project.org/show_bug.cgi?id=18789 <https://bugs.r-
>>>>> project.org/show_bug.cgi?id=18789> and https://developer.r-
>>>>> project.org/blosxom.cgi/R-devel/NEWS/2025/03/22#n2025-03-22 <https://
>>>>> developer.r-project.org/blosxom.cgi/R-devel/
>>>>> NEWS/2025/03/22#n2025-03-22>. But that is unrelated.
>>>>
>>>> Sorry, I missed that.
>>>>
>>>>>
>>>>> To Tim's comment?the check is a simple grep of the installation?log
>>>>> for "Downloading crates." This could be easily circumvented on CRAN
>>>>> and locally by suppressing stdout/err. But that would be adversarial
>>>>> and I would like to adhere to the intent of the check.
>>>>
>>>> I think Tim was suggesting that you modify your Github action to ignore
>>>> this particular warning.? The warning would still appear, but it
>>>> wouldn't cause a check failure.
>>>>
>>>> Duncan Murdoch
>>>
>>>       At a very quick look, I don't see an easy way to do that (but I am
>>> admittedly really bad at doing stuff with Github actions). Maybe longer
>>> term, but it feels like the best way to do this would be to request a
>>> feature in `rcmdcheck` that allowed the user to request ignoring
>>> specific warnings (e.g. specified by regexp?), then expose that feature
>>> in the r-check-package action (or whatever it's called ...)
>>>
>>>>
>>>>
>>>>
>>>>>
>>>>>
>>>>>
>>>>> On Mon, Mar 31, 2025 at 9:23?AM Duncan Murdoch
>>>>> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>>>>>
>>>>>    ??? On 2025-03-31 11:50 a.m., Josiah Parry wrote:
>>>>>    ???? > Following up with this as I address the new R-devel "Compiled code
>>>>>    ???? > should not call entry points which might terminate R" WARNING and
>>>>>    ??? this
>>>>>    ???? > issue has reared its head again.
>>>>>    ???? >
>>>>>    ???? > Would a path forward be an environment variable similar
>>>>>    ???? > to?_R_CHECK_CRAN_INCOMING_ to skip this check primarily for GitHub
>>>>>    ???? > Actions and CI?
>>>>>
>>>>>    ??? The "Compiled code should not call entry points which might
>>>>>    ??? terminate R"
>>>>>    ??? isn't a new warning.? I think the last change to it was made in 2022.
>>>>>
>>>>>    ??? Maybe your code, or code in one of the libraries you use, has
>>>>> changed?
>>>>>
>>>>>    ??? Duncan Murdoch
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>    ???? >
>>>>>    ???? > Or, alternatively, if this could be a NOTE when the `--as-cran`
>>>>> flag
>>>>>    ???? > isn't set but a WARNING when it is?
>>>>>    ???? >
>>>>>    ???? > Re-vendoring dependencies each time they are changed during the
>>>>>    ???? > development lifecycle is quite a bit. However, vendoring once
>>>>>    ??? prior to
>>>>>    ???? > publishing makes good sense.
>>>>>    ???? >
>>>>>    ???? > Is there a balance we can strike here to lower development
>>>>>    ??? friction but
>>>>>    ???? > also ensure the robust package installation requirements when
>>>>>    ??? expected?
>>>>>    ???? >
>>>>>    ???? > Using
>>>>>    ???? >
>>>>>    ???? >
>>>>>    ???? >
>>>>>    ???? >
>>>>>    ???? > On Sun, Mar 2, 2025 at 11:42?AM Duncan Murdoch
>>>>>    ??? <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>
>>>>>    ???? > <mailto:murdoch.duncan at gmail.com
>>>>>    ??? <mailto:murdoch.duncan at gmail.com>>> wrote:
>>>>>    ???? >
>>>>>    ???? >? ? ?On 2025-03-02 1:09 p.m., Ben Bolker wrote:
>>>>>    ???? >? ? ? >? ? I, like Duncan, am just following along here. I think
>>>>> there
>>>>>    ???? >? ? ?might be
>>>>>    ???? >? ? ? > two distinct questions which it would be useful to keep
>>>>>    ??? distinct:
>>>>>    ???? >? ? ? >
>>>>>    ???? >? ? ? >? ? * how to silence the rust-check if desired?
>>>>>    ???? >? ? ? >
>>>>>    ???? >? ? ? >? ? ?rather than debating whether the rust-check should be
>>>>>    ??? always-on,
>>>>>    ???? >? ? ? > on-for-CRAN-only, etc., would it provide for useful
>>>>>    ??? flexibility
>>>>>    ???? >? ? ?to add
>>>>>    ???? >? ? ? > an environment variable that enables/disables this
>>>>>    ???? >? ? ?functionality?? There
>>>>>    ???? >? ? ? > are already 168 of these environment variables, how much
>>>>> would
>>>>>    ???? >? ? ?one more
>>>>>    ???? >? ? ? > cost?
>>>>>    ???? >
>>>>>    ???? >? ? ?I may have misunderstood Josiah.? I thought his message said
>>>>>    ??? that it is
>>>>>    ???? >? ? ?already easy to silence the check, by stopping the code from
>>>>>    ??? issuing
>>>>>    ???? >? ? ?the
>>>>>    ???? >? ? ?message the check is looking for.
>>>>>    ???? >
>>>>>    ???? >? ? ?Presumably the package shouldn't do that, but if there's an
>>>>>    ??? environment
>>>>>    ???? >? ? ?variable that can be set to do it, then the repository or
>>>>>    ??? user can
>>>>>    ???? >? ? ?choose to do it, so there's no need for R to add another
>>>>>    ??? environment
>>>>>    ???? >? ? ?variable.
>>>>>    ???? >
>>>>>    ???? >? ? ?BTW, as far as I can see current R-devel doesn't issue an
>>>>>    ??? error, it
>>>>>    ???? >? ? ?just
>>>>>    ???? >? ? ?issues warnings about two issues:
>>>>>    ???? >
>>>>>    ???? >? ? ? ? - the package is downloading crates
>>>>>    ???? >? ? ? ? - the rustc compiler doesn't report a version number
>>>>>    ???? >
>>>>>    ???? >? ? ?Duncan Murdoch
>>>>>    ???? >
>>>>>    ???? >? ? ? >
>>>>>    ???? >? ? ? >? ? ?I'm not sure how adding an environment variable to
>>>>>    ??? allow easier
>>>>>    ???? >? ? ? > user/alternate-repository control of the check is
>>>>> "against the
>>>>>    ???? >? ? ?spirit of
>>>>>    ???? >? ? ? > the check" ...
>>>>>    ???? >? ? ? >
>>>>>    ???? >? ? ? >? ? ?All the existing check-regulating env variables ...
>>>>>    ???? >? ? ? >
>>>>>    ???? >? ? ? > cd src/library/tools/R
>>>>>    ???? >? ? ? > grep 'Sys.getenv("_R_CHECK' * | sed -e
>>>>>    ??? 's/^.*Sys.getenv(//' | sed -e
>>>>>    ???? >? ? ? > 's/[,)].*//' | sort | uniq | wc
>>>>>    ???? >? ? ? >
>>>>>    ???? >? ? ? >
>>>>>    ???? >? ? ? >? ? ?* should CRAN allow Rust crates to be downloaded?
>>>>>    ???? >? ? ? >
>>>>>    ???? >? ? ? >? ? ?This is a much more fundamental policy decision, which
>>>>>    ??? I have no
>>>>>    ???? >? ? ? > opinion about.
>>>>>    ???? >? ? ? >
>>>>>    ???? >? ? ? >? ? ?cheers
>>>>>    ???? >? ? ? >? ? ? Ben Bolker
>>>>>    ???? >? ? ? >
>>>>>    ???? >? ? ? >
>>>>>    ???? >? ? ? >
>>>>>    ???? >? ? ? >
>>>>>    ???? >? ? ? > On 2025-03-02 12:21 p.m., Duncan Murdoch wrote:
>>>>>    ???? >? ? ? >> On 2025-03-02 11:03 a.m., Josiah Parry wrote:
>>>>>    ???? >? ? ? >>> Well this has surely veered off course!
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>> As the one who filed the BugZilla report, I'd like to
>>>>>    ??? redirect the
>>>>>    ???? >? ? ? >>> conversation and provide further context.
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>> The question should?be /"how do we get a dialogue
>>>>>    ??? started on this
>>>>>    ???? >? ? ? >>> bugzilla issue before the next minor /
>>>>>    ???? >? ? ? >>> /release of R?"/
>>>>>    ???? >? ? ? >>
>>>>>    ???? >? ? ? >> Isn't this exactly that dialogue?
>>>>>    ???? >? ? ? >>
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>> The current check for Rust-based R package's downloading
>>>>>    ??? external
>>>>>    ???? >? ? ? >>> dependencies works by looking at
>>>>>    ???? >? ? ? >>> the output logs for the presence of? "Downloading
>>>>>    ??? crates." This
>>>>>    ???? >? ? ?can is
>>>>>    ???? >? ? ? >>> an entirely fine requirement for
>>>>>    ???? >? ? ? >>> CRAN?however, due to the fact that it is an error,
>>>>> packages
>>>>>    ???? >? ? ? >>> distributed through other repositories
>>>>>    ???? >? ? ? >>> fail the R-CMD check.
>>>>>    ???? >? ? ? >>
>>>>>    ???? >? ? ? >> I think you misunderstood me.? CRAN shares the view I
>>>>>    ??? gave that you
>>>>>    ???? >? ? ? >> should be able to run old code to reproduce old
>>>>> results, but
>>>>>    ???? >? ? ?they aren't
>>>>>    ???? >? ? ? >> the only ones.? That's always been a goal of R.
>>>>>    ???? >? ? ? >>
>>>>>    ???? >? ? ? >>> Folks who use R-universe or PPM or some mysterious third
>>>>>    ??? thing
>>>>>    ???? >? ? ?may not
>>>>>    ???? >? ? ? >>> share the same philosophy as
>>>>>    ???? >? ? ? >>> CRAN and prefer the convenience of fetching the
>>>>>    ??? dependencies at
>>>>>    ???? >? ? ? >>> compile time and not vendoring them.
>>>>>    ???? >? ? ? >>> An alternative would be for the check to be optionally
>>>>>    ??? skipped or
>>>>>    ???? >? ? ? >>> become a NOTE when the CRAN
>>>>>    ???? >? ? ? >>> flag is not set and an ERROR otherwise. Skipping this
>>>>> CRAN
>>>>>    ???? >? ? ?check is as
>>>>>    ???? >? ? ? >>> easy as adding `--quiet`
>>>>>    ???? >? ? ? >>> or setting an environment variable?but that is against
>>>>> the
>>>>>    ???? >? ? ?spirit of
>>>>>    ???? >? ? ? >>> the check.
>>>>>    ???? >? ? ? >>
>>>>>    ???? >? ? ? >> If it is that easy to skip the check, then I really
>>>>> don't see
>>>>>    ???? >? ? ?the issue.
>>>>>    ???? >? ? ? >>? ??Just ask the repository where you want to put your
>>>>>    ??? package to
>>>>>    ???? >? ? ?put that
>>>>>    ???? >? ? ? >> option or environment variable in place, and there's no
>>>>>    ??? longer a
>>>>>    ???? >? ? ?problem.
>>>>>    ???? >? ? ? >>
>>>>>    ???? >? ? ? >> Duncan Murdoch
>>>>>    ???? >? ? ? >>
>>>>>    ???? >? ? ? >>> Ideally, the check can remain, but scoped appropriately.
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>> On Sun, Mar 2, 2025 at 6:49?AM Duncan Murdoch
>>>>>    ???? >? ? ? >>> <murdoch.duncan at gmail.com
>>>>>    ??? <mailto:murdoch.duncan at gmail.com> <mailto:murdoch.duncan at gmail.com
>>>>>    ??? <mailto:murdoch.duncan at gmail.com>>
>>>>>    ???? >? ? ?<mailto:murdoch.duncan at gmail.com
>>>>>    ??? <mailto:murdoch.duncan at gmail.com> <mailto:murdoch.duncan at gmail.com
>>>>>    ??? <mailto:murdoch.duncan at gmail.com>>>>
>>>>>    ???? >? ? ?wrote:
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>>? ??? You seem to be taking a confontational tone, which
>>>>>    ??? isn't
>>>>>    ???? >? ? ?likely to
>>>>>    ???? >? ? ? >>>? ??? encourage a reasonable dialogue.
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>>? ??? I've looked for other messages on this, and didn't
>>>>>    ??? see any
>>>>>    ???? >? ? ?besides
>>>>>    ???? >? ? ? >>> this
>>>>>    ???? >? ? ? >>>? ??? one explaining why including check_rust() in the
>>>>>    ??? checks is
>>>>>    ???? >? ? ?a problem.
>>>>>    ???? >? ? ? >>>? ??? The problem you talk about here is that it
>>>>> encourages
>>>>>    ???? >? ? ?vendoring,
>>>>>    ???? >? ? ? >>> which
>>>>>    ???? >? ? ? >>>? ??? makes it harder for package authors to count
>>>>> downloads.
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>>? ??? To be honest, that doesn't seem like a very serious
>>>>>    ???? >? ? ?problem.? I
>>>>>    ???? >? ? ? >>> assume
>>>>>    ???? >? ? ? >>>? ??? the packages ("crates") we are talking about are
>>>>> open
>>>>>    ???? >? ? ?source, so
>>>>>    ???? >? ? ? >>>? ??? this is
>>>>>    ???? >? ? ? >>>? ??? entirely in the spirit of how they are allowed to be
>>>>>    ???? >? ? ?distributed.
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>>? ??? If they aren't open source, then users of those
>>>>>    ??? packages
>>>>>    ???? >? ? ?should be
>>>>>    ???? >? ? ? >>>? ??? warned about that, and a check failure is a good
>>>>>    ??? way to do
>>>>>    ???? >? ? ?that.
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>>? ??? So you need to explain why it is important to be
>>>>>    ??? able to
>>>>>    ???? >? ? ?download and
>>>>>    ???? >? ? ? >>>? ??? install software and not be warned about it.
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>>? ??? I am not in R Core or CRAN, but I can suggest why
>>>>> it is
>>>>>    ???? >? ? ?better to
>>>>>    ???? >? ? ? >>>? ??? include source in the package:? it makes the use of
>>>>>    ??? that
>>>>>    ???? >? ? ?package more
>>>>>    ???? >? ? ? >>>? ??? reliable in the future.? It's not uncommon to run
>>>>> an R
>>>>>    ???? >? ? ?computation
>>>>>    ???? >? ? ? >>> that
>>>>>    ???? >? ? ? >>>? ??? was written a few years ago.? Sometimes libraries
>>>>> or R
>>>>>    ???? >? ? ?have changed,
>>>>>    ???? >? ? ? >>>? ??? and
>>>>>    ???? >? ? ? >>>? ??? a user will need to go back to a previous version to
>>>>>    ???? >? ? ?reproduce the
>>>>>    ???? >? ? ? >>>? ??? calculation.? Being able to able to rebuild a
>>>>>    ??? system as it
>>>>>    ???? >? ? ?would have
>>>>>    ???? >? ? ? >>>? ??? been back then is important.
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>>? ??? Is that possible if the package needs to make a
>>>>>    ??? download?? The
>>>>>    ???? >? ? ? >>> download
>>>>>    ???? >? ? ? >>>? ??? site that worked a few years ago may no longer
>>>>>    ??? exist.? If
>>>>>    ???? >? ? ?the site
>>>>>    ???? >? ? ? >>>? ??? exists, the code versions there may be different.
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>>? ??? Those are some of the issues that Simon was
>>>>>    ??? alluding to.
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>>? ??? Duncan Murdoch
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>>? ??? On 2025-03-02 5:45 a.m., Mossa Merhi Reimert via
>>>>>    ??? R-devel
>>>>>    ???? >? ? ?wrote:
>>>>>    ???? >? ? ? >>>? ???? > Dear Simon Urbanek,
>>>>>    ???? >? ? ? >>>? ???? >
>>>>>    ???? >? ? ? >>>? ???? > There has been very little engagement with the
>>>>>    ??? issue I
>>>>>    ???? >? ? ?referred
>>>>>    ???? >? ? ? >>>? ??? to. If it was decided that this ?check? ought to be
>>>>>    ??? part
>>>>>    ???? >? ? ?of the
>>>>>    ???? >? ? ? >>>? ??? default checks for R,
>>>>>    ???? >? ? ? >>>? ???? > then that could have been written to us. Either
>>>>>    ??? on the
>>>>>    ???? >? ? ? >>> bugs.r-project.org <http://bugs.r-project.org>
>>>>>    ??? <http://bugs.r-project.org <http://bugs.r-project.org>>
>>>>>    ???? >? ? ?<http://bugs.r-project.org <http://bugs.r-project.org>
>>>>>    ??? <http://bugs.r-project.org <http://bugs.r-project.org>>> or the
>>>>> proposed
>>>>>    ???? >? ? ? >>>? ??? patch. Before we talk about anything else,
>>>>>    ???? >? ? ? >>>? ???? > it does seem very strange that we cannot get a
>>>>>    ??? reasonable
>>>>>    ???? >? ? ? >>>? ??? dialogue going.
>>>>>    ???? >? ? ? >>>? ???? >
>>>>>    ???? >? ? ? >>>? ???? > I would like to say that the R/Rust community
>>>>>    ??? has grown
>>>>>    ???? >? ? ? >>>? ??? substantially. From my end, there are 3 bindings
>>>>>    ??? project,
>>>>>    ???? >? ? ?extendr,
>>>>>    ???? >? ? ? >>>? ??? savvy, and roxido.
>>>>>    ???? >? ? ? >>>? ???? > Then, there are now many rust-based packages on
>>>>>    ??? CRAN,
>>>>>    ???? >? ? ?see this
>>>>>    ???? >? ? ? >>>? ??? most recent compiled list
>>>>>    ???? > https://github.com/nanxstats/r-rust-pkgs
>>>>>    ??? <https://github.com/nanxstats/r-rust-pkgs>
>>>>>    ???? >? ? ?<https://github.com/nanxstats/r-rust-pkgs
>>>>>    ??? <https://github.com/nanxstats/r-rust-pkgs>>
>>>>>    ???? >? ? ? >>>? ??? <https://github.com/nanxstats/r-rust-pkgs
>>>>>    ??? <https://github.com/nanxstats/r-rust-pkgs>
>>>>>    ???? >? ? ?<https://github.com/nanxstats/r-rust-pkgs
>>>>>    ??? <https://github.com/nanxstats/r-rust-pkgs>>>.
>>>>>    ???? >? ? ? >>>? ???? > There is also proof-of-concept
>>>>>    ???? >? ? ? >>> https://github.com/r-rust/hellorust
>>>>>    ??? <https://github.com/r-rust/hellorust>
>>>>>    ???? >? ? ?<https://github.com/r-rust/hellorust
>>>>>    ??? <https://github.com/r-rust/hellorust>>
>>>>>    ???? >? ? ? >>>? ??? <https://github.com/r-rust/hellorust
>>>>>    ??? <https://github.com/r-rust/hellorust>
>>>>>    ???? >? ? ?<https://github.com/r-rust/hellorust
>>>>>    ??? <https://github.com/r-rust/hellorust>>> that integrates `cargo`,
>>>>>    ???? >? ? ? >>>? ??? rust?s official build system, with R?s package
>>>>>    ??? build system,
>>>>>    ???? >? ? ? >>>? ???? > and https://github.com/extendr/hellorustc
>>>>>    ??? <https://github.com/extendr/hellorustc>
>>>>>    ???? >? ? ?<https://github.com/extendr/hellorustc
>>>>>    ??? <https://github.com/extendr/hellorustc>>
>>>>>    ???? >? ? ? >>>? ??? <https://github.com/extendr/hellorustc
>>>>>    ??? <https://github.com/extendr/hellorustc>
>>>>>    ???? >? ? ?<https://github.com/extendr/hellorustc
>>>>>    ??? <https://github.com/extendr/hellorustc>>>, which showcases how Rust
>>>>>    ???? >? ? ? >>>? ??? compiler could be directly linked with R?s package
>>>>>    ??? system.
>>>>>    ???? >? ? ? >>>? ???? >
>>>>>    ???? >? ? ? >>>? ???? >? ?Let me say, that the current R CMD check is
>>>>>    ??? not meant
>>>>>    ???? >? ? ?to be
>>>>>    ???? >? ? ? >>>? ??? ?helpful?. When a package is built, `cargo` tells
>>>>>    ??? the user
>>>>>    ???? >? ? ? >>>? ??? ?Downloading crates?.
>>>>>    ???? >? ? ? >>>? ???? > Thus, this information is already conveyed to
>>>>>    ??? the user.
>>>>>    ???? >? ? ? >>>? ???? >
>>>>>    ???? >? ? ? >>>? ???? > Personally, I do wish we could debate this
>>>>>    ??? requirement
>>>>>    ???? >? ? ?further. I
>>>>>    ???? >? ? ? >>>? ??? do not believe that having R-packages on CRAN
>>>>>    ??? vendor rust
>>>>>    ???? >? ? ? >>> dependencies
>>>>>    ???? >? ? ? >>>? ???? > as a good policy. Download statistics is a
>>>>> success
>>>>>    ???? >? ? ?metric of a
>>>>>    ???? >? ? ? >>>? ??? given r-package and rust packages. By insisting on
>>>>>    ???? >? ? ?vendoring, and
>>>>>    ???? >? ? ? >>> thus
>>>>>    ???? >? ? ? >>>? ???? > side-stepping `cargo` / crates.io
>>>>>    ??? <http://crates.io> <http://crates.io <http://crates.io>>
>>>>>    ???? >? ? ?<http://crates.io <http://crates.io> <http://crates.io
>>>>>    ??? <http://crates.io>>>, we are
>>>>>    ???? >? ? ? >>>? ??? robbing upstream authors of their download-numbers.
>>>>>    ??? I do
>>>>>    ???? >? ? ?not think
>>>>>    ???? >? ? ? >>>? ??? such policy is honourable.
>>>>>    ???? >? ? ? >>>? ???? >
>>>>>    ???? >? ? ? >>>? ???? > While C/C++ do not have official package
>>>>>    ??? repositories,
>>>>>    ???? >? ? ?it could
>>>>>    ???? >? ? ? >>>? ??? be thought of, as fair game, to have CRAN act as a
>>>>>    ??? pseudo
>>>>>    ???? >? ? ?package
>>>>>    ???? >? ? ? >>>? ??? manager for C/C++ libraries.
>>>>>    ???? >? ? ? >>>? ???? > I?m not going to argue for or against this part.
>>>>>    ???? >? ? ? >>>? ???? >
>>>>>    ???? >? ? ? >>>? ???? > There are many objections from the CRAN side to
>>>>>    ??? all things
>>>>>    ???? >? ? ? >>>? ??? related to Rust. I don?t want to open multiple
>>>>>    ??? topics in
>>>>>    ???? >? ? ?the same
>>>>>    ???? >? ? ? >>>? ??? thread.
>>>>>    ???? >? ? ? >>>? ???? > But there is plenty to bring up. And I had
>>>>> hoped we
>>>>>    ???? >? ? ?could talk
>>>>>    ???? >? ? ? >>>? ??? this little issue through, before embarking on a
>>>>> larger
>>>>>    ???? >? ? ?discussion.
>>>>>    ???? >? ? ? >>>? ???? > I do not appreciate the ?random demands?
>>>>> comment, as
>>>>>    ???? >? ? ?this is not
>>>>>    ???? >? ? ? >>>? ??? a demand, nor is it random.
>>>>>    ???? >? ? ? >>>? ???? > I have inquired my end of the community for
>>>>>    ??? suggestions
>>>>>    ???? >? ? ? >>>? ???? > to compile a larger proposal, but then I was
>>>>> afraid
>>>>>    ???? >? ? ?that this
>>>>>    ???? >? ? ? >>>? ??? would be perceived as a big, bulky demand.
>>>>>    ???? >? ? ? >>>? ???? >
>>>>>    ???? >? ? ? >>>? ???? > Rust is not C/C++/Java, and the support for Rust
>>>>>    ??? cannot
>>>>>    ???? >? ? ?look like
>>>>>    ???? >? ? ? >>>? ??? the support for these languages.
>>>>>    ???? >? ? ? >>>? ???? >
>>>>>    ???? >? ? ? >>>? ???? >
>>>>>    ???? >? ? ? >>>? ???? >
>>>>>    ???? >? ? ? >>>? ???? > From: Simon Urbanek <simon.urbanek at R-project.org>
>>>>>    ???? >? ? ? >>>? ???? > Date: Sunday, 2 March 2025 at 00.39
>>>>>    ???? >? ? ? >>>? ???? > To: Mossa Merhi Reimert <mossa at sund.ku.dk
>>>>>    ??? <mailto:mossa at sund.ku.dk>
>>>>>    ???? >? ? ?<mailto:mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>>
>>>>>    ???? >? ? ? >>> <mailto:mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>
>>>>>    ??? <mailto:mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>>>>
>>>>>    ???? >? ? ? >>>? ???? > Cc: r-devel at r-project.org
>>>>>    ??? <mailto:r-devel at r-project.org>
>>>>>    ???? >? ? ?<mailto:r-devel at r-project.org <mailto:r-devel at r-project.org>>
>>>>>    ??? <mailto:r-devel at r-project.org <mailto:r-devel at r-project.org>
>>>>>    ???? >? ? ?<mailto:r-devel at r-project.org <mailto:r-devel at r-project.org>>>
>>>>>    ???? >? ? ? >>>? ??? <r-devel at r-project.org
>>>>>    ??? <mailto:r-devel at r-project.org> <mailto:r-devel at r-project.org
>>>>>    ??? <mailto:r-devel at r-project.org>>
>>>>>    ???? >? ? ?<mailto:r-devel at r-project.org <mailto:r-devel at r-project.org>
>>>>>    ??? <mailto:r-devel at r-project.org <mailto:r-devel at r-project.org>>>>
>>>>>    ???? >? ? ? >>>? ???? > Subject: Re: [Rd] R CMD check and CRAN's Rust
>>>>> policy
>>>>>    ???? >? ? ? >>>? ???? > [Du f?r ikke ofte mails fra
>>>>>    ??? simon.urbanek at r-project.org <mailto:simon.urbanek at r-project.org>
>>>>>    ???? >? ? ?<mailto:simon.urbanek at r-project.org
>>>>>    ??? <mailto:simon.urbanek at r-project.org>>
>>>>>    ???? >? ? ? >>>? ??? <mailto:simon.urbanek at r-project.org
>>>>>    ??? <mailto:simon.urbanek at r-project.org>
>>>>>    ???? >? ? ?<mailto:simon.urbanek at r-project.org
>>>>>    ??? <mailto:simon.urbanek at r-project.org>>>. F? mere at vide om, hvorfor
>>>>>    ???? >? ? ? >>>? ??? dette er vigtigt, p?
>>>>>    ???? > https://aka.ms/LearnAboutSenderIdentification
>>>>>    ??? <https://aka.ms/LearnAboutSenderIdentification>
>>>>>    ???? >? ? ?<https://aka.ms/LearnAboutSenderIdentification
>>>>>    ??? <https://aka.ms/LearnAboutSenderIdentification>>
>>>>>    ???? >? ? ? >>>? ??? <https://aka.ms/LearnAboutSenderIdentification
>>>>>    ??? <https://aka.ms/LearnAboutSenderIdentification>
>>>>>    ???? >? ? ?<https://aka.ms/LearnAboutSenderIdentification
>>>>>    ??? <https://aka.ms/LearnAboutSenderIdentification>>> ]
>>>>>    ???? >? ? ? >>>? ???? >
>>>>>    ???? >? ? ? >>>? ???? > Mossa,
>>>>>    ???? >? ? ? >>>? ???? >
>>>>>    ???? >? ? ? >>>? ???? > the issue you cite is lacking any pertinent
>>>>>    ??? information
>>>>>    ???? >? ? ?and it's
>>>>>    ???? >? ? ? >>>? ??? not even clear why it should be an issue. The
>>>>> check is
>>>>>    ???? >? ? ?perfectly
>>>>>    ???? >? ? ? >>>? ??? justified, it just reports whether a package
>>>>> using rust
>>>>>    ???? >? ? ?declares
>>>>>    ???? >? ? ? >>>? ??? this correctly and where it downloads 3rd party
>>>>>    ??? content -
>>>>>    ???? >? ? ?something
>>>>>    ???? >? ? ? >>>? ??? that is important to R users in general and not
>>>>>    ??? related to
>>>>>    ???? >? ? ?CRAN. I
>>>>>    ???? >? ? ? >>>? ??? don't see how any of this is "prohibitive" it just
>>>>>    ??? calls
>>>>>    ???? >? ? ?out what
>>>>>    ???? >? ? ? >>>? ??? the package is already doing.
>>>>>    ???? >? ? ? >>>? ???? >
>>>>>    ???? >? ? ? >>>? ???? > As discussed before, my hope was that the "R"ust
>>>>>    ???? >? ? ?community will
>>>>>    ???? >? ? ? >>>? ??? mature enough to work on proper support. It is not
>>>>>    ??? clear
>>>>>    ???? >? ? ?that it
>>>>>    ???? >? ? ? >>>? ??? happened yet, but once it does it would make sense
>>>>>    ??? to talk
>>>>>    ???? >? ? ?about
>>>>>    ???? >? ? ? >>>? ??? support just as we have for C, C++ and Java, so
>>>>>    ??? certainly that
>>>>>    ???? >? ? ? >>>? ??? should be the right discussion. However, it will
>>>>>    ??? have to
>>>>>    ???? >? ? ?start with
>>>>>    ???? >? ? ? >>>? ??? some thinking and a proposal on how the associated
>>>>>    ??? issues
>>>>>    ???? >? ? ?(compiler
>>>>>    ???? >? ? ? >>>? ??? support, versioning, dependency sources etc.) are
>>>>> to be
>>>>>    ???? >? ? ?addressed,
>>>>>    ???? >? ? ? >>>? ??? as opposed to making random demands. All this has
>>>>>    ??? nothing
>>>>>    ???? >? ? ?to do with
>>>>>    ???? >? ? ? >>>? ??? CRAN so the issue you mention seems irrelevant to
>>>>> the
>>>>>    ???? >? ? ?progress. Also
>>>>>    ???? >? ? ? >>>? ??? I'd like to know what are the "challenges
>>>>> embedded in R
>>>>>    ???? >? ? ?itself".
>>>>>    ???? >? ? ? >>>? ???? >
>>>>>    ???? >? ? ? >>>? ???? > Cheers,
>>>>>    ???? >? ? ? >>>? ???? > Simon
>>>>>    ???? >? ? ? >>>? ???? >
>>>>>    ???? >? ? ? >>>? ???? >
>>>>>    ???? >? ? ? >>>? ???? >> On Mar 2, 2025, at 8:45 AM, Mossa Merhi
>>>>> Reimert via
>>>>>    ???? >? ? ?R-devel
>>>>>    ???? >? ? ? >>>? ??? <r-devel at r-project.org
>>>>>    ??? <mailto:r-devel at r-project.org> <mailto:r-devel at r-project.org
>>>>>    ??? <mailto:r-devel at r-project.org>>
>>>>>    ???? >? ? ?<mailto:r-devel at r-project.org <mailto:r-devel at r-project.org>
>>>>>    ??? <mailto:r-devel at r-project.org <mailto:r-devel at r-project.org>>>>
>>>>> wrote:
>>>>>    ???? >? ? ? >>>? ???? >>
>>>>>    ???? >? ? ? >>>? ???? >> Hello everyone!
>>>>>    ???? >? ? ? >>>? ???? >>
>>>>>    ???? >? ? ? >>>? ???? >> I'm Mossa, I'm one of the maintainers of
>>>>>    ??? extendr, an
>>>>>    ???? >? ? ?automated
>>>>>    ???? >? ? ? >>>? ??? generation of bindings project for
>>>>>    ???? >? ? ? >>>? ???? >> Rust code, for use in R-packages.
>>>>>    ???? >? ? ? >>>? ???? >>
>>>>>    ???? >? ? ? >>>? ???? >> I'm writing to you, as R 4.4.3 was just
>>>>>    ??? released, and
>>>>>    ???? >? ? ?there have
>>>>>    ???? >? ? ? >>>? ??? not been
>>>>>    ???? >? ? ? >>>? ???? >> follow-up on an issue important to us. Link
>>>>> to the
>>>>>    ???? >? ? ?issue as
>>>>>    ???? >? ? ? >>>? ??? discussed on r-devel
>>>>>    ???? >? ? ? >>>? ???? >>
>>>>>    ???? > https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html
>>>>>    ??? <https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html>
>>>>>    ???? > ???? ?<https://stat.ethz.ch/pipermail/r-devel/2024-
>>>>> October/083666.html
>>>>>    ??? <https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html>>
>>>>>    ???? >? ? ? >>>
>>>>>    ???? > ???? ?<https://stat.ethz.ch/pipermail/r-devel/2024-
>>>>> October/083666.html
>>>>>    ??? <https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html>
>>>>>    ???? > ???? ?<https://stat.ethz.ch/pipermail/r-devel/2024-
>>>>> October/083666.html
>>>>>    ??? <https://stat.ethz.ch/pipermail/r-devel/2024-October/083666.html>>>
>>>>>    ???? >? ? ? >>>? ???? >>
>>>>>    ???? >? ? ? >>>? ???? >> A community member has provided a suggestion
>>>>> to a
>>>>>    ???? >? ? ?patch here
>>>>>    ???? >? ? ? >>> https://github.com/r-devel/r-svn/pull/182
>>>>>    ??? <https://github.com/r-devel/r-svn/pull/182>
>>>>>    ???? >? ? ?<https://github.com/r-devel/r-svn/pull/182
>>>>>    ??? <https://github.com/r-devel/r-svn/pull/182>>
>>>>>    ???? >? ? ? >>>? ??? <https://github.com/r-devel/r-svn/pull/182
>>>>>    ??? <https://github.com/r-devel/r-svn/pull/182>
>>>>>    ???? >? ? ?<https://github.com/r-devel/r-svn/pull/182
>>>>>    ??? <https://github.com/r-devel/r-svn/pull/182>>>, and we have also
>>>>>    ???? >? ? ? >>>? ??? attempted to bring it up on
>>>>>    ???? >? ? ? >>>? ???? >> Bugzilla:
>>>>>    ???? > https://bugs.r-project.org/show_bug.cgi?id=18806
>>>>>    ??? <https://bugs.r-project.org/show_bug.cgi?id=18806>
>>>>>    ???? >? ? ?<https://bugs.r-project.org/show_bug.cgi?id=18806
>>>>>    ??? <https://bugs.r-project.org/show_bug.cgi?id=18806>>
>>>>>    ???? >? ? ? >>>? ??? <https://bugs.r-project.org/show_bug.cgi?id=18806
>>>>>    ??? <https://bugs.r-project.org/show_bug.cgi?id=18806>
>>>>>    ???? >? ? ?<https://bugs.r-project.org/show_bug.cgi?id=18806
>>>>>    ??? <https://bugs.r-project.org/show_bug.cgi?id=18806>>>
>>>>>    ???? >? ? ? >>>? ???? >>
>>>>>    ???? >? ? ? >>>? ???? >> TLDR: Default `R CMD check` uses additional
>>>>>    ???? >? ? ?CRAN-specific checks
>>>>>    ???? >? ? ? >>>? ??? for Rust,
>>>>>    ???? >? ? ? >>>? ???? >> instead of keeping this behind the --as-cran
>>>>> flag.
>>>>>    ???? >? ? ? >>>? ???? >>
>>>>>    ???? >? ? ? >>>? ???? >> I would like to say, that there is a growing
>>>>>    ??? interest
>>>>>    ???? >? ? ?in Rust
>>>>>    ???? >? ? ? >>>? ??? within the R community.
>>>>>    ???? >? ? ? >>>? ???? >> And generally, Rust becoming a widely adopted
>>>>>    ??? language
>>>>>    ???? >? ? ?within
>>>>>    ???? >? ? ? >>>? ??? the Python community (including the scientific part
>>>>>    ??? of that
>>>>>    ???? >? ? ? >>>? ??? community). It is time to deal with the
>>>>>    ???? >? ? ? >>>? ???? >> pain points with using Rust in R.
>>>>>    ???? >? ? ? >>>? ???? >>
>>>>>    ???? >? ? ? >>>? ???? >> Therefore, I would kindly ask that we have a
>>>>>    ??? dialogue
>>>>>    ???? >? ? ?on how to
>>>>>    ???? >? ? ? >>>? ??? remedy the issue above first, and how we may deal
>>>>> with
>>>>>    ???? >? ? ?other issues
>>>>>    ???? >? ? ? >>>? ??? going forward. There are both challenges embedded
>>>>> in R
>>>>>    ???? >? ? ?itself, and
>>>>>    ???? >? ? ? >>>? ??? the current CRAN policy for Rust is prohibitive.
>>>>>    ???? >? ? ? >>>? ???? >>
>>>>>    ???? >? ? ? >>>? ???? >>
>>>>>    ???? >? ? ? >>>? ???? >>
>>>>>    ???? >? ? ? >>>? ???? >> Mossa Merhi Reimert
>>>>>    ???? >? ? ? >>>? ???? >> Postdoctoral Researcher
>>>>>    ???? >? ? ? >>>? ???? >>
>>>>>    ???? >? ? ? >>>? ???? >> K?benhavns Universitet
>>>>>    ???? >? ? ? >>>? ???? >> Department of Veterinary and Animal Sciences
>>>>>    ???? >? ? ? >>>? ???? >> Animal Welfare and Disease Control
>>>>>    ???? >? ? ? >>>? ???? >> Gr?nneg?rdsvej 8
>>>>>    ???? >? ? ? >>>? ???? >> 1870 Frederiksberg C
>>>>>    ???? >? ? ? >>>? ???? >> Denmark
>>>>>    ???? >? ? ? >>>? ???? >>
>>>>>    ???? >? ? ? >>>? ???? >> +45 35324135
>>>>>    ???? >? ? ? >>>? ???? >> mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>
>>>>>    ??? <mailto:mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>>
>>>>>    ???? >? ? ? >>>? ??? <mailto:mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>
>>>>>    ???? >? ? ?<mailto:mossa at sund.ku.dk
>>>>>    ??? <mailto:mossa at sund.ku.dk>>><mailto:mossa at sund.ku.dk
>>>>>    ??? <mailto:mossa at sund.ku.dk>
>>>>>    ???? >? ? ?<mailto:mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>>
>>>>>    ???? >? ? ? >>>? ??? <mailto:mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>
>>>>>    ??? <mailto:mossa at sund.ku.dk <mailto:mossa at sund.ku.dk>>>>
>>>>>    ???? >? ? ? >>>? ???? >>
>>>>>    ???? >? ? ? >>>? ???? >>
>>>>>    ???? >? ? ? >>>? ???? >>? ? ? ? [[alternative HTML version deleted]]
>>>>>    ???? >? ? ? >>>? ???? >>
>>>>>    ???? >? ? ? >>>? ???? >> ______________________________________________
>>>>>    ???? >? ? ? >>>? ???? >> R-devel at r-project.org
>>>>>    ??? <mailto:R-devel at r-project.org> <mailto:R-devel at r-project.org
>>>>>    ??? <mailto:R-devel at r-project.org>>
>>>>>    ???? >? ? ?<mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>
>>>>>    ??? <mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>>>
>>>>>    ???? >? ? ?mailing list
>>>>>    ???? >? ? ? >>>? ???? >> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>    ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>>>    ???? >? ? ?<https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>    ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>>
>>>>>    ???? >? ? ? >>>? ??? <https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>    ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>>>    ???? >? ? ?<https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>    ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>>>
>>>>>    ???? >? ? ? >>>? ???? >
>>>>>    ???? >? ? ? >>>? ???? >? ? ? ?[[alternative HTML version deleted]]
>>>>>    ???? >? ? ? >>>? ???? >
>>>>>    ???? >? ? ? >>>? ???? > ______________________________________________
>>>>>    ???? >? ? ? >>>? ???? > R-devel at r-project.org
>>>>>    ??? <mailto:R-devel at r-project.org> <mailto:R-devel at r-project.org
>>>>>    ??? <mailto:R-devel at r-project.org>>
>>>>>    ???? >? ? ?<mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>
>>>>>    ??? <mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>>>
>>>>>    ???? >? ? ?mailing list
>>>>>    ???? >? ? ? >>>? ???? > https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>    ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>>>    ???? >? ? ?<https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>    ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>>
>>>>>    ???? >? ? ? >>>? ??? <https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>    ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>>>    ???? >? ? ?<https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>    ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>>>
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>>? ??? ______________________________________________
>>>>>    ???? >? ? ? >>> R-devel at r-project.org <mailto:R-devel at r-project.org>
>>>>>    ??? <mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>>
>>>>>    ???? >? ? ?<mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>
>>>>>    ??? <mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>>>
>>>>>    ???? >? ? ?mailing list
>>>>>    ???? >? ? ? >>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>    ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>>>    ???? >? ? ?<https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>    ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>>
>>>>>    ???? >? ? ? >>>? ??? <https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>    ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>>>    ???? >? ? ?<https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>    ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>>>
>>>>>    ???? >? ? ? >>>
>>>>>    ???? >? ? ? >>
>>>>>    ???? >? ? ? >> ______________________________________________
>>>>>    ???? >? ? ? >> R-devel at r-project.org <mailto:R-devel at r-project.org>
>>>>>    ??? <mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>>
>>>>>    ??? mailing list
>>>>>    ???? >? ? ? >> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>    ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>>>    ???? >? ? ?<https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>    ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>>
>>>>>    ???? >? ? ? >
>>>>>    ???? >
>>>>>    ???? >? ? ?______________________________________________
>>>>>    ???? > R-devel at r-project.org <mailto:R-devel at r-project.org>
>>>>>    ??? <mailto:R-devel at r-project.org <mailto:R-devel at r-project.org>>
>>>>>    ??? mailing list
>>>>>    ???? > https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>    ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>
>>>>>    ???? >? ? ?<https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>    ??? <https://stat.ethz.ch/mailman/listinfo/r-devel>>
>>>>>    ???? >
>>>>>
>>>>
>>>
>>
>


From ht @end|ng |rom he@therturner@net  Wed Apr  2 14:43:14 2025
From: ht @end|ng |rom he@therturner@net (Heather Turner)
Date: Wed, 02 Apr 2025 13:43:14 +0100
Subject: [Rd] R Dev Day @ RSECon25, Fri 12 Sep,
 Warwick University  - travel funding available!
Message-ID: <42fe8aa9-7aca-46eb-b795-c11f2d70ea33@app.fastmail.com>

Dear All,

There will be another R Dev Day after RSECon25, on Friday 12 Sep, Warwick University, UK.

Travel funding is available - for participants from UK/Europe, this will cover travel plus up to 2 nights accommodation and for participants from the Global South this will cover travel plus up to 6 nights accommodation. RSECon25 registration must be arranged separately (you can apply for a conference fee waiver through the bursary scheme).

Read more details and apply for a place: https://warwick.ac.uk/fac/sci/statistics/news/r-dev-day-rsecon25/

*Deadline: Tuesday, 23 April (midnight anywhere on earth).*

The latest information for all upcoming R Dev Days can be found on the contributor site: https://contributor.r-project.org/events/r-dev-days/.

Best wishes,

Heather


From |kry|ov @end|ng |rom d|@root@org  Wed Apr  2 15:35:27 2025
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Wed, 2 Apr 2025 16:35:27 +0300
Subject: [Rd] 
 Suggestion: Install packages on non-appendable file systems
 (e.g. databricks volumes)
In-Reply-To: <CAGBo=GmW8jjRrVTDq6hN8Uf_Dx3nGtWY04X5-=eS1XKiA01VvA@mail.gmail.com>
References: <CAGBo=GnvV_udrRMWmL_hCsRceUZibtDfpR05sxs8ZSxkbd8rOg@mail.gmail.com>
 <ec874f23-cdb9-4902-b7a6-24cd64d6659f@gmail.com>
 <CAGBo=GmW8jjRrVTDq6hN8Uf_Dx3nGtWY04X5-=eS1XKiA01VvA@mail.gmail.com>
Message-ID: <20250402163527.7d738606@arachnoid>

? Thu, 27 Mar 2025 13:26:47 +0100
Sergio Oller <sergioller at gmail.com> ?????:

> Our current workaround kind of works, but when users expect to be able
> to install packages
> using renv or other tools that use install.packages to work; our
> wrapper is not that convenient.

Here's an idea that might help: since R CMD INSTALL launches R without
--vanilla, you can provide a system-wide startup file to your users that
would patch the installation function at runtime without patching the R
source code:

if (nzchar(Sys.getenv("R_LOCKDIR_PREFIX", "")))
invisible(suppressMessages(trace(
    tools:::.install_packages,
    tracer = quote(local({
        prefix <- path.expand(Sys.getenv("R_LOCKDIR_PREFIX", ""))
        lockdir <- NULL
        # prepend the prefix when asked for lockdir and it's non-empty
        makeActiveBinding(
            "lockdir",
            function (newval) {
                if (!missing(newval)) lockdir <<- newval
                if (nzchar(lockdir)) file.path(prefix, lockdir) else ""
            },
            parent.env(environment())
        )
    })),
    print = FALSE
)))

This is the same workaround as you have originally suggested, making
the installation on a non-appendable filesystem possible at the cost of
losing atomicity, with the added downside that an update of R could
change the internals and break the patch.

In theory, the same approach could be used to wrap the function that
installs source packages [*] in order to first install the package in a
non-databrick directory, then populate a temporary directory on the
databrick with the package contents, then rename it to the intended
installation directory. This would be even more brittle and harder to
implement because the function is created during the runtime of
tools:::.install_packages.

It might be easier to support a patched version of R installed on
databricks than such an Rprofile.

-- 
Best regards,
Ivan

[*]
https://github.com/r-devel/r-svn/blob/0a905442c27b538c7626b21e262939873523f209/src/library/tools/R/install.R#L544


From henr|k@bengt@@on @end|ng |rom gm@||@com  Thu Apr  3 05:24:37 2025
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Wed, 2 Apr 2025 20:24:37 -0700
Subject: [Rd] structure(<primitive function>, ...) is sticky: a bug,
 or should it be an error?
In-Reply-To: <CAFDcVCR14Tqoz4eKR5pFZLSTpoDxv2jE9fs3B0w4ZO6=CdmrXw@mail.gmail.com>
References: <CAFDcVCTka7-qHEHZ6U42ynSVffpEgZwboqJBOuDMCAMEtyNaFQ@mail.gmail.com>
 <26587.61068.527937.384919@stat.math.ethz.ch>
 <CAFDcVCSyG1HxUO1ZNUxQ=BGUGgPtoVQBqySnWg_EJyLa_VtzZA@mail.gmail.com>
 <26589.28252.677695.886493@stat.math.ethz.ch>
 <26589.35840.771000.991255@stat.math.ethz.ch>
 <CAFDcVCR14Tqoz4eKR5pFZLSTpoDxv2jE9fs3B0w4ZO6=CdmrXw@mail.gmail.com>
Message-ID: <CAFDcVCRUakN0pdCZNLjdQkw135EqCEjURUqLSCov7KALjFUO9g@mail.gmail.com>

Thank you Martin - I've been following your commits to R-devel and
R-beta. FWIW, I've just verified that it works as expected - I scanned
the base environment for all primitive functions and then verified
that attr(x, "abc") <- TRUE gives an error on R-devel;

$ R --vanilla
R Under development (unstable) (2025-04-02 r88098) -- "Unsuffered Consequences"
> attr(sum, "abc") <- TRUE
Error in attr(sum, "abc") <- TRUE : cannot set attribute on a 'builtin'

a warning on R-beta;

$ R --vanilla
> R version 4.5.0 beta (2025-04-02 r88102) -- "How About a Twenty-Six"
> attr(sum, "abc") <- TRUE
Warning message:
In attr(sum, "abc") <- TRUE :
  Setting attributes on primitive functions is deprecated and will be disabled

and neither on R release.

For the warning in R 4.5.0 beta, have you considered making it a
warning of class 'deprecatedWarning'? Not a big deal, but wanted to
mention it, just in case.

/Henrik

On Fri, Mar 21, 2025 at 10:07?AM Henrik Bengtsson
<henrik.bengtsson at gmail.com> wrote:
>
> On Fri, Mar 21, 2025 at 8:55?AM Martin Maechler
> <maechler at stat.math.ethz.ch> wrote:
> >
> > >>>>> Martin Maechler
> > >>>>>     on Fri, 21 Mar 2025 14:49:16 +0100 writes:
> >
> > >>>>> Henrik Bengtsson
> > >>>>>     on Thu, 20 Mar 2025 11:55:05 -0700 writes:
> >
> >     >>> I'm pretty convinced we should fix it by checking for
> >     >>> primitive functions inside the C code of `attributes<-` :
> >     >>> arguably the bug is really there, rather than in
> >     >>> structure().
> >     >>>
> >     >>> Patches are welcome (via R's Bugzilla or just here).
> >
> >     >> Thank you Martin. I'll make sure I create a brief BugZilla
> >     >> report on this, and hopefully a follow with a patch later
> >     >> on.
> >
> >     >> One question on urgency or not: Is it too late to get such
> >     >> a change in for the R 4.5.0 release? I suspect so, because
> >     >> it has a potential of breaking existing packages. But if
> >     >> there's a possibility of fixing this in R 4.5.0, I'll make
> >     >> this a top priority.  Please let me know.
> >
> >     >> /Henrik
> >
> >     > In such cases, I always go to  https://developer.r-project.org/
> >     > and look at the release schedule.
> >
> >     > Important for this Q seems
> >
> >     > * Friday 2025-03-14: GRAND-FEATURE FREEZE (4.5.0 alpha)
> >     > * Friday 2025-03-28: FEATURE FREEZE (4.5.0 beta)
> >     > * Friday 2025-04-04: CODE FREEZE (4.5.0 RC)
> >
> >     > So, yes there's a possibility  ... but as you mentioned, too,
> >     > it depends quite a bit on if the fix is easily affectiong useR
> >     > and CRAN/Bioc package space.
> >
> >     > Martin
> >
> > As a matter of fact, I'm testing already a simple patch I wrote
> > myself.
> > So, sorry, but I must renounce the above  "Patches are welcome".
>
> Excellent and even better (for me). Thank you Martin!
>
> /Henrik
>
> >
> > Martin


From jeroenoom@ @end|ng |rom gm@||@com  Thu Apr  3 11:13:44 2025
From: jeroenoom@ @end|ng |rom gm@||@com (Jeroen Ooms)
Date: Thu, 3 Apr 2025 11:13:44 +0200
Subject: [Rd] Enable compression in download.file()
Message-ID: <CABFfbXszJjhJCO3Dyhwodk8BCjnrdD36buttar354Q3B8FFtKg@mail.gmail.com>

Comparing download times of base R and the curl package:

  url <- 'https://jeroen.github.io/data/nycflights13.json'
  tmp <- tempfile()
  system.time(download.file(url, tmp, quiet = F)
  system.time(curl::curl_download(url, tmp, quiet = F))

Because this is an uncompressed file, the gzipped download is about 7x faster.

For the solution see https://curl.se/libcurl/c/CURLOPT_ACCEPT_ENCODING.html :

> To aid applications not having to bother about what specific algorithms this particular libcurl build supports, libcurl allows a zero-length string to be set ("") to ask for an Accept-Encoding: header to be used that contains all built-in supported encodings.


From @unwj|e @end|ng |rom gm@||@com  Thu Apr  3 10:36:39 2025
From: @unwj|e @end|ng |rom gm@||@com (Sun Wenjie)
Date: Thu, 3 Apr 2025 10:36:39 +0200
Subject: [Rd] Proposal: Integrating Rust Toolchain into Rtools for
 Rust-Based R Package Development
Message-ID: <E98B4E64-559D-41E1-8B65-7B6A39773129@gmail.com>

Dear R-devel community,

I'm exploring (experimentally) the integration of the Rust toolchain into 
Rtools, to enable smoother development and shipping of Rust-based R packages 
on Windows.

I've written a detailed blog post documenting the process, technical rationale
and what?s next:
https://medium.com/@sunwjie/integrating-the-rust-toolchain-into-rtools-e4c7df40cb82.

Currently, Rust is not included in Rtools, and setting it up alongside R on
Windows can be confusing for some users, especially those unfamiliar with
computers. However, both Rust (via the -gnu toolchain) and
Rtools share the same MinGW-based toolchain, making integration technically
feasible.

What I?ve done so far
- Built a custom Rtools45 installer with Rust 1.85.0 integrated alongside GCC
  and other tools.
- Successfully tested Rust-based R packages like {string2path} using the custom
  Rtools.

I'd love to contribute this work upstream and collaborate with Rtools
maintainers to make Rust a supported part of the official Rtools release. Are
there existing plans or blockers around this?

Thank you for your time, and I look forward to your thoughts! 

Best regards,
Wenjie

?? 
https://www.sun-wenjie.site


From @vr@h@m@@d|er @end|ng |rom gm@||@com  Thu Apr  3 13:57:07 2025
From: @vr@h@m@@d|er @end|ng |rom gm@||@com (Avraham Adler)
Date: Thu, 3 Apr 2025 07:57:07 -0400
Subject: [Rd] Proposal: Integrating Rust Toolchain into Rtools for
 Rust-Based R Package Development
In-Reply-To: <E98B4E64-559D-41E1-8B65-7B6A39773129@gmail.com>
References: <E98B4E64-559D-41E1-8B65-7B6A39773129@gmail.com>
Message-ID: <1C3455E7-B3D7-41B7-A994-82D805785B49@gmail.com>

Hello, Wenjie. 

If you are specifically interested in Windows, Tomas Kalibera is the keeper of Rtools for Windows and it has its own list at R-sig-windows which may provide more focus. 

Thank you,

Avi

Sent from my iPhone

> On Apr 3, 2025, at 7:30?AM, Sun Wenjie <sunwjie at gmail.com> wrote:
> 
> ?Dear R-devel community,
> 
> I'm exploring (experimentally) the integration of the Rust toolchain into
> Rtools, to enable smoother development and shipping of Rust-based R packages
> on Windows.
> 
> I've written a detailed blog post documenting the process, technical rationale
> and what?s next:
> https://medium.com/@sunwjie/integrating-the-rust-toolchain-into-rtools-e4c7df40cb82.
> 
> Currently, Rust is not included in Rtools, and setting it up alongside R on
> Windows can be confusing for some users, especially those unfamiliar with
> computers. However, both Rust (via the -gnu toolchain) and
> Rtools share the same MinGW-based toolchain, making integration technically
> feasible.
> 
> What I?ve done so far
> - Built a custom Rtools45 installer with Rust 1.85.0 integrated alongside GCC
>  and other tools.
> - Successfully tested Rust-based R packages like {string2path} using the custom
>  Rtools.
> 
> I'd love to contribute this work upstream and collaborate with Rtools
> maintainers to make Rust a supported part of the official Rtools release. Are
> there existing plans or blockers around this?
> 
> Thank you for your time, and I look forward to your thoughts!
> 
> Best regards,
> Wenjie
> 
> ??
> https://www.sun-wenjie.site
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Thu Apr  3 14:21:40 2025
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Thu, 3 Apr 2025 14:21:40 +0200
Subject: [Rd] Proposal: Integrating Rust Toolchain into Rtools for
 Rust-Based R Package Development
In-Reply-To: <E98B4E64-559D-41E1-8B65-7B6A39773129@gmail.com>
References: <E98B4E64-559D-41E1-8B65-7B6A39773129@gmail.com>
Message-ID: <24d5f3e1-5727-44d9-9800-22982183fdbb@gmail.com>

Congratulations on figuring out how to extend the build of the Rtools 
installer to add more programs there - it is always good to have a 
confirmation such things are clear enough from the available 
documentation and sources. You can see that e.g. QPDF is added this way, 
but adding a toolchain requires a different approach (more below).

What may not have been clear enough - please keep in mind that there are 
two distinct parts of what you get when you install Rtools from the 
installer: an (essentially vanilla) installation of Msys2 with the msys2 
subsystem, and toolchain + libraries built via (customized) MXE. The 
latter does not depend on the former. The latter can be (and is) built 
on Linux, without any involvement of Msys2. It doesn't use the Cygwin 
runtime in any way. In principle, one could use the latter only without 
the former, provided one has an alternative set of build tools (so 
perhaps the original Cygwin distribution, maybe WSL2 - even though, this 
is not tested, some details surely would have to be figured out). The 
latter is what includes the toolchains (and libraries), and can be also 
downloaded as a tarball - this is convenient for people who have their 
own installation of Msys2 they use. Also it is good for github actions 
(with a smaller tarball for that, when it suffices).

Also please note that Rtools doesn't use any of mingw-w64 from Msys2. It 
only uses programs using the Cygwin runtime (as build tools). Msys2 has 
indeed toolchains based on mingw-w64, but Rtools doesn't use them (from 
version 42).

To properly integrate Rust, one would have to make it part of the 
toolchain+libraries, so add it to MXE. One would have to build it using 
the compiler suite used within MXE. The upstream version of MXE uses 
gcc, which doesn't yet have a stable version of Rust. Once it will have 
it, it would make sense to extend MXE to also build Rust compilers using 
the same gcc used also to build C, C++ and Fortran compilers, and indeed 
make sure Rust will use the toolchains and libraries from the same build 
of MXE. That way it will be assured that the compiler runtimes and all 
libraries are compatible. Without that, they cannot be.

Rtools is also available for LLVM/aarch64, only a downstream version I 
am maintaining. In theory, Rust could already be added there, because 
LLVM already supports it. In theory, we could even use LLVM on x86_64 
then to get Rust. But, not in practice, because the Fortran 90 compiler 
(flang-new) in LLVM is not yet stable enough.

Best
Tomas

On 4/3/25 10:36, Sun Wenjie wrote:
> Dear R-devel community,
>
> I'm exploring (experimentally) the integration of the Rust toolchain into
> Rtools, to enable smoother development and shipping of Rust-based R packages
> on Windows.
>
> I've written a detailed blog post documenting the process, technical rationale
> and what?s next:
> https://medium.com/@sunwjie/integrating-the-rust-toolchain-into-rtools-e4c7df40cb82.
>
> Currently, Rust is not included in Rtools, and setting it up alongside R on
> Windows can be confusing for some users, especially those unfamiliar with
> computers. However, both Rust (via the -gnu toolchain) and
> Rtools share the same MinGW-based toolchain, making integration technically
> feasible.
>
> What I?ve done so far
> - Built a custom Rtools45 installer with Rust 1.85.0 integrated alongside GCC
>    and other tools.
> - Successfully tested Rust-based R packages like {string2path} using the custom
>    Rtools.
>
> I'd love to contribute this work upstream and collaborate with Rtools
> maintainers to make Rust a supported part of the official Rtools release. Are
> there existing plans or blockers around this?
>
> Thank you for your time, and I look forward to your thoughts!
>
> Best regards,
> Wenjie
>
> ??
> https://www.sun-wenjie.site
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From c@g|||e@p|e @end|ng |rom gm@||@com  Thu Apr  3 17:16:48 2025
From: c@g|||e@p|e @end|ng |rom gm@||@com (Colin Gillespie)
Date: Thu, 3 Apr 2025 16:16:48 +0100
Subject: [Rd] Bad URLs in DESCRIPTION files
Message-ID: <CADbDLZ=fq8_ff32mBvjZNpbi38STRpPGi1=5epknGTYcqw-2SA@mail.gmail.com>

Hi All,

Just want to flag a few packages:

MatrixLDA: https://cran.r-project.org/web/packages/MatrixLDA/index.html
The URL is technically valid - ajmolstad at github.io/ - but returns a
404. Almost certainly a typo.

redistmetrics: https://cran.r-project.org/web/packages/redistmetrics/index.html
Not a valid URL: https::/github.com/alarm-redist/redistmetrics/

yarrr: https://cran.r-project.org/web/packages/yarrr/
It looks like a lapsed domain, and Cypro folks have grabbed it.

Thanks

Colin

Ps I only found the last package because the name caught my attention


From ||u|@@rev|||@ @end|ng |rom gm@||@com  Thu Apr  3 19:57:50 2025
From: ||u|@@rev|||@ @end|ng |rom gm@||@com (=?UTF-8?Q?Llu=C3=ADs_Revilla?=)
Date: Thu, 3 Apr 2025 19:57:50 +0200
Subject: [Rd] Bad URLs in DESCRIPTION files
In-Reply-To: <CADbDLZ=fq8_ff32mBvjZNpbi38STRpPGi1=5epknGTYcqw-2SA@mail.gmail.com>
References: <CADbDLZ=fq8_ff32mBvjZNpbi38STRpPGi1=5epknGTYcqw-2SA@mail.gmail.com>
Message-ID: <CAN+W6_sGdx2x4vPrU=NF2zCJNJZASQRBuTT51XJ7Hxr2kF+n3A@mail.gmail.com>

Hi Colin,

I'm surprised this wasn't captured by the url checker on CRAN.
Are you suggesting a new check on package descriptions for the urls present?
In that case I guess it could be part of the standard R CMD check.

Llu?s

On Thu, 3 Apr 2025 at 17:17, Colin Gillespie <csgillespie at gmail.com> wrote:

> Hi All,
>
> Just want to flag a few packages:
>
> MatrixLDA: https://cran.r-project.org/web/packages/MatrixLDA/index.html
> The URL is technically valid - ajmolstad at github.io/ - but returns a
> 404. Almost certainly a typo.
>
> redistmetrics:
> https://cran.r-project.org/web/packages/redistmetrics/index.html
> Not a valid URL: https::/github.com/alarm-redist/redistmetrics/
>
> yarrr: https://cran.r-project.org/web/packages/yarrr/
> It looks like a lapsed domain, and Cypro folks have grabbed it.
>
> Thanks
>
> Colin
>
> Ps I only found the last package because the name caught my attention
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

	[[alternative HTML version deleted]]


From c@g|||e@p|e @end|ng |rom gm@||@com  Fri Apr  4 09:43:17 2025
From: c@g|||e@p|e @end|ng |rom gm@||@com (Colin Gillespie)
Date: Fri, 4 Apr 2025 08:43:17 +0100
Subject: [Rd] Bad URLs in DESCRIPTION files
In-Reply-To: <CAN+W6_sGdx2x4vPrU=NF2zCJNJZASQRBuTT51XJ7Hxr2kF+n3A@mail.gmail.com>
References: <CADbDLZ=fq8_ff32mBvjZNpbi38STRpPGi1=5epknGTYcqw-2SA@mail.gmail.com>
 <CAN+W6_sGdx2x4vPrU=NF2zCJNJZASQRBuTT51XJ7Hxr2kF+n3A@mail.gmail.com>
Message-ID: <CADbDLZ=AXHGCwpZvtja0tP=yhfRpT85hmuNk-oFr4ZtX67RXwQ@mail.gmail.com>

> I'm surprised this wasn't captured by the url checker on CRAN.
As was I

> Are you suggesting a new check on package descriptions for the urls present?
Yes - but more fixing edge cases than a new check

> In that case I guess it could be part of the standard R CMD check.

Yep. Kurt's message suggests that these were edge cases that missed the check.

Thanks

>
> Llu?s
>
> On Thu, 3 Apr 2025 at 17:17, Colin Gillespie <csgillespie at gmail.com> wrote:
>>
>> Hi All,
>>
>> Just want to flag a few packages:
>>
>> MatrixLDA: https://cran.r-project.org/web/packages/MatrixLDA/index.html
>> The URL is technically valid - ajmolstad at github.io/ - but returns a
>> 404. Almost certainly a typo.
>>
>> redistmetrics: https://cran.r-project.org/web/packages/redistmetrics/index.html
>> Not a valid URL: https::/github.com/alarm-redist/redistmetrics/
>>
>> yarrr: https://cran.r-project.org/web/packages/yarrr/
>> It looks like a lapsed domain, and Cypro folks have grabbed it.
>>
>> Thanks
>>
>> Colin
>>
>> Ps I only found the last package because the name caught my attention
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel


From Kurt@Horn|k @end|ng |rom wu@@c@@t  Fri Apr  4 18:36:26 2025
From: Kurt@Horn|k @end|ng |rom wu@@c@@t (Kurt Hornik)
Date: Fri, 4 Apr 2025 18:36:26 +0200
Subject: [Rd] Bad URLs in DESCRIPTION files
In-Reply-To: <CADbDLZ=AXHGCwpZvtja0tP=yhfRpT85hmuNk-oFr4ZtX67RXwQ@mail.gmail.com>
References: <CADbDLZ=fq8_ff32mBvjZNpbi38STRpPGi1=5epknGTYcqw-2SA@mail.gmail.com>
 <CAN+W6_sGdx2x4vPrU=NF2zCJNJZASQRBuTT51XJ7Hxr2kF+n3A@mail.gmail.com>
 <CADbDLZ=AXHGCwpZvtja0tP=yhfRpT85hmuNk-oFr4ZtX67RXwQ@mail.gmail.com>
Message-ID: <26608.2698.826234.53113@hornik.net>

>>>>> Colin Gillespie writes:

>> I'm surprised this wasn't captured by the url checker on CRAN.
> As was I

>> Are you suggesting a new check on package descriptions for the urls present?
> Yes - but more fixing edge cases than a new check

>> In that case I guess it could be part of the standard R CMD check.

> Yep. Kurt's message suggests that these were edge cases that missed
> the check.

Actually, the check code finds all these problems, but it is only run
upon submission.  Running 

x <- tools::CRAN_package_db()
y <- parallel::mclapply(x$URL,
                        tools:::.bad_DESCRIPTION_URL_field_parts,
                        mc.cores = 6L)
names(y) <- x$Package
y <- Filter(length, y)
y

currently finds problems in 50 CRAN packages.

Best
-k

> Thanks

>> 
>> Llu?s
>> 
>> On Thu, 3 Apr 2025 at 17:17, Colin Gillespie <csgillespie at gmail.com> wrote:
>>> 
>>> Hi All,
>>> 
>>> Just want to flag a few packages:
>>> 
>>> MatrixLDA: https://cran.r-project.org/web/packages/MatrixLDA/index.html
>>> The URL is technically valid - ajmolstad at github.io/ - but returns a
>>> 404. Almost certainly a typo.
>>> 
>>> redistmetrics: https://cran.r-project.org/web/packages/redistmetrics/index.html
>>> Not a valid URL: https::/github.com/alarm-redist/redistmetrics/
>>> 
>>> yarrr: https://cran.r-project.org/web/packages/yarrr/
>>> It looks like a lapsed domain, and Cypro folks have grabbed it.
>>> 
>>> Thanks
>>> 
>>> Colin
>>> 
>>> Ps I only found the last package because the name caught my attention
>>> 
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel

> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ||u|@@rev|||@ @end|ng |rom gm@||@com  Sun Apr  6 16:55:10 2025
From: ||u|@@rev|||@ @end|ng |rom gm@||@com (=?UTF-8?Q?Llu=C3=ADs_Revilla?=)
Date: Sun, 6 Apr 2025 16:55:10 +0200
Subject: [Rd] WRE Date field & CRAN
Message-ID: <CAN+W6_v7PP5tgPUG-UmYwrxZwkAYpjxGW65YT+buQM9AUfcmVg@mail.gmail.com>

Hi,

On Writing R Extensions there is a footnote [6] about the "Date" field on
the DESCRIPTION file being required by CRAN:

"required by CRAN, so checked by R CMD check --as-cran"

I think this is no longer up to date, as I've seen packages published on
CRAN without it.
This might be because now the Packaged date is checked too (around
src/tools/R/QC.R line 7998).

Best,

Llu?s


[6]: https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#FOOT6

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Apr  6 17:40:38 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 6 Apr 2025 11:40:38 -0400
Subject: [Rd] WRE Date field & CRAN
In-Reply-To: <CAN+W6_v7PP5tgPUG-UmYwrxZwkAYpjxGW65YT+buQM9AUfcmVg@mail.gmail.com>
References: <CAN+W6_v7PP5tgPUG-UmYwrxZwkAYpjxGW65YT+buQM9AUfcmVg@mail.gmail.com>
Message-ID: <1c819ad2-13b9-4ae1-993e-aa5484eb4e7e@gmail.com>

On 2025-04-06 10:55 a.m., Llu?s Revilla wrote:
> Hi,
> 
> On Writing R Extensions there is a footnote [6] about the "Date" field on
> the DESCRIPTION file being required by CRAN:
> 
> "required by CRAN, so checked by R CMD check --as-cran"
> 
> I think this is no longer up to date, as I've seen packages published on
> CRAN without it.
> This might be because now the Packaged date is checked too (around
> src/tools/R/QC.R line 7998).

I believe the text says Date is optional, but if present, the format is 
checked by CRAN.  So a missing date isn't evidence of an issue, but 
using a non-standard format would be.

I just did a check, and got this NOTE:

The Date field is not in ISO 8601 yyyy-mm-dd format.

So I think the docs are correct.

Duncan Murdoch


From ||u|@@rev|||@ @end|ng |rom gm@||@com  Sun Apr  6 18:01:13 2025
From: ||u|@@rev|||@ @end|ng |rom gm@||@com (=?UTF-8?Q?Llu=C3=ADs_Revilla?=)
Date: Sun, 6 Apr 2025 18:01:13 +0200
Subject: [Rd] WRE Date field & CRAN
In-Reply-To: <1c819ad2-13b9-4ae1-993e-aa5484eb4e7e@gmail.com>
References: <CAN+W6_v7PP5tgPUG-UmYwrxZwkAYpjxGW65YT+buQM9AUfcmVg@mail.gmail.com>
 <1c819ad2-13b9-4ae1-993e-aa5484eb4e7e@gmail.com>
Message-ID: <CAN+W6_t9oQ586Tg3GCcuOXnWa9ZQe77oGFFJSVG7JjO6OfES4A@mail.gmail.com>

Hi Duncan,

Thanks for the fast check and reply.

Indeed, the documentation is correct. I just think it can be interpreted as
saying Date is required to submit to CRAN.
Some package maintainers have been using the Date field, probably
interpreting this section this way because if you read the main text and
the footnote all together it says:

"The optional ?Date? field gives the *release date* of the current version
of the package. It is strongly recommended [and required by CRAN, so
checked by R CMD check --as-cran.] to use the ?yyyy-mm-dd? format
conforming to the ISO 8601 standard."

The footnote could be moved to the end of the sentence to clarify CRAN's
requirements are about the format not the field.
So it is read as:

"The optional ?Date? field gives the *release date* of the current version
of the package. It is strongly recommended to use the ?yyyy-mm-dd? format
conforming to the ISO 8601 standard [and required by CRAN, so checked by R
CMD check --as-cran.]."

I think the later is more clear to the package developers reading the WRE.

Llu?s


On Sun, 6 Apr 2025 at 17:40, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 2025-04-06 10:55 a.m., Llu?s Revilla wrote:
> > Hi,
> >
> > On Writing R Extensions there is a footnote [6] about the "Date" field on
> > the DESCRIPTION file being required by CRAN:
> >
> > "required by CRAN, so checked by R CMD check --as-cran"
> >
> > I think this is no longer up to date, as I've seen packages published on
> > CRAN without it.
> > This might be because now the Packaged date is checked too (around
> > src/tools/R/QC.R line 7998).
>
> I believe the text says Date is optional, but if present, the format is
> checked by CRAN.  So a missing date isn't evidence of an issue, but
> using a non-standard format would be.
>
> I just did a check, and got this NOTE:
>
> The Date field is not in ISO 8601 yyyy-mm-dd format.
>
> So I think the docs are correct.
>
> Duncan Murdoch
>
>

	[[alternative HTML version deleted]]


