From alexander.braumann at tuwien.ac.at  Tue Jul  1 12:00:03 2014
From: alexander.braumann at tuwien.ac.at (Alexander Braumann)
Date: Tue, 1 Jul 2014 12:00:03 +0200
Subject: [Rd] Error when compiling R with openblas
Message-ID: <53B286A3.3080600@tuwien.ac.at>

Hi,

I tried to compile R with openblas on a ubuntu 12.04 machine. I have to 
say that I normally use the package system and that I have no experience 
with compiling R.

I did the following:

./configure --enable-BLAS-shlib --enable-R-shlib LIBnn=lib 
--with-blas="-L/usr/lib/openblas-base/ -lopenblas" 
--enable-memory-profiling --with-x=yes


go the output:

R is now configured for x86_64-unknown-linux-gnu

   Source directory:          .
   Installation directory:    /usr/local

   C compiler:                gcc -std=gnu99  -g -O2
   Fortran 77 compiler:       gfortran  -g -O2

   C++ compiler:              g++  -g -O2
   C++ 11 compiler:           g++  -std=c++0x -g -O2
   Fortran 90/95 compiler:    gfortran -g -O2
   Obj-C compiler:

   Interfaces supported:      X11
   External libraries:        readline, BLAS(generic), lzma
   Additional capabilities:   PNG, JPEG, NLS
   Options enabled:           shared R library, shared BLAS, R 
profiling, memory profiling

   Recommended packages:      yes

configure: WARNING: you cannot build info or HTML versions of the R manuals



Then: make - and then comes the error:

make[4]: Entering directory `/home/ab/Downloads/R-3.1.0/src/main'
make[4]: Leaving directory `/home/ab/Downloads/R-3.1.0/src/main'
make[3]: Leaving directory `/home/ab/Downloads/R-3.1.0/src/main'
make[3]: Entering directory `/home/ab/Downloads/R-3.1.0/src/main'
gcc -std=gnu99 -Wl,--export-dynamic -fopenmp  -L/usr/local/lib -o R.bin 
Rmain.o  -L../../lib -lR -lRblas
../../lib/libR.so: undefined reference to `drot_'
../../lib/libR.so: undefined reference to `dtrsm_'
../../lib/libR.so: undefined reference to `dswap_'
../../lib/libR.so: undefined reference to `dcopy_'
../../lib/libR.so: undefined reference to `ddot_'
../../lib/libR.so: undefined reference to `dgemm_'
../../lib/libR.so: undefined reference to `dscal_'
../../lib/libR.so: undefined reference to `dnrm2_'
../../lib/libR.so: undefined reference to `dsyrk_'
../../lib/libR.so: undefined reference to `dasum_'
../../lib/libR.so: undefined reference to `daxpy_'
../../lib/libR.so: undefined reference to `drotg_'
../../lib/libR.so: undefined reference to `zgemm_'
collect2: ld returned 1 exit status
make[3]: *** [R.bin] Error 1
make[3]: Leaving directory `/home/ab/Downloads/R-3.1.0/src/main'
make[2]: *** [R] Error 2
make[2]: Leaving directory `/home/ab/Downloads/R-3.1.0/src/main'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/home/ab/Downloads/R-3.1.0/src'
make: *** [R] Error 1


I am wondering why libR.so wants to find these functions and not 
libRblas.so. The lib libRblas.so can be found in

 > locate libRblas.so

/home/ab/Downloads/R-3.1.0/lib/libRblas.so
/home/ab/Downloads/R-3.1.0/src/extra/blas/libRblas.so

they have both the same size.


can anyone help me with this?

cheers,

alex


From edd at debian.org  Tue Jul  1 15:33:38 2014
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 1 Jul 2014 08:33:38 -0500
Subject: [Rd] Error when compiling R with openblas
In-Reply-To: <53B286A3.3080600@tuwien.ac.at>
References: <53B286A3.3080600@tuwien.ac.at>
Message-ID: <21426.47282.676321.524390@max.nulle.part>


On 1 July 2014 at 12:00, Alexander Braumann wrote:
| I tried to compile R with openblas on a ubuntu 12.04 machine. I have to 
| say that I normally use the package system and that I have no experience 
| with compiling R.

You do not need to do that.  Just install the existing OpenBLAS package via

    libopenblas-base

(which you may already have) and R will use as the BLAS interface is
generic. That is what the package tries to tell you via [edited]

  edd at max:~$ dpkg -s r-base-core
  Package: r-base-core
  [...]
  Version: 3.1.0-1trusty0
  Depends: [...], libblas3 | libblas.so.3, [...], liblapack3 | liblapack.so.3, [...]
                  ^^^^^^^^^^^^^^^^^^^^^^^         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Any suitable LAPACK and BLAS package providing libblas3 / liblapack3 can be
used -- plug and play. And OpenBLAS plays along.

Also:
 
| I did the following:
| 
| ./configure --enable-BLAS-shlib --enable-R-shlib LIBnn=lib 
| --with-blas="-L/usr/lib/openblas-base/ -lopenblas" 
| --enable-memory-profiling --with-x=yes
| 
| 
| go the output:
| 
| R is now configured for x86_64-unknown-linux-gnu
| 
|    Source directory:          .
|    Installation directory:    /usr/local
| 
|    C compiler:                gcc -std=gnu99  -g -O2
|    Fortran 77 compiler:       gfortran  -g -O2
| 
|    C++ compiler:              g++  -g -O2
|    C++ 11 compiler:           g++  -std=c++0x -g -O2
|    Fortran 90/95 compiler:    gfortran -g -O2
|    Obj-C compiler:
| 
|    Interfaces supported:      X11
|    External libraries:        readline, BLAS(generic), lzma
                                          ^^^^^^^^^^^^^^

tells you that you failed to tell the build about your OpenBLAS. It fell back
to generic.

This is all in the 'Installation + Administration' manual. But you really
don't need to do this by hand.

I suggest you send follow-up to the r-sig-debian list. Its archives also have
past discussions of this and related questions.

Regards,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From nalimilan at club.fr  Tue Jul  1 16:18:58 2014
From: nalimilan at club.fr (Milan Bouchet-Valat)
Date: Tue, 01 Jul 2014 16:18:58 +0200
Subject: [Rd] Building R on Windows: mkdir of Rtools creates directories
 with read-only permissions [WEIRD]
In-Reply-To: <53B1BB5E.20309@gmail.com>
References: <1404117853.25972.8.camel@milan.mobile.lan>
	<53B12C98.2000007@gmail.com>
	<1404153678.32183.41.camel@milan.mobile.lan>
	<53B1BB5E.20309@gmail.com>
Message-ID: <1404224338.8290.35.camel@milan>

Le lundi 30 juin 2014 ? 15:32 -0400, Duncan Murdoch a ?crit :
> On 30/06/2014 2:41 PM, Milan Bouchet-Valat wrote:
> > Le lundi 30 juin 2014 ? 05:23 -0400, Duncan Murdoch a ?crit :
> > > On 30/06/2014, 4:44 AM, Milan Bouchet-Valat wrote:
> > > > On Thu Jan 9 2014 03:47 Henrik Bengtsson wrote:
> > > >> This is is an issue that bugged me for a while.  I encountered a year
> > > >> ago (April 2012) when I first tried to build R from source on Windows.
> > > >>  I never figured out what the solution is or if I'm doing something
> > > >> wrong myself (but I have found a tedious workaround).  I'm still on
> > > >> the same Windows 7 Ultimate machine with NTFS, but I now made sure I
> > > >> started from scratch so I have a completely fresh setup (see details
> > > >> at the end).
> > > >>
> > > >> PROBLEM:
> > > >> At the very first step I do:
> > > >>
> > > >> C:\R\src\gnuwin32>make all
> > > >> [... Waiting. No errors until ...]
> > > >> cp R.dll ../../bin/i386
> > > >> -------- Building ../../../bin/i386/Rblas.dll --------
> > > >> gcc -std=gnu99  -shared  -o ../../../bin/i386/Rblas.dll blas.o
> > > >> cmplxblas.o ../../gnuwin32/dllversion.o Rblas.def -L../../../bin/i386
> > > >> -lR -lgfortran
> > > >> c:/rtools/gcc-4.6.3/bin/../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/bin/ld.exe:
> > > >> cannot find -lR
> > > >> collect2: ld returned 1 exit status
> > > >> make[2]: *** [../../../bin/i386/Rblas.dll] Error 1
> > > >> make[1]: *** [Rblas] Error 2
> > > >> make: *** [rbuild] Error 2
> > > >>
> > > >> However:
> > > >>
> > > >> C:\R\src\gnuwin32>dir ..\..\bin\i386\
> > > >>  Volume in drive C is Windows7_OS
> > > >>  Volume Serial Number is E038-51CC
> > > >>
> > > >>  Directory of C:\R\bin\i386
> > > >>
> > > >> 01/08/2014  06:18 PM    <DIR>          .
> > > >> 01/08/2014  06:18 PM    <DIR>          ..
> > > >> 01/08/2014  06:18 PM         3,059,712 R.dll
> > > >> 01/08/2014  06:18 PM           348,995 Rgraphapp.dll
> > > >> 01/08/2014  06:18 PM           102,975 Riconv.dll
> > > >> 01/08/2014  06:18 PM           154,917 Rzlib.dll
> > > >>                4 File(s)      3,666,599 bytes
> > > >>                2 Dir(s)  22,424,739,840 bytes free
> > > >>
> > > >> What's weird is that these files have **read permission disabled**:
> > > >>
> > > >> C:\R\src\gnuwin32>file ..\..\bin\i386\*.dll
> > > >> ..\..\bin\i386\R.dll:         writable, executable, regular file, no
> > > >> read permission
> > > >> ..\..\bin\i386\Rgraphapp.dll: writable, executable, regular file, no
> > > >> read permission
> > > >> ..\..\bin\i386\Riconv.dll:    writable, executable, regular file, no
> > > >> read permission
> > > >> ..\..\bin\i386\Rzlib.dll:     writable, executable, regular file, no
> > > >> read permission
> > > >>
> > > >> What is going on?  Have anyone else seen this?  I've also tried
> > > >> running as Administrator - no difference.
> > > > Hi Henrik,
> > > >
> > > > Old thread, but I think I'm experiencing exactly the same problem. I
> > > > tried running as administrator and as a normal user, and no luck. I
> > > > noticed, though, that resetting permissions on the build tree makes the
> > > > error go away, and replaces it with another one stating that headers in
> > > > include/ could not be created due to permission issues.
> > > >
> > > > This is on a machine where I was able to build R 3.0.1 successfully,
> > > > though I also remember having permission issues I eventually fixed by
> > > > resetting permissions on the build tree. Not sure what's changed since
> > > > then...
> > > >
> > > > To add bit of information to the debugging you've already done: I
> > > > noticed that when opening the directory/file property dialog, a user
> > > > with a very long name including letters and numbers appears in the
> > > > permissions list for a second, and then disappears. This user reappears
> > > > every time I run 'make'. So maybe 'mkdir' or other tools use wrong user
> > > > IDs, creating bogus users. Just a guess.
> > > >
> > > > Have you found a solution or workaround since January? I really need to
> > > > build an R installer and I seem to be stuck...
> > >
> > > I have seen this, but I don't see it on every machine.  One one where I
> > > do see it is the Windows builder machine in Dortmund.  The following is
> > > inserted into the script after building the 32 bit build
> > >
> > > cacls %name32% /T /E /G VORDEFINIERT\Benutzer:R > NUL
> > >
> > > and similar after the 64 bit build.  (I don't remember whether
> > > VORDEFINIERT\Benutzer is the current user name, or is some generic thing
> > > saying "current user".  I think Uwe Ligges came up with this...)
> > Thanks. VORDEFINIERT\Benutzer appears to mean BUILTIN\Users (BUILTIN
> > \Utilisateurs in French), and refers to any user on the system (more or
> > less).
> >
> > Unfortunately, I've run that, and it doesn't make any difference to the
> > error I'm seeing. But I don't understand what you mean by "after
> > building the 32 bit build" since the problem is precisely that this step
> > does not complete successfully.
> >
> > Here is what I get:
> >
> > Microsoft Windows [version 6.1.7600]
> > Copyright (c) 2009 Microsoft Corporation. Tous droits r?serv?s.
> >
> > C:\Windows\system32>cd C:\Rbuild\R-3.1.0-32bit
> >
> > C:\Rbuild\R-3.1.0-32bit>cacls %name32% /T /E /G BUILTIN\UTILISATEURS:R > NUL
> >
> > C:\Rbuild\R-3.1.0-32bit>cacls %name32% /T /E /G BUILTIN\UTILISATEURS:W > NUL
> >
> > C:\Rbuild\R-3.1.0-32bit>cd src/gnuwin32
> >
> > C:\Rbuild\R-3.1.0-32bit\src\gnuwin32>set TMPDIR=C:\Rbuild\tmp
> >
> > C:\Rbuild\R-3.1.0-32bit\src\gnuwin32>make -j4 all
> > make[1]: warning: jobserver unavailable: using -j1.  Add `+' to parent make rule
> 
> I doubt if this warning is the cause of your troubles, but I wouldn't 
> bother with the -j4 option because of it.
> 
> On a more positive note:  our scripts are more complicated than yours. 
> I've cc'd a copy of our R-devel script.  It has lots of hard-coded 
> directories in it, so it would take some work to get it going, but maybe 
> it'll be helpful.
Thanks, it's very interesting to see the full script you are using. It
may be worth adding a link to it in the docs, I would have used it
instead of my half-automated solution if I had seen it.

I've taken inspiration from it and run the build again, in a different
directory, and it succeeded. Though it seems the real difference is the
directory: for some obscure reason I suspect the old one contaminated
the whole tree below it with its broken permission, even if I had
removed the source tree itself.

So, if anybody in the future is in the same situation: start from an
entirely different directory under e.g. C:\.


Thanks for the support

> Duncan Murdoch
> > .
> > make[1]: `MkRules' is up to date.
> > make[1]: warning: jobserver unavailable: using -j1.  Add `+' to parent make rule
> > .
> > make[4]: Nothing to be done for `svnonly'.
> > installing C headers
> > make[2]: Nothing to be done for `all'.
> > make[2]: `libRblas.dll.a' is up to date.
> > make[5]: Nothing to be done for `svnonly'.
> > installing C headers
> > make --no-print-directory -C ../extra/intl CFLAGS='-O3 -Wall -pedantic -mtune=core2' -f Makefile.win
> > make --no-print-directory -C ../appl CFLAGS='-O3 -Wall -pedantic -mtune=core2' FFLAGS='-O3 -mtune=core2' -f Makefile.win
> > make --no-print-directory -C ../nmath CFLAGS='-O3 -Wall -pedantic -mtune=core2'
> > FFLAGS='-O3 -mtune=core2' -f Makefile.win
> > make --no-print-directory -C ../main CFLAGS='-O3 -Wall -pedantic -mtune=core2' FFLAGS='-O3 -mtune=core2' malloc-DEFS='-DLEA_MALLOC' -f Makefile.win
> > gcc -std=gnu99 -m32 -I. -I../include -DHAVE_CONFIG_H -DR_DLL_BUILD -DR_ARCH='"i386"' -I../extra/xdr -O3 -Wall -pedantic -mtune=core2   -c serialize.c -o serialize.o
> > In file included from serialize.c:28:0:
> > ../include/Defn.h:1244:21: fatal error: ../include/libintl.h: Permission denied
> > compilation terminated.
> > make[4]: *** [serialize.o] Error 1
> > make[3]: *** [rlibs] Error 2
> > make[2]: *** [../../bin/i386/R.dll] Error 2
> > make[1]: *** [rbuild] Error 2
> > make: *** [all] Error 2
> >
> > C:\Rbuild\R-3.1.0-32bit\src\gnuwin32>ls ../include/libintl.h -l
> > ---------- 1 Milan mkpasswd 14384 Jun 29 20:15 ../include/libintl.h
> >
> > I see this weird permission pattern for most of the files in the build
> > tree. Running
> > cacls %name32% /T /E /G BUILTIN\UTILISATEURS:R > NUL
> > does not have any effect on the output of 'ls -l'.
> >
> >
> > Regards
> >
> > > Duncan Murdoch
> > >
> > > >
> > > > Thanks for your help
> > > >
> > > >
> > > >> TROUBLESHOOTING / WORKAROUND:
> > > >> It appears that 'mkdir' (of Rtools) causes this problem, because if I
> > > >> manually pre-create 'C:\R\src\gnuwin32\bin\i386' using Windows' mkdir
> > > >> it works, e.g.
> > > >>
> > > >> C:\R\src\gnuwin32>rm -fR ..\..\bin\
> > > >> C:\R\src\gnuwin32>cmd /C mkdir ..\..\bin\i386
> > > >> C:\R\src\gnuwin32>make rbuild
> > > >> [...]
> > > >> -------- Building ../../../bin/i386/Rblas.dll --------
> > > >> gcc -std=gnu99  -shared  -o ../../../bin/i386/Rblas.dll blas.o
> > > >> cmplxblas.o ../../gnuwin32/dllversion.o Rblas.def -L../../../bin/i386
> > > >> -lR -lgfortran
> > > >> make --no-print-directory -C front-ends
> > > >> mkdir -p ../../../bin/i386
> > > >> cp Rgui.exe ../../../bin/i386/Rgui.exe
> > > >> mkdir -p ../../../bin/i386
> > > >> cp Rterm.exe ../../../bin/i386/Rterm.exe
> > > >> mkdir -p ../../../bin/i386
> > > >> cp Rcmd.exe ../../../bin/i386/Rcmd.exe
> > > >> mkdir -p ../../../bin/i386
> > > >> cp RSetReg.exe ../../../bin/i386/RSetReg.exe
> > > >> mkdir -p ../../../bin/i386
> > > >> cp R.exe ../../../bin/i386/R.exe
> > > >> mkdir -p ../../../bin/i386
> > > >> cp Rscript.exe ../../../bin/i386/Rscript.exe
> > > >> mkdir -p ../../../bin/i386
> > > >> cp open.exe ../../../bin/i386/open.exe
> > > >> mkdir -p ../../../bin
> > > >> cp Rfe.exe ../../../bin/R.exe
> > > >> mkdir -p ../../../bin
> > > >> cp Rfe.exe ../../../bin/Rscript.exe
> > > >> make[1]: `COPYRIGHTS' is up to date.
> > > >> make --no-print-directory -C ../modules -f Makefile.win \
> > > >>   CFLAGS='-O3 -Wall -pedantic -mtune=core2' FFLAGS='-O3 -mtune=core2'
> > > >> gcc -std=gnu99  -shared -s -o ../../../bin/i386/Rlapack.dll dlamch.o
> > > >> dlapack.o cmplx.o init_win.o Rlapackrc.o -L../../../bin/i386 -lR
> > > >> -lRblas -lgfortran
> > > >> cp lapack.dll ../../../modules/i386/lapack.dll
> > > >>
> > > >> and there is (obviously) read permissions on those files:
> > > >>
> > > >> C:\R\src\gnuwin32>file ..\..\bin\i386\*.dll
> > > >> ..\..\bin\i386\R.dll:         PE32 executable for MS Windows (DLL)
> > > >> (GUI) Intel 80386 32-bit
> > > >> ..\..\bin\i386\Rblas.dll:     PE32 executable for MS Windows (DLL)
> > > >> (console) Intel 80386 32-bit
> > > >> ..\..\bin\i386\Rgraphapp.dll: PE32 executable for MS Windows (DLL)
> > > >> (GUI) Intel 80386 32-bit
> > > >> ..\..\bin\i386\Riconv.dll:    PE32 executable for MS Windows (DLL)
> > > >> (console) Intel 80386 32-bit
> > > >> ..\..\bin\i386\Rlapack.dll:   PE32 executable for MS Windows (DLL)
> > > >> (console) Intel 80386 32-bit
> > > >> ..\..\bin\i386\Rzlib.dll:     PE32 executable for MS Windows (DLL)
> > > >> (console) Intel 80386 32-bit
> > > >>
> > > >> Pre-creating the proper directories is tedious and only works up to
> > > >> the point of 'make distribution', where I haven't found a similar
> > > >> workaround (without modifying the Makefiles).  Note, I can get to the
> > > >> point where I have build and check everything (including recommended
> > > >> packages).
> > > >>
> > > >>
> > > >> Just to convince you that mkdir is the problem, I can reproduce the
> > > >> problem from this point, by removing the bin/ directory again and
> > > >> relying on Rtools mkdir again;
> > > >>
> > > >> C:\R\src\gnuwin32>rm -fR ..\..\bin
> > > >> C:\R\src\gnuwin32>make rbuild
> > > >> make[3]: Nothing to be done for `svnonly'.
> > > >> installing C headers
> > > >> make[1]: `libRblas.dll.a' is up to date.
> > > >> make[4]: Nothing to be done for `svnonly'.
> > > >> installing C headers
> > > >> make --no-print-directory -C ../extra/intl CFLAGS='-O3 -Wall -pedantic
> > > >> -mtune=core2' -f Makefile.win
> > > >> make --no-print-directory -C ../appl CFLAGS='-O3 -Wall -pedantic
> > > >> -mtune=core2' FFLAGS='-O3 -mtune=core2' -f Makefile.win
> > > >> make --no-print-directory -C ../nmath CFLAGS='-O3 -Wall -pedantic
> > > >> -mtune=core2' FFLAGS='-O3 -mtune=core2' -f Makefile.win
> > > >> make --no-print-directory -C ../main CFLAGS='-O3 -Wall -pedantic
> > > >> -mtune=core2' FFLAGS='-O3 -mtune=core2' malloc-DEFS='-DLEA_MALLOC' -f
> > > >> Makefile.win
> > > >> make --no-print-directory -C ./getline CFLAGS='-O3 -Wall -pedantic -mtune=core2'
> > > >>
> > > >> make[3]: `gl.a' is up to date.
> > > >> make -f Makefile.win makeMakedeps
> > > >> make -f Makefile.win libpcre.a
> > > >> make[4]: `libpcre.a' is up to date.
> > > >> make[3]: Nothing to be done for `all'.
> > > >> make -f Makefile.win makeMakedeps
> > > >> make -f Makefile.win libtre.a
> > > >> make[4]: `libtre.a' is up to date.
> > > >> make[3]: Nothing to be done for `all'.
> > > >> make[4]: `stamp' is up to date.
> > > >> make[4]: `liblzma.a' is up to date.
> > > >> make[2]: `R.dll' is up to date.
> > > >> cp R.dll ../../bin/i386
> > > >> -------- Building ../../../bin/i386/Rblas.dll --------
> > > >> gcc -std=gnu99  -shared  -o ../../../bin/i386/Rblas.dll blas.o
> > > >> cmplxblas.o ../../gnuwin32/dllversion.o Rblas.def -L../../../bin/i386
> > > >> -lR -lgfortran
> > > >> c:/rtools/gcc-4.6.3/bin/../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/bin/ld.exe:
> > > >> cannot find -lR
> > > >> collect2: ld returned 1 exit status
> > > >> make[2]: *** [../../../bin/i386/Rblas.dll] Error 1
> > > >> make[1]: *** [Rblas] Error 2
> > > >> make: *** [rbuild] Error 2
> > > >>
> > > >>
> > > >> MORE TROUBLESHOOTING:
> > > >> The MD5 checksum when it fails (reproducible):
> > > >> C:\R\src\gnuwin32>md5sum ../../bin/i386/*.dll
> > > >> 75b2e64d3847e768631681922df5a81d *../../bin/i386/R.dll
> > > >> 12a35b63a28ad0e0fee8cae04f76e907 *../../bin/i386/Rgraphapp.dll
> > > >> e2c40ae15d13dc17af33c1367f78817d *../../bin/i386/Riconv.dll
> > > >> c5ea5a5cd2b7d3c07970f5314ce7296a *../../bin/i386/Rzlib.dll
> > > >>
> > > >> The MD5 checksum when it works (reproducible):
> > > >> C:\R\src\gnuwin32>md5sum ../../bin/i386/*.dll
> > > >> 75b2e64d3847e768631681922df5a81d *../../bin/i386/R.dll
> > > >> 12a35b63a28ad0e0fee8cae04f76e907 *../../bin/i386/Rgraphapp.dll
> > > >> e2c40ae15d13dc17af33c1367f78817d *../../bin/i386/Riconv.dll
> > > >> c5ea5a5cd2b7d3c07970f5314ce7296a *../../bin/i386/Rzlib.dll
> > > >> +
> > > >> c81b3399027ec9c24ca80ba92199327c *../../bin/i386/Rblas.dll
> > > >> 20d32cee2e561d1826af1a538844472b *../../bin/i386/Rlapack.dll
> > > >>
> > > >>
> > > >> Thanks for any help,
> > > >>
> > > >> Henrik
> > > >>
> > > >>
> > > >> SETUP:
> > > >> 1. Downloaded/svn checkout the R source to C:\R\.
> > > >> 2. Installed most recent Rtools to C:\Rtools (completely removed previously)
> > > >> (3. Modifying the MkRules.* files has no impact for reproducing this
> > > >> problem.  Same with 'make rsync-recommended')
> > > >>
> > > >> C:\R\src\gnuwin32>path
> > > >> PATH=;C:\Rtools\bin;C:\Rtools\gcc-4.6.3\bin;C:\Windows;C:\Windows\system32
> > > >>
> > > >> C:\R\src\gnuwin32>cat C:\Rtools\VERSION.txt
> > > >> Rtools version 3.1.0.1939
> > > >>
> > > >> C:\R\src\gnuwin32>ls ../..
> > > >> COPYING      Makefile.fw  VERSION       configure.ac  po     tmp
> > > >> ChangeLog    Makefile.in  VERSION-NICK  doc           share  tools
> > > >> INSTALL      README       config.site   etc           src
> > > >> Makeconf.in  Tcl          configure     m4            tests
> > > >
> > > > ______________________________________________
> > > > R-devel at r-project.org mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-devel
> > > >
> >
>


From lawrence.michael at gene.com  Tue Jul  1 16:43:42 2014
From: lawrence.michael at gene.com (Michael Lawrence)
Date: Tue, 1 Jul 2014 07:43:42 -0700
Subject: [Rd] R CMD check warning with S3 method
In-Reply-To: <53B163D8.7070006@gmail.com>
References: <CAFOpNVGGT+tpdAZ42Q+jkWntAE+N=Ctq_D5pKbVVHx7F6_m0RQ@mail.gmail.com>
	<1403198095.17749.166.camel@braque.iarc.fr>
	<CAFOpNVF3Q2nN7jUpCvoqGh_Q0PEpMFgP7KQxrymQxHWUX86YvA@mail.gmail.com>
	<31E214B6DF75104E942856C2F74953CB0519C64C@exchange>
	<CAFOpNVGDzUUtGnWmX3dakGgsnRMG0q+cMFY7WYtWhM98dJrPqg@mail.gmail.com>
	<CANROs4fBWPkhPXKV+AkTXCXPx0aFkpt97u2yyboMMp8teeNvMw@mail.gmail.com>
	<CANROs4dB8Z2tS6s5dp2RK+T6Vt=4_M1KugAFqbh+VZhZybEwFw@mail.gmail.com>
	<CAOQ5NyfkV7D-kmCcuADQTkhs+fxGTbd6B9EZcM_y6jj-_4A7aw@mail.gmail.com>
	<53B06C45.30208@gmail.com>
	<CAOQ5NydcoTxWRi1csjOXT7k2H58BqgtWE9CE6P1pBr+oGEEMxQ@mail.gmail.com>
	<53B163D8.7070006@gmail.com>
Message-ID: <CAOQ5NyfrDe-p-1bJywre-KY-1c=awtHMoJdtp0TZRaU+Fzvz-A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140701/6ac4e4ab/attachment.pl>

From minshall at acm.org  Tue Jul  1 17:26:38 2014
From: minshall at acm.org (Greg Minshall)
Date: Tue, 01 Jul 2014 18:26:38 +0300
Subject: [Rd] creating a package from a development source tree
Message-ID: <54522.1404228398@greg-minshalls-mbp.local>

hi.  this is sort of a software methodology question.

i'm working on developing a package (with C source code).  developing
it, i use autotools, git, make, and such like.  as a result, there are
random files in my source code directory that "R CMD check" would rather
not see.  some of these files (such as .git and friends) i could arrange
to move to "just above" my development subtree; others of these (such as
configure.ac and the random crud autoreconf(1) and friends leave laying
around) can't be moved (afaik).

i'm curious how people move from their personal development tree to a
tree from which the package can be passed to "R CMD *".  do "you" have a
makefile in their tree that creates this?  during development, is this
the path you use for building and testing?

cheers, Greg Minshall


From marc_schwartz at me.com  Tue Jul  1 18:17:54 2014
From: marc_schwartz at me.com (Marc Schwartz)
Date: Tue, 01 Jul 2014 11:17:54 -0500
Subject: [Rd] creating a package from a development source tree
In-Reply-To: <54522.1404228398@greg-minshalls-mbp.local>
References: <54522.1404228398@greg-minshalls-mbp.local>
Message-ID: <67FEF72F-20B8-41E2-AFE4-A8B7D0A0614F@me.com>

On Jul 1, 2014, at 10:26 AM, Greg Minshall <minshall at acm.org> wrote:

> hi.  this is sort of a software methodology question.
> 
> i'm working on developing a package (with C source code).  developing
> it, i use autotools, git, make, and such like.  as a result, there are
> random files in my source code directory that "R CMD check" would rather
> not see.  some of these files (such as .git and friends) i could arrange
> to move to "just above" my development subtree; others of these (such as
> configure.ac and the random crud autoreconf(1) and friends leave laying
> around) can't be moved (afaik).
> 
> i'm curious how people move from their personal development tree to a
> tree from which the package can be passed to "R CMD *".  do "you" have a
> makefile in their tree that creates this?  during development, is this
> the path you use for building and testing?
> 
> cheers, Greg Minshall


Hi,

Run 'R CMD check' on the file built from 'R CMD build', rather than on the actual package source file tree, as per:

  http://cran.r-project.org/doc/manuals/r-patched/R-exts.html#Checking-packages

from the Writing R Extensions manual.

You can also use the file .Rbuildignore to define files that should be excluded. See the fifth paragraph in:

  http://cran.r-project.org/doc/manuals/r-patched/R-exts.html#Building-package-tarballs


Regards,

Marc Schwartz


From kevinushey at gmail.com  Tue Jul  1 20:15:16 2014
From: kevinushey at gmail.com (Kevin Ushey)
Date: Tue, 1 Jul 2014 11:15:16 -0700
Subject: [Rd] USE_CXX1X, Snow Leopard R binaries + Mavericks
Message-ID: <CAJXgQP2vozz=E_Vg2Jhc+6M6+8kiW_Ex434LXEaXGzg-ben-AA@mail.gmail.com>

Hi R-devel,

I'm noticing the following behaviour:

    writeLines("#include <Rcpp.h>", file = "test.cpp")
    Rcpp::sourceCpp("~/test.cpp") ## succeeds at trivial compile
    Sys.setenv("USE_CXX1X" = "yes")
    Rcpp::sourceCpp("~/test.cpp") ## fails; CXX nor CXX1X properly set (?)

IIUC, R is not propagating CXX nor CXX1X when USE_CXX1X is set on a
Snow Leopard CRAN build of R. Is this the expected behaviour? IIUC,
Snow Leopard binaries are built with older compilers and hence we
might not expect this to even work were CXX or CXX1X propagated (ie,
grabbing the Mavericks clang / clang++).

Comments on this in R-exts would be greatly appreciated as well.

kevinushey at s-169-232-64-218:~$ R --vanilla --slave -e "sessionInfo()"
R version 3.1.0 (2014-04-10)
Platform: x86_64-apple-darwin10.8.0 (64-bit)

locale:
[1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

kevinushey at s-169-232-64-218:~$ uname -a

Darwin s-169-232-64-218.resnet.ucla.edu 13.2.0 Darwin Kernel Version
13.2.0: Thu Apr 17 23:03:13 PDT 2014;
root:xnu-2422.100.13~1/RELEASE_X86_64 x86_64

Cheers from useR2014,
Kevin


From minshall at acm.org  Wed Jul  2 05:34:18 2014
From: minshall at acm.org (Greg Minshall)
Date: Wed, 02 Jul 2014 06:34:18 +0300
Subject: [Rd] creating a package from a development source tree
In-Reply-To: Your message of "Tue, 01 Jul 2014 11:17:54 -0500."
	<67FEF72F-20B8-41E2-AFE4-A8B7D0A0614F@me.com>
Message-ID: <87849.1404272058@greg-minshalls-mbp.local>

thanks!  that, as did an off-list reply, gave me the clue i needed.
cheers.


From ddalthorp at usgs.gov  Fri Jul  4 01:53:42 2014
From: ddalthorp at usgs.gov (Dalthorp, Daniel)
Date: Thu, 3 Jul 2014 16:53:42 -0700
Subject: [Rd] Rtools -- compiling C dll for 64-bit
Message-ID: <CAJeYpE9O+OBwzTHFf=huaKio6pQ9ZbWp9r7rBhmhWeL=-6dXRA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140703/e837eece/attachment.pl>

From murdoch.duncan at gmail.com  Fri Jul  4 12:21:55 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 04 Jul 2014 06:21:55 -0400
Subject: [Rd] Rtools -- compiling C dll for 64-bit
In-Reply-To: <CAJeYpE9O+OBwzTHFf=huaKio6pQ9ZbWp9r7rBhmhWeL=-6dXRA@mail.gmail.com>
References: <CAJeYpE9O+OBwzTHFf=huaKio6pQ9ZbWp9r7rBhmhWeL=-6dXRA@mail.gmail.com>
Message-ID: <53B68043.5050700@gmail.com>

On 03/07/2014, 7:53 PM, Dalthorp, Daniel wrote:> I've seen that many
people have had trouble using Rtools for a 64-bit
> compile of C functions. For some, a quick change in path statement
seems to
> corrects the problem; for others, apparently not. For me? I've been
working
> at path statements and install/uninstall/reinstall of all sorts of things
> for four hours now with no success. The 32-bit dll loads fine, but I
need a
> 64-bit version.
>
> Is there an option to tell the compiler with Rtools to use 64-bit? Or
a way
> to kill off the 32-bit version on my machine so I don't need to worry
about
> it?
>
> Any guidance would be greatly appreciated!

Your post is far too vague.  Where have you seen all these problems?
What are you doing?

Of course the tools in Rtools have options to select the architecture,
but users normally don't need to set those manually.  If you're building
R, use "MULTI=64" on the make command.
If you're calling compilers directly, use the appropriate command line
option or prefix for that compiler.  These are all listed in the MkRules
file in src/gnuwin32/MkRules.dist in the R sources, or in the help pages
for the commands.

Duncan Murdoch


From peljasz at yahoo.co.uk  Fri Jul  4 13:13:13 2014
From: peljasz at yahoo.co.uk (lejeczek)
Date: Fri, 04 Jul 2014 12:13:13 +0100
Subject: [Rd] blas test problem
In-Reply-To: <B93CB00F-5B28-40D6-909D-8D69A35DFC7D@gmail.com>
References: <53AD57A5.7020905@yahoo.co.uk>
	<B93CB00F-5B28-40D6-909D-8D69A35DFC7D@gmail.com>
Message-ID: <53B68C49.7050402@yahoo.co.uk>

later I tried plain-vanilla, well.. redhats' and derivatives 
default packages and they all fail:

 > ## PR#4582 %*% with NAs
 > stopifnot(is.na(NA %*% 0), is.na(0 %*% NA))
 > ## depended on the BLAS in use.
 >
 >
 > ## found from fallback test in slam 0.1-15
 > ## most likely indicates an inaedquate BLAS.
 > x <- matrix(c(1, 0, NA, 1), 2, 2)
 > y <- matrix(c(1, 0, 0, 2, 1, 0), 3, 2)
 > (z <- tcrossprod(x, y))
      [,1] [,2] [,3]
[1,]   NA   NA    0
[2,]    2    1    0
 > stopifnot(identical(z, x %*% t(y)))
Error: identical(z, x %*% t(y)) is not TRUE
Execution halted


I've tried scientificLinux, Centos, Oracle
all versions of R => 3.0 these linux distribution provide
hardware are AMD various CPU based platform


On 30/06/14 10:45, peter dalgaard wrote:
> It is not clear what you mean:
>
> The quoted page lists particular AMD BLAS versions that fail R's regression test.
>
> Other builds of R would run the regression test during building and you can run them yourself if you get the source code (for good measure, use the current version, not one from a 2011 web posting, i.e., fetch say https://svn.r-project.org/R/branches/R-3-1-branch/tests/reg-BLAS.R).
>
> E.g., for me
>
> Peters-iMac:R pd$ ../BUILD/bin/R --vanilla < tests/reg-BLAS.R
> ... normal output, no errors ...
>
> There is some risk that binary builds of R on one machine will fail on another. If this happens, it could be quite serious, so developers would want to know. However "most...seem to fail" is not enough to act upon. What exactly did you do, on which computing platform, and what happened that makes you believe that it had failed?
>
> -pd
>
> On 27 Jun 2014, at 13:38 , lejeczek <peljasz at yahoo.co.uk> wrote:
>
>> dear developers
>>
>> I myself am not a prog-devel, I found this
>>
>> http://devgurus.amd.com/message/1255852#1255852
>>
>> Most R compilations/installations I use seem to fail this test, is this a problem and if yes then how serious is it?
>>
>> regards
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch.duncan at gmail.com  Fri Jul  4 16:34:03 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 04 Jul 2014 10:34:03 -0400
Subject: [Rd] Rtools -- compiling C dll for 64-bit
In-Reply-To: <CAJeYpE9QPwSVWMaD-BVGRQerpxnfYkG8R0z16BwnbKwZBMMkgw@mail.gmail.com>
References: <CAJeYpE9O+OBwzTHFf=huaKio6pQ9ZbWp9r7rBhmhWeL=-6dXRA@mail.gmail.com>	<53B68043.5050700@gmail.com>
	<CAJeYpE9QPwSVWMaD-BVGRQerpxnfYkG8R0z16BwnbKwZBMMkgw@mail.gmail.com>
Message-ID: <53B6BB5B.8010409@gmail.com>

On 04/07/2014 9:47 AM, Dalthorp, Daniel wrote:
> Thank-you for the prompt and helpful response. It sounds like all I 
> need is a very simple fix, but it eludes me.
>
> I am trying to call a custom C function from R to speed a calculation. 
> I'm on Windows 7 with R 3.0.2 and the latest Rtools. I run R CMD SHLIB 
> cfunc.c from the DOS command line and a.dll is created. In R, 
> dyn.load("cfunc.dll") works fine with 32-bit R but fails with 64-bit 
> ("LoadLibrary failure:  %1 is not a valid Win32 application", where 
> "%1" refers to cfunc.dll).
>
> The first part of my PATH reads: 
> c:\Rtools\bin;C:\Rtools\gcc-4.6.3\bin;C:\Program Files\R\R-3.0.2\bin\x64

If you run R CMD SHLIB you should by default get the same architecture 
as the version of R that you used.  For example, if I have 64 bit R 
first on my path I see this:

$ R CMD SHLIB test.c
gcc -m64 -I"F:/R/svn/r-devel/R64/include" -DNDEBUG          -O2 -Wall  
-std=gnu9
9 -mtune=core2 -c test.c -o test.o
gcc -m64 -shared -s -static-libgcc -o test.dll tmp.def test.o 
-LF:/R/svn/r-devel
/R64/bin/x64 -lR

That's a 64 bit build.  If I have 32 bit R first, I see this:

$ R CMD SHLIB test.c
gcc  -I"F:/R/svn/r-devel/R/include" -DNDEBUG          -O3 -Wall 
-std=gnu99 -mtu
ne=core2 -c test.c -o test.o
gcc -shared -s -static-libgcc -o test.dll tmp.def test.o 
-LF:/R/svn/r-devel/R/bi
n/i386 -lR

That's a 32 bit build.  From the look of your PATH, you should have 64 
bit R first, but you say you're getting 32 bit DLLs, which doesn't make 
any sense.  I'll assume you've got a typo in your message somewhere, but 
you probably want to check what

R --version

prints to be sure.

Duncan Murdoch
>
> -Dan
>
>
> On Fri, Jul 4, 2014 at 3:21 AM, Duncan Murdoch 
> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>
>     On 03/07/2014, 7:53 PM, Dalthorp, Daniel wrote:> I've seen that many
>     people have had trouble using Rtools for a 64-bit
>     > compile of C functions. For some, a quick change in path statement
>     seems to
>     > corrects the problem; for others, apparently not. For me? I've been
>     working
>     > at path statements and install/uninstall/reinstall of all sorts
>     of things
>     > for four hours now with no success. The 32-bit dll loads fine, but I
>     need a
>     > 64-bit version.
>     >
>     > Is there an option to tell the compiler with Rtools to use
>     64-bit? Or
>     a way
>     > to kill off the 32-bit version on my machine so I don't need to
>     worry
>     about
>     > it?
>     >
>     > Any guidance would be greatly appreciated!
>
>     Your post is far too vague.  Where have you seen all these problems?
>     What are you doing?
>
>     Of course the tools in Rtools have options to select the architecture,
>     but users normally don't need to set those manually.  If you're
>     building
>     R, use "MULTI=64" on the make command.
>     If you're calling compilers directly, use the appropriate command line
>     option or prefix for that compiler.  These are all listed in the
>     MkRules
>     file in src/gnuwin32/MkRules.dist in the R sources, or in the help
>     pages
>     for the commands.
>
>     Duncan Murdoch
>
>
>
>
> -- 
> Dan Dalthorp, PhD
> Statistician
> USGS Forest and Rangeland Ecosystem Science Center
> Forest Sciences Lab, Rm 189
> 3200 SW Jefferson Way
> Corvallis, OR 97331
> ph: 541-750-0953
> ddalthorp at usgs.gov <mailto:ddalthorp at usgs.gov>
>


From minshall at acm.org  Fri Jul  4 21:27:45 2014
From: minshall at acm.org (Greg Minshall)
Date: Fri, 04 Jul 2014 22:27:45 +0300
Subject: [Rd] DESCRIPTION.in file causes R CMD check to fail?
Message-ID: <34738.1404502065@greg-minshalls-mbp.local>

hi.  i'm building a package using autotools.  to propagate the package
version number from configure.ac to DESCRIPTION, i'm using a
DESCRIPTION.in file.  both of these files are "shar"'d below.

i need to distribute the DESCRIPTION.in file, as ./configure will need
it.  but, "R CMD check" wants to look at DESCRIPTION, so i've let that
also come into the package tarball.

however, when i run "R CMD check" with DESCRIPTION.in in the tree, it
fails:
----
bash greg-minshalls-mbp: {3359} R CMD check image2k_0.1.tar.gz 
* using log directory ?/Users/minshall/src/mine/image2k/buildit/image2k.Rcheck?
* using R version 3.0.3 (2014-03-06)
* using platform: x86_64-apple-darwin13.1.0 (64-bit)
* using session charset: UTF-8
Error in if (desc["Priority"] == "base") { : 
  missing value where TRUE/FALSE needed
Execution halted
----

(whereas if i remove DESCRIPTION.in and recreate the tar file,
everything is good.)

are there any thoughts on what might be the problem?

cheers, Greg Minshall
----
# This is a shell archive.  Save it in a file, remove anything before
# this line, and then unpack it by entering "sh file".  Note, it may
# create directories; files and directories will be owned by you and
# have default permissions.
#
# This archive contains:
#
#       DESCRIPTION
#       DESCRIPTION.in
#
echo x - DESCRIPTION
sed 's/^X//' >DESCRIPTION << 'END-of-DESCRIPTION'
XPackage: image2k
XType: Package
XTitle: interface between pixmap and Imlib2 and/or MagickWand
XVersion: 0.1
XDate: 2014-06-24
XAuthor: Greg Minshall
XMaintainer: Greg Minshall <minshall at acm.org>
XDescription: image2k creates pixmaps from any image file that is
X  supported by the Imlib2 and/or MagickWand libraries (assuming one or
X  both of these libraries are available on your machine).  similarly,
X  given a pixmap, image2k can write that to an image file using either
X  Imlib2 and/or MagickWand.  (MagickWand is an optional library from
X  ImageMagick.)
XLicense: MIT + file LICENSE
XDepends: pixmap
END-of-DESCRIPTION
echo x - DESCRIPTION.in
sed 's/^X//' >DESCRIPTION.in << 'END-of-DESCRIPTION.in'
XPackage: image2k
XType: Package
XTitle: interface between pixmap and Imlib2 and/or MagickWand
XVersion: @VERSION@
XDate: 2014-06-24
XAuthor: Greg Minshall
XMaintainer: Greg Minshall <minshall at acm.org>
XDescription: image2k creates pixmaps from any image file that is
X  supported by the Imlib2 and/or MagickWand libraries (assuming one or
X  both of these libraries are available on your machine).  similarly,
X  given a pixmap, image2k can write that to an image file using either
X  Imlib2 and/or MagickWand.  (MagickWand is an optional library from
X  ImageMagick.)
XLicense: MIT + file LICENSE
XDepends: pixmap
END-of-DESCRIPTION.in
exit


From murdoch.duncan at gmail.com  Fri Jul  4 21:42:19 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 04 Jul 2014 15:42:19 -0400
Subject: [Rd] DESCRIPTION.in file causes R CMD check to fail?
In-Reply-To: <34738.1404502065@greg-minshalls-mbp.local>
References: <34738.1404502065@greg-minshalls-mbp.local>
Message-ID: <53B7039B.6060106@gmail.com>

On 04/07/2014 3:27 PM, Greg Minshall wrote:
> hi.  i'm building a package using autotools.  to propagate the package
> version number from configure.ac to DESCRIPTION, i'm using a
> DESCRIPTION.in file.  both of these files are "shar"'d below.
>
> i need to distribute the DESCRIPTION.in file, as ./configure will need
> it.  but, "R CMD check" wants to look at DESCRIPTION, so i've let that
> also come into the package tarball.

I don't understand why configure needs access to DESCRIPTION.in. What is 
it reading there?

The XML package has both DESCRIPTION and DESCRIPTION.in; it might be 
helpful for you to see what it does.

Duncan Murdoch
>
> however, when i run "R CMD check" with DESCRIPTION.in in the tree, it
> fails:
> ----
> bash greg-minshalls-mbp: {3359} R CMD check image2k_0.1.tar.gz
> * using log directory ?/Users/minshall/src/mine/image2k/buildit/image2k.Rcheck?
> * using R version 3.0.3 (2014-03-06)
> * using platform: x86_64-apple-darwin13.1.0 (64-bit)
> * using session charset: UTF-8
> Error in if (desc["Priority"] == "base") { :
>    missing value where TRUE/FALSE needed
> Execution halted
> ----
>
> (whereas if i remove DESCRIPTION.in and recreate the tar file,
> everything is good.)
>
> are there any thoughts on what might be the problem?
>
> cheers, Greg Minshall
> ----
> # This is a shell archive.  Save it in a file, remove anything before
> # this line, and then unpack it by entering "sh file".  Note, it may
> # create directories; files and directories will be owned by you and
> # have default permissions.
> #
> # This archive contains:
> #
> #       DESCRIPTION
> #       DESCRIPTION.in
> #
> echo x - DESCRIPTION
> sed 's/^X//' >DESCRIPTION << 'END-of-DESCRIPTION'
> XPackage: image2k
> XType: Package
> XTitle: interface between pixmap and Imlib2 and/or MagickWand
> XVersion: 0.1
> XDate: 2014-06-24
> XAuthor: Greg Minshall
> XMaintainer: Greg Minshall <minshall at acm.org>
> XDescription: image2k creates pixmaps from any image file that is
> X  supported by the Imlib2 and/or MagickWand libraries (assuming one or
> X  both of these libraries are available on your machine).  similarly,
> X  given a pixmap, image2k can write that to an image file using either
> X  Imlib2 and/or MagickWand.  (MagickWand is an optional library from
> X  ImageMagick.)
> XLicense: MIT + file LICENSE
> XDepends: pixmap
> END-of-DESCRIPTION
> echo x - DESCRIPTION.in
> sed 's/^X//' >DESCRIPTION.in << 'END-of-DESCRIPTION.in'
> XPackage: image2k
> XType: Package
> XTitle: interface between pixmap and Imlib2 and/or MagickWand
> XVersion: @VERSION@
> XDate: 2014-06-24
> XAuthor: Greg Minshall
> XMaintainer: Greg Minshall <minshall at acm.org>
> XDescription: image2k creates pixmaps from any image file that is
> X  supported by the Imlib2 and/or MagickWand libraries (assuming one or
> X  both of these libraries are available on your machine).  similarly,
> X  given a pixmap, image2k can write that to an image file using either
> X  Imlib2 and/or MagickWand.  (MagickWand is an optional library from
> X  ImageMagick.)
> XLicense: MIT + file LICENSE
> XDepends: pixmap
> END-of-DESCRIPTION.in
> exit
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From minshall at acm.org  Sat Jul  5 07:25:41 2014
From: minshall at acm.org (Greg Minshall)
Date: Sat, 05 Jul 2014 08:25:41 +0300
Subject: [Rd] DESCRIPTION.in file causes R CMD check to fail?
In-Reply-To: Your message of "Fri, 04 Jul 2014 15:42:19 -0400."
	<53B7039B.6060106@gmail.com>
Message-ID: <54337.1404537941@greg-minshalls-mbp.local>

hi, Duncan,

thanks for the reply, and the pointer to the XML package.

> I don't understand why configure needs access to DESCRIPTION.in. What
> is it reading there?

actually, ./configure is setting the version number in DESCRIPTION,
using DESCRIPTION.in as a template.  in configure.ac, i have:
----
AC_INIT([image2k],[0.1])
----
which says that i'm building the "image2k" package, with version 0.1.

my DESCRIPTION.in file has a line
----
Version: @VERSION@
----

back in configure.ac, i tell autoconf to do substitutions in
DESCRIPTION.in to create DESCRIPTION (among other files):
----
AC_CONFIG_FILES([
        DESCRIPTION
        Makefile
        src/Makefile
])
----

so, ./configure will copy DESCRIPTION.in to DESCRIPTION, but will
substitute its idea of the version.  (i'm always a big fan of second
normal form.)

i looked at XML's package.  thanks, i'm new to the autotools world, so
it's good to be able to look at other examples, especially when used
with R (at which i'm also not so proficient, ignorance squared).

it *looks* like my problem probably comes from some code in
----
./src/library/tools/R/check.R
----
from ./src/library/tools/R/check.R:
        ## Package sources from the R distribution are special.  They
        ## have a 'DESCRIPTION.in' file (instead of 'DESCRIPTION'),
        ## with Version and License fields containing '@VERSION@' for
        ## substitution by configure.  Earlier bundles had packages
        ## containing DESCRIPTIION.in, hence the extra check for
        ## Makefile.in.

        is_base_pkg <- is_rec_pkg <- FALSE
        if (file.exists(f <- file.path(pkgdir, "DESCRIPTION.in")) &&
            file.exists(file.path(pkgdir, "Makefile.in"))) {
            desc <- try(read.dcf(f))
            if (inherits(desc, "try-error") || !length(desc)) {
                resultLog(Log, "EXISTS but not correct format")
                do_exit(1L)
            }
            desc <- desc[1L, ]
            if (desc["Priority"] == "base") {
                messageLog(Log, "looks like ", sQuote(pkgname0),
                           " is a base package")
                messageLog(Log, "skipping installation test")
                is_base_pkg <- TRUE
                pkgname <- desc["Package"] # should be same as pkgname0
            }
        }
----
(i'm looking at R-3.1.0.)  XML doesn't run into this because although it
has a DESCRIPTION.in, it does *not* have Makefile.in, so the suspect
code isn't run.

it seems like maybe something like the below patch might fix my
problem.  (but, it also seems like adding a "Priority: other" should,
and indeed does, fix my problem.)

sorry if this was overly wordy.

cheers, Greg

----
--- orig-check.R        2014-03-29 01:15:03.000000000 +0200
+++ new-check.R 2014-07-05 08:22:01.000000000 +0300
@@ -4270,7 +4270,7 @@
                 do_exit(1L)
             }
             desc <- desc[1L, ]
-            if (desc["Priority"] == "base") {
+            if ((!is.na(desc["Priority"]) && desc["Priority"] == "base")) {
                 messageLog(Log, "looks like ", sQuote(pkgname0),
                            " is a base package")
                 messageLog(Log, "skipping installation test")
----


From murdoch.duncan at gmail.com  Sat Jul  5 13:45:55 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 05 Jul 2014 07:45:55 -0400
Subject: [Rd] DESCRIPTION.in file causes R CMD check to fail?
In-Reply-To: <54337.1404537941@greg-minshalls-mbp.local>
References: <54337.1404537941@greg-minshalls-mbp.local>
Message-ID: <53B7E573.9010308@gmail.com>

On 05/07/2014, 1:25 AM, Greg Minshall wrote:
> hi, Duncan,
> 
> thanks for the reply, and the pointer to the XML package.
> 
>> I don't understand why configure needs access to DESCRIPTION.in. What
>> is it reading there?
> 
> actually, ./configure is setting the version number in DESCRIPTION,
> using DESCRIPTION.in as a template.  in configure.ac, i have:
> ----

Okay, I misunderstood.

> AC_INIT([image2k],[0.1])
> ----
> which says that i'm building the "image2k" package, with version 0.1.
> 
> my DESCRIPTION.in file has a line
> ----
> Version: @VERSION@
> ----
> 
> back in configure.ac, i tell autoconf to do substitutions in
> DESCRIPTION.in to create DESCRIPTION (among other files):
> ----
> AC_CONFIG_FILES([
>         DESCRIPTION
>         Makefile
>         src/Makefile
> ])
> ----
> 
> so, ./configure will copy DESCRIPTION.in to DESCRIPTION, but will
> substitute its idea of the version.  (i'm always a big fan of second
> normal form.)
> 
> i looked at XML's package.  thanks, i'm new to the autotools world, so
> it's good to be able to look at other examples, especially when used
> with R (at which i'm also not so proficient, ignorance squared).
> 
> it *looks* like my problem probably comes from some code in
> ----
> ./src/library/tools/R/check.R
> ----
> from ./src/library/tools/R/check.R:
>         ## Package sources from the R distribution are special.  They
>         ## have a 'DESCRIPTION.in' file (instead of 'DESCRIPTION'),
>         ## with Version and License fields containing '@VERSION@' for
>         ## substitution by configure.  Earlier bundles had packages
>         ## containing DESCRIPTIION.in, hence the extra check for
>         ## Makefile.in.
> 
>         is_base_pkg <- is_rec_pkg <- FALSE
>         if (file.exists(f <- file.path(pkgdir, "DESCRIPTION.in")) &&
>             file.exists(file.path(pkgdir, "Makefile.in"))) {
>             desc <- try(read.dcf(f))
>             if (inherits(desc, "try-error") || !length(desc)) {
>                 resultLog(Log, "EXISTS but not correct format")
>                 do_exit(1L)
>             }
>             desc <- desc[1L, ]
>             if (desc["Priority"] == "base") {
>                 messageLog(Log, "looks like ", sQuote(pkgname0),
>                            " is a base package")
>                 messageLog(Log, "skipping installation test")
>                 is_base_pkg <- TRUE
>                 pkgname <- desc["Package"] # should be same as pkgname0
>             }
>         }
> ----
> (i'm looking at R-3.1.0.)  XML doesn't run into this because although it
> has a DESCRIPTION.in, it does *not* have Makefile.in, so the suspect
> code isn't run.
> 
> it seems like maybe something like the below patch might fix my
> problem.  (but, it also seems like adding a "Priority: other" should,
> and indeed does, fix my problem.)
> 
> sorry if this was overly wordy.
> 
> cheers, Greg
> 
> ----
> --- orig-check.R        2014-03-29 01:15:03.000000000 +0200
> +++ new-check.R 2014-07-05 08:22:01.000000000 +0300
> @@ -4270,7 +4270,7 @@
>                  do_exit(1L)
>              }
>              desc <- desc[1L, ]
> -            if (desc["Priority"] == "base") {
> +            if ((!is.na(desc["Priority"]) && desc["Priority"] == "base")) {
>                  messageLog(Log, "looks like ", sQuote(pkgname0),
>                             " is a base package")
>                  messageLog(Log, "skipping installation test")
> ----
> 

That looks like a good fix in any case.  I'll put it in.  (It's too late
to make it into 3.1.1, but I'll try to remember to backport it to
R-patched after the release.)

Duncan Murdoch

Duncan Murdoch


From minshall at acm.org  Sat Jul  5 19:00:06 2014
From: minshall at acm.org (Greg Minshall)
Date: Sat, 05 Jul 2014 20:00:06 +0300
Subject: [Rd] DESCRIPTION.in file causes R CMD check to fail?
In-Reply-To: Your message of "Sat, 05 Jul 2014 07:45:55 -0400."
	<53B7E573.9010308@gmail.com>
Message-ID: <92813.1404579606@greg-minshalls-mbp.local>

Duncan,

> That looks like a good fix in any case.  I'll put it in.  (It's too
> late to make it into 3.1.1, but I'll try to remember to backport it to
> R-patched after the release.)

great -- thanks!

cheers, Greg Minshall


From minshall at acm.org  Sun Jul  6 13:34:34 2014
From: minshall at acm.org (Greg Minshall)
Date: Sun, 06 Jul 2014 14:34:34 +0300
Subject: [Rd] request for "minor" fix to src/library/tools/QC.r
Message-ID: <41388.1404646474@greg-minshalls-mbp.local>

hi.  i was hoping to automatically set the Version: number in my package
description file (image2k-package.Rd) in the man directory by using a
.in file in the same directory.  "R CMD build" excludes the .in file
because the routine .check_package_subdirs() in QC.R (which build calls)
doesn't like that file.

.check_package_subdirs() also checks files in R/, and at *that* point in
the code says "now configure might generate files in this directory" and
explicitly allows any files that end in .in.  i wonder if that code
could be duplicated for the case of files in man/?  a diff to that
effect (just copying three lines from the immediately prior case for R/)
is provided below.

(as a check as to the viability of this, i manually added my
man/image2k-package.in file to the tarball built by build, and both
check and install seemed to survive without any problems.  a sample size
of 1 is *always* my favorite. :)

cheers, Greg Minshall
----
--- src/library/tools/R/QC.r	2014-03-25 01:15:06.000000000 +0200
+++ src/library/tools/R/mod-QC.r	2014-07-06 14:05:46.000000000 +0300
@@ -4372,6 +4372,9 @@
                                           full.names = FALSE,
                                           OS_subdirs = OS_subdirs)
         wrong <- setdiff(all_files, man_files)
+        ## now configure might generate files in this directory
+        generated <- grep("\\.in$", wrong)
+        if(length(generated)) wrong <- wrong[-generated]
         if(length(wrong)) {
             wrong_things$man <- wrong
             if(doDelete) unlink(file.path(dir, "man", wrong))


From ggrothendieck at gmail.com  Sun Jul  6 14:36:32 2014
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sun, 6 Jul 2014 08:36:32 -0400
Subject: [Rd] useDynLib
Message-ID: <CAP01uRnOBy1wj_MuG9RwkoTr7ewYX0EPGvvqbxODoZHnK-LEvQ@mail.gmail.com>

I would like to be able to load two versions of a package at once and
to do that was thinking of giving each version a different package
name in the DESCRIPTION file and the building and installing each such
version separately.

library(myPkg1)
library(myPkg2)

and then use myPkg1::myFun() and myPkg2::myFun().

To do that easily it would be convenient if one could change the
package name in only one place (the DESCRIPTION file) and have that
propagate to all other uses of the package name in the package.

Suppose the package were named "myPkg".  Then the problem areas are:

1. The NAMESPACE file has myPkg hard-coded like this:

useDynLib(myPkg, .registration=TRUE)

2. The configure.ac file has myPkg hard-coded like this:

AC_INIT([myPkg], 1.0.0)

3. There are various references to myPkg hard-code throughout the R
code, e.g. myPkg::myFun, but I am ok here as I assume this would work
where an .onLoad would be used to grab the package name from the
.onLoad's pkgname argument:
   `::`(pkgname, MyFun)
(Also some or all of these may not be needed in the first place.)

1. Is there some way to cause these instances to change when the
package name in the DESCRIPTION file changes or is there some other
approach that would make it easy to change the package name in just
one spot or some other way to load two packages that are versions of
each other at one time.  (The fact that the package has C++ code seems
to be the complicating factor.)

2. Are there any examples of CRAN packages that have been set up to
make this easy to do?

Thanks.

-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From sven.templer at gmail.com  Sun Jul  6 12:23:27 2014
From: sven.templer at gmail.com (Sven E. Templer)
Date: Sun, 6 Jul 2014 12:23:27 +0200
Subject: [Rd] Depot for S3 to S4 generics (as in stats4)?
Message-ID: <CAHuTOvr+S5cZ7VrymLgp3S-pLhBkUsHoPzifDWJs0NPMdVZk+Q@mail.gmail.com>

Dear developers,

the implementation of S4 generics for existing S3 ones in the base
package is concerned to be a threat to quick startup times [1]. But
since S4 is promoted, and S3/S4 interoperability a pain when package
developing [2], are there efforts to improve the situation? E.g. an S3
free system, etc.

A good thing [2] is the package 'stats4', including some setGeneric
calls (e.g. for summary, plot, ...) which I can 'importFrom' to a
NAMESPACE. Nevertheless, functions as as.matrix, as. dist, merge,
duplicated, and for sure some others, are not available as S4
generics.
So my question is: will the base/graphics/... S3 generic definitions
for S4 methods be completely implemented in a future R release?
(E.g. in base4/stats4,/graphics4/... (by heritage [3]) or combined by
a single package such as genericS4)

Sorry I couldn't get more information from the devel archive (or find
a solution/answer) since the same idea already has been mentioned in
2007 [4]. Thank you for clarifying in advance.

Sincerely,
Sven

[1] http://r.789695.n4.nabble.com/An-update-method-for-lists-td912749.html#a912756
[2] my opinion
[3] http://r.789695.n4.nabble.com/improved-error-message-when-existing-implicit-S4-generic-is-not-imported-td4421688.html#a4436278
[4] http://developer.r-project.org/BDR_S4issues.txt


From murdoch.duncan at gmail.com  Sun Jul  6 16:22:17 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 06 Jul 2014 10:22:17 -0400
Subject: [Rd] Depot for S3 to S4 generics (as in stats4)?
In-Reply-To: <CAHuTOvr+S5cZ7VrymLgp3S-pLhBkUsHoPzifDWJs0NPMdVZk+Q@mail.gmail.com>
References: <CAHuTOvr+S5cZ7VrymLgp3S-pLhBkUsHoPzifDWJs0NPMdVZk+Q@mail.gmail.com>
Message-ID: <53B95B99.9080006@gmail.com>

On 06/07/2014, 6:23 AM, Sven E. Templer wrote:
> Dear developers,
> 
> the implementation of S4 generics for existing S3 ones in the base
> package is concerned to be a threat to quick startup times [1]. But
> since S4 is promoted, and S3/S4 interoperability a pain when package
> developing [2], are there efforts to improve the situation? E.g. an S3
> free system, etc.
> 
> A good thing [2] is the package 'stats4', including some setGeneric
> calls (e.g. for summary, plot, ...) which I can 'importFrom' to a
> NAMESPACE. Nevertheless, functions as as.matrix, as. dist, merge,
> duplicated, and for sure some others, are not available as S4
> generics.
> So my question is: will the base/graphics/... S3 generic definitions
> for S4 methods be completely implemented in a future R release?
> (E.g. in base4/stats4,/graphics4/... (by heritage [3]) or combined by
> a single package such as genericS4)

I would not do that, and I haven't seen anyone else announcing plans to
do it, but the question is pretty open ended.  I'm reluctant to make
predictions about what R will look like in the indefinite future.  I
would be confident in guessing that R 3.2.x won't include it (but I
could be wrong, if someone takes it on).

If you want to make it happen sooner, you need to find an R Core member
to work with.  Presumably the responses to your posting will indicate
the level of interest in working on this.

Duncan Murdoch

> Sorry I couldn't get more information from the devel archive (or find
> a solution/answer) since the same idea already has been mentioned in
> 2007 [4]. Thank you for clarifying in advance.
> 
> Sincerely,
> Sven
> 
> [1] http://r.789695.n4.nabble.com/An-update-method-for-lists-td912749.html#a912756
> [2] my opinion
> [3] http://r.789695.n4.nabble.com/improved-error-message-when-existing-implicit-S4-generic-is-not-imported-td4421688.html#a4436278
> [4] http://developer.r-project.org/BDR_S4issues.txt
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From plummerm at iarc.fr  Mon Jul  7 14:14:45 2014
From: plummerm at iarc.fr (Martyn Plummer)
Date: Mon, 7 Jul 2014 12:14:45 +0000
Subject: [Rd] blas test problem
In-Reply-To: <53B68C49.7050402@yahoo.co.uk>
References: <53AD57A5.7020905@yahoo.co.uk>
	<B93CB00F-5B28-40D6-909D-8D69A35DFC7D@gmail.com>
	<53B68C49.7050402@yahoo.co.uk>
Message-ID: <1404735286.3142.27.camel@braque.iarc.fr>

I can reproduce this. It is a bug in reference BLAS.

With the R 3.1.0 release, Fedora changed from using the internal BLAS
that comes with R to using external BLAS. But reference BLAS does not
handle missing values correctly.  I expect this has been true since at
least 2010, when Brian patched the R copy of BLAS, but the bug has only
been revealed by the Fedora policy change.

I am taking this over to R-SIG-Fedora where we can discuss the issue
with Tom Callaway from Red Hat.

Martyn

On Fri, 2014-07-04 at 12:13 +0100, lejeczek wrote:
> later I tried plain-vanilla, well.. redhats' and derivatives 
> default packages and they all fail:
> 
>  > ## PR#4582 %*% with NAs
>  > stopifnot(is.na(NA %*% 0), is.na(0 %*% NA))
>  > ## depended on the BLAS in use.
>  >
>  >
>  > ## found from fallback test in slam 0.1-15
>  > ## most likely indicates an inaedquate BLAS.
>  > x <- matrix(c(1, 0, NA, 1), 2, 2)
>  > y <- matrix(c(1, 0, 0, 2, 1, 0), 3, 2)
>  > (z <- tcrossprod(x, y))
>       [,1] [,2] [,3]
> [1,]   NA   NA    0
> [2,]    2    1    0
>  > stopifnot(identical(z, x %*% t(y)))
> Error: identical(z, x %*% t(y)) is not TRUE
> Execution halted
> 
> 
> I've tried scientificLinux, Centos, Oracle
> all versions of R => 3.0 these linux distribution provide
> hardware are AMD various CPU based platform
> 
> 
> On 30/06/14 10:45, peter dalgaard wrote:
> > It is not clear what you mean:
> >
> > The quoted page lists particular AMD BLAS versions that fail R's regression test.
> >
> > Other builds of R would run the regression test during building and you can run them yourself if you get the source code (for good measure, use the current version, not one from a 2011 web posting, i.e., fetch say https://svn.r-project.org/R/branches/R-3-1-branch/tests/reg-BLAS.R).
> >
> > E.g., for me
> >
> > Peters-iMac:R pd$ ../BUILD/bin/R --vanilla < tests/reg-BLAS.R
> > ... normal output, no errors ...
> >
> > There is some risk that binary builds of R on one machine will fail on another. If this happens, it could be quite serious, so developers would want to know. However "most...seem to fail" is not enough to act upon. What exactly did you do, on which computing platform, and what happened that makes you believe that it had failed?
> >
> > -pd
> >
> > On 27 Jun 2014, at 13:38 , lejeczek <peljasz at yahoo.co.uk> wrote:
> >
> >> dear developers
> >>
> >> I myself am not a prog-devel, I found this
> >>
> >> http://devgurus.amd.com/message/1255852#1255852
> >>
> >> Most R compilations/installations I use seem to fail this test, is this a problem and if yes then how serious is it?
> >>
> >> regards
> >>
> >> ______________________________________________
> >> R-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-----------------------------------------------------------------------
This message and its attachments are strictly confidenti...{{dropped:8}}


From zhiyuan.dong at gmail.com  Mon Jul  7 22:34:59 2014
From: zhiyuan.dong at gmail.com (Zhiyuan Dong)
Date: Mon, 7 Jul 2014 16:34:59 -0400
Subject: [Rd] a question about optim.R and optim.c in R
Message-ID: <CAN8PBZVW1sd_RQ_qqz3dwbs8r5RwinnNyKm2iaN4O8w4fpGnKQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140707/4b31a1fb/attachment.pl>

From sarah.goslee at gmail.com  Mon Jul  7 23:20:54 2014
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Mon, 7 Jul 2014 17:20:54 -0400
Subject: [Rd] a question about optim.R and optim.c in R
In-Reply-To: <CAN8PBZVW1sd_RQ_qqz3dwbs8r5RwinnNyKm2iaN4O8w4fpGnKQ@mail.gmail.com>
References: <CAN8PBZVW1sd_RQ_qqz3dwbs8r5RwinnNyKm2iaN4O8w4fpGnKQ@mail.gmail.com>
Message-ID: <CAM_vju=JTeyPXq=mYNd2rV6Hk9Zk9qGYyQSiv5rCGqKfb-iHgQ@mail.gmail.com>

Hi,

On Mon, Jul 7, 2014 at 4:34 PM, Zhiyuan Dong <zhiyuan.dong at gmail.com> wrote:
> Hi, I am learning R by reading R source code.

That's very brave of you.

You might also try reading some of the documentation and contributed
documentation, like:
http://adv-r.had.co.nz/C-interface.html
and
http://cran.r-project.org/doc/manuals/r-devel/R-exts.html

Sarah


Here is one question I have
> about the optim function in R.
>
> The context : In the optim.R, after all the prep steps, the main function
> call call is made via :
>
> .External2(C_optim, par, fn1, gr1, method, con, lower, upper).
>
> So, it seems to me, to follow what is going on from here, that I should
> read the optim function in \src\library\stats\src\optim.c
>
> where it has this signature :
>
> SEXP optim(SEXP call, SEXP op, SEXP args, SEXP rho)
>
> I am not sure I follow here : In the .External2 call, we have 7 parameters
> :  par, fn1, gr1, method, con, lower, upper; This does not seem to match
> the signature of
>
> SEXP optim(SEXP call, SEXP op, SEXP args, SEXP rho)
>
> However, it seems (from the source code) that the 7 parameters are somehow
> embedded in the 'args' parameter. I am not sure what is going on...Am I
> missing something?
>
> Thanks much!!!
>
> Best,
>
> Zhiyuan
>

-- 
Sarah Goslee
http://www.functionaldiversity.org


From michael.weylandt at gmail.com  Mon Jul  7 23:36:04 2014
From: michael.weylandt at gmail.com (Michael Weylandt)
Date: Mon, 7 Jul 2014 17:36:04 -0400
Subject: [Rd] a question about optim.R and optim.c in R
In-Reply-To: <CAN8PBZVW1sd_RQ_qqz3dwbs8r5RwinnNyKm2iaN4O8w4fpGnKQ@mail.gmail.com>
References: <CAN8PBZVW1sd_RQ_qqz3dwbs8r5RwinnNyKm2iaN4O8w4fpGnKQ@mail.gmail.com>
Message-ID: <09175F12-DDAF-407D-A7BA-525754E4674C@gmail.com>



> On Jul 7, 2014, at 4:34 PM, Zhiyuan Dong <zhiyuan.dong at gmail.com> wrote:
> 
> Hi, I am learning R by reading R source code. Here is one question I have
> about the optim function in R.
> 
> The context : In the optim.R, after all the prep steps, the main function
> call call is made via :
> 
> .External2(C_optim, par, fn1, gr1, method, con, lower, upper).
> 
> So, it seems to me, to follow what is going on from here, that I should
> read the optim function in \src\library\stats\src\optim.c
> 
> where it has this signature :
> 
> SEXP optim(SEXP call, SEXP op, SEXP args, SEXP rho)
> 
> I am not sure I follow here : In the .External2 call, we have 7 parameters
> :  par, fn1, gr1, method, con, lower, upper; This does not seem to match
> the signature of
> 
> SEXP optim(SEXP call, SEXP op, SEXP args, SEXP rho)
> 
> However, it seems (from the source code) that the 7 parameters are somehow
> embedded in the 'args' parameter. I am not sure what is going on...Am I
> missing something?
> 

IIRC, args is a pairlist object. If the analogy helps, it's something like the OO pattern of sticking all your function parameters in an argument and passing that instead of passing them all as formals. One advantage of this is sane(er) handling of variadic functions at the C level. 

Michael


> Thanks much!!!
> 
> Best,
> 
> Zhiyuan
> 
>    [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From enrico.bibbona at gmail.com  Tue Jul  8 10:33:55 2014
From: enrico.bibbona at gmail.com (Enrico Bibbona)
Date: Tue, 8 Jul 2014 10:33:55 +0200
Subject: [Rd] using R functions in a C loop
Message-ID: <CAJrp0fESy67UWFw3-fiBC6ZRoi8x+00YEsgH+VA9Uc1ujOnjCA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140708/59e3fa25/attachment.pl>

From seanpor at acm.org  Tue Jul  8 12:56:08 2014
From: seanpor at acm.org (Sean O'Riordain)
Date: Tue, 8 Jul 2014 11:56:08 +0100
Subject: [Rd] using R functions in a C loop
In-Reply-To: <CAJrp0fESy67UWFw3-fiBC6ZRoi8x+00YEsgH+VA9Uc1ujOnjCA@mail.gmail.com>
References: <CAJrp0fESy67UWFw3-fiBC6ZRoi8x+00YEsgH+VA9Uc1ujOnjCA@mail.gmail.com>
Message-ID: <CA+MmmTLwuzCcHK0ZjEuntFjH7GUgHMZb37A9VP_5nguzuYobrA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140708/cc7ab3e1/attachment.pl>

From nashjc at uottawa.ca  Tue Jul  8 14:41:38 2014
From: nashjc at uottawa.ca (Prof J C Nash (U30A))
Date: Tue, 08 Jul 2014 08:41:38 -0400
Subject: [Rd]  a question about optim.R and optim.c in R
In-Reply-To: <mailman.31.1404813607.3164.r-devel@r-project.org>
References: <mailman.31.1404813607.3164.r-devel@r-project.org>
Message-ID: <53BBE702.6060704@uottawa.ca>

As you dig deeper you will find vmmin.c, cgmin.c and (I think) nmmin.c
etc. Those were, as I understand, converted by p2c from my Pascal codes
that you can find in the pascal library on netlib.org. These can be run
with the Free Pascal compiler.

Given how long ago these were developed (>30 years in all cases), they
are due for review. The packages Rvmmin and Rcgmin are all-R
replacements for the 1st two, and nmkb from dfoptim generally offers a
better version of the Nelder-Mead approach. All have bounds-constrained
variants, but for efficiency, there are direct calls of the
unconstrained methods, though I need to provide some nice examples of
when and how to call each. There is likely a place for some compiling of
sections to speed things up, but the R codes are not particularly sluggish.

Side comment: At UseR last week, Yihui Xie sat with me and we
implemented a Fortran language engine for knitr. It looks like a Pascal
one may also be possible, and maybe even a BASIC (though that may need
variants for different platforms). This would allow vignettes to
document some of the legacy code to be written, and that may be an
important matter as the expertise for such older tools moves into
retirement. Off-list communication about such ideas welcome.

John Nash


On 14-07-08 06:00 AM, r-devel-request at r-project.org wrote:
> Message: 2
> Date: Mon, 7 Jul 2014 16:34:59 -0400
> From: Zhiyuan Dong <zhiyuan.dong at gmail.com>
> To: r-devel at r-project.org
> Subject: [Rd] a question about optim.R and optim.c in R
> Message-ID:
> 	<CAN8PBZVW1sd_RQ_qqz3dwbs8r5RwinnNyKm2iaN4O8w4fpGnKQ at mail.gmail.com>
> Content-Type: text/plain
> 
> Hi, I am learning R by reading R source code. Here is one question I have
> about the optim function in R.
> 
> The context : In the optim.R, after all the prep steps, the main function
> call call is made via :
> 
> .External2(C_optim, par, fn1, gr1, method, con, lower, upper).
> 
> So, it seems to me, to follow what is going on from here, that I should
> read the optim function in \src\library\stats\src\optim.c
> 
> where it has this signature :
> 
> SEXP optim(SEXP call, SEXP op, SEXP args, SEXP rho)
> 
> I am not sure I follow here : In the .External2 call, we have 7 parameters
> :  par, fn1, gr1, method, con, lower, upper; This does not seem to match
> the signature of
> 
> SEXP optim(SEXP call, SEXP op, SEXP args, SEXP rho)
> 
> However, it seems (from the source code) that the 7 parameters are somehow
> embedded in the 'args' parameter. I am not sure what is going on...Am I
> missing something?
> 
> Thanks much!!!
> 
> Best,
> 
> Zhiyuan
> 
> 	[[alternative HTML version deleted]]


From edd at debian.org  Tue Jul  8 14:56:26 2014
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 8 Jul 2014 07:56:26 -0500
Subject: [Rd] [OT] Re:   a question about optim.R and optim.c in R
In-Reply-To: <53BBE702.6060704@uottawa.ca>
References: <mailman.31.1404813607.3164.r-devel@r-project.org>
	<53BBE702.6060704@uottawa.ca>
Message-ID: <21435.60026.472401.877604@max.nulle.part>


(flagged thread as OT as this is now orthogonal to the OP's question)

On 8 July 2014 at 08:41, Prof J C Nash (U30A) wrote:
| Side comment: At UseR last week, Yihui Xie sat with me and we
| implemented a Fortran language engine for knitr. It looks like a Pascal
| one may also be possible, and maybe even a BASIC (though that may need
| variants for different platforms).

I am not so sure. If you look at what Yihui actually did (ie: enable Fortran
support which R already had -- and you can actually _run_ the code) then you
may see that Pascal and (gasp) Basic have a different status _as they cannot
be used to extend R_.  So where are talking "just typesetting". So read on.

| This would allow vignettes to
| document some of the legacy code to be written, and that may be an
| important matter as the expertise for such older tools moves into
| retirement. Off-list communication about such ideas welcome.

As I mentioned to you at useR, knitr has had the ability to just call
highlight as an external 'engine' for a long time (and that may have been
added after I prodded Yihui when I needed to typeset some Matlab and/or
Python code).  

Below is the output from 'highlight -p' --- we do already have support for a
fairly large number of languages.  Pascal is among them, as are some old
enough to be of interest to you. Algol 68, maybe?  ;-)

Dirk


edd at max:~$ highlight -p

Installed language definitions (located in /usr/share/highlight/langDefs/):

ABAP/4                        : abap4 ( abp )
ABC                           : abc
Advanced Backus-Naur Form     : abnf
Action Script                 : actionscript ( as )
ADA95                         : ada ( a adb ads gnad )
Agda                          : agda
ALGOL 68                      : algol ( alg )
AMPL                          : ampl ( dat run )
AMTrix                        : amtrix ( hnd s4 s4h s4t t4 )
AppleScript                   : applescript
Arc                           : arc
ARM                           : arm
AS/400 CL                     : as400cl
ASCEND                        : ascend ( a4c )
ASP                           : asp ( asa )
Abstract                      : aspect ( was wud )
Assembler                     : assembler ( asm )
Applied Type System           : ats ( dats )
AutoHotKey                    : autohotkey ( ahk )
AutoIt                        : autoit ( au3 )
Avenue                        : avenue
(G)AWK                        : awk
DOS Batch                     : bat ( cmd )
BBcode                        : bbcode
BCPL                          : bcpl
BibTeX                        : bibtex ( bib )
Biferno                       : biferno ( bfr )
Bison                         : bison ( y )
Blitz Basic                   : blitzbasic ( bb )
BM Script                     : bms
Backus-Naur Form              : bnf
Boo                           : boo
C and C++                     : c ( c++ cc cpp cu cxx h hh hpp hxx )
Ceylon                        : ceylon
Charmm                        : charmm ( inp )
CHILL                         : chill ( chl )
Clean                         : clean ( icl )
ClearBasic                    : clearbasic ( cb )
Clipper                       : clipper
Clojure                       : clojure
Clips                         : clp
COBOL                         : cobol ( cbl cob )
ColdFusion MX                 : coldfusion ( cfc cfm )
C#                            : csharp ( cs )
CSS                           : css
D                             : d
Diff                          : diff ( patch )
Dylan                         : dylan
Extended Backus-Naur Form     : ebnf
Eiffel                        : eiffel ( e se )
Erlang                        : erlang ( erl hrl )
Euphoria                      : euphoria ( eu ew ex exw wxu )
Express                       : express ( exp )
FAME                          : fame ( fame )
Felix                         : felix ( flx )
Fortran 77                    : fortran77 ( f for ftn )
Fortran 90                    : fortran90 ( f90 f95 )
Frink                         : frink
F#                            : fsharp ( fs fsx )
Java FX                       : fx
Gambas                        : gambas ( class )
Go                            : go
Graphviz                      : graphviz ( dot )
Haskell                       : haskell ( hs )
haXe                          : haxe ( hx )
Hecl                          : hcl
HTML                          : html ( htm xhtml )
Apache Config                 : httpd
Icon                          : icon ( icn )
IDL                           : idl
Interactive Data Language     : idlang
Lua (for LuaTeX)              : inc_luatex
Informix                      : informix ( 4gl )
INI                           : ini
Inno Setup                    : innosetup ( iss )
INTERLIS                      : interlis ( ili )
IO                            : io
Jasmin                        : jasmin ( j )
Java                          : java ( groovy grv )
Javascript                    : js
JSP                           : jsp
LDAP                          : ldif
Haskell LHS                   : lhs
Lilypond                      : lilypond ( ly )
Limbo                         : limbo ( b )
Linden Script                 : lindenscript ( lsl )
Lisp                          : lisp ( cl clisp el lsp sbcl scom )
Logtalk                       : logtalk ( lgt )
Lotos                         : lotos
Lotus                         : lotus ( ls )
Lua                           : lua
Luban                         : luban ( lbn )
Make                          : make ( mak mk )
Maple                         : maple ( mpl )
Matlab                        : matlab ( m )
Maya                          : maya ( mel )
Mercury                       : mercury
Miranda                       : miranda
Modula2                       : mod2 ( def mod )
Modula3                       : mod3 ( i3 m3 )
Modelica                      : modelica ( mo )
MoonScript                    : moon
MaxScript                     : ms
MSSQL                         : mssql
Magic eXtensible Markup Language: mxml
Notation3 (N3), N-Triples, Turtle, SPARQL: n3 ( nt ttl )
Nasal                         : nasal ( nas )
NeXT Byte Codes               : nbc
Nemerle                       : nemerle ( n )
NetRexx                       : netrexx ( nrx )
Nice                          : nice
NSIS                          : nsis ( nsi )
Not eXactly C                 : nxc
Oberon                        : oberon ( ooc )
Objective C                   : objc
Objective Caml                : ocaml ( ml mli )
Octave                        : octave
Open Object Rexx              : oorexx
Object Script                 : os
Oz                            : oz
Paradox                       : paradox ( sc )
Pascal                        : pas
Perl                          : perl ( cgi perl pl plex plx pm )
PHP                           : php ( php3 php4 php5 php6 )
Pike                          : pike ( pmod )
PL/1                          : pl1 ( bdy ff fp fpp rpp sf sp spb spe spp sps wf wp wpb wpp wps )
PL/Perl                       : plperl
PL/Python                     : plpython
PL/Tcl                        : pltcl
POV-Ray                       : pov
Prolog                        : pro
Progress                      : progress ( i p w )
PostScript                    : ps
Microsoft PowerShell          : ps1
PATROL                        : psl
Pure                          : pure
Pyrex                         : pyrex ( pyx )
Python                        : python ( py )
Qore                          : q
QMake Project                 : qmake
Qu                            : qu
R                             : r
Rebol                         : rebol
Rexx                          : rexx ( rex rx the )
Relax NG                      : rnc
RPG                           : rpg
RPL Programming Language      : rpl
Ruby                          : ruby ( pp rb rjs ruby )
PowerPC Assembler             : s
SAS                           : sas
Scala                         : scala
Scilab                        : scilab ( sce sci )
Bash                          : sh ( bash ebuild eclass )
SMALL                         : small ( sma )
Smalltalk                     : smalltalk ( gst sq st )
Standard ML                   : sml
SNMP                          : snmp ( mib smi )
SNOBOL                        : snobol ( sno )
RPM Spec                      : spec
SPIN SQL                      : spn
PL/SQL                        : sql
Squirrel                      : squirrel ( nut )
Sybase SQL                    : sybase
Tcl/Tk                        : tcl ( itcl wish )
TCSH                          : tcsh
Regex tests                   : test_re
TeX and LaTeX                 : tex ( cls sty )
Transact-SQL                  : tsql
TTCN3                         : ttcn3
Plain text                    : txt ( text )
UPC (and C, technically)      : upc
Vala                          : vala
Visual Basic                  : vb ( bas basic bi vbs )
Verilog                       : verilog ( v )
VHDL                          : vhd
XML                           : xml ( dtd ecf ent hdr hub jnlp nrm resx sgm sgml svg tld vxml wml xsd xsl )
SuperX++                      : xpp
Yaiff                         : yaiff
Zonnon                        : znn

Use name of the desired language with the --syntax option.

edd at max:~$ 

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From minshall at acm.org  Tue Jul  8 16:05:03 2014
From: minshall at acm.org (Greg Minshall)
Date: Tue, 08 Jul 2014 17:05:03 +0300
Subject: [Rd] arguments to .Call(), .External should be read-only?
Message-ID: <82683.1404828303@greg-minshalls-mbp.local>

hi.  if i'm reading correctly, "Writing R Extensions" appears to be
inconsistent on the question of whether the arguments passed to a
routine called via .Call() or .External() should considered read-only.
section 5.2, "Interface functions .C and .Fortran", says
----
However, when character vectors are used other than in a read-only way,
the .Call interface is much to be preferred.
----

which sort of implies (if one reads optimistically) that using .Call()
(by extension, again optimistically, .External()) one could treat
*character* vectors (and, again, optimistically, numeric, etc., vectors)
in a non-read-only way.

on the other (pessimistic) hand, section 5.9, "Handling R objects in C",
says
----
Neither .Call nor .External copy their arguments: you should treat
arguments you receive through these interfaces as read-only.
----

for an application, i'd like to consider these writable.  assuming
sufficient warnings in the documentation, etc., is that permissable?

cheers, Greg Minshall


From murdoch.duncan at gmail.com  Tue Jul  8 16:21:26 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 08 Jul 2014 10:21:26 -0400
Subject: [Rd] arguments to .Call(), .External should be read-only?
In-Reply-To: <82683.1404828303@greg-minshalls-mbp.local>
References: <82683.1404828303@greg-minshalls-mbp.local>
Message-ID: <53BBFE66.8030308@gmail.com>

On 08/07/2014 10:05 AM, Greg Minshall wrote:
> hi.  if i'm reading correctly, "Writing R Extensions" appears to be
> inconsistent on the question of whether the arguments passed to a
> routine called via .Call() or .External() should considered read-only.
> section 5.2, "Interface functions .C and .Fortran", says
> ----
> However, when character vectors are used other than in a read-only way,
> the .Call interface is much to be preferred.
> ----
>
> which sort of implies (if one reads optimistically) that using .Call()
> (by extension, again optimistically, .External()) one could treat
> *character* vectors (and, again, optimistically, numeric, etc., vectors)
> in a non-read-only way.
>
> on the other (pessimistic) hand, section 5.9, "Handling R objects in C",
> says
> ----
> Neither .Call nor .External copy their arguments: you should treat
> arguments you receive through these interfaces as read-only.
> ----
>
> for an application, i'd like to consider these writable.  assuming
> sufficient warnings in the documentation, etc., is that permissable?

R doesn't necessarily copy variables on assignment, so code like this:

x <- y <- rnorm(10)

will create *one* vector of length 10, with both x and y referring to 
it.  If your code modifies x the changes will show up in y as well.  
That's the reason for the warning.

See section 5.9.10 for how to handle this safely, but pay attention to 
the last sentence of that section:  any code you write which does this 
is likely to require changes as R's memory management evolves. In 
particular, all of that section is likely to be wrong next spring when R 
3.2.0 is released, as there are changes in the works to implement better 
reference counting.  See <http://developer.r-project.org/Refcnt.html> 
for a discussion.

Duncan Murdoch


From edd at debian.org  Tue Jul  8 17:18:54 2014
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 8 Jul 2014 10:18:54 -0500
Subject: [Rd] arguments to .Call(), .External should be read-only?
In-Reply-To: <53BBFE66.8030308@gmail.com>
References: <82683.1404828303@greg-minshalls-mbp.local>
	<53BBFE66.8030308@gmail.com>
Message-ID: <21436.3038.755092.674110@max.nulle.part>


It's one of my favourite Rcpp puzzles:

R> cppFunction('bool foo(NumericVector x) { x = 2 * x; return(true); }')
R> x <- 1:4                     # note that x is now an int vector
R> foo(x)                       # so this casts to numeric --> copy 
[1] TRUE
R> x
[1] 1 2 3 4                     # still the same
R> x <- 1:4 * 1.0               # BUT now we create a numeric vector
R> foo(x)
[1] TRUE
R> x                            # and that one DOES get modified
[1] 2 4 6 8
R> 

Morale: The P in SEXP means that you get to change the external object.  So
as Duncan and the WRE manual say: proceed with some caution.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From lawrence.michael at gene.com  Wed Jul  9 14:30:59 2014
From: lawrence.michael at gene.com (Michael Lawrence)
Date: Wed, 9 Jul 2014 05:30:59 -0700
Subject: [Rd] Depot for S3 to S4 generics (as in stats4)?
In-Reply-To: <CAHuTOvr+S5cZ7VrymLgp3S-pLhBkUsHoPzifDWJs0NPMdVZk+Q@mail.gmail.com>
References: <CAHuTOvr+S5cZ7VrymLgp3S-pLhBkUsHoPzifDWJs0NPMdVZk+Q@mail.gmail.com>
Message-ID: <CAOQ5NyfmfUeb3F-UcvX5HFyEh7oFbL4o8MF==551Rr3J3FsSLQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140709/3965f4cf/attachment.pl>

From peljasz at yahoo.co.uk  Wed Jul  9 18:17:59 2014
From: peljasz at yahoo.co.uk (lejeczek)
Date: Wed, 09 Jul 2014 17:17:59 +0100
Subject: [Rd] blas test problem
In-Reply-To: <1404735286.3142.27.camel@braque.iarc.fr>
References: <53AD57A5.7020905@yahoo.co.uk>	
	<B93CB00F-5B28-40D6-909D-8D69A35DFC7D@gmail.com>	
	<53B68C49.7050402@yahoo.co.uk>
	<1404735286.3142.27.camel@braque.iarc.fr>
Message-ID: <53BD6B37.2010700@yahoo.co.uk>

I wonder if anyone amongst developers had a chance to try ACML.
AMD's implementation when R is supposed to use it seems to 
fail the test similarly,

on a side note, I had R build with ACML and performance-wise 
it looked really really promising,
however now 
http://r.research.att.com/benchmarks/R-benchmark-25.R
gets me far! worse results, it sort of chokes up on FFT 
part, takes much longer than "regular" R, takes ages.
I see all: ./lib64/R/lib/libR.so ./lib64/R/lib/libRblas.so 
./lib64/R/lib/libRlapack.so depend on libacml_mp.so
I've tried few different ACML versions, I wonder could it be 
R => 3.0 itself?
and thoughts on why it is so under performing?


On 07/07/14 13:14, Martyn Plummer wrote:
> I can reproduce this. It is a bug in reference BLAS.
>
> With the R 3.1.0 release, Fedora changed from using the internal BLAS
> that comes with R to using external BLAS. But reference BLAS does not
> handle missing values correctly.  I expect this has been true since at
> least 2010, when Brian patched the R copy of BLAS, but the bug has only
> been revealed by the Fedora policy change.
>
> I am taking this over to R-SIG-Fedora where we can discuss the issue
> with Tom Callaway from Red Hat.
>
> Martyn
>
> On Fri, 2014-07-04 at 12:13 +0100, lejeczek wrote:
>> later I tried plain-vanilla, well.. redhats' and derivatives
>> default packages and they all fail:
>>
>>   > ## PR#4582 %*% with NAs
>>   > stopifnot(is.na(NA %*% 0), is.na(0 %*% NA))
>>   > ## depended on the BLAS in use.
>>   >
>>   >
>>   > ## found from fallback test in slam 0.1-15
>>   > ## most likely indicates an inaedquate BLAS.
>>   > x <- matrix(c(1, 0, NA, 1), 2, 2)
>>   > y <- matrix(c(1, 0, 0, 2, 1, 0), 3, 2)
>>   > (z <- tcrossprod(x, y))
>>        [,1] [,2] [,3]
>> [1,]   NA   NA    0
>> [2,]    2    1    0
>>   > stopifnot(identical(z, x %*% t(y)))
>> Error: identical(z, x %*% t(y)) is not TRUE
>> Execution halted
>>
>>
>> I've tried scientificLinux, Centos, Oracle
>> all versions of R => 3.0 these linux distribution provide
>> hardware are AMD various CPU based platform
>>
>>
>> On 30/06/14 10:45, peter dalgaard wrote:
>>> It is not clear what you mean:
>>>
>>> The quoted page lists particular AMD BLAS versions that fail R's regression test.
>>>
>>> Other builds of R would run the regression test during building and you can run them yourself if you get the source code (for good measure, use the current version, not one from a 2011 web posting, i.e., fetch say https://svn.r-project.org/R/branches/R-3-1-branch/tests/reg-BLAS.R).
>>>
>>> E.g., for me
>>>
>>> Peters-iMac:R pd$ ../BUILD/bin/R --vanilla < tests/reg-BLAS.R
>>> ... normal output, no errors ...
>>>
>>> There is some risk that binary builds of R on one machine will fail on another. If this happens, it could be quite serious, so developers would want to know. However "most...seem to fail" is not enough to act upon. What exactly did you do, on which computing platform, and what happened that makes you believe that it had failed?
>>>
>>> -pd
>>>
>>> On 27 Jun 2014, at 13:38 , lejeczek <peljasz at yahoo.co.uk> wrote:
>>>
>>>> dear developers
>>>>
>>>> I myself am not a prog-devel, I found this
>>>>
>>>> http://devgurus.amd.com/message/1255852#1255852
>>>>
>>>> Most R compilations/installations I use seem to fail this test, is this a problem and if yes then how serious is it?
>>>>
>>>> regards
>>>>
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
> -----------------------------------------------------------------------
> This message and its attachments are strictly confiden...{{dropped:9}}


From radford at cs.toronto.edu  Wed Jul  9 21:31:52 2014
From: radford at cs.toronto.edu (Radford Neal)
Date: Wed, 9 Jul 2014 15:31:52 -0400
Subject: [Rd] arguments to .Call(), .External should be read-only?
In-Reply-To: <mailman.25.1404900008.27769.r-devel@r-project.org>
References: <mailman.25.1404900008.27769.r-devel@r-project.org>
Message-ID: <20140709193152.GA23265@cs.toronto.edu>

> hi.  if i'm reading correctly, "Writing R Extensions" appears to be
> inconsistent on the question of whether the arguments passed to a
> routine called via .Call() or .External() should considered read-only.

There are two situations to consider.  

1) You want to modify the arguments as a convenience in your
   computation, but in the end you will return information to the
   caller via the value returned from .Call.

2) You want to modify the arguments as a way of returning information
   to the caller.  For instance:

      x <- numeric(100)  # x contains zeros
      .Call("myfunction",x)
      # use new values now present in x

For (1), if you want to modify a argument x, you just need to first
check whether NAMED(x) is non-zero.  If it is, you need to execute
x=duplicate(x) (and probably PROTECT the result) before changing x.
You can return x (the original or the duplicate) as the result of the
.Call if you like, or just use it as an intermediate value in the
computation.

For (2), you need to be sure that the value passed to .Call is
unshared.  (Checking NAMED(x) and duplicating if it is non-zero won't
work, since then the caller doesn't get to see the information put in
the duplicate of x.)  Unfortunately, there is no documentation on when
objects are guaranteed to be unshared.  

The technique of (2) is used sometimes in standard R packages.  For
example, the "arima" function in the "stats" package calls ARIMA_Like
and modifies its arguments as a way of returning information.  It's
presumably also used in many contributed packages.

Since it's probably too much to eliminate all uses of (2), I think
documentation on when an object is guaranteed to be unshared is
needed.  I propose that the following be guaranteed to produce an
unshared object:

  1) The vector creation functions: vector, numeric, integer, logical,
     complex, raw, and character.

  2) The array creation functions: array and matrix.

  3) The rep and rep.int functions, which are sometimes used in place of
     a vector creation function - eg, rep(0,10) rather than numeric(10).

I think it should be assumed that any other function might return an
unshared result (eg, 1-1 might return a shared zero object). Of
course, the results from the above functions might become shared
later, too (if assigned to more than one variable, for instance), but
code like that above for .Call("myfunction",x) would be guaranteed to
work.

   Radford Neal


From skostysh at princeton.edu  Thu Jul 10 01:26:59 2014
From: skostysh at princeton.edu (Scott Kostyshak)
Date: Wed, 9 Jul 2014 19:26:59 -0400
Subject: [Rd] [patch] Rscript off-by-one error in output
Message-ID: <CAE3=dmcnUbQeUmM5b7s_1Aj8H6BcQPkLam=6-nRsVAEkSwnx=w@mail.gmail.com>

Rscript eats up the last argument when reporting the command it runs:

$ Rscript --verbose "/tmp/test.R" one two three
running
  '/usr/local/lib/R-devel/lib/R/bin/R --slave --no-restore
--file=/tmp/test.R --args one two'

With the patch below, I get the following:

$ Rscript --verbose "/tmp/test.R" one two three
running
  '/usr/local/lib/R-devel/lib/R/bin/R --slave --no-restore
--file=/tmp/test.R --args one two three'


Index: src/unix/Rscript.c
===================================================================
--- src/unix/Rscript.c  (revision 66100)
+++ src/unix/Rscript.c  (working copy)
@@ -249,7 +249,7 @@
 #endif
     if(verbose) {
  fprintf(stderr, "running\n  '%s", cmd);
- for(i = 1; i < ac-1; i++) fprintf(stderr, " %s", av[i]);
+ for(i = 1; i < ac; i++) fprintf(stderr, " %s", av[i]);
  fprintf(stderr, "'\n\n");
     }
 #ifndef _WIN32


Scott


> sessionInfo()
R Under development (unstable) (2014-07-08 r66100)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base


--
Scott Kostyshak
Economics PhD Candidate
Princeton University


From ripley at stats.ox.ac.uk  Thu Jul 10 07:45:29 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 10 Jul 2014 06:45:29 +0100
Subject: [Rd] blas test problem
In-Reply-To: <53BD6B37.2010700@yahoo.co.uk>
References: <53AD57A5.7020905@yahoo.co.uk>		<B93CB00F-5B28-40D6-909D-8D69A35DFC7D@gmail.com>		<53B68C49.7050402@yahoo.co.uk>	<1404735286.3142.27.camel@braque.iarc.fr>
	<53BD6B37.2010700@yahoo.co.uk>
Message-ID: <53BE2879.3060104@stats.ox.ac.uk>

On 09/07/2014 17:17, lejeczek wrote:
> I wonder if anyone amongst developers had a chance to try ACML.

Yes, and documented its use in the R manual over many years.

> AMD's implementation when R is supposed to use it seems to fail the test
> similarly,

Please do read the manual for yourself (see the posting guide): 
http://cran.r-project.org/doc/manuals/r-patched/R-admin.html#ACML .

>
> on a side note, I had R build with ACML and performance-wise it looked
> really really promising,

Compared to what and on what CPU?

I have found ACML disappointing compared to MKL or even ATLAS on the 
CPUs I use (which are Intel, but then most people's are).

> however now http://r.research.att.com/benchmarks/R-benchmark-25.R
> gets me far! worse results, it sort of chokes up on FFT part, takes much
> longer than "regular" R, takes ages.
> I see all: ./lib64/R/lib/libR.so ./lib64/R/lib/libRblas.so
> ./lib64/R/lib/libRlapack.so depend on libacml_mp.so
> I've tried few different ACML versions, I wonder could it be R => 3.0
> itself?
> and thoughts on why it is so under performing?
>
>
> On 07/07/14 13:14, Martyn Plummer wrote:
>> I can reproduce this. It is a bug in reference BLAS.
>>
>> With the R 3.1.0 release, Fedora changed from using the internal BLAS
>> that comes with R to using external BLAS. But reference BLAS does not
>> handle missing values correctly.  I expect this has been true since at
>> least 2010, when Brian patched the R copy of BLAS, but the bug has only
>> been revealed by the Fedora policy change.
>>
>> I am taking this over to R-SIG-Fedora where we can discuss the issue
>> with Tom Callaway from Red Hat.
>>
>> Martyn
>>
>> On Fri, 2014-07-04 at 12:13 +0100, lejeczek wrote:
>>> later I tried plain-vanilla, well.. redhats' and derivatives
>>> default packages and they all fail:
>>>
>>>   > ## PR#4582 %*% with NAs
>>>   > stopifnot(is.na(NA %*% 0), is.na(0 %*% NA))
>>>   > ## depended on the BLAS in use.
>>>   >
>>>   >
>>>   > ## found from fallback test in slam 0.1-15
>>>   > ## most likely indicates an inaedquate BLAS.
>>>   > x <- matrix(c(1, 0, NA, 1), 2, 2)
>>>   > y <- matrix(c(1, 0, 0, 2, 1, 0), 3, 2)
>>>   > (z <- tcrossprod(x, y))
>>>        [,1] [,2] [,3]
>>> [1,]   NA   NA    0
>>> [2,]    2    1    0
>>>   > stopifnot(identical(z, x %*% t(y)))
>>> Error: identical(z, x %*% t(y)) is not TRUE
>>> Execution halted
>>>
>>>
>>> I've tried scientificLinux, Centos, Oracle
>>> all versions of R => 3.0 these linux distribution provide
>>> hardware are AMD various CPU based platform
>>>
>>>
>>> On 30/06/14 10:45, peter dalgaard wrote:
>>>> It is not clear what you mean:
>>>>
>>>> The quoted page lists particular AMD BLAS versions that fail R's
>>>> regression test.
>>>>
>>>> Other builds of R would run the regression test during building and
>>>> you can run them yourself if you get the source code (for good
>>>> measure, use the current version, not one from a 2011 web posting,
>>>> i.e., fetch say
>>>> https://svn.r-project.org/R/branches/R-3-1-branch/tests/reg-BLAS.R).
>>>>
>>>> E.g., for me
>>>>
>>>> Peters-iMac:R pd$ ../BUILD/bin/R --vanilla < tests/reg-BLAS.R
>>>> ... normal output, no errors ...
>>>>
>>>> There is some risk that binary builds of R on one machine will fail
>>>> on another. If this happens, it could be quite serious, so
>>>> developers would want to know. However "most...seem to fail" is not
>>>> enough to act upon. What exactly did you do, on which computing
>>>> platform, and what happened that makes you believe that it had failed?
>>>>
>>>> -pd
>>>>
>>>> On 27 Jun 2014, at 13:38 , lejeczek <peljasz at yahoo.co.uk> wrote:
>>>>
>>>>> dear developers
>>>>>
>>>>> I myself am not a prog-devel, I found this
>>>>>
>>>>> http://devgurus.amd.com/message/1255852#1255852
>>>>>
>>>>> Most R compilations/installations I use seem to fail this test, is
>>>>> this a problem and if yes then how serious is it?
>>>>>
>>>>> regards
>>>>>
>>>>> ______________________________________________
>>>>> R-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>> -----------------------------------------------------------------------
>> This message and its attachments are strictly confiden...{{dropped:9}}
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From dusa.adrian at unibuc.ro  Thu Jul 10 23:46:51 2014
From: dusa.adrian at unibuc.ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Fri, 11 Jul 2014 00:46:51 +0300
Subject: [Rd] reserving a package name
Message-ID: <CAJ=0CtDqEVmnMJOTw9Q=H67cKVhYU8LVBMire1D3Bu_n+DoHbg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140711/cfac9c6a/attachment.pl>

From ligges at statistik.tu-dortmund.de  Fri Jul 11 00:59:24 2014
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Fri, 11 Jul 2014 00:59:24 +0200
Subject: [Rd] reserving a package name
In-Reply-To: <CAJ=0CtDqEVmnMJOTw9Q=H67cKVhYU8LVBMire1D3Bu_n+DoHbg@mail.gmail.com>
References: <CAJ=0CtDqEVmnMJOTw9Q=H67cKVhYU8LVBMire1D3Bu_n+DoHbg@mail.gmail.com>
Message-ID: <53BF1ACC.4060409@statistik.tu-dortmund.de>



On 10.07.2014 23:46, Adrian Du?a wrote:
> Dear All,
>
> While wanting to create a package using the name DDI (which stands for Data
> Documentation Initiative), I sent an email to the DDI Alliance and ask if
> they would mind, knowing they are now in the process of copyrighting this
> brand.
>
> The answer I got was negative (due to possible infringements on copyright
> issues), but they thanked me for raising this matter and now asking if a
> package name can actually be reserved.
>
> As far as I know, it works on a first come, first served basis, but I
> think it is still worth asking.
> Since this is not an r-help issue, I have used this list instead.


Well, you cannot reserve a package name. Actually you can choose any 
legal name.

The story is different if you want to submit it to BioConductor or CRAN, 
then the name must be unique in the BioC + CRAN world. More details in 
the CRAN policies, for example.
And yes, it works on n a first come, first served basis there.

Best,
Uwe Ligges


> Thanks in advance for any answer,
> Adrian
>
>


From peljasz at yahoo.co.uk  Fri Jul 11 10:08:26 2014
From: peljasz at yahoo.co.uk (lejeczek)
Date: Fri, 11 Jul 2014 09:08:26 +0100
Subject: [Rd] blas test problem
In-Reply-To: <53BE2879.3060104@stats.ox.ac.uk>
References: <53AD57A5.7020905@yahoo.co.uk>		<B93CB00F-5B28-40D6-909D-8D69A35DFC7D@gmail.com>		<53B68C49.7050402@yahoo.co.uk>	<1404735286.3142.27.camel@braque.iarc.fr>
	<53BD6B37.2010700@yahoo.co.uk> <53BE2879.3060104@stats.ox.ac.uk>
Message-ID: <53BF9B7A.5000300@yahoo.co.uk>


On 10/07/14 06:45, Prof Brian Ripley wrote:
> On 09/07/2014 17:17, lejeczek wrote:
>> I wonder if anyone amongst developers had a chance to try 
>> ACML.
>
> Yes, and documented its use in the R manual over many years.
>
>> AMD's implementation when R is supposed to use it seems 
>> to fail the test
>> similarly,
>
> Please do read the manual for yourself (see the posting 
> guide): 
> http://cran.r-project.org/doc/manuals/r-patched/R-admin.html#ACML 
> .
>
>>
>> on a side note, I had R build with ACML and 
>> performance-wise it looked
>> really really promising,
>
> Compared to what and on what CPU?
compared to "other" Rs on the same hardware platform(s) (AMD 
in each case)
a lot faster than "regular vanilla default" R that comes 
with all RHEL and derivatives
if Revo's R would be the one to match (it uses MKL and I 
imagine complied with Intel) then R+ACML is almost as fast, ~85%
Only fact spoils the satisfaction is that here with R ACML 
on AMD hardware is slower, even if only a bit than MKL, one 
would think AMD on AMD should be faster, but! at the same 
time bare in mind compiler whole tool chain and various 
optimisations - which turns out to be immensely important 
and I'm sure I have not gotten completely correct - I find 
that GNU compiler version 4.8.2 plus relevant toolchain that 
come with RHEL 7.0 sort of cripples R compilation with ACML 
(5.3.1, and 6.0 too) whereas gcc 4.7.2 (not available by 
default) on RHELs 6.5 gets me that ~85% of Revo's speed

there are other things (important too) to consider, TCO 
seems much better with ACML - I don't need to pay almost 1K 
Euros for Intel's libs (maybe + compiler suite costs) and 
naturally a lot more expensive Intel's CPUs, so I'm thinking 
if I can get it all working 100% only at %85 performance of 
MKL I would even go for AMD instead of Intel deliberately.


>
> I have found ACML disappointing compared to MKL or even 
> ATLAS on the CPUs I use (which are Intel, but then most 
> people's are).
>
>> however now 
>> http://r.research.att.com/benchmarks/R-benchmark-25.R
>> gets me far! worse results, it sort of chokes up on FFT 
>> part, takes much
>> longer than "regular" R, takes ages.
>> I see all: ./lib64/R/lib/libR.so ./lib64/R/lib/libRblas.so
>> ./lib64/R/lib/libRlapack.so depend on libacml_mp.so
>> I've tried few different ACML versions, I wonder could it 
>> be R => 3.0
>> itself?
>> and thoughts on why it is so under performing?
>>
>>
>> On 07/07/14 13:14, Martyn Plummer wrote:
>>> I can reproduce this. It is a bug in reference BLAS.
>>>
>>> With the R 3.1.0 release, Fedora changed from using the 
>>> internal BLAS
>>> that comes with R to using external BLAS. But reference 
>>> BLAS does not
>>> handle missing values correctly.  I expect this has been 
>>> true since at
>>> least 2010, when Brian patched the R copy of BLAS, but 
>>> the bug has only
>>> been revealed by the Fedora policy change.
>>>
>>> I am taking this over to R-SIG-Fedora where we can 
>>> discuss the issue
>>> with Tom Callaway from Red Hat.
>>>
>>> Martyn
>>>
>>> On Fri, 2014-07-04 at 12:13 +0100, lejeczek wrote:
>>>> later I tried plain-vanilla, well.. redhats' and 
>>>> derivatives
>>>> default packages and they all fail:
>>>>
>>>>   > ## PR#4582 %*% with NAs
>>>>   > stopifnot(is.na(NA %*% 0), is.na(0 %*% NA))
>>>>   > ## depended on the BLAS in use.
>>>>   >
>>>>   >
>>>>   > ## found from fallback test in slam 0.1-15
>>>>   > ## most likely indicates an inaedquate BLAS.
>>>>   > x <- matrix(c(1, 0, NA, 1), 2, 2)
>>>>   > y <- matrix(c(1, 0, 0, 2, 1, 0), 3, 2)
>>>>   > (z <- tcrossprod(x, y))
>>>>        [,1] [,2] [,3]
>>>> [1,]   NA   NA    0
>>>> [2,]    2    1    0
>>>>   > stopifnot(identical(z, x %*% t(y)))
>>>> Error: identical(z, x %*% t(y)) is not TRUE
>>>> Execution halted
>>>>
>>>>
>>>> I've tried scientificLinux, Centos, Oracle
>>>> all versions of R => 3.0 these linux distribution provide
>>>> hardware are AMD various CPU based platform
>>>>
>>>>
>>>> On 30/06/14 10:45, peter dalgaard wrote:
>>>>> It is not clear what you mean:
>>>>>
>>>>> The quoted page lists particular AMD BLAS versions 
>>>>> that fail R's
>>>>> regression test.
>>>>>
>>>>> Other builds of R would run the regression test during 
>>>>> building and
>>>>> you can run them yourself if you get the source code 
>>>>> (for good
>>>>> measure, use the current version, not one from a 2011 
>>>>> web posting,
>>>>> i.e., fetch say
>>>>> https://svn.r-project.org/R/branches/R-3-1-branch/tests/reg-BLAS.R). 
>>>>>
>>>>>
>>>>> E.g., for me
>>>>>
>>>>> Peters-iMac:R pd$ ../BUILD/bin/R --vanilla < 
>>>>> tests/reg-BLAS.R
>>>>> ... normal output, no errors ...
>>>>>
>>>>> There is some risk that binary builds of R on one 
>>>>> machine will fail
>>>>> on another. If this happens, it could be quite 
>>>>> serious, so
>>>>> developers would want to know. However "most...seem to 
>>>>> fail" is not
>>>>> enough to act upon. What exactly did you do, on which 
>>>>> computing
>>>>> platform, and what happened that makes you believe 
>>>>> that it had failed?
>>>>>
>>>>> -pd
>>>>>
>>>>> On 27 Jun 2014, at 13:38 , lejeczek 
>>>>> <peljasz at yahoo.co.uk> wrote:
>>>>>
>>>>>> dear developers
>>>>>>
>>>>>> I myself am not a prog-devel, I found this
>>>>>>
>>>>>> http://devgurus.amd.com/message/1255852#1255852
>>>>>>
>>>>>> Most R compilations/installations I use seem to fail 
>>>>>> this test, is
>>>>>> this a problem and if yes then how serious is it?
>>>>>>
>>>>>> regards
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-devel at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>> ----------------------------------------------------------------------- 
>>>
>>> This message and its attachments are strictly 
>>> confiden...{{dropped:9}}
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From sven.templer at gmail.com  Fri Jul 11 10:42:34 2014
From: sven.templer at gmail.com (Sven E. Templer)
Date: Fri, 11 Jul 2014 10:42:34 +0200
Subject: [Rd] checking whether 'INDEX' is up-to-date ... NO
Message-ID: <CAHuTOvqwkxACy1=_ryK_OU7y2H=WVi_XcT44az=LY-EdNUuQAQ@mail.gmail.com>

Dear List,

does the warning "checking whether 'INDEX' is up-to-date ... NO" while
building a package appear due to missing definitions of functions that
are in the NAMESPACE but not INDEX file? Do there also exist other
causes (for this warning)?

Thank you,
Sven.


From dusa.adrian at unibuc.ro  Fri Jul 11 10:48:48 2014
From: dusa.adrian at unibuc.ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Fri, 11 Jul 2014 11:48:48 +0300
Subject: [Rd] reserving a package name
In-Reply-To: <53BF1ACC.4060409@statistik.tu-dortmund.de>
References: <CAJ=0CtDqEVmnMJOTw9Q=H67cKVhYU8LVBMire1D3Bu_n+DoHbg@mail.gmail.com>
	<53BF1ACC.4060409@statistik.tu-dortmund.de>
Message-ID: <CAJ=0CtAKv045rBRSvNFjRxhBzqMMZFFzy=2i8qbp0ganq67fOw@mail.gmail.com>

On Fri, Jul 11, 2014 at 1:59 AM, Uwe Ligges
<ligges at statistik.tu-dortmund.de> wrote:
> On 10.07.2014 23:46, Adrian Du?a wrote:
>> Dear All,
>> [...]
>
> Well, you cannot reserve a package name. Actually you can choose any legal name.
>
> The story is different if you want to submit it to BioConductor or CRAN, then the name must be unique in the BioC + CRAN world. More details in the CRAN policies, for example.
> And yes, it works on n a first come, first served basis there.


Thanks Uwe, this is just as I had expected.
Best wishes,
Adrian

-- 
Adrian Dusa
University of Bucharest
Romanian Social Data Archive
Sos. Panduri nr.90
050663 Bucharest sector 5
Romania


From spencer.graves at structuremonitoring.com  Fri Jul 11 13:35:28 2014
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Fri, 11 Jul 2014 04:35:28 -0700
Subject: [Rd] reserving a package name
In-Reply-To: <CAJ=0CtAKv045rBRSvNFjRxhBzqMMZFFzy=2i8qbp0ganq67fOw@mail.gmail.com>
References: <CAJ=0CtDqEVmnMJOTw9Q=H67cKVhYU8LVBMire1D3Bu_n+DoHbg@mail.gmail.com>	<53BF1ACC.4060409@statistik.tu-dortmund.de>
	<CAJ=0CtAKv045rBRSvNFjRxhBzqMMZFFzy=2i8qbp0ganq67fOw@mail.gmail.com>
Message-ID: <53BFCC00.9000409@structuremonitoring.com>

On 7/11/2014 1:48 AM, Adrian Du?a wrote:
> On Fri, Jul 11, 2014 at 1:59 AM, Uwe Ligges
> <ligges at statistik.tu-dortmund.de> wrote:
>> On 10.07.2014 23:46, Adrian Du?a wrote:
>>> Dear All,
>>> [...]
>> Well, you cannot reserve a package name. Actually you can choose any legal name.
>>
>> The story is different if you want to submit it to BioConductor or CRAN, then the name must be unique in the BioC + CRAN world. More details in the CRAN policies, for example.
>> And yes, it works on n a first come, first served basis there.


       Please read CRAN policy: 
"http://cran.fhcrc.org/web/packages/policies.html".  I don't think they 
have a policy for minimum content beyond passing "R CMD check" without 
errors or significant notes and respecting the time of the CRAN 
maintainers by not submitting updates more often than every 1-2 months.  
A "package" consisting solely of the following DESCRIPTION passed "R CMD 
check" for me just now;  you should confirm that with the latest 
versions of R (and Rtools if you run Windows).  I can't speak for CRAN 
maintainers, but it looks to me like submitting a package containing 
only a DESCRIPTION file should reserve the name you want --- assuming 
it's already available.


       Hope this helps.
       Spencer


Package: tstPkg
Type: Package
Title: empty package
Version: 0.0-0
Date: 2014-07-11
Author: Adrian Duja
Maintainer: Adrian Dusa <dusa.adrian at unibuc.ro>
Description:
   reserving package name
License: GPL (>= 2)
Depends:
Suggests:

>> Thanks Uwe, this is just as I had expected.
>> Best wishes,
>> Adrian
>>


From ripley at stats.ox.ac.uk  Fri Jul 11 16:11:10 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 11 Jul 2014 15:11:10 +0100
Subject: [Rd] reserving a package name
In-Reply-To: <53BFCC00.9000409@structuremonitoring.com>
References: <CAJ=0CtDqEVmnMJOTw9Q=H67cKVhYU8LVBMire1D3Bu_n+DoHbg@mail.gmail.com>	<53BF1ACC.4060409@statistik.tu-dortmund.de>	<CAJ=0CtAKv045rBRSvNFjRxhBzqMMZFFzy=2i8qbp0ganq67fOw@mail.gmail.com>
	<53BFCC00.9000409@structuremonitoring.com>
Message-ID: <53BFF07E.3090504@stats.ox.ac.uk>

On 11/07/2014 12:35, Spencer Graves wrote:
> On 7/11/2014 1:48 AM, Adrian Du?a wrote:
>> On Fri, Jul 11, 2014 at 1:59 AM, Uwe Ligges
>> <ligges at statistik.tu-dortmund.de> wrote:
>>> On 10.07.2014 23:46, Adrian Du?a wrote:
>>>> Dear All,
>>>> [...]
>>> Well, you cannot reserve a package name. Actually you can choose any
>>> legal name.
>>>
>>> The story is different if you want to submit it to BioConductor or
>>> CRAN, then the name must be unique in the BioC + CRAN world. More
>>> details in the CRAN policies, for example.
>>> And yes, it works on n a first come, first served basis there.
>
>
>        Please read CRAN policy:
> "http://cran.fhcrc.org/web/packages/policies.html".  I don't think they
> have a policy for minimum content beyond passing "R CMD check" without
> errors or significant notes and respecting the time of the CRAN
> maintainers by not submitting updates more often than every 1-2 months.
> A "package" consisting solely of the following DESCRIPTION passed "R CMD
> check" for me just now;  you should confirm that with the latest
> versions of R (and Rtools if you run Windows).  I can't speak for CRAN
> maintainers, but it looks to me like submitting a package containing
> only a DESCRIPTION file should reserve the name you want --- assuming
> it's already available.

That would be rejected as wasting everyone's time. A CRAN package is 
expected to have examples (or failing that tests or a vignette).

>
>
>        Hope this helps.
>        Spencer
>
>
> Package: tstPkg
> Type: Package
> Title: empty package
> Version: 0.0-0
> Date: 2014-07-11
> Author: Adrian Duja
> Maintainer: Adrian Dusa <dusa.adrian at unibuc.ro>
> Description:
>    reserving package name
> License: GPL (>= 2)
> Depends:
> Suggests:
>
>>> Thanks Uwe, this is just as I had expected.
>>> Best wishes,
>>> Adrian
>>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ligges at statistik.tu-dortmund.de  Fri Jul 11 16:18:19 2014
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Fri, 11 Jul 2014 16:18:19 +0200
Subject: [Rd] reserving a package name
In-Reply-To: <53BFCC00.9000409@structuremonitoring.com>
References: <CAJ=0CtDqEVmnMJOTw9Q=H67cKVhYU8LVBMire1D3Bu_n+DoHbg@mail.gmail.com>	<53BF1ACC.4060409@statistik.tu-dortmund.de>	<CAJ=0CtAKv045rBRSvNFjRxhBzqMMZFFzy=2i8qbp0ganq67fOw@mail.gmail.com>
	<53BFCC00.9000409@structuremonitoring.com>
Message-ID: <53BFF22B.8000000@statistik.tu-dortmund.de>



On 11.07.2014 13:35, Spencer Graves wrote:
> On 7/11/2014 1:48 AM, Adrian Du?a wrote:
>> On Fri, Jul 11, 2014 at 1:59 AM, Uwe Ligges
>> <ligges at statistik.tu-dortmund.de> wrote:
>>> On 10.07.2014 23:46, Adrian Du?a wrote:
>>>> Dear All,
>>>> [...]
>>> Well, you cannot reserve a package name. Actually you can choose any
>>> legal name.
>>>
>>> The story is different if you want to submit it to BioConductor or
>>> CRAN, then the name must be unique in the BioC + CRAN world. More
>>> details in the CRAN policies, for example.
>>> And yes, it works on n a first come, first served basis there.
>
>
>        Please read CRAN policy:
> "http://cran.fhcrc.org/web/packages/policies.html".  I don't think they
> have a policy for minimum content beyond passing "R CMD check" without
> errors or significant notes and respecting the time of the CRAN
> maintainers by not submitting updates more often than every 1-2 months.
> A "package" consisting solely of the following DESCRIPTION passed "R CMD
> check" for me just now;  you should confirm that with the latest
> versions of R (and Rtools if you run Windows).  I can't speak for CRAN
> maintainers, but it looks to me like submitting a package containing
> only a DESCRIPTION file should reserve the name you want --- assuming
> it's already available.

Although we typically do not discuss CRAN matters here: CRAN won't 
accept such a package (or other too trivial ones).

I hope we do not need to add this to the policies.

Best,
Uwe Ligges






>
>
>        Hope this helps.
>        Spencer
>
>
> Package: tstPkg
> Type: Package
> Title: empty package
> Version: 0.0-0
> Date: 2014-07-11
> Author: Adrian Duja
> Maintainer: Adrian Dusa <dusa.adrian at unibuc.ro>
> Description:
>    reserving package name
> License: GPL (>= 2)
> Depends:
> Suggests:
>
>>> Thanks Uwe, this is just as I had expected.
>>> Best wishes,
>>> Adrian
>>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From dusa.adrian at unibuc.ro  Fri Jul 11 18:11:57 2014
From: dusa.adrian at unibuc.ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Fri, 11 Jul 2014 19:11:57 +0300
Subject: [Rd] grouping list of objects in the help system
Message-ID: <CAJ=0CtDLb4rsQXVjJ42f2ETE6p0_8Y3GfjVOZcUevw6YB1f7kQ@mail.gmail.com>

Dear list,

I've noticed for some packages the Index file in the help system has a
single list of objects (arranged alphabetically), while for other
packages this list is offered separately by letters... presumably when
the number of help objects is high.

Is there a way to manually split the help objects into categories?

For example, I would like to have an alphabetic order for the group
"datasets" and another alphabetical order for the group "functions".

Needless to say that I've tried to read everything I could on this
topic (especially "Writing R Extensions"), even looked closely on
different package sources, but I haven't noticed anything special.

Thanks,
Adrian

-- 
Adrian Dusa
University of Bucharest
Romanian Social Data Archive
Sos. Panduri nr.90
050663 Bucharest sector 5
Romania


From rkoenker at illinois.edu  Fri Jul 11 20:27:56 2014
From: rkoenker at illinois.edu (Roger Koenker)
Date: Fri, 11 Jul 2014 13:27:56 -0500
Subject: [Rd] Namespaces and S4 Generics
Message-ID: <D0A32345-C5A7-4FA4-AE7A-7D8D81355D36@illinois.edu>

I've installed R-devel

R Under development (unstable) (2014-07-09 r66111)
Platform: x86_64-apple-darwin13.1.0 (64-bit)

and am trying to resolve some problems that I am seeing with my 
SparseM package.  In prior versions I explicitly had:

setGeneric("image", function(x, ...) standardGeneric("image"))

and then used setMethod to define a method for the class matrix.csr
but my reading of the setGeneric manpage suggests that this call to
setGeneric need not, and probably should not have this second 
argument, and indeed, need not exist at all, since the generic is
automatically created by the setMethod invocation.

However,  what is puzzling to me is that in my new R-devel version
none of these options have the intended effect of making "image"
a generic and allowing R to dispatch for matrix.csr objects.  When
I omit the setGeneric() call, I do get a message at INSTALL time
that a generic for image is being created, but then after loading
SparseM:

> showMethods(image)
Function "image":
<not an S4 generic function>

On the command line, I can make this work:

> setGeneric("image")
[1] "image"
> showMethods(image)
Function: image (package graphics)
x="ANY"
x="matrix.csr"

And -- even more irritating --  if I  require(Matrix)  then the generic
is created together with my method and all the Matrix methods.  At 
the risk of theorizing without data, I suspect that this has something
to do with NAMESPACES, and I have tried to follow the setup for
Matrix by having:

importFrom("graphics", image)
exportMethods("image")

but clearly I'm still missing some crucial aspect.  Any suggestions
would be most welcome.

Roger



url:    www.econ.uiuc.edu/~roger            Roger Koenker
email    rkoenker at uiuc.edu            Department of Economics
vox:     217-333-4558                University of Illinois
fax:       217-244-6678                Urbana, IL 61801


From murdoch.duncan at gmail.com  Fri Jul 11 21:01:46 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 11 Jul 2014 15:01:46 -0400
Subject: [Rd] grouping list of objects in the help system
In-Reply-To: <CAJ=0CtDLb4rsQXVjJ42f2ETE6p0_8Y3GfjVOZcUevw6YB1f7kQ@mail.gmail.com>
References: <CAJ=0CtDLb4rsQXVjJ42f2ETE6p0_8Y3GfjVOZcUevw6YB1f7kQ@mail.gmail.com>
Message-ID: <53C0349A.8000003@gmail.com>

On 11/07/2014 12:11 PM, Adrian Du?a wrote:
> Dear list,
>
> I've noticed for some packages the Index file in the help system has a
> single list of objects (arranged alphabetically), while for other
> packages this list is offered separately by letters... presumably when
> the number of help objects is high.
>
> Is there a way to manually split the help objects into categories?
>
> For example, I would like to have an alphabetic order for the group
> "datasets" and another alphabetical order for the group "functions".
>
> Needless to say that I've tried to read everything I could on this
> topic (especially "Writing R Extensions"), even looked closely on
> different package sources, but I haven't noticed anything special.

You have a little bit of control of the order of topics in the PDF 
reference manual (e.g. see the lattice package), but the HTML help page 
is produced by R, not by you, and is presented in a standard 
alphabetical order.  I would object quite strongly to people messing 
with that.

Duncan Murdoch


From csardi.gabor at gmail.com  Fri Jul 11 21:16:53 2014
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Fri, 11 Jul 2014 15:16:53 -0400
Subject: [Rd] grouping list of objects in the help system
In-Reply-To: <CAJ=0CtDLb4rsQXVjJ42f2ETE6p0_8Y3GfjVOZcUevw6YB1f7kQ@mail.gmail.com>
References: <CAJ=0CtDLb4rsQXVjJ42f2ETE6p0_8Y3GfjVOZcUevw6YB1f7kQ@mail.gmail.com>
Message-ID: <CABtg=KnKbfsQ=6FuVmz0AW0Se5Lj-G5Dya+y1E1UfxLFuRMd5w@mail.gmail.com>

Depending on what you want, you might be interested in the staticdocs
package: https://github.com/hadley/staticdocs

If you want to build your own HTML docs, and put it online somewhere,
then it could be good enough for you.

Gabor

On Fri, Jul 11, 2014 at 12:11 PM, Adrian Du?a <dusa.adrian at unibuc.ro> wrote:
> Dear list,
>
> I've noticed for some packages the Index file in the help system has a
> single list of objects (arranged alphabetically), while for other
> packages this list is offered separately by letters... presumably when
> the number of help objects is high.
>
> Is there a way to manually split the help objects into categories?
>
> For example, I would like to have an alphabetic order for the group
> "datasets" and another alphabetical order for the group "functions".
>
> Needless to say that I've tried to read everything I could on this
> topic (especially "Writing R Extensions"), even looked closely on
> different package sources, but I haven't noticed anything special.
>
> Thanks,
> Adrian
>
> --
> Adrian Dusa
> University of Bucharest
> Romanian Social Data Archive
> Sos. Panduri nr.90
> 050663 Bucharest sector 5
> Romania
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From dusa.adrian at unibuc.ro  Fri Jul 11 22:07:19 2014
From: dusa.adrian at unibuc.ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Fri, 11 Jul 2014 23:07:19 +0300
Subject: [Rd] grouping list of objects in the help system
In-Reply-To: <53C0349A.8000003@gmail.com>
References: <CAJ=0CtDLb4rsQXVjJ42f2ETE6p0_8Y3GfjVOZcUevw6YB1f7kQ@mail.gmail.com>
	<53C0349A.8000003@gmail.com>
Message-ID: <CAJ=0CtAhsSf6W518rNT=g8b5jmssxdgajhBTO9s-AGToOaW5sA@mail.gmail.com>

On Fri, Jul 11, 2014 at 10:01 PM, Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
> On 11/07/2014 12:11 PM, Adrian Du?a wrote:
>> [...]
>
> You have a little bit of control of the order of topics in the PDF reference
> manual (e.g. see the lattice package), but the HTML help page is produced by
> R, not by you, and is presented in a standard alphabetical order.  I would
> object quite strongly to people messing with that.

I understand...
Thanks G?bor as well, already knew about Hadley's (very useful) set of
packages but I thought there was something I was missing in the base R
package structure.

Best,
Adrian

-- 
Adrian Dusa
University of Bucharest
Romanian Social Data Archive
Sos. Panduri nr.90
050663 Bucharest sector 5
Romania


From dtenenba at fhcrc.org  Sat Jul 12 01:49:09 2014
From: dtenenba at fhcrc.org (Dan Tenenbaum)
Date: Fri, 11 Jul 2014 16:49:09 -0700 (PDT)
Subject: [Rd] proposed change of check message when VIgnetteBuilder package
 is not declared as a dependency
In-Reply-To: <1141814523.922119.1405122039081.JavaMail.root@fhcrc.org>
Message-ID: <846333300.922260.1405122549438.JavaMail.root@fhcrc.org>

Hi,

I notice in R-3.1.1, if a package specifies a VignetteBuilder (such as knitr) in its DESCRIPTION file, but
does not also depend on the specified package (in either Depends, Imports, or Suggests), that R CMD check will say:

* checking package dependencies ... ERROR
VignetteBuilder package not declared: ?knitr?

I'm glad this situation is now caught by R CMD check, but I think the message text should be changed, because the message is confusing. Indeed, the VignetteBuilder package *was* declared, in the VignetteBuilder line. The problem is that there's no dependency on it, so no automated way to install it for building or checking.

Can the message instead say something like:

Package 'knitr' must be in Depends, Imports, or Suggests field of DESCRIPTION file.

?

A possible patch against trunk:

$ svn diff
Index: src/library/tools/R/QC.R
===================================================================
--- src/library/tools/R/QC.R	(revision 66127)
+++ src/library/tools/R/QC.R	(working copy)
@@ -3056,7 +3056,7 @@
       if(length(bad <- x$required_for_checking_but_not_installed) > 1L) {
           c(.pretty_format2("VignetteBuilder packages required for checking but not installed:", bad), "")
       } else if(length(bad)) {
-          c(sprintf("VignetteBuilder package required for checking but installed: %s", sQuote(bad)), "")
+          c(sprintf("Package %s must be in Depends, Imports, or Suggests field of DESCRIPTION file.", sQuote(bad)), "")
       },
       if(length(bad <- x$missing_vignette_depends)) {
           c(if(length(bad) > 1L) {


Thanks,
Dan


From jmc at r-project.org  Sat Jul 12 03:35:49 2014
From: jmc at r-project.org (John Chambers)
Date: Fri, 11 Jul 2014 18:35:49 -0700
Subject: [Rd] Namespaces and S4 Generics
In-Reply-To: <D0A32345-C5A7-4FA4-AE7A-7D8D81355D36@illinois.edu>
References: <D0A32345-C5A7-4FA4-AE7A-7D8D81355D36@illinois.edu>
Message-ID: <BC3843BB-563D-48C5-A99E-A86E6ED02BF3@r-project.org>

Roger,

Are you implying that your current code works differently under R-devel than with the current release?  Nothing I'm aware of would suggest that.

With or without setGeneric() (in either version but the single-argument is cleaner), a generic function for image() is created in your package's namespace.

If you don't export that function, calls from other functions in your package will still get the generic  version but calls from outside the package will get graphics::image.

Here's an example.  In my PkgA I have:

	setGeneric("image")

	setMethod("image", "A", function(x, ...) message("dummy image for class A"))

	showStuff <- function() showMethods("image")

In the NAMESPACE, I exported showStuff, but not image.

As a result:

> require(PkgA)
Loading required package: PkgA
> image
function (x, ...) 
UseMethod("image")
<bytecode: 0x7fa835170b08>
<environment: namespace:graphics>
> showMethods("image")

Function "image":
 <not an S4 generic function>
> showStuff
function () 
showMethods("image")
<environment: namespace:PkgA>
> showStuff()
Function: image (package graphics)
x="A"
x="ANY"

The methods are visible to code inside PkgA but others see only the S3 function.

John


On Jul 11, 2014, at 11:27 AM, Roger Koenker <rkoenker at illinois.edu> wrote:

> I've installed R-devel
> 
> R Under development (unstable) (2014-07-09 r66111)
> Platform: x86_64-apple-darwin13.1.0 (64-bit)
> 
> and am trying to resolve some problems that I am seeing with my 
> SparseM package.  In prior versions I explicitly had:
> 
> setGeneric("image", function(x, ...) standardGeneric("image"))
> 
> and then used setMethod to define a method for the class matrix.csr
> but my reading of the setGeneric manpage suggests that this call to
> setGeneric need not, and probably should not have this second 
> argument, and indeed, need not exist at all, since the generic is
> automatically created by the setMethod invocation.
> 
> However,  what is puzzling to me is that in my new R-devel version
> none of these options have the intended effect of making "image"
> a generic and allowing R to dispatch for matrix.csr objects.  When
> I omit the setGeneric() call, I do get a message at INSTALL time
> that a generic for image is being created, but then after loading
> SparseM:
> 
>> showMethods(image)
> Function "image":
> <not an S4 generic function>
> 
> On the command line, I can make this work:
> 
>> setGeneric("image")
> [1] "image"
>> showMethods(image)
> Function: image (package graphics)
> x="ANY"
> x="matrix.csr"
> 
> And -- even more irritating --  if I  require(Matrix)  then the generic
> is created together with my method and all the Matrix methods.  At 
> the risk of theorizing without data, I suspect that this has something
> to do with NAMESPACES, and I have tried to follow the setup for
> Matrix by having:
> 
> importFrom("graphics", image)
> exportMethods("image")
> 
> but clearly I'm still missing some crucial aspect.  Any suggestions
> would be most welcome.
> 
> Roger
> 
> 
> 
> url:    www.econ.uiuc.edu/~roger            Roger Koenker
> email    rkoenker at uiuc.edu            Department of Economics
> vox:     217-333-4558                University of Illinois
> fax:       217-244-6678                Urbana, IL 61801
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From minshall at acm.org  Sun Jul 13 21:13:27 2014
From: minshall at acm.org (Greg Minshall)
Date: Sun, 13 Jul 2014 22:13:27 +0300
Subject: [Rd] how to list external dependencies (i.e., non-R packages)?
Message-ID: <24045.1405278807@greg-minshalls-mbp.local>

hi.  i'm working on a package which only works if one (or both) of two
libraries (Imlib2 and MagickWand) exist on the machine on which the
package is compiled and executed.  as currently written, the program
purposely generates an error at *compile* time if neither library is
available (thinking the earlier the user is notified, the less
frustrating).

is there a way of specifying this dependency in, say, the DESCRIPTION
file?  (seems unlikely, as this is what the whole autotools/configure.ac
framework is supposed to deal with.)

or, should i take out the compile time error (maybe replace my #error
with a #warning), and just generate at error at run time?  (this will
require me to figure out what that means for build tests/, but obviously
some sort of hack is doable.)

cheers, Greg


From rkoenker at illinois.edu  Sun Jul 13 21:32:44 2014
From: rkoenker at illinois.edu (Roger Koenker)
Date: Sun, 13 Jul 2014 14:32:44 -0500
Subject: [Rd] Namespaces and S4 Generics
In-Reply-To: <e854b278186b4775aa7313dd922e393f@CHIHT3.ad.uillinois.edu>
References: <D0A32345-C5A7-4FA4-AE7A-7D8D81355D36@illinois.edu>
	<e854b278186b4775aa7313dd922e393f@CHIHT3.ad.uillinois.edu>
Message-ID: <3E7ED9D5-9880-4AE3-8C7F-C4F83DA27825@illinois.edu>

John,

Thanks very much.  As you suggested, this turned out not to have anything to do with R-devel.  Instead, it seemed traceable
to my decision a while back to start require()'ing packages in my .Rprofile, at least when I removed .Rprofile then my original
code for image methods worked fine in the current version of R-devel.  "Ours not to reason why..."  

Roger

url:    www.econ.uiuc.edu/~roger            Roger Koenker
email    rkoenker at uiuc.edu            Department of Economics
vox:     217-333-4558                University of Illinois
fax:       217-244-6678                Urbana, IL 61801

On Jul 11, 2014, at 8:35 PM, John Chambers <jmc at r-project.org> wrote:

> Roger,
> 
> Are you implying that your current code works differently under R-devel than with the current release?  Nothing I'm aware of would suggest that.
> 
> With or without setGeneric() (in either version but the single-argument is cleaner), a generic function for image() is created in your package's namespace.
> 
> If you don't export that function, calls from other functions in your package will still get the generic  version but calls from outside the package will get graphics::image.
> 
> Here's an example.  In my PkgA I have:
> 
> 	setGeneric("image")
> 
> 	setMethod("image", "A", function(x, ...) message("dummy image for class A"))
> 
> 	showStuff <- function() showMethods("image")
> 
> In the NAMESPACE, I exported showStuff, but not image.
> 
> As a result:
> 
>> require(PkgA)
> Loading required package: PkgA
>> image
> function (x, ...) 
> UseMethod("image")
> <bytecode: 0x7fa835170b08>
> <environment: namespace:graphics>
>> showMethods("image")
> 
> Function "image":
> <not an S4 generic function>
>> showStuff
> function () 
> showMethods("image")
> <environment: namespace:PkgA>
>> showStuff()
> Function: image (package graphics)
> x="A"
> x="ANY"
> 
> The methods are visible to code inside PkgA but others see only the S3 function.
> 
> John
> 
> 
> On Jul 11, 2014, at 11:27 AM, Roger Koenker <rkoenker at illinois.edu> wrote:
> 
>> I've installed R-devel
>> 
>> R Under development (unstable) (2014-07-09 r66111)
>> Platform: x86_64-apple-darwin13.1.0 (64-bit)
>> 
>> and am trying to resolve some problems that I am seeing with my 
>> SparseM package.  In prior versions I explicitly had:
>> 
>> setGeneric("image", function(x, ...) standardGeneric("image"))
>> 
>> and then used setMethod to define a method for the class matrix.csr
>> but my reading of the setGeneric manpage suggests that this call to
>> setGeneric need not, and probably should not have this second 
>> argument, and indeed, need not exist at all, since the generic is
>> automatically created by the setMethod invocation.
>> 
>> However,  what is puzzling to me is that in my new R-devel version
>> none of these options have the intended effect of making "image"
>> a generic and allowing R to dispatch for matrix.csr objects.  When
>> I omit the setGeneric() call, I do get a message at INSTALL time
>> that a generic for image is being created, but then after loading
>> SparseM:
>> 
>>> showMethods(image)
>> Function "image":
>> <not an S4 generic function>
>> 
>> On the command line, I can make this work:
>> 
>>> setGeneric("image")
>> [1] "image"
>>> showMethods(image)
>> Function: image (package graphics)
>> x="ANY"
>> x="matrix.csr"
>> 
>> And -- even more irritating --  if I  require(Matrix)  then the generic
>> is created together with my method and all the Matrix methods.  At 
>> the risk of theorizing without data, I suspect that this has something
>> to do with NAMESPACES, and I have tried to follow the setup for
>> Matrix by having:
>> 
>> importFrom("graphics", image)
>> exportMethods("image")
>> 
>> but clearly I'm still missing some crucial aspect.  Any suggestions
>> would be most welcome.
>> 
>> Roger
>> 
>> 
>> 
>> url:    www.econ.uiuc.edu/~roger            Roger Koenker
>> email    rkoenker at uiuc.edu            Department of Economics
>> vox:     217-333-4558                University of Illinois
>> fax:       217-244-6678                Urbana, IL 61801
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
> 


From kasperdanielhansen at gmail.com  Sun Jul 13 22:08:56 2014
From: kasperdanielhansen at gmail.com (Kasper Daniel Hansen)
Date: Sun, 13 Jul 2014 22:08:56 +0200
Subject: [Rd] how to list external dependencies (i.e., non-R packages)?
In-Reply-To: <24045.1405278807@greg-minshalls-mbp.local>
References: <24045.1405278807@greg-minshalls-mbp.local>
Message-ID: <CAC2h7uvKRgrR_ax0TieWxNLYa3Zi7_2eG6JgDTd=N0UdiFTf1g@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140713/11eab1b5/attachment.pl>

From jon.skoien at jrc.ec.europa.eu  Mon Jul 14 10:43:59 2014
From: jon.skoien at jrc.ec.europa.eu (Jon Olav Skoien)
Date: Mon, 14 Jul 2014 10:43:59 +0200
Subject: [Rd] Error in compactPDF/find_gs_cmd or documentation?
Message-ID: <53C3984F.2070800@jrc.ec.europa.eu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140714/62422396/attachment.pl>

From hb at biostat.ucsf.edu  Mon Jul 14 11:22:55 2014
From: hb at biostat.ucsf.edu (Henrik Bengtsson)
Date: Mon, 14 Jul 2014 02:22:55 -0700
Subject: [Rd] Error in compactPDF/find_gs_cmd or documentation?
In-Reply-To: <53C3984F.2070800@jrc.ec.europa.eu>
References: <53C3984F.2070800@jrc.ec.europa.eu>
Message-ID: <CAFDcVCSNs+OjxnoGhJV=KZtuHuico-W0bD=ErDiGQ19XMxsFqg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140714/304879b6/attachment.pl>

From michael.haupt at oracle.com  Mon Jul 14 16:53:47 2014
From: michael.haupt at oracle.com (Michael Haupt)
Date: Mon, 14 Jul 2014 16:53:47 +0200
Subject: [Rd] cummax / cummin for complex numbers
Message-ID: <9591F061-56E7-4FA6-9A84-AED2C3B56F32@oracle.com>

Dear all,

in R 3.1.0, this is happening:

> cummin(c(1+1i,2-3i,4+5i))
Error in cummin(c(1 + (0+1i), 2 - (0+3i), 4 + (0+5i))) : 
  'cummax' not defined for complex numbers
> cummax(c(1+1i,2-3i,4+5i))
Error in cummax(c(1 + (0+1i), 2 - (0+3i), 4 + (0+5i))) : 
  'cummin' not defined for complex numbers

It may be fixed in R-devel, but I thought I'd mention it to make sure ...

Best,

Michael

-- 
Dr. Michael Haupt
Principal Member of Technical Staff
Phone: +49 331 200 7277, Fax: +49 331 200 7561
Oracle Labs
Oracle Deutschland B.V. & Co. KG, Schiffbauergasse 14, 14467 Potsdam, Germany


From brian.s.diggs at gmail.com  Mon Jul 14 17:07:11 2014
From: brian.s.diggs at gmail.com (Brian Diggs)
Date: Mon, 14 Jul 2014 08:07:11 -0700
Subject: [Rd] proposed change of check message when VIgnetteBuilder
 package is not declared as a dependency
In-Reply-To: <846333300.922260.1405122549438.JavaMail.root@fhcrc.org>
References: <1141814523.922119.1405122039081.JavaMail.root@fhcrc.org>
	<846333300.922260.1405122549438.JavaMail.root@fhcrc.org>
Message-ID: <53C3F21F.4080405@gmail.com>

On 7/11/2014 4:49 PM, Dan Tenenbaum wrote:> Hi,
 >
 > I notice in R-3.1.1, if a package specifies a VignetteBuilder (such
 > as knitr) in its DESCRIPTION file, butdoes not also depend on the
 > specified package (in either Depends, Imports, or Suggests), that R
 > CMD check will say:
 >
 > * checking package dependencies ... ERROR
 > VignetteBuilder package not declared: ?knitr?
 >
 > I'm glad this situation is now caught by R CMD check, but I think
 > the message text should be changed, because the message is confusing.
 > Indeed, the VignetteBuilder package *was* declared, in the
 > VignetteBuilder line. The problem is that there's no dependency on it,
 > so no automated way to install it for building or checking.
 >
 > Can the message instead say something like:
 >
 > Package 'knitr' must be in Depends, Imports, or Suggests field of
 > DESCRIPTION file.
 >
 > ?

You shouldn't leave out the information that the package in question is 
being mentioned because it is declared in VignetteBuilder. I would 
suggest something more like:

VignetteBuilder package 'knitr' must be in Depends, Imports, or Suggests 
field of DESCRIPTION file.

-- 
Brian S. Diggs, PhD
Senior Research Associate, Department of Surgery
Oregon Health & Science University


From marc_schwartz at me.com  Mon Jul 14 17:12:53 2014
From: marc_schwartz at me.com (Marc Schwartz)
Date: Mon, 14 Jul 2014 10:12:53 -0500
Subject: [Rd] cummax / cummin for complex numbers
In-Reply-To: <9591F061-56E7-4FA6-9A84-AED2C3B56F32@oracle.com>
References: <9591F061-56E7-4FA6-9A84-AED2C3B56F32@oracle.com>
Message-ID: <90840DF0-1654-47C4-97BD-DAD9665F11B7@me.com>


On Jul 14, 2014, at 9:53 AM, Michael Haupt <michael.haupt at oracle.com> wrote:

> Dear all,
> 
> in R 3.1.0, this is happening:
> 
>> cummin(c(1+1i,2-3i,4+5i))
> Error in cummin(c(1 + (0+1i), 2 - (0+3i), 4 + (0+5i))) : 
>  'cummax' not defined for complex numbers
>> cummax(c(1+1i,2-3i,4+5i))
> Error in cummax(c(1 + (0+1i), 2 - (0+3i), 4 + (0+5i))) : 
>  'cummin' not defined for complex numbers
> 
> It may be fixed in R-devel, but I thought I'd mention it to make sure ...
> 
> Best,
> 
> Michael


The help file for cummax/cummin in 3.1.1 specifically states:

x  a numeric or complex ****(not cummin or cummax)**** object, or an object that can be coerced to one of these.


So why would you expect it to work for cummin or cummax when you pass a complex 'x'?

Regards,

Marc Schwartz


From bbolker at gmail.com  Mon Jul 14 17:14:30 2014
From: bbolker at gmail.com (Ben Bolker)
Date: Mon, 14 Jul 2014 15:14:30 +0000
Subject: [Rd] cummax / cummin for complex numbers
References: <9591F061-56E7-4FA6-9A84-AED2C3B56F32@oracle.com>
Message-ID: <loom.20140714T170807-611@post.gmane.org>

Michael Haupt <michael.haupt <at> oracle.com> writes:

> 
> Dear all,
> 
> in R 3.1.0, this is happening:
> 
> > cummin(c(1+1i,2-3i,4+5i))
> Error in cummin(c(1 + (0+1i), 2 - (0+3i), 4 + (0+5i))) : 
>   'cummax' not defined for complex numbers
> > cummax(c(1+1i,2-3i,4+5i))
> Error in cummax(c(1 + (0+1i), 2 - (0+3i), 4 + (0+5i))) : 
>   'cummin' not defined for complex numbers
> 
> It may be fixed in R-devel, but I thought I'd mention it to make sure ...
> 
> Best,
> 
> Michael

  Well, it is documented in the development version:

   x: a numeric or complex (not ?cummin? or ?cummax?) object, or an
          object that can be coerced to one of these.

I imagine the problem is in coming up with a good, consistent definition
of the min/max for complex numbers: would you prefer min/max modulus,
phase, real part, imaginary part ... ? max()/min() aren't even defined
for complex numbers in R ...


From dtemplelang at ucdavis.edu  Mon Jul 14 17:18:12 2014
From: dtemplelang at ucdavis.edu (Duncan Temple Lang)
Date: Mon, 14 Jul 2014 08:18:12 -0700
Subject: [Rd] cummax / cummin for complex numbers
In-Reply-To: <loom.20140714T170807-611@post.gmane.org>
References: <9591F061-56E7-4FA6-9A84-AED2C3B56F32@oracle.com>
	<loom.20140714T170807-611@post.gmane.org>
Message-ID: <53C3F4B4.6040405@ucdavis.edu>

I believe Michael's point is that the error messages
are incorrect - referring to cunmax when cunmin was called
and vice verse.

 D.

On 7/14/14, 8:14 AM, Ben Bolker wrote:
> Michael Haupt <michael.haupt <at> oracle.com> writes:
> 
>>
>> Dear all,
>>
>> in R 3.1.0, this is happening:
>>
>>> cummin(c(1+1i,2-3i,4+5i))
>> Error in cummin(c(1 + (0+1i), 2 - (0+3i), 4 + (0+5i))) : 
>>   'cummax' not defined for complex numbers
>>> cummax(c(1+1i,2-3i,4+5i))
>> Error in cummax(c(1 + (0+1i), 2 - (0+3i), 4 + (0+5i))) : 
>>   'cummin' not defined for complex numbers
>>
>> It may be fixed in R-devel, but I thought I'd mention it to make sure ...
>>
>> Best,
>>
>> Michael
> 
>   Well, it is documented in the development version:
> 
>    x: a numeric or complex (not ?cummin? or ?cummax?) object, or an
>           object that can be coerced to one of these.
> 
> I imagine the problem is in coming up with a good, consistent definition
> of the min/max for complex numbers: would you prefer min/max modulus,
> phase, real part, imaginary part ... ? max()/min() aren't even defined
> for complex numbers in R ...
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From marc_schwartz at me.com  Mon Jul 14 17:27:06 2014
From: marc_schwartz at me.com (Marc Schwartz)
Date: Mon, 14 Jul 2014 10:27:06 -0500
Subject: [Rd] cummax / cummin for complex numbers
In-Reply-To: <53C3F4B4.6040405@ucdavis.edu>
References: <9591F061-56E7-4FA6-9A84-AED2C3B56F32@oracle.com>
	<loom.20140714T170807-611@post.gmane.org>
	<53C3F4B4.6040405@ucdavis.edu>
Message-ID: <5DEF7780-128C-45EE-8900-1880287CEDCC@me.com>

Ah! That was not clear and this early on a Monday morning, insufficient caffeine levels are common. :-)

I can confirm that this is still an issue in 3.1.1, which is a version newer than what Michael is running and the current stable release. 

They appear to be still reversed in the current SVN trunk (aka R-Devel):

  https://svn.r-project.org/R/trunk/src/main/cum.c

Regards,

Marc

On Jul 14, 2014, at 10:18 AM, Duncan Temple Lang <dtemplelang at ucdavis.edu> wrote:

> I believe Michael's point is that the error messages
> are incorrect - referring to cunmax when cunmin was called
> and vice verse.
> 
> D.
> 
> On 7/14/14, 8:14 AM, Ben Bolker wrote:
>> Michael Haupt <michael.haupt <at> oracle.com> writes:
>> 
>>> 
>>> Dear all,
>>> 
>>> in R 3.1.0, this is happening:
>>> 
>>>> cummin(c(1+1i,2-3i,4+5i))
>>> Error in cummin(c(1 + (0+1i), 2 - (0+3i), 4 + (0+5i))) : 
>>>  'cummax' not defined for complex numbers
>>>> cummax(c(1+1i,2-3i,4+5i))
>>> Error in cummax(c(1 + (0+1i), 2 - (0+3i), 4 + (0+5i))) : 
>>>  'cummin' not defined for complex numbers
>>> 
>>> It may be fixed in R-devel, but I thought I'd mention it to make sure ...
>>> 
>>> Best,
>>> 
>>> Michael
>> 
>>  Well, it is documented in the development version:
>> 
>>   x: a numeric or complex (not ?cummin? or ?cummax?) object, or an
>>          object that can be coerced to one of these.
>> 
>> I imagine the problem is in coming up with a good, consistent definition
>> of the min/max for complex numbers: would you prefer min/max modulus,
>> phase, real part, imaginary part ... ? max()/min() aren't even defined
>> for complex numbers in R ...


From michael.haupt at oracle.com  Mon Jul 14 18:17:33 2014
From: michael.haupt at oracle.com (Michael Haupt)
Date: Mon, 14 Jul 2014 18:17:33 +0200
Subject: [Rd] cummax / cummin for complex numbers
In-Reply-To: <53C3F4B4.6040405@ucdavis.edu>
References: <9591F061-56E7-4FA6-9A84-AED2C3B56F32@oracle.com>
	<loom.20140714T170807-611@post.gmane.org>
	<53C3F4B4.6040405@ucdavis.edu>
Message-ID: <F800FA34-28B2-4ED7-8926-17F7C2491808@oracle.com>

.. spot on. :-)

Apologies for not having been more "pointy" about the problem - this just confirms it *is* kind of subtle. :-)

Best,

Michael

Am 14.07.2014 um 17:18 schrieb Duncan Temple Lang <dtemplelang at ucdavis.edu>:

> I believe Michael's point is that the error messages
> are incorrect - referring to cunmax when cunmin was called
> and vice verse.
> 
> D.
> 
> On 7/14/14, 8:14 AM, Ben Bolker wrote:
>> Michael Haupt <michael.haupt <at> oracle.com> writes:
>> 
>>> 
>>> Dear all,
>>> 
>>> in R 3.1.0, this is happening:
>>> 
>>>> cummin(c(1+1i,2-3i,4+5i))
>>> Error in cummin(c(1 + (0+1i), 2 - (0+3i), 4 + (0+5i))) : 
>>>  'cummax' not defined for complex numbers
>>>> cummax(c(1+1i,2-3i,4+5i))
>>> Error in cummax(c(1 + (0+1i), 2 - (0+3i), 4 + (0+5i))) : 
>>>  'cummin' not defined for complex numbers
>>> 
>>> It may be fixed in R-devel, but I thought I'd mention it to make sure ...
>>> 
>>> Best,
>>> 
>>> Michael
>> 
>>  Well, it is documented in the development version:
>> 
>>   x: a numeric or complex (not ?cummin? or ?cummax?) object, or an
>>          object that can be coerced to one of these.
>> 
>> I imagine the problem is in coming up with a good, consistent definition
>> of the min/max for complex numbers: would you prefer min/max modulus,
>> phase, real part, imaginary part ... ? max()/min() aren't even defined
>> for complex numbers in R ...

-- 
Dr. Michael Haupt
Principal Member of Technical Staff
Phone: +49 331 200 7277, Fax: +49 331 200 7561
Oracle Labs
Oracle Deutschland B.V. & Co. KG, Schiffbauergasse 14, 14467 Potsdam, Germany


From lawrence.michael at gene.com  Mon Jul 14 22:02:44 2014
From: lawrence.michael at gene.com (Michael Lawrence)
Date: Mon, 14 Jul 2014 13:02:44 -0700
Subject: [Rd] how to list external dependencies (i.e., non-R packages)?
In-Reply-To: <CAC2h7uvKRgrR_ax0TieWxNLYa3Zi7_2eG6JgDTd=N0UdiFTf1g@mail.gmail.com>
References: <24045.1405278807@greg-minshalls-mbp.local>
	<CAC2h7uvKRgrR_ax0TieWxNLYa3Zi7_2eG6JgDTd=N0UdiFTf1g@mail.gmail.com>
Message-ID: <CAOQ5NycFDjbrNuS1Wck5VjMU9K1XC5nz1tvdLMUUQqCVj1NuwA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140714/044d1590/attachment.pl>

From srinathsmn at gmail.com  Tue Jul 15 17:55:18 2014
From: srinathsmn at gmail.com (Varadharajan Mukundan)
Date: Tue, 15 Jul 2014 21:25:18 +0530
Subject: [Rd] Reducing RAM usage using UKSM
Message-ID: <CACKkDGGf0XXsrqYXmKW3Lnp4dw3zzJ0SG=2_pmWo1HpD=HPY2A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140715/c2c50e2e/attachment.pl>

From dtenenba at fhcrc.org  Tue Jul 15 23:00:08 2014
From: dtenenba at fhcrc.org (Dan Tenenbaum)
Date: Tue, 15 Jul 2014 14:00:08 -0700 (PDT)
Subject: [Rd] how to list external dependencies (i.e., non-R packages)?
In-Reply-To: <CAC2h7uvKRgrR_ax0TieWxNLYa3Zi7_2eG6JgDTd=N0UdiFTf1g@mail.gmail.com>
Message-ID: <948261850.983245.1405458008599.JavaMail.root@fhcrc.org>



----- Original Message -----
> From: "Kasper Daniel Hansen" <kasperdanielhansen at gmail.com>
> To: "Greg Minshall" <minshall at acm.org>
> Cc: "r-devel" <r-devel at r-project.org>
> Sent: Sunday, July 13, 2014 1:08:56 PM
> Subject: Re: [Rd] how to list external dependencies (i.e., non-R packages)?
> 
> Several packages in Bioconductor (and possibly CRAN) uses
>   SystemRequirements
> in DESCRIPTION, but unless the user reads the DESCRIPTION file, this
> is for
> naught.  Still useful to some people I think.
> 

This is not just for Bioconductor; The R-exts manual (Section 1.1.1) says:

"Dependencies external to the R system should be listed in the ?SystemRequirements? field, possibly amplified in a separate README file."

Dan




> Best,
> Kasper
> 
> 
> On Sun, Jul 13, 2014 at 9:13 PM, Greg Minshall <minshall at acm.org>
> wrote:
> 
> > hi.  i'm working on a package which only works if one (or both) of
> > two
> > libraries (Imlib2 and MagickWand) exist on the machine on which the
> > package is compiled and executed.  as currently written, the
> > program
> > purposely generates an error at *compile* time if neither library
> > is
> > available (thinking the earlier the user is notified, the less
> > frustrating).
> >
> > is there a way of specifying this dependency in, say, the
> > DESCRIPTION
> > file?  (seems unlikely, as this is what the whole
> > autotools/configure.ac
> > framework is supposed to deal with.)
> >
> > or, should i take out the compile time error (maybe replace my
> > #error
> > with a #warning), and just generate at error at run time?  (this
> > will
> > require me to figure out what that means for build tests/, but
> > obviously
> > some sort of hack is doable.)
> >
> > cheers, Greg
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From lgautier at gmail.com  Wed Jul 16 04:24:44 2014
From: lgautier at gmail.com (Laurent Gautier)
Date: Tue, 15 Jul 2014 22:24:44 -0400
Subject: [Rd] C-API: removing key-value pairs in an environment
Message-ID: <53C5E26C.2080907@gmail.com>

Hi,

I am trying to remove key-value pairs from an environments (using C).

While adding seems straightforward with `Rf_defineVar()`, I cannot find 
a function to remove objects from a given environment.

Would anyone know if there is such a function ?

Best,



Laurent


From csardi.gabor at gmail.com  Wed Jul 16 04:43:22 2014
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 15 Jul 2014 22:43:22 -0400
Subject: [Rd] C-API: removing key-value pairs in an environment
In-Reply-To: <53C5E26C.2080907@gmail.com>
References: <53C5E26C.2080907@gmail.com>
Message-ID: <CABtg=KkJdTBh9P=70Z-5RgmfwWYeYCPEuZHviDEGJcbkph_4fA@mail.gmail.com>

It seems that this is not part of the C API, and you need to call back
to R. Here is how Rcpp does it:

https://github.com/RcppCore/Rcpp/blob/e2fcecad4533301d12e1ba19e94ab9f0fa3eb423/inst/include/Rcpp/Environment.h#L194

Best,
Gabor

On Tue, Jul 15, 2014 at 10:24 PM, Laurent Gautier <lgautier at gmail.com> wrote:
> Hi,
>
> I am trying to remove key-value pairs from an environments (using C).
>
> While adding seems straightforward with `Rf_defineVar()`, I cannot find a
> function to remove objects from a given environment.
>
> Would anyone know if there is such a function ?
>
> Best,
>
>
>
> Laurent
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From lgautier at gmail.com  Wed Jul 16 05:18:01 2014
From: lgautier at gmail.com (Laurent Gautier)
Date: Tue, 15 Jul 2014 23:18:01 -0400
Subject: [Rd] C-API: removing key-value pairs in an environment
In-Reply-To: <CABtg=KkJdTBh9P=70Z-5RgmfwWYeYCPEuZHviDEGJcbkph_4fA@mail.gmail.com>
References: <53C5E26C.2080907@gmail.com>
	<CABtg=KkJdTBh9P=70Z-5RgmfwWYeYCPEuZHviDEGJcbkph_4fA@mail.gmail.com>
Message-ID: <53C5EEE9.2040702@gmail.com>

Thanks.
I was hoping that there was an alternative since last time I looked (I 
was calling R's "rm()" - I am seeing with the example that I can narrow 
it down to the .Internal "remove").

L.


On 07/15/2014 10:43 PM, G?bor Cs?rdi wrote:
> It seems that this is not part of the C API, and you need to call back
> to R. Here is how Rcpp does it:
>
> https://github.com/RcppCore/Rcpp/blob/e2fcecad4533301d12e1ba19e94ab9f0fa3eb423/inst/include/Rcpp/Environment.h#L194
>
> Best,
> Gabor
>
> On Tue, Jul 15, 2014 at 10:24 PM, Laurent Gautier <lgautier at gmail.com> wrote:
>> Hi,
>>
>> I am trying to remove key-value pairs from an environments (using C).
>>
>> While adding seems straightforward with `Rf_defineVar()`, I cannot find a
>> function to remove objects from a given environment.
>>
>> Would anyone know if there is such a function ?
>>
>> Best,
>>
>>
>>
>> Laurent
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel


From jeroen.ooms at stat.ucla.edu  Wed Jul 16 08:25:00 2014
From: jeroen.ooms at stat.ucla.edu (Jeroen Ooms)
Date: Tue, 15 Jul 2014 23:25:00 -0700
Subject: [Rd] how to list external dependencies (i.e., non-R packages)?
In-Reply-To: <24045.1405278807@greg-minshalls-mbp.local>
References: <24045.1405278807@greg-minshalls-mbp.local>
Message-ID: <CABFfbXspfoXzKMVKLg9CTrWyhL49b+KY+2OoCSyFiO=+EyWDtQ@mail.gmail.com>

On Sun, Jul 13, 2014 at 12:13 PM, Greg Minshall <minshall at acm.org> wrote:
>
> is there a way of specifying this dependency in, say, the DESCRIPTION
> file?  (seems unlikely, as this is what the whole autotools/configure.ac
> framework is supposed to deal with.)

As was mentioned, the SystemRequirements field allows for this, but
the format is quite informal and hence package managers cannot
automatically resolve such dependencies. A few years ago [1] it was
suggested on this mailing lists to extend the DESCRIPTION spec with
fields that allow package authors to specify which particular deb or
rpm packages are required to build the R package. However this was
shot down with the argument that it is not the responsibility of the
package author to determine the required build/runtime dependencies on
the OS of the user.

Debian/Ubuntu users can take advantage of the "debianized" packages
from cran2deb [2,3,4] which, among other benefits, do have the
capability to formally declare external dependencies. Such r-cran-xx
and r-bioc-xx packages will automatically install build/runtime
dependencies when needed  (e.g. libmagickwand-dev). Due to the
limitations above, this system currently relies on 3rd party
volunteers (with limited resources) to maintain a database [5] of
"Depends" and "Build-Depends" for all R packages. Dirk Eddelbuettel,
Michael Rutter and Don Armstrong are doing a great job to keep this
system going and provide binary builds of many cran/bioc packages for
the various deb distributions. Creating a debianized version of your
own R package is quite easy too, and solves the problem at least for
your debian/ubuntu users :-)

I still think it would be useful to introduce a standard field/format
somewhere in the R package metadata that gives package authors the
option to suggest deb/rpm/homebrew dependencies required to build/use
the R package. But for now the best we can do is provide manual
instructions in the SystemRequirements+readme.

Jeroen


[1] https://stat.ethz.ch/pipermail/r-devel/2011-February/059787.html
[2] http://dirk.eddelbuettel.com/papers/useR2009cran2deb.pdf
[3] http://www.personal.psu.edu/mar36/blogs/the_ubuntu_r_blog/cran2deb4ubuntu.html
[4] http://debian-r.debian.net/
[5] http://debian-r.debian.net/debian-r/c2d/


From srinathsmn at gmail.com  Wed Jul 16 11:07:43 2014
From: srinathsmn at gmail.com (Varadharajan Mukundan)
Date: Wed, 16 Jul 2014 14:37:43 +0530
Subject: [Rd] Reducing RAM usage using UKSM
In-Reply-To: <CACKkDGGf0XXsrqYXmKW3Lnp4dw3zzJ0SG=2_pmWo1HpD=HPY2A@mail.gmail.com>
References: <CACKkDGGf0XXsrqYXmKW3Lnp4dw3zzJ0SG=2_pmWo1HpD=HPY2A@mail.gmail.com>
Message-ID: <CACKkDGHrW5e1RF3YPJ2NSwgD=GCK6PWJwgQbyFRen_zuTREExw@mail.gmail.com>

[Sending it again in plain text mode]

Greetings,

We've a fairly large dataset (around 60GB) to be loaded and crunched
in real time. The kind of data operations that will be performed on
this data are simple read only aggregates after filtering the
data.table instance based on the parameters that will passed in real
time. We need to have more than one instance of such R process running
to serve different testing environments (each testing environment has
fairly identical dataset but do have a *small amount of changes*). As
we all know, data.table loads the entire dataset into memory for
processing and hence we are facing a constraint on number of such
process that we could run on the machine. On a 128GB RAM machine, we
are coming up with ways in which we could reduce the memory footprint
so that we can try to spawn more instances and use the resources
efficiently. One of the approaches we tried out was memory
de-duplication using UKSM
(http://kerneldedup.org/en/projects/uksm/introduction), given that we
did have few idle cpu cores. Outcome of the experiment was quite
impressive, considering that the effort to set it up was quite less
and the entire approach considers the application layer as a black
box.

Quick snapshot of the results:
1 Instance (without UKSM): ~60GB RAM was being used
1 Instance (with UKSM): ~53 GB RAM was being used

2 Instance (without UKSM): ~125GB RAM was being used
2 Instance (with UKSM): ~81 GB RAM was being used

We can see that around 44 GB of RAM was saved after UKSM merged
similar pages and all this for  a compromise of 1 CPU core on a 48
core machine. We did not feel any noticeable degradation of
performance because the data is refreshed by a batch job only once
(every morning); UKSM gets in at this time and performs the same page
merging and for the rest of day, its just read only analysis. The kind
of queries we fire on the dataset at most scans 2-3GB of the entire
dataset and hence the query subset spike was low as well.

We're interested in knowing if this is a plausible solution to this
problem? Any other points/solutions that we should be considering?

On Tue, Jul 15, 2014 at 9:25 PM, Varadharajan Mukundan
<srinathsmn at gmail.com> wrote:
> Greetings,
>
> We've a fairly large dataset (around 60GB) to be loaded and crunched in real
> time. The kind of data operations that will be performed on this data are
> simple read only aggregates after filtering the data.table instance based on
> the parameters that will passed in real time. We need to have more than one
> instance of such R process running to serve different testing environments
> (each testing environment has fairly identical dataset but do have a *small
> amount of changes*). As we all know, data.table loads the entire dataset
> into memory for processing and hence we are facing a constraint on number of
> such process that we could run on the machine. On a 128GB RAM machine, we
> are coming up with ways in which we could reduce the memory footprint so
> that we can try to spawn more instances and use the resources efficiently.
> One of the approaches we tried out was memory de-duplication using UKSM
> (http://kerneldedup.org/en/projects/uksm/introduction), given that we did
> have few idle cpu cores. Outcome of the experiment was quite impressive,
> considering that the effort to set it up was quite less and the entire
> approach considers the application layer as a black box.
>
> Quick snapshot of the results:
> 1 Instance (without UKSM): ~60GB RAM was being used
> 1 Instance (with UKSM): ~53 GB RAM was being used
>
> 2 Instance (without UKSM): ~125GB RAM was being used
> 2 Instance (with UKSM): ~81 GB RAM was being used
>
> We can see that around 44 GB of RAM was saved after UKSM merged similar
> pages and all this for  a compromise of 1 CPU core on a 48 core machine. We
> did not feel any noticeable degradation of performance because the data is
> refreshed by a batch job only once (every morning); UKSM gets in at this
> time and performs the same page merging and for the rest of day, its just
> read only analysis. The kind of queries we fire on the dataset at most scans
> 2-3GB of the entire dataset and hence the query subset spike was low as
> well.
>
> We're interested in knowing if this is a plausible solution to this problem?
> Any other points/solutions that we should be considering?
>
> --
> Thanks,
> M. Varadharajan
>
> ------------------------------------------------
>
> "Experience is what you get when you didn't get what you wanted"
>                -By Prof. Randy Pausch in "The Last Lecture"
>
> My Journal :- www.thinkasgeek.wordpress.com



-- 
Thanks,
M. Varadharajan

------------------------------------------------

"Experience is what you get when you didn't get what you wanted"
               -By Prof. Randy Pausch in "The Last Lecture"

My Journal :- www.thinkasgeek.wordpress.com


From roman.tsegelskyi at gmail.com  Wed Jul 16 04:46:33 2014
From: roman.tsegelskyi at gmail.com (Roman Tsegelskyi)
Date: Tue, 15 Jul 2014 22:46:33 -0400
Subject: [Rd] How to access a return value of a function that is being traced
Message-ID: <F6B25D7D-9BFA-4D8E-B625-B12A2D73966F@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140715/f6025f33/attachment.pl>

From greg at warnes.net  Wed Jul 16 15:07:14 2014
From: greg at warnes.net (Gregory R. Warnes)
Date: Wed, 16 Jul 2014 09:07:14 -0400
Subject: [Rd] Reducing RAM usage using UKSM
In-Reply-To: <CACKkDGHrW5e1RF3YPJ2NSwgD=GCK6PWJwgQbyFRen_zuTREExw@mail.gmail.com>
References: <CACKkDGGf0XXsrqYXmKW3Lnp4dw3zzJ0SG=2_pmWo1HpD=HPY2A@mail.gmail.com>
	<CACKkDGHrW5e1RF3YPJ2NSwgD=GCK6PWJwgQbyFRen_zuTREExw@mail.gmail.com>
Message-ID: <722C34AE-0634-4D41-AFD4-4E7BD332D222@warnes.net>

Hi Varadharajan,

Linux uses a copy-on-write for the memory image of forked processes.  Thus, you may also get significant memory savings by launching a single R process, loading your large data object, and then using fork::fork() to split off the other worker process.     

-Greg

Sent from my iPad

> On Jul 16, 2014, at 5:07 AM, Varadharajan Mukundan <srinathsmn at gmail.com> wrote:
> 
> [Sending it again in plain text mode]
> 
> Greetings,
> 
> We've a fairly large dataset (around 60GB) to be loaded and crunched
> in real time. The kind of data operations that will be performed on
> this data are simple read only aggregates after filtering the
> data.table instance based on the parameters that will passed in real
> time. We need to have more than one instance of such R process running
> to serve different testing environments (each testing environment has
> fairly identical dataset but do have a *small amount of changes*). As
> we all know, data.table loads the entire dataset into memory for
> processing and hence we are facing a constraint on number of such
> process that we could run on the machine. On a 128GB RAM machine, we
> are coming up with ways in which we could reduce the memory footprint
> so that we can try to spawn more instances and use the resources
> efficiently. One of the approaches we tried out was memory
> de-duplication using UKSM
> (http://kerneldedup.org/en/projects/uksm/introduction), given that we
> did have few idle cpu cores. Outcome of the experiment was quite
> impressive, considering that the effort to set it up was quite less
> and the entire approach considers the application layer as a black
> box.
> 
> Quick snapshot of the results:
> 1 Instance (without UKSM): ~60GB RAM was being used
> 1 Instance (with UKSM): ~53 GB RAM was being used
> 
> 2 Instance (without UKSM): ~125GB RAM was being used
> 2 Instance (with UKSM): ~81 GB RAM was being used
> 
> We can see that around 44 GB of RAM was saved after UKSM merged
> similar pages and all this for  a compromise of 1 CPU core on a 48
> core machine. We did not feel any noticeable degradation of
> performance because the data is refreshed by a batch job only once
> (every morning); UKSM gets in at this time and performs the same page
> merging and for the rest of day, its just read only analysis. The kind
> of queries we fire on the dataset at most scans 2-3GB of the entire
> dataset and hence the query subset spike was low as well.
> 
> We're interested in knowing if this is a plausible solution to this
> problem? Any other points/solutions that we should be considering?
> 
> On Tue, Jul 15, 2014 at 9:25 PM, Varadharajan Mukundan
> <srinathsmn at gmail.com> wrote:
>> Greetings,
>> 
>> We've a fairly large dataset (around 60GB) to be loaded and crunched in real
>> time. The kind of data operations that will be performed on this data are
>> simple read only aggregates after filtering the data.table instance based on
>> the parameters that will passed in real time. We need to have more than one
>> instance of such R process running to serve different testing environments
>> (each testing environment has fairly identical dataset but do have a *small
>> amount of changes*). As we all know, data.table loads the entire dataset
>> into memory for processing and hence we are facing a constraint on number of
>> such process that we could run on the machine. On a 128GB RAM machine, we
>> are coming up with ways in which we could reduce the memory footprint so
>> that we can try to spawn more instances and use the resources efficiently.
>> One of the approaches we tried out was memory de-duplication using UKSM
>> (http://kerneldedup.org/en/projects/uksm/introduction), given that we did
>> have few idle cpu cores. Outcome of the experiment was quite impressive,
>> considering that the effort to set it up was quite less and the entire
>> approach considers the application layer as a black box.
>> 
>> Quick snapshot of the results:
>> 1 Instance (without UKSM): ~60GB RAM was being used
>> 1 Instance (with UKSM): ~53 GB RAM was being used
>> 
>> 2 Instance (without UKSM): ~125GB RAM was being used
>> 2 Instance (with UKSM): ~81 GB RAM was being used
>> 
>> We can see that around 44 GB of RAM was saved after UKSM merged similar
>> pages and all this for  a compromise of 1 CPU core on a 48 core machine. We
>> did not feel any noticeable degradation of performance because the data is
>> refreshed by a batch job only once (every morning); UKSM gets in at this
>> time and performs the same page merging and for the rest of day, its just
>> read only analysis. The kind of queries we fire on the dataset at most scans
>> 2-3GB of the entire dataset and hence the query subset spike was low as
>> well.
>> 
>> We're interested in knowing if this is a plausible solution to this problem?
>> Any other points/solutions that we should be considering?
>> 
>> --
>> Thanks,
>> M. Varadharajan
>> 
>> ------------------------------------------------
>> 
>> "Experience is what you get when you didn't get what you wanted"
>>              -By Prof. Randy Pausch in "The Last Lecture"
>> 
>> My Journal :- www.thinkasgeek.wordpress.com
> 
> 
> 
> -- 
> Thanks,
> M. Varadharajan
> 
> ------------------------------------------------
> 
> "Experience is what you get when you didn't get what you wanted"
>              -By Prof. Randy Pausch in "The Last Lecture"
> 
> My Journal :- www.thinkasgeek.wordpress.com
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Wed Jul 16 15:51:25 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 16 Jul 2014 14:51:25 +0100
Subject: [Rd] Reducing RAM usage using UKSM
In-Reply-To: <722C34AE-0634-4D41-AFD4-4E7BD332D222@warnes.net>
References: <CACKkDGGf0XXsrqYXmKW3Lnp4dw3zzJ0SG=2_pmWo1HpD=HPY2A@mail.gmail.com>	<CACKkDGHrW5e1RF3YPJ2NSwgD=GCK6PWJwgQbyFRen_zuTREExw@mail.gmail.com>
	<722C34AE-0634-4D41-AFD4-4E7BD332D222@warnes.net>
Message-ID: <53C6835D.20300@stats.ox.ac.uk>

On 16/07/2014 14:07, Gregory R. Warnes wrote:
> Hi Varadharajan,
>
> Linux uses a copy-on-write for the memory image of forked processes.

But Linux copied it from Unix and I see no mention of Linux in the 
posting being replied to.

> Thus, you may also get significant memory savings by launching a single R process, loading your large data object, and then using fork::fork() to split off the other worker process.

Or using the more refined interface in package 'parallel' (which is 
portable, unlike package 'fork': see its CRAN check results).


> -Greg
>
> Sent from my iPad
>
>> On Jul 16, 2014, at 5:07 AM, Varadharajan Mukundan <srinathsmn at gmail.com> wrote:
>>
>> [Sending it again in plain text mode]
>>
>> Greetings,
>>
>> We've a fairly large dataset (around 60GB) to be loaded and crunched
>> in real time. The kind of data operations that will be performed on
>> this data are simple read only aggregates after filtering the
>> data.table instance based on the parameters that will passed in real
>> time. We need to have more than one instance of such R process running
>> to serve different testing environments (each testing environment has
>> fairly identical dataset but do have a *small amount of changes*). As
>> we all know, data.table loads the entire dataset into memory for
>> processing and hence we are facing a constraint on number of such
>> process that we could run on the machine. On a 128GB RAM machine, we
>> are coming up with ways in which we could reduce the memory footprint
>> so that we can try to spawn more instances and use the resources
>> efficiently. One of the approaches we tried out was memory
>> de-duplication using UKSM
>> (http://kerneldedup.org/en/projects/uksm/introduction), given that we
>> did have few idle cpu cores. Outcome of the experiment was quite
>> impressive, considering that the effort to set it up was quite less
>> and the entire approach considers the application layer as a black
>> box.
>>
>> Quick snapshot of the results:
>> 1 Instance (without UKSM): ~60GB RAM was being used
>> 1 Instance (with UKSM): ~53 GB RAM was being used
>>
>> 2 Instance (without UKSM): ~125GB RAM was being used
>> 2 Instance (with UKSM): ~81 GB RAM was being used
>>
>> We can see that around 44 GB of RAM was saved after UKSM merged
>> similar pages and all this for  a compromise of 1 CPU core on a 48
>> core machine. We did not feel any noticeable degradation of
>> performance because the data is refreshed by a batch job only once
>> (every morning); UKSM gets in at this time and performs the same page
>> merging and for the rest of day, its just read only analysis. The kind
>> of queries we fire on the dataset at most scans 2-3GB of the entire
>> dataset and hence the query subset spike was low as well.
>>
>> We're interested in knowing if this is a plausible solution to this
>> problem? Any other points/solutions that we should be considering?


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From greg at warnes.net  Wed Jul 16 16:47:31 2014
From: greg at warnes.net (Gregory R. Warnes)
Date: Wed, 16 Jul 2014 10:47:31 -0400
Subject: [Rd] Reducing RAM usage using UKSM
In-Reply-To: <53C6835D.20300@stats.ox.ac.uk>
References: <CACKkDGGf0XXsrqYXmKW3Lnp4dw3zzJ0SG=2_pmWo1HpD=HPY2A@mail.gmail.com>	<CACKkDGHrW5e1RF3YPJ2NSwgD=GCK6PWJwgQbyFRen_zuTREExw@mail.gmail.com>
	<722C34AE-0634-4D41-AFD4-4E7BD332D222@warnes.net>
	<53C6835D.20300@stats.ox.ac.uk>
Message-ID: <8C0128E8-BEFB-4812-A509-0A09844FDC66@warnes.net>


On Jul 16, 2014, at 9:51 AM, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:

> On 16/07/2014 14:07, Gregory R. Warnes wrote:
>> Hi Varadharajan,
>> 
>> Linux uses a copy-on-write for the memory image of forked processes.
> 
> But Linux copied it from Unix and I see no mention of Linux in the posting being replied to.

The reference was indirect.  The UKSM documentation indicates that it is implemented as a patch for the Linux kernel. 

>> Thus, you may also get significant memory savings by launching a single R process, loading your large data object, and then using fork::fork() to split off the other worker process.
> 
> Or using the more refined interface in package 'parallel' (which is portable, unlike package 'fork': see its CRAN check results).

Thank you for pointing out the issues with fork, I?ll take a look at what is going on with Solaris.

-Greg

> 
>> -Greg
>> 
>> Sent from my iPad
>> 
>>> On Jul 16, 2014, at 5:07 AM, Varadharajan Mukundan <srinathsmn at gmail.com> wrote:
>>> 
>>> [Sending it again in plain text mode]
>>> 
>>> Greetings,
>>> 
>>> We've a fairly large dataset (around 60GB) to be loaded and crunched
>>> in real time. The kind of data operations that will be performed on
>>> this data are simple read only aggregates after filtering the
>>> data.table instance based on the parameters that will passed in real
>>> time. We need to have more than one instance of such R process running
>>> to serve different testing environments (each testing environment has
>>> fairly identical dataset but do have a *small amount of changes*). As
>>> we all know, data.table loads the entire dataset into memory for
>>> processing and hence we are facing a constraint on number of such
>>> process that we could run on the machine. On a 128GB RAM machine, we
>>> are coming up with ways in which we could reduce the memory footprint
>>> so that we can try to spawn more instances and use the resources
>>> efficiently. One of the approaches we tried out was memory
>>> de-duplication using UKSM
>>> (http://kerneldedup.org/en/projects/uksm/introduction), given that we
>>> did have few idle cpu cores. Outcome of the experiment was quite
>>> impressive, considering that the effort to set it up was quite less
>>> and the entire approach considers the application layer as a black
>>> box.
>>> 
>>> Quick snapshot of the results:
>>> 1 Instance (without UKSM): ~60GB RAM was being used
>>> 1 Instance (with UKSM): ~53 GB RAM was being used
>>> 
>>> 2 Instance (without UKSM): ~125GB RAM was being used
>>> 2 Instance (with UKSM): ~81 GB RAM was being used
>>> 
>>> We can see that around 44 GB of RAM was saved after UKSM merged
>>> similar pages and all this for  a compromise of 1 CPU core on a 48
>>> core machine. We did not feel any noticeable degradation of
>>> performance because the data is refreshed by a batch job only once
>>> (every morning); UKSM gets in at this time and performs the same page
>>> merging and for the rest of day, its just read only analysis. The kind
>>> of queries we fire on the dataset at most scans 2-3GB of the entire
>>> dataset and hence the query subset spike was low as well.
>>> 
>>> We're interested in knowing if this is a plausible solution to this
>>> problem? Any other points/solutions that we should be considering?
> 
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From srinathsmn at gmail.com  Wed Jul 16 18:09:20 2014
From: srinathsmn at gmail.com (Varadharajan Mukundan)
Date: Wed, 16 Jul 2014 21:39:20 +0530
Subject: [Rd] Reducing RAM usage using UKSM
In-Reply-To: <53C6835D.20300@stats.ox.ac.uk>
References: <CACKkDGGf0XXsrqYXmKW3Lnp4dw3zzJ0SG=2_pmWo1HpD=HPY2A@mail.gmail.com>
	<CACKkDGHrW5e1RF3YPJ2NSwgD=GCK6PWJwgQbyFRen_zuTREExw@mail.gmail.com>
	<722C34AE-0634-4D41-AFD4-4E7BD332D222@warnes.net>
	<53C6835D.20300@stats.ox.ac.uk>
Message-ID: <CACKkDGEeZgEarjKSTBMitGZdTWjxCK+JjdDHCufsspH-fh81WA@mail.gmail.com>

Hi,

> But Linux copied it from Unix and I see no mention of Linux in the posting
> being replied to.

Yes. As Gregory mentioned, UKSM is implemented on Linux as a patch.
Sorry for the in-direct reference.


- Varadharajan


From srinathsmn at gmail.com  Wed Jul 16 18:18:05 2014
From: srinathsmn at gmail.com (Varadharajan Mukundan)
Date: Wed, 16 Jul 2014 21:48:05 +0530
Subject: [Rd] Reducing RAM usage using UKSM
In-Reply-To: <722C34AE-0634-4D41-AFD4-4E7BD332D222@warnes.net>
References: <CACKkDGGf0XXsrqYXmKW3Lnp4dw3zzJ0SG=2_pmWo1HpD=HPY2A@mail.gmail.com>
	<CACKkDGHrW5e1RF3YPJ2NSwgD=GCK6PWJwgQbyFRen_zuTREExw@mail.gmail.com>
	<722C34AE-0634-4D41-AFD4-4E7BD332D222@warnes.net>
Message-ID: <CACKkDGEd1Vw3Z0ZAC_SJGPxKvnYQzW91jeEfZ1b7Rg+p2RuFdg@mail.gmail.com>

Hi Gregory,

> Linux uses a copy-on-write for the memory image of forked processes.  Thus, you may also get significant memory savings by launching a single R process, loading your large data object, and then using fork::fork() to split off the other worker process.

True. The problem is each and every instance has its own dataset (but
they are only similar). For example, QA environment might have about
90% of the rows similar to Showcase environment. Hence we need to have
multiple instances instantiated with its own nearly similar dataset.
This in turn makes it necessary to have some kind of de-duplication
running on the entire memory image.

- Varadharajan


From dstr7320 at uni.sydney.edu.au  Fri Jul 18 06:00:08 2014
From: dstr7320 at uni.sydney.edu.au (Dario Strbenac)
Date: Fri, 18 Jul 2014 04:00:08 +0000
Subject: [Rd] capture.output on S4 slot
Message-ID: <1405659808262.54155@uni.sydney.edu.au>

Hello,

capture.output produces a different result if the S4 object was created with a constructor than if the body of the constructor is copied and pasted.

setClass("TransformParams", representation(
  transform = "function",
  otherParams = "list")
)

setGeneric("TransformParams", function(transform, ...)
{standardGeneric("TransformParams")})
setMethod("TransformParams", character(0), function()
{
  new("TransformParams", transform = function(){}, otherParams = list())
})

> capture.output(TransformParams()@transform)
[1] "function () "             "{"                       
[3] "}"                        "<environment: 0x363bd60>"
> capture.output(new("TransformParams", transform = function(){}, otherParams = list())@transform)
[1] "function(){}"

Why is the function split into three parts if a constructor is used ?

--------------------------------------
Dario Strbenac
PhD Student
University of Sydney
Camperdown NSW 2050
Australia

From Ludovic.Brossard at rennes.inra.fr  Fri Jul 18 17:29:50 2014
From: Ludovic.Brossard at rennes.inra.fr (Ludovic Brossard)
Date: Fri, 18 Jul 2014 17:29:50 +0200
Subject: [Rd] request of information about creating DLL from R to be used in
	other languages/programs
Message-ID: <002b01cfa29d$1d66df40$58349dc0$@rennes.inra.fr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140718/b3ad1503/attachment.pl>

From murdoch.duncan at gmail.com  Fri Jul 18 19:24:38 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 18 Jul 2014 12:24:38 -0500
Subject: [Rd] request of information about creating DLL from R to be
 used in other languages/programs
In-Reply-To: <002b01cfa29d$1d66df40$58349dc0$@rennes.inra.fr>
References: <002b01cfa29d$1d66df40$58349dc0$@rennes.inra.fr>
Message-ID: <53C95856.5000209@gmail.com>

On 18/07/2014, 10:29 AM, Ludovic Brossard wrote:
> Hello
> 
>  
> 
> My question is the following. I have tried to find a similar subject in
> archives but not found (perhaps bad search!) and I tried R-help and I was
> advised that R-devel would perhaps better for my question
> 
>  
> 
> So I wonder if it is possible to create a dll from a R code to use it in
> another language/program.
> 
> Indeed, one of my colleague wrote a R code combining some R functions to
> create a method of calculation.
> 
> I would want to use this method in a program coded in Delphi.
> 
>  
> 
> Is there possibilities to create a DLL from R code to be called in the
> Delphi program ?
> 
> It would allow us to avoid rewriting code and searching correspondence
> between R functions and Delphi program (or other types of tools as TPMath).
> 
> Is it possible to call a dll form R whereas R is not installed on the
> computer?
> 
>  
> 
> I hope to be clear in my demand an I hope you will be able to give me some
> indications or where to find it.
> 


Most of this is possible, but not easy.  See chapter 8 of the "Writing R
Extensions" manual.  You are essentially writing a new "front-end" to R,
and it will require R to be installed for it to work.

Many years ago I wrote instructions for using Delphi to create a DLL for
R to use, which is another approach you could try.  I've no idea how
obsolete those instructions are nowadays, but they might give you some
starting points:

http://www.stats.uwo.ca/faculty/murdoch/software/compilingDLLs/pascal.html

Duncan Murdoch

>  
> 
> Best regards
> 
>  
> 
> Ludovic Brossard
> 
>  
> 
>  
> 
>  
> 
> Ludovic BROSSARD
> 
> UMR PEGASE (Physiologie, Environnement et G?n?tique pour l?Animal et les
> Syst?mes d?Elevage)
> 
> INRA ? Agrocampus Ouest
> 
> Domaine de la Prise, 35590 Saint-Gilles, France
> 
> T?l : 33 (0)2 23 48 70 57 . Fax : 33(0)2 23 48 50 80
> 
>  <http://www.rennes.inra.fr/pegase> www.rennes.inra.fr/pegase.  
> 
>  
> 
> 
> 	[[alternative HTML version deleted]]
> 
> 
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From ludovic.brossard at rennes.inra.fr  Fri Jul 18 20:26:27 2014
From: ludovic.brossard at rennes.inra.fr (Ludovic.Brossard)
Date: Fri, 18 Jul 2014 20:26:27 +0200
Subject: [Rd] request of information about creating DLL from R to be
 used in other languages/programs
In-Reply-To: <53C95856.5000209@gmail.com>
References: <002b01cfa29d$1d66df40$58349dc0$@rennes.inra.fr>
	<53C95856.5000209@gmail.com>
Message-ID: <20140718202627.Horde.SwZE1DjKjZndQ0h0JM03PQ1@webmail.rennes.inra.fr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140718/14ec5ef8/attachment.pl>

From minshall at acm.org  Fri Jul 18 20:37:13 2014
From: minshall at acm.org (Greg Minshall)
Date: Fri, 18 Jul 2014 21:37:13 +0300
Subject: [Rd] how to list external dependencies (i.e., non-R packages)?
In-Reply-To: Your message of "Tue, 15 Jul 2014 23:25:00 -0700."
	<CABFfbXspfoXzKMVKLg9CTrWyhL49b+KY+2OoCSyFiO=+EyWDtQ@mail.gmail.com>
Message-ID: <24516.1405708633@greg-minshalls-mbp.local>

thanks for all the replies on this.

i've modified my package to include a SystemRequirements field with
(what seem to be) the appropriate entries.  (see (**) below for how one
might standardize.)
----
SystemRequirements: libImlib2, libMagickWand
----

Michael Lawrence mentioned:
> One idea is to wrap system libraries in R packages.

that's not something i would tackle.  both libraries are very large,
maybe 100-200 functions each, with lots of parameters.  and, especially
since my use, at least, uses 3 or 4 functions from each library.

a question: what happens when i submit this package to CRAN?  in
general, builds will fail, unless the build machine happens to have one
or both of the underlying libraries on it.  (and, if i made it *compile*
successfully -- fairly easy to do -- then the tests will fail or, if the
tests *don't* fail, what were they testing?? :)

cheers, Greg Minshall

-------
(**) ignore below unless you are really interested in something like
standardizing external dependencies:

if i were to do something along the lines of something suggested in 2011
----
[1] https://stat.ethz.ch/pipermail/r-devel/2011-February/059787.html
----
i'd probably start naming libraries in an R way, friendly somehow with
the ultimate source of the library.  then (obeying whatever law of
computer science it is that says all problems can be solved with an
extra level of indirection), allow a distro (if that's the term)
specific mapping file to be maintained by some R*distro person, that
would map upstream library/version-derived R way to distro
rpm/deb/whatever names/numbers.  but, that's what i'd do in some
hypothetical universe.

then, if a package developer needed an already-defined external
dependency, they would just list that in (some field in) DESCRIPTION,
with an appropriate version number.

otoh, if the package developer's dependency is *not* already defined,
the pacakge developer would need to do the R-incantation (e-mail to
[Rd], whatever) to get it defined to R, and *then* list it in
DESCRIPTION.  however, the R*distro people will then need to figure out
the mapping from that dependency to their naming/numbering scheme before
what the external dependency in *that package's* DESCRIPTION file will
help much.  (otoh, CRAN will see the dependency, and may figure out an
initial mapping, or the package developer may even submit one or more
mappings from the R-name/version to some select set of distros.)

sorry, that's fairly terse.  i'd be happy to elaborate, but i don't know
there's an audience.


From murdoch.duncan at gmail.com  Fri Jul 18 21:17:12 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 18 Jul 2014 14:17:12 -0500
Subject: [Rd] request of information about creating DLL from R to be
 used in other languages/programs
In-Reply-To: <20140718202627.Horde.SwZE1DjKjZndQ0h0JM03PQ1@webmail.rennes.inra.fr>
References: <002b01cfa29d$1d66df40$58349dc0$@rennes.inra.fr>
	<53C95856.5000209@gmail.com>
	<20140718202627.Horde.SwZE1DjKjZndQ0h0JM03PQ1@webmail.rennes.inra.fr>
Message-ID: <53C972B8.7090702@gmail.com>

On 18/07/2014, 1:26 PM, Ludovic.Brossard wrote:
> Thanks for this answer.
> If I have well understood, there is no way to create dll and call it
> without having R installed on the computer ?

R is open source so you could probably work out something, but there is
no built-in support for doing that.

Duncan Murdoch

> Sorry if I am wrong i am not a specialist.
> thanks
> 
> Ludovic Brossard
> 
>> On 18/07/2014, 10:29 AM, Ludovic Brossard wrote:
>>
>>> Hello
>>>
>>>
>>>
>>> My question is the following. I have tried to find a similar subject in
>>> archives but not found (perhaps bad search!) and I tried R-help and I was
>>> advised that R-devel would perhaps better for my question
>>>
>>>
>>>
>>> So I wonder if it is possible to create a dll from a R code to use it in
>>> another language/program.
>>>
>>> Indeed, one of my colleague wrote a R code combining some R functions to
>>> create a method of calculation.
>>>
>>> I would want to use this method in a program coded in Delphi.
>>>
>>>
>>>
>>> Is there possibilities to create a DLL from R code to be called in the
>>> Delphi program ?
>>>
>>> It would allow us to avoid rewriting code and searching correspondence
>>> between R functions and Delphi program (or other types of tools as
>>> TPMath).
>>>
>>> Is it possible to call a dll form R whereas R is not installed on the
>>> computer?
>>>
>>>
>>>
>>> I hope to be clear in my demand an I hope you will be able to give me
>>> some
>>> indications or where to find it.
>>>
>> Most of this is possible, but not easy.  See chapter 8 of the "Writing R
>> Extensions" manual.  You are essentially writing a new "front-end" to R,
>> and it will require R to be installed for it to work.
>>
>> Many years ago I wrote instructions for using Delphi to create a DLL for
>> R to use, which is another approach you could try.  I've no idea how
>> obsolete those instructions are nowadays, but they might give you some
>> starting points:
>>
>> http://www.stats.uwo.ca/faculty/murdoch/software/compilingDLLs/pascal.html
>>
>> Duncan Murdoch
>>>
>>> Best regards
>>>
>>>
>>>
>>> Ludovic Brossard
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> Ludovic BROSSARD
>>>
>>> UMR PEGASE (Physiologie, Environnement et G?n?tique pour l?Animal et les
>>> Syst?mes d?Elevage)
>>>
>>> INRA ? Agrocampus Ouest
>>>
>>> Domaine de la Prise, 35590 Saint-Gilles, France
>>>
>>> T?l : 33 (0)2 23 48 70 57 . Fax : 33(0)2 23 48 50 80
>>>
>>> <http://www.rennes.inra.fr/pegase> www.rennes.inra.fr/pegase
>>> <http://www.rennes.inra.fr/pegase>.
>>>
>>>
>>>
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>>
>>>
>>> ______________________________________________
>>> R-devel at r-project.org <mailto:R-devel at r-project.org> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>
>>  
> Ludovic Brossard
> INRA - UMR PEGASE
> Domaine de la Prise
> 35590 SAINT GILLES
> tel : 02 23 48 70 57
> fax : 02 23 48 50 80


From armgong at yahoo.com  Sat Jul 19 08:52:17 2014
From: armgong at yahoo.com (Yu Gong)
Date: Fri, 18 Jul 2014 23:52:17 -0700
Subject: [Rd] patch about mingwbuild 4.9.1
Message-ID: <1405752737.58864.YahooMailNeo@web162904.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140718/8a71ad1e/attachment.pl>

From tobias.verbeke at openanalytics.eu  Sat Jul 19 09:09:48 2014
From: tobias.verbeke at openanalytics.eu (Tobias Verbeke)
Date: Sat, 19 Jul 2014 09:09:48 +0200 (CEST)
Subject: [Rd] request of information about creating DLL from R to be
 used in other languages/programs
In-Reply-To: <53C972B8.7090702@gmail.com>
References: <002b01cfa29d$1d66df40$58349dc0$@rennes.inra.fr>
	<53C95856.5000209@gmail.com>
	<20140718202627.Horde.SwZE1DjKjZndQ0h0JM03PQ1@webmail.rennes.inra.fr>
	<53C972B8.7090702@gmail.com>
Message-ID: <870768162.75667.1405753788962.JavaMail.zimbra@openanalytics.eu>

----- Original Message -----
> From: "Duncan Murdoch" <murdoch.duncan at gmail.com>
> To: "Ludovic.Brossard" <ludovic.brossard at rennes.inra.fr>
> Cc: r-devel at r-project.org
> Sent: Friday, July 18, 2014 9:17:12 PM
> Subject: Re: [Rd] request of information about creating DLL from R to be used in other languages/programs
> 
> On 18/07/2014, 1:26 PM, Ludovic.Brossard wrote:
> > Thanks for this answer.
> > If I have well understood, there is no way to create dll and call it
> > without having R installed on the computer ?
> 
> R is open source so you could probably work out something, but there is
> no built-in support for doing that.

As a (potential) alternative solution to the problem, you may want to address R functionality over RESTful web services, using e.g. the R Service Bus.
Then your Delphi clients can all make use of a single central installation of R.

See

http://rsb.doc.openanalytics.eu/dev/

for the technical documentation and

http://rsb.doc.openanalytics.eu/dev/wsdocs/index.html

for the API overview.

Best,
Tobias

> 
> Duncan Murdoch
> 
> > Sorry if I am wrong i am not a specialist.
> > thanks
> > 
> > Ludovic Brossard
> > 
> >> On 18/07/2014, 10:29 AM, Ludovic Brossard wrote:
> >>
> >>> Hello
> >>>
> >>>
> >>>
> >>> My question is the following. I have tried to find a similar subject in
> >>> archives but not found (perhaps bad search!) and I tried R-help and I was
> >>> advised that R-devel would perhaps better for my question
> >>>
> >>>
> >>>
> >>> So I wonder if it is possible to create a dll from a R code to use it in
> >>> another language/program.
> >>>
> >>> Indeed, one of my colleague wrote a R code combining some R functions to
> >>> create a method of calculation.
> >>>
> >>> I would want to use this method in a program coded in Delphi.
> >>>
> >>>
> >>>
> >>> Is there possibilities to create a DLL from R code to be called in the
> >>> Delphi program ?
> >>>
> >>> It would allow us to avoid rewriting code and searching correspondence
> >>> between R functions and Delphi program (or other types of tools as
> >>> TPMath).
> >>>
> >>> Is it possible to call a dll form R whereas R is not installed on the
> >>> computer?
> >>>
> >>>
> >>>
> >>> I hope to be clear in my demand an I hope you will be able to give me
> >>> some
> >>> indications or where to find it.
> >>>
> >> Most of this is possible, but not easy.  See chapter 8 of the "Writing R
> >> Extensions" manual.  You are essentially writing a new "front-end" to R,
> >> and it will require R to be installed for it to work.
> >>
> >> Many years ago I wrote instructions for using Delphi to create a DLL for
> >> R to use, which is another approach you could try.  I've no idea how
> >> obsolete those instructions are nowadays, but they might give you some
> >> starting points:
> >>
> >> http://www.stats.uwo.ca/faculty/murdoch/software/compilingDLLs/pascal.html
> >>
> >> Duncan Murdoch
> >>>
> >>> Best regards
> >>>
> >>>
> >>>
> >>> Ludovic Brossard
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>> Ludovic BROSSARD
> >>>
> >>> UMR PEGASE (Physiologie, Environnement et G?n?tique pour l?Animal et les
> >>> Syst?mes d?Elevage)
> >>>
> >>> INRA ? Agrocampus Ouest
> >>>
> >>> Domaine de la Prise, 35590 Saint-Gilles, France
> >>>
> >>> T?l : 33 (0)2 23 48 70 57 . Fax : 33(0)2 23 48 50 80
> >>>
> >>> <http://www.rennes.inra.fr/pegase> www.rennes.inra.fr/pegase
> >>> <http://www.rennes.inra.fr/pegase>.
> >>>
> >>>
> >>>
> >>>
> >>>         [[alternative HTML version deleted]]
> >>>
> >>>
> >>>
> >>> ______________________________________________
> >>> R-devel at r-project.org <mailto:R-devel at r-project.org> mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-devel
> >>>
> >>
> >>  
> > Ludovic Brossard
> > INRA - UMR PEGASE
> > Domaine de la Prise
> > 35590 SAINT GILLES
> > tel : 02 23 48 70 57
> > fax : 02 23 48 50 80
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 


From ripley at stats.ox.ac.uk  Sun Jul 20 14:35:00 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 20 Jul 2014 13:35:00 +0100
Subject: [Rd] patch about mingwbuild 4.9.1
In-Reply-To: <1405752737.58864.YahooMailNeo@web162904.mail.bf1.yahoo.com>
References: <1405752737.58864.YahooMailNeo@web162904.mail.bf1.yahoo.com>
Message-ID: <53CBB774.3090407@stats.ox.ac.uk>

I think you used the wrong code model: these come from defaulting to the 
medium-code model intended for x64 Cygwin -- see 
https://gcc.gnu.org/ml/gcc-patches/2013-03/msg00858.html .

Also, please follow the posting guide and do not send HTML: your message 
arrived rather garbled.

I've added a more general way to achieve this in MkRules.dist in R-devel 
and R-patched.

On 19/07/2014 07:52, Yu Gong wrote:
> recently I used gcc 4.9.1 (http://sourceforge.net/projects/mingw-w64/files/Toolchains targetting Win64/Personal Builds/mingw-builds/)on windows to build R,but failed when link R.dll ,it report linker status 5.?
> after some digging, I found when use gcc 4.9.1 64 bit on windows there are lots of .refptr.*(* is r function name) in R.def, which lead build fail.so I add a simple path to src/gnuwin32/Makefile:
>
> Index: Makefile
> ===================================================================
> --- Makefile(?????? 66200)
> +++ Makefile(????????????)
> @@ -148,7 +148,7 @@
> ? ifeq "$(WIN)" "64"
> ? R.dll: $(OBJS) $(OBJS-EXTRA) $(MAINLIBS) $(EXTRALIBS) dllversion.o
> ? @$(ECHO) EXPORTS > R.def
> -@$(NM) $^ | $(SED) -n ? $(SYMPAT) | LC_COLLATE=C $(SORT) | uniq > R0.def
> +@$(NM) $^ | $(SED) -n ? $(SYMPAT) | LC_COLLATE=C $(SORT) | uniq |$(SED) '/.refptr./d' > R0.def
> ? @$(SED) -e's/@.*//' Rdll.hide | LC_COLLATE=C $(SORT) > R1.def
> ? @LC_COLLATE=C comm -23 R0.def R1.def >> R.def
> ? $(DLL) -shared $(DLLFLAGS) $($*-DLLFLAGS) -o $@ R.def $^ $($*-DLLLIBS) $(DLLLIBS)
> @@ -156,7 +156,7 @@
> ? else
> ? R.dll: $(OBJS) $(OBJS-EXTRA) $(MAINLIBS) $(EXTRALIBS) dllversion.o
> ? @$(ECHO) EXPORTS > R.def
> -@$(NM) $^ | $(SED) -n ? $(SYMPAT) | LC_COLLATE=C $(SORT) | uniq > R0.def
> +@$(NM) $^ | $(SED) -n ? $(SYMPAT) | LC_COLLATE=C $(SORT) | uniq |$(SED) '/.refptr./d' > R0.def
> ? @LC_COLLATE=C $(SORT) Rdll.hide > R1.def
> ? @LC_COLLATE=C comm -23 R0.def R1.def >> R.def
> ? $(DLL) -shared $(DLLFLAGS) $($*-DLLFLAGS) -o $@ R.def $^ $($*-DLLLIBS) $(DLLLIBS)
>
>
> Yu Gong
> 2014/07/18
> 	[[alternative HTML version deleted]]
>
>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From armgong at yahoo.com  Sun Jul 20 15:53:59 2014
From: armgong at yahoo.com (Yu Gong)
Date: Sun, 20 Jul 2014 06:53:59 -0700
Subject: [Rd] patch about mingwbuild 4.9.1
In-Reply-To: <53CBB774.3090407@stats.ox.ac.uk>
References: <1405752737.58864.YahooMailNeo@web162904.mail.bf1.yahoo.com>
	<53CBB774.3090407@stats.ox.ac.uk> 
Message-ID: <1405864439.42341.YahooMailNeo@web162906.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140720/9b3c02e4/attachment.pl>

From dstr7320 at uni.sydney.edu.au  Mon Jul 21 05:00:18 2014
From: dstr7320 at uni.sydney.edu.au (Dario Strbenac)
Date: Mon, 21 Jul 2014 03:00:18 +0000
Subject: [Rd] Unlisting Nested Lists of Factors
Message-ID: <1405911617133.46162@uni.sydney.edu.au>

Hello,

I rediscovered an old bug https://bugs.r-project.org/bugzilla/show_bug.cgi?id=12572 It was reported six years ago, but hasn't been accepted or rejected. Is there a plan to address it soon ?

> sessionInfo()
R version 3.1.1 (2014-07-10)
Platform: x86_64-unknown-linux-gnu (64-bit)

--------------------------------------
Dario Strbenac
PhD Student
University of Sydney
Camperdown NSW 2050
Australia

From jasondonnald4 at gmail.com  Mon Jul 21 05:08:27 2014
From: jasondonnald4 at gmail.com (Jason Donnald)
Date: Sun, 20 Jul 2014 23:08:27 -0400
Subject: [Rd] Displaying database records returned from postgresql to R
	through Java
Message-ID: <CAPdWG3t82QCGi7zkGF7Dw2Wp2cpa7ckDQCHRPF5cOzu6Z0H-Wg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140720/4143b05e/attachment.pl>

From chris.wallace at cimr.cam.ac.uk  Mon Jul 21 15:58:11 2014
From: chris.wallace at cimr.cam.ac.uk (Chris Wallace)
Date: Mon, 21 Jul 2014 14:58:11 +0100
Subject: [Rd] Multiple versions of data in a package
Message-ID: <53CD1C73.2000405@cimr.cam.ac.uk>

Dear R-devel,

I am writing for help on how I should include parallel sets of data in 
my package.

Brief summary: I am new to using data within packages.  I want a user to 
be able to specify one of two alternative versions of within-package 
datasets to use, and I want to load just that one.  I have a solution 
that works, but it doesn't seem as simple as it should be from a user's 
point of view, nor does it seem robust to errors.  What should I do better?

More details:

My package is a relatively simple set of plotting functions, that plot 
user supplied data across a number of SNPs from their experiment, and 
annotates the plot using some external data.  For example, the user supplies

SNP value
A 2
B 1.2
C 7.8

etc

The external datasets will allow me to look up the location of SNPs A, 
B, C, ... on the human genome so the user's data can be plotted in 
relation to that map, to annotate the position of local genes etc.  My 
problem is that there is no single map of the genome, so I can prepare 
external data with the positions of SNPs and genes in version 36 or 37.  
To allow this, my data/ directory contains

snps_37.Rdata, snps_36.RData, genes_37.RData, genes_36.RData

the objects in these files are called, respectively,

snps, snps, genes, genes

Therefore, a user types

 > data(snps_37)
 > data(genes_37)

or

 > data(snps_36)
 > data(genes_36)

to set up build 36 or build 37 and then my functions need only use the 
object names snps or genes, and all is fine.  But, this doesn't seem 
like a good solution.  What if a user has snps_36 and genes_37 loaded?  
What if they have an object named snps in their working environment 
called snps?  Alternatively, I could load all datasets and they could 
pass an argument "build" to my functions, but these are large datasets, 
and I don't want to use time and memory loading both versions when I 
expect any individual user to pick a single version and stick with it.

Can anyone suggest how else I might proceed?

Thank you,

Chris




-- 
JDRF/WT Diabetes & Inflammation Laboratory (DIL),
NIHR Cambridge Biomedical Research Centre,
Cambridge Institute for Medical Research,
University of Cambridge

Website:http://www-gene.cimr.cam.ac.uk/staff/wallace
DIL Website:http://www-gene.cimr.cam.ac.uk


From mick.jordan at oracle.com  Mon Jul 21 17:07:25 2014
From: mick.jordan at oracle.com (Mick Jordan)
Date: Mon, 21 Jul 2014 08:07:25 -0700
Subject: [Rd] Question on Code snippet semantics
Message-ID: <53CD2CAD.6010503@oracle.com>

I came across this code in library.R

package <- as.character(substitute(package))

where package is the first argument to the "library" function.

I've been racking my brains to understand why this is not just an 
elaborate (and ineffcient) way to write:

package <- "package"

E.g.

 > package <- as.character(substitute(package))
 > package
[1] "package"
 >

Thanks
Mick Jordan


From marc_schwartz at me.com  Mon Jul 21 17:20:42 2014
From: marc_schwartz at me.com (Marc Schwartz)
Date: Mon, 21 Jul 2014 10:20:42 -0500
Subject: [Rd] Question on Code snippet semantics
In-Reply-To: <53CD2CAD.6010503@oracle.com>
References: <53CD2CAD.6010503@oracle.com>
Message-ID: <F0619D90-787A-435D-8192-726A64DF2003@me.com>


On Jul 21, 2014, at 10:07 AM, Mick Jordan <mick.jordan at oracle.com> wrote:

> I came across this code in library.R
> 
> package <- as.character(substitute(package))
> 
> where package is the first argument to the "library" function.
> 
> I've been racking my brains to understand why this is not just an elaborate (and ineffcient) way to write:
> 
> package <- "package"
> 
> E.g.
> 
> > package <- as.character(substitute(package))
> > package
> [1] "package"
> >
> 
> Thanks
> Mick Jordan


Frequently used in a function body, where the function author wants the argument to be passed as an object name, rather than a character vector, or perhaps both, as is the case with library() and require().

For example:

test <- function(x) {as.character(substitute(x))}

# Quoted, passing "MyPackage" as a character vector
> test("MyPackage")
[1] "MyPackage"


# Not quoted, passing the object MyPackage
> test(MyPackage)
[1] "MyPackage"


In both cases, the argument passed as 'x' can then be used within the function as a character vector, rather than as the object itself.

Regards,

Marc Schwartz


From wdunlap at tibco.com  Mon Jul 21 17:20:46 2014
From: wdunlap at tibco.com (William Dunlap)
Date: Mon, 21 Jul 2014 08:20:46 -0700
Subject: [Rd] Question on Code snippet semantics
In-Reply-To: <53CD2CAD.6010503@oracle.com>
References: <53CD2CAD.6010503@oracle.com>
Message-ID: <CAF8bMcaivRtofk+UFB+0w6FCijKwn5wZZvMbczK2PpDaZiQndw@mail.gmail.com>

subsitute(expr), with only one argument, is only useful inside of a
function and then only when the expression, expr, involves an argument
to the function.  Then the unevaluated actual arguments to the
function are substituted into the [unevaluated] expression.

E.g.,
   f <- function(x, y=stop("y is required"), z=log(-1)) {
      substitute(y + z)
   }
   f(1)
   # stop("y is required") + log(-1)
   f(1,sqrt(-1),log(1:10))
   # sqrt(-1) + log(1:10)

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Mon, Jul 21, 2014 at 8:07 AM, Mick Jordan <mick.jordan at oracle.com> wrote:
> I came across this code in library.R
>
> package <- as.character(substitute(package))
>
> where package is the first argument to the "library" function.
>
> I've been racking my brains to understand why this is not just an elaborate
> (and ineffcient) way to write:
>
> package <- "package"
>
> E.g.
>
>> package <- as.character(substitute(package))
>> package
> [1] "package"
>>
>
> Thanks
> Mick Jordan
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From emiliawxr at gmail.com  Mon Jul 21 18:10:01 2014
From: emiliawxr at gmail.com (yiqun yang)
Date: Mon, 21 Jul 2014 11:10:01 -0500
Subject: [Rd] create R package include Fortran source code.
Message-ID: <CAOrAJHdo7jcKfP1cauZYx+JmiSsZ1sU1YcDuFX4sJVF8nCqGVA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140721/3a958506/attachment.pl>

From boccigionata at gmail.com  Mon Jul 21 18:17:17 2014
From: boccigionata at gmail.com (Gionata Bocci)
Date: Mon, 21 Jul 2014 18:17:17 +0200
Subject: [Rd] Licence for datasets in a R-package
Message-ID: <CADGFu49zvE-ynWJ1+3+Zemo7DFjci+8apsx5b2aXfwt1tb-Byw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140721/2e9c21f3/attachment.pl>

From murdoch.duncan at gmail.com  Mon Jul 21 18:42:22 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Mon, 21 Jul 2014 12:42:22 -0400
Subject: [Rd] create R package include Fortran source code.
In-Reply-To: <CAOrAJHdo7jcKfP1cauZYx+JmiSsZ1sU1YcDuFX4sJVF8nCqGVA@mail.gmail.com>
References: <CAOrAJHdo7jcKfP1cauZYx+JmiSsZ1sU1YcDuFX4sJVF8nCqGVA@mail.gmail.com>
Message-ID: <53CD42EE.3030204@gmail.com>

On 21/07/2014 12:10 PM, yiqun yang wrote:
> Hello, all
>
> I am building a R package using Fortran source code. The Fortran code is a
> subroutine. I can use "R CMD SHLIB  bar.f -o bar.o" to create the shared
> library. For the R package, I put the fortran file in the src/ and I use R
> code as follows:
>
> ".First.lib"<-function(libname,pkgname){library.dynam("barpkg",pkgname,libname)}
> barfun<-function(n,x){
>    .Fortran("bar",as.integer(n),as.double(x))
> }
> package.skeleton(name="barpkg",list=c("barfun"))
> --------------------------------------------------------------------------
> I can build with "R CMD build barpkg", when I check the package with "R CMD
> check barpkg", there is an error,
>
> ** R
> ** preparing package for lazy loading
> ** help
> *** installing help indices
> ** building package indices
> ** testing if installed package can be loaded
> *** arch - i386
> Error in inDL(x, as.logical(local), as.logical(now), ...) :
>    unable to load shared object
> 'c:/Users/emily/Desktop/rtest/barpkg.Rcheck/barpkg/libs/i386/bar.dll':
>    LoadLibrary failure:  %1 is not a valid Win32 application.

You will see more information in the files in the barpkg.Rcheck 
directory created during the check.  You can see some of those messages 
on the screen if you do an explicit INSTALL.

I'd guess that the compile failed, but can't guess why.

Duncan Murdoch


>
> Error: loading failed
> Execution halted
> *** arch - x64
> ERROR: loading failed for 'i386'
>
> I don't know how to fix this error. Can anyone help me with this?
>
> Thanks.
> -Emily
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch.duncan at gmail.com  Mon Jul 21 18:49:17 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Mon, 21 Jul 2014 12:49:17 -0400
Subject: [Rd] Licence for datasets in a R-package
In-Reply-To: <CADGFu49zvE-ynWJ1+3+Zemo7DFjci+8apsx5b2aXfwt1tb-Byw@mail.gmail.com>
References: <CADGFu49zvE-ynWJ1+3+Zemo7DFjci+8apsx5b2aXfwt1tb-Byw@mail.gmail.com>
Message-ID: <53CD448D.6050502@gmail.com>

On 21/07/2014 12:17 PM, Gionata Bocci wrote:
>   Dear List,
>
>     I am building a R package which collects ecological data about plant
> species from both remote (web) databases and locally stored rda files
> (datasets): these "local rda files" are derived from publicly available
> databases for which no "official" licenses are provided; I was told by the
> creators of these databases that users can use such data provided that the
> correct bibliographic reference is always used (the package is already
> reminding the users about the correct citation(s) to use). I thought a
> CC-by licence would suit this need, thus I am posting here to ask if:
>
>       1) It is possible to distribute these datasets as rda files within my
> package (which will be released as GPL=>2, thus two different licences will
> be needed for the package)
>       2) If a CC-by licence for these datasets could be included in the
> DESCRIPTION file, using something like "License: CC-by datasets.rda" for
> each rda file (this is based on this stackoverflow thread
> <http://stackoverflow.com/a/4317300>, but CC-by is not among the LICENSES
> cited in http://www.r-project.org/Licenses/): I've already tried to do
> this, but, as a consequence, the "R check" raises a warning.
>
>     I am aware that this is more a licensing issue then a programming
> problem, but I went through the R FAQ, "Writing R Extensions" and R-devel
> but was not able to sort this problem out (so, please ignore this post if
> you find it OT).
>     I hope the question is not too messy (this is my first time on R-devel).
>     Many thanks for any help you may provide,

If you are not distributing the package to anyone else, you can ignore 
the warning about the bad license field.

If you plan to distribute it on a public repository, you should ask the 
policies of the repository to find out what to do about this. CRAN 
policies are listed at 
http://cran.r-project.org/web/packages/policies.html.  There's a link 
from there to the list of acceptable licenses, and it includes some CC 
licenses.

If some parts of the package are licensed one way and others are 
licensed in another way, you'll probably need a COPYRIGHTS file to 
describe it.

Other repositories (e.g. Bioconductor, Github) presumably have their own 
policies on this, but I don't know where to find those.

Duncan Murdoch


From csardi.gabor at gmail.com  Mon Jul 21 18:54:49 2014
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Mon, 21 Jul 2014 12:54:49 -0400
Subject: [Rd] Licence for datasets in a R-package
In-Reply-To: <53CD448D.6050502@gmail.com>
References: <CADGFu49zvE-ynWJ1+3+Zemo7DFjci+8apsx5b2aXfwt1tb-Byw@mail.gmail.com>
	<53CD448D.6050502@gmail.com>
Message-ID: <CABtg=KmwWFVBLpR3rpdQv=TcQ5m8VaK-JzMYk6cdG5cgtBAJiw@mail.gmail.com>

On Mon, Jul 21, 2014 at 12:49 PM, Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
[...]
> If you are not distributing the package to anyone else, you can ignore the
> warning about the bad license field.
>
> If you plan to distribute it on a public repository, you should ask the
> policies of the repository to find out what to do about this. CRAN policies
> are listed at http://cran.r-project.org/web/packages/policies.html.  There's
> a link from there to the list of acceptable licenses, and it includes some
> CC licenses.
>
> If some parts of the package are licensed one way and others are licensed in
> another way, you'll probably need a COPYRIGHTS file to describe it.

In practice, CRAN maintainers do not allow multiple licenses for parts
of the same package. At least they did not for my package a couple of
months ago.

> Other repositories (e.g. Bioconductor, Github) presumably have their own
> policies on this, but I don't know where to find those.

At Github, they do not care, you can do whatever you want (as long as
it is legal, I guess).

Gabor

[...]


From ggrothendieck at gmail.com  Mon Jul 21 19:56:10 2014
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 21 Jul 2014 13:56:10 -0400
Subject: [Rd] Licence for datasets in a R-package
In-Reply-To: <CABtg=KmwWFVBLpR3rpdQv=TcQ5m8VaK-JzMYk6cdG5cgtBAJiw@mail.gmail.com>
References: <CADGFu49zvE-ynWJ1+3+Zemo7DFjci+8apsx5b2aXfwt1tb-Byw@mail.gmail.com>
	<53CD448D.6050502@gmail.com>
	<CABtg=KmwWFVBLpR3rpdQv=TcQ5m8VaK-JzMYk6cdG5cgtBAJiw@mail.gmail.com>
Message-ID: <CAP01uR=CAuDOPZgNo=PvREB8PW-O0oUDqWznz1BJkyvHoOY+xA@mail.gmail.com>

On Mon, Jul 21, 2014 at 12:54 PM, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> In practice, CRAN maintainers do not allow multiple licenses for parts
> of the same package. At least they did not for my package a couple of
> months ago.
>

If that is the case then you could put your data files in a separate
package from the code with one depending on the other.

-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From csardi.gabor at gmail.com  Mon Jul 21 20:04:26 2014
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Mon, 21 Jul 2014 14:04:26 -0400
Subject: [Rd] Licence for datasets in a R-package
In-Reply-To: <CAP01uR=CAuDOPZgNo=PvREB8PW-O0oUDqWznz1BJkyvHoOY+xA@mail.gmail.com>
References: <CADGFu49zvE-ynWJ1+3+Zemo7DFjci+8apsx5b2aXfwt1tb-Byw@mail.gmail.com>
	<53CD448D.6050502@gmail.com>
	<CABtg=KmwWFVBLpR3rpdQv=TcQ5m8VaK-JzMYk6cdG5cgtBAJiw@mail.gmail.com>
	<CAP01uR=CAuDOPZgNo=PvREB8PW-O0oUDqWznz1BJkyvHoOY+xA@mail.gmail.com>
Message-ID: <CABtg=Km8=-ZFBhi1qMZzsucjFum9U9_k3HhkEAYspD0ezab+Zg@mail.gmail.com>

On Mon, Jul 21, 2014 at 1:56 PM, Gabor Grothendieck
<ggrothendieck at gmail.com> wrote:
> On Mon, Jul 21, 2014 at 12:54 PM, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>> In practice, CRAN maintainers do not allow multiple licenses for parts
>> of the same package. At least they did not for my package a couple of
>> months ago.
>>
>
> If that is the case then you could put your data files in a separate
> package from the code with one depending on the other.

Yes, and sometimes this even makes sense, as the data does not change often.

This was, however, a package with several data sets, accompanying a
book. So this would have been quite cumbersome.

Gabor

>
> --
> Statistics & Software Consulting
> GKX Group, GKX Associates Inc.
> tel: 1-877-GKX-GROUP
> email: ggrothendieck at gmail.com


From emiliawxr at gmail.com  Mon Jul 21 21:44:37 2014
From: emiliawxr at gmail.com (yiqun yang)
Date: Mon, 21 Jul 2014 14:44:37 -0500
Subject: [Rd] create R package include Fortran source code.
In-Reply-To: <53CD42EE.3030204@gmail.com>
References: <CAOrAJHdo7jcKfP1cauZYx+JmiSsZ1sU1YcDuFX4sJVF8nCqGVA@mail.gmail.com>
	<53CD42EE.3030204@gmail.com>
Message-ID: <CAOrAJHeBs7vAU2Mr2U5xr9a1VgmKQ1V4k41TEZJq2+R=d5sNiw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140721/0ca050bb/attachment.pl>

From ccberry at ucsd.edu  Tue Jul 22 06:13:06 2014
From: ccberry at ucsd.edu (Charles Berry)
Date: Tue, 22 Jul 2014 04:13:06 +0000
Subject: [Rd] create R package include Fortran source code.
References: <CAOrAJHdo7jcKfP1cauZYx+JmiSsZ1sU1YcDuFX4sJVF8nCqGVA@mail.gmail.com>
	<53CD42EE.3030204@gmail.com>
	<CAOrAJHeBs7vAU2Mr2U5xr9a1VgmKQ1V4k41TEZJq2+R=d5sNiw@mail.gmail.com>
Message-ID: <loom.20140722T055145-729@post.gmane.org>

yiqun yang <emiliawxr <at> gmail.com> writes:

> 
> Thank you for your reply.
> First I try "R CMD INSTALL barpkg", then it gives similiar things:
>
-------------------------------------------------------------

[deleted]

-------------------------------------------------------------
> 2) I don't know how to check the "compile" problem. I just try to
> "dyn.load" the shared object in /src-i386 and /src-x64 in the package, and
> they both work well.
> 
> I am guessing there is some error in the R language.
> ".First.lib"<-function(libname,pkgname){library.dynam("barpkg",pkgname,
> libname)}
> barfun<-function(n,x){
>    .Fortran("bar",as.integer(n),as.double(x))
> }
> package.skeleton(name="barpkg",list=c("barfun"))
> 
> I am not sure about this part. Can anyone give me some suggestion?



?.First.lib

refers to the base-defunct {base} help page which says:

[...]

# Defunct in 2.14.0
.First.lib(lib, pkg)

[...]
Details

Some of these have stubs which report that they are defunct, but most have
been removed completely (apart from being documented here).
[...]

====

So, don't use .First.lib.

Try a useDynLib directive in your NAMESPACE file.

You probably need to spend some time pondering 

  Writing R Extensions

especially section

1.5.4 useDynLib

HTH,

Chuck


From Thierry.ONKELINX at inbo.be  Tue Jul 22 09:40:19 2014
From: Thierry.ONKELINX at inbo.be (ONKELINX, Thierry)
Date: Tue, 22 Jul 2014 07:40:19 +0000
Subject: [Rd] Multiple versions of data in a package
In-Reply-To: <53CD1C73.2000405@cimr.cam.ac.uk>
References: <53CD1C73.2000405@cimr.cam.ac.uk>
Message-ID: <AA818EAD2576BC488B4F623941DA7427F3AC31CB@inbomail.inbo.be>

Dear Chris,

Add both snps_36 and genes_36 to the same rda file. Then you should both load with a single data() command.

However make sure to document all functions well. Then it is up to the user to use the functions correctly. You can implement some controls to give a warning when incorrect data is provided. See fortunes::fortune(15) as well.

Best regards,

ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and Forest
team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
Kliniekstraat 25
1070 Anderlecht
Belgium
+ 32 2 525 02 51
+ 32 54 43 61 85
Thierry.Onkelinx at inbo.be
www.inbo.be

To call in the statistician after the experiment is done may be no more than asking him to perform a post-mortem examination: he may be able to say what the experiment died of.
~ Sir Ronald Aylmer Fisher

The plural of anecdote is not data.
~ Roger Brinner

The combination of some data and an aching desire for an answer does not ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey


-----Oorspronkelijk bericht-----
Van: r-devel-bounces at r-project.org [mailto:r-devel-bounces at r-project.org] Namens Chris Wallace
Verzonden: maandag 21 juli 2014 15:58
Aan: r-devel at r-project.org
Onderwerp: [Rd] Multiple versions of data in a package

Dear R-devel,

I am writing for help on how I should include parallel sets of data in my package.

Brief summary: I am new to using data within packages.  I want a user to be able to specify one of two alternative versions of within-package datasets to use, and I want to load just that one.  I have a solution that works, but it doesn't seem as simple as it should be from a user's point of view, nor does it seem robust to errors.  What should I do better?

More details:

My package is a relatively simple set of plotting functions, that plot user supplied data across a number of SNPs from their experiment, and annotates the plot using some external data.  For example, the user supplies

SNP value
A 2
B 1.2
C 7.8

etc

The external datasets will allow me to look up the location of SNPs A, B, C, ... on the human genome so the user's data can be plotted in relation to that map, to annotate the position of local genes etc.  My problem is that there is no single map of the genome, so I can prepare external data with the positions of SNPs and genes in version 36 or 37.
To allow this, my data/ directory contains

snps_37.Rdata, snps_36.RData, genes_37.RData, genes_36.RData

the objects in these files are called, respectively,

snps, snps, genes, genes

Therefore, a user types

 > data(snps_37)
 > data(genes_37)

or

 > data(snps_36)
 > data(genes_36)

to set up build 36 or build 37 and then my functions need only use the object names snps or genes, and all is fine.  But, this doesn't seem like a good solution.  What if a user has snps_36 and genes_37 loaded?
What if they have an object named snps in their working environment called snps?  Alternatively, I could load all datasets and they could pass an argument "build" to my functions, but these are large datasets, and I don't want to use time and memory loading both versions when I expect any individual user to pick a single version and stick with it.

Can anyone suggest how else I might proceed?

Thank you,

Chris




--
JDRF/WT Diabetes & Inflammation Laboratory (DIL), NIHR Cambridge Biomedical Research Centre, Cambridge Institute for Medical Research, University of Cambridge

Website:http://www-gene.cimr.cam.ac.uk/staff/wallace
DIL Website:http://www-gene.cimr.cam.ac.uk

______________________________________________
R-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel
* * * * * * * * * * * * * D I S C L A I M E R * * * * * * * * * * * * *
Dit bericht en eventuele bijlagen geven enkel de visie van de schrijver weer en binden het INBO onder geen enkel beding, zolang dit bericht niet bevestigd is door een geldig ondertekend document.
The views expressed in this message and any annex are purely those of the writer and may not be regarded as stating an official position of INBO, as long as the message is not confirmed by a duly signed document.


From boccigionata at gmail.com  Tue Jul 22 09:46:26 2014
From: boccigionata at gmail.com (Gionata Bocci)
Date: Tue, 22 Jul 2014 09:46:26 +0200
Subject: [Rd] Licence for datasets in a R-package
In-Reply-To: <CABtg=Km8=-ZFBhi1qMZzsucjFum9U9_k3HhkEAYspD0ezab+Zg@mail.gmail.com>
References: <CADGFu49zvE-ynWJ1+3+Zemo7DFjci+8apsx5b2aXfwt1tb-Byw@mail.gmail.com>
	<53CD448D.6050502@gmail.com>
	<CABtg=KmwWFVBLpR3rpdQv=TcQ5m8VaK-JzMYk6cdG5cgtBAJiw@mail.gmail.com>
	<CAP01uR=CAuDOPZgNo=PvREB8PW-O0oUDqWznz1BJkyvHoOY+xA@mail.gmail.com>
	<CABtg=Km8=-ZFBhi1qMZzsucjFum9U9_k3HhkEAYspD0ezab+Zg@mail.gmail.com>
Message-ID: <CADGFu4_siRgo1zipNibqpuovDMeeAv7P=Wm_fg=832OyqmhWhw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140722/0f9eb1af/attachment.pl>

From spencer.graves at structuremonitoring.com  Tue Jul 22 11:10:14 2014
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Tue, 22 Jul 2014 02:10:14 -0700
Subject: [Rd] Licence for datasets in a R-package
In-Reply-To: <CADGFu4_siRgo1zipNibqpuovDMeeAv7P=Wm_fg=832OyqmhWhw@mail.gmail.com>
References: <CADGFu49zvE-ynWJ1+3+Zemo7DFjci+8apsx5b2aXfwt1tb-Byw@mail.gmail.com>	<53CD448D.6050502@gmail.com>	<CABtg=KmwWFVBLpR3rpdQv=TcQ5m8VaK-JzMYk6cdG5cgtBAJiw@mail.gmail.com>	<CAP01uR=CAuDOPZgNo=PvREB8PW-O0oUDqWznz1BJkyvHoOY+xA@mail.gmail.com>	<CABtg=Km8=-ZFBhi1qMZzsucjFum9U9_k3HhkEAYspD0ezab+Zg@mail.gmail.com>
	<CADGFu4_siRgo1zipNibqpuovDMeeAv7P=Wm_fg=832OyqmhWhw@mail.gmail.com>
Message-ID: <53CE2A76.8020207@structuremonitoring.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140722/750ab0fc/attachment.pl>

From alexander.braumann at tuwien.ac.at  Tue Jul 22 15:57:39 2014
From: alexander.braumann at tuwien.ac.at (Alexander Braumann)
Date: Tue, 22 Jul 2014 15:57:39 +0200
Subject: [Rd] Problems with building a private R-package with Fortran source
 under Windows
Message-ID: <53CE6DD3.7060901@tuwien.ac.at>

Hi,

I recently managed to port the slicot library (http://slicot.org/) to R. 
I created a new package, put the fortran libs into the src directory 
together with a Makevars file that include the line:

PKG_LIBS=$(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)

R CMD check did run through on my ubuntu 14.04 64bit machine with 1 
warning and 4 notes.

Now I wanted to create a Windows version of that package by simply 
sending it to http://win-builder.r-project.org/ and because I am not 
capable of compiling on Windows.

As a respone I got the following error message:

  installing *source* package 'slicot' ...
** libs

*** arch - i386
gfortran      -O3  -mtune=core2 -c AB01MD.f -o AB01MD.o
gfortran      -O3  -mtune=core2 -c AB01ND.f -o AB01ND.o
gfortran      -O3  -mtune=core2 -c AB01OD.f -o AB01OD.o
.
.
. (truncated)
.
gfortran      -O3  -mtune=core2 -c delctg.f -o delctg.o
gfortran      -O3  -mtune=core2 -c select.f -o select.o
gcc -shared -s -static-libgcc -o slicot.dll tmp.def AB01MD.o AB01ND.o AB01OD.o AB04MD.o AB05MD.o AB05ND.o
AB05OD.o AB05PD.o AB05QD.o AB05RD.o AB05SD.o AB07MD.o AB07ND.o AB08MD.o AB08MZ.o AB08ND.o AB08NX.o AB08NZ.o
AB09AD.o AB09AX.o AB09BD.o AB09BX.o AB09CD.o AB09CX.o AB09DD.o AB09ED.o AB09FD.o AB09GD.o AB09HD.o AB09HX.o
AB09HY.o AB09ID.o AB09IX.o AB09IY.o AB09JD.o AB09JV.o AB09JW.o AB09JX.o AB09KD.o AB09KX.o AB09MD.o AB09ND.o AB13AD.o
AB13AX.o AB13BD.o AB13CD.o AB13DD.o AB13DX.o AB13ED.o AB13FD.o AB13ID.o AB13MD.o AB8NXZ.o AG07BD.o AG08BD.o AG08BY.o
AG08BZ.o AG8BYZ.o BB01AD.o BB02AD.o BB03AD.o BB04AD.o BD01AD.o BD02AD.o DE01OD.o DE01PD.o DF01MD.o DG01MD.o DG01ND.o
DG01NY.o DG01OD.o DK01MD.o FB01QD.o FB01RD.o FB01SD.o FB01TD.o FB01VD.o FD01AD.o IB01AD.o IB01BD.o IB01CD.o IB01MD.o
IB01MY.o IB01ND.o IB01OD.o IB01OY.o IB01PD.o IB01PX.o IB01PY.o IB01QD.o IB01RD.o IB03AD.o IB03BD.o MA01AD.o MA01BD.o
MA01BZ.o MA01CD.o MA02AD.o MA02BD.o MA02BZ.o MA02CD.o MA02CZ.o MA02DD.o MA02ED.o MA02ES.o MA02EZ.o MA02FD.o MA02GD.o
MA02GZ.o MA02HD.o MA02ID.o MA02IZ.o MA02JD.o MA02JZ.o MB01KD.o MB01LD.o MB01MD.o MB01ND.o MB01PD.o MB01QD.o MB01RD.o
MB01RU.o MB01RW.o MB01RX.o MB01RY.o MB01SD.o MB01TD.o MB01UD.o MB01UW.o MB01UX.o MB01VD.o MB01WD.o MB01XD.o MB01XY.o MB01YD.o
MB01ZD.o MB02CD.o MB02CU.o MB02CV.o MB02CX.o MB02CY.o MB02DD.o MB02ED.o MB02FD.o MB02GD.o MB02HD.o MB02ID.o MB02JD.o
MB02JX.o MB02KD.o MB02MD.o MB02ND.o MB02NY.o MB02OD.o MB02PD.o MB02QD.o MB02QY.o MB02RD.o MB02RZ.o MB02SD.o MB02SZ.o
MB02TD.o MB02TZ.o MB02UD.o MB02UU.o MB02UV.o MB02UW.o MB02VD.o MB02WD.o MB02XD.o MB02YD.o MB03AD.o MB03BA.o MB03BB.o
MB03BC.o MB03BD.o MB03BE.o MB03BZ.o MB03CD.o MB03CZ.o MB03DD.o MB03DZ.o MB03ED.o MB03FD.o MB03FZ.o MB03GD.o MB03GZ.o
MB03HD.o MB03HZ.o MB03ID.o MB03IZ.o MB03JD.o MB03JZ.o MB03KA.o MB03KB.o MB03KC.o MB03KD.o MB03KE.o MB03LD.o MB03LF.o
MB03LZ.o MB03MD.o MB03MY.o MB03ND.o MB03NY.o MB03OD.o MB03OY.o MB03PD.o MB03PY.o MB03QD.o MB03QX.o MB03QY.o MB03RD.o
MB03RX.o MB03RY.o MB03SD.o MB03TD.o MB03TS.o MB03UD.o MB03VD.o MB03VY.o MB03WA.o MB03WD.o MB03WX.o MB03XD.o MB03XP.o
MB03XS.o MB03XU.o MB03XZ.o MB03YA.o MB03YD.o MB03YT.o MB03ZA.o MB03ZD.o MB04AD.o MB04AZ.o MB04BD.o MB04BZ.o MB04CD.o
MB04DD.o MB04DI.o MB04DS.o MB04DY.o MB04DZ.o MB04ED.o MB04FD.o MB04GD.o MB04HD.o MB04ID.o MB04IY.o MB04IZ.o MB04JD.o
MB04KD.o MB04LD.o MB04MD.o MB04ND.o MB04NY.o MB04OD.o MB04OW.o MB04OX.o MB04OY.o MB04PA.o MB04PB.o MB04PU.o MB04PY.o
MB04QB.o MB04QC.o MB04QF.o MB04QS.o MB04QU.o MB04RB.o MB04RU.o MB04SU.o MB04TB.o MB04TS.o MB04TT.o MB04TU.o MB04TV.o
MB04TW.o MB04TX.o MB04TY.o MB04UD.o MB04VD.o MB04VX.o MB04WD.o MB04WP.o MB04WR.o MB04WU.o MB04XD.o MB04XY.o MB04YD.o
MB04YW.o MB04ZD.o MB05MD.o MB05MY.o MB05ND.o MB05OD.o MB05OY.o MB3OYZ.o MB3PYZ.o MC01MD.o MC01ND.o MC01OD.o MC01PD.o
MC01PY.o MC01QD.o MC01RD.o MC01SD.o MC01SW.o MC01SX.o MC01SY.o MC01TD.o MC01VD.o MC01WD.o MC03MD.o MC03ND.o MC03NX.o
MC03NY.o MD03AD.o MD03BA.o MD03BB.o MD03BD.o MD03BF.o MD03BX.o MD03BY.o NF01AD.o NF01AY.o NF01BA.o NF01BB.o NF01BD.o
NF01BE.o NF01BF.o NF01BP.o NF01BQ.o NF01BR.o NF01BS.o NF01BU.o NF01BV.o NF01BW.o NF01BX.o NF01BY.o SB01BD.o SB01BX.o
SB01BY.o SB01DD.o SB01FY.o SB01MD.o SB02CX.o SB02MD.o SB02MR.o SB02MS.o SB02MT.o SB02MU.o SB02MV.o SB02MW.o SB02ND.o
SB02OD.o SB02OU.o SB02OV.o SB02OW.o SB02OX.o SB02OY.o SB02PD.o SB02QD.o SB02RD.o SB02RU.o SB02SD.o SB03MD.o SB03MU.o
SB03MV.o SB03MW.o SB03MX.o SB03MY.o SB03OD.o SB03OR.o SB03OT.o SB03OU.o SB03OV.o SB03OY.o SB03PD.o SB03QD.o SB03QX.o
SB03QY.o SB03RD.o SB03SD.o SB03SX.o SB03SY.o SB03TD.o SB03UD.o SB04MD.o SB04MR.o SB04MU.o SB04MW.o SB04MY.o SB04ND.o
SB04NV.o SB04NW.o SB04NX.o SB04NY.o SB04OD.o SB04OW.o SB04PD.o SB04PX.o SB04PY.o SB04QD.o SB04QR.o SB04QU.o SB04QY.o
SB04RD.o SB04RV.o SB04RW.o SB04RX.o SB04RY.o SB06ND.o SB08CD.o SB08DD.o SB08ED.o SB08FD.o SB08GD.o SB08HD.o SB08MD.o
SB08MY.o SB08ND.o SB08NY.o SB09MD.o SB10AD.o SB10DD.o SB10ED.o SB10FD.o SB10HD.o SB10ID.o SB10JD.o SB10KD.o SB10LD.o
SB10MD.o SB10PD.o SB10QD.o SB10RD.o SB10SD.o SB10TD.o SB10UD.o SB10VD.o SB10WD.o SB10YD.o SB10ZD.o SB10ZP.o SB16AD.o
SB16AY.o SB16BD.o SB16CD.o SB16CY.o SG02AD.o SG03AD.o SG03AX.o SG03AY.o SG03BD.o SG03BU.o SG03BV.o SG03BW.o SG03BX.o
SG03BY.o TB01ID.o TB01IZ.o TB01KD.o TB01LD.o TB01MD.o TB01ND.o TB01PD.o TB01TD.o TB01TY.o TB01UD.o TB01VD.o TB01VY.o
TB01WD.o TB01XD.o TB01XZ.o TB01YD.o TB01ZD.o TB03AD.o TB03AY.o TB04AD.o TB04AY.o TB04BD.o TB04BV.o TB04BW.o TB04BX.o
TB04CD.o TB05AD.o TC01OD.o TC04AD.o TC05AD.o TD03AD.o TD03AY.o TD04AD.o TD05AD.o TF01MD.o TF01MX.o TF01MY.o TF01ND.o
TF01OD.o TF01PD.o TF01QD.o TF01RD.o TG01AD.o TG01AZ.o TG01BD.o TG01CD.o TG01DD.o TG01ED.o TG01FD.o TG01FZ.o TG01HD.o
TG01HX.o TG01HY.o TG01ID.o TG01JD.o TG01JY.o TG01WD.o UD01BD.o UD01CD.o UD01DD.o UD01MD.o UD01MZ.o UD01ND.o UE01MD.o
delctg.o select.o
-LD:/RCompile/recent/R-3.1.1/bin/i386 -lRlapack -LD:/RCompile/recent/R-3.1.1/bin/i386 -lRblas
-lgfortran -Ld:/Rcompile/CRANpkg/extralibs215/local215/lib/i386 -Ld:/Rcompile/CRANpkg/extralibs215/local215/lib
-lgfortran -LD:/RCompile/recent/R-3.1.1/bin/i386 -lR
AB08NZ.o:AB08NZ.f:(.text+0x658): undefined reference to `ztzrzf_'
AB08NZ.o:AB08NZ.f:(.text+0x78f): undefined reference to `zunmrz_'
AB08NZ.o:AB08NZ.f:(.text+0x150e): undefined reference to `ztzrzf_'
AB08NZ.o:AB08NZ.f:(.text+0x161e): undefined reference to `zunmrz_'
AB08NZ.o:AB08NZ.f:(.text+0x173c): undefined reference to `zunmrz_'
AB13MD.o:AB13MD.f:(.text+0x1a09): undefined reference to `zgees_'
AB13MD.o:AB13MD.f:(.text+0x210b): undefined reference to `zgees_'
AB13MD.o:AB13MD.f:(.text+0x2232): undefined reference to `zgetri_'
AB13MD.o:AB13MD.f:(.text+0x2f8e): undefined reference to `zgees_'
AB13MD.o:AB13MD.f:(.text+0x3bae): undefined reference to `zgees_'
AB13MD.o:AB13MD.f:(.text+0x3cd1): undefined reference to `zgetri_'
AB13MD.o:AB13MD.f:(.text+0x4e4c): undefined reference to `zgees_'
AB13MD.o:AB13MD.f:(.text+0x5ada): undefined reference to `zgees_'
AB13MD.o:AB13MD.f:(.text+0x64b7): undefined reference to `zgees_'
AB13MD.o:AB13MD.f:(.text+0x6c51): undefined reference to `zgees_'
AB13MD.o:AB13MD.f:(.text+0x75ac): undefined reference to `zgees_'
AB8NXZ.o:AB8NXZ.f:(.text+0x3b3): undefined reference to `zunmrq_'
AB8NXZ.o:AB8NXZ.f:(.text+0x469): undefined reference to `zunmrq_'
AB8NXZ.o:AB8NXZ.f:(.text+0x785): undefined reference to `zlatzm_'
AB8NXZ.o:AB8NXZ.f:(.text+0xa77): undefined reference to `zunmrq_'
AB8NXZ.o:AB8NXZ.f:(.text+0xb5d): undefined reference to `zunmrq_'
AB8NXZ.o:AB8NXZ.f:(.text+0xe99): undefined reference to `zlapmt_'
AG08BZ.o:AG08BZ.f:(.text+0x80c): undefined reference to `ztzrzf_'
AG08BZ.o:AG08BZ.f:(.text+0x936): undefined reference to `zunmrz_'
AG08BZ.o:AG08BZ.f:(.text+0x177f): undefined reference to `ztzrzf_'
AG08BZ.o:AG08BZ.f:(.text+0x187f): undefined reference to `zunmrz_'
AG08BZ.o:AG08BZ.f:(.text+0x1a9e): undefined reference to `zunmrz_'
AG8BYZ.o:AG8BYZ.f:(.text+0x5c0): undefined reference to `zlatzm_'
AG8BYZ.o:AG8BYZ.f:(.text+0x1128): undefined reference to `zlaic1_'
AG8BYZ.o:AG8BYZ.f:(.text+0x1181): undefined reference to `zlaic1_'
AG8BYZ.o:AG8BYZ.f:(.text+0x13c4): undefined reference to `zlapmt_'
MB02TZ.o:MB02TZ.f:(.text+0x1ea): undefined reference to `zlacon_'
MB03BZ.o:MB03BZ.f:(.text+0x1fbe): undefined reference to `zlarnv_'
MB03LZ.o:MB03LZ.f:(.text+0x17d0): undefined reference to `zhgeqz_'
MB04BZ.o:MB04BZ.f:(.text+0x17a0): undefined reference to `zhgeqz_'
MB3OYZ.o:MB3OYZ.f:(.text+0x774): undefined reference to `zlaic1_'
MB3OYZ.o:MB3OYZ.f:(.text+0x7cb): undefined reference to `zlaic1_'
MB3PYZ.o:MB3PYZ.f:(.text+0x97a): undefined reference to `zlaic1_'
MB3PYZ.o:MB3PYZ.f:(.text+0x9f4): undefined reference to `zlaic1_'
TG01FZ.o:TG01FZ.f:(.text+0x93a): undefined reference to `ztzrzf_'
TG01FZ.o:TG01FZ.f:(.text+0xa16): undefined reference to `zunmrz_'
TG01FZ.o:TG01FZ.f:(.text+0xb11): undefined reference to `zunmrz_'
TG01FZ.o:TG01FZ.f:(.text+0xc08): undefined reference to `zunmrz_'
TG01FZ.o:TG01FZ.f:(.text+0x18b4): undefined reference to `ztzrzf_'
TG01FZ.o:TG01FZ.f:(.text+0x19d3): undefined reference to `zunmrz_'
TG01FZ.o:TG01FZ.f:(.text+0x1d3c): undefined reference to `ztzrzf_'
TG01FZ.o:TG01FZ.f:(.text+0x1ede): undefined reference to `zunmrz_'
TG01FZ.o:TG01FZ.f:(.text+0x1ff4): undefined reference to `zunmrz_'
TG01FZ.o:TG01FZ.f:(.text+0x22bb): undefined reference to `zunmrz_'
TG01FZ.o:TG01FZ.f:(.text+0x23cf): undefined reference to `zunmrz_'
collect2: ld returned 1 exit status
no DLL was created
ERROR: compilation failed for package 'slicot'
* removing 'd:/RCompile/CRANguest/R-release/lib/slicot'

I figured out that the undefined references are LAPACK functions. I am 
not an expert in compiling packages, but I thought my line in Makevars 
already linked to the LAPACK lib.

Can anyone help me on this?

All the best,

Alexander


From schallitz.kurt at gene.com  Tue Jul 22 16:21:09 2014
From: schallitz.kurt at gene.com (Kurt Schallitz)
Date: Tue, 22 Jul 2014 07:21:09 -0700
Subject: [Rd] Question: Publishing R/S objects with WebServices (SOAP/WSDL)
Message-ID: <CAGTMrYgiLh-OLPX_nXt9Q8DLiVOZrLqPXKCiqunAi8BkKucvVQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140722/2b3f989e/attachment.pl>

From edd at debian.org  Tue Jul 22 16:53:48 2014
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 22 Jul 2014 09:53:48 -0500
Subject: [Rd] Question: Publishing R/S objects with WebServices
	(SOAP/WSDL)
In-Reply-To: <CAGTMrYgiLh-OLPX_nXt9Q8DLiVOZrLqPXKCiqunAi8BkKucvVQ@mail.gmail.com>
References: <CAGTMrYgiLh-OLPX_nXt9Q8DLiVOZrLqPXKCiqunAi8BkKucvVQ@mail.gmail.com>
Message-ID: <21454.31484.351146.101843@max.nulle.part>


On 22 July 2014 at 07:21, Kurt Schallitz wrote:
| Can anyone tell me if there is a package which will allow me to write a
| package in R, then publish the package using WebServices? The idea is that
| I want to be able to pass a data set into R, have R perform the
| calculations, then send the result back to either a .Net application or a
| LIMS BASIC application.
| 
| So far I see many packages that allow R to consume WebServices, but I
| haven't seen anything that allows you to publish a package as a WebService.
| One company advertised a product for WebServices, but they are not using
| the term in an industry standardized way - they are using it to mean, "I
| can publish my R results on the web and access them from the web." This is
| NOT what we are looking for. We want to use true Web Services using SOAP
| and WSDL.

You probably want to look into Jeroen's very capable OpenCPU project:

    https://www.opencpu.org/

which does all that, and more, out of the box.

Just doing SOAP etc is a pretty old idea some folks played with a decade+
ago, and Duncan Temple-Lang had some packages in that area too. 

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From tobias.verbeke at openanalytics.eu  Tue Jul 22 17:05:23 2014
From: tobias.verbeke at openanalytics.eu (Tobias Verbeke)
Date: Tue, 22 Jul 2014 17:05:23 +0200 (CEST)
Subject: [Rd] Question: Publishing R/S objects with WebServices
 (SOAP/WSDL)
In-Reply-To: <CAGTMrYgiLh-OLPX_nXt9Q8DLiVOZrLqPXKCiqunAi8BkKucvVQ@mail.gmail.com>
References: <CAGTMrYgiLh-OLPX_nXt9Q8DLiVOZrLqPXKCiqunAi8BkKucvVQ@mail.gmail.com>
Message-ID: <559904213.78579.1406041523103.JavaMail.zimbra@openanalytics.eu>

Hi Kurt, 

The R Service Bus was made to do this.

http://rsb.doc.openanalytics.eu/dev/
http://rsb.doc.openanalytics.eu/dev/wsdocs/index.html

Running in production at multiple big pharma companies since 2010.

Open source and freely available.

Best,
Tobias

----- Original Message -----
> From: "Kurt Schallitz" <schallitz.kurt at gene.com>
> To: r-devel at r-project.org
> Sent: Tuesday, July 22, 2014 4:21:09 PM
> Subject: [Rd] Question: Publishing R/S objects with WebServices (SOAP/WSDL)
> 
> Hello,
> 
> Can anyone tell me if there is a package which will allow me to write a
> package in R, then publish the package using WebServices? The idea is that
> I want to be able to pass a data set into R, have R perform the
> calculations, then send the result back to either a .Net application or a
> LIMS BASIC application.
> 
> So far I see many packages that allow R to consume WebServices, but I
> haven't seen anything that allows you to publish a package as a WebService.
> One company advertised a product for WebServices, but they are not using
> the term in an industry standardized way - they are using it to mean, "I
> can publish my R results on the web and access them from the web." This is
> NOT what we are looking for. We want to use true Web Services using SOAP
> and WSDL.
> 
> Any help would be much appreciated.
> 
> --
> Kurt Schallitz
> Sr. Software Developer [LIMS]
> FPPQI
> Genentech
> (650)-467-7304
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From jpnolan at american.edu  Tue Jul 22 20:42:22 2014
From: jpnolan at american.edu (John Nolan)
Date: Tue, 22 Jul 2014 14:42:22 -0400
Subject: [Rd] Problems with building a private R-package with Fortran
 source under Windows
In-Reply-To: <53CE6DD3.7060901@tuwien.ac.at>
References: <53CE6DD3.7060901@tuwien.ac.at>
Message-ID: <OF3F30B083.0A30C5D0-ON85257D1D.00668ED0-85257D1D.0066C1A4@american.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140722/0443ca54/attachment.pl>

From geoffjentry at hexdump.org  Tue Jul 22 22:13:30 2014
From: geoffjentry at hexdump.org (Geoff Jentry)
Date: Tue, 22 Jul 2014 13:13:30 -0700 (PDT)
Subject: [Rd] Question: Publishing R/S objects with WebServices
 (SOAP/WSDL)
In-Reply-To: <CAGTMrYgiLh-OLPX_nXt9Q8DLiVOZrLqPXKCiqunAi8BkKucvVQ@mail.gmail.com>
References: <CAGTMrYgiLh-OLPX_nXt9Q8DLiVOZrLqPXKCiqunAi8BkKucvVQ@mail.gmail.com>
Message-ID: <alpine.DEB.2.00.1407221312580.22988@cardhu.dreamhost.com>

> So far I see many packages that allow R to consume WebServices, but I
> haven't seen anything that allows you to publish a package as a WebService.

If you haven't already, look at the RWebServices package from 
Bioconductor.


From xie at yihui.name  Tue Jul 22 22:40:11 2014
From: xie at yihui.name (Yihui Xie)
Date: Tue, 22 Jul 2014 15:40:11 -0500
Subject: [Rd] Byte Order Mark in ?connections
Message-ID: <CANROs4f6MR9qSXVMOON9pg2PaZw+x7nPixbSgyRZPhkoHB47kA@mail.gmail.com>

Hi,

There seems to be a couple of typos in the documentation of
connections about the Byte Order Mark, e.g. 0xFFFE should be 0xFEFF,
and c(0xef, 0xbb, 0xff) should be c(0xef, 0xbb, 0xbf).
https://github.com/wch/r-source/blob/4c15a67b/src/library/base/man/connections.Rd#L366-L383

> charToRaw('\UFEFF')
[1] ef bb bf

Regards,
Yihui
--
Yihui Xie <xieyihui at gmail.com>
Web: http://yihui.name


From kevinushey at gmail.com  Wed Jul 23 00:27:20 2014
From: kevinushey at gmail.com (Kevin Ushey)
Date: Tue, 22 Jul 2014 15:27:20 -0700
Subject: [Rd] Removed 'extern' on R_running_as_main_program in Rinterface.h
	-- intentional?
Message-ID: <CAJXgQP02saw-5zVOXA9GNTjXj4tVooaT_iL5=uWs5ELF-M5xrw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140722/41ff0a0e/attachment.pl>

From Avraham.Adler at guycarp.com  Thu Jul 24 00:13:14 2014
From: Avraham.Adler at guycarp.com (Adler, Avraham)
Date: Wed, 23 Jul 2014 17:13:14 -0500
Subject: [Rd] Is the ISC license acceptable for CRAN?
Message-ID: <93A2161604A30C4ABE14AC35CAFC842201AC6A2CE2@USDFW11XM32.mercer.com>

Good afternoon.

The ISC (Internet Software Consortium) license[1] is a permissive, open-source license that is considered "functionally equivalent"[2] to the Simplified (2-clause) BSD[3]  and MIT[4] licenses, but with extraneous language removed. There is at least one package on CRAN which incorporates some code using it[5]. Are there plans to include this license in the list at <https://svn.r-project.org/R/trunk/share/licenses/license.db>? Will packages developed for R using this run into problems during submission?

Thank you,

Avraham Adler

[1] <http://opensource.org/licenses/ISC>
[2] <http://www.openbsd.org/policy.html>, <http://choosealicense.com/licenses/#isc>
[3] <http://opensource.org/licenses/BSD-2-Clause>
[4] <http://opensource.org/licenses/MIT>
[5] <http://cran.r-project.org/web/packages/ff/LICENSE>

This message is intended only for the use of the address...{{dropped:9}}


From murdoch.duncan at gmail.com  Thu Jul 24 02:48:40 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 23 Jul 2014 20:48:40 -0400
Subject: [Rd] Is the ISC license acceptable for CRAN?
In-Reply-To: <93A2161604A30C4ABE14AC35CAFC842201AC6A2CE2@USDFW11XM32.mercer.com>
References: <93A2161604A30C4ABE14AC35CAFC842201AC6A2CE2@USDFW11XM32.mercer.com>
Message-ID: <53D057E8.9040802@gmail.com>

On 23/07/2014, 6:13 PM, Adler, Avraham wrote:
> Good afternoon.
> 
> The ISC (Internet Software Consortium) license[1] is a permissive, open-source license that is considered "functionally equivalent"[2] to the Simplified (2-clause) BSD[3]  and MIT[4] licenses, but with extraneous language removed. There is at least one package on CRAN which incorporates some code using it[5]. Are there plans to include this license in the list at <https://svn.r-project.org/R/trunk/share/licenses/license.db>? Will packages developed for R using this run into problems during submission?

You are writing to the wrong place.  You need to read the CRAN policies
on CRAN, and if they don't answer your question, write to CRAN to ask it.

Duncan Murdoch


From bbolker at gmail.com  Thu Jul 24 06:07:23 2014
From: bbolker at gmail.com (Ben Bolker)
Date: Thu, 24 Jul 2014 04:07:23 +0000
Subject: [Rd] Is the ISC license acceptable for CRAN?
References: <93A2161604A30C4ABE14AC35CAFC842201AC6A2CE2@USDFW11XM32.mercer.com>
	<53D057E8.9040802@gmail.com>
Message-ID: <loom.20140724T060426-741@post.gmane.org>

Duncan Murdoch <murdoch.duncan <at> gmail.com> writes:

>  On 23/07/2014, 6:13 PM, Adler, Avraham wrote: > Good afternoon.  >
> > The ISC (Internet Software Consortium) license[1] is a permissive,
> > open-source license that is considered "functionally equivalent"[2]
> > to the Simplified (2-clause) BSD[3] and MIT[4] licenses, but with
> > extraneous language removed. There is at least one package on CRAN
> > which incorporates some code using it[5]. Are there plans to include
> > this license in the list at
> > <https://svn.r-project.org/R/trunk/share/licenses/license.db>? Will
> > packages developed for R using this run into problems during
> > submission?  

  Yes.

> You are writing to the wrong place.  You need to read
> the CRAN policies on CRAN, and if they don't answer your question,
> write to CRAN to ask it.


>From http://cran.r-project.org/web/packages/policies.html :

"Packages with licenses not listed at
 https://svn.r-project.org/R/trunk/share/licenses/license.db 
will generally not be accepted."

 You'd better write to cran at r-project.org to ask permission.

  Ben Bolker


From Avraham.Adler at guycarp.com  Thu Jul 24 15:38:02 2014
From: Avraham.Adler at guycarp.com (Adler, Avraham)
Date: Thu, 24 Jul 2014 08:38:02 -0500
Subject: [Rd] Is the ISC license acceptable for CRAN?
In-Reply-To: <53D057E8.9040802@gmail.com>
References: <93A2161604A30C4ABE14AC35CAFC842201AC6A2CE2@USDFW11XM32.mercer.com>
	<53D057E8.9040802@gmail.com>
Message-ID: <93A2161604A30C4ABE14AC35CAFC842201AC77F2FE@USDFW11XM32.mercer.com>

My apologies; thank you for the correction.

Avraham Adler

-----Original Message-----
From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
Sent: Wednesday, July 23, 2014 8:49 PM
To: Adler, Avraham; r-devel at r-project.org
Subject: Re: [Rd] Is the ISC license acceptable for CRAN?

On 23/07/2014, 6:13 PM, Adler, Avraham wrote:
> Good afternoon.
>
> The ISC (Internet Software Consortium) license[1] is a permissive, open-source license that is considered "functionally equivalent"[2] to the Simplified (2-clause) BSD[3]  and MIT[4] licenses, but with extraneous language removed. There is at least one package on CRAN which incorporates some code using it[5]. Are there plans to include this license in the list at <https://svn.r-project.org/R/trunk/share/licenses/license.db>? Will packages developed for R using this run into problems during submission?

You are writing to the wrong place.  You need to read the CRAN policies on CRAN, and if they don't answer your question, write to CRAN to ask it.

Duncan Murdoch


This message is intended only for the use of the address...{{dropped:9}}


From emammendes at gmail.com  Fri Jul 25 02:37:04 2014
From: emammendes at gmail.com (Eduardo M. A. M.Mendes)
Date: Thu, 24 Jul 2014 21:37:04 -0300
Subject: [Rd] R-3.1.1 - R CMD INSTALL problem
Message-ID: <FB8776EE-B310-4C1D-A07C-B600BEED83B7@gmail.com>

Hello

I have recently upgraded R to the newest version.  Unfortunately my old (fortran and C) R-package cannot be installed anymore (was built before R 3.0.0: please re-install it). 

I have tried R CMD INSTALL package_name but I noticed that R-3.1.1-binary-mac requests gcc-4.8.2 and specific locations for the libraries (gcc and gfortran).   Can someone point me to the documentation on how to install  gcc as R requires, please?

Please note that I have used "brew install gcc" on another mac and soft linked all the necessary libraries so that gcc-4.9.1 can be used as 4.8 (as R requires). However I would like a clean installation.

Many thanks

Ed

From lbraglia at gmail.com  Fri Jul 25 14:05:45 2014
From: lbraglia at gmail.com (Luca Braglia)
Date: Fri, 25 Jul 2014 14:05:45 +0200
Subject: [Rd] [Wishlist] a 'PackageDevelopment' Task View
Message-ID: <CAFOm_+7DUEbtPwz_KS+EEQwsWO9Y7-byhBL4Zki=HP9qGCegxQ@mail.gmail.com>

Hello everybody,

as a young/unexperienced R package developer (only a few, mainly
for personal use) i was thinking it could be very useful having a
"meta" task view for all package-development related
packages and/or function.

Something like ...

Creation
- utils::package.skeleton, pkgKitten, Rcpp::Rcpp.package.skeleton

Foreign languages interfaces:
- Rcpp

Documentation
- roxygen2

Profiling:
- utils::Rprof
- profr
- proftools

Unit test
- RUnit
- testthat

Spell checking
- tools::aspell_package_* functions

"Misc":
- devtools

and so on.

These are only the ones i (use or know) & (remember), but for
sure there is already a lot of useful code in this area and
having a summary (by more experienced developers) of which good
tools are available would be *very* useful, IMHO.

How about it?

Thanks, Luca


From murdoch.duncan at gmail.com  Fri Jul 25 14:29:47 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 25 Jul 2014 08:29:47 -0400
Subject: [Rd] [Wishlist] a 'PackageDevelopment' Task View
In-Reply-To: <CAFOm_+7DUEbtPwz_KS+EEQwsWO9Y7-byhBL4Zki=HP9qGCegxQ@mail.gmail.com>
References: <CAFOm_+7DUEbtPwz_KS+EEQwsWO9Y7-byhBL4Zki=HP9qGCegxQ@mail.gmail.com>
Message-ID: <53D24DBB.4070901@gmail.com>

On 25/07/2014 8:05 AM, Luca Braglia wrote:
> Hello everybody,
>
> as a young/unexperienced R package developer (only a few, mainly
> for personal use) i was thinking it could be very useful having a
> "meta" task view for all package-development related
> packages and/or function.
>
> Something like ...
>
> Creation
> - utils::package.skeleton, pkgKitten, Rcpp::Rcpp.package.skeleton
>
> Foreign languages interfaces:
> - Rcpp
>
> Documentation
> - roxygen2
>
> Profiling:
> - utils::Rprof
> - profr
> - proftools
>
> Unit test
> - RUnit
> - testthat
>
> Spell checking
> - tools::aspell_package_* functions
>
> "Misc":
> - devtools
>
> and so on.
>
> These are only the ones i (use or know) & (remember), but for
> sure there is already a lot of useful code in this area and
> having a summary (by more experienced developers) of which good
> tools are available would be *very* useful, IMHO.
>
> How about it?

Sounds like a good idea.  You should do it.

Download the "ctv" package, and read the vignette for instructions.

Duncan Murdoch


From simon.urbanek at r-project.org  Fri Jul 25 15:14:18 2014
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 25 Jul 2014 09:14:18 -0400
Subject: [Rd] R-3.1.1 - R CMD INSTALL problem
In-Reply-To: <FB8776EE-B310-4C1D-A07C-B600BEED83B7@gmail.com>
References: <FB8776EE-B310-4C1D-A07C-B600BEED83B7@gmail.com>
Message-ID: <1DCA60F5-151B-4A69-A427-1ECF44D1E946@r-project.org>

Eduardo,

On Jul 24, 2014, at 8:37 PM, Eduardo M. A. M.Mendes <emammendes at gmail.com> wrote:

> Hello
> 
> I have recently upgraded R to the newest version.  Unfortunately my old (fortran and C) R-package cannot be installed anymore (was built before R 3.0.0: please re-install it). 
> 
> I have tried R CMD INSTALL package_name but I noticed that R-3.1.1-binary-mac requests gcc-4.8.2 and specific locations for the libraries (gcc and gfortran).  

No, it doesn't. You must be using some other binary that the official CRAN one (http://cran.r-project.org/bin/macosx )
Our binaries only use standard Apple compilers (from Xcode - in recent OS X versions you can use xcode-select --install on the command line to install) plus a GNU Fortran that you can download from CRAN.


> Can someone point me to the documentation on how to install  gcc as R requires, please?
> 
> Please note that I have used "brew install gcc" on another mac and soft linked all the necessary libraries so that gcc-4.9.1 can be used as 4.8 (as R requires). However I would like a clean installation.
> 

I you use brew, then you're on your own and you should refer to their support. Our builds do not require brew (or any other 3rd party build system).

Cheers,
Simon

PS: Please note that R-SIG-Mac is the proper mailing list for Mac-specific questions.


From alan.benson at insight-centre.org  Fri Jul 25 16:30:56 2014
From: alan.benson at insight-centre.org (Alan Benson)
Date: Fri, 25 Jul 2014 15:30:56 +0100
Subject: [Rd] Multiple -g flags in R CMD SHLIB
Message-ID: <53D26A20.5040903@insight-centre.org>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140725/c37dbf82/attachment.pl>

From edd at debian.org  Fri Jul 25 17:32:23 2014
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 25 Jul 2014 10:32:23 -0500
Subject: [Rd] Multiple -g flags in R CMD SHLIB
In-Reply-To: <53D26A20.5040903@insight-centre.org>
References: <53D26A20.5040903@insight-centre.org>
Message-ID: <21458.30855.809415.553581@max.nulle.part>


On 25 July 2014 at 15:30, Alan Benson wrote:
| Does anybody know why two "-g" flags appear in the call to gcc in R CMD 
| SHLIB
| 
| Example:
| 
| gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -fpic *-g* -O2 
| -fstack-protector --param=ssp-buffer-size=4 -Wformat 
| -Werror=format-security -D_FORTIFY_SOURCE=2 *-g*  -c c_file1.c -o 
| c_object1.o
| 
| Surely it need only be listed once?

AFAIK the second entry does no harm. 

If you study the source code invoked by R CMD SHLIB (and the related
commands) you will noticed that several Make variables are reflected, some of
which you can set from the file Makeconf (on my systems in /etc/R/Makeconf
via a symlink, otherwise in $R_HOME/etc/ depending on where R_HOME is) as
well as other files, including variants in your home directory such as
~/.R/Makevars (my favourite for local configurations). As well as extra
environment variables -- this is all driven by how 'make' behaves, which is
well documented.

As your local admin, you are free to edit these config files as you see fit,
and/or use additional environment variables to tailor this.

But as the second invocation of -g has no additional side effect over the
first, nobody has seen fit to write a 'uniquefy()' filter for the arguments.

For what it is worth, the default values on my system are below.  Some of the
choices are driven by Debian Policy and affect Debian, Ubuntu and other
Debian derivatives.

Hope this helps,  Dirk


edd at max:~$ grep -- -g /etc/R/Makeconf 
# configure  '--prefix=/usr' '--with-cairo' '--with-jpeglib' '--with-readline' '--with-tcltk' '--with-system-bzlib' '--with-system-pcre' '--with-system-zlib' '--mandir=/usr/share/man' '--infodir=/usr/share/info' '--datadir=/usr/share/R/share' '--includedir=/usr/share/R/include' '--with-blas' '--with-lapack' '--enable-R-profiling' '--enable-R-shlib' '--enable-memory-profiling' '--without-recommended-packages' '--build' 'x86_64-linux-gnu' 'build_alias=x86_64-linux-gnu' 'R_PRINTCMD=/usr/bin/lpr' 'R_PAPERSIZE=letter' 'R_BROWSER=xdg-open' 'LIBnn=lib' 'CC=gcc -std=gnu99' 'CFLAGS=-g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2 -g' 'LDFLAGS=-Wl,-Bsymbolic-functions -Wl,-z,relro' 'CPPFLAGS=' 'F77=gfortran' 'FFLAGS=-g -O2 -fstack-protector --param=ssp-buffer-size=4' 'CXX=g++' 'CXXFLAGS=-g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2 -g' 'FC=gfortran' 'FCFLAGS=-g -O2 -fstack-protector --param=ssp-buffer-size=4'
CFLAGS = -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2 -g $(LTO)
CXXFLAGS = -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2 -g $(LTO)
CXX1XFLAGS = -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2 -g
FCFLAGS = -g -O2 -fstack-protector --param=ssp-buffer-size=4 $(LTO)
FFLAGS = -g -O2 -fstack-protector --param=ssp-buffer-size=4 $(LTO)
SAFE_FFLAGS = -g -O2 -fstack-protector --param=ssp-buffer-size=4 -ffloat-store
TCLTK_LIBS = -L/usr/lib/x86_64-linux-gnu -ltcl8.6 -L/usr/lib/x86_64-linux-gnu -ltk8.6 -lX11 -lXss -lXext
edd at max:~$ 
-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

From rkoenker at illinois.edu  Fri Jul 25 17:25:29 2014
From: rkoenker at illinois.edu (Roger Koenker)
Date: Fri, 25 Jul 2014 10:25:29 -0500
Subject: [Rd] [R-SIG-Mac]  R-3.1.1 - R CMD INSTALL problem
In-Reply-To: <85b07415be0f4c80893ee011dac466c6@CHIHT1.ad.uillinois.edu>
References: <FB8776EE-B310-4C1D-A07C-B600BEED83B7@gmail.com>
	<85b07415be0f4c80893ee011dac466c6@CHIHT1.ad.uillinois.edu>
Message-ID: <8F36E8A9-B021-4CAA-82A5-56EC6EAF9950@illinois.edu>

FWIW when I installed R-devel  a week or so ago, I had to also install gfortran-4.8.2-darwin13.tar.bz2 from 

http://r.research.att.com/libs/

well "had to"  is perhaps too strong, but I was seeing complaints about not running 4.8 and they went away
after this install.

Roger

url:    www.econ.uiuc.edu/~roger            Roger Koenker
email    rkoenker at uiuc.edu            Department of Economics
vox:     217-333-4558                University of Illinois
fax:       217-244-6678                Urbana, IL 61801

On Jul 25, 2014, at 8:14 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:

> Eduardo,
> 
> On Jul 24, 2014, at 8:37 PM, Eduardo M. A. M.Mendes <emammendes at gmail.com> wrote:
> 
>> Hello
>> 
>> I have recently upgraded R to the newest version.  Unfortunately my old (fortran and C) R-package cannot be installed anymore (was built before R 3.0.0: please re-install it). 
>> 
>> I have tried R CMD INSTALL package_name but I noticed that R-3.1.1-binary-mac requests gcc-4.8.2 and specific locations for the libraries (gcc and gfortran).  
> 
> No, it doesn't. You must be using some other binary that the official CRAN one (http://cran.r-project.org/bin/macosx )
> Our binaries only use standard Apple compilers (from Xcode - in recent OS X versions you can use xcode-select --install on the command line to install) plus a GNU Fortran that you can download from CRAN.
> 
> 
>> Can someone point me to the documentation on how to install  gcc as R requires, please?
>> 
>> Please note that I have used "brew install gcc" on another mac and soft linked all the necessary libraries so that gcc-4.9.1 can be used as 4.8 (as R requires). However I would like a clean installation.
>> 
> 
> I you use brew, then you're on your own and you should refer to their support. Our builds do not require brew (or any other 3rd party build system).
> 
> Cheers,
> Simon
> 
> PS: Please note that R-SIG-Mac is the proper mailing list for Mac-specific questions.
> 
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-mac


From simon.urbanek at r-project.org  Fri Jul 25 17:50:30 2014
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 25 Jul 2014 11:50:30 -0400
Subject: [Rd] [R-SIG-Mac]  R-3.1.1 - R CMD INSTALL problem
In-Reply-To: <8F36E8A9-B021-4CAA-82A5-56EC6EAF9950@illinois.edu>
References: <FB8776EE-B310-4C1D-A07C-B600BEED83B7@gmail.com>
	<85b07415be0f4c80893ee011dac466c6@CHIHT1.ad.uillinois.edu>
	<8F36E8A9-B021-4CAA-82A5-56EC6EAF9950@illinois.edu>
Message-ID: <BD2E1D48-957E-4FB1-BC86-4F5239B61EBD@r-project.org>

On Jul 25, 2014, at 11:25 AM, Roger Koenker <rkoenker at illinois.edu> wrote:

> FWIW when I installed R-devel  a week or so ago, I had to also install gfortran-4.8.2-darwin13.tar.bz2 from 
> 
> http://r.research.att.com/libs/
> 
> well "had to"  is perhaps too strong, but I was seeing complaints about not running 4.8 and they went away
> after this install.
> 

Ah, I think you're talking about the Mavericks builds. That one is indeed using GNU Fortran 4.8.2, but it should technically work even with the 4.2 CRAN Fortran. The only issue is that it uses the gfortran-4.8 name with version, so apart from symlinking the versions the easiest way is to install the binary above.

Thanks,
Simon


> Roger
> 
> url:    www.econ.uiuc.edu/~roger            Roger Koenker
> email    rkoenker at uiuc.edu            Department of Economics
> vox:     217-333-4558                University of Illinois
> fax:       217-244-6678                Urbana, IL 61801
> 
> On Jul 25, 2014, at 8:14 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
>> Eduardo,
>> 
>> On Jul 24, 2014, at 8:37 PM, Eduardo M. A. M.Mendes <emammendes at gmail.com> wrote:
>> 
>>> Hello
>>> 
>>> I have recently upgraded R to the newest version.  Unfortunately my old (fortran and C) R-package cannot be installed anymore (was built before R 3.0.0: please re-install it). 
>>> 
>>> I have tried R CMD INSTALL package_name but I noticed that R-3.1.1-binary-mac requests gcc-4.8.2 and specific locations for the libraries (gcc and gfortran).  
>> 
>> No, it doesn't. You must be using some other binary that the official CRAN one (http://cran.r-project.org/bin/macosx )
>> Our binaries only use standard Apple compilers (from Xcode - in recent OS X versions you can use xcode-select --install on the command line to install) plus a GNU Fortran that you can download from CRAN.
>> 
>> 
>>> Can someone point me to the documentation on how to install  gcc as R requires, please?
>>> 
>>> Please note that I have used "brew install gcc" on another mac and soft linked all the necessary libraries so that gcc-4.9.1 can be used as 4.8 (as R requires). However I would like a clean installation.
>>> 
>> 
>> I you use brew, then you're on your own and you should refer to their support. Our builds do not require brew (or any other 3rd party build system).
>> 
>> Cheers,
>> Simon
>> 
>> PS: Please note that R-SIG-Mac is the proper mailing list for Mac-specific questions.
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From rkoenker at illinois.edu  Fri Jul 25 18:09:36 2014
From: rkoenker at illinois.edu (Roger Koenker)
Date: Fri, 25 Jul 2014 11:09:36 -0500
Subject: [Rd] [R-SIG-Mac]  R-3.1.1 - R CMD INSTALL problem
In-Reply-To: <c4373a30b433470a816d102fad31c99f@CITESHT1.ad.uillinois.edu>
References: <FB8776EE-B310-4C1D-A07C-B600BEED83B7@gmail.com>
	<85b07415be0f4c80893ee011dac466c6@CHIHT1.ad.uillinois.edu>
	<8F36E8A9-B021-4CAA-82A5-56EC6EAF9950@illinois.edu>
	<c4373a30b433470a816d102fad31c99f@CITESHT1.ad.uillinois.edu>
Message-ID: <5E49AAF7-68D1-4725-B1D8-61BCDEB6E194@illinois.edu>

Yes,  Mavericks as I should have mentioned.  Anyway,  thanks for providing the 4.8 version, this made it all very
convenient, and I always have more confidence when downloading R tools of yours, rather than exploring further
afield.

Roger

url:    www.econ.uiuc.edu/~roger            Roger Koenker
email    rkoenker at uiuc.edu            Department of Economics
vox:     217-333-4558                University of Illinois
fax:       217-244-6678                Urbana, IL 61801

On Jul 25, 2014, at 10:50 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:

> On Jul 25, 2014, at 11:25 AM, Roger Koenker <rkoenker at illinois.edu> wrote:
> 
>> FWIW when I installed R-devel  a week or so ago, I had to also install gfortran-4.8.2-darwin13.tar.bz2 from 
>> 
>> http://r.research.att.com/libs/
>> 
>> well "had to"  is perhaps too strong, but I was seeing complaints about not running 4.8 and they went away
>> after this install.
>> 
> 
> Ah, I think you're talking about the Mavericks builds. That one is indeed using GNU Fortran 4.8.2, but it should technically work even with the 4.2 CRAN Fortran. The only issue is that it uses the gfortran-4.8 name with version, so apart from symlinking the versions the easiest way is to install the binary above.
> 
> Thanks,
> Simon
> 
> 
>> Roger
>> 
>> url:    www.econ.uiuc.edu/~roger            Roger Koenker
>> email    rkoenker at uiuc.edu            Department of Economics
>> vox:     217-333-4558                University of Illinois
>> fax:       217-244-6678                Urbana, IL 61801
>> 
>> On Jul 25, 2014, at 8:14 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>> 
>>> Eduardo,
>>> 
>>> On Jul 24, 2014, at 8:37 PM, Eduardo M. A. M.Mendes <emammendes at gmail.com> wrote:
>>> 
>>>> Hello
>>>> 
>>>> I have recently upgraded R to the newest version.  Unfortunately my old (fortran and C) R-package cannot be installed anymore (was built before R 3.0.0: please re-install it). 
>>>> 
>>>> I have tried R CMD INSTALL package_name but I noticed that R-3.1.1-binary-mac requests gcc-4.8.2 and specific locations for the libraries (gcc and gfortran).  
>>> 
>>> No, it doesn't. You must be using some other binary that the official CRAN one (http://cran.r-project.org/bin/macosx )
>>> Our binaries only use standard Apple compilers (from Xcode - in recent OS X versions you can use xcode-select --install on the command line to install) plus a GNU Fortran that you can download from CRAN.
>>> 
>>> 
>>>> Can someone point me to the documentation on how to install  gcc as R requires, please?
>>>> 
>>>> Please note that I have used "brew install gcc" on another mac and soft linked all the necessary libraries so that gcc-4.9.1 can be used as 4.8 (as R requires). However I would like a clean installation.
>>>> 
>>> 
>>> I you use brew, then you're on your own and you should refer to their support. Our builds do not require brew (or any other 3rd party build system).
>>> 
>>> Cheers,
>>> Simon
>>> 
>>> PS: Please note that R-SIG-Mac is the proper mailing list for Mac-specific questions.
>>> 
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>> 


From emammendes at gmail.com  Fri Jul 25 20:55:09 2014
From: emammendes at gmail.com (Eduardo M. A. M.Mendes)
Date: Fri, 25 Jul 2014 15:55:09 -0300
Subject: [Rd] [R-SIG-Mac]  R-3.1.1 - R CMD INSTALL problem
In-Reply-To: <8F36E8A9-B021-4CAA-82A5-56EC6EAF9950@illinois.edu>
References: <FB8776EE-B310-4C1D-A07C-B600BEED83B7@gmail.com>
	<85b07415be0f4c80893ee011dac466c6@CHIHT1.ad.uillinois.edu>
	<8F36E8A9-B021-4CAA-82A5-56EC6EAF9950@illinois.edu>
Message-ID: <C0330E94-A9EB-4526-9E39-37F24FE0000C@gmail.com>

Many thanks.

It worked just fine.

Ed


On Jul 25, 2014, at 12:25 PM, Roger Koenker <rkoenker at illinois.edu> wrote:

> FWIW when I installed R-devel  a week or so ago, I had to also install gfortran-4.8.2-darwin13.tar.bz2 from 
> 
> http://r.research.att.com/libs/
> 
> well "had to"  is perhaps too strong, but I was seeing complaints about not running 4.8 and they went away
> after this install.
> 
> Roger
> 
> url:    www.econ.uiuc.edu/~roger            Roger Koenker
> email    rkoenker at uiuc.edu            Department of Economics
> vox:     217-333-4558                University of Illinois
> fax:       217-244-6678                Urbana, IL 61801
> 
> On Jul 25, 2014, at 8:14 AM, Simon Urbanek <simon.urbanek at r-project.org> wrote:
> 
>> Eduardo,
>> 
>> On Jul 24, 2014, at 8:37 PM, Eduardo M. A. M.Mendes <emammendes at gmail.com> wrote:
>> 
>>> Hello
>>> 
>>> I have recently upgraded R to the newest version.  Unfortunately my old (fortran and C) R-package cannot be installed anymore (was built before R 3.0.0: please re-install it). 
>>> 
>>> I have tried R CMD INSTALL package_name but I noticed that R-3.1.1-binary-mac requests gcc-4.8.2 and specific locations for the libraries (gcc and gfortran).  
>> 
>> No, it doesn't. You must be using some other binary that the official CRAN one (http://cran.r-project.org/bin/macosx )
>> Our binaries only use standard Apple compilers (from Xcode - in recent OS X versions you can use xcode-select --install on the command line to install) plus a GNU Fortran that you can download from CRAN.
>> 
>> 
>>> Can someone point me to the documentation on how to install  gcc as R requires, please?
>>> 
>>> Please note that I have used "brew install gcc" on another mac and soft linked all the necessary libraries so that gcc-4.9.1 can be used as 4.8 (as R requires). However I would like a clean installation.
>>> 
>> 
>> I you use brew, then you're on your own and you should refer to their support. Our builds do not require brew (or any other 3rd party build system).
>> 
>> Cheers,
>> Simon
>> 
>> PS: Please note that R-SIG-Mac is the proper mailing list for Mac-specific questions.
>> 
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
> 


From emammendes at gmail.com  Fri Jul 25 20:55:13 2014
From: emammendes at gmail.com (Eduardo M. A. M.Mendes)
Date: Fri, 25 Jul 2014 15:55:13 -0300
Subject: [Rd] R-3.1.1 - R CMD INSTALL problem
In-Reply-To: <1DCA60F5-151B-4A69-A427-1ECF44D1E946@r-project.org>
References: <FB8776EE-B310-4C1D-A07C-B600BEED83B7@gmail.com>
	<1DCA60F5-151B-4A69-A427-1ECF44D1E946@r-project.org>
Message-ID: <52D45901-5844-43E3-9AFF-8F16112EAD50@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140725/72a0a282/attachment.pl>

From emammendes at gmail.com  Fri Jul 25 20:56:36 2014
From: emammendes at gmail.com (Eduardo M. A. M.Mendes)
Date: Fri, 25 Jul 2014 15:56:36 -0300
Subject: [Rd] [R-SIG-Mac]  R-3.1.1 - R CMD INSTALL problem
In-Reply-To: <5E49AAF7-68D1-4725-B1D8-61BCDEB6E194@illinois.edu>
References: <FB8776EE-B310-4C1D-A07C-B600BEED83B7@gmail.com>
	<85b07415be0f4c80893ee011dac466c6@CHIHT1.ad.uillinois.edu>
	<8F36E8A9-B021-4CAA-82A5-56EC6EAF9950@illinois.edu>
	<c4373a30b433470a816d102fad31c99f@CITESHT1.ad.uillinois.edu>
	<5E49AAF7-68D1-4725-B1D8-61BCDEB6E194@illinois.edu>
Message-ID: <48F852B9-1219-4187-AF57-EB7436656F89@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140725/0253d9dd/attachment.pl>

From lbraglia at gmail.com  Sat Jul 26 17:04:42 2014
From: lbraglia at gmail.com (Luca Braglia)
Date: Sat, 26 Jul 2014 17:04:42 +0200
Subject: [Rd] [Wishlist] a 'PackageDevelopment' Task View
In-Reply-To: <53D24DBB.4070901@gmail.com>
References: <CAFOm_+7DUEbtPwz_KS+EEQwsWO9Y7-byhBL4Zki=HP9qGCegxQ@mail.gmail.com>
	<53D24DBB.4070901@gmail.com>
Message-ID: <CAFOm_+7xQwfpmV+VvWUPi6Cu_5Jf=j34gUobqzTnNhp5ymQMrQ@mail.gmail.com>

2014-07-25 14:29 GMT+02:00 Duncan Murdoch <murdoch.duncan at gmail.com>:
> On 25/07/2014 8:05 AM, Luca Braglia wrote:
>>
>> Hello everybody,
>>
>> as a young/unexperienced R package developer (only a few, mainly
>> for personal use) i was thinking it could be very useful having a
>> "meta" task view for all package-development related
>> packages and/or function.
>>
>> Something like ...
>>
>> Creation
>> - utils::package.skeleton, pkgKitten, Rcpp::Rcpp.package.skeleton
>>
>> Foreign languages interfaces:
>> - Rcpp
>>
>> Documentation
>> - roxygen2
>>
>> Profiling:
>> - utils::Rprof
>> - profr
>> - proftools
>>
>> Unit test
>> - RUnit
>> - testthat
>>
>> Spell checking
>> - tools::aspell_package_* functions
>>
>> "Misc":
>> - devtools
>>
>> and so on.
>>
>> These are only the ones i (use or know) & (remember), but for
>> sure there is already a lot of useful code in this area and
>> having a summary (by more experienced developers) of which good
>> tools are available would be *very* useful, IMHO.
>>
>> How about it?
>
>
> Sounds like a good idea.  You should do it.
>
> Download the "ctv" package, and read the vignette for instructions.
>
> Duncan Murdoch

Fine, I've set up a github repo here

https://github.com/lbraglia/PackageDevelopmentTaskView

and a first thread about task view structure here

https://github.com/lbraglia/PackageDevelopmentTaskView/issues/1

Contribution (via e-mail or github) are, of course, really welcome.

Cheers, Luca


From dutangc at gmail.com  Sun Jul 27 09:33:02 2014
From: dutangc at gmail.com (Christophe Dutang)
Date: Sun, 27 Jul 2014 09:33:02 +0200
Subject: [Rd] [Wishlist] a 'PackageDevelopment' Task View
In-Reply-To: <CAFOm_+7xQwfpmV+VvWUPi6Cu_5Jf=j34gUobqzTnNhp5ymQMrQ@mail.gmail.com>
References: <CAFOm_+7DUEbtPwz_KS+EEQwsWO9Y7-byhBL4Zki=HP9qGCegxQ@mail.gmail.com>
	<53D24DBB.4070901@gmail.com>
	<CAFOm_+7xQwfpmV+VvWUPi6Cu_5Jf=j34gUobqzTnNhp5ymQMrQ@mail.gmail.com>
Message-ID: <8E2B1A5C-6EC9-4E2E-AEA5-189AA8644361@gmail.com>

Hi Luca,

Let me suggest to follow the table of contents of http://cran.r-project.org/doc/manuals/r-release/R-exts.html

For example, you could use the following TOC:

1 - Creating R pkg
2 - Writing documentation and vignettes
3 - Profiling code
4 - Debugging, spell checking
5 - Foreign languages interfaces
6 - GUI and other frond-ends 
7 - Unit testing
8 - Benchmarking
9 - Automation


Maybe 7 and 8 could be merged?

Regards, Christophe
?
Christophe Dutang
LMM, UdM, Le Mans, France
web: http://dutangc.free.fr

Le 26 juil. 2014 ? 17:04, Luca Braglia <lbraglia at gmail.com> a ?crit :

> 2014-07-25 14:29 GMT+02:00 Duncan Murdoch <murdoch.duncan at gmail.com>:
>> On 25/07/2014 8:05 AM, Luca Braglia wrote:
>>> 
>>> Hello everybody,
>>> 
>>> as a young/unexperienced R package developer (only a few, mainly
>>> for personal use) i was thinking it could be very useful having a
>>> "meta" task view for all package-development related
>>> packages and/or function.
>>> 
>>> Something like ...
>>> 
>>> Creation
>>> - utils::package.skeleton, pkgKitten, Rcpp::Rcpp.package.skeleton
>>> 
>>> Foreign languages interfaces:
>>> - Rcpp
>>> 
>>> Documentation
>>> - roxygen2
>>> 
>>> Profiling:
>>> - utils::Rprof
>>> - profr
>>> - proftools
>>> 
>>> Unit test
>>> - RUnit
>>> - testthat
>>> 
>>> Spell checking
>>> - tools::aspell_package_* functions
>>> 
>>> "Misc":
>>> - devtools
>>> 
>>> and so on.
>>> 
>>> These are only the ones i (use or know) & (remember), but for
>>> sure there is already a lot of useful code in this area and
>>> having a summary (by more experienced developers) of which good
>>> tools are available would be *very* useful, IMHO.
>>> 
>>> How about it?
>> 
>> 
>> Sounds like a good idea.  You should do it.
>> 
>> Download the "ctv" package, and read the vignette for instructions.
>> 
>> Duncan Murdoch
> 
> Fine, I've set up a github repo here
> 
> https://github.com/lbraglia/PackageDevelopmentTaskView
> 
> and a first thread about task view structure here
> 
> https://github.com/lbraglia/PackageDevelopmentTaskView/issues/1
> 
> Contribution (via e-mail or github) are, of course, really welcome.
> 
> Cheers, Luca
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From lbraglia at gmail.com  Sun Jul 27 16:46:03 2014
From: lbraglia at gmail.com (Luca Braglia)
Date: Sun, 27 Jul 2014 16:46:03 +0200
Subject: [Rd] [Wishlist] a 'PackageDevelopment' Task View
In-Reply-To: <8E2B1A5C-6EC9-4E2E-AEA5-189AA8644361@gmail.com>
References: <CAFOm_+7DUEbtPwz_KS+EEQwsWO9Y7-byhBL4Zki=HP9qGCegxQ@mail.gmail.com>
	<53D24DBB.4070901@gmail.com>
	<CAFOm_+7xQwfpmV+VvWUPi6Cu_5Jf=j34gUobqzTnNhp5ymQMrQ@mail.gmail.com>
	<8E2B1A5C-6EC9-4E2E-AEA5-189AA8644361@gmail.com>
Message-ID: <20140727144602.GA3424@np350v5c>

On 27/07/14 -  09:33, Christophe Dutang wrote:
> Hi Luca,
> 
> Let me suggest to follow the table of contents of http://cran.r-project.org/doc/manuals/r-release/R-exts.html
> 
> For example, you could use the following TOC:
> 
> 1 - Creating R pkg
> 2 - Writing documentation and vignettes
> 3 - Profiling code
> 4 - Debugging, spell checking
> 5 - Foreign languages interfaces
> 6 - GUI and other frond-ends 
> 7 - Unit testing
> 8 - Benchmarking
> 9 - Automation
> 
> 
> Maybe 7 and 8 could be merged?
> 


Thanks Christophe for the feedback

I'm starting to think I'd like to keep the "Source Code" section
separated from the "Documentation" section ...  eg ideally the
macro topics could be in this order

1 - Creation
2 - Source Code
3 - Documentation
4 - Tools and services (was "Automation")

Furthermore IMHO a granular sub-topic structure is a plus (eg
few packages for a distinct/well-focused task is no problem,
maybe a resource ... )

An updated temp TOC (integrating your ideas, and some new
packages listed) could be

==============================================================

1 - Creation


  o Creating R packages - utils::package.skeleton, pkgKitten,
    Rcpp::Rcpp.package.skeleton 


2 - Source code


  o Foreign languages interfaces - base R support for that,
    inline, Rcpp , Rcpp11, rJava 

  o Debugging - base::debug utils::recover and friends

  o Code analysis - codetools

  o Profiling - utils::Rprof, aprof, profr, proftools 

  o Benchmarking - base::system.time, microbenchmarking, rbenchmark 

  o Unit testing - RUnit, svUnit, testthat 


3 - Documentation


  o Writing Package Documentation (functions, data sets, classes
    and methods, packages) - roxygen2

  o Writing Vignettes - Sweave, knitr

  o Spell checking - tools::aspell_package_* functions
   
 
4 - Tools and services


  o Editors (supporting package development)
  
  o IDEs (supporting package development)

  o Makefiles

  o Revision control (most common in the R community): 
    subversion, git

  o Hosting services (most common in the R community): 
    r-forge, github


==============================================================


I have a few doubts if "8.Linking GUIs and other front-ends to R"
from R-exts could be strictly in topic with _R_package_
development (eg looking at the list above) but not much
experience in that area and jm2c.

And I have to integrate these Gabor's suggestions yet :

1) List the software mentioned here or provide links:
   http://en.wikibooks.org/wiki/R_Programming/Settings#Integrated_development_environment
   http://en.wikipedia.org/wiki/Comparison_of_open-source_software_hosting_facilities
   http://en.wikipedia.org/wiki/Comparison_of_revision_control_software
   http://en.wikipedia.org/wiki/Continuous_integration#Software

2) Go through the R Extensions manual and add all tools listed.

3) Use of Rcpp/Rcpp11 implies the use of C++ tools too and use of
   rjava implies java tools.




Further ideas/comments/proposals are welcome.


Cheers, Luca


From spencer.graves at structuremonitoring.com  Sun Jul 27 17:42:32 2014
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Sun, 27 Jul 2014 08:42:32 -0700
Subject: [Rd] [Wishlist] a 'PackageDevelopment' Task View
In-Reply-To: <20140727144602.GA3424@np350v5c>
References: <CAFOm_+7DUEbtPwz_KS+EEQwsWO9Y7-byhBL4Zki=HP9qGCegxQ@mail.gmail.com>	<53D24DBB.4070901@gmail.com>	<CAFOm_+7xQwfpmV+VvWUPi6Cu_5Jf=j34gUobqzTnNhp5ymQMrQ@mail.gmail.com>	<8E2B1A5C-6EC9-4E2E-AEA5-189AA8644361@gmail.com>
	<20140727144602.GA3424@np350v5c>
Message-ID: <53D51DE8.1000009@structuremonitoring.com>

On 7/27/2014 7:46 AM, Luca Braglia wrote:
> On 27/07/14 -  09:33, Christophe Dutang wrote:
>> Hi Luca,
>>
>> Let me suggest to follow the table of contents of http://cran.r-project.org/doc/manuals/r-release/R-exts.html
>>
>> For example, you could use the following TOC:
>>
>> 1 - Creating R pkg
>> 2 - Writing documentation and vignettes
>> 3 - Profiling code
>> 4 - Debugging, spell checking
>> 5 - Foreign languages interfaces
>> 6 - GUI and other frond-ends
>> 7 - Unit testing
>> 8 - Benchmarking
>> 9 - Automation
>>
>>
>> Maybe 7 and 8 could be merged?
>>
>
> Thanks Christophe for the feedback
>
> I'm starting to think I'd like to keep the "Source Code" section
> separated from the "Documentation" section ...  eg ideally the
> macro topics could be in this order
>
> 1 - Creation
> 2 - Source Code
> 3 - Documentation
> 4 - Tools and services (was "Automation")
>
> Furthermore IMHO a granular sub-topic structure is a plus (eg
> few packages for a distinct/well-focused task is no problem,
> maybe a resource ... )
>
> An updated temp TOC (integrating your ideas, and some new
> packages listed) could be
>
> ==============================================================
>
> 1 - Creation
>
>
>    o Creating R packages - utils::package.skeleton, pkgKitten,
>      Rcpp::Rcpp.package.skeleton
>
>
> 2 - Source code
>
>
>    o Foreign languages interfaces - base R support for that,
>      inline, Rcpp , Rcpp11, rJava
>
>    o Debugging - base::debug utils::recover and friends
>
>    o Code analysis - codetools
>
>    o Profiling - utils::Rprof, aprof, profr, proftools
>
>    o Benchmarking - base::system.time, microbenchmarking, rbenchmark
>
>    o Unit testing - RUnit, svUnit, testthat
>
>
> 3 - Documentation
>
>
>    o Writing Package Documentation (functions, data sets, classes
>      and methods, packages) - roxygen2
>
>    o Writing Vignettes - Sweave, knitr
>
>    o Spell checking - tools::aspell_package_* functions
>     
>   
> 4 - Tools and services
>
>
>    o Editors (supporting package development)
>    
>    o IDEs (supporting package development)
>
>    o Makefiles
>
>    o Revision control (most common in the R community):
>      subversion, git
>
>    o Hosting services (most common in the R community):
>      r-forge, github
>
>
> ==============================================================
>
>
> I have a few doubts if "8.Linking GUIs and other front-ends to R"
> from R-exts could be strictly in topic with _R_package_
> development (eg looking at the list above) but not much
> experience in that area and jm2c.
>
> And I have to integrate these Gabor's suggestions yet :
>
> 1) List the software mentioned here or provide links:
>     http://en.wikibooks.org/wiki/R_Programming/Settings#Integrated_development_environment
>     http://en.wikipedia.org/wiki/Comparison_of_open-source_software_hosting_facilities
>     http://en.wikipedia.org/wiki/Comparison_of_revision_control_software
>     http://en.wikipedia.org/wiki/Continuous_integration#Software
>
> 2) Go through the R Extensions manual and add all tools listed.
>
> 3) Use of Rcpp/Rcpp11 implies the use of C++ tools too and use of
>     rjava implies java tools.


       I've heard claims that people who write documentation with unit 
tests first tend to get better code faster than people who write the 
code first and documentation (and maybe examples and unit tests) later.  
I've heard there is research behind this.  However, I'm not sure where 
to find it.  Others may be able to suggest publications that support or 
refute this claim.


       In any event, I tend to create (a) documentation first, including 
(b) unit tests in the examples section, before (c) writing code.  When I 
started writing R packages following this model, I felt my software 
development productivity increased by a factor of 5 or so.  That may 
sound crazy, but I had written code for decades and struggled 
continually with bugs introduced months or maybe years earlier.  "R CMD 
check" dramatically shortened the debug time to produce "trustworthy 
code" (John Chambers' "prime directive").  As a bonus, I got better 
software with documentation making it much easier to share with 
potential users -- in less time with less effort, heartache, blood, 
sweat and tears, etc.  I have not come to using roxygen2, though I've 
been enormously impressed with other things Hadley Wickham has done;  
fortune(298).


       This perspective is reflected in the Wikipedia article on 
"Package development process" and the comparison table of "Selected 
repositories" in the Wikipedia article on "Software repository".  I 
believe that both these articles could be improved by people with 
broader experience and deeper understanding of these issues than I have.


       Spencer Graves

> Further ideas/comments/proposals are welcome.
>
>
> Cheers, Luca
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Spencer Graves, PE, PhD
President and Chief Technology Officer
Structure Inspection and Monitoring, Inc.
751 Emerson Ct.
San Jos?, CA 95126
ph:  408-655-4567
web:  www.structuremonitoring.com


From lbraglia at gmail.com  Sun Jul 27 18:23:49 2014
From: lbraglia at gmail.com (Luca Braglia)
Date: Sun, 27 Jul 2014 18:23:49 +0200
Subject: [Rd] [Wishlist] a 'PackageDevelopment' Task View
In-Reply-To: <53D51DE8.1000009@structuremonitoring.com>
References: <CAFOm_+7DUEbtPwz_KS+EEQwsWO9Y7-byhBL4Zki=HP9qGCegxQ@mail.gmail.com>
	<53D24DBB.4070901@gmail.com>
	<CAFOm_+7xQwfpmV+VvWUPi6Cu_5Jf=j34gUobqzTnNhp5ymQMrQ@mail.gmail.com>
	<8E2B1A5C-6EC9-4E2E-AEA5-189AA8644361@gmail.com>
	<20140727144602.GA3424@np350v5c>
	<53D51DE8.1000009@structuremonitoring.com>
Message-ID: <20140727162348.GA4463@np350v5c>

On 27/07/14 -  08:42, Spencer Graves wrote:
> On 7/27/2014 7:46 AM, Luca Braglia wrote:
> >I'm starting to think I'd like to keep the "Source Code" section
> >separated from the "Documentation" section ...  eg ideally the
> >macro topics could be in this order
> >
> >1 - Creation
> >2 - Source Code
> >3 - Documentation
> >4 - Tools and services (was "Automation")
> >
> >Furthermore IMHO a granular sub-topic structure is a plus (eg
> >few packages for a distinct/well-focused task is no problem,
> >maybe a resource ... )
> >
> >An updated temp TOC (integrating your ideas, and some new
> >packages listed) could be
> >
> >==============================================================
> >
> >1 - Creation
> >
> >
> >   o Creating R packages - utils::package.skeleton, pkgKitten,
> >     Rcpp::Rcpp.package.skeleton
> >
> >
> >2 - Source code
> >
> >
> >   o Foreign languages interfaces - base R support for that,
> >     inline, Rcpp , Rcpp11, rJava
> >
> >   o Debugging - base::debug utils::recover and friends
> >
> >   o Code analysis - codetools
> >
> >   o Profiling - utils::Rprof, aprof, profr, proftools
> >
> >   o Benchmarking - base::system.time, microbenchmarking, rbenchmark
> >
> >   o Unit testing - RUnit, svUnit, testthat
> >
> >
> >3 - Documentation
> >
> >
> >   o Writing Package Documentation (functions, data sets, classes
> >     and methods, packages) - roxygen2
> >
> >   o Writing Vignettes - Sweave, knitr
> >
> >   o Spell checking - tools::aspell_package_* functions
> >4 - Tools and services
> >
> >
> >   o Editors (supporting package development)
> >   o IDEs (supporting package development)
> >
> >   o Makefiles
> >
> >   o Revision control (most common in the R community):
> >     subversion, git
> >
> >   o Hosting services (most common in the R community):
> >     r-forge, github
> >
> >
> >==============================================================
> >
> 
> 
>       I've heard claims that people who write documentation with unit tests
> first tend to get better code faster than people who write the code first
> and documentation (and maybe examples and unit tests) later.  I've heard
> there is research behind this.  However, I'm not sure where to find it.
> Others may be able to suggest publications that support or refute this
> claim.
> 
> 
>       In any event, I tend to create (a) documentation first, including (b)
> unit tests in the examples section, before (c) writing code.  When I started
> writing R packages following this model, I felt my software development
> productivity increased by a factor of 5 or so.  


Hi Spencer,

I'm trying that way of developing too (test before code), but
the numbering in my previous mail are not meant to be suggestion
for development process/flow steps (apologies for that, it was
only a way to alternate lists (numbers for sections, bullets for
tasks), no numbering is really going to be included in the task
view).

The proposed TOC was compiled in a way that (to me) eases finding which
packages are available, given what are you working on (source code
or documentation) and the specific task you need to accomplish.

Best,
  Luca


From spencer.graves at structuremonitoring.com  Sun Jul 27 19:07:57 2014
From: spencer.graves at structuremonitoring.com (Spencer Graves)
Date: Sun, 27 Jul 2014 10:07:57 -0700
Subject: [Rd] [Wishlist] a 'PackageDevelopment' Task View
In-Reply-To: <20140727162348.GA4463@np350v5c>
References: <CAFOm_+7DUEbtPwz_KS+EEQwsWO9Y7-byhBL4Zki=HP9qGCegxQ@mail.gmail.com>
	<53D24DBB.4070901@gmail.com>
	<CAFOm_+7xQwfpmV+VvWUPi6Cu_5Jf=j34gUobqzTnNhp5ymQMrQ@mail.gmail.com>
	<8E2B1A5C-6EC9-4E2E-AEA5-189AA8644361@gmail.com>
	<20140727144602.GA3424@np350v5c>
	<53D51DE8.1000009@structuremonitoring.com>
	<20140727162348.GA4463@np350v5c>
Message-ID: <53D531ED.1090200@structuremonitoring.com>

On 7/27/2014 9:23 AM, Luca Braglia wrote:
> On 27/07/14 -  08:42, Spencer Graves wrote:
>> On 7/27/2014 7:46 AM, Luca Braglia wrote:
>>> I'm starting to think I'd like to keep the "Source Code" section
>>> separated from the "Documentation" section ...  eg ideally the
>>> macro topics could be in this order
>>>
>>> 1 - Creation
>>> 2 - Source Code
>>> 3 - Documentation
>>> 4 - Tools and services (was "Automation")
>>>
>>> Furthermore IMHO a granular sub-topic structure is a plus (eg
>>> few packages for a distinct/well-focused task is no problem,
>>> maybe a resource ... )
>>>
>>> An updated temp TOC (integrating your ideas, and some new
>>> packages listed) could be
>>>
>>> ==============================================================
>>>
>>> 1 - Creation
>>>
>>>
>>>    o Creating R packages - utils::package.skeleton, pkgKitten,
>>>      Rcpp::Rcpp.package.skeleton
>>>
>>>
>>> 2 - Source code
>>>
>>>
>>>    o Foreign languages interfaces - base R support for that,
>>>      inline, Rcpp , Rcpp11, rJava
>>>
>>>    o Debugging - base::debug utils::recover and friends
>>>
>>>    o Code analysis - codetools
>>>
>>>    o Profiling - utils::Rprof, aprof, profr, proftools
>>>
>>>    o Benchmarking - base::system.time, microbenchmarking, rbenchmark
>>>
>>>    o Unit testing - RUnit, svUnit, testthat
>>>
>>>
>>> 3 - Documentation
>>>
>>>
>>>    o Writing Package Documentation (functions, data sets, classes
>>>      and methods, packages) - roxygen2
>>>
>>>    o Writing Vignettes - Sweave, knitr
>>>
>>>    o Spell checking - tools::aspell_package_* functions
>>> 4 - Tools and services
>>>
>>>
>>>    o Editors (supporting package development)
>>>    o IDEs (supporting package development)
>>>
>>>    o Makefiles
>>>
>>>    o Revision control (most common in the R community):
>>>      subversion, git
>>>
>>>    o Hosting services (most common in the R community):
>>>      r-forge, github
>>>
>>>
>>> ==============================================================
>>>
>>
>>        I've heard claims that people who write documentation with unit tests
>> first tend to get better code faster than people who write the code first
>> and documentation (and maybe examples and unit tests) later.  I've heard
>> there is research behind this.  However, I'm not sure where to find it.
>> Others may be able to suggest publications that support or refute this
>> claim.
>>
>>
>>        In any event, I tend to create (a) documentation first, including (b)
>> unit tests in the examples section, before (c) writing code.  When I started
>> writing R packages following this model, I felt my software development
>> productivity increased by a factor of 5 or so.
>
> Hi Spencer,
>
> I'm trying that way of developing too (test before code), but
> the numbering in my previous mail are not meant to be suggestion
> for development process/flow steps (apologies for that, it was
> only a way to alternate lists (numbers for sections, bullets for
> tasks), no numbering is really going to be included in the task
> view).
>
> The proposed TOC was compiled in a way that (to me) eases finding which
> packages are available, given what are you working on (source code
> or documentation) and the specific task you need to accomplish.

       Of  course:  You need to write to match how your target audience 
would most likely want to approach the subject.


       Regarding "finding which packages are available", I didn't see 
the sos package on the list:  The "findFn" function searches the help 
pages of contributed packages and returns the results sorted so the 
package with the most matches and total score appear first. 
"writeFindFn2xls" produces an Excel workbook with a package summary 
followed by the list of individual pages.  For me, it's the fastest 
literature search I know for anything statistical.  Whatever I find 
there has documentation and working code that I can trace line by line 
if I don't understand the documentation.  I find things faster, and I 
learn faster as a result.  [Disclaimer:  I'm the lead author of sos.  If 
anyone knows anything better, I'd like to know.]


       Spencer

> Best,
>    Luca


From lbraglia at gmail.com  Sun Jul 27 20:18:23 2014
From: lbraglia at gmail.com (Luca Braglia)
Date: Sun, 27 Jul 2014 20:18:23 +0200
Subject: [Rd] [Wishlist] a 'PackageDevelopment' Task View
In-Reply-To: <53D531ED.1090200@structuremonitoring.com>
References: <CAFOm_+7DUEbtPwz_KS+EEQwsWO9Y7-byhBL4Zki=HP9qGCegxQ@mail.gmail.com>
	<53D24DBB.4070901@gmail.com>
	<CAFOm_+7xQwfpmV+VvWUPi6Cu_5Jf=j34gUobqzTnNhp5ymQMrQ@mail.gmail.com>
	<8E2B1A5C-6EC9-4E2E-AEA5-189AA8644361@gmail.com>
	<20140727144602.GA3424@np350v5c>
	<53D51DE8.1000009@structuremonitoring.com>
	<20140727162348.GA4463@np350v5c>
	<53D531ED.1090200@structuremonitoring.com>
Message-ID: <20140727181823.GA5159@np350v5c>

On 27/07/14 -  10:07, Spencer Graves wrote:
>       Regarding "finding which packages are available", I didn't see the sos
> package on the list:  

Many packages are still missing (eg devtools) because in these
first steps i'm trying to focus mainly on the Task View TOC/structure
(and in the case, devtools has to be "splitted" across tasks, TODO)

BTW sos is a great package, +1 for the disclaimer, but IMHO
doesn't fit R package development strictly

jm2c
  Luca


From doon75 at hotmail.com  Sun Jul 27 22:19:08 2014
From: doon75 at hotmail.com (Darren Norris)
Date: Sun, 27 Jul 2014 13:19:08 -0700 (PDT)
Subject: [Rd] [Wishlist] a 'PackageDevelopment' Task View
In-Reply-To: <20140727181823.GA5159@np350v5c>
References: <CAFOm_+7DUEbtPwz_KS+EEQwsWO9Y7-byhBL4Zki=HP9qGCegxQ@mail.gmail.com>
	<53D24DBB.4070901@gmail.com>
	<CAFOm_+7xQwfpmV+VvWUPi6Cu_5Jf=j34gUobqzTnNhp5ymQMrQ@mail.gmail.com>
	<8E2B1A5C-6EC9-4E2E-AEA5-189AA8644361@gmail.com>
	<20140727144602.GA3424@np350v5c>
	<53D51DE8.1000009@structuremonitoring.com>
	<20140727162348.GA4463@np350v5c>
	<53D531ED.1090200@structuremonitoring.com>
	<20140727181823.GA5159@np350v5c>
Message-ID: <1406492348514-4694625.post@n4.nabble.com>

Hi Luca,
Based on previous comments seems like
1) there should be a "multi-functional"/"general" category to cover packages
like devtools
2) I think finding existing function code ( e.g in cran packages / github )
is necessary and saves many hours in package development (no one wants to
develop a package and then discover they have just reinvented the wheel). So
including packages like sos seems justified and helpful.
Best,
Darren




--
View this message in context: http://r.789695.n4.nabble.com/Wishlist-a-PackageDevelopment-Task-View-tp4694537p4694625.html
Sent from the R devel mailing list archive at Nabble.com.


From jeroenooms at gmail.com  Mon Jul 28 10:47:57 2014
From: jeroenooms at gmail.com (Jeroen Ooms)
Date: Mon, 28 Jul 2014 10:47:57 +0200
Subject: [Rd] Parsing and deparsing of escaped unicode characters
Message-ID: <CABFfbXtZdJsr2igTxDEo2KP5St+fRDxsNRnpa_udkp+yFHDCMQ@mail.gmail.com>

In both R and JSON (and many other languages), unicode characters can
be escaped using a backslash followed by a lowercase "u" and a 4 digit
hex code. However when deparsing a character vector in R on Windows,
the non-latin characters get escaped as "<U+" followed by their 4
digit hex code and ">":

> x <- "I like \u5BFF\u53F8"
> cat(x)
I like ??
> src <- deparse(x)
> cat(src)
"I like <U+5BFF><U+53F8>"

Same thing happens on linux when we disable UTF8:

Sys.setlocale("LC_ALL", "C")
x <- "I like \u5BFF\u53F8"
nchar(x) #9, seems OK
cat(deparse(x))
"I like <U+5BFF><U+53F8>"

As a result, the code does not parse() back into the proper unicode
characters. I am currently using a regular expression to convert the
output of deparse into something that parse() (and json) supports:

utf8conv <- function(x) {
  gsub("<U\\+([0-9A-F]{4})>","\\\\u\\1",x)
}

> src <- utf8conv(src)
> y <- parse(text=src)[[1]]
> identical(x, y)
[1] TRUE

However this is suboptimal because it introduces a big performance
overhead for large text. Several things are unclear to me:

 - Why does deparse() use a different escape notation than parse? Is
there a way to make deparse output \uXXXX for unicode instead?
 - Why does deparse on windows escape this in the first place, and not
keep the actual character when the locale supports it?

 > sessionInfo()
R version 3.1.1 (2014-07-10)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252
[2] LC_CTYPE=English_United States.1252
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base


From john.maindonald at anu.edu.au  Mon Jul 28 13:08:09 2014
From: john.maindonald at anu.edu.au (John Maindonald)
Date: Mon, 28 Jul 2014 11:08:09 +0000
Subject: [Rd] R-devel Digest, Vol 137, Issue 25
In-Reply-To: <mailman.14.1406541606.17498.r-devel@r-project.org>
References: <mailman.14.1406541606.17498.r-devel@r-project.org>
Message-ID: <13C08D04-4E32-48C6-8D13-F800591341E0@anu.edu.au>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20140728/fbfc87fd/attachment.pl>

From rpruim at calvin.edu  Tue Jul 29 05:56:56 2014
From: rpruim at calvin.edu (Randall Pruim)
Date: Tue, 29 Jul 2014 03:56:56 +0000
Subject: [Rd] combining generics/methods from multiple packages
Message-ID: <8B06E38F-B5DC-461C-8252-EBE1A5C1DE91@calvin.edu>


I?m wondering if there is any way for me to create a generic function in a package that merges the generics and methods from two or more packages that each define a generic with the same name, but have non intersecting instances.

Here is an example.  dplyr and MASS both define an S3 generic select() but define no colliding methods.  Just to make life extra interesting, there is also utils::select.list() which is not intended to be a method for select() and in fact wants to receive a character vector, not a list.

I would like to create a generic select() in my package such that

1) select.ridgelm <- MASS:::select.ridgelm  [Note: this is not exported.]

2) select.data.frame <- dplyr::select.data.frame [Also not exported.] etc. for other methods in this package.

3) utils::select.list does NOT act like the select method for lists.

The only way I have been able to figure out how to do this requires use of the ::: operator, so let me add criterion 4:

4) The resulting package must pass CRAN checks without issues.

Is this possible?  If so how?

My goal is to have select() work on objects that either package can handle without having to use MASS::select() or dplyr::select().

Thanks in advance for any help ? even if it is an explanation for why this is impossible and I should stop trying.

?rjp


From lbraglia at gmail.com  Tue Jul 29 22:19:12 2014
From: lbraglia at gmail.com (Luca Braglia)
Date: Tue, 29 Jul 2014 22:19:12 +0200
Subject: [Rd] [Wishlist] a 'PackageDevelopment' Task View
In-Reply-To: <1406492348514-4694625.post@n4.nabble.com>
References: <CAFOm_+7DUEbtPwz_KS+EEQwsWO9Y7-byhBL4Zki=HP9qGCegxQ@mail.gmail.com>
	<53D24DBB.4070901@gmail.com>
	<CAFOm_+7xQwfpmV+VvWUPi6Cu_5Jf=j34gUobqzTnNhp5ymQMrQ@mail.gmail.com>
	<8E2B1A5C-6EC9-4E2E-AEA5-189AA8644361@gmail.com>
	<20140727144602.GA3424@np350v5c>
	<53D51DE8.1000009@structuremonitoring.com>
	<20140727162348.GA4463@np350v5c>
	<53D531ED.1090200@structuremonitoring.com>
	<20140727181823.GA5159@np350v5c>
	<1406492348514-4694625.post@n4.nabble.com>
Message-ID: <20140729201912.GB13773@np350v5c>

On 27/07/14 -  13:19, Darren Norris wrote:
> including packages like sos seems justified and helpful.

Thanks Darren and John,

considering both the programmer and the user point of view, being
a bit less strict about inclusion criteria in this case (search)
may be definitely helpful.

Best, 
 Luca


From andy_liaw at merck.com  Tue Jul 29 23:10:48 2014
From: andy_liaw at merck.com (Liaw, Andy)
Date: Tue, 29 Jul 2014 17:10:48 -0400
Subject: [Rd] making cuda-based R package CRAN friendly
Message-ID: <D5FA03935F7418419332B61CA255F65FC999FBED2C@USCTMXP51012.merck.com>

Dear R-devel,

We are planning a package that provides R interface to cuBLAS (CUDA accelerated BLAS).  Due to CUDA's requirement, we are wondering if anyone can provide some guidance and suggestions on best way forward.

CUDA lists Visual Studio as a requirement on Windows, and it looks like no one had succeed in building a DLL that can be called from R using the mingw tools in Rtools.  Google search results suggest that no one had been able to get around using MSVS to build a usable DLL so far.  What worked was to build .cu code into DLL using MSVS, then placing the DLL into the src/ subdirectory, and then using R CMD INSTALL to finish building the binary package with the help of configure.win and src/Makevars.win files.

As far as I can tell, no gpu/cuda based R package has Windows version, on or off CRAN. Several simply states Windows as being not supported.  We would like to make our package as widely applicable as possible, so we're seeking advise/suggestion on how to resolve this issue.

One way is to have an R-only package, and upon load the package, detect whether the shared library needed is present.  If not, inform the user to run a function that detect the OS and presence of CUDA, and download the appropriate shared library file.  The problem is as long as there are C code in src/, it will not pass CRAN check.  Also, that seems to violate some CRAN policies.

The other is simply to follow what packages like gputools/rpud/etc. and have only source package on CRAN, and provide Windows binaries off CRAN (perhaps with a note in the README on where  to download them).  

We'd very much appreciate any pointer.

Best,
Andy

Andy Liaw
Biometrics Research, Merck Research Laboratories
PO Box 2000 RY34-300 Rahway, NJ 07065


Notice:  This e-mail message, together with any attachme...{{dropped:11}}


From adrian.baddeley at uwa.edu.au  Wed Jul 30 05:20:30 2014
From: adrian.baddeley at uwa.edu.au (Adrian Baddeley)
Date: Wed, 30 Jul 2014 11:20:30 +0800
Subject: [Rd] listof
Message-ID: <CF5661163F77A44781208D9AC4FDEA72621441DD5C@IS-WIN-376.staffad.uwa.edu.au>

Dear R developers

A question about the class 'listof',  defined in package 'stats'.

Other than its definition and use in the code for 'anova',
we can't see that the class 'listof' is used for anything else
(in recommended packages, or elsewhere).

In the spatstat package we have been using a 'listof' 
to represent a list of spatial objects of the same class
(such as point patterns, or pixel images)
and we've defined a plot method.

Is it OK for us to hijack an existing class in this way, 
or is this a violation of some future plans/ design feature of R ?

We're about to publish a book on spatstat
so I would much appreciate advice if we need to change it.

regards
Adrian

Prof Adrian Baddeley FAA
University of Western Australia 

From Yamshid.FarhatQuinones at bkw.ch  Wed Jul 30 10:42:38 2014
From: Yamshid.FarhatQuinones at bkw.ch (Yamshid)
Date: Wed, 30 Jul 2014 01:42:38 -0700 (PDT)
Subject: [Rd] Interface between R and a Open Load Flow tool (Gridlabd or
	OpenDSS)
Message-ID: <1406709758530-4694752.post@n4.nabble.com>

Dear all,

I want to know if it would be possible to have an interface between R and an
electrical load flow tool.
It would be interesting with Gridlab-D, an open-source tool that works in
C++.

The idea is that we can develop a R programm that internally calls Gridlab-D
and process directly the results (also able to develop internal loops).

In case that is not possible yet. Would someone be interested into develop
this interface together?

Thank you.



--
View this message in context: http://r.789695.n4.nabble.com/Interface-between-R-and-a-Open-Load-Flow-tool-Gridlabd-or-OpenDSS-tp4694752.html
Sent from the R devel mailing list archive at Nabble.com.


From ripley at stats.ox.ac.uk  Thu Jul 31 07:30:15 2014
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 31 Jul 2014 06:30:15 +0100
Subject: [Rd] listof
In-Reply-To: <CF5661163F77A44781208D9AC4FDEA72621441DD5C@IS-WIN-376.staffad.uwa.edu.au>
References: <CF5661163F77A44781208D9AC4FDEA72621441DD5C@IS-WIN-376.staffad.uwa.edu.au>
Message-ID: <53D9D467.9080409@stats.ox.ac.uk>

On 30/07/2014 04:20, Adrian Baddeley wrote:
> Dear R developers
>
> A question about the class 'listof',  defined in package 'stats'.
>
> Other than its definition and use in the code for 'anova',

For alias.lm and aov in file aov.R, not anova.

> we can't see that the class 'listof' is used for anything else
> (in recommended packages, or elsewhere).
>
> In the spatstat package we have been using a 'listof'
> to represent a list of spatial objects of the same class
> (such as point patterns, or pixel images)
> and we've defined a plot method.
>
> Is it OK for us to hijack an existing class in this way,
> or is this a violation of some future plans/ design feature of R ?

The class is for lists to be printed in a certain way (there are other 
such classes, e.g. "simple.list", "DList") and for which coef() makes sense.

If your plot() method makes sense for all such lists (e.g. just calls 
plot() on each element) this seems fine: if not you need a more specific 
class inheriting from "listof".

The class has been in R 'for ever' and I do not see it being changed. 
I've added some notes to the source files about where it is used.

>
> We're about to publish a book on spatstat
> so I would much appreciate advice if we need to change it.
>
> regards
> Adrian
>
> Prof Adrian Baddeley FAA
> University of Western Australia


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From dusa.adrian at unibuc.ro  Thu Jul 31 10:27:15 2014
From: dusa.adrian at unibuc.ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Thu, 31 Jul 2014 11:27:15 +0300
Subject: [Rd] single quotes in strings, example block
Message-ID: <CAJ=0CtB9Wmkf+38CdAsgn3xFeD6Do8yPNCDup6s7jnXrJ73Rcg@mail.gmail.com>

Dear R-devel,

In the example block of the documentation for a package, I need to use
a single quote in a string:

    foo <- "Don't know"

After building the package, it gets printed as:

    foo <- "Dont know"


I read the "Writing R Extensions" and "Parsing Rd files" from top to
bottom, but didn't find any solution.

Using \verb{} doesn't help, as:
Tag \verb is invalid in a \examples block

Neither \sQuote doesn't help, as:
'\s' is an unrecognized escape in character string starting ""Don\s"

I found the only macros which are interpreted within text are \var and
\link ... therefore I am stuck.

Any hint to other documentation I might read?
Thank you,
Adrian

-- 
Adrian Dusa
University of Bucharest
Romanian Social Data Archive
Soseaua Panduri nr.90
050663 Bucharest sector 5
Romania


From murdoch.duncan at gmail.com  Thu Jul 31 11:55:31 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 31 Jul 2014 05:55:31 -0400
Subject: [Rd] single quotes in strings, example block
In-Reply-To: <CAJ=0CtB9Wmkf+38CdAsgn3xFeD6Do8yPNCDup6s7jnXrJ73Rcg@mail.gmail.com>
References: <CAJ=0CtB9Wmkf+38CdAsgn3xFeD6Do8yPNCDup6s7jnXrJ73Rcg@mail.gmail.com>
Message-ID: <53DA1293.6020506@gmail.com>

On 31/07/2014, 4:27 AM, Adrian Du?a wrote:
> Dear R-devel,
> 
> In the example block of the documentation for a package, I need to use
> a single quote in a string:
> 
>     foo <- "Don't know"
> 
> After building the package, it gets printed as:
> 
>     foo <- "Dont know"

I don't see this.  Can you give more details, i.e. R version, how you
printed it, etc.?

It may be that you're not using an ascii single quote character, your
editor has slipped in something else.

Duncan Murdoch

> 
> 
> I read the "Writing R Extensions" and "Parsing Rd files" from top to
> bottom, but didn't find any solution.
> 
> Using \verb{} doesn't help, as:
> Tag \verb is invalid in a \examples block
> 
> Neither \sQuote doesn't help, as:
> '\s' is an unrecognized escape in character string starting ""Don\s"
> 
> I found the only macros which are interpreted within text are \var and
> \link ... therefore I am stuck.
> 
> Any hint to other documentation I might read?
> Thank you,
> Adrian
>


From dusa.adrian at unibuc.ro  Thu Jul 31 12:40:20 2014
From: dusa.adrian at unibuc.ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Thu, 31 Jul 2014 13:40:20 +0300
Subject: [Rd] single quotes in strings, example block
In-Reply-To: <53DA1293.6020506@gmail.com>
References: <CAJ=0CtB9Wmkf+38CdAsgn3xFeD6Do8yPNCDup6s7jnXrJ73Rcg@mail.gmail.com>
	<53DA1293.6020506@gmail.com>
Message-ID: <CAJ=0CtAky2tzt7TRgRQGuF+85KYZsx8Q-4QgzOPdDvXiJhKqtQ@mail.gmail.com>

On Thu, Jul 31, 2014 at 12:55 PM, Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
> On 31/07/2014, 4:27 AM, Adrian Du?a wrote:
>> Dear R-devel,
>> [...]
>
> I don't see this.  Can you give more details, i.e. R version, how you
> printed it, etc.?
>
> It may be that you're not using an ascii single quote character, your
> editor has slipped in something else.

It must be related to my computer, then... it appears in the PDF file
created after the R CMD check.
It helps a lot, now that I know it is a possible MacOS matter, I will
re-post this in the R-SIG-MAC

Just in case, here are the details:

> R.version
               _
platform       x86_64-apple-darwin13.1.0
arch           x86_64
os             darwin13.1.0
system         x86_64, darwin13.1.0
status         RC
major          3
minor          1.1
year           2014
month          07
day            08
svn rev        66100
language       R
version.string R version 3.1.1 RC (2014-07-08 r66100)
nickname       Sock it to Me

Thank you,
Adrian


-- 
Adrian Dusa
University of Bucharest
Romanian Social Data Archive
Soseaua Panduri nr.90
050663 Bucharest sector 5
Romania


From murdoch.duncan at gmail.com  Thu Jul 31 13:01:31 2014
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 31 Jul 2014 07:01:31 -0400
Subject: [Rd] single quotes in strings, example block
In-Reply-To: <CAJ=0CtAky2tzt7TRgRQGuF+85KYZsx8Q-4QgzOPdDvXiJhKqtQ@mail.gmail.com>
References: <CAJ=0CtB9Wmkf+38CdAsgn3xFeD6Do8yPNCDup6s7jnXrJ73Rcg@mail.gmail.com>
	<53DA1293.6020506@gmail.com>
	<CAJ=0CtAky2tzt7TRgRQGuF+85KYZsx8Q-4QgzOPdDvXiJhKqtQ@mail.gmail.com>
Message-ID: <53DA220B.7050004@gmail.com>

On 31/07/2014, 6:40 AM, Adrian Du?a wrote:
> On Thu, Jul 31, 2014 at 12:55 PM, Duncan Murdoch
> <murdoch.duncan at gmail.com> wrote:
>> On 31/07/2014, 4:27 AM, Adrian Du?a wrote:
>>> Dear R-devel,
>>> [...]
>>
>> I don't see this.  Can you give more details, i.e. R version, how you
>> printed it, etc.?
>>
>> It may be that you're not using an ascii single quote character, your
>> editor has slipped in something else.
> 
> It must be related to my computer, then... it appears in the PDF file
> created after the R CMD check.
> It helps a lot, now that I know it is a possible MacOS matter, I will
> re-post this in the R-SIG-MAC
> 

Okay, now I see it in the PDF output of R CMD Rd2pdf on  MacOS.

This is an Inconsolata font issue.  If you look at the .tex file
(available with "R CMD Rd2pdf --no-clean") you'll see the quote there,
but LaTeX doesn't display it.

I don't remember what the fix is...

Duncan

> Just in case, here are the details:
> 
>> R.version
>                _
> platform       x86_64-apple-darwin13.1.0
> arch           x86_64
> os             darwin13.1.0
> system         x86_64, darwin13.1.0
> status         RC
> major          3
> minor          1.1
> year           2014
> month          07
> day            08
> svn rev        66100
> language       R
> version.string R version 3.1.1 RC (2014-07-08 r66100)
> nickname       Sock it to Me
> 
> Thank you,
> Adrian
> 
>


From dusa.adrian at unibuc.ro  Thu Jul 31 13:21:31 2014
From: dusa.adrian at unibuc.ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Thu, 31 Jul 2014 14:21:31 +0300
Subject: [Rd] single quotes in strings, example block
In-Reply-To: <53DA220B.7050004@gmail.com>
References: <CAJ=0CtB9Wmkf+38CdAsgn3xFeD6Do8yPNCDup6s7jnXrJ73Rcg@mail.gmail.com>
	<53DA1293.6020506@gmail.com>
	<CAJ=0CtAky2tzt7TRgRQGuF+85KYZsx8Q-4QgzOPdDvXiJhKqtQ@mail.gmail.com>
	<53DA220B.7050004@gmail.com>
Message-ID: <CAJ=0CtBAMP8Yt_2Yd7fs=pqs9UoN-o2vX6trR5jAkhyYv5ALBA@mail.gmail.com>

On Thu, Jul 31, 2014 at 2:01 PM, Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
> On 31/07/2014, 6:40 AM, Adrian Du?a wrote:
>> [...]
> Okay, now I see it in the PDF output of R CMD Rd2pdf on  MacOS.
>
> This is an Inconsolata font issue.  If you look at the .tex file
> (available with "R CMD Rd2pdf --no-clean") you'll see the quote there,
> but LaTeX doesn't display it.
>
> I don't remember what the fix is...

The good news is that CRAN built packages display the correct
version... it's only a local (hence not critical) issue.

Best wishes,
Adrian

-- 
Adrian Dusa
University of Bucharest
Romanian Social Data Archive
Soseaua Panduri nr.90
050663 Bucharest sector 5
Romania


From marc_schwartz at me.com  Thu Jul 31 13:23:00 2014
From: marc_schwartz at me.com (Marc Schwartz)
Date: Thu, 31 Jul 2014 06:23:00 -0500
Subject: [Rd] single quotes in strings, example block
In-Reply-To: <53DA1293.6020506@gmail.com>
References: <CAJ=0CtB9Wmkf+38CdAsgn3xFeD6Do8yPNCDup6s7jnXrJ73Rcg@mail.gmail.com>
	<53DA1293.6020506@gmail.com>
Message-ID: <0AB136BA-3590-499D-8F73-BC66CF447025@me.com>


On Jul 31, 2014, at 4:55 AM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> On 31/07/2014, 4:27 AM, Adrian Du?a wrote:
>> Dear R-devel,
>> 
>> In the example block of the documentation for a package, I need to use
>> a single quote in a string:
>> 
>>    foo <- "Don't know"
>> 
>> After building the package, it gets printed as:
>> 
>>    foo <- "Dont know"
> 
> I don't see this.  Can you give more details, i.e. R version, how you
> printed it, etc.?
> 
> It may be that you're not using an ascii single quote character, your
> editor has slipped in something else.
> 
> Duncan Murdoch
> 
>> 
>> 
>> I read the "Writing R Extensions" and "Parsing Rd files" from top to
>> bottom, but didn't find any solution.
>> 
>> Using \verb{} doesn't help, as:
>> Tag \verb is invalid in a \examples block
>> 
>> Neither \sQuote doesn't help, as:
>> '\s' is an unrecognized escape in character string starting ""Don\s"
>> 
>> I found the only macros which are interpreted within text are \var and
>> \link ... therefore I am stuck.
>> 
>> Any hint to other documentation I might read?
>> Thank you,
>> Adrian
>> 


I may not have had enough coffee yet this morning, but might this be related to the use of Fancy/Smart quotes?

If so and you are using a text editor that supports them, you may have to disable them when working with this kind of output.

Alternatively, or perhaps in addition, take a look at ?options and adjust 'useFancyQuotes' as may be required. I frequently have to set it to FALSE when using Sweave.

Regards,

Marc Schwartz


From tshort.rlists at gmail.com  Thu Jul 31 23:41:44 2014
From: tshort.rlists at gmail.com (Tom Short)
Date: Thu, 31 Jul 2014 17:41:44 -0400
Subject: [Rd] Interface between R and a Open Load Flow tool (Gridlabd or
	OpenDSS)
In-Reply-To: <1406709758530-4694752.post@n4.nabble.com>
References: <1406709758530-4694752.post@n4.nabble.com>
Message-ID: <CA+o9du2OKef=W+AKwMGrFhLJjMmg9_vDacEiRJ+2M___c+tQDw@mail.gmail.com>

It's certainly possible. The best approach depends mainly on how
tightly you need to bind to input and output data and how much of the
internals you need to access. Here are a couple of approaches that
I've used with OpenDSS:

* Batch mode -- Generate inputs, run OpenDSS (or Gridlab-D), then read
the text outputs.

* COM interface -- Under windows, you can access OpenDSS via a COM
interface. I think the OpenDSS website has examples of doing this from
Python and Matlab. It's similar under R.

Beyond that, there should be more direct ways to interface to either.

On Wed, Jul 30, 2014 at 4:42 AM, Yamshid <Yamshid.FarhatQuinones at bkw.ch> wrote:
> Dear all,
>
> I want to know if it would be possible to have an interface between R and an
> electrical load flow tool.
> It would be interesting with Gridlab-D, an open-source tool that works in
> C++.
>
> The idea is that we can develop a R programm that internally calls Gridlab-D
> and process directly the results (also able to develop internal loops).
>
> In case that is not possible yet. Would someone be interested into develop
> this interface together?
>
> Thank you.
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Interface-between-R-and-a-Open-Load-Flow-tool-Gridlabd-or-OpenDSS-tp4694752.html
> Sent from the R devel mailing list archive at Nabble.com.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


