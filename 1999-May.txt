From Kurt.Hornik@ci.tuwien.ac.at  Mon May  3 07:03:21 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 3 May 1999 08:03:21 +0200
Subject: \code and \link
Message-ID: <199905030603.IAA14024@pc87.maho.magnaeu.com>

With Fritz's new debugging additions to Rdconv, several packages give
messages of the kind

  missing link(s):  this-is-escaped-codenormal-bracket30bracket-normal

when building the documentation.

This comes from

	\link{\code{xxx}}

(where `xxx' contains characters that need to be escaped) which should
really be

	\code{\link{xxx}}

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon May  3 08:37:03 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 3 May 1999 09:37:03 +0200 (MET DST)
Subject: par help page  errors (PR#182)
Message-ID: <199905030737.JAA16014@pubhealth.ku.dk>

>>>>> "Martyn" == Martyn Plummer <plummer@iarc.fr> writes:

    Martyn> R 0.64.0 In the help page for par(), the parameters "oma" and
    Martyn> "omi" are described as vectors of the form c(xb, xt, yl, yr)
    Martyn> whereas they are c(xb,yl,xt,yr)

Thanks Martyn.
Committed a fix naming them   c(xbot, yleft, xtop, yright).

Should be in one of the next snapshots (R-release...).
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wvenable@arcola.stats.adelaide.edu.au  Mon May  3 09:54:11 1999
From: wvenable@arcola.stats.adelaide.edu.au (Bill Venables)
Date: Mon, 3 May 1999 18:24:11 +0930 (CST)
Subject: par help page  errors (PR#182)
In-Reply-To: <199905030737.JAA16014@pubhealth.ku.dk>
References: <199905030737.JAA16014@pubhealth.ku.dk>
Message-ID: <14125.25651.873737.624218@arcola.stats.adelaide.edu.au>

>>>>> "MM" == maechler  <maechler@stat.math.ethz.ch> writes:

>>>>> "Martyn" == Martyn Plummer <plummer@iarc.fr> writes:
    Martyn> R 0.64.0 In the help page for par(), the parameters
    Martyn> "oma" and "omi" are described as vectors of the form

I have always wondered why "oma" was so named.  The margin
parameters are "mar" (relative) and "mai" (in inches), why isn't
the outer margin parameter for relative units called "omr".  To
me "Oma" sounds like someone's grandmother... . :-)

    Martyn> c(xb, xt, yl, yr) whereas they are c(xb,yl,xt,yr)

    MM> Thanks Martyn.  Committed a fix naming them c(xbot,
    MM> yleft, xtop, yright).

Why not go all the way and just use c(bottom, left, top, right)?
the x/y prefixes only serve to confuse in my view.  These are
margins, not axes.

-- 
-----------------------------------------------------------------
Bill Venables, Statistician, CMIS Environmetrics Project.

Physical address:                            Postal address:
CSIRO Marine Laboratories,                   PO Box 120,       
233 Middle St, Cleveland, Queensland         Cleveland, Qld, 4163
AUSTRALIA                                    AUSTRALIA

Telephone: +61 7 3826 7251     Email: Bill.Venables@cmis.csiro.au     
      Fax: +61 7 3826 7304
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a.o.jaunsen@astro.uio.no  Mon May  3 10:27:53 1999
From: a.o.jaunsen@astro.uio.no (a.o.jaunsen@astro.uio.no)
Date: Mon, 3 May 1999 11:27:53 +0200 (MET DST)
Subject: compilation of R-0.63.3 on alpha (PR#183)
Message-ID: <199905030927.LAA18266@pubhealth.ku.dk>

This is a multipart MIME message.

--==_Exmh_981436288450
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable


Hi !

I have problems compiling R successfully on a DEC-UINX 4.0E.
I have applied the recommended config.site, which I enclose.
As can be seen from the compilation log there are linking errors...

I did a 'make check' which fails for the R binary.

>make check
=2E
=2E
=2E
Building system startup profile
make[7]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/profile'
make[6]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
'
make[5]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src'
make[4]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3'
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/tests=
'
Massaging examples into base-Ex.R ...
Running all help() examples ...
=2E./../bin/R --vanilla < base-Ex.R > base-Ex.Rout
/bin/sh: 5676 Floating exception
make[2]: *** [base-Ex.Rout] Error 136
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/tests=
/Examp
les'
make[1]: *** [test-Examples] Error 2
make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/tests=
'
make: [test-All] Error 2 (ignored)


Regards,
Andreas



--==_Exmh_981436288450
Content-Type: text/plain ; name="config.site"; charset=iso-8859-1
Content-Description: config.site
Content-Disposition: attachment; filename="config.site"
Content-Transfer-Encoding: quoted-printable

#! /bin/sh

### This file is part of R.
###
### R is free software; you can redistribute it and/or modify it under
### the terms of the GNU General Public License as published by the Free
### Software Foundation; either version 2 of the License, or (at your
### option) any later version.
###
### R is distributed in the hope that it will be useful, but WITHOUT ANY
### WARRANTY; without even the implied warranty of MERCHANTABILITY or
### FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
### License for more details.
###
### You should have received a copy of the GNU General Public License
### along with R; if not, you can obtain it via the World Wide Web at
### `http://www.gnu.org/copyleft/gpl.html', or by writing to the Free
### Software Foundation, 59 Temple Place -- Suite 330, Boston, MA
### 02111-3307, USE.

# By means of this file you can (also) provide default values for the
# configuration process.  To set variables, uncomment the VAR=3DDEFAULT
# lines and set DEFAULT according to your needs.

# The command used to spool PostScript files to the printer.
# If unspecified, the system will look for either "lpr" or "lp"
R_PRINTCMD=3Dppr

# The paper size for the local (PostScript) printer.
# It must either be left blank or set to one of "a4" or "letter".
# If left blank the system will use "a4".
R_PAPERSIZE=3Da4

# The default behavior of R if it encounters EOF in batch mode.
# Set this to one of "--save" or "--no-save" depending whether you
# want automatic saving of `.RData' or not.
# R_BATCHSAVE=3D

# The command which runs the C compiler.
# If unspecified, a search is made for gcc and cc (in that order).
# To override this choice, specify the name of the command which runs
# the compiler here, for example `c89'.
CC=3D"cc"

# Debugging and optimization options for the C compiler.
# Use this to specify CFLAGS for the version of the C compiler specified
# above.  If unspecified, defaults to "-g -O2" for gcc, and "-g" in all
# other cases.
# CFLAGS=3D"-g -I/usr/local/include"

# Header file search directory (`-IDIR') and any other miscellaneous
# options for the C preprocessor and compiler.
# CPPFLAGS=3D

# The command which runs the the FORTRAN compiler.
# If unspecified, a search is made for g77, fort77, f77, f90, xlf, cf77,
# and fc (in that order).  If none of these is found, f2c is used if
# found; otherwise, R cannot be compiled.  The search mechanism can be
# changed using the `--with-g77', `--with-f77', and `--with-f2c' command
# line options to configure.
FC=3D"f77"

# Options for the FORTRAN compiler.
# Use this to specify FFLAGS for the version of the compiler specified
# above.  If unspecified, defaults to "-O2" for g77, and "" otherwise.
FFLAGS=3D"-g -fpe3"

# The command to be used to load the main R binary.
# This is usually the FORTRAN or C compiler, but the automatic choice
# can be overriden by means of this variable.
LDCMD=3D"f77 -g -nofor_main -fpe3 "

# For `-l' and `-L' options to pass to the linker.
# LIBS=3D

# The flags which are necessary for loading main program which will load
# DLLs at runtime.  HP-UX and Linux-elf are examples of platforms which
# use this.  These platforms are already taken care of by configure.
# DLLFLAGS=3D

# Any special flags which must be used when compiling C code to be
# turned into a shared library.  This is typically something like -fpic
# or -fPIC.  If this variable is left unspecified an attempt is made to
# automatically detect the correct value by configure.
# CPICFLAGS=3D

# The following variable can be used to provide any PIC flags for the
# FORTRAN compiler (if you are using one).  If not specified, the value
# of CPICFLAGS above is used.
# FPICFLAGS=3D

# Any special flags which are required by "ld" when creating shared
# libraries.  This is usually automatically detected by configure.
SHLIBLDFLAGS=3D'-shared -expect_unresolved "*"'

--==_Exmh_981436288450
Content-Type: text/plain ; name="rlog.txt"; charset=iso-8859-1
Content-Description: rlog.txt
Content-Disposition: attachment; filename="rlog.txt"
Content-Transfer-Encoding: quoted-printable

>make
make[1]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/afm'=

make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/afm'
make[1]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/demo=
s'
make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/demos=
'
make[1]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/doc'=

make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/doc'
make[1]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/etc'=

make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/etc'
make[1]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src'=

make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
includ
e'
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/i=
nclude
'
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
appl'
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c S_compat.c=
 -o =

S_compat.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c approx.c -=
o =

approx.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c bakslv.c -=
o =

bakslv.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c binning.c =
-o =

binning.o
f77 -g -fpe3 -c ch2inv.f -o ch2inv.o
f77 -g -fpe3 -c chol.f -o chol.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c cpoly.c -o=
 =

cpoly.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c cumsum.c -=
o =

cumsum.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c distance.c=
 -o =

distance.o
f77 -g -fpe3 -c dpoco.f -o dpoco.o
f77 -g -fpe3 -c dpodi.f -o dpodi.o
f77 -g -fpe3 -c dpofa.f -o dpofa.o
f77 -g -fpe3 -c dposl.f -o dposl.o
f77 -g -fpe3 -c dqrdc.f -o dqrdc.o
f77 -g -fpe3 -c dqrdc2.f -o dqrdc2.o
f77 -g -fpe3 -c dqrls.f -o dqrls.o
f77 -g -fpe3 -c dqrsl.f -o dqrsl.o
f77 -g -fpe3 -c dqrutl.f -o dqrutl.o
f77 -g -fpe3 -c dsvdc.f -o dsvdc.o
f77 -g -fpe3 -c dtrco.f -o dtrco.o
f77 -g -fpe3 -c dtrsl.f -o dtrsl.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c eigen.c -o=
 =

eigen.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fortran.c =
-o =

fortran.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fft.c -o f=
ft.o
f77 -g -fpe3 -c fmin.f -o fmin.o
f77 -g -fpe3 -c lminfl.f -o lminfl.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c loglin.c -=
o =

loglin.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c lowess.c -=
o =

lowess.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c machar.c -=
o =

machar.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c massdist.c=
 -o =

massdist.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pretty.c -=
o =

pretty.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pythag.c -=
o =

pythag.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rowsum.c -=
o =

rowsum.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c splines.c =
-o =

splines.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c stem.c -o =
stem.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c strsignif.=
c -o =

strsignif.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c tabulate.c=
 -o =

tabulate.o
f77 -g -fpe3 -c uncmin.f -o uncmin.o
f77 -g -fpe3 -c zeroin.f -o zeroin.o
ar cr libappl.a S_compat.o approx.o bakslv.o binning.o  ch2inv.o chol.o =

cpoly.o cumsum.o distance.o dpoco.o dpodi.o dpofa.o dposl.o dqrdc.o dqrdc=
2.o =

dqrls.o dqrsl.o dqrutl.o dsvdc.o dtrco.o dtrsl.o eigen.o fortran.o fft.o =

fmin.o lminfl.o loglin.o lowess.o machar.o massdist.o pretty.o pythag.o =

rowsum.o splines.o stem.o strsignif.o tabulate.o uncmin.o zeroin.o
ranlib libappl.a
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/a=
ppl'
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
nmath'
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c mlutils.c =
-o =

mlutils.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c d1mach.c -=
o =

d1mach.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c i1mach.c -=
o =

i1mach.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fmax2.c -o=
 =

fmax2.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fmin2.c -o=
 =

fmin2.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fmod.c -o =
fmod.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fprec.c -o=
 =

fprec.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fround.c -=
o =

fround.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c ftrunc.c -=
o =

ftrunc.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c sign.c -o =
sign.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fsign.c -o=
 =

fsign.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fsquare.c =
-o =

fsquare.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fcube.c -o=
 =

fcube.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c imax2.c -o=
 =

imax2.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c imin2.c -o=
 =

imin2.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c chebyshev.=
c -o =

chebyshev.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c logrelerr.=
c -o =

logrelerr.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c lgammacor.=
c -o =

lgammacor.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c gammalims.=
c -o =

gammalims.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c gamma.c -o=
 =

gamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c lgamma.c -=
o =

lgamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c gamma_cody=
=2Ec -o =

gamma_cody.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c beta.c -o =
beta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c lbeta.c -o=
 =

lbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c polygamma.=
c -o =

polygamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c bessel_i.c=
 -o =

bessel_i.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c bessel_j.c=
 -o =

bessel_j.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c bessel_k.c=
 -o =

bessel_k.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c bessel_y.c=
 -o =

bessel_y.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c choose.c -=
o =

choose.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c snorm.c -o=
 =

snorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c sunif.c -o=
 =

sunif.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c sexp.c -o =
sexp.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dgamma.c -=
o =

dgamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pgamma.c -=
o =

pgamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qgamma.c -=
o =

qgamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rgamma.c -=
o =

rgamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dbeta.c -o=
 =

dbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pbeta.c -o=
 =

pbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qbeta.c -o=
 =

qbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rbeta.c -o=
 =

rbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dunif.c -o=
 =

dunif.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c punif.c -o=
 =

punif.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qunif.c -o=
 =

qunif.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c runif.c -o=
 =

runif.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dnorm.c -o=
 =

dnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pnorm.c -o=
 =

pnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qnorm.c -o=
 =

qnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rnorm.c -o=
 =

rnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dlnorm.c -=
o =

dlnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c plnorm.c -=
o =

plnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qlnorm.c -=
o =

qlnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rlnorm.c -=
o =

rlnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c df.c -o df=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pf.c -o pf=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qf.c -o qf=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rf.c -o rf=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dt.c -o dt=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pt.c -o pt=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qt.c -o qt=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rt.c -o rt=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dchisq.c -=
o =

dchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pchisq.c -=
o =

pchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qchisq.c -=
o =

qchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rchisq.c -=
o =

rchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dbinom.c -=
o =

dbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pbinom.c -=
o =

pbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qbinom.c -=
o =

qbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rbinom.c -=
o =

rbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dcauchy.c =
-o =

dcauchy.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pcauchy.c =
-o =

pcauchy.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qcauchy.c =
-o =

qcauchy.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rcauchy.c =
-o =

rcauchy.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dexp.c -o =
dexp.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pexp.c -o =
pexp.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qexp.c -o =
qexp.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rexp.c -o =
rexp.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dgeom.c -o=
 =

dgeom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pgeom.c -o=
 =

pgeom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qgeom.c -o=
 =

qgeom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rgeom.c -o=
 =

rgeom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dhyper.c -=
o =

dhyper.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c phyper.c -=
o =

phyper.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qhyper.c -=
o =

qhyper.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rhyper.c -=
o =

rhyper.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dnbinom.c =
-o =

dnbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pnbinom.c =
-o =

pnbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qnbinom.c =
-o =

qnbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rnbinom.c =
-o =

rnbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dpois.c -o=
 =

dpois.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c ppois.c -o=
 =

ppois.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qpois.c -o=
 =

qpois.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rpois.c -o=
 =

rpois.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dweibull.c=
 -o =

dweibull.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pweibull.c=
 -o =

pweibull.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qweibull.c=
 -o =

qweibull.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rweibull.c=
 -o =

rweibull.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dlogis.c -=
o =

dlogis.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c plogis.c -=
o =

plogis.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qlogis.c -=
o =

qlogis.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rlogis.c -=
o =

rlogis.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dnchisq.c =
-o =

dnchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pnchisq.c =
-o =

pnchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qnchisq.c =
-o =

qnchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dnbeta.c -=
o =

dnbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pnbeta.c -=
o =

pnbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pnf.c -o p=
nf.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pnt.c -o p=
nt.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c ptukey.c -=
o =

ptukey.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qtukey.c -=
o =

qtukey.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dwilcox.c =
-o =

dwilcox.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pwilcox.c =
-o =

pwilcox.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qwilcox.c =
-o =

qwilcox.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rwilcox.c =
-o =

rwilcox.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dsignrank.=
c -o =

dsignrank.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c psignrank.=
c -o =

psignrank.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qsignrank.=
c -o =

qsignrank.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rsignrank.=
c -o =

rsignrank.o
ar cr libmath.a mlutils.o d1mach.o i1mach.o fmax2.o fmin2.o fmod.o fprec.=
o =

fround.o ftrunc.o sign.o fsign.o fsquare.o fcube.o imax2.o imin2.o chebys=
hev.o =

logrelerr.o lgammacor.o gammalims.o gamma.o lgamma.o gamma_cody.o beta.o =

lbeta.o polygamma.o bessel_i.o bessel_j.o bessel_k.o bessel_y.o choose.o =

snorm.o sunif.o sexp.o dgamma.o pgamma.o qgamma.o rgamma.o dbeta.o pbeta.=
o =

qbeta.o rbeta.o dunif.o punif.o qunif.o runif.o dnorm.o pnorm.o qnorm.o =

rnorm.o dlnorm.o plnorm.o qlnorm.o rlnorm.o df.o pf.o qf.o rf.o dt.o pt.o=
 qt.o =

rt.o dchisq.o pchisq.o qchisq.o rchisq.o dbinom.o pbinom.o qbinom.o rbino=
m.o =

dcauchy.o pcauchy.o qcauchy.o rcauchy.o dexp.o pexp.o qexp.o rexp.o dgeom=
=2Eo =

pgeom.o qgeom.o rgeom.o dhyper.o phyper.o qhyper.o rhyper.o dnbinom.o =

pnbinom.o qnbinom.o rnbinom.o dpois.o ppois.o qpois.o rpois.o dweibull.o =

pweibull.o qweibull.o rweibull.o dlogis.o plogis.o qlogis.o rlogis.o dnch=
isq.o =

pnchisq.o qnchisq.o dnbeta.o pnbeta.o pnf.o pnt.o ptukey.o qtukey.o dwilc=
ox.o =

pwilcox.o qwilcox.o rwilcox.o dsignrank.o psignrank.o qsignrank.o rsignra=
nk.o
ranlib libmath.a
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/n=
math'
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
unix'
gcc -ieee_with_inexact -g  -I../include -I../../src/include  -c dataentry=
=2Ec
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c devPS.c -o=
 =

devPS.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c devPicTeX.=
c -o =

devPicTeX.o
gcc -ieee_with_inexact -g  -I../include -I../../src/include  -c devX11.c
(cd ../include; make FFTab.h)
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
includ
e'
make[3]: `FFTab.h' is up to date.
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/i=
nclude
'
(cd ../include; make FFDecl.h)
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
includ
e'
make[3]: `FFDecl.h' is up to date.
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/i=
nclude
'
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dynload.c =
-o =

dynload.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c edit.c -o =
edit.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fileio.c -=
o =

fileio.o
gcc -ieee_with_inexact -g  -I../include -I../../src/include  -c rotated.c=

gcc -ieee_with_inexact -g -I../include -I../../src/include  -c system.c -=
o =

system.o
ar cr libunix.a dataentry.o devPS.o devPicTeX.o devX11.o dynload.o edit.o=
 =

fileio.o rotated.o system.o
ranlib libunix.a
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/u=
nix'
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
main'
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c arithmetic=
=2Ec -o =

arithmetic.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c array.c -o=
 =

array.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c attrib.c -=
o =

attrib.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c bind.c -o =
bind.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c builtin.c =
-o =

builtin.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c character.=
c -o =

character.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c coerce.c -=
o =

coerce.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c colors.c -=
o =

colors.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c complex.c =
-o =

complex.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c context.c =
-o =

context.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c cov.c -o c=
ov.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c cum.c -o c=
um.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c debug.c -o=
 =

debug.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c deparse.c =
-o =

deparse.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c deriv.c -o=
 =

deriv.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c devices.c =
-o =

devices.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dotcode.c =
-o =

dotcode.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dstruct.c =
-o =

dstruct.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c duplicate.=
c -o =

duplicate.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c envir.c -o=
 =

envir.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c errors.c -=
o =

errors.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c eval.c -o =
eval.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c format.c -=
o =

format.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fourier.c =
-o =

fourier.o
yacc gram.y
mv y.tab.c gram.c
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c gram.c -o =
gram.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c graphics.c=
 -o =

graphics.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c iosupport.=
c -o =

iosupport.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c list.c -o =
list.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c logic.c -o=
 =

logic.o

[1]    Done                          netscape -install
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c main.c -o =
main.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c match.c -o=
 =

match.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c memory.c -=
o =

memory.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c model.c -o=
 =

model.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c names.c -o=
 =

names.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c objects.c =
-o =

objects.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c optimize.c=
 -o =

optimize.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c options.c =
-o =

options.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c par.c -o p=
ar.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c paste.c -o=
 =

paste.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c plot.c -o =
plot.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c plot3d.c -=
o =

plot3d.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c plotmath.c=
 -o =

plotmath.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c print.c -o=
 =

print.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c printarray=
=2Ec -o =

printarray.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c printvecto=
r.c =

-o printvector.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c printutils=
=2Ec -o =

printutils.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c random.c -=
o =

random.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c relop.c -o=
 =

relop.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c saveload.c=
 -o =

saveload.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c scan.c -o =
scan.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c seq.c -o s=
eq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c sort.c -o =
sort.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c source.c -=
o =

source.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c split.c -o=
 =

split.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c subassign.=
c -o =

subassign.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c subscript.=
c -o =

subscript.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c subset.c -=
o =

subset.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c summary.c =
-o =

summary.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c unique.c -=
o =

unique.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c util.c -o =
util.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c version.c =
-o =

version.o
f77 -g -nofor_main -fpe3   -o ../../bin/R.binary arithmetic.o array.o att=
rib.o =

bind.o builtin.o character.o coerce.o colors.o complex.o context.o cov.o =
cum.o =

debug.o deparse.o deriv.o devices.o dotcode.o dstruct.o duplicate.o envir=
=2Eo =

errors.o eval.o format.o fourier.o gram.o graphics.o iosupport.o list.o =

logic.o main.o match.o memory.o model.o names.o objects.o optimize.o opti=
ons.o =

par.o paste.o plot.o plot3d.o plotmath.o print.o printarray.o printvector=
=2Eo =

printutils.o random.o relop.o saveload.o scan.o seq.o sort.o source.o spl=
it.o =

subassign.o subscript.o subset.o summary.o unique.o util.o version.o =

=2E./unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE =

-L/local/X11R5/lib -lX11 -ldnet_stub -ldxml  -ltermcap -lm
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/m=
ain'
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
script
s'
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/s=
cripts
'
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/base'
Building R base package
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/base'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/eda'
make[4]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/eda/src'
gcc -ieee_with_inexact -g  -I../../../../include -c line.c -o line.o
gcc -ieee_with_inexact -g  -I../../../../include -c smooth.c -o smooth.o
ld -shared -lm -o eda.so line.o smooth.o
ld:
Warning: Unresolved:
floor
ceil
rsort
__exc_add_pc_range_table
__exc_add_gp_range
__exc_remove_pc_range_table
__exc_remove_gp_range
make[4]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/eda/src'
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/eda'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/lqs'
make[4]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/lqs/src'
gcc -ieee_with_inexact -g  -I../../../../include -c lqs.c -o lqs.o
ld -shared -lm -o lqs.so lqs.o
ld:
Warning: Unresolved:
unif_rand
calloc
free
R_PosInf
seed_in
dqrdc2_
dqrsl_
rsort
rPsort
sqrt
seed_out
log
__exc_add_pc_range_table
__exc_add_gp_range
__exc_remove_pc_range_table
__exc_remove_gp_range
make[4]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/lqs/src'
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/lqs'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/modreg'
make[4]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/modreg/src'
f77 -g -fpe3 -fpic -c bsplvd.f -o bsplvd.o
f77 -g -fpe3 -fpic -c bvalue.f -o bvalue.o
f77 -g -fpe3 -fpic -c bvalus.f -o bvalus.o
f77 -g -fpe3 -fpic -c dpbfa.f -o dpbfa.o
f77 -g -fpe3 -fpic -c dpbsl.f -o dpbsl.o
gcc -ieee_with_inexact -g  -I../../../../include -c ksmooth.c -o ksmooth.=
o
gcc -ieee_with_inexact -g  -I../../../../include -c loessc.c -o loessc.o
f77 -g -fpe3 -fpic -c loessf.f -o loessf.o
f77 -g -fpe3 -fpic -c ppr.f -o ppr.o
f77 -g -fpe3 -fpic -c qsbart.f -o qsbart.o
f77 -g -fpe3 -fpic -c sbart.f -o sbart.o
fort: Info: sbart.f, line 164: No path to this statement
23012 continue
^
f77 -g -fpe3 -fpic -c sgram.f -o sgram.o
f77 -g -fpe3 -fpic -c sinerp.f -o sinerp.o
f77 -g -fpe3 -fpic -c sslvrg.f -o sslvrg.o
f77 -g -fpe3 -fpic -c stxwx.f -o stxwx.o
=2E./../../../bin/R SHLIB -o modreg.so bsplvd.o bvalue.o bvalus.o dpbfa.o=
 =

dpbsl.o ksmooth.o loessc.o loessf.o ppr.o qsbart.o sbart.o sgram.o sinerp=
=2Eo =

sslvrg.o stxwx.o
make[5]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/modreg/src'
ld -shared -lm -o modreg.so bsplvd.o bvalue.o bvalus.o dpbfa.o dpbsl.o =

ksmooth.o loessc.o loessf.o ppr.o qsbart.o sbart.o sgram.o sinerp.o sslvr=
g.o =

stxwx.o -ldxml
ld:
Warning: Unresolved:
_OtsDivide32
R_NaReal
sprintf
warning
strcmp
calloc
free
strncpy
strcat
d1mach_
dqrdc_
dqrsl_
dsvdc_
intpr_
dblepr_
__exc_add_pc_range_table
__exc_add_gp_range
__exc_remove_pc_range_table
__exc_remove_gp_range
make[5]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/modreg/src'
make[4]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/modreg/src'
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/modreg'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/mva'
make[4]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/mva/src'
gcc -ieee_with_inexact -g  -I../../../../include -c dblcen.c -o dblcen.o
f77 -g -fpe3 -fpic -c hclust.f -o hclust.o
f77 -g -fpe3 -fpic -c kmns.f -o kmns.o
ld -shared -lm -o mva.so dblcen.o hclust.o kmns.o
ld:
Warning: Unresolved:
_OtsDivide32
__exc_add_pc_range_table
__exc_add_gp_range
__exc_remove_pc_range_table
__exc_remove_gp_range
make[4]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/mva/src'
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/mva'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/stepfun'
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/stepfun'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/profile'
Building system startup profile
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/profile'
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
'
make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src'
You should `make docs' now ...
make[1]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y'
Building ALL documentation (help, HTML, LaTeX, R-Examples)
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y'
         >>> Building help pages for package `base'
      Formats: text html latex example =

         >>> Building help pages for package `eda'
      Formats: text html latex example =

         >>> Building help pages for package `lqs'
      Formats: text html latex example =

         >>> Building help pages for package `modreg'
      Formats: text html latex example =

         >>> Building help pages for package `mva'
      Formats: text html latex example =

         >>> Building help pages for package `stepfun'
      Formats: text html latex example =

make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
'
make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary

--==_Exmh_981436288450--



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Mon May  3 18:40:23 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Mon, 3 May 1999 19:40:23 +0200 (MET DST)
Subject: parse error in terms (PR#184)
Message-ID: <199905031740.TAA26328@pubhealth.ku.dk>

If I use (0.64.0 in intel RH5.2)

abcdefg <- list()
abcdefg$abcdefg$abcdefg <- matrix(rpois(20,5),ncol=5)
terms(~(abcdefg$abcdefg$abcdefg[,1]==1)|(abcdefg$abcdefg$abcdefg[,3]==1)|
	(abcdefg$abcdefg$abcdefg[,5]==1))

I get a parse error. This seems to be connected to the length of the
names or of the expression, as I do not get an error if the list and
its elements are called a: a$a$a

(Please do not ask why I would want to do such a thing!)
  Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon May  3 18:55:07 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Mon, 3 May 1999 19:55:07 +0200 (MET DST)
Subject: parse error in terms (PR#184)
Message-ID: <199905031755.TAA26383@pubhealth.ku.dk>

On Mon, 3 May 1999 jlindsey@alpha.luc.ac.be wrote:

> If I use (0.64.0 in intel RH5.2)
> 
> abcdefg <- list()
> abcdefg$abcdefg$abcdefg <- matrix(rpois(20,5),ncol=5)
> terms(~(abcdefg$abcdefg$abcdefg[,1]==1)|(abcdefg$abcdefg$abcdefg[,3]==1)|
> 	(abcdefg$abcdefg$abcdefg[,5]==1))
> 
> I get a parse error. This seems to be connected to the length of the
> names or of the expression, as I do not get an error if the list and
> its elements are called a: a$a$a

This is fixed for 0.64.1.  terms.formula() used deparse with a line length
 of 60 characters. It now uses the maximum allowable length (currently 500
characters).

The survival5 test suite comes with a real example of why 60 characters is
not long enough.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue May  4 14:36:19 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 04 May 1999 09:36:19 -0400
Subject: rnorm
Message-ID: <372EF7D3.9F685535@bank-banque-canada.ca>

Brian

I've been playing a bit with the Wichmann-Hill RNG. I would prefer to have
normally distributed random numbers and I think I have things generally worked
out to use Wichmann-Hill and then Box-Muller. In the process, I was looking at
R's rnorm.c, but could not figure out what transformation is used in R to
convert uniform rv's to normal rv's. Do you know? It looks like there are
options in the code, but I couldn't figure out how an option is chosen.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue May  4 15:07:25 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 4 May 1999 15:07:25 +0100 (BST)
Subject: rnorm
Message-ID: <199905041407.PAA07212@toucan.stats.ox.ac.uk>


> Date: Tue, 04 May 1999 09:36:19 -0400
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> To: Brian Ripley <ripley@stats.ox.ac.uk>
> CC: R-devel <R-devel@stat.math.ethz.ch>
> Subject: rnorm
> 
> Brian
> 
> I've been playing a bit with the Wichmann-Hill RNG. I would prefer to have
> normally distributed random numbers and I think I have things generally worked
> out to use Wichmann-Hill and then Box-Muller. In the process, I was looking at
> R's rnorm.c, but could not figure out what transformation is used in R to
> convert uniform rv's to normal rv's. Do you know? It looks like there are
> options in the code, but I couldn't figure out how an option is chosen.
> 
> Paul
> 

Well, I hadn't looked until recently. I find all of that section of code
somewhat less than transparent (and spread across directories, let alone
files).

rnorm.c says

N01type N01_kind = KINDERMAN_RAMAGE;

so that is what you get by default. You can change it from C code as that
is an exported variable.  But the intended mechanism appears to be that it is
part of the choice of RNG in RNGkind, except that is it unused. See 
(nmath/sunif.c)

RNGTAB RNG_Table[] =
{
/* kind Nkind     name    is_seeded seed-length i1_s, *seed-vec */
    { 0, 0, "Wichmann-Hill",    0,      3,      123,    dummy},
    { 1, 0, "Marsaglia-MultiCarry",0,   2,      123,    dummy},
    { 2, 0, "Super-Duper",      0,      2,      123,    dummy},
    { 3, 0, "Mersenne-Twister", 0,  1+624,      123,    dummy},
    { 4, 0, "Rand",             0,      2,      -1,     dummy},
};

where Nkind is of N01type. I think Martin Maechler will need to explain
what he intended here, as well as why he did not use the enumeration
constants for Nkind in this table.  And

head src/include/Random.h 
/* only used by ../main/random.c  & ../nmath/sunif.c
 */

appears to be wrong: it is used in ../nmath/snorm.c too.

Martin: as a general policy I would prefer header files used in a few
places to be explicit, not hidden through Mathlib.h.  The way it is
currently done hides dependencies, as in the missing dependence of snorm.o on
$(top_srcdir)/src/include/Random.h.

[I have committed the dependencies in brief spell while Auckland was 
contactable.]

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May  4 23:27:23 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 5 May 1999 00:27:23 +0200 (MET DST)
Subject: [R] R_problem_buf in the S.h files & lists in .C (PR#185)
Message-ID: <199905042227.AAA05185@pubhealth.ku.dk>

Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:

> I didn't see any mention of this in the material on CRAN.  The two S.h
> files define R_problem_buf as a real symbol rather than simply
> declaring its existence. As a result, a shared library that links two
> or more files that include this will get duplicate symbol complaints.
> Since it is not defined elsewhere in the code, someone has to define it.

[I'll file this as a bug report and take it off of R-help]

Yes. This game is commonly played by the 

#ifdef __MAIN__
#define extern
#endif

and including the .h files in main.c. However, R doesn use that trick
(not even for the declarations in Defn.h) for some reason that I don't
quite see. A quick workaround could be to define the buffer in
S_compat.c. 

> A secondly thing is the documentation for .C() and company. It omits
> what type list() objects have when passed to a C routine. It should
> read void *, which is actually a SEXP * in this case. (I know, I
> should be using .External but I am trying to keep the code for the
> different S's and R's together until I have to abandon things.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May  5 17:31:59 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 05 May 1999 12:31:59 -0400
Subject: RNG  R/Splus compatibility
Message-ID: <3730727E.1ACB4D6D@bank-banque-canada.ca>

Starting with example Wichmann-Hill code from Brian Ripley I have been playing
with a set of programs for getting the same random sequences from R and Splus. A
copy is included below along with a test (which works in Solaris with R and
Splus 3.3).

The approach is somewhat different from the usual problems on this list as I am
trying to get the same results from Splus as I get from R. However, there are a
couple of R issues:

  - There  is a small change to RNGkind to allow  "default" (currently
Wichmann-Hill but could change from time to time).

 -The strategy for specifying the transformation to get rnorm results should be
examined, as I think it should be put into R and extended for other random
number transformations.

Paul Gilbert
________

# First define these 3 functions appropriately if you don't have them already:
# is.S <- function(){T or F}
# is.R <- function(){T or F}
# is.Splus <- function(){T or F}

if (is.S())
  {
    RNGkind <- function(kind=NULL)
      {# With a null argument this returns the current kind.
       # kind = "default" resets the RNG to the Splus default.
       # Splus does not allow arbitrary setting of .Random.seed so
       #     .RandomSeed is used. The existence of .RandomSeed is
       #     used to indicate whether an alternate RNG is used and the
       #     first element of .RandomSeed indicates the generator.
       if ( is.null(kind))
         {if(exists(".RandomSeed")) kind <- c("Wichmann-Hill")[1+.RandomSeed[1]]

          else                      kind <- "default"
         }
       else
         {# set the RNG kind
          if (kind == "default")
            {if(exists(".RandomSeed")) remove(".RandomSeed", where = 1) }
          else if (kind == "Wichmann-Hill")
             assign(".RandomSeed", c(0, as.integer(100000*runif(3))), where=1)
          else stop("Only Wichmann-Hill, default or NULL supported for kind.")
         }
       kind
      }


    if (!exists("set.seed.Splus")) set.seed.Splus <- set.seed

    set.seed <- function(seed=NULL)
      {# with a null argument this also serves as get.seed.
       kind <- RNGkind()
       if ( is.null(seed))
         {if (kind == "default") seed <-.Random.seed
          else                   seed <-.RandomSeed
         }
       else
         {# set seed
          if (kind == "default")
             {if (1==length(seed)) set.seed.Splus(seed)
              else                 assign(".Random.seed", seed, where=1)
             }
          else if (kind == "Wichmann-Hill")
             {if (3 == length(seed)) seed <- c(0,seed)
              if (0 != seed[1])
                         stop("seed[1] should be 0 for Wichmann-Hill RNG.")
              if (4 != length(seed))
                 stop("seed length is not consistent with kind Wichmann-Hill.")
              assign(".RandomSeed", seed, where=1)
             }
          else stop("seed does not match RNG kind.")
         }
       seed
      }

    set.RNORMtransform <- function(rnorm=NULL)
      {# with a null argument this returns setting
       if (is.null(rnorm))
          {if(exists(".RNORMtransform", where=1)) rnorm <- .RNORMtransform
           else                                   rnorm <- "default"
          }
       else
          {if (rnorm == "Box-Muller") assign(".RNORMtransform", rnorm, where=1)
           else if (rnorm == "default")
              {if(exists(".RNORMtransform", where=1))
                  remove(".RNORMtransform", where=1)}
           else stop("Only Box-Muller, default or NULL supported for rnorm.")
          }
       rnorm
      }

  }   # end of if is.S

if (is.R())
  {

    # the only change in RNGkind is to allow "default" (for "Wichmann-Hill")
    if (!exists("RNGkind.R")) RNGkind.R <- RNGkind
    RNGkind <- function (kind = NULL)
      {if ((!is.null(kind)) && (kind == "default")) kind <- "Wichmann-Hill"
       RNGkind.R(kind=kind)
      }

    set.seed <- function(seed=NULL)
      {# with a null argument this also serves as get.seed.
       kind <- RNGkind()
       if ( is.null(seed))
         {if (!exists(".Random.seed")) z <- runif(1) # initializes seed
          seed <-.Random.seed
         }
       else
         {# set seed
          if (kind == "Wichmann-Hill")
             {if (3 == length(seed)) seed <- c(0,seed)
              if (0 != seed[1])
                         stop("seed[1] should be 0 for Wichmann-Hill RNG.")
              if (4 != length(seed))
                 stop("seed length is not consistent with kind Wichmann-Hill.")
              assign(".Random.seed", seed, envir=.GlobalEnv)
             }
           else
              {# seed <- c(kind,seed) ????
               # should do some other checks or are they done elsewhere?
               assign(".Random.seed", seed, envir=.GlobalEnv)
              }
           # else stop("seed does not match RNG kind.")
          }
       seed
      }

    set.RNORMtransform <- function(rnorm=NULL)
      {# with a null argument this returns setting
       if (is.null(rnorm))
          {if(exists(".RNORMtransform", where=1)) rnorm <- .RNORMtransform
           else                                   rnorm <- "default"
          }
       else
          {if (rnorm == "Box-Muller")
                assign(".RNORMtransform", rnorm, envir=.GlobalEnv)
           else if (rnorm == "default")
              {if(exists(".RNORMtransform", where=1))
                  remove(".RNORMtransform", pos=1)}
           else stop("Only Box-Muller, default or NULL supported for rnorm.")
          }
       rnorm
      }

  }  # end of if is.R


# in both Splus and R:

    set.RNG <- function(kind=NULL, seed=NULL, rnorm=NULL)
      {# with a null argument this also serves as get.RNG so it is possible to
       # old <- set.RNG(...)
       # on.exit(set.RNG(old))
       # set.RNG("default")  can affect both kind and seed, but not rnorm
       if (is.list(kind))
         {kind  <- RNGkind(kind$kind)
          seed  <- set.seed(kind$seed)
          rnorm <- set.RNORMtransform(kind$rnorm)
         }
       else
         {kind  <- RNGkind(kind)
          seed  <- set.seed(seed)
          rnorm <- set.RNORMtransform(rnorm)
         }
       list(kind=kind, seed=seed, rnorm=rnorm)
      }

    if (!exists("runif.default")) runif.default <- runif

    runif <- function(n, min=0, max=1, compiled=is.R())
       {# This typically just calls runif.default, but allows using other
        # RNGs to generate the same sequence in R and S.
        # eg: set.seed(seed=c(1:3), kind="Wichmann-Hill")
        #     runif(10)

        if(RNGkind() == "default")  return(runif.default(n, min=min, max=max))
        else if(compiled)           return(runif.default(n, min=min, max=max))
        else seed <- set.seed() # returns the setting
        kind <-  c("Wichmann-Hill")[1+seed[1]]
        if(kind == "Wichmann-Hill")
           {out <- numeric(n)
            if (seed[1] != 0) stop("seed setting is not consistent with RNG.")
            x <- seed[2]; y <- seed[3]; z <- seed[4]
            for(i in 1:length(out))
               {x <- (171*x) %% 30269
                y <- (172*y) %% 30307
                z <- (170*z) %% 30323
                out[i] <- (x/30269 + y/30307 + z/30323) %% 1.0
               }
            set.seed( c(0, x,y,z))
           }
        else stop("runif RNG kind not supported.")
        out
       }


if (!exists("rnorm.default")) rnorm.default <- rnorm

rnorm <- function(n, mean=0, sd=1, compiled=F)
   {# This typically just calls rnorm.default, but provides the possibility of
    # using "Wichmann-Hill" to generate the same runif sequence in R and S and
    #    then generate the same normally distributed numbers.
    # eg: set.seed(seed=c(1:3), kind="Wichmann-Hill", rnorm="Box-Muller")
    #     rnorm(10)

    transf <- set.RNORMtransform()
    if(transf == "default") return(rnorm.default(n, mean=mean, sd=sd))
    else if(compiled)       return(rnorm.default(n, mean=mean, sd=sd))
    else if(transf == "Box-Muller")
      {out <- runif(n + n%%2)
       out <- matrix(out, 2, length(out)/2)
       out <- c( sqrt(log(1/out[1,])) * sin(2*pi*out[2,]),
                 sqrt(log(1/out[1,])) * cos(2*pi*out[2,]))
       if (1 == n%%2) out <- out[-length(out)] #drop last point if n is odd
      }
    else stop("normal rv transformation technique not supported.")

    mean + out*sd
   }

#########################################################

#   test function

#########################################################


random.number.test <- function()
 {cat("Random number generator tests ...")
  if (is.R())
     {test.seed<- c( 979, 1479, 1542) # values from 0.49 beta
      test.valueU <-c(5.693354055333957e-01,1.051357751852140e-01,
          5.846933178718317e-02, 7.537960906527452e-02, 7.043734921992200e-01)
      test.valueN <-c(-5.559389931781886e-01,
                   -1.902431069568611e+00,  1.524595894866778e+00,
                   -7.863494805034426e-01, 1.328128164898773e-01)
     }
  if (is.Splus())
     {test.seed<- c(37, 39, 39, 4, 7, 2, 27, 58, 38, 15, 32, 2)
      test.valueU <- c(0.4299328043125570, 0.3092006836086512,
            0.5808096211403608, 0.3061958812177181, 0.8137333435006440)
      test.valueN <- c( -0.7613318231781665, -0.5724360196433543,
            0.8536399448225964, -0.2269096022522968, -0.8126790170570223)
     }

  old.seed <- set.RNG(kind="default", seed=test.seed, rnorm="default")
  on.exit(set.RNG(old.seed))

  ok <- TRUE
  if (1e-14 < max(abs(runif(5)-test.valueU)))
    {warning("The default runif number generator has been changed.")
     ok <- FALSE
    }

  set.RNG(kind="default", seed=test.seed, rnorm="default")

  if (1e-14  < max(abs(rnorm(5)-test.valueN)))
    {warning("The default rnorm number generator has been changed.")
     ok <- FALSE
    }

  set.RNG(kind="Wichmann-Hill", seed=c(979,1479,1542), rnorm="Box-Muller")
  if (1e-14 < max(abs(runif(5) -
      c(0.56933540553339546, 0.10513577518521355, 0.05846933178718317,
        0.07537960906527452, 0.70437349219921996))))
    {warning("The Wichmann-Hill runif number generator has been changed.")
     ok <- FALSE
    }

  set.RNG(kind="Wichmann-Hill", seed=c(979,1479,1542), rnorm="Box-Muller")
  if (1e-14 < max(abs(rnorm(5) -
      c(0.4605069059114530, 0.7685565310963474, -0.3737680932387061,
        0.5926372779538560, 1.4995245125275518))))
    {warning("The Box-Muller rnorm number generator has been changed.")
     ok <- FALSE
    }

  if (ok) cat("ok\n")
  else    cat("failed!\n")
  invisible(ok)
 }




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu May  6 15:15:44 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 06 May 1999 10:15:44 -0400
Subject: RNG  R/Splus compatibility
References: <3730727E.1ACB4D6D@bank-banque-canada.ca>
Message-ID: <3731A410.4AF78E20@bank-banque-canada.ca>

Here is a correction to one of the functions I posted yesterday, which did not
work correctly when kind was a list. With a null argument this function returns
current RNG and seed information. Otherwise, it sets the values and returns the
new settings. Thus, in a function one might

  old <- set.RNG()
  on.exit(set.RNG(old))
  effective <- set.RNG(new)   #(= new)

Another approach would be that used by par() (i.e. return the old settings) so
one would

  old <- set.RNG(new)
  on.exit(set.RNG(old))
  effective <- set.RNG()  #(= new)

Does anyone have thoughts on this?

Paul Gilbert
_________

    set.RNG <- function(kind=NULL, seed=NULL, rnorm=NULL)
      {# with a null argument this also serves as get.RNG so it is possible to
       # old <- set.RNG()
       # on.exit(set.RNG(old))
       # set.RNG("default")  can affect both kind and seed, but not rnorm
       if (is.list(kind))
         list(kind=RNGkind(kind$kind), seed=set.seed(kind$seed),
              rnorm= set.RNORMtransform(kind$rnorm) )
       else
         list(kind=RNGkind(kind), seed=set.seed(seed),
              rnorm=set.RNORMtransform(rnorm) )
      }


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Fri May  7 06:15:03 1999
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri, 7 May 1999 07:15:03 +0200
Subject: Bug list summary (automatic post)
Message-ID: <199905070515.HAA24818@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100

Directory:  Add-ons

* PR# 137 *
Subject: funfits
From: "Alvaro A. Novo" <novo@uiuc.edu>
Date: Tue, 9 Mar 1999 22:24:54 -0600
* PR# 164 *
Subject: Re: [R] repeated measurements libraries v0.4
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 11 Apr 1999 22:52:34 +0100 (BST)

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100

Directory:  Documentation

* PR# 146 *
Subject: nlm docs
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 24 Mar 1999 15:48:41 +0100 (MET)

Directory:  Graphics

* PR# 38 *
Subject: possible bugs
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Sun, 6 Sep 1998 15:59:34 -0400 (EDT)
--ylim problem which appears solved
--Postscript overflow still with us (22feb99)
* PR# 61 *
Subject: points(...,  cex = ..)  is pretty wrong...
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 2 Nov 1998 19:15:06 +0100
--Symbols getting decentered when too large cex for X. Still there 22feb99  
* PR# 66 *
Subject: Bug with bounding box?
From: johnp@tip.csiro.au
Date: Thu, 3 Dec 1998 02:15:38 +0100
--Yes, this appears to have x/y reversed. The supplied example gives 
--%%Orientation: Landscape
--%%BoundingBox: 18 18 824 577 
--but the convention is to rotate the paper but leave the coordinate system.
* PR# 69 *
Subject: Some graphics bugs
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 04 Dec 1998 11:42:50 -0000 ()
Date: 04-Dec-98
--Various anomalies with text size and alignment. 2B appears to be solved. The 
--rest is still there (22feb99)
* PR# 79 *
Subject: apology: text(locator(),"sometext") works
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Tue, 15 Dec 1998 19:45:29 -0500 (EST)
--Clipping discrepancy x11/PS
* PR# 106 *
Subject: border-arg. in persp
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
Date: Fri, 29 Jan 1999 11:12:39 +0100
--No effect of arg. Still here 22feb99. Segfault with border=0 seems gone now. 
* PR# 114 *
Subject: PostScript Level 1/2 bug
From: ben@eno.princeton.edu
Date: Mon, 8 Feb 1999 00:07:20 +0100
--Not sure whether this is really PS lev 1/2 issue.
--/Font5 /Symbol findfont definefont
--(missing scalefont?)
* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 123 *
Subject: Text in plot
From: Ennapadam Venkatraman <venkat@biosta.mskcc.org>
Date: Thu, 18 Feb 1999 13:05:37 -0500
--Multiline text not working
* PR# 130 *
Subject: lty=0 -- shouldn't it give an invisible line?
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 28 Feb 1999 21:45:43 +0100
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
* PR# 153 *
Subject: image + x11
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
Date: Wed, 31 Mar 1999 14:09:53 +0200

Directory:  In-Out

* PR# 125 *
Subject: scan rejects complex
From: John.Peters@tip.csiro.au (John Peters)
Date: Mon, 22 Feb 1999 10:08:14 +1100 (EST)
* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM

Directory:  Installation

* PR# 95 *
Subject: patch to 63.2
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 15 Jan 1999 11:00:25 +0100 (MET)
--An incident where the 0.63.2 patches didn't take. So far the only one. 
--Maybe caused by patching unclean sources?
* PR# 165 *
Subject: make check
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 13 Apr 1999 12:03:42 +0200 (CEST)

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 118 *
Subject: Function parsing
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Wed, 10 Feb 1999 13:42:01 +0000 (GMT)
--comment placement.
* PR# 166 *
Subject: outer fails with group generic operations on factors
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Tue, 13 Apr 1999 18:28:53 +0100 (BST)
* PR# 167 *
Subject: R's UseMethod() does not dispatch on changed class()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 14 Apr 1999 11:22:10 +0200
--Did this get resolved into the "S has the bug, 
--one shouldn't try that" category?

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

* PR# 121 *
Subject:  model.frame mangles time series 
From: Peter Dalgaard BSA <pd@biostat.ku.dk>
Date: Thu, 18 Feb 1999 15:47:24 +0100
--Subset in C code + attributes = mess
--Switch to interpreted ("[")

Directory:  Startup

* PR# 21 *
Subject: Restoring large image files
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 21 Aug 1998 13:29:16 -0000 ()

Directory:  System-specific

* PR# 145 *
Subject: R-0.63.3 package on IRIX 6.5 machine
From: Jayshree Sarma <jsarma@cs.gmu.edu>
Date: Tue, 23 Mar 1999 16:54:20 -0500 (EST)
* PR# 163 *
Subject: IRIX compile
From: mtim@farm.ecs.umass.edu
Date: Sat, 10 Apr 1999 19:35:43 +0200

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 174 *
Subject:  do.call() mangles expressions in arguments 
From: Peter Dalgaard BSA <pd@biostat.ku.dk>
Date: Wed, 21 Apr 1999 19:39:53 +0200
* PR# 177 *
Subject: R won't compile on Redhat 5.2
From: pgutwin@us.ibm.com
Date: Fri, 23 Apr 1999 20:08:55 +0200 (MET DST)
* PR# 180 *
Subject: nlm on a function in the Math group
From: Douglas Bates <bates@stat.wisc.edu>
Date: Thu, 29 Apr 1999 17:11:00 -0500 (CDT)
* PR# 183 *
Subject: compilation of R-0.63.3 on alpha
From: a.o.jaunsen@astro.uio.no
Date: Mon, 03 May 1999 11:28:31 +0200
* PR# 184 *
Subject: parse error in terms
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 3 May 1999 19:43:00 +0200 (MET DST)
* PR# 185 *
Subject: Re: [R] R_problem_buf in the S.h files & lists in .C
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 1999 00:32:49 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mao@compstat.wharton.upenn.edu  Sun May  9 17:41:07 1999
From: mao@compstat.wharton.upenn.edu (mao@compstat.wharton.upenn.edu)
Date: Sun, 9 May 1999 18:41:07 +0200 (MET DST)
Subject: subscripting in list() (PR#186)
Message-ID: <199905091641.SAA05061@pubhealth.ku.dk>


In R, (0.64 Binary, Linux 5.0) I tried this command and get an error
message:

> mylist <- list()
> mylist[[1]]
Error in mylist[[1]] : subscript out of bounds

It thus makes my Splus programs un-runable, because in SPlus 4.0 or 3.4,
you have

> mylist <- list()
> mylist[[1]]
NULL

instead of a stop message.


Thanks,
vincent






-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mao@compstat.wharton.upenn.edu  Sun May  9 18:01:28 1999
From: mao@compstat.wharton.upenn.edu (mao@compstat.wharton.upenn.edu)
Date: Sun, 9 May 1999 19:01:28 +0200 (MET DST)
Subject: subscripting in list() (PR#187)
Message-ID: <199905091701.TAA05120@pubhealth.ku.dk>


Sorry My previous report is not detailed.

In R, you will get this:

> mylist <- list()
> mylist[[1]]
Error in mylist[[1]] : subscript out of bounds
> mylist[[1]] <- c(1)
Error: (list) object cannot be coerced to vector type 14
> mylist[[1]] <- c(1,2)
> mylist[[1]] <- c(1)
> mylist
[[1]]
[1] 1

I was trying to assigning c(1) to (mylist[[1]] <- c(1)) -- it seems
impossible if I dont' assign something else to it in advance.

(although a walk around would be mylist[1] <- list(1)) In
SPLUS 4 or 3.4, the reactions are different:

> mylist <- list()
> mylist[[1]]
NULL
> mylist[[1]] <- c(1)
> mylist
[[1]]:
[1] 1





On Sun, 9 May 1999, Wenxin Mao wrote:

> Date: Sun, 9 May 1999 12:42:29 -0400 (EDT)
> From: Wenxin Mao <mao@stat.wharton.upenn.edu>
> To: r-bugs@biostat.ku.dk
> Subject: subscripting in list()
> 
> 
> In R, (0.64 Binary, Linux 5.0) I tried this command and get an error
> message:
> 
> > mylist <- list()
> > mylist[[1]]
> Error in mylist[[1]] : subscript out of bounds
> 
> It thus makes my Splus programs un-runable, because in SPlus 4.0 or 3.4,
> you have
> 
> > mylist <- list()
> > mylist[[1]]
> NULL
> 
> instead of a stop message.
> 
> 
> Thanks,
> vincent
> 
> 
> 
> 
> 
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun May  9 20:19:55 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 9 May 1999 21:19:55 +0200 (MET DST)
Subject: subscripting in list() (PR#187)
Message-ID: <199905091919.VAA05332@pubhealth.ku.dk>

On Sun, 9 May 1999 mao@compstat.wharton.upenn.edu wrote:

> 
> Sorry My previous report is not detailed.
> 
> In R, you will get this:
> 
> > mylist <- list()
> > mylist[[1]]
> Error in mylist[[1]] : subscript out of bounds

Yes, that is a known difference, I believe deliberate.

> > mylist[[1]] <- c(1)
> Error: (list) object cannot be coerced to vector type 14

I get no error in 0.64.1, the current version (since Friday): try
upgrading.

> > In R, (0.64 Binary, Linux 5.0) I tried this command and get an error
> > message:

(I assume you tried 0.64.0: there is no 0.64 that I know of.)

I do suggest though that you only index lists by names: relying on the
order of list components is fraught with possibilities for error.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dimi@ci.tuwien.ac.at  Mon May 10 17:15:31 1999
From: dimi@ci.tuwien.ac.at (dimi@ci.tuwien.ac.at)
Date: Mon, 10 May 1999 18:15:31 +0200 (MET DST)
Subject: linear mixed models (PR#188)
Message-ID: <199905101615.SAA14171@pubhealth.ku.dk>

in lmList ,lmList.formula and lmList.groupedData functions in help pages there is an argument called "groups" that doesn't exist in the code of the functions.
<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Patched (unreleased snapshot)
 status.rev = 0
 major = 0
 minor = 64.1
 year = 1999
 month = May
 day = 10
 language = R

Search Path:
 .GlobalEnv, package:lme, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dimi@ci.tuwien.ac.at  Mon May 10 17:46:21 1999
From: dimi@ci.tuwien.ac.at (Evgenia Dimitriadou)
Date: Mon, 10 May 1999 18:46:21 +0200 (CEST)
Subject: linear mixed models (PR#188)
In-Reply-To: <199905101615.SAA14171@pubhealth.ku.dk>
Message-ID: <Pine.LNX.3.96.990510184544.29534O-100000@gandalf.ci.tuwien.ac.at>

sorry for the bug report, but we had an older version of this library.

On Mon, 10 May 1999 dimi@ci.tuwien.ac.at wrote:

> in lmList ,lmList.formula and lmList.groupedData functions in help pages there is an argument called "groups" that doesn't exist in the code of the functions.
> <<insert bug report here>>
> 
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i686-unknown-linux
>  arch = i686
>  os = linux
>  system = i686, linux
>  status = Patched (unreleased snapshot)
>  status.rev = 0
>  major = 0
>  minor = 64.1
>  year = 1999
>  month = May
>  day = 10
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:lme, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon May 10 18:14:22 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 10 May 1999 12:14:22 -0500
Subject: linear mixed models (PR#188)
In-Reply-To: dimi@ci.tuwien.ac.at's message of "Mon, 10 May 1999 18:15:31 +0200 (MET DST)"
References: <199905101615.SAA14171@pubhealth.ku.dk>
Message-ID: <6rn1zcrgnl.fsf@verdi.stat.wisc.edu>

dimi@ci.tuwien.ac.at writes:

> in lmList ,lmList.formula and lmList.groupedData functions in help
> pages there is an argument called "groups" that doesn't exist in the
> code of the functions.

Can you tell us which version of the lme library you are using?

I don't see this with the most recent version (3.0b7-1) of the lme
library.  In that version the lmList help page starts with

   List of lm Objects with a Common Model

        lmList(object, data, level, na.action, pool)

I did cause some confusion by not uploading the tar file for
lme_3.0b7-2.tar.gz with the correct name.  The result was that there
were two packages, lme and lme3, listed on the web pages for a while.
To get the most recent version go directly to the src/contrib
directory and download lme_3.0b7-2.tar.gz

(Fritz or Andreas: Could you take a look at the PACKAGES.html file in
the src/contrib library?  I think it will need to be modified by
hand.  Sorry for this confusion.)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Tue May 11 09:13:49 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Tue, 11 May 1999 10:13:49 +0200 (MET DST)
Subject: model.matrix crashes (PR#189)
Message-ID: <199905110813.KAA17434@pubhealth.ku.dk>

With 0.64.1 on Intel RH5.2,

abc <- list()
abc$abc$abc <- matrix(1:20)
mt <- terms(~(abc$abc$abc[,1]==64)|(abc$abc$abc[,1]==65)|(abc$abc$abc[,1]==75)
	|(abc$abc$abc[,1]==84)|(abc$abc$abc[,1]==85))
model.matrix(mt,model.frame(mt))

crashes. With ab$ab$ab, it does not. Apparently, the bug I reported
for 0.64.0 has just been pushed back one step. Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Tue May 11 12:39:06 1999
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Tue, 11 May 1999 13:39:06 +0200 (MET DST)
Subject: dev.print help page (PR#191)
Message-ID: <199905111139.NAA19140@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 0.64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


Two problems with dev.print help.

1. Under Examples:
        dev.print(width=6, height=6, horizontal=F)
                                                ^ FALSE

2. dev.print help does not describe any of its parameters (e.g. height or
width).
Not described on the other dev.xxx pages either

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Tue May 11 12:43:51 1999
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Tue, 11 May 1999 13:43:51 +0200 (MET DST)
Subject: dev.print aspect ratio (PR#192)
Message-ID: <199905111143.NAA19204@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 0.64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


dev.print(horizontal=FALSE,width=7,height=7,file="r/rt/junk.ps")
does not produce a square plot. I find I need:

dev.print(horizontal=FALSE,width=7,height=7.6,file="r/rt/junk.ps")
to make it square.

I tried
par(pty="s")
prior to making the image or contour plot, but this does not make the plot
square.
(Maybe this is a bug for par() or image() and contour()).

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Tue May 11 13:02:01 1999
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Tue, 11 May 1999 14:02:01 +0200 (MET DST)
Subject: matrix() can't handle NaN (PR#193)
Message-ID: <199905111202.OAA19347@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 0.64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


Here is the data file:
x y z
1 1 1
1 2 2
2 1 NaN
2 2 4

>data<-read.table("~/junk.dat",header=TRUE)

> data
  x y   z
1 1 1   1
2 1 2   2
3 2 1 NaN
4 2 2   4

> matrix(data$z,length(y),length(x)) 
     [,1] [,2]
[1,]    1    4
[2,]    2    3

This is not the correct matrix.  It seems that NaNs screw up matrix().

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue May 11 13:34:26 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 11 May 1999 14:34:26 +0200 (CEST)
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: <199905111202.OAA19347@pubhealth.ku.dk>
References: <199905111202.OAA19347@pubhealth.ku.dk>
Message-ID: <14136.9170.142518.789273@pc87.maho.magnaeu.com>

>>>>> wsi  writes:

> Full_Name: Bill Simpson
> Version: 0.64.1
> OS: linux
> Submission from: (NULL) (193.62.250.209)


> Here is the data file:
> x y z
> 1 1 1
> 1 2 2
> 2 1 NaN
> 2 2 4

>> data<-read.table("~/junk.dat",header=TRUE)

>> data
>   x y   z
> 1 1 1   1
> 2 1 2   2
> 3 2 1 NaN
> 4 2 2   4

>> matrix(data$z,length(y),length(x)) 
>      [,1] [,2]
> [1,]    1    4
> [2,]    2    3

> This is not the correct matrix.  It seems that NaNs screw up matrix().

Actually, data$z is a factor with one level NaN.

R> data$z
[1] 1   2   NaN 4  
Levels:  1 2 4 NaN

What you get is the codes of that, which I think is what you want.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill Simpson <wsi@gcal.ac.uk>  Tue May 11 14:48:57 1999
From: Bill Simpson <wsi@gcal.ac.uk> (Bill Simpson)
Date: Tue, 11 May 1999 13:48:57 +0000 (GMT)
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: <14136.9170.142518.789273@pc87.maho.magnaeu.com>
Message-ID: <Pine.LNX.3.96.990511133535.8568A-100000@cbe207.gcal.ac.uk>



On Tue, 11 May 1999, Kurt Hornik wrote:

> >>>>> wsi  writes:
> 
> > Full_Name: Bill Simpson
> > Version: 0.64.1
> > OS: linux
> > Submission from: (NULL) (193.62.250.209)
> 
> 
> > Here is the data file:
> > x y z
> > 1 1 1
> > 1 2 2
> > 2 1 NaN
> > 2 2 4
> 
> >> data<-read.table("~/junk.dat",header=TRUE)
> 
> >> data
> >   x y   z
> > 1 1 1   1
> > 2 1 2   2
> > 3 2 1 NaN
> > 4 2 2   4
> 
I forgot these steps:
x<-unique(data$x)
y<-unique(data$y)

> >> matrix(data$z,length(y),length(x)) 
> >      [,1] [,2]
> > [1,]    1    4
> > [2,]    2    3
> 
> > This is not the correct matrix.  It seems that NaNs screw up matrix().
> 
> Actually, data$z is a factor with one level NaN.
Geez, I why is data$z a factor?  That seems bizarre. It is supposed to be
the measured value (IV) at each combination of x and y. So what is the
right way to convert my original file?

I go through all this just to produce an image or contour or persp plot.

> R> data$z
> [1] 1   2   NaN 4  
> Levels:  1 2 4 NaN
Weird! Is this because matrix() interprets NaN as a character string
instead of as an NaN (which is a "number", isn't it?)?

Why then isn't everything converted to a factor?
> data$x
[1] 1 1 2 2
> data$y
[1] 1 2 1 2

Also, why does matrix() work as I expect when the NaN in the file is
changed to a 0:
> matrix(data$z,length(y),length(x))
     [,1] [,2]
[1,]    1    0
[2,]    2    4

It also works as I expect when the NaN is changed to an NA:
> matrix(data$z,length(y),length(x))
     [,1] [,2]
[1,]    1   NA
[2,]    2    4


> What you get is the codes of that, which I think is what you want.
NOPE! I want a matrix:
1	NaN
2	4

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ben@eno.princeton.edu  Tue May 11 14:05:04 1999
From: ben@eno.princeton.edu (Ben Bolker)
Date: Tue, 11 May 1999 09:05:04 -0400 (EDT)
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: <Pine.LNX.3.96.990511133535.8568A-100000@cbe207.gcal.ac.uk>
Message-ID: <Pine.SUN.3.91.990511090318.11064B-100000@paca>


  Perhaps this should be in a FAQ list ...

> data<-read.table("~/junk.dat",header=TRUE, na.strings="NaN")
> data
  x y  z
1 1 1  1
2 1 2  2
3 2 1 NA
4 2 2  4

> x<-unique(data$x)
> y<-unique(data$y)
> matrix(data$z,length(y),length(x))
     [,1] [,2]
[1,]    1   NA
[2,]    2    4

  "NaN" (Not a Number) as seen in debuggers, etc., is not the same as "NA"
as a "not available/applicable" value in R.

On Tue, 11 May 1999, Bill Simpson wrote:

> 
> 
> On Tue, 11 May 1999, Kurt Hornik wrote:
> 
> > >>>>> wsi  writes:
> > 
> > > Full_Name: Bill Simpson
> > > Version: 0.64.1
> > > OS: linux
> > > Submission from: (NULL) (193.62.250.209)
> > 
> > 
> > > Here is the data file:
> > > x y z
> > > 1 1 1
> > > 1 2 2
> > > 2 1 NaN
> > > 2 2 4
> > 
> > >> data<-read.table("~/junk.dat",header=TRUE)
> > 
> > >> data
> > >   x y   z
> > > 1 1 1   1
> > > 2 1 2   2
> > > 3 2 1 NaN
> > > 4 2 2   4
> > 
> I forgot these steps:
> x<-unique(data$x)
> y<-unique(data$y)
> 
> > >> matrix(data$z,length(y),length(x)) 
> > >      [,1] [,2]
> > > [1,]    1    4
> > > [2,]    2    3
> > 
> > > This is not the correct matrix.  It seems that NaNs screw up matrix().
> > 
> > Actually, data$z is a factor with one level NaN.
> Geez, I why is data$z a factor?  That seems bizarre. It is supposed to be
> the measured value (IV) at each combination of x and y. So what is the
> right way to convert my original file?
> 
> I go through all this just to produce an image or contour or persp plot.
> 
> > R> data$z
> > [1] 1   2   NaN 4  
> > Levels:  1 2 4 NaN
> Weird! Is this because matrix() interprets NaN as a character string
> instead of as an NaN (which is a "number", isn't it?)?
> 
> Why then isn't everything converted to a factor?
> > data$x
> [1] 1 1 2 2
> > data$y
> [1] 1 2 1 2
> 
> Also, why does matrix() work as I expect when the NaN in the file is
> changed to a 0:
> > matrix(data$z,length(y),length(x))
>      [,1] [,2]
> [1,]    1    0
> [2,]    2    4
> 
> It also works as I expect when the NaN is changed to an NA:
> > matrix(data$z,length(y),length(x))
>      [,1] [,2]
> [1,]    1   NA
> [2,]    2    4
> 
> 
> > What you get is the codes of that, which I think is what you want.
> NOPE! I want a matrix:
> 1	NaN
> 2	4
> 
> Bill
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Benjamin Bolker          Dep't of Ecology and Evolutionary Biology,
ben@eno.princeton.edu    Princeton University
tel: (609) 258-6886,     fax: (609) 258-1334

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ben@eno.princeton.edu  Tue May 11 14:33:37 1999
From: ben@eno.princeton.edu (Ben Bolker)
Date: Tue, 11 May 1999 09:33:37 -0400 (EDT)
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: <Pine.LNX.3.96.990511141530.8636A-100000@cbe207.gcal.ac.uk>
Message-ID: <Pine.SUN.3.91.990511092658.11064E-100000@paca>

On Tue, 11 May 1999, Bill Simpson wrote:


 [examples with read.table(...,na.strings="NaN") snipped]
> 
> >   "NaN" (Not a Number) as seen in debuggers, etc., is not the same as "NA"
> > as a "not available/applicable" value in R.
> 
> Yes, I realize that.
> However, since there is an R function is.nan(), and through experiments at
> the command line like this
> > xx<-NaN
> > xx+1
> NaN
> I thought that NaN was recognized by the R system and obeyed the proper
> rules. Same for Inf and -Inf.
> 
> Or are these things only sometimes recognized and sometimes not? Shouldn't
> they be employed consistently?
> 
> Bill
> 

  I'm going to defer this to people who know more than I about 
consistency and the differences between NA and NaN.  I will note that
the help for is.na() says:

The generic function `is.na' returns a logical vector of the same ``form''
as its argument `x', containing `TRUE' for those elements marked `NA' or
`NaN' (!) and `FALSE' otherwise.

  The (!) suggests that whoever wrote the help file recognized some 
subtlety here ... [similarly, is.finite() recognizes NA as a non-finite 
number]

  This seems to fall in the general category of "how do we help people 
avoid 'gotchas' in R that, while logical, are not necessarily what they 
expect?  Can we do this without blurring logical distinctions that are 
interesting/important/significant to more knowledgeable users?"

  One *could* extend the default na.strings in read.table to 
c("NA","NaN"), which would take care of the immediate problem but might 
further blur the subtle distinction between NA and NaN.  I don't know 
how/whether one would want to extend read.table() to deal with Inf/-Inf 
in data files ... (I think not).

  Ben
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill Simpson <wsi@gcal.ac.uk>  Tue May 11 15:51:23 1999
From: Bill Simpson <wsi@gcal.ac.uk> (Bill Simpson)
Date: Tue, 11 May 1999 14:51:23 +0000 (GMT)
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: <Pine.SUN.3.91.990511092658.11064E-100000@paca>
Message-ID: <Pine.LNX.3.96.990511144151.8662B-100000@cbe207.gcal.ac.uk>



On Tue, 11 May 1999, Ben Bolker wrote:
>   One *could* extend the default na.strings in read.table to 
> c("NA","NaN"), which would take care of the immediate problem but might 
> further blur the subtle distinction between NA and NaN.  I don't know 
> how/whether one would want to extend read.table() to deal with Inf/-Inf 
> in data files ... (I think not).

My attitude is that if NaN is a recognized "number" by the numerical
analysts (the guys who write the floating point standards), why not treat
it as such throughout R? But maybe this opens a can of worms.

In my example, I was expecting to have the z matrix for an image plot with
NaNs in it. Then I was going to convert them either to zeros or NAs prior
to making the plot.

I would put the onus on the user to deal with the NaNs prior to
passing the data onto some other function. I would not favour some
automatic conversion of NaN into NA.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 11 15:26:43 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 11 May 1999 16:26:43 +0200 (MET DST)
Subject: matrix() can't handle NaN (PR#193)
Message-ID: <199905111426.QAA20739@pubhealth.ku.dk>

Bill argues that NaN should be treated as a number, 
even by read.table() and I think he is right.
{ scan(.) does fine !  it *does* treat NaN as numbers ! }

At the moment, I don't even see where the problem is;
the read.table internal function  type.convert()
does well with NaN's :
     > cc <- as.character(c(pi,NaN))
     > str(type.convert(cc))
      num [1:2] 3.14  NaN

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue May 11 15:54:19 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 11 May 1999 15:54:19 +0100 (BST)
Subject: matrix() can't handle NaN (PR#193)
Message-ID: <199905111454.PAA03015@toucan.stats.ox.ac.uk>

> Date: Tue, 11 May 1999 16:26:43 +0200 (MET DST)
> From: maechler@stat.math.ethz.ch
> To: r-devel@stat.math.ethz.ch
> Subject: Re: matrix() can't handle NaN (PR#193)
> 
> Bill [Simpson] argues that NaN should be treated as a number, 
> even by read.table() and I think he is right.
> { scan(.) does fine !  it *does* treat NaN as numbers ! }
> 
> At the moment, I don't even see where the problem is;
> the read.table internal function  type.convert()
> does well with NaN's :
>      > cc <- as.character(c(pi,NaN))
>      > str(type.convert(cc))
>       num [1:2] 3.14  NaN

The field is regarded as a character field unless  na.strings is
extended to include NaN.

I am not in favour of treating NaN as a number, which is linguistic nonsense!
(What does NaN stand for?)

First, in IEEE arithmetic, NaN is a class of numbers as I understand it
(and internally in R NA is one of those NaNs).  So just which one do
you mean?  And what are you going to achieve by having essentially a
second NA, except to blur the real purposes of NaNs?

Secondly, on non-IEEE implementations of R, I believe NaN = NA: in any
case we should not lightly be making IEEE features an essential part of the
language. (Or with the gradual demise of Vaxen is IEEE arithmetic now
universal: I still have a Sun running with a special-purpose non-IEEE
floating-point unit.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue May 11 18:08:44 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 11 May 1999 13:08:44 -0400
Subject: another multivariate ts bug
Message-ID: <3738641B.3630B0F2@bank-banque-canada.ca>

I think this is another one of the same kind of bugs in ts:

Version 0.64.1  (May 8, 1999)
...
>  z <- ts(matrix(1:20,10,2), start=c(1969,1), frequency=12)
> (z > 5) | (z < 2)
Error: invalid time series parameters specified
>

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue May 11 20:26:09 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Tue, 11 May 1999 21:26:09 +0200 (MET DST)
Subject: model.matrix crashes (PR#189)
Message-ID: <199905111926.VAA21832@pubhealth.ku.dk>

On Tue, 11 May 1999 jlindsey@alpha.luc.ac.be wrote:

> With 0.64.1 on Intel RH5.2,
> 
> abc <- list()
> abc$abc$abc <- matrix(1:20)
> mt <- terms(~(abc$abc$abc[,1]==64)|(abc$abc$abc[,1]==65)|(abc$abc$abc[,1]==75)
> 	|(abc$abc$abc[,1]==84)|(abc$abc$abc[,1]==85))
> model.matrix(mt,model.frame(mt))
> 
> crashes. With ab$ab$ab, it does not. Apparently, the bug I reported
> for 0.64.0 has just been pushed back one step. Jim

I can't reproduce this on Solaris.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 11 21:59:28 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 May 1999 22:59:28 +0200
Subject: model.matrix crashes (PR#189)
In-Reply-To: thomas@biostat.washington.edu's message of "Tue, 11 May 1999 21:26:09 +0200 (MET DST)"
References: <199905111926.VAA21832@pubhealth.ku.dk>
Message-ID: <x2k8ufqq4v.fsf@blueberry.kubism.ku.dk>

thomas@biostat.washington.edu writes:

> On Tue, 11 May 1999 jlindsey@alpha.luc.ac.be wrote:
> 
> > With 0.64.1 on Intel RH5.2,
> > 
> > abc <- list()
> > abc$abc$abc <- matrix(1:20)
> > mt <- terms(~(abc$abc$abc[,1]==64)|(abc$abc$abc[,1]==65)|(abc$abc$abc[,1]==75)
> > 	|(abc$abc$abc[,1]==84)|(abc$abc$abc[,1]==85))
> > model.matrix(mt,model.frame(mt))
> > 
> > crashes. With ab$ab$ab, it does not. Apparently, the bug I reported
> > for 0.64.0 has just been pushed back one step. Jim
> 
> I can't reproduce this on Solaris.

I can, on Linux, RH6.0.

The problem is neatly described in src/main/model.c:1690

    /* FIXME : we need to check for buffer overflow here. */

I've upped the BUFSIZE from 128 to 4096, which should push the problem
a bit further back....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 11 22:05:11 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 May 1999 23:05:11 +0200
Subject: another multivariate ts bug
In-Reply-To: Paul Gilbert's message of "Tue, 11 May 1999 13:08:44 -0400"
References: <3738641B.3630B0F2@bank-banque-canada.ca>
Message-ID: <x2iu9zqpvc.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I think this is another one of the same kind of bugs in ts:
> 
> Version 0.64.1  (May 8, 1999)
> ...
> >  z <- ts(matrix(1:20,10,2), start=c(1969,1), frequency=12)
> > (z > 5) | (z < 2)
> Error: invalid time series parameters specified
> >

Sigh.

Found and fixed. Same problem. This time in src/main/logic.c, lbinary
function. Here's the patch (cut+paste'd, watch out for whitespace
problems).

RCS file: /users/rdev/R/CVS-ARCHIVE/R/src/main/logic.c,v
retrieving revision 1.8
diff -c -r1.8 logic.c
*** logic.c     1999/03/05 19:19:04     1.8
--- logic.c     1999/05/11 21:02:09
***************
*** 110,121 ****
      y = CADR(args) = coerceVector(y, LGLSXP);
      PROTECT(x = binaryLogic(PRIMVAL(op), x, y));
  
-     if (xts || yts) {
-       setAttrib(x, R_TspSymbol, tsp);
-       setAttrib(x, R_ClassSymbol, class);
-       UNPROTECT(2);
-     }
- 
      if (dims != R_NilValue) {
        setAttrib(x, R_DimSymbol, dims);
        if(xnames != R_NilValue)
--- 110,115 ----
***************
*** 128,133 ****
--- 122,133 ----
            setAttrib(x, R_NamesSymbol, xnames);
        else if(length(x) == length(ynames))
            setAttrib(x, R_NamesSymbol, ynames);
+     }
+ 
+     if (xts || yts) {
+       setAttrib(x, R_TspSymbol, tsp);
+       setAttrib(x, R_ClassSymbol, class);
+       UNPROTECT(2);
      }
      UNPROTECT(4);
      return x;


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill Simpson <wsi@gcal.ac.uk>  Wed May 12 10:51:35 1999
From: Bill Simpson <wsi@gcal.ac.uk> (Bill Simpson)
Date: Wed, 12 May 1999 09:51:35 +0000 (GMT)
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: <199905111454.PAA03015@toucan.stats.ox.ac.uk>
Message-ID: <Pine.LNX.3.96.990512092041.9531A-100000@cbe207.gcal.ac.uk>



On Tue, 11 May 1999, Prof Brian Ripley wrote:

> 
> The field is regarded as a character field unless  na.strings is
> extended to include NaN.
> 
> I am not in favour of treating NaN as a number, which is linguistic nonsense!
That's why I said that NaN was a "number" (with quotes). It is a number in
the sense that it is the output of an arithmetic operation.
> 
> First, in IEEE arithmetic, NaN is a class of numbers as I understand it
Yes.
> (and internally in R NA is one of those NaNs).
Oh.

> So just which one do
> you mean?  And what are you going to achieve by having essentially a
> second NA, except to blur the real purposes of NaNs?
Well to me NA means missing value, and it is abuse of NA to use it to
represent things like 0/0.

The purpose of having NaN to me:
I am allowed to get an NaN as a result of some operation in R. Let's say I
then save that in a file, then I read the file in again using read.table.
In the process of saving and reading it in I lose the NaN. I don't like
that. It doesn't seem consistent. If the NaN is to be changed, I would
like to do the changing explicitly myself, so I know what happened to it.

I would also include Inf and -Inf here. These are allowed outputs from R
operations, so why can't they be read in by read.table? So I am proposing
that allowable IEEE entities Inf, -Inf, NaN be read in by read.table as
themselves (not as character strings).

> Secondly, on non-IEEE implementations of R, I believe NaN = NA: in any
> case we should not lightly be making IEEE features an essential part of the
> language. (Or with the gradual demise of Vaxen is IEEE arithmetic now
> universal: I still have a Sun running with a special-purpose non-IEEE
> floating-point unit.)
OK I see this point. That's what I meant when I said maybe it would be
opening a can of worms to try to use NaN and Inf consistently throughout
R.

Bill

PS: I remember reading on this list about complex numbers in R. That
brings in a conflict with IEEE (doesn't it?), because in IEEE,
sqrt(negative number)->NaN.
But that is not a NaN if you allow complex numbers (I would think).
> sqrt(-1)
Warning: NaNs produced in function "sqrt"
[1] NaN

Is there a need for an "I" symbol in R?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 12 10:27:17 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 May 1999 11:27:17 +0200
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: Bill Simpson's message of "Wed, 12 May 1999 09:51:35 +0000 (GMT)"
References: <Pine.LNX.3.96.990512092041.9531A-100000@cbe207.gcal.ac.uk>
Message-ID: <x21zgmd4ei.fsf@blueberry.kubism.ku.dk>

Bill Simpson <wsimpson@gcal.ac.uk> writes:

> > So just which one do
> > you mean?  And what are you going to achieve by having essentially a
> > second NA, except to blur the real purposes of NaNs?
>
> Well to me NA means missing value, and it is abuse of NA to use it to
> represent things like 0/0.

And actually the logic is a bit warped:

> NA+NaN     
[1] NA
> NaN+NA
[1] NA
> NaN+NaN
[1] NaN
> is.nan(NaN)
[1] TRUE
> is.nan(NA)
[1] FALSE
> is.na(NaN)
[1] TRUE
 
> The purpose of having NaN to me:
> I am allowed to get an NaN as a result of some operation in R. Let's say I
> then save that in a file, then I read the file in again using read.table.
> In the process of saving and reading it in I lose the NaN. I don't like
> that. It doesn't seem consistent. If the NaN is to be changed, I would
> like to do the changing explicitly myself, so I know what happened to it.
> 
> I would also include Inf and -Inf here. These are allowed outputs from R
> operations, so why can't they be read in by read.table? So I am proposing
> that allowable IEEE entities Inf, -Inf, NaN be read in by read.table as
> themselves (not as character strings).

We do allow them as constants in the language itself, so I suppose we
could do it in read.table as well - this really means inside
as.double, I suppose. The prototype does this:

Splus> is.nan(as.double("NaN"))
[1] T

> PS: I remember reading on this list about complex numbers in R. That
> brings in a conflict with IEEE (doesn't it?), because in IEEE,
> sqrt(negative number)->NaN.
> But that is not a NaN if you allow complex numbers (I would think).
> > sqrt(-1)
> Warning: NaNs produced in function "sqrt"
> [1] NaN
> 
> Is there a need for an "I" symbol in R?

Nope:

> sqrt(-1+0i)
[1] 0+1i

or, equivalently,

> sqrt(as.complex(-1))
[1] 0+1i

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 12 12:07:00 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 12 May 1999 13:07:00 +0200 (MET DST)
Subject: matrix() can't handle NaN (PR#193)
Message-ID: <199905121107.NAA29025@pubhealth.ku.dk>

Can we backtrack here. I have just tried the original example on Solaris,
and matrix() _can_ handle NaN with a mature ANSI C library.

toucan% cat > junk.dat
x y z
1 1 1
1 2 2
2 1 NaN
2 2 4
toucan% R

R : Copyright 1999, The R Development Core Team
Version 0.64.1  (May 8, 1999)
...

> data <- read.table("junk.dat",header=TRUE)
> x<-unique(data$x)
> y<-unique(data$y)
> matrix(data$z,length(y),length(x)) 
     [,1] [,2]
[1,]    1  NaN
[2,]    2    4

So on Solaris NaNs are read as such, and on Linux they are not.


> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 12 May 1999 11:27:17 +0200

> We do allow them as constants in the language itself, so I suppose we
> could do it in read.table as well - this really means inside
> as.double, I suppose. The prototype does this:
> 
> Splus> is.nan(as.double("NaN"))
> [1] T

and so does my R on Solaris. On Linux

> is.nan(as.double("NaN"))
Warning: NAs introduced by coercion
[1] FALSE

so I think there is a problem with Linux versions specifically. The
conversion is done by strtod. Solaris says (same man page)

     If str is NaN, then atof() returns NaN.

This sort of mess is my underlying objection: should we be assuming
IEEE arithmetic, let alone a particular implementation of it?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed May 12 12:20:12 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 12 May 1999 13:20:12 +0200 (MET DST)
Subject: dev.print help page (PR#191)
Message-ID: <199905121120.NAA29328@pubhealth.ku.dk>

>>>>> "Bill" == Bill Simpson <wsi@gcal.ac.uk> writes:

    Bill> Full_Name: Bill Simpson Version: 0.64.1 OS: linux Submission
    Bill> from: (NULL) (193.62.250.209)


    Bill> Two problems with dev.print help.

    Bill> 1. Under Examples: dev.print(width=6, height=6, horizontal=F) ^
    Bill> FALSE

fixed, thank you.

    Bill> 2. dev.print help does not describe any of its parameters
    Bill> (e.g. height or width).  Not described on the other dev.xxx pages
    Bill> either

But the help page says that "..." are parameters of the "device" function,
if the "device" functions is postscript (as it is here),
you must look at  ?postscript  to see what parameters you can use.
Even though, all would have been clear already, 
I've added to the help  which now reads

    Copy Graphics Between Multiple Devices

	 dev.copy(device, ..., which=dev.next())
	 dev.print(device=postscript, ...)
	 dev.control(displaylist)

    Arguments:

      device: A device function (e.g., `x11', `postscript', ...)

	 ...: Arguments to the `device' function above.  For
	      `dev.print', this includes `which' and by default
	      any `postscript' arguments.

   ................
	      
Thanks for the report.
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plindsey@alpha.luc.ac.be  Wed May 12 13:40:51 1999
From: plindsey@alpha.luc.ac.be (plindsey@alpha.luc.ac.be)
Date: Wed, 12 May 1999 14:40:51 +0200 (MET DST)
Subject: Memory crash. (PR#194)
Message-ID: <199905121240.OAA00492@pubhealth.ku.dk>

I just had a memory crash with R-0.64.1.
I am running under intel pentium 200mhz under slackware linux 2.0.30.

1/home/plindsey >gdb /usr/local/src/R/bin/R.binary core 
GDB is free software and you are welcome to distribute copies of it
 under certain conditions; type "show copying" to see the conditions.
There is absolutely no warranty for GDB; type "show warranty" for details.
GDB 4.16 (i486-slackware-linux), Copyright 1996 Free Software Foundation, Inc...
Core was generated by `/usr/local/src/R-0.64.1/bin/R.binary --no-save --no-restore --vsize 8000000 --nsob'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /usr/X11R6/lib/libSM.so.6...done.
Reading symbols from /usr/X11R6/lib/libICE.so.6...done.
Reading symbols from /usr/X11R6/lib/libX11.so.6...done.
Reading symbols from /lib/libdl.so.1...done.
Reading symbols from /lib/libncurses.so.3.0...done.
Reading symbols from /lib/libm.so.5...done.
Reading symbols from /lib/libc.so.5...done.
Reading symbols from /lib/ld-linux.so.1...done.
Reading symbols from /usr/local/src/R-0.64.1/library/rmutil/libs/rmutil.so...done.
Reading symbols from /usr/local/src/R-0.64.1/library/mmdc33/libs/mmdc33.so...done.
Reading symbols from /usr/local/src/R-0.64.1/library/gnlm/libs/gnlm.so...done.
#0  compactPhase () at memory.c:599
599             switch (TYPEOF(s)) {    /* get size in bytes */
(gdb) quit

Patrick.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 12 14:13:15 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 May 1999 15:13:15 +0200
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Wed, 12 May 1999 13:07:00 +0200 (MET DST)"
References: <199905121107.NAA29025@pubhealth.ku.dk>
Message-ID: <x2zp3abfdg.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> > Splus> is.nan(as.double("NaN"))
> > [1] T
> 
> and so does my R on Solaris. On Linux
> 
> > is.nan(as.double("NaN"))
> Warning: NAs introduced by coercion
> [1] FALSE
> 
> so I think there is a problem with Linux versions specifically. The
> conversion is done by strtod. Solaris says (same man page)
> 
>      If str is NaN, then atof() returns NaN.
> 
> This sort of mess is my underlying objection: should we be assuming
> IEEE arithmetic, let alone a particular implementation of it?

Aha! I wonder if that is a Solaris specialty or actually conforming to
standards? A little digging on deja.com turned up a couple of blanket
statements to the effect that "any implementation where strtod can
return NaN is broken", but I'm not too sure about their authority.
Even the textual representation "NaN" is IEEE-854, not 754....

Whatever. I think we should fix as.double() (really: as.vector(x,
"double")) to accept the IEEE extended values in the same way that the
language itself does. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 12 14:37:06 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 May 1999 15:37:06 +0200
Subject: Memory crash. (PR#194)
In-Reply-To: plindsey@alpha.luc.ac.be's message of "Wed, 12 May 1999 14:40:51 +0200 (MET DST)"
References: <199905121240.OAA00492@pubhealth.ku.dk>
Message-ID: <x2wvyebe9p.fsf@blueberry.kubism.ku.dk>

plindsey@alpha.luc.ac.be writes:

> I just had a memory crash with R-0.64.1.
> I am running under intel pentium 200mhz under slackware linux 2.0.30.
> 
> 1/home/plindsey >gdb /usr/local/src/R/bin/R.binary core 
> GDB is free software and you are welcome to distribute copies of it
>  under certain conditions; type "show copying" to see the conditions.
> There is absolutely no warranty for GDB; type "show warranty" for details.
> GDB 4.16 (i486-slackware-linux), Copyright 1996 Free Software Foundation, Inc...
> Core was generated by `/usr/local/src/R-0.64.1/bin/R.binary --no-save --no-restore --vsize 8000000 --nsob'.
> Program terminated with signal 11, Segmentation fault.
> Reading symbols from /usr/X11R6/lib/libSM.so.6...done.
> Reading symbols from /usr/X11R6/lib/libICE.so.6...done.
> Reading symbols from /usr/X11R6/lib/libX11.so.6...done.
> Reading symbols from /lib/libdl.so.1...done.
> Reading symbols from /lib/libncurses.so.3.0...done.
> Reading symbols from /lib/libm.so.5...done.
> Reading symbols from /lib/libc.so.5...done.
> Reading symbols from /lib/ld-linux.so.1...done.
> Reading symbols from /usr/local/src/R-0.64.1/library/rmutil/libs/rmutil.so...done.
> Reading symbols from /usr/local/src/R-0.64.1/library/mmdc33/libs/mmdc33.so...done.
> Reading symbols from /usr/local/src/R-0.64.1/library/gnlm/libs/gnlm.so...done.
> #0  compactPhase () at memory.c:599
> 599             switch (TYPEOF(s)) {    /* get size in bytes */
> (gdb) quit

Thanks for reporting, Pat, but reports like the above are essentially
useless because the memory corruption could be *anywhere*. 

At the very least, we'd need a backtrace ('bt' command in gdb) to see
what functions was involved. Even then, it may be difficult, because
the true damage may have been done by the *previous* garbage
collection. 

The best thing would a simple example showing up the effect. This can
be difficult to create because things depend on the GC getting call at
the exact wrong moment. Turning on gctorture() can help with that by
forcing GC on any allocation, although it slows everything by three
orders of magnitude or so.

Another (even better) option would be if you could debug it yourself.
What I would do is to find the location of the "s" pointer which is
apparently getting overwritten and set a hardware watchpoint on it,
possibly conditionalised on the number of garbage collections.
However, that requires quite some knowledge of gdb.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From magni@omega.ien.it  Wed May 12 16:56:30 1999
From: magni@omega.ien.it (Alessandro Magni)
Date: Wed, 12 May 1999 17:56:30 +0200
Subject: R manual - S manual
Message-ID: <3739A4AE.A2CD78@omega.ien.it>

I just started working on R, and lacking a manual I saw that the advice
is to use som S or S-plus manual.
Where can I find it online?

P.S. I already downloaded and read "notes on S-plus" by Venables/Smith:
now I'd need something
deeper.


P.P.S. please, reply even by email to magni@omega.ien.it

--
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
\ Alessandro Magni
/                               IEN Galileo Ferraris
\                               c.M.d'Azeglio 42, 10125 Torino (ITALIA)
/                               magni@omega.ien.it
\                               Fax (39)11-6507611
/                               Tel (39)11-3919757
\                               Homepage at:
http://alpha.ien.it/~magni/home.html
/
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May 12 22:02:07 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 12 May 1999 17:02:07 -0400
Subject: yet another ts problem
Message-ID: <3739EC4F.840C8F9E@bank-banque-canada.ca>

This looks like a slightly different problem then the other ones:

R : Copyright 1999, The R Development Core Team
Version 0.64.1  (May 8, 1999)
...
> z <- ts(matrix(c(1:9,NA), 5, 2), start=c(1991,1))
> na <- is.na(z)
> z[na]
Error: subscript (10) out of bounds, should be at most 5
>

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed May 12 23:20:13 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 13 May 1999 10:20:13 +1200 (NZST)
Subject: yet another ts problem
In-Reply-To: <3739EC4F.840C8F9E@bank-banque-canada.ca>
Message-ID: <Pine.BSF.4.05.9905131005150.525-100000@g.ihaka.slip.auckland.ac.nz>


On Wed, 12 May 1999, Paul Gilbert wrote:

> This looks like a slightly different problem then the other ones:
> 
> R : Copyright 1999, The R Development Core Team
> Version 0.64.1  (May 8, 1999)
> ...
> > z <- ts(matrix(c(1:9,NA), 5, 2), start=c(1991,1))
> > na <- is.na(z)
> > z[na]
> Error: subscript (10) out of bounds, should be at most 5

There seem to be two problems here

1. I think that "[.ts" tries too hard to turn its value back into
   a time series.  The only case where this makes sense is when
   a selection of columns is taken from a multivariate series.
   If a row subset is taken, it can only be a time series if
   the subscripts have a very special pattern.  This would be
   too expensive I think.

   In S there is no "[.ts", and a simple array subset is returned.

2. There is a subscripting problem in 0.65 which is tripped by this
   (Paul's example triggers a coredump in 0.65).  The problem can
   be reproduced simply with:
	x <- 1:5
	i <- matrix(F,nr=5,nc=2)
	i[5,2] <- T
	x[i]

I will look at the latter, but I think the former needs a look too. 

	Ross

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 13 07:34:20 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 13 May 1999 08:34:20 +0200 (MET DST)
Subject: Error in stripplot  (was Re: [R] stripplot gets weird) (PR#195)
Message-ID: <199905130634.IAA06891@pubhealth.ku.dk>

[Moved to R-bugs, hence R-devel, as this is now a bug report. I have
fixed the stripplot bug.]

On Thu, 13 May 1999, David Scott wrote:

> 
> After thinking that the name difference was a problem, or that attaching
> the dataframe was a problem, I think it might be something to do with
> internal representation of numbers:

More precisely, with rounding errors.

> 
> aitken/Exam9> R
> 
> R : Copyright 1999, The R Development Core Team
> Version 0.63.3  (March 6, 1999)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type    "?license" or "?licence" for distribution details.
> 
> R is a collaborative project with many contributors.
> Type    "?contributors" for a list.
> 
> Type    "demo()" for some demos, "help()" for on-line help, or
>         "help.start()" for a HTML browser interface to help.
> Type    "q()" to quit R.
> 
> 
> > impurity.df<-read.table("impurities.dat",header=T)
> > impurity.df
>    supplier1 supplier2
> 1        3.8       1.8
> 2        3.5       2.2
> 3        4.1       1.3
> 4        2.5       5.1
> 5        3.6       4.0
> 6        4.3       4.7
> 7        2.1       3.3
> 8        2.9       4.3
> 9        3.2       4.2
> 10       3.7       2.5
> 11       2.8       5.4
> 12       2.7       4.6
> > supp.diff<-impurity.df$supplier1-impurity.df$supplier2
> > stripplot(supp.diff,method="stack")
> Warning in y + (unlist(xo) - 1) * offset * csize : longer object length
>         is not a multiple of shorter object length
> Error: x and y lengths differ
> > dput(supp.diff)
> c(2, 1.3, 2.8, -2.6, -0.4, -0.4, -1.2, -1.4, -1, 1.2, -2.6, -1.9
> )
> > supp.diff<-c(2, 1.3, 2.8, -2.6, -0.4, -0.4, -1.2, -1.4, -1, 1.2, -2.6,
> -1.9
> + )
> > stripplot(supp.diff,method="stack")
> >
> 
> Works!!!
> 
> The bit of code inside stripplot that is playing up is intended to
> determine where there are repeated values, and create a sequence
> numbering the values:
>     f <- function(x) seq(length(x))
>     for (i in 1:n) {
>         x <- groups[[i]]
>         y <- rep(i, length(x))
>         if (method == 2) 
>             y <- y + runif(length(y), -jitter, jitter)
>         else if (method == 3) {
>             xg <- split(x, factor(x))
>             xo <- lapply(xg, f)
>             x <- unlist(xg)
>             y <- y + (unlist(xo) - 1) * offset * csize

Yes. On my machine

Browse[1]> x
-2.61 -2.62  -1.9  -1.4  -1.2    -1 -0.41 -0.42   1.2   1.3     2   2.8 
 -2.6  -2.6  -1.9  -1.4  -1.2  -1.0  -0.4  -0.4   1.2   1.3   2.0   2.8 
Browse[1]> print(x, digits=17)                                                 
               -2.61                -2.62                 -1.9 
-2.59999999999999964 -2.60000000000000053 -1.89999999999999947 
                -1.4                 -1.2                   -1 
-1.39999999999999991 -1.19999999999999973 -1.00000000000000000 
               -0.41                -0.42                  1.2 
-0.39999999999999991 -0.40000000000000036  1.20000000000000018 
                 1.3                    2                  2.8 
 1.29999999999999982  1.99999999999999978  2.79999999999999982 
Browse[1]> factor(x)
 [1] -2.6 -2.6 -1.9 -1.4 -1.2 -1   -0.4 -0.4 1.2  1.3  2    2.8 
Levels:  -2.6 -2.6 -1.9 -1.4 -1.2 -1 -0.4 -0.4 1.2 1.3 2 2.8 
Browse[1]> unlist(xg)
-2.61 -2.62  -1.9  -1.4  -1.2    -1 -0.41 -0.42   1.2   1.3     2   2.8 
 -2.6  -2.6  -1.9  -1.4  -1.2  -1.0  -0.4  -0.4   1.2   1.3   2.0   2.8 
Browse[1]> unlist(xo)
-2.61 -2.62 -2.61 -2.62  -1.9  -1.4  -1.2    -1 -0.41 -0.42 -0.41 
    1     2     1     0     1     1     1     1     1     2     1 
-0.42   1.2   1.3     2   2.8 
    0     1     1     1     1 

The main problem is that 

Browse[1]> seq(0)
[1] 1 0

which is definitely wrong for here. stripplot should have 

    f <- function(x) seq(length=length(x))

En route, unlist gives very confusing labels, and I have added
use.names=FALSE.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu May 13 10:36:52 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Thu, 13 May 1999 11:36:52 +0200
Subject: yet another ts problem
References: <Pine.BSF.4.05.9905131005150.525-100000@g.ihaka.slip.auckland.ac.nz>
Message-ID: <373A9D34.EE7511F9@iarc.fr>

Ross Ihaka wrote:

> 1. I think that "[.ts" tries too hard to turn its value back into
>    a time series.  The only case where this makes sense is when
>    a selection of columns is taken from a multivariate series.
>    If a row subset is taken, it can only be a time series if
>    the subscripts have a very special pattern.  This would be
>    too expensive I think.
> 
>    In S there is no "[.ts", and a simple array subset is returned.

An alternative to using "[.ts" to take row subsets would be to 
expand the window.ts() function to include a "freq" or "deltat"
argument. One can then use window() to thin out a regular time series
and "[.ts" could be modified to just return a simple array subset
(in the process get rid of the horrible warning about not returning a
time series).

I already did something like this in the coda package for MCMC output -
which one often wants to thin out because of high autocorrelation.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu May 13 16:25:15 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 13 May 1999 11:25:15 -0400
Subject: yet another ts problem
References: <Pine.BSF.4.05.9905131005150.525-100000@g.ihaka.slip.auckland.ac.nz> <373A9D34.EE7511F9@iarc.fr>
Message-ID: <373AEEDA.39CAAC16@bank-banque-canada.ca>

Ross Ihaka wrote:

> 1. I think that "[.ts" tries too hard to turn its value back into
>    a time series.  ...

I agree with this, although, despite all the bugs I'm reporting, a lot of "[.ts"
works ok. All of my calls to "[.ts" that should try to preserve time series
properties are (or should be) from window or some window like utilities that I
use in my tframe kernel. So there is a lot of duplication because these are
already doing most of the stuff that "[.ts" is trying to do too.

(My tframe kernel used to completely take over  all time series including "ts",
but to do that I had to redefine some top level generics like window and plot -
which I think would eventually lead to trouble. My recent batch of ts problems
is because I have changed things so I don't take over the top level. This gives
more control to the class methods, which I think is the way it should work.)

>    In S there is no "[.ts", and a simple array subset is returned.

Splus 3.3 has  "[.its", "[.cts", and "[.rts", the class methods for time series.
However, I haven't used them much and I have no idea if they work properly.

Martyn Plummer wrote:

>An alternative to using "[.ts" to take row subsets would be to
>expand the window.ts() function to include a "freq" or "deltat"
>argument.

I don't see why this should be necessary? window works with dates and
automatically knows the frequency of the object.

>One can then use window() to thin out a regular time series
>and "[.ts" could be modified to just return a simple array subset

That is the way I (try to) use it already. I think if you're doing time-wise
stuff then you should be using dates, except at the lowest level when you need
to get into the representation and use "[". That is probably the main thing that
my tframe kernel lets me do fairly easily.

>(in the process get rid of the horrible warning about not returning a
>time series).

YES PLEASE !! In fact, I always have to redefine that function or I can't see my
output for all the warning messages.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May 13 19:07:23 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 May 1999 20:07:23 +0200
Subject: yet another ts problem
In-Reply-To: Paul Gilbert's message of Thu, 13 May 1999 11:25:15 -0400
References: <Pine.BSF.4.05.9905131005150.525-100000@g.ihaka.slip.auckland.ac.nz>
 <373A9D34.EE7511F9@iarc.fr> <373AEEDA.39CAAC16@bank-banque-canada.ca>
Message-ID: <x2pv44sv1g.fsf@biostat.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> Ross Ihaka wrote:
> 
> > 1. I think that "[.ts" tries too hard to turn its value back into
> >    a time series.  ...
> 
> I agree with this, although, despite all the bugs I'm reporting, a lot of "[.ts"
> works ok. All of my calls to "[.ts" that should try to preserve time series

Notice that there's a quickhack(TM) for the specific problem:

    y <- NextMethod("[")
    if (missing(i)) 
        ts(y, start = start(x), freq = frequency(x))
    else {
        n <- if (is.matrix(x)) 
            nrow(x)

insert "if (is.matrix(i)) return(y)" at the beginning of the else clause.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From leifj@matematik.su.se  Fri May 14 11:30:52 1999
From: leifj@matematik.su.se (leifj@matematik.su.se)
Date: Fri, 14 May 1999 12:30:52 +0200 (MET DST)
Subject: R 0.64 and -release fails to build on DU4.0 (PR#196)
Message-ID: <199905141030.MAA13049@pubhealth.ku.dk>


OS: Digital Unix 4.0E
Compiler: vanilla f77 and cc.

Build error:

f77  -o ../../bin/R.binary arithmetic.o array.o attrib.o bind.o builtin.o 
character.o coerce.o colors.o complex.o context.o cov.o cum.o debug.o 
deparse.o deriv.o devices.o dotcode.o dstruct.o duplicate.o envir.o errors.o 
eval.o format.o fourier.o gram.o gram-ex.o graphics.o iosupport.o list.o 
logic.o main.o match.o memory.o model.o names.o objects.o optimize.o options.o 
par.o paste.o platform.o plot.o plot3d.o plotmath.o print.o printarray.o 
printvector.o printutils.o random.o relop.o saveload.o scan.o seq.o sort.o 
source.o split.o subassign.o subscript.o subset.o summary.o unique.o util.o 
version.o ../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE 
-L/usr/local/X11R6.3/lib -lX11 -ldnet_stub -lz -ltermcap -lm
ld:
../unix/libunix.a(system.o): main: multiply defined
fort: Severe: Failed while trying to link.
make[2]: *** [../../bin/R.binary] Error 1
make[2]: Leaving directory `/usr/local/src/R-release/src/main'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/usr/local/src/R-release/src'
make: *** [R] Error 1

Please advise. I tried using egcs 1.1.2 to build R at first but then 
R dies with a floating point exception.

	Best R.

Leif Johansson				Phone: +46 8 164541		
Department of Mathematics		Fax  : +46 8 6126717		
Stockholm University 			email: leifj@matematik.su.se 	

    <This space is left blank for quotational and disclamatory purposes.>



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 14 11:40:18 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 May 1999 12:40:18 +0200
Subject: R 0.64 and -release fails to build on DU4.0 (PR#196)
In-Reply-To: leifj@matematik.su.se's message of Fri, 14 May 1999 12:30:52 +0200 (MET DST)
References: <199905141030.MAA13049@pubhealth.ku.dk>
Message-ID: <x2lneskk8d.fsf@biostat.ku.dk>

leifj@matematik.su.se writes:

> OS: Digital Unix 4.0E
> Compiler: vanilla f77 and cc.
> 
> Build error:
> 
> f77  -o ../../bin/R.binary arithmetic.o array.o attrib.o bind.o builtin.o 
...
> ld:
> ../unix/libunix.a(system.o): main: multiply defined
                              ^^^^^^^^^^^^^^^^^^^^^^^
> 
> Please advise. I tried using egcs 1.1.2 to build R at first but then 
> R dies with a floating point exception.

Hmmm. This looks like f77 is trying to supply its own main() routine.
Try changing LDCMD (in Makeconf) to cc.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 14 11:48:13 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 May 1999 12:48:13 +0200
Subject: r-bugs website down
Message-ID: <x2k8uckjv6.fsf@biostat.ku.dk>

The machine that runs the r-bugs website seems to have gone belly-up
some time yesterday. The e-mail interface should still work. 

(No jokes about "Ascension Day", please, I can make up those myself!)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 14 13:36:22 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 May 1999 14:36:22 +0200
Subject: r-bugs website down
In-Reply-To: Peter Dalgaard BSA's message of "14 May 1999 12:48:13 +0200"
References: <x2k8uckjv6.fsf@biostat.ku.dk>
Message-ID: <x24slf96bd.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> The machine that runs the r-bugs website seems to have gone belly-up
> some time yesterday. The e-mail interface should still work. 

It's back up again now.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri May 14 18:31:01 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 14 May 1999 19:31:01 +0200
Subject: yet another ts problem
References: <Pine.BSF.4.05.9905131005150.525-100000@g.ihaka.slip.auckland.ac.nz> <373A9D34.EE7511F9@iarc.fr> <373AEEDA.39CAAC16@bank-banque-canada.ca>
Message-ID: <373C5DD5.CB6D93F8@iarc.fr>

Paul Gilbert wrote:

> Splus 3.3 has  "[.its", "[.cts", and "[.rts", the class methods for time series.
> However, I haven't used them much and I have no idea if they work properly.

Splus time series do preserve their class: an irregular subset of an rts
(regular)
or its (irregular) yields an its, and a regular subset of either yields an rts.
Since time series are classed objects in R, they are more like Splus "rts"
objects than vanilla S time series: hence the idea that subsetting should
preserve
the class (yes I am responsible for this, and I'm REALLY sorry about the
warning).

> Martyn Plummer wrote:
> 
> >An alternative to using "[.ts" to take row subsets would be to
> >expand the window.ts() function to include a "freq" or "deltat"
> >argument.
> 
> I don't see why this should be necessary? window works with dates and
> automatically knows the frequency of the object.

Perhaps I wasn't very clear. There are three ways to take a subset
of a regular time series that yield another regular time series:
1) Take all observations after "start"
2) Take all observations before "end"
3) Take all observations where time between "start" and the observation
   is a multiple of "deltat".
We all agree that "[.ts" isn't the place to do this.  Since window.ts
already does 1) and 2), I propose extending it to do 3) too. Maybe
this is silly. Maybe nobody else wants to do this. But anyway, the
code is below. YMMV.

Martyn

"window.ts" <-
function (x, start, end, frequency, deltat) 
{
    x <- as.ts(x)
    xtsp <- tsp(x)
    xfreq <- xtsp[3]
    xtime <- time(x)
    ts.eps <- .Options$ts.eps
    if (missing(frequency) && missing(deltat)) 
        yfreq <- xfreq
    else if (missing(deltat)) 
        yfreq <- frequency
    else if (missing(frequency)) 
        yfreq <- 1/deltat
    if (xfreq%%yfreq < ts.eps) {
        thin <- round(xfreq/yfreq)
        yfreq <- xfreq/thin
    }
    else {
        thin <- 1
        yfreq <- xfreq
        warning("Frequency not changed")
    }
    start <- if (missing(start)) 
        xtsp[1]
    else switch(length(start), start, start[1] + (start[2] - 
        1)/xfreq, stop("Bad value for start"))
    if (start < xtsp[1]) {
        start <- xtsp[1]
        warning("start value not changed")
    }
    end <- if (missing(end)) 
        xtsp[2]
    else switch(length(end), end, end[1] + (end[2] - 1)/xfreq, 
        stop("Bad value for end"))
    if (end > xtsp[2]) {
        end <- xtsp[2]
        warning("end value not changed")
    }
    if (start > end) 
        stop("start cannot be after end")
    if (all(abs(start - xtime) > abs(start) * ts.eps)) {
        start <- xtime[(xtime > start) & ((start + 1/xfreq) > 
            xtime)]
    }
    if (all(abs(end - xtime) > abs(end) * ts.eps)) {
        end <- xtime[(xtime < end) & ((end - 1/xfreq) < xtime)]
    }
    i <- seq(trunc((start - xtsp[1]) * xfreq + 1.5), trunc((end - 
        xtsp[1]) * xfreq + 1.5), by = thin)
    y <- if (is.matrix(x)) 
        x[i, , drop = FALSE]
    else x[i]
    ystart <- xtime[i[1]]
    yend <- xtime[i[length(i)]]
    tsp(y) <- c(ystart, yend, yfreq)
    y
}

function (x, i, j, drop = TRUE) 
{
    y <- NextMethod("[")
    if (missing(i)) 
        ts(y, start = start(x), freq = frequency(x))
    else y
}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri May 14 18:55:12 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 14 May 1999 13:55:12 -0400
Subject: yet another ts problem
References: <Pine.BSF.4.05.9905131005150.525-100000@g.ihaka.slip.auckland.ac.nz> <373A9D34.EE7511F9@iarc.fr> <373AEEDA.39CAAC16@bank-banque-canada.ca> <373C5DD5.CB6D93F8@iarc.fr>
Message-ID: <373C637F.6E37B1BE@bank-banque-canada.ca>

>3) Take all observations where time between "start" and the observation
>   is a multiple of "deltat".

ok, and I agree that window.ts seems a better place to do this. I would prefer

window.ts <- function (x, start=NULL, end=NULL, frequency=NULL, deltat=NULL)
then use is.null() rather than missing()
or
window.ts <- function (x, start=start(x), end=end(x), frequency=frequency(x),
deltat=NULL)

as I always get nervous (after many long hours debugging) about how missing
arguments will get matched.

Paul

P.S. And thanks for removing the warning.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 14 19:15:29 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 May 1999 20:15:29 +0200
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: Peter Dalgaard BSA's message of "12 May 1999 15:13:15 +0200"
References: <199905121107.NAA29025@pubhealth.ku.dk> <x2zp3abfdg.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2btfnecvy.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Whatever. I think we should fix as.double() (really: as.vector(x,
> "double")) to accept the IEEE extended values in the same way that the
> language itself does. 

Fixed now, for what is to become 0.65.0.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hohn@math.utah.edu  Mon May 17 06:44:38 1999
From: hohn@math.utah.edu (Michael Hohn)
Date: Sun, 16 May 1999 23:44:38 -0600 (MDT)
Subject: minor installation problems
Message-ID: <199905170544.XAA06256@sunfish.math.utah.edu>

Hello,

I just finished installing R-0.64.1 on my linux machine (using kernel
2.0.36 under red hat 5.2, and 
gcc version egcs-2.91.60 19981201 (egcs-1.1.1 release)
)

The two problems I had:

1. ./configure --with-readline --with-x --prefix=/usr/local
   ran to a point, then gave up with
    ...	  
    checking return type of signal handlers... void
    checking for working const... yes
    checking size of long... 0
    Size of long must be at least 32 bits

Manual modification of ./configure to use 4 bytes fixed this problem.  
A manual run of the autoconf C program

#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long));
  exit(0);
}

produced the correct result, so
I don't know where this zero size problem came from.  


2.  After the final linking of R via

g77 -o ../../bin/R.binary  arithmetic.o array.o attrib.o bind.o
builtin.o character.o coerce.o colors.o complex.o context.o cov.o
cum.o debug.o deparse.o deriv.o devices.o dotcode.o dstruct.o
duplicate.o envir.o errors.o eval.o format.o fourier.o gram.o
gram-ex.o graphics.o iosupport.o list.o logic.o main.o match.o
memory.o model.o names.o objects.o optimize.o options.o par.o paste.o
platform.o plot.o plot3d.o plotmath.o print.o printarray.o
printvector.o printutils.o random.o relop.o saveload.o scan.o seq.o
sort.o source.o split.o subassign.o subscript.o subset.o summary.o
unique.o util.o version.o ../unix/libunix.a ../appl/libappl.a
../nmath/libmath.a -lSM -lICE -L/usr/X11R6/lib -lX11 -lreadline -lz
-ldl -lncurses -lm

the binary would exit with the error

    /usr/local/lib/R-0.64.1/bin/R.binary: error in loading shared
    libraries
    : undefined symbol: __register_frame_info

when run.

This symbol is defined in libstdc++.  A manual link via 

g77 -o ../../bin/R.binary /usr/lib/libstdc++.so arithmetic.o array.o
attrib.o bind.o builtin.o character.o coerce.o colors.o complex.o
context.o cov.o cum.o debug.o deparse.o deriv.o devices.o dotcode.o
dstruct.o duplicate.o envir.o errors.o eval.o format.o fourier.o
gram.o gram-ex.o graphics.o iosupport.o list.o logic.o main.o match.o
memory.o model.o names.o objects.o optimize.o options.o par.o paste.o
platform.o plot.o plot3d.o plotmath.o print.o printarray.o
printvector.o printutils.o random.o relop.o saveload.o scan.o seq.o
sort.o source.o split.o subassign.o subscript.o subset.o summary.o
unique.o util.o version.o ../unix/libunix.a ../appl/libappl.a
../nmath/libmath.a -lSM -lICE -L/usr/X11R6/lib -lX11 -lreadline -lz
-ldl -lncurses -lm

produced a working executable.



Any ideas on the source of these two problems?

Cheers,
	Mike
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon May 17 09:39:13 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 17 May 1999 10:39:13 +0200
Subject: Using  automake & libtool instead of just autoconf.. ?
Message-ID: <199905170839.KAA07904@sophie.ethz.ch>

Since we also ``sometimes'' have problems with incorrect configurations...
 ;-)

Read this on the octave mailing list :
  (I'm not using octave;  I'm trying to hear what they are talking about)

------- Start of forwarded message -------
Date: Mon, 17 May 1999 10:30:51 +0200
From: Thomas Walter <walter@pctc.chemie.uni-erlangen.de>
To: jwe@bevo.che.wisc.edu
CC: gohel@babbage.csee.usf.edu, help-octave@bevo.che.wisc.edu
Subject: Re: IRIX octave 2.0.14 can't find runtime libs


>>>>> "John" == John W Eaton <jwe@bevo.che.wisc.edu> writes:

[snip]

    John> Eventually, Octave's configure script and Makefiles should be fixed to
    John> use libtool, which should help to make these things work better.
    John> Unfortunately, I have little time to spend working on that project.
    John> Any volunteers?

To do this I think it is best to use 'automake' too.  Writing the
dependencies into the files 'Makefile.am' is much easier because they
are much shorter then `Makefile.in' files..  After that
calling 'automake' will build all the 'Makefile.in'.  And 'automake'
knows how to use 'libtool'.  There will be no need write rules to call
'libtool' by hand.

What are the opinions about that?  I have used automake and libtool
for a long time and I would help to do the step.

...
------- End of forwarded message -------

Any "R-devel"er who's willing to help here ?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Fri May 21 06:15:03 1999
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri, 21 May 1999 07:15:03 +0200
Subject: Bug list summary (automatic post)
Message-ID: <199905210515.HAA08645@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100

Directory:  Add-ons

* PR# 137 *
Subject: funfits
From: "Alvaro A. Novo" <novo@uiuc.edu>
Date: Tue, 9 Mar 1999 22:24:54 -0600

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100

Directory:  Documentation

* PR# 146 *
Subject: nlm docs
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 24 Mar 1999 15:48:41 +0100 (MET)

Directory:  Graphics

* PR# 38 *
Subject: possible bugs
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Sun, 6 Sep 1998 15:59:34 -0400 (EDT)
--ylim problem which appears solved
--Postscript overflow still with us (22feb99)
* PR# 61 *
Subject: points(...,  cex = ..)  is pretty wrong...
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 2 Nov 1998 19:15:06 +0100
--Symbols getting decentered when too large cex for X. Still there 22feb99  
* PR# 66 *
Subject: Bug with bounding box?
From: johnp@tip.csiro.au
Date: Thu, 3 Dec 1998 02:15:38 +0100
--Yes, this appears to have x/y reversed. The supplied example gives 
--%%Orientation: Landscape
--%%BoundingBox: 18 18 824 577 
--but the convention is to rotate the paper but leave the coordinate system.
* PR# 69 *
Subject: Some graphics bugs
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 04 Dec 1998 11:42:50 -0000 ()
Date: 04-Dec-98
--Various anomalies with text size and alignment. 2B appears to be solved. The 
--rest is still there (22feb99)
* PR# 79 *
Subject: apology: text(locator(),"sometext") works
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Tue, 15 Dec 1998 19:45:29 -0500 (EST)
--Clipping discrepancy x11/PS
* PR# 106 *
Subject: border-arg. in persp
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
Date: Fri, 29 Jan 1999 11:12:39 +0100
--No effect of arg. Still here 22feb99. Segfault with border=0 seems gone now. 
* PR# 114 *
Subject: PostScript Level 1/2 bug
From: ben@eno.princeton.edu
Date: Mon, 8 Feb 1999 00:07:20 +0100
--Not sure whether this is really PS lev 1/2 issue.
--/Font5 /Symbol findfont definefont
--(missing scalefont?)
* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 123 *
Subject: Text in plot
From: Ennapadam Venkatraman <venkat@biosta.mskcc.org>
Date: Thu, 18 Feb 1999 13:05:37 -0500
--Multiline text not working
* PR# 130 *
Subject: lty=0 -- shouldn't it give an invisible line?
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 28 Feb 1999 21:45:43 +0100
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
* PR# 153 *
Subject: image + x11
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
Date: Wed, 31 Mar 1999 14:09:53 +0200

Directory:  In-Out

* PR# 125 *
Subject: scan rejects complex
From: John.Peters@tip.csiro.au (John Peters)
Date: Mon, 22 Feb 1999 10:08:14 +1100 (EST)
* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM

Directory:  Installation

* PR# 95 *
Subject: patch to 63.2
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 15 Jan 1999 11:00:25 +0100 (MET)
--An incident where the 0.63.2 patches didn't take. So far the only one. 
--Maybe caused by patching unclean sources?

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 118 *
Subject: Function parsing
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Wed, 10 Feb 1999 13:42:01 +0000 (GMT)
--comment placement.
* PR# 166 *
Subject: outer fails with group generic operations on factors
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Tue, 13 Apr 1999 18:28:53 +0100 (BST)
--There is a suggested solution (PD), but not yet implemented (99/05/07)

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 180 *
Subject: nlm on a function in the Math group
From: Douglas Bates <bates@stat.wisc.edu>
Date: Thu, 29 Apr 1999 17:11:00 -0500 (CDT)
--causes R to core dump
* PR# 185 *
Subject: Re: [R] R_problem_buf in the S.h files & lists in .C
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 1999 00:32:49 +0200
--S objects in .C calls (not just lists) are now documented in the help file

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

* PR# 121 *
Subject:  model.frame mangles time series 
From: Peter Dalgaard BSA <pd@biostat.ku.dk>
Date: Thu, 18 Feb 1999 15:47:24 +0100
--Subset in C code + attributes = mess
--Switch to interpreted ("[")

Directory:  Startup

* PR# 21 *
Subject: Restoring large image files
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 21 Aug 1998 13:29:16 -0000 ()
--Request to change in error conditions in R_InitialData. Could be done, but
--at present initial loads are not distinguished from load("file") calls. 

Directory:  System-specific

* PR# 145 *
Subject: R-0.63.3 package on IRIX 6.5 machine
From: Jayshree Sarma <jsarma@cs.gmu.edu>
Date: Tue, 23 Mar 1999 16:54:20 -0500 (EST)
* PR# 163 *
Subject: IRIX compile
From: mtim@farm.ecs.umass.edu
Date: Sat, 10 Apr 1999 19:35:43 +0200

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 174 *
Subject:  do.call() mangles expressions in arguments 
From: Peter Dalgaard BSA <pd@biostat.ku.dk>
Date: Wed, 21 Apr 1999 19:39:53 +0200
* PR# 186 *
Subject: subscripting in list()
From: Wenxin Mao <mao@compstat.wharton.upenn.edu>
Date: Sun, 9 May 1999 12:42:29 -0400 (EDT)
* PR# 187 *
Subject: subscripting in list()
From: Wenxin Mao <mao@compstat.wharton.upenn.edu>
Date: Sun, 9 May 1999 13:02:51 -0400 (EDT)
* PR# 189 *
Subject: model.matrix crashes
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Tue, 11 May 1999 10:16:33 +0200 (MET DST)
* PR# 190 *
Subject: PRIVATE: xxxx
From: barakil@nice.com
Date: Tue, 11 May 1999 13:38:49 +0200 (MET DST)
* PR# 191 *
Subject: dev.print help page
From: wsi@gcal.ac.uk
Date: Tue, 11 May 1999 13:39:05 +0200 (MET DST)
* PR# 192 *
Subject: dev.print aspect ratio
From: wsi@gcal.ac.uk
Date: Tue, 11 May 1999 13:43:50 +0200 (MET DST)
* PR# 193 *
Subject: matrix() can't handle NaN
From: wsi@gcal.ac.uk
Date: Tue, 11 May 1999 14:01:59 +0200 (MET DST)
* PR# 194 *
Subject: Memory crash.
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 12 May 1999 14:43:45 +0200 (MET DST)
* PR# 195 *
Subject: Error in stripplot  (was Re: [R] stripplot gets weird)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 13 May 1999 07:34:06 +0100 (BST)
* PR# 196 *
Subject: R 0.64 and -release fails to build on DU4.0
From: Leif Johansson <leifj@matematik.su.se>
Date: Fri, 14 May 1999 12:32:14 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Cor.Berrevoets@gironet.nl  Fri May 21 19:04:12 1999
From: Cor.Berrevoets@gironet.nl (Cor.Berrevoets@gironet.nl)
Date: Fri, 21 May 1999 20:04:12 +0200 (MET DST)
Subject: glm crash (PR#197)
Message-ID: <199905211804.UAA12871@pubhealth.ku.dk>

Dear bug-busters,

This week I've posted a message to the R-help mailing to inquire if
anybody had experienced alike me. When I run the following GLM:
glm(n~s+c+m, family=quasi(link=log, variance=mu))
several times using exactly the same dataset R crashes at random. I have
tried to probe into the problem by tracking the response times of the
above function with system.time (e.g. system.time(glm ....))

I noticed that the response times increased in subsequent calls to the
function, at some (random) point leading to a crash. So it looked as if
R was "leaking" somewhere. Then I started all-over again (restarted PC)
and released before the glm-command a gc-command to collect the garbage.
That works rather well and the crashing seems less frequent (mostly
after 3-4 times issueing the glm-command) . Also the increasing response
times changed into a stable component with one big exception, the First
Call. Every time after fully re-starting R I issued gc() and then the
glm-command . This call is about 1/3 or so of the time spend in the
subsequent calls. Looking at the Ncells/Vcells hardly any difference
exists, on average the Ncells/Vcells (virgin state of the program) are
about 50 cells bigger than after the subsequent glm-commands.  In the
table below you can see the effects I just mentioned, notice the "odd"
behaviour of the default Vsize.

Table: response times glm function at varying Vsizes.

Vsize    1st response    subsequent
default            47.57        27.96
8M                39.27        62.15
16M              38.44        62.37
32M              13.34        32.77
64M              10.13        34.28
128M            11.45        34.21

Im using R 0.64.1 on Win95..

Maybe someone of your team can tell me more on the nature of this
"thing".

Hoping not to bug to much,

greetings

Cor Berrevoets





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri May 21 19:22:21 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 21 May 1999 11:22:21 -0700 (PDT)
Subject: glm crash (PR#197)
In-Reply-To: <199905211804.UAA12871@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.9905211112010.269-100000@wompom.biostat.washington.edu>

On Fri, 21 May 1999 Cor.Berrevoets@gironet.nl wrote:

> Dear bug-busters,
> 
> This week I've posted a message to the R-help mailing to inquire if
> anybody had experienced alike me. When I run the following GLM:
> glm(n~s+c+m, family=quasi(link=log, variance=mu))
> several times using exactly the same dataset R crashes at random. I have
> tried to probe into the problem by tracking the response times of the
> above function with system.time (e.g. system.time(glm ....))

This could be some nasty form of memory problem, but it is difficult to
tell.  With a program as complex as R it is very hard to diagnose bugs
from symptoms like this.

At a minimum we need to know exactly what message R gives, however this
probably isn't enough. An example data set that reliably produces the
problem gives us a chance to track the bug down and at least makes it
easy to distinguish Windows-based bugs from general-purpose bugs.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Fri May 21 21:09:06 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Fri, 21 May 1999 21:09:06 +0100
Subject: glm crash (PR#197)
In-Reply-To: <199905211804.UAA12871@pubhealth.ku.dk>; from Cor.Berrevoets@gironet.nl on Fri, May 21, 1999 at 08:04:12PM +0200
References: <199905211804.UAA12871@pubhealth.ku.dk>
Message-ID: <19990521210906.00262@hal.stat.unipd.it>

On Fri, May 21, 1999 at 08:04:12PM +0200, Cor.Berrevoets@gironet.nl wrote:
> Dear bug-busters,
> 
> This week I've posted a message to the R-help mailing to inquire if
  
  Cor,
  I apologize for not asking you what follows after your first message.

> anybody had experienced alike me. When I run the following GLM:
> glm(n~s+c+m, family=quasi(link=log, variance=mu))

  Could you send me the data? I will try to replicate the error
  both under Windows and some flavour of Unixes to try to understand
  what is going on. 
  Have you got into similar problem with previous version?
  
  guido
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun May 23 07:59:02 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 23 May 1999 08:59:02 +0200 (MET DST)
Subject: Bug in loglin with variable called "c" (PR#198)
Message-ID: <199905230659.IAA17027@pubhealth.ku.dk>

Summary:

loglin will fail if there is a global variable called c. I have
fixed this for 0.64.2 and 0.65.

On Sat, 22 May 1999, Cor en Aylin wrote:

> Dear Brian,
> 
> Using the mass library for R (the most recent port dated 16 may 1999) I

Could you give version numbers in such reports please: at the moment there
is an official version (5.3pl037) of MASS for R, plus a pre-release of MASS
for V&R3, and you seem to be using the latter.  That is _not_ the most
recent port:  it is a different major version (6.1 not 5.3) and please
don't use it unless you like testing pre-release software. BTW, the name is
MASS, not mass or Mass: it is an acronym.

> have encountered a minor problem you  might want to be informed about :
> 
> If used the following command:
>   mydata.loglm <- loglm(n~ s+c+m, mydata)
> 
> I got an the following error :  Error in get(x, envir, mode, inherits) :
> variable "FUN" was not found
> 
> traceback()
> [1] "get(as.character(f), mode = \"function\")"
> [2] "match.fun(FUN)"
> [3] "lapply(y, c, x[i])"
> [4] "subsets(margin[[k]])"
> [5] "loglin(data, margins, start = start, fit = fitted, param = param, "
> 
> [6] "    eps = eps, iter = iter, print = print)"
> [7] "loglm1.default(formula, data, ..., start = st)"
> [8] "loglm1.data.frame(formula, data, ...)"
> [9] "loglm(n ~ s + m + c, mydata )"
> 
> Trying to see where the problem sits within loglin I saw that (line 3 of
> traceback) variable "c" is used in lapply, and since my data-variable
> also is called "c" mine was used instead (wrongly). I understood the
> message and I think that I better not use often uses variable-names
> (a..z) as names for my data-vars.

The problem is not in MASS: it is occurring in the R version of loglin.

To reproduce this I have to have a global variable c, not a column c in
the dataframe. So that is the workaround: make your variables columns in 
mydata. Here is a example:

library(MASS)
data(quine)
c <- quine$Eth
loglm(Days ~ .^2, quine)

To fix this in R, the line in loglin needs to be lapply(y, "c", x[i]).

Kurt: do you want explicitly to get c() from package:base here, to be
safer, or would that be too restrictive?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From o1422@aol.com  Wed May 26 06:54:47 1999
From: o1422@aol.com (o1422@aol.com)
Date: Wed, 26 May 1999 07:54:47 +0200
Subject: INTERNATIONAL DRIVERS LICENCE
Message-ID: <B0003602282@mail.astat.de>




INTERNATIONAL DRIVER'S LICENSE

Need a new driver's license? 

Too many points or other trouble?

Want a license that can never be suspended 
or revoked?

Want ID for nightclubs or hotel check-in?

Avoid tickets, fines, and mandatory driver's 
education.

Protect your privacy, and hide your identity.

The United Nations gave you the privilege to
drive freely throughout the world! (Convention 
on International Road Traffic of September 19, 
1949 & World Court Decision, The Hague, 
Netherlands, January 21, 1958)

Take advantage of your rights.  Order a valid 
International Driver's License that can never 
be suspended or revoked.

Confidentiality assured.

CALL NOW!!! 

1-937-586-9313 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Wed May 26 14:53:44 1999
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Wed, 26 May 1999 15:53:44 +0200 (MET DST)
Subject: help for trig functions (PR#199)
Message-ID: <199905261353.PAA00615@pubhealth.ku.dk>

The help for trig functions (e.g. ?tan) says 
Description:

        These functions give the obvious trigonometric func-
        tions.  They respectively compute the cosine, sine,
        tangent, arc-cosine, arc-sine, arc-tangent and arc-tan-
        gent of two arguments.

1. I think it would be useful to state that the arguments are in radians
(not degrees).

2. only atan2 expects two arguments, the rest take one argument.

> version
           _                 
platform   i686-unknown-linux
arch       i686              
os         linux             
system     i686, linux       
status                       
status.rev 0                 
major      0                 
minor      64.1              
year       1999              
month      May               
day        8                 
language   R     

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From msa@biostat.mgh.harvard.edu  Thu May 27 17:40:04 1999
From: msa@biostat.mgh.harvard.edu (msa@biostat.mgh.harvard.edu)
Date: Thu, 27 May 1999 18:40:04 +0200 (MET DST)
Subject: Factor structures not preserved after dump/dput (PR#200)
Message-ID: <199905271640.SAA11822@pubhealth.ku.dk>

Full_Name: Marek Ancukiewicz
Version: 0.64.0
OS: Linux (RedHat 6.0)
Submission from: (NULL) (132.183.12.87)


I've noticed that factor structures get recoded when the data is dumped
using either dump or dput and then restored with source or dget. This
occurs when the values taken by factors do not include 1. For example:

  a <- factor(1:5,1:5,c('a','b','c','d','e'))
  b <- a[3:5]
  dput(b,'b.data')
  new.b <- dget('b.data')

Then b is not the same as new.b:
  > b
  [1] c d e
  Levels:  a b c d e 
  > new.b
  [1] a b c
  Levels:  a b c d e 

This seems to be a very serious bug. It can make one to 
mislabel treatments: a very emabarassing (and potentially 
disastrous) mistake. The reason for this bug seems to
lie in a way in which structure() treats factor structures.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May 27 18:06:37 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 May 1999 19:06:37 +0200
Subject: Factor structures not preserved after dump/dput (PR#200)
In-Reply-To: msa@biostat.mgh.harvard.edu's message of "Thu, 27 May 1999 18:40:04 +0200 (MET DST)"
References: <199905271640.SAA11822@pubhealth.ku.dk>
Message-ID: <x2wvxujvc2.fsf@blueberry.kubism.ku.dk>

msa@biostat.mgh.harvard.edu writes:

>   a <- factor(1:5,1:5,c('a','b','c','d','e'))
>   b <- a[3:5]
>   dput(b,'b.data')
>   new.b <- dget('b.data')
> 
> Then b is not the same as new.b:
>   > b
>   [1] c d e
>   Levels:  a b c d e 
>   > new.b
>   [1] a b c
>   Levels:  a b c d e 
> 
> This seems to be a very serious bug. It can make one to 
> mislabel treatments: a very emabarassing (and potentially 
> disastrous) mistake. The reason for this bug seems to
> lie in a way in which structure() treats factor structures.

Ouch! The fix seems to be to have structure() contain

        if (is.numeric(.Data) && any(names(attrib) == "levels")) 
            .Data <- factor(.Data, levels = 1:max(1,.Data))

rather than just plain  factor(.Data) .  Will commit this in a moment.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon May  3 07:03:21 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 3 May 1999 08:03:21 +0200
Subject: \code and \link
Message-ID: <199905030603.IAA14024@pc87.maho.magnaeu.com>

With Fritz's new debugging additions to Rdconv, several packages give
messages of the kind

  missing link(s):  this-is-escaped-codenormal-bracket30bracket-normal

when building the documentation.

This comes from

	\link{\code{xxx}}

(where `xxx' contains characters that need to be escaped) which should
really be

	\code{\link{xxx}}

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon May  3 08:37:03 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 3 May 1999 09:37:03 +0200 (MET DST)
Subject: par help page  errors (PR#182)
Message-ID: <199905030737.JAA16014@pubhealth.ku.dk>

>>>>> "Martyn" == Martyn Plummer <plummer@iarc.fr> writes:

    Martyn> R 0.64.0 In the help page for par(), the parameters "oma" and
    Martyn> "omi" are described as vectors of the form c(xb, xt, yl, yr)
    Martyn> whereas they are c(xb,yl,xt,yr)

Thanks Martyn.
Committed a fix naming them   c(xbot, yleft, xtop, yright).

Should be in one of the next snapshots (R-release...).
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wvenable@arcola.stats.adelaide.edu.au  Mon May  3 09:54:11 1999
From: wvenable@arcola.stats.adelaide.edu.au (Bill Venables)
Date: Mon, 3 May 1999 18:24:11 +0930 (CST)
Subject: par help page  errors (PR#182)
In-Reply-To: <199905030737.JAA16014@pubhealth.ku.dk>
References: <199905030737.JAA16014@pubhealth.ku.dk>
Message-ID: <14125.25651.873737.624218@arcola.stats.adelaide.edu.au>

>>>>> "MM" == maechler  <maechler@stat.math.ethz.ch> writes:

>>>>> "Martyn" == Martyn Plummer <plummer@iarc.fr> writes:
    Martyn> R 0.64.0 In the help page for par(), the parameters
    Martyn> "oma" and "omi" are described as vectors of the form

I have always wondered why "oma" was so named.  The margin
parameters are "mar" (relative) and "mai" (in inches), why isn't
the outer margin parameter for relative units called "omr".  To
me "Oma" sounds like someone's grandmother... . :-)

    Martyn> c(xb, xt, yl, yr) whereas they are c(xb,yl,xt,yr)

    MM> Thanks Martyn.  Committed a fix naming them c(xbot,
    MM> yleft, xtop, yright).

Why not go all the way and just use c(bottom, left, top, right)?
the x/y prefixes only serve to confuse in my view.  These are
margins, not axes.

-- 
-----------------------------------------------------------------
Bill Venables, Statistician, CMIS Environmetrics Project.

Physical address:                            Postal address:
CSIRO Marine Laboratories,                   PO Box 120,       
233 Middle St, Cleveland, Queensland         Cleveland, Qld, 4163
AUSTRALIA                                    AUSTRALIA

Telephone: +61 7 3826 7251     Email: Bill.Venables@cmis.csiro.au     
      Fax: +61 7 3826 7304
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a.o.jaunsen@astro.uio.no  Mon May  3 10:27:53 1999
From: a.o.jaunsen@astro.uio.no (a.o.jaunsen@astro.uio.no)
Date: Mon, 3 May 1999 11:27:53 +0200 (MET DST)
Subject: compilation of R-0.63.3 on alpha (PR#183)
Message-ID: <199905030927.LAA18266@pubhealth.ku.dk>

This is a multipart MIME message.

--==_Exmh_981436288450
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable


Hi !

I have problems compiling R successfully on a DEC-UINX 4.0E.
I have applied the recommended config.site, which I enclose.
As can be seen from the compilation log there are linking errors...

I did a 'make check' which fails for the R binary.

>make check
=2E
=2E
=2E
Building system startup profile
make[7]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/profile'
make[6]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
'
make[5]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src'
make[4]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3'
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/tests=
'
Massaging examples into base-Ex.R ...
Running all help() examples ...
=2E./../bin/R --vanilla < base-Ex.R > base-Ex.Rout
/bin/sh: 5676 Floating exception
make[2]: *** [base-Ex.Rout] Error 136
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/tests=
/Examp
les'
make[1]: *** [test-Examples] Error 2
make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/tests=
'
make: [test-All] Error 2 (ignored)


Regards,
Andreas



--==_Exmh_981436288450
Content-Type: text/plain ; name="config.site"; charset=iso-8859-1
Content-Description: config.site
Content-Disposition: attachment; filename="config.site"
Content-Transfer-Encoding: quoted-printable

#! /bin/sh

### This file is part of R.
###
### R is free software; you can redistribute it and/or modify it under
### the terms of the GNU General Public License as published by the Free
### Software Foundation; either version 2 of the License, or (at your
### option) any later version.
###
### R is distributed in the hope that it will be useful, but WITHOUT ANY
### WARRANTY; without even the implied warranty of MERCHANTABILITY or
### FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
### License for more details.
###
### You should have received a copy of the GNU General Public License
### along with R; if not, you can obtain it via the World Wide Web at
### `http://www.gnu.org/copyleft/gpl.html', or by writing to the Free
### Software Foundation, 59 Temple Place -- Suite 330, Boston, MA
### 02111-3307, USE.

# By means of this file you can (also) provide default values for the
# configuration process.  To set variables, uncomment the VAR=3DDEFAULT
# lines and set DEFAULT according to your needs.

# The command used to spool PostScript files to the printer.
# If unspecified, the system will look for either "lpr" or "lp"
R_PRINTCMD=3Dppr

# The paper size for the local (PostScript) printer.
# It must either be left blank or set to one of "a4" or "letter".
# If left blank the system will use "a4".
R_PAPERSIZE=3Da4

# The default behavior of R if it encounters EOF in batch mode.
# Set this to one of "--save" or "--no-save" depending whether you
# want automatic saving of `.RData' or not.
# R_BATCHSAVE=3D

# The command which runs the C compiler.
# If unspecified, a search is made for gcc and cc (in that order).
# To override this choice, specify the name of the command which runs
# the compiler here, for example `c89'.
CC=3D"cc"

# Debugging and optimization options for the C compiler.
# Use this to specify CFLAGS for the version of the C compiler specified
# above.  If unspecified, defaults to "-g -O2" for gcc, and "-g" in all
# other cases.
# CFLAGS=3D"-g -I/usr/local/include"

# Header file search directory (`-IDIR') and any other miscellaneous
# options for the C preprocessor and compiler.
# CPPFLAGS=3D

# The command which runs the the FORTRAN compiler.
# If unspecified, a search is made for g77, fort77, f77, f90, xlf, cf77,
# and fc (in that order).  If none of these is found, f2c is used if
# found; otherwise, R cannot be compiled.  The search mechanism can be
# changed using the `--with-g77', `--with-f77', and `--with-f2c' command
# line options to configure.
FC=3D"f77"

# Options for the FORTRAN compiler.
# Use this to specify FFLAGS for the version of the compiler specified
# above.  If unspecified, defaults to "-O2" for g77, and "" otherwise.
FFLAGS=3D"-g -fpe3"

# The command to be used to load the main R binary.
# This is usually the FORTRAN or C compiler, but the automatic choice
# can be overriden by means of this variable.
LDCMD=3D"f77 -g -nofor_main -fpe3 "

# For `-l' and `-L' options to pass to the linker.
# LIBS=3D

# The flags which are necessary for loading main program which will load
# DLLs at runtime.  HP-UX and Linux-elf are examples of platforms which
# use this.  These platforms are already taken care of by configure.
# DLLFLAGS=3D

# Any special flags which must be used when compiling C code to be
# turned into a shared library.  This is typically something like -fpic
# or -fPIC.  If this variable is left unspecified an attempt is made to
# automatically detect the correct value by configure.
# CPICFLAGS=3D

# The following variable can be used to provide any PIC flags for the
# FORTRAN compiler (if you are using one).  If not specified, the value
# of CPICFLAGS above is used.
# FPICFLAGS=3D

# Any special flags which are required by "ld" when creating shared
# libraries.  This is usually automatically detected by configure.
SHLIBLDFLAGS=3D'-shared -expect_unresolved "*"'

--==_Exmh_981436288450
Content-Type: text/plain ; name="rlog.txt"; charset=iso-8859-1
Content-Description: rlog.txt
Content-Disposition: attachment; filename="rlog.txt"
Content-Transfer-Encoding: quoted-printable

>make
make[1]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/afm'=

make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/afm'
make[1]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/demo=
s'
make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/demos=
'
make[1]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/doc'=

make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/doc'
make[1]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/etc'=

make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/etc'
make[1]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src'=

make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
includ
e'
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/i=
nclude
'
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
appl'
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c S_compat.c=
 -o =

S_compat.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c approx.c -=
o =

approx.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c bakslv.c -=
o =

bakslv.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c binning.c =
-o =

binning.o
f77 -g -fpe3 -c ch2inv.f -o ch2inv.o
f77 -g -fpe3 -c chol.f -o chol.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c cpoly.c -o=
 =

cpoly.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c cumsum.c -=
o =

cumsum.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c distance.c=
 -o =

distance.o
f77 -g -fpe3 -c dpoco.f -o dpoco.o
f77 -g -fpe3 -c dpodi.f -o dpodi.o
f77 -g -fpe3 -c dpofa.f -o dpofa.o
f77 -g -fpe3 -c dposl.f -o dposl.o
f77 -g -fpe3 -c dqrdc.f -o dqrdc.o
f77 -g -fpe3 -c dqrdc2.f -o dqrdc2.o
f77 -g -fpe3 -c dqrls.f -o dqrls.o
f77 -g -fpe3 -c dqrsl.f -o dqrsl.o
f77 -g -fpe3 -c dqrutl.f -o dqrutl.o
f77 -g -fpe3 -c dsvdc.f -o dsvdc.o
f77 -g -fpe3 -c dtrco.f -o dtrco.o
f77 -g -fpe3 -c dtrsl.f -o dtrsl.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c eigen.c -o=
 =

eigen.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fortran.c =
-o =

fortran.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fft.c -o f=
ft.o
f77 -g -fpe3 -c fmin.f -o fmin.o
f77 -g -fpe3 -c lminfl.f -o lminfl.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c loglin.c -=
o =

loglin.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c lowess.c -=
o =

lowess.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c machar.c -=
o =

machar.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c massdist.c=
 -o =

massdist.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pretty.c -=
o =

pretty.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pythag.c -=
o =

pythag.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rowsum.c -=
o =

rowsum.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c splines.c =
-o =

splines.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c stem.c -o =
stem.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c strsignif.=
c -o =

strsignif.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c tabulate.c=
 -o =

tabulate.o
f77 -g -fpe3 -c uncmin.f -o uncmin.o
f77 -g -fpe3 -c zeroin.f -o zeroin.o
ar cr libappl.a S_compat.o approx.o bakslv.o binning.o  ch2inv.o chol.o =

cpoly.o cumsum.o distance.o dpoco.o dpodi.o dpofa.o dposl.o dqrdc.o dqrdc=
2.o =

dqrls.o dqrsl.o dqrutl.o dsvdc.o dtrco.o dtrsl.o eigen.o fortran.o fft.o =

fmin.o lminfl.o loglin.o lowess.o machar.o massdist.o pretty.o pythag.o =

rowsum.o splines.o stem.o strsignif.o tabulate.o uncmin.o zeroin.o
ranlib libappl.a
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/a=
ppl'
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
nmath'
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c mlutils.c =
-o =

mlutils.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c d1mach.c -=
o =

d1mach.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c i1mach.c -=
o =

i1mach.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fmax2.c -o=
 =

fmax2.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fmin2.c -o=
 =

fmin2.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fmod.c -o =
fmod.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fprec.c -o=
 =

fprec.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fround.c -=
o =

fround.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c ftrunc.c -=
o =

ftrunc.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c sign.c -o =
sign.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fsign.c -o=
 =

fsign.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fsquare.c =
-o =

fsquare.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fcube.c -o=
 =

fcube.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c imax2.c -o=
 =

imax2.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c imin2.c -o=
 =

imin2.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c chebyshev.=
c -o =

chebyshev.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c logrelerr.=
c -o =

logrelerr.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c lgammacor.=
c -o =

lgammacor.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c gammalims.=
c -o =

gammalims.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c gamma.c -o=
 =

gamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c lgamma.c -=
o =

lgamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c gamma_cody=
=2Ec -o =

gamma_cody.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c beta.c -o =
beta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c lbeta.c -o=
 =

lbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c polygamma.=
c -o =

polygamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c bessel_i.c=
 -o =

bessel_i.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c bessel_j.c=
 -o =

bessel_j.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c bessel_k.c=
 -o =

bessel_k.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c bessel_y.c=
 -o =

bessel_y.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c choose.c -=
o =

choose.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c snorm.c -o=
 =

snorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c sunif.c -o=
 =

sunif.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c sexp.c -o =
sexp.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dgamma.c -=
o =

dgamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pgamma.c -=
o =

pgamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qgamma.c -=
o =

qgamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rgamma.c -=
o =

rgamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dbeta.c -o=
 =

dbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pbeta.c -o=
 =

pbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qbeta.c -o=
 =

qbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rbeta.c -o=
 =

rbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dunif.c -o=
 =

dunif.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c punif.c -o=
 =

punif.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qunif.c -o=
 =

qunif.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c runif.c -o=
 =

runif.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dnorm.c -o=
 =

dnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pnorm.c -o=
 =

pnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qnorm.c -o=
 =

qnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rnorm.c -o=
 =

rnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dlnorm.c -=
o =

dlnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c plnorm.c -=
o =

plnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qlnorm.c -=
o =

qlnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rlnorm.c -=
o =

rlnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c df.c -o df=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pf.c -o pf=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qf.c -o qf=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rf.c -o rf=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dt.c -o dt=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pt.c -o pt=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qt.c -o qt=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rt.c -o rt=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dchisq.c -=
o =

dchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pchisq.c -=
o =

pchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qchisq.c -=
o =

qchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rchisq.c -=
o =

rchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dbinom.c -=
o =

dbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pbinom.c -=
o =

pbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qbinom.c -=
o =

qbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rbinom.c -=
o =

rbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dcauchy.c =
-o =

dcauchy.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pcauchy.c =
-o =

pcauchy.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qcauchy.c =
-o =

qcauchy.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rcauchy.c =
-o =

rcauchy.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dexp.c -o =
dexp.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pexp.c -o =
pexp.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qexp.c -o =
qexp.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rexp.c -o =
rexp.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dgeom.c -o=
 =

dgeom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pgeom.c -o=
 =

pgeom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qgeom.c -o=
 =

qgeom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rgeom.c -o=
 =

rgeom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dhyper.c -=
o =

dhyper.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c phyper.c -=
o =

phyper.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qhyper.c -=
o =

qhyper.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rhyper.c -=
o =

rhyper.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dnbinom.c =
-o =

dnbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pnbinom.c =
-o =

pnbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qnbinom.c =
-o =

qnbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rnbinom.c =
-o =

rnbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dpois.c -o=
 =

dpois.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c ppois.c -o=
 =

ppois.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qpois.c -o=
 =

qpois.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rpois.c -o=
 =

rpois.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dweibull.c=
 -o =

dweibull.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pweibull.c=
 -o =

pweibull.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qweibull.c=
 -o =

qweibull.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rweibull.c=
 -o =

rweibull.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dlogis.c -=
o =

dlogis.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c plogis.c -=
o =

plogis.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qlogis.c -=
o =

qlogis.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rlogis.c -=
o =

rlogis.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dnchisq.c =
-o =

dnchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pnchisq.c =
-o =

pnchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qnchisq.c =
-o =

qnchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dnbeta.c -=
o =

dnbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pnbeta.c -=
o =

pnbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pnf.c -o p=
nf.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pnt.c -o p=
nt.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c ptukey.c -=
o =

ptukey.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qtukey.c -=
o =

qtukey.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dwilcox.c =
-o =

dwilcox.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pwilcox.c =
-o =

pwilcox.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qwilcox.c =
-o =

qwilcox.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rwilcox.c =
-o =

rwilcox.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dsignrank.=
c -o =

dsignrank.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c psignrank.=
c -o =

psignrank.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qsignrank.=
c -o =

qsignrank.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rsignrank.=
c -o =

rsignrank.o
ar cr libmath.a mlutils.o d1mach.o i1mach.o fmax2.o fmin2.o fmod.o fprec.=
o =

fround.o ftrunc.o sign.o fsign.o fsquare.o fcube.o imax2.o imin2.o chebys=
hev.o =

logrelerr.o lgammacor.o gammalims.o gamma.o lgamma.o gamma_cody.o beta.o =

lbeta.o polygamma.o bessel_i.o bessel_j.o bessel_k.o bessel_y.o choose.o =

snorm.o sunif.o sexp.o dgamma.o pgamma.o qgamma.o rgamma.o dbeta.o pbeta.=
o =

qbeta.o rbeta.o dunif.o punif.o qunif.o runif.o dnorm.o pnorm.o qnorm.o =

rnorm.o dlnorm.o plnorm.o qlnorm.o rlnorm.o df.o pf.o qf.o rf.o dt.o pt.o=
 qt.o =

rt.o dchisq.o pchisq.o qchisq.o rchisq.o dbinom.o pbinom.o qbinom.o rbino=
m.o =

dcauchy.o pcauchy.o qcauchy.o rcauchy.o dexp.o pexp.o qexp.o rexp.o dgeom=
=2Eo =

pgeom.o qgeom.o rgeom.o dhyper.o phyper.o qhyper.o rhyper.o dnbinom.o =

pnbinom.o qnbinom.o rnbinom.o dpois.o ppois.o qpois.o rpois.o dweibull.o =

pweibull.o qweibull.o rweibull.o dlogis.o plogis.o qlogis.o rlogis.o dnch=
isq.o =

pnchisq.o qnchisq.o dnbeta.o pnbeta.o pnf.o pnt.o ptukey.o qtukey.o dwilc=
ox.o =

pwilcox.o qwilcox.o rwilcox.o dsignrank.o psignrank.o qsignrank.o rsignra=
nk.o
ranlib libmath.a
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/n=
math'
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
unix'
gcc -ieee_with_inexact -g  -I../include -I../../src/include  -c dataentry=
=2Ec
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c devPS.c -o=
 =

devPS.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c devPicTeX.=
c -o =

devPicTeX.o
gcc -ieee_with_inexact -g  -I../include -I../../src/include  -c devX11.c
(cd ../include; make FFTab.h)
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
includ
e'
make[3]: `FFTab.h' is up to date.
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/i=
nclude
'
(cd ../include; make FFDecl.h)
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
includ
e'
make[3]: `FFDecl.h' is up to date.
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/i=
nclude
'
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dynload.c =
-o =

dynload.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c edit.c -o =
edit.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fileio.c -=
o =

fileio.o
gcc -ieee_with_inexact -g  -I../include -I../../src/include  -c rotated.c=

gcc -ieee_with_inexact -g -I../include -I../../src/include  -c system.c -=
o =

system.o
ar cr libunix.a dataentry.o devPS.o devPicTeX.o devX11.o dynload.o edit.o=
 =

fileio.o rotated.o system.o
ranlib libunix.a
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/u=
nix'
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
main'
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c arithmetic=
=2Ec -o =

arithmetic.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c array.c -o=
 =

array.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c attrib.c -=
o =

attrib.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c bind.c -o =
bind.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c builtin.c =
-o =

builtin.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c character.=
c -o =

character.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c coerce.c -=
o =

coerce.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c colors.c -=
o =

colors.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c complex.c =
-o =

complex.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c context.c =
-o =

context.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c cov.c -o c=
ov.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c cum.c -o c=
um.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c debug.c -o=
 =

debug.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c deparse.c =
-o =

deparse.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c deriv.c -o=
 =

deriv.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c devices.c =
-o =

devices.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dotcode.c =
-o =

dotcode.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dstruct.c =
-o =

dstruct.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c duplicate.=
c -o =

duplicate.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c envir.c -o=
 =

envir.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c errors.c -=
o =

errors.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c eval.c -o =
eval.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c format.c -=
o =

format.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fourier.c =
-o =

fourier.o
yacc gram.y
mv y.tab.c gram.c
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c gram.c -o =
gram.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c graphics.c=
 -o =

graphics.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c iosupport.=
c -o =

iosupport.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c list.c -o =
list.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c logic.c -o=
 =

logic.o

[1]    Done                          netscape -install
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c main.c -o =
main.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c match.c -o=
 =

match.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c memory.c -=
o =

memory.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c model.c -o=
 =

model.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c names.c -o=
 =

names.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c objects.c =
-o =

objects.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c optimize.c=
 -o =

optimize.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c options.c =
-o =

options.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c par.c -o p=
ar.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c paste.c -o=
 =

paste.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c plot.c -o =
plot.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c plot3d.c -=
o =

plot3d.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c plotmath.c=
 -o =

plotmath.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c print.c -o=
 =

print.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c printarray=
=2Ec -o =

printarray.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c printvecto=
r.c =

-o printvector.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c printutils=
=2Ec -o =

printutils.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c random.c -=
o =

random.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c relop.c -o=
 =

relop.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c saveload.c=
 -o =

saveload.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c scan.c -o =
scan.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c seq.c -o s=
eq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c sort.c -o =
sort.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c source.c -=
o =

source.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c split.c -o=
 =

split.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c subassign.=
c -o =

subassign.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c subscript.=
c -o =

subscript.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c subset.c -=
o =

subset.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c summary.c =
-o =

summary.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c unique.c -=
o =

unique.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c util.c -o =
util.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c version.c =
-o =

version.o
f77 -g -nofor_main -fpe3   -o ../../bin/R.binary arithmetic.o array.o att=
rib.o =

bind.o builtin.o character.o coerce.o colors.o complex.o context.o cov.o =
cum.o =

debug.o deparse.o deriv.o devices.o dotcode.o dstruct.o duplicate.o envir=
=2Eo =

errors.o eval.o format.o fourier.o gram.o graphics.o iosupport.o list.o =

logic.o main.o match.o memory.o model.o names.o objects.o optimize.o opti=
ons.o =

par.o paste.o plot.o plot3d.o plotmath.o print.o printarray.o printvector=
=2Eo =

printutils.o random.o relop.o saveload.o scan.o seq.o sort.o source.o spl=
it.o =

subassign.o subscript.o subset.o summary.o unique.o util.o version.o =

=2E./unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE =

-L/local/X11R5/lib -lX11 -ldnet_stub -ldxml  -ltermcap -lm
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/m=
ain'
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
script
s'
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/s=
cripts
'
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/base'
Building R base package
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/base'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/eda'
make[4]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/eda/src'
gcc -ieee_with_inexact -g  -I../../../../include -c line.c -o line.o
gcc -ieee_with_inexact -g  -I../../../../include -c smooth.c -o smooth.o
ld -shared -lm -o eda.so line.o smooth.o
ld:
Warning: Unresolved:
floor
ceil
rsort
__exc_add_pc_range_table
__exc_add_gp_range
__exc_remove_pc_range_table
__exc_remove_gp_range
make[4]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/eda/src'
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/eda'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/lqs'
make[4]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/lqs/src'
gcc -ieee_with_inexact -g  -I../../../../include -c lqs.c -o lqs.o
ld -shared -lm -o lqs.so lqs.o
ld:
Warning: Unresolved:
unif_rand
calloc
free
R_PosInf
seed_in
dqrdc2_
dqrsl_
rsort
rPsort
sqrt
seed_out
log
__exc_add_pc_range_table
__exc_add_gp_range
__exc_remove_pc_range_table
__exc_remove_gp_range
make[4]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/lqs/src'
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/lqs'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/modreg'
make[4]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/modreg/src'
f77 -g -fpe3 -fpic -c bsplvd.f -o bsplvd.o
f77 -g -fpe3 -fpic -c bvalue.f -o bvalue.o
f77 -g -fpe3 -fpic -c bvalus.f -o bvalus.o
f77 -g -fpe3 -fpic -c dpbfa.f -o dpbfa.o
f77 -g -fpe3 -fpic -c dpbsl.f -o dpbsl.o
gcc -ieee_with_inexact -g  -I../../../../include -c ksmooth.c -o ksmooth.=
o
gcc -ieee_with_inexact -g  -I../../../../include -c loessc.c -o loessc.o
f77 -g -fpe3 -fpic -c loessf.f -o loessf.o
f77 -g -fpe3 -fpic -c ppr.f -o ppr.o
f77 -g -fpe3 -fpic -c qsbart.f -o qsbart.o
f77 -g -fpe3 -fpic -c sbart.f -o sbart.o
fort: Info: sbart.f, line 164: No path to this statement
23012 continue
^
f77 -g -fpe3 -fpic -c sgram.f -o sgram.o
f77 -g -fpe3 -fpic -c sinerp.f -o sinerp.o
f77 -g -fpe3 -fpic -c sslvrg.f -o sslvrg.o
f77 -g -fpe3 -fpic -c stxwx.f -o stxwx.o
=2E./../../../bin/R SHLIB -o modreg.so bsplvd.o bvalue.o bvalus.o dpbfa.o=
 =

dpbsl.o ksmooth.o loessc.o loessf.o ppr.o qsbart.o sbart.o sgram.o sinerp=
=2Eo =

sslvrg.o stxwx.o
make[5]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/modreg/src'
ld -shared -lm -o modreg.so bsplvd.o bvalue.o bvalus.o dpbfa.o dpbsl.o =

ksmooth.o loessc.o loessf.o ppr.o qsbart.o sbart.o sgram.o sinerp.o sslvr=
g.o =

stxwx.o -ldxml
ld:
Warning: Unresolved:
_OtsDivide32
R_NaReal
sprintf
warning
strcmp
calloc
free
strncpy
strcat
d1mach_
dqrdc_
dqrsl_
dsvdc_
intpr_
dblepr_
__exc_add_pc_range_table
__exc_add_gp_range
__exc_remove_pc_range_table
__exc_remove_gp_range
make[5]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/modreg/src'
make[4]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/modreg/src'
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/modreg'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/mva'
make[4]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/mva/src'
gcc -ieee_with_inexact -g  -I../../../../include -c dblcen.c -o dblcen.o
f77 -g -fpe3 -fpic -c hclust.f -o hclust.o
f77 -g -fpe3 -fpic -c kmns.f -o kmns.o
ld -shared -lm -o mva.so dblcen.o hclust.o kmns.o
ld:
Warning: Unresolved:
_OtsDivide32
__exc_add_pc_range_table
__exc_add_gp_range
__exc_remove_pc_range_table
__exc_remove_gp_range
make[4]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/mva/src'
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/mva'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/stepfun'
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/stepfun'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/profile'
Building system startup profile
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/profile'
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
'
make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src'
You should `make docs' now ...
make[1]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y'
Building ALL documentation (help, HTML, LaTeX, R-Examples)
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y'
         >>> Building help pages for package `base'
      Formats: text html latex example =

         >>> Building help pages for package `eda'
      Formats: text html latex example =

         >>> Building help pages for package `lqs'
      Formats: text html latex example =

         >>> Building help pages for package `modreg'
      Formats: text html latex example =

         >>> Building help pages for package `mva'
      Formats: text html latex example =

         >>> Building help pages for package `stepfun'
      Formats: text html latex example =

make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
'
make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary

--==_Exmh_981436288450--



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Mon May  3 18:40:23 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Mon, 3 May 1999 19:40:23 +0200 (MET DST)
Subject: parse error in terms (PR#184)
Message-ID: <199905031740.TAA26328@pubhealth.ku.dk>

If I use (0.64.0 in intel RH5.2)

abcdefg <- list()
abcdefg$abcdefg$abcdefg <- matrix(rpois(20,5),ncol=5)
terms(~(abcdefg$abcdefg$abcdefg[,1]==1)|(abcdefg$abcdefg$abcdefg[,3]==1)|
	(abcdefg$abcdefg$abcdefg[,5]==1))

I get a parse error. This seems to be connected to the length of the
names or of the expression, as I do not get an error if the list and
its elements are called a: a$a$a

(Please do not ask why I would want to do such a thing!)
  Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon May  3 18:55:07 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Mon, 3 May 1999 19:55:07 +0200 (MET DST)
Subject: parse error in terms (PR#184)
Message-ID: <199905031755.TAA26383@pubhealth.ku.dk>

On Mon, 3 May 1999 jlindsey@alpha.luc.ac.be wrote:

> If I use (0.64.0 in intel RH5.2)
> 
> abcdefg <- list()
> abcdefg$abcdefg$abcdefg <- matrix(rpois(20,5),ncol=5)
> terms(~(abcdefg$abcdefg$abcdefg[,1]==1)|(abcdefg$abcdefg$abcdefg[,3]==1)|
> 	(abcdefg$abcdefg$abcdefg[,5]==1))
> 
> I get a parse error. This seems to be connected to the length of the
> names or of the expression, as I do not get an error if the list and
> its elements are called a: a$a$a

This is fixed for 0.64.1.  terms.formula() used deparse with a line length
 of 60 characters. It now uses the maximum allowable length (currently 500
characters).

The survival5 test suite comes with a real example of why 60 characters is
not long enough.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue May  4 14:36:19 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 04 May 1999 09:36:19 -0400
Subject: rnorm
Message-ID: <372EF7D3.9F685535@bank-banque-canada.ca>

Brian

I've been playing a bit with the Wichmann-Hill RNG. I would prefer to have
normally distributed random numbers and I think I have things generally worked
out to use Wichmann-Hill and then Box-Muller. In the process, I was looking at
R's rnorm.c, but could not figure out what transformation is used in R to
convert uniform rv's to normal rv's. Do you know? It looks like there are
options in the code, but I couldn't figure out how an option is chosen.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue May  4 15:07:25 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 4 May 1999 15:07:25 +0100 (BST)
Subject: rnorm
Message-ID: <199905041407.PAA07212@toucan.stats.ox.ac.uk>


> Date: Tue, 04 May 1999 09:36:19 -0400
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> To: Brian Ripley <ripley@stats.ox.ac.uk>
> CC: R-devel <R-devel@stat.math.ethz.ch>
> Subject: rnorm
> 
> Brian
> 
> I've been playing a bit with the Wichmann-Hill RNG. I would prefer to have
> normally distributed random numbers and I think I have things generally worked
> out to use Wichmann-Hill and then Box-Muller. In the process, I was looking at
> R's rnorm.c, but could not figure out what transformation is used in R to
> convert uniform rv's to normal rv's. Do you know? It looks like there are
> options in the code, but I couldn't figure out how an option is chosen.
> 
> Paul
> 

Well, I hadn't looked until recently. I find all of that section of code
somewhat less than transparent (and spread across directories, let alone
files).

rnorm.c says

N01type N01_kind = KINDERMAN_RAMAGE;

so that is what you get by default. You can change it from C code as that
is an exported variable.  But the intended mechanism appears to be that it is
part of the choice of RNG in RNGkind, except that is it unused. See 
(nmath/sunif.c)

RNGTAB RNG_Table[] =
{
/* kind Nkind     name    is_seeded seed-length i1_s, *seed-vec */
    { 0, 0, "Wichmann-Hill",    0,      3,      123,    dummy},
    { 1, 0, "Marsaglia-MultiCarry",0,   2,      123,    dummy},
    { 2, 0, "Super-Duper",      0,      2,      123,    dummy},
    { 3, 0, "Mersenne-Twister", 0,  1+624,      123,    dummy},
    { 4, 0, "Rand",             0,      2,      -1,     dummy},
};

where Nkind is of N01type. I think Martin Maechler will need to explain
what he intended here, as well as why he did not use the enumeration
constants for Nkind in this table.  And

head src/include/Random.h 
/* only used by ../main/random.c  & ../nmath/sunif.c
 */

appears to be wrong: it is used in ../nmath/snorm.c too.

Martin: as a general policy I would prefer header files used in a few
places to be explicit, not hidden through Mathlib.h.  The way it is
currently done hides dependencies, as in the missing dependence of snorm.o on
$(top_srcdir)/src/include/Random.h.

[I have committed the dependencies in brief spell while Auckland was 
contactable.]

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May  4 23:27:23 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 5 May 1999 00:27:23 +0200 (MET DST)
Subject: [R] R_problem_buf in the S.h files & lists in .C (PR#185)
Message-ID: <199905042227.AAA05185@pubhealth.ku.dk>

Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:

> I didn't see any mention of this in the material on CRAN.  The two S.h
> files define R_problem_buf as a real symbol rather than simply
> declaring its existence. As a result, a shared library that links two
> or more files that include this will get duplicate symbol complaints.
> Since it is not defined elsewhere in the code, someone has to define it.

[I'll file this as a bug report and take it off of R-help]

Yes. This game is commonly played by the 

#ifdef __MAIN__
#define extern
#endif

and including the .h files in main.c. However, R doesn use that trick
(not even for the declarations in Defn.h) for some reason that I don't
quite see. A quick workaround could be to define the buffer in
S_compat.c. 

> A secondly thing is the documentation for .C() and company. It omits
> what type list() objects have when passed to a C routine. It should
> read void *, which is actually a SEXP * in this case. (I know, I
> should be using .External but I am trying to keep the code for the
> different S's and R's together until I have to abandon things.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May  5 17:31:59 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 05 May 1999 12:31:59 -0400
Subject: RNG  R/Splus compatibility
Message-ID: <3730727E.1ACB4D6D@bank-banque-canada.ca>

Starting with example Wichmann-Hill code from Brian Ripley I have been playing
with a set of programs for getting the same random sequences from R and Splus. A
copy is included below along with a test (which works in Solaris with R and
Splus 3.3).

The approach is somewhat different from the usual problems on this list as I am
trying to get the same results from Splus as I get from R. However, there are a
couple of R issues:

  - There  is a small change to RNGkind to allow  "default" (currently
Wichmann-Hill but could change from time to time).

 -The strategy for specifying the transformation to get rnorm results should be
examined, as I think it should be put into R and extended for other random
number transformations.

Paul Gilbert
________

# First define these 3 functions appropriately if you don't have them already:
# is.S <- function(){T or F}
# is.R <- function(){T or F}
# is.Splus <- function(){T or F}

if (is.S())
  {
    RNGkind <- function(kind=NULL)
      {# With a null argument this returns the current kind.
       # kind = "default" resets the RNG to the Splus default.
       # Splus does not allow arbitrary setting of .Random.seed so
       #     .RandomSeed is used. The existence of .RandomSeed is
       #     used to indicate whether an alternate RNG is used and the
       #     first element of .RandomSeed indicates the generator.
       if ( is.null(kind))
         {if(exists(".RandomSeed")) kind <- c("Wichmann-Hill")[1+.RandomSeed[1]]

          else                      kind <- "default"
         }
       else
         {# set the RNG kind
          if (kind == "default")
            {if(exists(".RandomSeed")) remove(".RandomSeed", where = 1) }
          else if (kind == "Wichmann-Hill")
             assign(".RandomSeed", c(0, as.integer(100000*runif(3))), where=1)
          else stop("Only Wichmann-Hill, default or NULL supported for kind.")
         }
       kind
      }


    if (!exists("set.seed.Splus")) set.seed.Splus <- set.seed

    set.seed <- function(seed=NULL)
      {# with a null argument this also serves as get.seed.
       kind <- RNGkind()
       if ( is.null(seed))
         {if (kind == "default") seed <-.Random.seed
          else                   seed <-.RandomSeed
         }
       else
         {# set seed
          if (kind == "default")
             {if (1==length(seed)) set.seed.Splus(seed)
              else                 assign(".Random.seed", seed, where=1)
             }
          else if (kind == "Wichmann-Hill")
             {if (3 == length(seed)) seed <- c(0,seed)
              if (0 != seed[1])
                         stop("seed[1] should be 0 for Wichmann-Hill RNG.")
              if (4 != length(seed))
                 stop("seed length is not consistent with kind Wichmann-Hill.")
              assign(".RandomSeed", seed, where=1)
             }
          else stop("seed does not match RNG kind.")
         }
       seed
      }

    set.RNORMtransform <- function(rnorm=NULL)
      {# with a null argument this returns setting
       if (is.null(rnorm))
          {if(exists(".RNORMtransform", where=1)) rnorm <- .RNORMtransform
           else                                   rnorm <- "default"
          }
       else
          {if (rnorm == "Box-Muller") assign(".RNORMtransform", rnorm, where=1)
           else if (rnorm == "default")
              {if(exists(".RNORMtransform", where=1))
                  remove(".RNORMtransform", where=1)}
           else stop("Only Box-Muller, default or NULL supported for rnorm.")
          }
       rnorm
      }

  }   # end of if is.S

if (is.R())
  {

    # the only change in RNGkind is to allow "default" (for "Wichmann-Hill")
    if (!exists("RNGkind.R")) RNGkind.R <- RNGkind
    RNGkind <- function (kind = NULL)
      {if ((!is.null(kind)) && (kind == "default")) kind <- "Wichmann-Hill"
       RNGkind.R(kind=kind)
      }

    set.seed <- function(seed=NULL)
      {# with a null argument this also serves as get.seed.
       kind <- RNGkind()
       if ( is.null(seed))
         {if (!exists(".Random.seed")) z <- runif(1) # initializes seed
          seed <-.Random.seed
         }
       else
         {# set seed
          if (kind == "Wichmann-Hill")
             {if (3 == length(seed)) seed <- c(0,seed)
              if (0 != seed[1])
                         stop("seed[1] should be 0 for Wichmann-Hill RNG.")
              if (4 != length(seed))
                 stop("seed length is not consistent with kind Wichmann-Hill.")
              assign(".Random.seed", seed, envir=.GlobalEnv)
             }
           else
              {# seed <- c(kind,seed) ????
               # should do some other checks or are they done elsewhere?
               assign(".Random.seed", seed, envir=.GlobalEnv)
              }
           # else stop("seed does not match RNG kind.")
          }
       seed
      }

    set.RNORMtransform <- function(rnorm=NULL)
      {# with a null argument this returns setting
       if (is.null(rnorm))
          {if(exists(".RNORMtransform", where=1)) rnorm <- .RNORMtransform
           else                                   rnorm <- "default"
          }
       else
          {if (rnorm == "Box-Muller")
                assign(".RNORMtransform", rnorm, envir=.GlobalEnv)
           else if (rnorm == "default")
              {if(exists(".RNORMtransform", where=1))
                  remove(".RNORMtransform", pos=1)}
           else stop("Only Box-Muller, default or NULL supported for rnorm.")
          }
       rnorm
      }

  }  # end of if is.R


# in both Splus and R:

    set.RNG <- function(kind=NULL, seed=NULL, rnorm=NULL)
      {# with a null argument this also serves as get.RNG so it is possible to
       # old <- set.RNG(...)
       # on.exit(set.RNG(old))
       # set.RNG("default")  can affect both kind and seed, but not rnorm
       if (is.list(kind))
         {kind  <- RNGkind(kind$kind)
          seed  <- set.seed(kind$seed)
          rnorm <- set.RNORMtransform(kind$rnorm)
         }
       else
         {kind  <- RNGkind(kind)
          seed  <- set.seed(seed)
          rnorm <- set.RNORMtransform(rnorm)
         }
       list(kind=kind, seed=seed, rnorm=rnorm)
      }

    if (!exists("runif.default")) runif.default <- runif

    runif <- function(n, min=0, max=1, compiled=is.R())
       {# This typically just calls runif.default, but allows using other
        # RNGs to generate the same sequence in R and S.
        # eg: set.seed(seed=c(1:3), kind="Wichmann-Hill")
        #     runif(10)

        if(RNGkind() == "default")  return(runif.default(n, min=min, max=max))
        else if(compiled)           return(runif.default(n, min=min, max=max))
        else seed <- set.seed() # returns the setting
        kind <-  c("Wichmann-Hill")[1+seed[1]]
        if(kind == "Wichmann-Hill")
           {out <- numeric(n)
            if (seed[1] != 0) stop("seed setting is not consistent with RNG.")
            x <- seed[2]; y <- seed[3]; z <- seed[4]
            for(i in 1:length(out))
               {x <- (171*x) %% 30269
                y <- (172*y) %% 30307
                z <- (170*z) %% 30323
                out[i] <- (x/30269 + y/30307 + z/30323) %% 1.0
               }
            set.seed( c(0, x,y,z))
           }
        else stop("runif RNG kind not supported.")
        out
       }


if (!exists("rnorm.default")) rnorm.default <- rnorm

rnorm <- function(n, mean=0, sd=1, compiled=F)
   {# This typically just calls rnorm.default, but provides the possibility of
    # using "Wichmann-Hill" to generate the same runif sequence in R and S and
    #    then generate the same normally distributed numbers.
    # eg: set.seed(seed=c(1:3), kind="Wichmann-Hill", rnorm="Box-Muller")
    #     rnorm(10)

    transf <- set.RNORMtransform()
    if(transf == "default") return(rnorm.default(n, mean=mean, sd=sd))
    else if(compiled)       return(rnorm.default(n, mean=mean, sd=sd))
    else if(transf == "Box-Muller")
      {out <- runif(n + n%%2)
       out <- matrix(out, 2, length(out)/2)
       out <- c( sqrt(log(1/out[1,])) * sin(2*pi*out[2,]),
                 sqrt(log(1/out[1,])) * cos(2*pi*out[2,]))
       if (1 == n%%2) out <- out[-length(out)] #drop last point if n is odd
      }
    else stop("normal rv transformation technique not supported.")

    mean + out*sd
   }

#########################################################

#   test function

#########################################################


random.number.test <- function()
 {cat("Random number generator tests ...")
  if (is.R())
     {test.seed<- c( 979, 1479, 1542) # values from 0.49 beta
      test.valueU <-c(5.693354055333957e-01,1.051357751852140e-01,
          5.846933178718317e-02, 7.537960906527452e-02, 7.043734921992200e-01)
      test.valueN <-c(-5.559389931781886e-01,
                   -1.902431069568611e+00,  1.524595894866778e+00,
                   -7.863494805034426e-01, 1.328128164898773e-01)
     }
  if (is.Splus())
     {test.seed<- c(37, 39, 39, 4, 7, 2, 27, 58, 38, 15, 32, 2)
      test.valueU <- c(0.4299328043125570, 0.3092006836086512,
            0.5808096211403608, 0.3061958812177181, 0.8137333435006440)
      test.valueN <- c( -0.7613318231781665, -0.5724360196433543,
            0.8536399448225964, -0.2269096022522968, -0.8126790170570223)
     }

  old.seed <- set.RNG(kind="default", seed=test.seed, rnorm="default")
  on.exit(set.RNG(old.seed))

  ok <- TRUE
  if (1e-14 < max(abs(runif(5)-test.valueU)))
    {warning("The default runif number generator has been changed.")
     ok <- FALSE
    }

  set.RNG(kind="default", seed=test.seed, rnorm="default")

  if (1e-14  < max(abs(rnorm(5)-test.valueN)))
    {warning("The default rnorm number generator has been changed.")
     ok <- FALSE
    }

  set.RNG(kind="Wichmann-Hill", seed=c(979,1479,1542), rnorm="Box-Muller")
  if (1e-14 < max(abs(runif(5) -
      c(0.56933540553339546, 0.10513577518521355, 0.05846933178718317,
        0.07537960906527452, 0.70437349219921996))))
    {warning("The Wichmann-Hill runif number generator has been changed.")
     ok <- FALSE
    }

  set.RNG(kind="Wichmann-Hill", seed=c(979,1479,1542), rnorm="Box-Muller")
  if (1e-14 < max(abs(rnorm(5) -
      c(0.4605069059114530, 0.7685565310963474, -0.3737680932387061,
        0.5926372779538560, 1.4995245125275518))))
    {warning("The Box-Muller rnorm number generator has been changed.")
     ok <- FALSE
    }

  if (ok) cat("ok\n")
  else    cat("failed!\n")
  invisible(ok)
 }




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu May  6 15:15:44 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 06 May 1999 10:15:44 -0400
Subject: RNG  R/Splus compatibility
References: <3730727E.1ACB4D6D@bank-banque-canada.ca>
Message-ID: <3731A410.4AF78E20@bank-banque-canada.ca>

Here is a correction to one of the functions I posted yesterday, which did not
work correctly when kind was a list. With a null argument this function returns
current RNG and seed information. Otherwise, it sets the values and returns the
new settings. Thus, in a function one might

  old <- set.RNG()
  on.exit(set.RNG(old))
  effective <- set.RNG(new)   #(= new)

Another approach would be that used by par() (i.e. return the old settings) so
one would

  old <- set.RNG(new)
  on.exit(set.RNG(old))
  effective <- set.RNG()  #(= new)

Does anyone have thoughts on this?

Paul Gilbert
_________

    set.RNG <- function(kind=NULL, seed=NULL, rnorm=NULL)
      {# with a null argument this also serves as get.RNG so it is possible to
       # old <- set.RNG()
       # on.exit(set.RNG(old))
       # set.RNG("default")  can affect both kind and seed, but not rnorm
       if (is.list(kind))
         list(kind=RNGkind(kind$kind), seed=set.seed(kind$seed),
              rnorm= set.RNORMtransform(kind$rnorm) )
       else
         list(kind=RNGkind(kind), seed=set.seed(seed),
              rnorm=set.RNORMtransform(rnorm) )
      }


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Fri May  7 06:15:03 1999
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri, 7 May 1999 07:15:03 +0200
Subject: Bug list summary (automatic post)
Message-ID: <199905070515.HAA24818@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100

Directory:  Add-ons

* PR# 137 *
Subject: funfits
From: "Alvaro A. Novo" <novo@uiuc.edu>
Date: Tue, 9 Mar 1999 22:24:54 -0600
* PR# 164 *
Subject: Re: [R] repeated measurements libraries v0.4
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 11 Apr 1999 22:52:34 +0100 (BST)

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100

Directory:  Documentation

* PR# 146 *
Subject: nlm docs
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 24 Mar 1999 15:48:41 +0100 (MET)

Directory:  Graphics

* PR# 38 *
Subject: possible bugs
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Sun, 6 Sep 1998 15:59:34 -0400 (EDT)
--ylim problem which appears solved
--Postscript overflow still with us (22feb99)
* PR# 61 *
Subject: points(...,  cex = ..)  is pretty wrong...
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 2 Nov 1998 19:15:06 +0100
--Symbols getting decentered when too large cex for X. Still there 22feb99  
* PR# 66 *
Subject: Bug with bounding box?
From: johnp@tip.csiro.au
Date: Thu, 3 Dec 1998 02:15:38 +0100
--Yes, this appears to have x/y reversed. The supplied example gives 
--%%Orientation: Landscape
--%%BoundingBox: 18 18 824 577 
--but the convention is to rotate the paper but leave the coordinate system.
* PR# 69 *
Subject: Some graphics bugs
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 04 Dec 1998 11:42:50 -0000 ()
Date: 04-Dec-98
--Various anomalies with text size and alignment. 2B appears to be solved. The 
--rest is still there (22feb99)
* PR# 79 *
Subject: apology: text(locator(),"sometext") works
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Tue, 15 Dec 1998 19:45:29 -0500 (EST)
--Clipping discrepancy x11/PS
* PR# 106 *
Subject: border-arg. in persp
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
Date: Fri, 29 Jan 1999 11:12:39 +0100
--No effect of arg. Still here 22feb99. Segfault with border=0 seems gone now. 
* PR# 114 *
Subject: PostScript Level 1/2 bug
From: ben@eno.princeton.edu
Date: Mon, 8 Feb 1999 00:07:20 +0100
--Not sure whether this is really PS lev 1/2 issue.
--/Font5 /Symbol findfont definefont
--(missing scalefont?)
* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 123 *
Subject: Text in plot
From: Ennapadam Venkatraman <venkat@biosta.mskcc.org>
Date: Thu, 18 Feb 1999 13:05:37 -0500
--Multiline text not working
* PR# 130 *
Subject: lty=0 -- shouldn't it give an invisible line?
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 28 Feb 1999 21:45:43 +0100
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
* PR# 153 *
Subject: image + x11
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
Date: Wed, 31 Mar 1999 14:09:53 +0200

Directory:  In-Out

* PR# 125 *
Subject: scan rejects complex
From: John.Peters@tip.csiro.au (John Peters)
Date: Mon, 22 Feb 1999 10:08:14 +1100 (EST)
* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM

Directory:  Installation

* PR# 95 *
Subject: patch to 63.2
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 15 Jan 1999 11:00:25 +0100 (MET)
--An incident where the 0.63.2 patches didn't take. So far the only one. 
--Maybe caused by patching unclean sources?
* PR# 165 *
Subject: make check
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 13 Apr 1999 12:03:42 +0200 (CEST)

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 118 *
Subject: Function parsing
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Wed, 10 Feb 1999 13:42:01 +0000 (GMT)
--comment placement.
* PR# 166 *
Subject: outer fails with group generic operations on factors
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Tue, 13 Apr 1999 18:28:53 +0100 (BST)
* PR# 167 *
Subject: R's UseMethod() does not dispatch on changed class()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 14 Apr 1999 11:22:10 +0200
--Did this get resolved into the "S has the bug, 
--one shouldn't try that" category?

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

* PR# 121 *
Subject:  model.frame mangles time series 
From: Peter Dalgaard BSA <pd@biostat.ku.dk>
Date: Thu, 18 Feb 1999 15:47:24 +0100
--Subset in C code + attributes = mess
--Switch to interpreted ("[")

Directory:  Startup

* PR# 21 *
Subject: Restoring large image files
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 21 Aug 1998 13:29:16 -0000 ()

Directory:  System-specific

* PR# 145 *
Subject: R-0.63.3 package on IRIX 6.5 machine
From: Jayshree Sarma <jsarma@cs.gmu.edu>
Date: Tue, 23 Mar 1999 16:54:20 -0500 (EST)
* PR# 163 *
Subject: IRIX compile
From: mtim@farm.ecs.umass.edu
Date: Sat, 10 Apr 1999 19:35:43 +0200

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 174 *
Subject:  do.call() mangles expressions in arguments 
From: Peter Dalgaard BSA <pd@biostat.ku.dk>
Date: Wed, 21 Apr 1999 19:39:53 +0200
* PR# 177 *
Subject: R won't compile on Redhat 5.2
From: pgutwin@us.ibm.com
Date: Fri, 23 Apr 1999 20:08:55 +0200 (MET DST)
* PR# 180 *
Subject: nlm on a function in the Math group
From: Douglas Bates <bates@stat.wisc.edu>
Date: Thu, 29 Apr 1999 17:11:00 -0500 (CDT)
* PR# 183 *
Subject: compilation of R-0.63.3 on alpha
From: a.o.jaunsen@astro.uio.no
Date: Mon, 03 May 1999 11:28:31 +0200
* PR# 184 *
Subject: parse error in terms
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 3 May 1999 19:43:00 +0200 (MET DST)
* PR# 185 *
Subject: Re: [R] R_problem_buf in the S.h files & lists in .C
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 1999 00:32:49 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mao@compstat.wharton.upenn.edu  Sun May  9 17:41:07 1999
From: mao@compstat.wharton.upenn.edu (mao@compstat.wharton.upenn.edu)
Date: Sun, 9 May 1999 18:41:07 +0200 (MET DST)
Subject: subscripting in list() (PR#186)
Message-ID: <199905091641.SAA05061@pubhealth.ku.dk>


In R, (0.64 Binary, Linux 5.0) I tried this command and get an error
message:

> mylist <- list()
> mylist[[1]]
Error in mylist[[1]] : subscript out of bounds

It thus makes my Splus programs un-runable, because in SPlus 4.0 or 3.4,
you have

> mylist <- list()
> mylist[[1]]
NULL

instead of a stop message.


Thanks,
vincent






-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mao@compstat.wharton.upenn.edu  Sun May  9 18:01:28 1999
From: mao@compstat.wharton.upenn.edu (mao@compstat.wharton.upenn.edu)
Date: Sun, 9 May 1999 19:01:28 +0200 (MET DST)
Subject: subscripting in list() (PR#187)
Message-ID: <199905091701.TAA05120@pubhealth.ku.dk>


Sorry My previous report is not detailed.

In R, you will get this:

> mylist <- list()
> mylist[[1]]
Error in mylist[[1]] : subscript out of bounds
> mylist[[1]] <- c(1)
Error: (list) object cannot be coerced to vector type 14
> mylist[[1]] <- c(1,2)
> mylist[[1]] <- c(1)
> mylist
[[1]]
[1] 1

I was trying to assigning c(1) to (mylist[[1]] <- c(1)) -- it seems
impossible if I dont' assign something else to it in advance.

(although a walk around would be mylist[1] <- list(1)) In
SPLUS 4 or 3.4, the reactions are different:

> mylist <- list()
> mylist[[1]]
NULL
> mylist[[1]] <- c(1)
> mylist
[[1]]:
[1] 1





On Sun, 9 May 1999, Wenxin Mao wrote:

> Date: Sun, 9 May 1999 12:42:29 -0400 (EDT)
> From: Wenxin Mao <mao@stat.wharton.upenn.edu>
> To: r-bugs@biostat.ku.dk
> Subject: subscripting in list()
> 
> 
> In R, (0.64 Binary, Linux 5.0) I tried this command and get an error
> message:
> 
> > mylist <- list()
> > mylist[[1]]
> Error in mylist[[1]] : subscript out of bounds
> 
> It thus makes my Splus programs un-runable, because in SPlus 4.0 or 3.4,
> you have
> 
> > mylist <- list()
> > mylist[[1]]
> NULL
> 
> instead of a stop message.
> 
> 
> Thanks,
> vincent
> 
> 
> 
> 
> 
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun May  9 20:19:55 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 9 May 1999 21:19:55 +0200 (MET DST)
Subject: subscripting in list() (PR#187)
Message-ID: <199905091919.VAA05332@pubhealth.ku.dk>

On Sun, 9 May 1999 mao@compstat.wharton.upenn.edu wrote:

> 
> Sorry My previous report is not detailed.
> 
> In R, you will get this:
> 
> > mylist <- list()
> > mylist[[1]]
> Error in mylist[[1]] : subscript out of bounds

Yes, that is a known difference, I believe deliberate.

> > mylist[[1]] <- c(1)
> Error: (list) object cannot be coerced to vector type 14

I get no error in 0.64.1, the current version (since Friday): try
upgrading.

> > In R, (0.64 Binary, Linux 5.0) I tried this command and get an error
> > message:

(I assume you tried 0.64.0: there is no 0.64 that I know of.)

I do suggest though that you only index lists by names: relying on the
order of list components is fraught with possibilities for error.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dimi@ci.tuwien.ac.at  Mon May 10 17:15:31 1999
From: dimi@ci.tuwien.ac.at (dimi@ci.tuwien.ac.at)
Date: Mon, 10 May 1999 18:15:31 +0200 (MET DST)
Subject: linear mixed models (PR#188)
Message-ID: <199905101615.SAA14171@pubhealth.ku.dk>

in lmList ,lmList.formula and lmList.groupedData functions in help pages there is an argument called "groups" that doesn't exist in the code of the functions.
<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Patched (unreleased snapshot)
 status.rev = 0
 major = 0
 minor = 64.1
 year = 1999
 month = May
 day = 10
 language = R

Search Path:
 .GlobalEnv, package:lme, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dimi@ci.tuwien.ac.at  Mon May 10 17:46:21 1999
From: dimi@ci.tuwien.ac.at (Evgenia Dimitriadou)
Date: Mon, 10 May 1999 18:46:21 +0200 (CEST)
Subject: linear mixed models (PR#188)
In-Reply-To: <199905101615.SAA14171@pubhealth.ku.dk>
Message-ID: <Pine.LNX.3.96.990510184544.29534O-100000@gandalf.ci.tuwien.ac.at>

sorry for the bug report, but we had an older version of this library.

On Mon, 10 May 1999 dimi@ci.tuwien.ac.at wrote:

> in lmList ,lmList.formula and lmList.groupedData functions in help pages there is an argument called "groups" that doesn't exist in the code of the functions.
> <<insert bug report here>>
> 
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i686-unknown-linux
>  arch = i686
>  os = linux
>  system = i686, linux
>  status = Patched (unreleased snapshot)
>  status.rev = 0
>  major = 0
>  minor = 64.1
>  year = 1999
>  month = May
>  day = 10
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:lme, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon May 10 18:14:22 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 10 May 1999 12:14:22 -0500
Subject: linear mixed models (PR#188)
In-Reply-To: dimi@ci.tuwien.ac.at's message of "Mon, 10 May 1999 18:15:31 +0200 (MET DST)"
References: <199905101615.SAA14171@pubhealth.ku.dk>
Message-ID: <6rn1zcrgnl.fsf@verdi.stat.wisc.edu>

dimi@ci.tuwien.ac.at writes:

> in lmList ,lmList.formula and lmList.groupedData functions in help
> pages there is an argument called "groups" that doesn't exist in the
> code of the functions.

Can you tell us which version of the lme library you are using?

I don't see this with the most recent version (3.0b7-1) of the lme
library.  In that version the lmList help page starts with

   List of lm Objects with a Common Model

        lmList(object, data, level, na.action, pool)

I did cause some confusion by not uploading the tar file for
lme_3.0b7-2.tar.gz with the correct name.  The result was that there
were two packages, lme and lme3, listed on the web pages for a while.
To get the most recent version go directly to the src/contrib
directory and download lme_3.0b7-2.tar.gz

(Fritz or Andreas: Could you take a look at the PACKAGES.html file in
the src/contrib library?  I think it will need to be modified by
hand.  Sorry for this confusion.)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Tue May 11 09:13:49 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Tue, 11 May 1999 10:13:49 +0200 (MET DST)
Subject: model.matrix crashes (PR#189)
Message-ID: <199905110813.KAA17434@pubhealth.ku.dk>

With 0.64.1 on Intel RH5.2,

abc <- list()
abc$abc$abc <- matrix(1:20)
mt <- terms(~(abc$abc$abc[,1]==64)|(abc$abc$abc[,1]==65)|(abc$abc$abc[,1]==75)
	|(abc$abc$abc[,1]==84)|(abc$abc$abc[,1]==85))
model.matrix(mt,model.frame(mt))

crashes. With ab$ab$ab, it does not. Apparently, the bug I reported
for 0.64.0 has just been pushed back one step. Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Tue May 11 12:39:06 1999
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Tue, 11 May 1999 13:39:06 +0200 (MET DST)
Subject: dev.print help page (PR#191)
Message-ID: <199905111139.NAA19140@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 0.64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


Two problems with dev.print help.

1. Under Examples:
        dev.print(width=6, height=6, horizontal=F)
                                                ^ FALSE

2. dev.print help does not describe any of its parameters (e.g. height or
width).
Not described on the other dev.xxx pages either

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Tue May 11 12:43:51 1999
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Tue, 11 May 1999 13:43:51 +0200 (MET DST)
Subject: dev.print aspect ratio (PR#192)
Message-ID: <199905111143.NAA19204@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 0.64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


dev.print(horizontal=FALSE,width=7,height=7,file="r/rt/junk.ps")
does not produce a square plot. I find I need:

dev.print(horizontal=FALSE,width=7,height=7.6,file="r/rt/junk.ps")
to make it square.

I tried
par(pty="s")
prior to making the image or contour plot, but this does not make the plot
square.
(Maybe this is a bug for par() or image() and contour()).

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Tue May 11 13:02:01 1999
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Tue, 11 May 1999 14:02:01 +0200 (MET DST)
Subject: matrix() can't handle NaN (PR#193)
Message-ID: <199905111202.OAA19347@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 0.64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


Here is the data file:
x y z
1 1 1
1 2 2
2 1 NaN
2 2 4

>data<-read.table("~/junk.dat",header=TRUE)

> data
  x y   z
1 1 1   1
2 1 2   2
3 2 1 NaN
4 2 2   4

> matrix(data$z,length(y),length(x)) 
     [,1] [,2]
[1,]    1    4
[2,]    2    3

This is not the correct matrix.  It seems that NaNs screw up matrix().

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue May 11 13:34:26 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 11 May 1999 14:34:26 +0200 (CEST)
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: <199905111202.OAA19347@pubhealth.ku.dk>
References: <199905111202.OAA19347@pubhealth.ku.dk>
Message-ID: <14136.9170.142518.789273@pc87.maho.magnaeu.com>

>>>>> wsi  writes:

> Full_Name: Bill Simpson
> Version: 0.64.1
> OS: linux
> Submission from: (NULL) (193.62.250.209)


> Here is the data file:
> x y z
> 1 1 1
> 1 2 2
> 2 1 NaN
> 2 2 4

>> data<-read.table("~/junk.dat",header=TRUE)

>> data
>   x y   z
> 1 1 1   1
> 2 1 2   2
> 3 2 1 NaN
> 4 2 2   4

>> matrix(data$z,length(y),length(x)) 
>      [,1] [,2]
> [1,]    1    4
> [2,]    2    3

> This is not the correct matrix.  It seems that NaNs screw up matrix().

Actually, data$z is a factor with one level NaN.

R> data$z
[1] 1   2   NaN 4  
Levels:  1 2 4 NaN

What you get is the codes of that, which I think is what you want.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill Simpson <wsi@gcal.ac.uk>  Tue May 11 14:48:57 1999
From: Bill Simpson <wsi@gcal.ac.uk> (Bill Simpson)
Date: Tue, 11 May 1999 13:48:57 +0000 (GMT)
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: <14136.9170.142518.789273@pc87.maho.magnaeu.com>
Message-ID: <Pine.LNX.3.96.990511133535.8568A-100000@cbe207.gcal.ac.uk>



On Tue, 11 May 1999, Kurt Hornik wrote:

> >>>>> wsi  writes:
> 
> > Full_Name: Bill Simpson
> > Version: 0.64.1
> > OS: linux
> > Submission from: (NULL) (193.62.250.209)
> 
> 
> > Here is the data file:
> > x y z
> > 1 1 1
> > 1 2 2
> > 2 1 NaN
> > 2 2 4
> 
> >> data<-read.table("~/junk.dat",header=TRUE)
> 
> >> data
> >   x y   z
> > 1 1 1   1
> > 2 1 2   2
> > 3 2 1 NaN
> > 4 2 2   4
> 
I forgot these steps:
x<-unique(data$x)
y<-unique(data$y)

> >> matrix(data$z,length(y),length(x)) 
> >      [,1] [,2]
> > [1,]    1    4
> > [2,]    2    3
> 
> > This is not the correct matrix.  It seems that NaNs screw up matrix().
> 
> Actually, data$z is a factor with one level NaN.
Geez, I why is data$z a factor?  That seems bizarre. It is supposed to be
the measured value (IV) at each combination of x and y. So what is the
right way to convert my original file?

I go through all this just to produce an image or contour or persp plot.

> R> data$z
> [1] 1   2   NaN 4  
> Levels:  1 2 4 NaN
Weird! Is this because matrix() interprets NaN as a character string
instead of as an NaN (which is a "number", isn't it?)?

Why then isn't everything converted to a factor?
> data$x
[1] 1 1 2 2
> data$y
[1] 1 2 1 2

Also, why does matrix() work as I expect when the NaN in the file is
changed to a 0:
> matrix(data$z,length(y),length(x))
     [,1] [,2]
[1,]    1    0
[2,]    2    4

It also works as I expect when the NaN is changed to an NA:
> matrix(data$z,length(y),length(x))
     [,1] [,2]
[1,]    1   NA
[2,]    2    4


> What you get is the codes of that, which I think is what you want.
NOPE! I want a matrix:
1	NaN
2	4

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ben@eno.princeton.edu  Tue May 11 14:05:04 1999
From: ben@eno.princeton.edu (Ben Bolker)
Date: Tue, 11 May 1999 09:05:04 -0400 (EDT)
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: <Pine.LNX.3.96.990511133535.8568A-100000@cbe207.gcal.ac.uk>
Message-ID: <Pine.SUN.3.91.990511090318.11064B-100000@paca>


  Perhaps this should be in a FAQ list ...

> data<-read.table("~/junk.dat",header=TRUE, na.strings="NaN")
> data
  x y  z
1 1 1  1
2 1 2  2
3 2 1 NA
4 2 2  4

> x<-unique(data$x)
> y<-unique(data$y)
> matrix(data$z,length(y),length(x))
     [,1] [,2]
[1,]    1   NA
[2,]    2    4

  "NaN" (Not a Number) as seen in debuggers, etc., is not the same as "NA"
as a "not available/applicable" value in R.

On Tue, 11 May 1999, Bill Simpson wrote:

> 
> 
> On Tue, 11 May 1999, Kurt Hornik wrote:
> 
> > >>>>> wsi  writes:
> > 
> > > Full_Name: Bill Simpson
> > > Version: 0.64.1
> > > OS: linux
> > > Submission from: (NULL) (193.62.250.209)
> > 
> > 
> > > Here is the data file:
> > > x y z
> > > 1 1 1
> > > 1 2 2
> > > 2 1 NaN
> > > 2 2 4
> > 
> > >> data<-read.table("~/junk.dat",header=TRUE)
> > 
> > >> data
> > >   x y   z
> > > 1 1 1   1
> > > 2 1 2   2
> > > 3 2 1 NaN
> > > 4 2 2   4
> > 
> I forgot these steps:
> x<-unique(data$x)
> y<-unique(data$y)
> 
> > >> matrix(data$z,length(y),length(x)) 
> > >      [,1] [,2]
> > > [1,]    1    4
> > > [2,]    2    3
> > 
> > > This is not the correct matrix.  It seems that NaNs screw up matrix().
> > 
> > Actually, data$z is a factor with one level NaN.
> Geez, I why is data$z a factor?  That seems bizarre. It is supposed to be
> the measured value (IV) at each combination of x and y. So what is the
> right way to convert my original file?
> 
> I go through all this just to produce an image or contour or persp plot.
> 
> > R> data$z
> > [1] 1   2   NaN 4  
> > Levels:  1 2 4 NaN
> Weird! Is this because matrix() interprets NaN as a character string
> instead of as an NaN (which is a "number", isn't it?)?
> 
> Why then isn't everything converted to a factor?
> > data$x
> [1] 1 1 2 2
> > data$y
> [1] 1 2 1 2
> 
> Also, why does matrix() work as I expect when the NaN in the file is
> changed to a 0:
> > matrix(data$z,length(y),length(x))
>      [,1] [,2]
> [1,]    1    0
> [2,]    2    4
> 
> It also works as I expect when the NaN is changed to an NA:
> > matrix(data$z,length(y),length(x))
>      [,1] [,2]
> [1,]    1   NA
> [2,]    2    4
> 
> 
> > What you get is the codes of that, which I think is what you want.
> NOPE! I want a matrix:
> 1	NaN
> 2	4
> 
> Bill
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Benjamin Bolker          Dep't of Ecology and Evolutionary Biology,
ben@eno.princeton.edu    Princeton University
tel: (609) 258-6886,     fax: (609) 258-1334

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ben@eno.princeton.edu  Tue May 11 14:33:37 1999
From: ben@eno.princeton.edu (Ben Bolker)
Date: Tue, 11 May 1999 09:33:37 -0400 (EDT)
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: <Pine.LNX.3.96.990511141530.8636A-100000@cbe207.gcal.ac.uk>
Message-ID: <Pine.SUN.3.91.990511092658.11064E-100000@paca>

On Tue, 11 May 1999, Bill Simpson wrote:


 [examples with read.table(...,na.strings="NaN") snipped]
> 
> >   "NaN" (Not a Number) as seen in debuggers, etc., is not the same as "NA"
> > as a "not available/applicable" value in R.
> 
> Yes, I realize that.
> However, since there is an R function is.nan(), and through experiments at
> the command line like this
> > xx<-NaN
> > xx+1
> NaN
> I thought that NaN was recognized by the R system and obeyed the proper
> rules. Same for Inf and -Inf.
> 
> Or are these things only sometimes recognized and sometimes not? Shouldn't
> they be employed consistently?
> 
> Bill
> 

  I'm going to defer this to people who know more than I about 
consistency and the differences between NA and NaN.  I will note that
the help for is.na() says:

The generic function `is.na' returns a logical vector of the same ``form''
as its argument `x', containing `TRUE' for those elements marked `NA' or
`NaN' (!) and `FALSE' otherwise.

  The (!) suggests that whoever wrote the help file recognized some 
subtlety here ... [similarly, is.finite() recognizes NA as a non-finite 
number]

  This seems to fall in the general category of "how do we help people 
avoid 'gotchas' in R that, while logical, are not necessarily what they 
expect?  Can we do this without blurring logical distinctions that are 
interesting/important/significant to more knowledgeable users?"

  One *could* extend the default na.strings in read.table to 
c("NA","NaN"), which would take care of the immediate problem but might 
further blur the subtle distinction between NA and NaN.  I don't know 
how/whether one would want to extend read.table() to deal with Inf/-Inf 
in data files ... (I think not).

  Ben
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill Simpson <wsi@gcal.ac.uk>  Tue May 11 15:51:23 1999
From: Bill Simpson <wsi@gcal.ac.uk> (Bill Simpson)
Date: Tue, 11 May 1999 14:51:23 +0000 (GMT)
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: <Pine.SUN.3.91.990511092658.11064E-100000@paca>
Message-ID: <Pine.LNX.3.96.990511144151.8662B-100000@cbe207.gcal.ac.uk>



On Tue, 11 May 1999, Ben Bolker wrote:
>   One *could* extend the default na.strings in read.table to 
> c("NA","NaN"), which would take care of the immediate problem but might 
> further blur the subtle distinction between NA and NaN.  I don't know 
> how/whether one would want to extend read.table() to deal with Inf/-Inf 
> in data files ... (I think not).

My attitude is that if NaN is a recognized "number" by the numerical
analysts (the guys who write the floating point standards), why not treat
it as such throughout R? But maybe this opens a can of worms.

In my example, I was expecting to have the z matrix for an image plot with
NaNs in it. Then I was going to convert them either to zeros or NAs prior
to making the plot.

I would put the onus on the user to deal with the NaNs prior to
passing the data onto some other function. I would not favour some
automatic conversion of NaN into NA.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 11 15:26:43 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 11 May 1999 16:26:43 +0200 (MET DST)
Subject: matrix() can't handle NaN (PR#193)
Message-ID: <199905111426.QAA20739@pubhealth.ku.dk>

Bill argues that NaN should be treated as a number, 
even by read.table() and I think he is right.
{ scan(.) does fine !  it *does* treat NaN as numbers ! }

At the moment, I don't even see where the problem is;
the read.table internal function  type.convert()
does well with NaN's :
     > cc <- as.character(c(pi,NaN))
     > str(type.convert(cc))
      num [1:2] 3.14  NaN

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue May 11 15:54:19 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 11 May 1999 15:54:19 +0100 (BST)
Subject: matrix() can't handle NaN (PR#193)
Message-ID: <199905111454.PAA03015@toucan.stats.ox.ac.uk>

> Date: Tue, 11 May 1999 16:26:43 +0200 (MET DST)
> From: maechler@stat.math.ethz.ch
> To: r-devel@stat.math.ethz.ch
> Subject: Re: matrix() can't handle NaN (PR#193)
> 
> Bill [Simpson] argues that NaN should be treated as a number, 
> even by read.table() and I think he is right.
> { scan(.) does fine !  it *does* treat NaN as numbers ! }
> 
> At the moment, I don't even see where the problem is;
> the read.table internal function  type.convert()
> does well with NaN's :
>      > cc <- as.character(c(pi,NaN))
>      > str(type.convert(cc))
>       num [1:2] 3.14  NaN

The field is regarded as a character field unless  na.strings is
extended to include NaN.

I am not in favour of treating NaN as a number, which is linguistic nonsense!
(What does NaN stand for?)

First, in IEEE arithmetic, NaN is a class of numbers as I understand it
(and internally in R NA is one of those NaNs).  So just which one do
you mean?  And what are you going to achieve by having essentially a
second NA, except to blur the real purposes of NaNs?

Secondly, on non-IEEE implementations of R, I believe NaN = NA: in any
case we should not lightly be making IEEE features an essential part of the
language. (Or with the gradual demise of Vaxen is IEEE arithmetic now
universal: I still have a Sun running with a special-purpose non-IEEE
floating-point unit.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue May 11 18:08:44 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 11 May 1999 13:08:44 -0400
Subject: another multivariate ts bug
Message-ID: <3738641B.3630B0F2@bank-banque-canada.ca>

I think this is another one of the same kind of bugs in ts:

Version 0.64.1  (May 8, 1999)
...
>  z <- ts(matrix(1:20,10,2), start=c(1969,1), frequency=12)
> (z > 5) | (z < 2)
Error: invalid time series parameters specified
>

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue May 11 20:26:09 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Tue, 11 May 1999 21:26:09 +0200 (MET DST)
Subject: model.matrix crashes (PR#189)
Message-ID: <199905111926.VAA21832@pubhealth.ku.dk>

On Tue, 11 May 1999 jlindsey@alpha.luc.ac.be wrote:

> With 0.64.1 on Intel RH5.2,
> 
> abc <- list()
> abc$abc$abc <- matrix(1:20)
> mt <- terms(~(abc$abc$abc[,1]==64)|(abc$abc$abc[,1]==65)|(abc$abc$abc[,1]==75)
> 	|(abc$abc$abc[,1]==84)|(abc$abc$abc[,1]==85))
> model.matrix(mt,model.frame(mt))
> 
> crashes. With ab$ab$ab, it does not. Apparently, the bug I reported
> for 0.64.0 has just been pushed back one step. Jim

I can't reproduce this on Solaris.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 11 21:59:28 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 May 1999 22:59:28 +0200
Subject: model.matrix crashes (PR#189)
In-Reply-To: thomas@biostat.washington.edu's message of "Tue, 11 May 1999 21:26:09 +0200 (MET DST)"
References: <199905111926.VAA21832@pubhealth.ku.dk>
Message-ID: <x2k8ufqq4v.fsf@blueberry.kubism.ku.dk>

thomas@biostat.washington.edu writes:

> On Tue, 11 May 1999 jlindsey@alpha.luc.ac.be wrote:
> 
> > With 0.64.1 on Intel RH5.2,
> > 
> > abc <- list()
> > abc$abc$abc <- matrix(1:20)
> > mt <- terms(~(abc$abc$abc[,1]==64)|(abc$abc$abc[,1]==65)|(abc$abc$abc[,1]==75)
> > 	|(abc$abc$abc[,1]==84)|(abc$abc$abc[,1]==85))
> > model.matrix(mt,model.frame(mt))
> > 
> > crashes. With ab$ab$ab, it does not. Apparently, the bug I reported
> > for 0.64.0 has just been pushed back one step. Jim
> 
> I can't reproduce this on Solaris.

I can, on Linux, RH6.0.

The problem is neatly described in src/main/model.c:1690

    /* FIXME : we need to check for buffer overflow here. */

I've upped the BUFSIZE from 128 to 4096, which should push the problem
a bit further back....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 11 22:05:11 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 May 1999 23:05:11 +0200
Subject: another multivariate ts bug
In-Reply-To: Paul Gilbert's message of "Tue, 11 May 1999 13:08:44 -0400"
References: <3738641B.3630B0F2@bank-banque-canada.ca>
Message-ID: <x2iu9zqpvc.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I think this is another one of the same kind of bugs in ts:
> 
> Version 0.64.1  (May 8, 1999)
> ...
> >  z <- ts(matrix(1:20,10,2), start=c(1969,1), frequency=12)
> > (z > 5) | (z < 2)
> Error: invalid time series parameters specified
> >

Sigh.

Found and fixed. Same problem. This time in src/main/logic.c, lbinary
function. Here's the patch (cut+paste'd, watch out for whitespace
problems).

RCS file: /users/rdev/R/CVS-ARCHIVE/R/src/main/logic.c,v
retrieving revision 1.8
diff -c -r1.8 logic.c
*** logic.c     1999/03/05 19:19:04     1.8
--- logic.c     1999/05/11 21:02:09
***************
*** 110,121 ****
      y = CADR(args) = coerceVector(y, LGLSXP);
      PROTECT(x = binaryLogic(PRIMVAL(op), x, y));
  
-     if (xts || yts) {
-       setAttrib(x, R_TspSymbol, tsp);
-       setAttrib(x, R_ClassSymbol, class);
-       UNPROTECT(2);
-     }
- 
      if (dims != R_NilValue) {
        setAttrib(x, R_DimSymbol, dims);
        if(xnames != R_NilValue)
--- 110,115 ----
***************
*** 128,133 ****
--- 122,133 ----
            setAttrib(x, R_NamesSymbol, xnames);
        else if(length(x) == length(ynames))
            setAttrib(x, R_NamesSymbol, ynames);
+     }
+ 
+     if (xts || yts) {
+       setAttrib(x, R_TspSymbol, tsp);
+       setAttrib(x, R_ClassSymbol, class);
+       UNPROTECT(2);
      }
      UNPROTECT(4);
      return x;


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill Simpson <wsi@gcal.ac.uk>  Wed May 12 10:51:35 1999
From: Bill Simpson <wsi@gcal.ac.uk> (Bill Simpson)
Date: Wed, 12 May 1999 09:51:35 +0000 (GMT)
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: <199905111454.PAA03015@toucan.stats.ox.ac.uk>
Message-ID: <Pine.LNX.3.96.990512092041.9531A-100000@cbe207.gcal.ac.uk>



On Tue, 11 May 1999, Prof Brian Ripley wrote:

> 
> The field is regarded as a character field unless  na.strings is
> extended to include NaN.
> 
> I am not in favour of treating NaN as a number, which is linguistic nonsense!
That's why I said that NaN was a "number" (with quotes). It is a number in
the sense that it is the output of an arithmetic operation.
> 
> First, in IEEE arithmetic, NaN is a class of numbers as I understand it
Yes.
> (and internally in R NA is one of those NaNs).
Oh.

> So just which one do
> you mean?  And what are you going to achieve by having essentially a
> second NA, except to blur the real purposes of NaNs?
Well to me NA means missing value, and it is abuse of NA to use it to
represent things like 0/0.

The purpose of having NaN to me:
I am allowed to get an NaN as a result of some operation in R. Let's say I
then save that in a file, then I read the file in again using read.table.
In the process of saving and reading it in I lose the NaN. I don't like
that. It doesn't seem consistent. If the NaN is to be changed, I would
like to do the changing explicitly myself, so I know what happened to it.

I would also include Inf and -Inf here. These are allowed outputs from R
operations, so why can't they be read in by read.table? So I am proposing
that allowable IEEE entities Inf, -Inf, NaN be read in by read.table as
themselves (not as character strings).

> Secondly, on non-IEEE implementations of R, I believe NaN = NA: in any
> case we should not lightly be making IEEE features an essential part of the
> language. (Or with the gradual demise of Vaxen is IEEE arithmetic now
> universal: I still have a Sun running with a special-purpose non-IEEE
> floating-point unit.)
OK I see this point. That's what I meant when I said maybe it would be
opening a can of worms to try to use NaN and Inf consistently throughout
R.

Bill

PS: I remember reading on this list about complex numbers in R. That
brings in a conflict with IEEE (doesn't it?), because in IEEE,
sqrt(negative number)->NaN.
But that is not a NaN if you allow complex numbers (I would think).
> sqrt(-1)
Warning: NaNs produced in function "sqrt"
[1] NaN

Is there a need for an "I" symbol in R?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 12 10:27:17 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 May 1999 11:27:17 +0200
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: Bill Simpson's message of "Wed, 12 May 1999 09:51:35 +0000 (GMT)"
References: <Pine.LNX.3.96.990512092041.9531A-100000@cbe207.gcal.ac.uk>
Message-ID: <x21zgmd4ei.fsf@blueberry.kubism.ku.dk>

Bill Simpson <wsimpson@gcal.ac.uk> writes:

> > So just which one do
> > you mean?  And what are you going to achieve by having essentially a
> > second NA, except to blur the real purposes of NaNs?
>
> Well to me NA means missing value, and it is abuse of NA to use it to
> represent things like 0/0.

And actually the logic is a bit warped:

> NA+NaN     
[1] NA
> NaN+NA
[1] NA
> NaN+NaN
[1] NaN
> is.nan(NaN)
[1] TRUE
> is.nan(NA)
[1] FALSE
> is.na(NaN)
[1] TRUE
 
> The purpose of having NaN to me:
> I am allowed to get an NaN as a result of some operation in R. Let's say I
> then save that in a file, then I read the file in again using read.table.
> In the process of saving and reading it in I lose the NaN. I don't like
> that. It doesn't seem consistent. If the NaN is to be changed, I would
> like to do the changing explicitly myself, so I know what happened to it.
> 
> I would also include Inf and -Inf here. These are allowed outputs from R
> operations, so why can't they be read in by read.table? So I am proposing
> that allowable IEEE entities Inf, -Inf, NaN be read in by read.table as
> themselves (not as character strings).

We do allow them as constants in the language itself, so I suppose we
could do it in read.table as well - this really means inside
as.double, I suppose. The prototype does this:

Splus> is.nan(as.double("NaN"))
[1] T

> PS: I remember reading on this list about complex numbers in R. That
> brings in a conflict with IEEE (doesn't it?), because in IEEE,
> sqrt(negative number)->NaN.
> But that is not a NaN if you allow complex numbers (I would think).
> > sqrt(-1)
> Warning: NaNs produced in function "sqrt"
> [1] NaN
> 
> Is there a need for an "I" symbol in R?

Nope:

> sqrt(-1+0i)
[1] 0+1i

or, equivalently,

> sqrt(as.complex(-1))
[1] 0+1i

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 12 12:07:00 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 12 May 1999 13:07:00 +0200 (MET DST)
Subject: matrix() can't handle NaN (PR#193)
Message-ID: <199905121107.NAA29025@pubhealth.ku.dk>

Can we backtrack here. I have just tried the original example on Solaris,
and matrix() _can_ handle NaN with a mature ANSI C library.

toucan% cat > junk.dat
x y z
1 1 1
1 2 2
2 1 NaN
2 2 4
toucan% R

R : Copyright 1999, The R Development Core Team
Version 0.64.1  (May 8, 1999)
...

> data <- read.table("junk.dat",header=TRUE)
> x<-unique(data$x)
> y<-unique(data$y)
> matrix(data$z,length(y),length(x)) 
     [,1] [,2]
[1,]    1  NaN
[2,]    2    4

So on Solaris NaNs are read as such, and on Linux they are not.


> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 12 May 1999 11:27:17 +0200

> We do allow them as constants in the language itself, so I suppose we
> could do it in read.table as well - this really means inside
> as.double, I suppose. The prototype does this:
> 
> Splus> is.nan(as.double("NaN"))
> [1] T

and so does my R on Solaris. On Linux

> is.nan(as.double("NaN"))
Warning: NAs introduced by coercion
[1] FALSE

so I think there is a problem with Linux versions specifically. The
conversion is done by strtod. Solaris says (same man page)

     If str is NaN, then atof() returns NaN.

This sort of mess is my underlying objection: should we be assuming
IEEE arithmetic, let alone a particular implementation of it?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed May 12 12:20:12 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 12 May 1999 13:20:12 +0200 (MET DST)
Subject: dev.print help page (PR#191)
Message-ID: <199905121120.NAA29328@pubhealth.ku.dk>

>>>>> "Bill" == Bill Simpson <wsi@gcal.ac.uk> writes:

    Bill> Full_Name: Bill Simpson Version: 0.64.1 OS: linux Submission
    Bill> from: (NULL) (193.62.250.209)


    Bill> Two problems with dev.print help.

    Bill> 1. Under Examples: dev.print(width=6, height=6, horizontal=F) ^
    Bill> FALSE

fixed, thank you.

    Bill> 2. dev.print help does not describe any of its parameters
    Bill> (e.g. height or width).  Not described on the other dev.xxx pages
    Bill> either

But the help page says that "..." are parameters of the "device" function,
if the "device" functions is postscript (as it is here),
you must look at  ?postscript  to see what parameters you can use.
Even though, all would have been clear already, 
I've added to the help  which now reads

    Copy Graphics Between Multiple Devices

	 dev.copy(device, ..., which=dev.next())
	 dev.print(device=postscript, ...)
	 dev.control(displaylist)

    Arguments:

      device: A device function (e.g., `x11', `postscript', ...)

	 ...: Arguments to the `device' function above.  For
	      `dev.print', this includes `which' and by default
	      any `postscript' arguments.

   ................
	      
Thanks for the report.
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plindsey@alpha.luc.ac.be  Wed May 12 13:40:51 1999
From: plindsey@alpha.luc.ac.be (plindsey@alpha.luc.ac.be)
Date: Wed, 12 May 1999 14:40:51 +0200 (MET DST)
Subject: Memory crash. (PR#194)
Message-ID: <199905121240.OAA00492@pubhealth.ku.dk>

I just had a memory crash with R-0.64.1.
I am running under intel pentium 200mhz under slackware linux 2.0.30.

1/home/plindsey >gdb /usr/local/src/R/bin/R.binary core 
GDB is free software and you are welcome to distribute copies of it
 under certain conditions; type "show copying" to see the conditions.
There is absolutely no warranty for GDB; type "show warranty" for details.
GDB 4.16 (i486-slackware-linux), Copyright 1996 Free Software Foundation, Inc...
Core was generated by `/usr/local/src/R-0.64.1/bin/R.binary --no-save --no-restore --vsize 8000000 --nsob'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /usr/X11R6/lib/libSM.so.6...done.
Reading symbols from /usr/X11R6/lib/libICE.so.6...done.
Reading symbols from /usr/X11R6/lib/libX11.so.6...done.
Reading symbols from /lib/libdl.so.1...done.
Reading symbols from /lib/libncurses.so.3.0...done.
Reading symbols from /lib/libm.so.5...done.
Reading symbols from /lib/libc.so.5...done.
Reading symbols from /lib/ld-linux.so.1...done.
Reading symbols from /usr/local/src/R-0.64.1/library/rmutil/libs/rmutil.so...done.
Reading symbols from /usr/local/src/R-0.64.1/library/mmdc33/libs/mmdc33.so...done.
Reading symbols from /usr/local/src/R-0.64.1/library/gnlm/libs/gnlm.so...done.
#0  compactPhase () at memory.c:599
599             switch (TYPEOF(s)) {    /* get size in bytes */
(gdb) quit

Patrick.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 12 14:13:15 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 May 1999 15:13:15 +0200
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Wed, 12 May 1999 13:07:00 +0200 (MET DST)"
References: <199905121107.NAA29025@pubhealth.ku.dk>
Message-ID: <x2zp3abfdg.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> > Splus> is.nan(as.double("NaN"))
> > [1] T
> 
> and so does my R on Solaris. On Linux
> 
> > is.nan(as.double("NaN"))
> Warning: NAs introduced by coercion
> [1] FALSE
> 
> so I think there is a problem with Linux versions specifically. The
> conversion is done by strtod. Solaris says (same man page)
> 
>      If str is NaN, then atof() returns NaN.
> 
> This sort of mess is my underlying objection: should we be assuming
> IEEE arithmetic, let alone a particular implementation of it?

Aha! I wonder if that is a Solaris specialty or actually conforming to
standards? A little digging on deja.com turned up a couple of blanket
statements to the effect that "any implementation where strtod can
return NaN is broken", but I'm not too sure about their authority.
Even the textual representation "NaN" is IEEE-854, not 754....

Whatever. I think we should fix as.double() (really: as.vector(x,
"double")) to accept the IEEE extended values in the same way that the
language itself does. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 12 14:37:06 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 May 1999 15:37:06 +0200
Subject: Memory crash. (PR#194)
In-Reply-To: plindsey@alpha.luc.ac.be's message of "Wed, 12 May 1999 14:40:51 +0200 (MET DST)"
References: <199905121240.OAA00492@pubhealth.ku.dk>
Message-ID: <x2wvyebe9p.fsf@blueberry.kubism.ku.dk>

plindsey@alpha.luc.ac.be writes:

> I just had a memory crash with R-0.64.1.
> I am running under intel pentium 200mhz under slackware linux 2.0.30.
> 
> 1/home/plindsey >gdb /usr/local/src/R/bin/R.binary core 
> GDB is free software and you are welcome to distribute copies of it
>  under certain conditions; type "show copying" to see the conditions.
> There is absolutely no warranty for GDB; type "show warranty" for details.
> GDB 4.16 (i486-slackware-linux), Copyright 1996 Free Software Foundation, Inc...
> Core was generated by `/usr/local/src/R-0.64.1/bin/R.binary --no-save --no-restore --vsize 8000000 --nsob'.
> Program terminated with signal 11, Segmentation fault.
> Reading symbols from /usr/X11R6/lib/libSM.so.6...done.
> Reading symbols from /usr/X11R6/lib/libICE.so.6...done.
> Reading symbols from /usr/X11R6/lib/libX11.so.6...done.
> Reading symbols from /lib/libdl.so.1...done.
> Reading symbols from /lib/libncurses.so.3.0...done.
> Reading symbols from /lib/libm.so.5...done.
> Reading symbols from /lib/libc.so.5...done.
> Reading symbols from /lib/ld-linux.so.1...done.
> Reading symbols from /usr/local/src/R-0.64.1/library/rmutil/libs/rmutil.so...done.
> Reading symbols from /usr/local/src/R-0.64.1/library/mmdc33/libs/mmdc33.so...done.
> Reading symbols from /usr/local/src/R-0.64.1/library/gnlm/libs/gnlm.so...done.
> #0  compactPhase () at memory.c:599
> 599             switch (TYPEOF(s)) {    /* get size in bytes */
> (gdb) quit

Thanks for reporting, Pat, but reports like the above are essentially
useless because the memory corruption could be *anywhere*. 

At the very least, we'd need a backtrace ('bt' command in gdb) to see
what functions was involved. Even then, it may be difficult, because
the true damage may have been done by the *previous* garbage
collection. 

The best thing would a simple example showing up the effect. This can
be difficult to create because things depend on the GC getting call at
the exact wrong moment. Turning on gctorture() can help with that by
forcing GC on any allocation, although it slows everything by three
orders of magnitude or so.

Another (even better) option would be if you could debug it yourself.
What I would do is to find the location of the "s" pointer which is
apparently getting overwritten and set a hardware watchpoint on it,
possibly conditionalised on the number of garbage collections.
However, that requires quite some knowledge of gdb.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From magni@omega.ien.it  Wed May 12 16:56:30 1999
From: magni@omega.ien.it (Alessandro Magni)
Date: Wed, 12 May 1999 17:56:30 +0200
Subject: R manual - S manual
Message-ID: <3739A4AE.A2CD78@omega.ien.it>

I just started working on R, and lacking a manual I saw that the advice
is to use som S or S-plus manual.
Where can I find it online?

P.S. I already downloaded and read "notes on S-plus" by Venables/Smith:
now I'd need something
deeper.


P.P.S. please, reply even by email to magni@omega.ien.it

--
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
\ Alessandro Magni
/                               IEN Galileo Ferraris
\                               c.M.d'Azeglio 42, 10125 Torino (ITALIA)
/                               magni@omega.ien.it
\                               Fax (39)11-6507611
/                               Tel (39)11-3919757
\                               Homepage at:
http://alpha.ien.it/~magni/home.html
/
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May 12 22:02:07 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 12 May 1999 17:02:07 -0400
Subject: yet another ts problem
Message-ID: <3739EC4F.840C8F9E@bank-banque-canada.ca>

This looks like a slightly different problem then the other ones:

R : Copyright 1999, The R Development Core Team
Version 0.64.1  (May 8, 1999)
...
> z <- ts(matrix(c(1:9,NA), 5, 2), start=c(1991,1))
> na <- is.na(z)
> z[na]
Error: subscript (10) out of bounds, should be at most 5
>

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed May 12 23:20:13 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 13 May 1999 10:20:13 +1200 (NZST)
Subject: yet another ts problem
In-Reply-To: <3739EC4F.840C8F9E@bank-banque-canada.ca>
Message-ID: <Pine.BSF.4.05.9905131005150.525-100000@g.ihaka.slip.auckland.ac.nz>


On Wed, 12 May 1999, Paul Gilbert wrote:

> This looks like a slightly different problem then the other ones:
> 
> R : Copyright 1999, The R Development Core Team
> Version 0.64.1  (May 8, 1999)
> ...
> > z <- ts(matrix(c(1:9,NA), 5, 2), start=c(1991,1))
> > na <- is.na(z)
> > z[na]
> Error: subscript (10) out of bounds, should be at most 5

There seem to be two problems here

1. I think that "[.ts" tries too hard to turn its value back into
   a time series.  The only case where this makes sense is when
   a selection of columns is taken from a multivariate series.
   If a row subset is taken, it can only be a time series if
   the subscripts have a very special pattern.  This would be
   too expensive I think.

   In S there is no "[.ts", and a simple array subset is returned.

2. There is a subscripting problem in 0.65 which is tripped by this
   (Paul's example triggers a coredump in 0.65).  The problem can
   be reproduced simply with:
	x <- 1:5
	i <- matrix(F,nr=5,nc=2)
	i[5,2] <- T
	x[i]

I will look at the latter, but I think the former needs a look too. 

	Ross

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 13 07:34:20 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 13 May 1999 08:34:20 +0200 (MET DST)
Subject: Error in stripplot  (was Re: [R] stripplot gets weird) (PR#195)
Message-ID: <199905130634.IAA06891@pubhealth.ku.dk>

[Moved to R-bugs, hence R-devel, as this is now a bug report. I have
fixed the stripplot bug.]

On Thu, 13 May 1999, David Scott wrote:

> 
> After thinking that the name difference was a problem, or that attaching
> the dataframe was a problem, I think it might be something to do with
> internal representation of numbers:

More precisely, with rounding errors.

> 
> aitken/Exam9> R
> 
> R : Copyright 1999, The R Development Core Team
> Version 0.63.3  (March 6, 1999)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type    "?license" or "?licence" for distribution details.
> 
> R is a collaborative project with many contributors.
> Type    "?contributors" for a list.
> 
> Type    "demo()" for some demos, "help()" for on-line help, or
>         "help.start()" for a HTML browser interface to help.
> Type    "q()" to quit R.
> 
> 
> > impurity.df<-read.table("impurities.dat",header=T)
> > impurity.df
>    supplier1 supplier2
> 1        3.8       1.8
> 2        3.5       2.2
> 3        4.1       1.3
> 4        2.5       5.1
> 5        3.6       4.0
> 6        4.3       4.7
> 7        2.1       3.3
> 8        2.9       4.3
> 9        3.2       4.2
> 10       3.7       2.5
> 11       2.8       5.4
> 12       2.7       4.6
> > supp.diff<-impurity.df$supplier1-impurity.df$supplier2
> > stripplot(supp.diff,method="stack")
> Warning in y + (unlist(xo) - 1) * offset * csize : longer object length
>         is not a multiple of shorter object length
> Error: x and y lengths differ
> > dput(supp.diff)
> c(2, 1.3, 2.8, -2.6, -0.4, -0.4, -1.2, -1.4, -1, 1.2, -2.6, -1.9
> )
> > supp.diff<-c(2, 1.3, 2.8, -2.6, -0.4, -0.4, -1.2, -1.4, -1, 1.2, -2.6,
> -1.9
> + )
> > stripplot(supp.diff,method="stack")
> >
> 
> Works!!!
> 
> The bit of code inside stripplot that is playing up is intended to
> determine where there are repeated values, and create a sequence
> numbering the values:
>     f <- function(x) seq(length(x))
>     for (i in 1:n) {
>         x <- groups[[i]]
>         y <- rep(i, length(x))
>         if (method == 2) 
>             y <- y + runif(length(y), -jitter, jitter)
>         else if (method == 3) {
>             xg <- split(x, factor(x))
>             xo <- lapply(xg, f)
>             x <- unlist(xg)
>             y <- y + (unlist(xo) - 1) * offset * csize

Yes. On my machine

Browse[1]> x
-2.61 -2.62  -1.9  -1.4  -1.2    -1 -0.41 -0.42   1.2   1.3     2   2.8 
 -2.6  -2.6  -1.9  -1.4  -1.2  -1.0  -0.4  -0.4   1.2   1.3   2.0   2.8 
Browse[1]> print(x, digits=17)                                                 
               -2.61                -2.62                 -1.9 
-2.59999999999999964 -2.60000000000000053 -1.89999999999999947 
                -1.4                 -1.2                   -1 
-1.39999999999999991 -1.19999999999999973 -1.00000000000000000 
               -0.41                -0.42                  1.2 
-0.39999999999999991 -0.40000000000000036  1.20000000000000018 
                 1.3                    2                  2.8 
 1.29999999999999982  1.99999999999999978  2.79999999999999982 
Browse[1]> factor(x)
 [1] -2.6 -2.6 -1.9 -1.4 -1.2 -1   -0.4 -0.4 1.2  1.3  2    2.8 
Levels:  -2.6 -2.6 -1.9 -1.4 -1.2 -1 -0.4 -0.4 1.2 1.3 2 2.8 
Browse[1]> unlist(xg)
-2.61 -2.62  -1.9  -1.4  -1.2    -1 -0.41 -0.42   1.2   1.3     2   2.8 
 -2.6  -2.6  -1.9  -1.4  -1.2  -1.0  -0.4  -0.4   1.2   1.3   2.0   2.8 
Browse[1]> unlist(xo)
-2.61 -2.62 -2.61 -2.62  -1.9  -1.4  -1.2    -1 -0.41 -0.42 -0.41 
    1     2     1     0     1     1     1     1     1     2     1 
-0.42   1.2   1.3     2   2.8 
    0     1     1     1     1 

The main problem is that 

Browse[1]> seq(0)
[1] 1 0

which is definitely wrong for here. stripplot should have 

    f <- function(x) seq(length=length(x))

En route, unlist gives very confusing labels, and I have added
use.names=FALSE.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu May 13 10:36:52 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Thu, 13 May 1999 11:36:52 +0200
Subject: yet another ts problem
References: <Pine.BSF.4.05.9905131005150.525-100000@g.ihaka.slip.auckland.ac.nz>
Message-ID: <373A9D34.EE7511F9@iarc.fr>

Ross Ihaka wrote:

> 1. I think that "[.ts" tries too hard to turn its value back into
>    a time series.  The only case where this makes sense is when
>    a selection of columns is taken from a multivariate series.
>    If a row subset is taken, it can only be a time series if
>    the subscripts have a very special pattern.  This would be
>    too expensive I think.
> 
>    In S there is no "[.ts", and a simple array subset is returned.

An alternative to using "[.ts" to take row subsets would be to 
expand the window.ts() function to include a "freq" or "deltat"
argument. One can then use window() to thin out a regular time series
and "[.ts" could be modified to just return a simple array subset
(in the process get rid of the horrible warning about not returning a
time series).

I already did something like this in the coda package for MCMC output -
which one often wants to thin out because of high autocorrelation.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu May 13 16:25:15 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 13 May 1999 11:25:15 -0400
Subject: yet another ts problem
References: <Pine.BSF.4.05.9905131005150.525-100000@g.ihaka.slip.auckland.ac.nz> <373A9D34.EE7511F9@iarc.fr>
Message-ID: <373AEEDA.39CAAC16@bank-banque-canada.ca>

Ross Ihaka wrote:

> 1. I think that "[.ts" tries too hard to turn its value back into
>    a time series.  ...

I agree with this, although, despite all the bugs I'm reporting, a lot of "[.ts"
works ok. All of my calls to "[.ts" that should try to preserve time series
properties are (or should be) from window or some window like utilities that I
use in my tframe kernel. So there is a lot of duplication because these are
already doing most of the stuff that "[.ts" is trying to do too.

(My tframe kernel used to completely take over  all time series including "ts",
but to do that I had to redefine some top level generics like window and plot -
which I think would eventually lead to trouble. My recent batch of ts problems
is because I have changed things so I don't take over the top level. This gives
more control to the class methods, which I think is the way it should work.)

>    In S there is no "[.ts", and a simple array subset is returned.

Splus 3.3 has  "[.its", "[.cts", and "[.rts", the class methods for time series.
However, I haven't used them much and I have no idea if they work properly.

Martyn Plummer wrote:

>An alternative to using "[.ts" to take row subsets would be to
>expand the window.ts() function to include a "freq" or "deltat"
>argument.

I don't see why this should be necessary? window works with dates and
automatically knows the frequency of the object.

>One can then use window() to thin out a regular time series
>and "[.ts" could be modified to just return a simple array subset

That is the way I (try to) use it already. I think if you're doing time-wise
stuff then you should be using dates, except at the lowest level when you need
to get into the representation and use "[". That is probably the main thing that
my tframe kernel lets me do fairly easily.

>(in the process get rid of the horrible warning about not returning a
>time series).

YES PLEASE !! In fact, I always have to redefine that function or I can't see my
output for all the warning messages.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May 13 19:07:23 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 May 1999 20:07:23 +0200
Subject: yet another ts problem
In-Reply-To: Paul Gilbert's message of Thu, 13 May 1999 11:25:15 -0400
References: <Pine.BSF.4.05.9905131005150.525-100000@g.ihaka.slip.auckland.ac.nz>
 <373A9D34.EE7511F9@iarc.fr> <373AEEDA.39CAAC16@bank-banque-canada.ca>
Message-ID: <x2pv44sv1g.fsf@biostat.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> Ross Ihaka wrote:
> 
> > 1. I think that "[.ts" tries too hard to turn its value back into
> >    a time series.  ...
> 
> I agree with this, although, despite all the bugs I'm reporting, a lot of "[.ts"
> works ok. All of my calls to "[.ts" that should try to preserve time series

Notice that there's a quickhack(TM) for the specific problem:

    y <- NextMethod("[")
    if (missing(i)) 
        ts(y, start = start(x), freq = frequency(x))
    else {
        n <- if (is.matrix(x)) 
            nrow(x)

insert "if (is.matrix(i)) return(y)" at the beginning of the else clause.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From leifj@matematik.su.se  Fri May 14 11:30:52 1999
From: leifj@matematik.su.se (leifj@matematik.su.se)
Date: Fri, 14 May 1999 12:30:52 +0200 (MET DST)
Subject: R 0.64 and -release fails to build on DU4.0 (PR#196)
Message-ID: <199905141030.MAA13049@pubhealth.ku.dk>


OS: Digital Unix 4.0E
Compiler: vanilla f77 and cc.

Build error:

f77  -o ../../bin/R.binary arithmetic.o array.o attrib.o bind.o builtin.o 
character.o coerce.o colors.o complex.o context.o cov.o cum.o debug.o 
deparse.o deriv.o devices.o dotcode.o dstruct.o duplicate.o envir.o errors.o 
eval.o format.o fourier.o gram.o gram-ex.o graphics.o iosupport.o list.o 
logic.o main.o match.o memory.o model.o names.o objects.o optimize.o options.o 
par.o paste.o platform.o plot.o plot3d.o plotmath.o print.o printarray.o 
printvector.o printutils.o random.o relop.o saveload.o scan.o seq.o sort.o 
source.o split.o subassign.o subscript.o subset.o summary.o unique.o util.o 
version.o ../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE 
-L/usr/local/X11R6.3/lib -lX11 -ldnet_stub -lz -ltermcap -lm
ld:
../unix/libunix.a(system.o): main: multiply defined
fort: Severe: Failed while trying to link.
make[2]: *** [../../bin/R.binary] Error 1
make[2]: Leaving directory `/usr/local/src/R-release/src/main'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/usr/local/src/R-release/src'
make: *** [R] Error 1

Please advise. I tried using egcs 1.1.2 to build R at first but then 
R dies with a floating point exception.

	Best R.

Leif Johansson				Phone: +46 8 164541		
Department of Mathematics		Fax  : +46 8 6126717		
Stockholm University 			email: leifj@matematik.su.se 	

    <This space is left blank for quotational and disclamatory purposes.>



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 14 11:40:18 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 May 1999 12:40:18 +0200
Subject: R 0.64 and -release fails to build on DU4.0 (PR#196)
In-Reply-To: leifj@matematik.su.se's message of Fri, 14 May 1999 12:30:52 +0200 (MET DST)
References: <199905141030.MAA13049@pubhealth.ku.dk>
Message-ID: <x2lneskk8d.fsf@biostat.ku.dk>

leifj@matematik.su.se writes:

> OS: Digital Unix 4.0E
> Compiler: vanilla f77 and cc.
> 
> Build error:
> 
> f77  -o ../../bin/R.binary arithmetic.o array.o attrib.o bind.o builtin.o 
...
> ld:
> ../unix/libunix.a(system.o): main: multiply defined
                              ^^^^^^^^^^^^^^^^^^^^^^^
> 
> Please advise. I tried using egcs 1.1.2 to build R at first but then 
> R dies with a floating point exception.

Hmmm. This looks like f77 is trying to supply its own main() routine.
Try changing LDCMD (in Makeconf) to cc.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 14 11:48:13 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 May 1999 12:48:13 +0200
Subject: r-bugs website down
Message-ID: <x2k8uckjv6.fsf@biostat.ku.dk>

The machine that runs the r-bugs website seems to have gone belly-up
some time yesterday. The e-mail interface should still work. 

(No jokes about "Ascension Day", please, I can make up those myself!)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 14 13:36:22 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 May 1999 14:36:22 +0200
Subject: r-bugs website down
In-Reply-To: Peter Dalgaard BSA's message of "14 May 1999 12:48:13 +0200"
References: <x2k8uckjv6.fsf@biostat.ku.dk>
Message-ID: <x24slf96bd.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> The machine that runs the r-bugs website seems to have gone belly-up
> some time yesterday. The e-mail interface should still work. 

It's back up again now.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri May 14 18:31:01 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 14 May 1999 19:31:01 +0200
Subject: yet another ts problem
References: <Pine.BSF.4.05.9905131005150.525-100000@g.ihaka.slip.auckland.ac.nz> <373A9D34.EE7511F9@iarc.fr> <373AEEDA.39CAAC16@bank-banque-canada.ca>
Message-ID: <373C5DD5.CB6D93F8@iarc.fr>

Paul Gilbert wrote:

> Splus 3.3 has  "[.its", "[.cts", and "[.rts", the class methods for time series.
> However, I haven't used them much and I have no idea if they work properly.

Splus time series do preserve their class: an irregular subset of an rts
(regular)
or its (irregular) yields an its, and a regular subset of either yields an rts.
Since time series are classed objects in R, they are more like Splus "rts"
objects than vanilla S time series: hence the idea that subsetting should
preserve
the class (yes I am responsible for this, and I'm REALLY sorry about the
warning).

> Martyn Plummer wrote:
> 
> >An alternative to using "[.ts" to take row subsets would be to
> >expand the window.ts() function to include a "freq" or "deltat"
> >argument.
> 
> I don't see why this should be necessary? window works with dates and
> automatically knows the frequency of the object.

Perhaps I wasn't very clear. There are three ways to take a subset
of a regular time series that yield another regular time series:
1) Take all observations after "start"
2) Take all observations before "end"
3) Take all observations where time between "start" and the observation
   is a multiple of "deltat".
We all agree that "[.ts" isn't the place to do this.  Since window.ts
already does 1) and 2), I propose extending it to do 3) too. Maybe
this is silly. Maybe nobody else wants to do this. But anyway, the
code is below. YMMV.

Martyn

"window.ts" <-
function (x, start, end, frequency, deltat) 
{
    x <- as.ts(x)
    xtsp <- tsp(x)
    xfreq <- xtsp[3]
    xtime <- time(x)
    ts.eps <- .Options$ts.eps
    if (missing(frequency) && missing(deltat)) 
        yfreq <- xfreq
    else if (missing(deltat)) 
        yfreq <- frequency
    else if (missing(frequency)) 
        yfreq <- 1/deltat
    if (xfreq%%yfreq < ts.eps) {
        thin <- round(xfreq/yfreq)
        yfreq <- xfreq/thin
    }
    else {
        thin <- 1
        yfreq <- xfreq
        warning("Frequency not changed")
    }
    start <- if (missing(start)) 
        xtsp[1]
    else switch(length(start), start, start[1] + (start[2] - 
        1)/xfreq, stop("Bad value for start"))
    if (start < xtsp[1]) {
        start <- xtsp[1]
        warning("start value not changed")
    }
    end <- if (missing(end)) 
        xtsp[2]
    else switch(length(end), end, end[1] + (end[2] - 1)/xfreq, 
        stop("Bad value for end"))
    if (end > xtsp[2]) {
        end <- xtsp[2]
        warning("end value not changed")
    }
    if (start > end) 
        stop("start cannot be after end")
    if (all(abs(start - xtime) > abs(start) * ts.eps)) {
        start <- xtime[(xtime > start) & ((start + 1/xfreq) > 
            xtime)]
    }
    if (all(abs(end - xtime) > abs(end) * ts.eps)) {
        end <- xtime[(xtime < end) & ((end - 1/xfreq) < xtime)]
    }
    i <- seq(trunc((start - xtsp[1]) * xfreq + 1.5), trunc((end - 
        xtsp[1]) * xfreq + 1.5), by = thin)
    y <- if (is.matrix(x)) 
        x[i, , drop = FALSE]
    else x[i]
    ystart <- xtime[i[1]]
    yend <- xtime[i[length(i)]]
    tsp(y) <- c(ystart, yend, yfreq)
    y
}

function (x, i, j, drop = TRUE) 
{
    y <- NextMethod("[")
    if (missing(i)) 
        ts(y, start = start(x), freq = frequency(x))
    else y
}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri May 14 18:55:12 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 14 May 1999 13:55:12 -0400
Subject: yet another ts problem
References: <Pine.BSF.4.05.9905131005150.525-100000@g.ihaka.slip.auckland.ac.nz> <373A9D34.EE7511F9@iarc.fr> <373AEEDA.39CAAC16@bank-banque-canada.ca> <373C5DD5.CB6D93F8@iarc.fr>
Message-ID: <373C637F.6E37B1BE@bank-banque-canada.ca>

>3) Take all observations where time between "start" and the observation
>   is a multiple of "deltat".

ok, and I agree that window.ts seems a better place to do this. I would prefer

window.ts <- function (x, start=NULL, end=NULL, frequency=NULL, deltat=NULL)
then use is.null() rather than missing()
or
window.ts <- function (x, start=start(x), end=end(x), frequency=frequency(x),
deltat=NULL)

as I always get nervous (after many long hours debugging) about how missing
arguments will get matched.

Paul

P.S. And thanks for removing the warning.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 14 19:15:29 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 May 1999 20:15:29 +0200
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: Peter Dalgaard BSA's message of "12 May 1999 15:13:15 +0200"
References: <199905121107.NAA29025@pubhealth.ku.dk> <x2zp3abfdg.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2btfnecvy.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Whatever. I think we should fix as.double() (really: as.vector(x,
> "double")) to accept the IEEE extended values in the same way that the
> language itself does. 

Fixed now, for what is to become 0.65.0.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hohn@math.utah.edu  Mon May 17 06:44:38 1999
From: hohn@math.utah.edu (Michael Hohn)
Date: Sun, 16 May 1999 23:44:38 -0600 (MDT)
Subject: minor installation problems
Message-ID: <199905170544.XAA06256@sunfish.math.utah.edu>

Hello,

I just finished installing R-0.64.1 on my linux machine (using kernel
2.0.36 under red hat 5.2, and 
gcc version egcs-2.91.60 19981201 (egcs-1.1.1 release)
)

The two problems I had:

1. ./configure --with-readline --with-x --prefix=/usr/local
   ran to a point, then gave up with
    ...	  
    checking return type of signal handlers... void
    checking for working const... yes
    checking size of long... 0
    Size of long must be at least 32 bits

Manual modification of ./configure to use 4 bytes fixed this problem.  
A manual run of the autoconf C program

#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long));
  exit(0);
}

produced the correct result, so
I don't know where this zero size problem came from.  


2.  After the final linking of R via

g77 -o ../../bin/R.binary  arithmetic.o array.o attrib.o bind.o
builtin.o character.o coerce.o colors.o complex.o context.o cov.o
cum.o debug.o deparse.o deriv.o devices.o dotcode.o dstruct.o
duplicate.o envir.o errors.o eval.o format.o fourier.o gram.o
gram-ex.o graphics.o iosupport.o list.o logic.o main.o match.o
memory.o model.o names.o objects.o optimize.o options.o par.o paste.o
platform.o plot.o plot3d.o plotmath.o print.o printarray.o
printvector.o printutils.o random.o relop.o saveload.o scan.o seq.o
sort.o source.o split.o subassign.o subscript.o subset.o summary.o
unique.o util.o version.o ../unix/libunix.a ../appl/libappl.a
../nmath/libmath.a -lSM -lICE -L/usr/X11R6/lib -lX11 -lreadline -lz
-ldl -lncurses -lm

the binary would exit with the error

    /usr/local/lib/R-0.64.1/bin/R.binary: error in loading shared
    libraries
    : undefined symbol: __register_frame_info

when run.

This symbol is defined in libstdc++.  A manual link via 

g77 -o ../../bin/R.binary /usr/lib/libstdc++.so arithmetic.o array.o
attrib.o bind.o builtin.o character.o coerce.o colors.o complex.o
context.o cov.o cum.o debug.o deparse.o deriv.o devices.o dotcode.o
dstruct.o duplicate.o envir.o errors.o eval.o format.o fourier.o
gram.o gram-ex.o graphics.o iosupport.o list.o logic.o main.o match.o
memory.o model.o names.o objects.o optimize.o options.o par.o paste.o
platform.o plot.o plot3d.o plotmath.o print.o printarray.o
printvector.o printutils.o random.o relop.o saveload.o scan.o seq.o
sort.o source.o split.o subassign.o subscript.o subset.o summary.o
unique.o util.o version.o ../unix/libunix.a ../appl/libappl.a
../nmath/libmath.a -lSM -lICE -L/usr/X11R6/lib -lX11 -lreadline -lz
-ldl -lncurses -lm

produced a working executable.



Any ideas on the source of these two problems?

Cheers,
	Mike
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon May 17 09:39:13 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 17 May 1999 10:39:13 +0200
Subject: Using  automake & libtool instead of just autoconf.. ?
Message-ID: <199905170839.KAA07904@sophie.ethz.ch>

Since we also ``sometimes'' have problems with incorrect configurations...
 ;-)

Read this on the octave mailing list :
  (I'm not using octave;  I'm trying to hear what they are talking about)

------- Start of forwarded message -------
Date: Mon, 17 May 1999 10:30:51 +0200
From: Thomas Walter <walter@pctc.chemie.uni-erlangen.de>
To: jwe@bevo.che.wisc.edu
CC: gohel@babbage.csee.usf.edu, help-octave@bevo.che.wisc.edu
Subject: Re: IRIX octave 2.0.14 can't find runtime libs


>>>>> "John" == John W Eaton <jwe@bevo.che.wisc.edu> writes:

[snip]

    John> Eventually, Octave's configure script and Makefiles should be fixed to
    John> use libtool, which should help to make these things work better.
    John> Unfortunately, I have little time to spend working on that project.
    John> Any volunteers?

To do this I think it is best to use 'automake' too.  Writing the
dependencies into the files 'Makefile.am' is much easier because they
are much shorter then `Makefile.in' files..  After that
calling 'automake' will build all the 'Makefile.in'.  And 'automake'
knows how to use 'libtool'.  There will be no need write rules to call
'libtool' by hand.

What are the opinions about that?  I have used automake and libtool
for a long time and I would help to do the step.

...
------- End of forwarded message -------

Any "R-devel"er who's willing to help here ?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Fri May 21 06:15:03 1999
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri, 21 May 1999 07:15:03 +0200
Subject: Bug list summary (automatic post)
Message-ID: <199905210515.HAA08645@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100

Directory:  Add-ons

* PR# 137 *
Subject: funfits
From: "Alvaro A. Novo" <novo@uiuc.edu>
Date: Tue, 9 Mar 1999 22:24:54 -0600

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100

Directory:  Documentation

* PR# 146 *
Subject: nlm docs
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 24 Mar 1999 15:48:41 +0100 (MET)

Directory:  Graphics

* PR# 38 *
Subject: possible bugs
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Sun, 6 Sep 1998 15:59:34 -0400 (EDT)
--ylim problem which appears solved
--Postscript overflow still with us (22feb99)
* PR# 61 *
Subject: points(...,  cex = ..)  is pretty wrong...
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 2 Nov 1998 19:15:06 +0100
--Symbols getting decentered when too large cex for X. Still there 22feb99  
* PR# 66 *
Subject: Bug with bounding box?
From: johnp@tip.csiro.au
Date: Thu, 3 Dec 1998 02:15:38 +0100
--Yes, this appears to have x/y reversed. The supplied example gives 
--%%Orientation: Landscape
--%%BoundingBox: 18 18 824 577 
--but the convention is to rotate the paper but leave the coordinate system.
* PR# 69 *
Subject: Some graphics bugs
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 04 Dec 1998 11:42:50 -0000 ()
Date: 04-Dec-98
--Various anomalies with text size and alignment. 2B appears to be solved. The 
--rest is still there (22feb99)
* PR# 79 *
Subject: apology: text(locator(),"sometext") works
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Tue, 15 Dec 1998 19:45:29 -0500 (EST)
--Clipping discrepancy x11/PS
* PR# 106 *
Subject: border-arg. in persp
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
Date: Fri, 29 Jan 1999 11:12:39 +0100
--No effect of arg. Still here 22feb99. Segfault with border=0 seems gone now. 
* PR# 114 *
Subject: PostScript Level 1/2 bug
From: ben@eno.princeton.edu
Date: Mon, 8 Feb 1999 00:07:20 +0100
--Not sure whether this is really PS lev 1/2 issue.
--/Font5 /Symbol findfont definefont
--(missing scalefont?)
* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 123 *
Subject: Text in plot
From: Ennapadam Venkatraman <venkat@biosta.mskcc.org>
Date: Thu, 18 Feb 1999 13:05:37 -0500
--Multiline text not working
* PR# 130 *
Subject: lty=0 -- shouldn't it give an invisible line?
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 28 Feb 1999 21:45:43 +0100
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
* PR# 153 *
Subject: image + x11
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
Date: Wed, 31 Mar 1999 14:09:53 +0200

Directory:  In-Out

* PR# 125 *
Subject: scan rejects complex
From: John.Peters@tip.csiro.au (John Peters)
Date: Mon, 22 Feb 1999 10:08:14 +1100 (EST)
* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM

Directory:  Installation

* PR# 95 *
Subject: patch to 63.2
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 15 Jan 1999 11:00:25 +0100 (MET)
--An incident where the 0.63.2 patches didn't take. So far the only one. 
--Maybe caused by patching unclean sources?

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 118 *
Subject: Function parsing
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Wed, 10 Feb 1999 13:42:01 +0000 (GMT)
--comment placement.
* PR# 166 *
Subject: outer fails with group generic operations on factors
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Tue, 13 Apr 1999 18:28:53 +0100 (BST)
--There is a suggested solution (PD), but not yet implemented (99/05/07)

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 180 *
Subject: nlm on a function in the Math group
From: Douglas Bates <bates@stat.wisc.edu>
Date: Thu, 29 Apr 1999 17:11:00 -0500 (CDT)
--causes R to core dump
* PR# 185 *
Subject: Re: [R] R_problem_buf in the S.h files & lists in .C
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 1999 00:32:49 +0200
--S objects in .C calls (not just lists) are now documented in the help file

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

* PR# 121 *
Subject:  model.frame mangles time series 
From: Peter Dalgaard BSA <pd@biostat.ku.dk>
Date: Thu, 18 Feb 1999 15:47:24 +0100
--Subset in C code + attributes = mess
--Switch to interpreted ("[")

Directory:  Startup

* PR# 21 *
Subject: Restoring large image files
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 21 Aug 1998 13:29:16 -0000 ()
--Request to change in error conditions in R_InitialData. Could be done, but
--at present initial loads are not distinguished from load("file") calls. 

Directory:  System-specific

* PR# 145 *
Subject: R-0.63.3 package on IRIX 6.5 machine
From: Jayshree Sarma <jsarma@cs.gmu.edu>
Date: Tue, 23 Mar 1999 16:54:20 -0500 (EST)
* PR# 163 *
Subject: IRIX compile
From: mtim@farm.ecs.umass.edu
Date: Sat, 10 Apr 1999 19:35:43 +0200

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 174 *
Subject:  do.call() mangles expressions in arguments 
From: Peter Dalgaard BSA <pd@biostat.ku.dk>
Date: Wed, 21 Apr 1999 19:39:53 +0200
* PR# 186 *
Subject: subscripting in list()
From: Wenxin Mao <mao@compstat.wharton.upenn.edu>
Date: Sun, 9 May 1999 12:42:29 -0400 (EDT)
* PR# 187 *
Subject: subscripting in list()
From: Wenxin Mao <mao@compstat.wharton.upenn.edu>
Date: Sun, 9 May 1999 13:02:51 -0400 (EDT)
* PR# 189 *
Subject: model.matrix crashes
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Tue, 11 May 1999 10:16:33 +0200 (MET DST)
* PR# 190 *
Subject: PRIVATE: xxxx
From: barakil@nice.com
Date: Tue, 11 May 1999 13:38:49 +0200 (MET DST)
* PR# 191 *
Subject: dev.print help page
From: wsi@gcal.ac.uk
Date: Tue, 11 May 1999 13:39:05 +0200 (MET DST)
* PR# 192 *
Subject: dev.print aspect ratio
From: wsi@gcal.ac.uk
Date: Tue, 11 May 1999 13:43:50 +0200 (MET DST)
* PR# 193 *
Subject: matrix() can't handle NaN
From: wsi@gcal.ac.uk
Date: Tue, 11 May 1999 14:01:59 +0200 (MET DST)
* PR# 194 *
Subject: Memory crash.
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 12 May 1999 14:43:45 +0200 (MET DST)
* PR# 195 *
Subject: Error in stripplot  (was Re: [R] stripplot gets weird)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 13 May 1999 07:34:06 +0100 (BST)
* PR# 196 *
Subject: R 0.64 and -release fails to build on DU4.0
From: Leif Johansson <leifj@matematik.su.se>
Date: Fri, 14 May 1999 12:32:14 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Cor.Berrevoets@gironet.nl  Fri May 21 19:04:12 1999
From: Cor.Berrevoets@gironet.nl (Cor.Berrevoets@gironet.nl)
Date: Fri, 21 May 1999 20:04:12 +0200 (MET DST)
Subject: glm crash (PR#197)
Message-ID: <199905211804.UAA12871@pubhealth.ku.dk>

Dear bug-busters,

This week I've posted a message to the R-help mailing to inquire if
anybody had experienced alike me. When I run the following GLM:
glm(n~s+c+m, family=quasi(link=log, variance=mu))
several times using exactly the same dataset R crashes at random. I have
tried to probe into the problem by tracking the response times of the
above function with system.time (e.g. system.time(glm ....))

I noticed that the response times increased in subsequent calls to the
function, at some (random) point leading to a crash. So it looked as if
R was "leaking" somewhere. Then I started all-over again (restarted PC)
and released before the glm-command a gc-command to collect the garbage.
That works rather well and the crashing seems less frequent (mostly
after 3-4 times issueing the glm-command) . Also the increasing response
times changed into a stable component with one big exception, the First
Call. Every time after fully re-starting R I issued gc() and then the
glm-command . This call is about 1/3 or so of the time spend in the
subsequent calls. Looking at the Ncells/Vcells hardly any difference
exists, on average the Ncells/Vcells (virgin state of the program) are
about 50 cells bigger than after the subsequent glm-commands.  In the
table below you can see the effects I just mentioned, notice the "odd"
behaviour of the default Vsize.

Table: response times glm function at varying Vsizes.

Vsize    1st response    subsequent
default            47.57        27.96
8M                39.27        62.15
16M              38.44        62.37
32M              13.34        32.77
64M              10.13        34.28
128M            11.45        34.21

Im using R 0.64.1 on Win95..

Maybe someone of your team can tell me more on the nature of this
"thing".

Hoping not to bug to much,

greetings

Cor Berrevoets





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri May 21 19:22:21 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 21 May 1999 11:22:21 -0700 (PDT)
Subject: glm crash (PR#197)
In-Reply-To: <199905211804.UAA12871@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.9905211112010.269-100000@wompom.biostat.washington.edu>

On Fri, 21 May 1999 Cor.Berrevoets@gironet.nl wrote:

> Dear bug-busters,
> 
> This week I've posted a message to the R-help mailing to inquire if
> anybody had experienced alike me. When I run the following GLM:
> glm(n~s+c+m, family=quasi(link=log, variance=mu))
> several times using exactly the same dataset R crashes at random. I have
> tried to probe into the problem by tracking the response times of the
> above function with system.time (e.g. system.time(glm ....))

This could be some nasty form of memory problem, but it is difficult to
tell.  With a program as complex as R it is very hard to diagnose bugs
from symptoms like this.

At a minimum we need to know exactly what message R gives, however this
probably isn't enough. An example data set that reliably produces the
problem gives us a chance to track the bug down and at least makes it
easy to distinguish Windows-based bugs from general-purpose bugs.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Fri May 21 21:09:06 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Fri, 21 May 1999 21:09:06 +0100
Subject: glm crash (PR#197)
In-Reply-To: <199905211804.UAA12871@pubhealth.ku.dk>; from Cor.Berrevoets@gironet.nl on Fri, May 21, 1999 at 08:04:12PM +0200
References: <199905211804.UAA12871@pubhealth.ku.dk>
Message-ID: <19990521210906.00262@hal.stat.unipd.it>

On Fri, May 21, 1999 at 08:04:12PM +0200, Cor.Berrevoets@gironet.nl wrote:
> Dear bug-busters,
> 
> This week I've posted a message to the R-help mailing to inquire if
  
  Cor,
  I apologize for not asking you what follows after your first message.

> anybody had experienced alike me. When I run the following GLM:
> glm(n~s+c+m, family=quasi(link=log, variance=mu))

  Could you send me the data? I will try to replicate the error
  both under Windows and some flavour of Unixes to try to understand
  what is going on. 
  Have you got into similar problem with previous version?
  
  guido
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun May 23 07:59:02 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 23 May 1999 08:59:02 +0200 (MET DST)
Subject: Bug in loglin with variable called "c" (PR#198)
Message-ID: <199905230659.IAA17027@pubhealth.ku.dk>

Summary:

loglin will fail if there is a global variable called c. I have
fixed this for 0.64.2 and 0.65.

On Sat, 22 May 1999, Cor en Aylin wrote:

> Dear Brian,
> 
> Using the mass library for R (the most recent port dated 16 may 1999) I

Could you give version numbers in such reports please: at the moment there
is an official version (5.3pl037) of MASS for R, plus a pre-release of MASS
for V&R3, and you seem to be using the latter.  That is _not_ the most
recent port:  it is a different major version (6.1 not 5.3) and please
don't use it unless you like testing pre-release software. BTW, the name is
MASS, not mass or Mass: it is an acronym.

> have encountered a minor problem you  might want to be informed about :
> 
> If used the following command:
>   mydata.loglm <- loglm(n~ s+c+m, mydata)
> 
> I got an the following error :  Error in get(x, envir, mode, inherits) :
> variable "FUN" was not found
> 
> traceback()
> [1] "get(as.character(f), mode = \"function\")"
> [2] "match.fun(FUN)"
> [3] "lapply(y, c, x[i])"
> [4] "subsets(margin[[k]])"
> [5] "loglin(data, margins, start = start, fit = fitted, param = param, "
> 
> [6] "    eps = eps, iter = iter, print = print)"
> [7] "loglm1.default(formula, data, ..., start = st)"
> [8] "loglm1.data.frame(formula, data, ...)"
> [9] "loglm(n ~ s + m + c, mydata )"
> 
> Trying to see where the problem sits within loglin I saw that (line 3 of
> traceback) variable "c" is used in lapply, and since my data-variable
> also is called "c" mine was used instead (wrongly). I understood the
> message and I think that I better not use often uses variable-names
> (a..z) as names for my data-vars.

The problem is not in MASS: it is occurring in the R version of loglin.

To reproduce this I have to have a global variable c, not a column c in
the dataframe. So that is the workaround: make your variables columns in 
mydata. Here is a example:

library(MASS)
data(quine)
c <- quine$Eth
loglm(Days ~ .^2, quine)

To fix this in R, the line in loglin needs to be lapply(y, "c", x[i]).

Kurt: do you want explicitly to get c() from package:base here, to be
safer, or would that be too restrictive?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From o1422@aol.com  Wed May 26 06:54:47 1999
From: o1422@aol.com (o1422@aol.com)
Date: Wed, 26 May 1999 07:54:47 +0200
Subject: INTERNATIONAL DRIVERS LICENCE
Message-ID: <B0003602282@mail.astat.de>




INTERNATIONAL DRIVER'S LICENSE

Need a new driver's license? 

Too many points or other trouble?

Want a license that can never be suspended 
or revoked?

Want ID for nightclubs or hotel check-in?

Avoid tickets, fines, and mandatory driver's 
education.

Protect your privacy, and hide your identity.

The United Nations gave you the privilege to
drive freely throughout the world! (Convention 
on International Road Traffic of September 19, 
1949 & World Court Decision, The Hague, 
Netherlands, January 21, 1958)

Take advantage of your rights.  Order a valid 
International Driver's License that can never 
be suspended or revoked.

Confidentiality assured.

CALL NOW!!! 

1-937-586-9313 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Wed May 26 14:53:44 1999
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Wed, 26 May 1999 15:53:44 +0200 (MET DST)
Subject: help for trig functions (PR#199)
Message-ID: <199905261353.PAA00615@pubhealth.ku.dk>

The help for trig functions (e.g. ?tan) says 
Description:

        These functions give the obvious trigonometric func-
        tions.  They respectively compute the cosine, sine,
        tangent, arc-cosine, arc-sine, arc-tangent and arc-tan-
        gent of two arguments.

1. I think it would be useful to state that the arguments are in radians
(not degrees).

2. only atan2 expects two arguments, the rest take one argument.

> version
           _                 
platform   i686-unknown-linux
arch       i686              
os         linux             
system     i686, linux       
status                       
status.rev 0                 
major      0                 
minor      64.1              
year       1999              
month      May               
day        8                 
language   R     

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From msa@biostat.mgh.harvard.edu  Thu May 27 17:40:04 1999
From: msa@biostat.mgh.harvard.edu (msa@biostat.mgh.harvard.edu)
Date: Thu, 27 May 1999 18:40:04 +0200 (MET DST)
Subject: Factor structures not preserved after dump/dput (PR#200)
Message-ID: <199905271640.SAA11822@pubhealth.ku.dk>

Full_Name: Marek Ancukiewicz
Version: 0.64.0
OS: Linux (RedHat 6.0)
Submission from: (NULL) (132.183.12.87)


I've noticed that factor structures get recoded when the data is dumped
using either dump or dput and then restored with source or dget. This
occurs when the values taken by factors do not include 1. For example:

  a <- factor(1:5,1:5,c('a','b','c','d','e'))
  b <- a[3:5]
  dput(b,'b.data')
  new.b <- dget('b.data')

Then b is not the same as new.b:
  > b
  [1] c d e
  Levels:  a b c d e 
  > new.b
  [1] a b c
  Levels:  a b c d e 

This seems to be a very serious bug. It can make one to 
mislabel treatments: a very emabarassing (and potentially 
disastrous) mistake. The reason for this bug seems to
lie in a way in which structure() treats factor structures.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May 27 18:06:37 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 May 1999 19:06:37 +0200
Subject: Factor structures not preserved after dump/dput (PR#200)
In-Reply-To: msa@biostat.mgh.harvard.edu's message of "Thu, 27 May 1999 18:40:04 +0200 (MET DST)"
References: <199905271640.SAA11822@pubhealth.ku.dk>
Message-ID: <x2wvxujvc2.fsf@blueberry.kubism.ku.dk>

msa@biostat.mgh.harvard.edu writes:

>   a <- factor(1:5,1:5,c('a','b','c','d','e'))
>   b <- a[3:5]
>   dput(b,'b.data')
>   new.b <- dget('b.data')
> 
> Then b is not the same as new.b:
>   > b
>   [1] c d e
>   Levels:  a b c d e 
>   > new.b
>   [1] a b c
>   Levels:  a b c d e 
> 
> This seems to be a very serious bug. It can make one to 
> mislabel treatments: a very emabarassing (and potentially 
> disastrous) mistake. The reason for this bug seems to
> lie in a way in which structure() treats factor structures.

Ouch! The fix seems to be to have structure() contain

        if (is.numeric(.Data) && any(names(attrib) == "levels")) 
            .Data <- factor(.Data, levels = 1:max(1,.Data))

rather than just plain  factor(.Data) .  Will commit this in a moment.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon May  3 07:03:21 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 3 May 1999 08:03:21 +0200
Subject: \code and \link
Message-ID: <199905030603.IAA14024@pc87.maho.magnaeu.com>

With Fritz's new debugging additions to Rdconv, several packages give
messages of the kind

  missing link(s):  this-is-escaped-codenormal-bracket30bracket-normal

when building the documentation.

This comes from

	\link{\code{xxx}}

(where `xxx' contains characters that need to be escaped) which should
really be

	\code{\link{xxx}}

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon May  3 08:37:03 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 3 May 1999 09:37:03 +0200 (MET DST)
Subject: par help page  errors (PR#182)
Message-ID: <199905030737.JAA16014@pubhealth.ku.dk>

>>>>> "Martyn" == Martyn Plummer <plummer@iarc.fr> writes:

    Martyn> R 0.64.0 In the help page for par(), the parameters "oma" and
    Martyn> "omi" are described as vectors of the form c(xb, xt, yl, yr)
    Martyn> whereas they are c(xb,yl,xt,yr)

Thanks Martyn.
Committed a fix naming them   c(xbot, yleft, xtop, yright).

Should be in one of the next snapshots (R-release...).
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wvenable@arcola.stats.adelaide.edu.au  Mon May  3 09:54:11 1999
From: wvenable@arcola.stats.adelaide.edu.au (Bill Venables)
Date: Mon, 3 May 1999 18:24:11 +0930 (CST)
Subject: par help page  errors (PR#182)
In-Reply-To: <199905030737.JAA16014@pubhealth.ku.dk>
References: <199905030737.JAA16014@pubhealth.ku.dk>
Message-ID: <14125.25651.873737.624218@arcola.stats.adelaide.edu.au>

>>>>> "MM" == maechler  <maechler@stat.math.ethz.ch> writes:

>>>>> "Martyn" == Martyn Plummer <plummer@iarc.fr> writes:
    Martyn> R 0.64.0 In the help page for par(), the parameters
    Martyn> "oma" and "omi" are described as vectors of the form

I have always wondered why "oma" was so named.  The margin
parameters are "mar" (relative) and "mai" (in inches), why isn't
the outer margin parameter for relative units called "omr".  To
me "Oma" sounds like someone's grandmother... . :-)

    Martyn> c(xb, xt, yl, yr) whereas they are c(xb,yl,xt,yr)

    MM> Thanks Martyn.  Committed a fix naming them c(xbot,
    MM> yleft, xtop, yright).

Why not go all the way and just use c(bottom, left, top, right)?
the x/y prefixes only serve to confuse in my view.  These are
margins, not axes.

-- 
-----------------------------------------------------------------
Bill Venables, Statistician, CMIS Environmetrics Project.

Physical address:                            Postal address:
CSIRO Marine Laboratories,                   PO Box 120,       
233 Middle St, Cleveland, Queensland         Cleveland, Qld, 4163
AUSTRALIA                                    AUSTRALIA

Telephone: +61 7 3826 7251     Email: Bill.Venables@cmis.csiro.au     
      Fax: +61 7 3826 7304
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a.o.jaunsen@astro.uio.no  Mon May  3 10:27:53 1999
From: a.o.jaunsen@astro.uio.no (a.o.jaunsen@astro.uio.no)
Date: Mon, 3 May 1999 11:27:53 +0200 (MET DST)
Subject: compilation of R-0.63.3 on alpha (PR#183)
Message-ID: <199905030927.LAA18266@pubhealth.ku.dk>

This is a multipart MIME message.

--==_Exmh_981436288450
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable


Hi !

I have problems compiling R successfully on a DEC-UINX 4.0E.
I have applied the recommended config.site, which I enclose.
As can be seen from the compilation log there are linking errors...

I did a 'make check' which fails for the R binary.

>make check
=2E
=2E
=2E
Building system startup profile
make[7]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/profile'
make[6]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
'
make[5]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src'
make[4]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3'
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/tests=
'
Massaging examples into base-Ex.R ...
Running all help() examples ...
=2E./../bin/R --vanilla < base-Ex.R > base-Ex.Rout
/bin/sh: 5676 Floating exception
make[2]: *** [base-Ex.Rout] Error 136
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/tests=
/Examp
les'
make[1]: *** [test-Examples] Error 2
make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/tests=
'
make: [test-All] Error 2 (ignored)


Regards,
Andreas



--==_Exmh_981436288450
Content-Type: text/plain ; name="config.site"; charset=iso-8859-1
Content-Description: config.site
Content-Disposition: attachment; filename="config.site"
Content-Transfer-Encoding: quoted-printable

#! /bin/sh

### This file is part of R.
###
### R is free software; you can redistribute it and/or modify it under
### the terms of the GNU General Public License as published by the Free
### Software Foundation; either version 2 of the License, or (at your
### option) any later version.
###
### R is distributed in the hope that it will be useful, but WITHOUT ANY
### WARRANTY; without even the implied warranty of MERCHANTABILITY or
### FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
### License for more details.
###
### You should have received a copy of the GNU General Public License
### along with R; if not, you can obtain it via the World Wide Web at
### `http://www.gnu.org/copyleft/gpl.html', or by writing to the Free
### Software Foundation, 59 Temple Place -- Suite 330, Boston, MA
### 02111-3307, USE.

# By means of this file you can (also) provide default values for the
# configuration process.  To set variables, uncomment the VAR=3DDEFAULT
# lines and set DEFAULT according to your needs.

# The command used to spool PostScript files to the printer.
# If unspecified, the system will look for either "lpr" or "lp"
R_PRINTCMD=3Dppr

# The paper size for the local (PostScript) printer.
# It must either be left blank or set to one of "a4" or "letter".
# If left blank the system will use "a4".
R_PAPERSIZE=3Da4

# The default behavior of R if it encounters EOF in batch mode.
# Set this to one of "--save" or "--no-save" depending whether you
# want automatic saving of `.RData' or not.
# R_BATCHSAVE=3D

# The command which runs the C compiler.
# If unspecified, a search is made for gcc and cc (in that order).
# To override this choice, specify the name of the command which runs
# the compiler here, for example `c89'.
CC=3D"cc"

# Debugging and optimization options for the C compiler.
# Use this to specify CFLAGS for the version of the C compiler specified
# above.  If unspecified, defaults to "-g -O2" for gcc, and "-g" in all
# other cases.
# CFLAGS=3D"-g -I/usr/local/include"

# Header file search directory (`-IDIR') and any other miscellaneous
# options for the C preprocessor and compiler.
# CPPFLAGS=3D

# The command which runs the the FORTRAN compiler.
# If unspecified, a search is made for g77, fort77, f77, f90, xlf, cf77,
# and fc (in that order).  If none of these is found, f2c is used if
# found; otherwise, R cannot be compiled.  The search mechanism can be
# changed using the `--with-g77', `--with-f77', and `--with-f2c' command
# line options to configure.
FC=3D"f77"

# Options for the FORTRAN compiler.
# Use this to specify FFLAGS for the version of the compiler specified
# above.  If unspecified, defaults to "-O2" for g77, and "" otherwise.
FFLAGS=3D"-g -fpe3"

# The command to be used to load the main R binary.
# This is usually the FORTRAN or C compiler, but the automatic choice
# can be overriden by means of this variable.
LDCMD=3D"f77 -g -nofor_main -fpe3 "

# For `-l' and `-L' options to pass to the linker.
# LIBS=3D

# The flags which are necessary for loading main program which will load
# DLLs at runtime.  HP-UX and Linux-elf are examples of platforms which
# use this.  These platforms are already taken care of by configure.
# DLLFLAGS=3D

# Any special flags which must be used when compiling C code to be
# turned into a shared library.  This is typically something like -fpic
# or -fPIC.  If this variable is left unspecified an attempt is made to
# automatically detect the correct value by configure.
# CPICFLAGS=3D

# The following variable can be used to provide any PIC flags for the
# FORTRAN compiler (if you are using one).  If not specified, the value
# of CPICFLAGS above is used.
# FPICFLAGS=3D

# Any special flags which are required by "ld" when creating shared
# libraries.  This is usually automatically detected by configure.
SHLIBLDFLAGS=3D'-shared -expect_unresolved "*"'

--==_Exmh_981436288450
Content-Type: text/plain ; name="rlog.txt"; charset=iso-8859-1
Content-Description: rlog.txt
Content-Disposition: attachment; filename="rlog.txt"
Content-Transfer-Encoding: quoted-printable

>make
make[1]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/afm'=

make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/afm'
make[1]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/demo=
s'
make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/demos=
'
make[1]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/doc'=

make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/doc'
make[1]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/etc'=

make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/etc'
make[1]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src'=

make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
includ
e'
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/i=
nclude
'
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
appl'
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c S_compat.c=
 -o =

S_compat.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c approx.c -=
o =

approx.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c bakslv.c -=
o =

bakslv.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c binning.c =
-o =

binning.o
f77 -g -fpe3 -c ch2inv.f -o ch2inv.o
f77 -g -fpe3 -c chol.f -o chol.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c cpoly.c -o=
 =

cpoly.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c cumsum.c -=
o =

cumsum.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c distance.c=
 -o =

distance.o
f77 -g -fpe3 -c dpoco.f -o dpoco.o
f77 -g -fpe3 -c dpodi.f -o dpodi.o
f77 -g -fpe3 -c dpofa.f -o dpofa.o
f77 -g -fpe3 -c dposl.f -o dposl.o
f77 -g -fpe3 -c dqrdc.f -o dqrdc.o
f77 -g -fpe3 -c dqrdc2.f -o dqrdc2.o
f77 -g -fpe3 -c dqrls.f -o dqrls.o
f77 -g -fpe3 -c dqrsl.f -o dqrsl.o
f77 -g -fpe3 -c dqrutl.f -o dqrutl.o
f77 -g -fpe3 -c dsvdc.f -o dsvdc.o
f77 -g -fpe3 -c dtrco.f -o dtrco.o
f77 -g -fpe3 -c dtrsl.f -o dtrsl.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c eigen.c -o=
 =

eigen.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fortran.c =
-o =

fortran.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fft.c -o f=
ft.o
f77 -g -fpe3 -c fmin.f -o fmin.o
f77 -g -fpe3 -c lminfl.f -o lminfl.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c loglin.c -=
o =

loglin.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c lowess.c -=
o =

lowess.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c machar.c -=
o =

machar.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c massdist.c=
 -o =

massdist.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pretty.c -=
o =

pretty.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pythag.c -=
o =

pythag.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rowsum.c -=
o =

rowsum.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c splines.c =
-o =

splines.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c stem.c -o =
stem.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c strsignif.=
c -o =

strsignif.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c tabulate.c=
 -o =

tabulate.o
f77 -g -fpe3 -c uncmin.f -o uncmin.o
f77 -g -fpe3 -c zeroin.f -o zeroin.o
ar cr libappl.a S_compat.o approx.o bakslv.o binning.o  ch2inv.o chol.o =

cpoly.o cumsum.o distance.o dpoco.o dpodi.o dpofa.o dposl.o dqrdc.o dqrdc=
2.o =

dqrls.o dqrsl.o dqrutl.o dsvdc.o dtrco.o dtrsl.o eigen.o fortran.o fft.o =

fmin.o lminfl.o loglin.o lowess.o machar.o massdist.o pretty.o pythag.o =

rowsum.o splines.o stem.o strsignif.o tabulate.o uncmin.o zeroin.o
ranlib libappl.a
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/a=
ppl'
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
nmath'
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c mlutils.c =
-o =

mlutils.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c d1mach.c -=
o =

d1mach.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c i1mach.c -=
o =

i1mach.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fmax2.c -o=
 =

fmax2.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fmin2.c -o=
 =

fmin2.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fmod.c -o =
fmod.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fprec.c -o=
 =

fprec.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fround.c -=
o =

fround.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c ftrunc.c -=
o =

ftrunc.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c sign.c -o =
sign.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fsign.c -o=
 =

fsign.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fsquare.c =
-o =

fsquare.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fcube.c -o=
 =

fcube.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c imax2.c -o=
 =

imax2.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c imin2.c -o=
 =

imin2.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c chebyshev.=
c -o =

chebyshev.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c logrelerr.=
c -o =

logrelerr.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c lgammacor.=
c -o =

lgammacor.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c gammalims.=
c -o =

gammalims.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c gamma.c -o=
 =

gamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c lgamma.c -=
o =

lgamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c gamma_cody=
=2Ec -o =

gamma_cody.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c beta.c -o =
beta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c lbeta.c -o=
 =

lbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c polygamma.=
c -o =

polygamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c bessel_i.c=
 -o =

bessel_i.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c bessel_j.c=
 -o =

bessel_j.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c bessel_k.c=
 -o =

bessel_k.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c bessel_y.c=
 -o =

bessel_y.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c choose.c -=
o =

choose.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c snorm.c -o=
 =

snorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c sunif.c -o=
 =

sunif.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c sexp.c -o =
sexp.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dgamma.c -=
o =

dgamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pgamma.c -=
o =

pgamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qgamma.c -=
o =

qgamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rgamma.c -=
o =

rgamma.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dbeta.c -o=
 =

dbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pbeta.c -o=
 =

pbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qbeta.c -o=
 =

qbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rbeta.c -o=
 =

rbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dunif.c -o=
 =

dunif.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c punif.c -o=
 =

punif.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qunif.c -o=
 =

qunif.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c runif.c -o=
 =

runif.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dnorm.c -o=
 =

dnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pnorm.c -o=
 =

pnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qnorm.c -o=
 =

qnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rnorm.c -o=
 =

rnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dlnorm.c -=
o =

dlnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c plnorm.c -=
o =

plnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qlnorm.c -=
o =

qlnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rlnorm.c -=
o =

rlnorm.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c df.c -o df=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pf.c -o pf=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qf.c -o qf=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rf.c -o rf=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dt.c -o dt=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pt.c -o pt=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qt.c -o qt=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rt.c -o rt=
=2Eo
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dchisq.c -=
o =

dchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pchisq.c -=
o =

pchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qchisq.c -=
o =

qchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rchisq.c -=
o =

rchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dbinom.c -=
o =

dbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pbinom.c -=
o =

pbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qbinom.c -=
o =

qbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rbinom.c -=
o =

rbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dcauchy.c =
-o =

dcauchy.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pcauchy.c =
-o =

pcauchy.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qcauchy.c =
-o =

qcauchy.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rcauchy.c =
-o =

rcauchy.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dexp.c -o =
dexp.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pexp.c -o =
pexp.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qexp.c -o =
qexp.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rexp.c -o =
rexp.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dgeom.c -o=
 =

dgeom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pgeom.c -o=
 =

pgeom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qgeom.c -o=
 =

qgeom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rgeom.c -o=
 =

rgeom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dhyper.c -=
o =

dhyper.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c phyper.c -=
o =

phyper.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qhyper.c -=
o =

qhyper.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rhyper.c -=
o =

rhyper.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dnbinom.c =
-o =

dnbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pnbinom.c =
-o =

pnbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qnbinom.c =
-o =

qnbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rnbinom.c =
-o =

rnbinom.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dpois.c -o=
 =

dpois.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c ppois.c -o=
 =

ppois.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qpois.c -o=
 =

qpois.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rpois.c -o=
 =

rpois.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dweibull.c=
 -o =

dweibull.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pweibull.c=
 -o =

pweibull.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qweibull.c=
 -o =

qweibull.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rweibull.c=
 -o =

rweibull.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dlogis.c -=
o =

dlogis.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c plogis.c -=
o =

plogis.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qlogis.c -=
o =

qlogis.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rlogis.c -=
o =

rlogis.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dnchisq.c =
-o =

dnchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pnchisq.c =
-o =

pnchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qnchisq.c =
-o =

qnchisq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dnbeta.c -=
o =

dnbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pnbeta.c -=
o =

pnbeta.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pnf.c -o p=
nf.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pnt.c -o p=
nt.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c ptukey.c -=
o =

ptukey.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qtukey.c -=
o =

qtukey.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dwilcox.c =
-o =

dwilcox.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c pwilcox.c =
-o =

pwilcox.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qwilcox.c =
-o =

qwilcox.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rwilcox.c =
-o =

rwilcox.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dsignrank.=
c -o =

dsignrank.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c psignrank.=
c -o =

psignrank.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c qsignrank.=
c -o =

qsignrank.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c rsignrank.=
c -o =

rsignrank.o
ar cr libmath.a mlutils.o d1mach.o i1mach.o fmax2.o fmin2.o fmod.o fprec.=
o =

fround.o ftrunc.o sign.o fsign.o fsquare.o fcube.o imax2.o imin2.o chebys=
hev.o =

logrelerr.o lgammacor.o gammalims.o gamma.o lgamma.o gamma_cody.o beta.o =

lbeta.o polygamma.o bessel_i.o bessel_j.o bessel_k.o bessel_y.o choose.o =

snorm.o sunif.o sexp.o dgamma.o pgamma.o qgamma.o rgamma.o dbeta.o pbeta.=
o =

qbeta.o rbeta.o dunif.o punif.o qunif.o runif.o dnorm.o pnorm.o qnorm.o =

rnorm.o dlnorm.o plnorm.o qlnorm.o rlnorm.o df.o pf.o qf.o rf.o dt.o pt.o=
 qt.o =

rt.o dchisq.o pchisq.o qchisq.o rchisq.o dbinom.o pbinom.o qbinom.o rbino=
m.o =

dcauchy.o pcauchy.o qcauchy.o rcauchy.o dexp.o pexp.o qexp.o rexp.o dgeom=
=2Eo =

pgeom.o qgeom.o rgeom.o dhyper.o phyper.o qhyper.o rhyper.o dnbinom.o =

pnbinom.o qnbinom.o rnbinom.o dpois.o ppois.o qpois.o rpois.o dweibull.o =

pweibull.o qweibull.o rweibull.o dlogis.o plogis.o qlogis.o rlogis.o dnch=
isq.o =

pnchisq.o qnchisq.o dnbeta.o pnbeta.o pnf.o pnt.o ptukey.o qtukey.o dwilc=
ox.o =

pwilcox.o qwilcox.o rwilcox.o dsignrank.o psignrank.o qsignrank.o rsignra=
nk.o
ranlib libmath.a
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/n=
math'
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
unix'
gcc -ieee_with_inexact -g  -I../include -I../../src/include  -c dataentry=
=2Ec
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c devPS.c -o=
 =

devPS.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c devPicTeX.=
c -o =

devPicTeX.o
gcc -ieee_with_inexact -g  -I../include -I../../src/include  -c devX11.c
(cd ../include; make FFTab.h)
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
includ
e'
make[3]: `FFTab.h' is up to date.
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/i=
nclude
'
(cd ../include; make FFDecl.h)
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
includ
e'
make[3]: `FFDecl.h' is up to date.
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/i=
nclude
'
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dynload.c =
-o =

dynload.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c edit.c -o =
edit.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fileio.c -=
o =

fileio.o
gcc -ieee_with_inexact -g  -I../include -I../../src/include  -c rotated.c=

gcc -ieee_with_inexact -g -I../include -I../../src/include  -c system.c -=
o =

system.o
ar cr libunix.a dataentry.o devPS.o devPicTeX.o devX11.o dynload.o edit.o=
 =

fileio.o rotated.o system.o
ranlib libunix.a
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/u=
nix'
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
main'
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c arithmetic=
=2Ec -o =

arithmetic.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c array.c -o=
 =

array.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c attrib.c -=
o =

attrib.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c bind.c -o =
bind.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c builtin.c =
-o =

builtin.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c character.=
c -o =

character.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c coerce.c -=
o =

coerce.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c colors.c -=
o =

colors.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c complex.c =
-o =

complex.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c context.c =
-o =

context.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c cov.c -o c=
ov.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c cum.c -o c=
um.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c debug.c -o=
 =

debug.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c deparse.c =
-o =

deparse.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c deriv.c -o=
 =

deriv.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c devices.c =
-o =

devices.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dotcode.c =
-o =

dotcode.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c dstruct.c =
-o =

dstruct.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c duplicate.=
c -o =

duplicate.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c envir.c -o=
 =

envir.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c errors.c -=
o =

errors.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c eval.c -o =
eval.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c format.c -=
o =

format.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c fourier.c =
-o =

fourier.o
yacc gram.y
mv y.tab.c gram.c
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c gram.c -o =
gram.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c graphics.c=
 -o =

graphics.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c iosupport.=
c -o =

iosupport.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c list.c -o =
list.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c logic.c -o=
 =

logic.o

[1]    Done                          netscape -install
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c main.c -o =
main.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c match.c -o=
 =

match.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c memory.c -=
o =

memory.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c model.c -o=
 =

model.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c names.c -o=
 =

names.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c objects.c =
-o =

objects.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c optimize.c=
 -o =

optimize.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c options.c =
-o =

options.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c par.c -o p=
ar.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c paste.c -o=
 =

paste.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c plot.c -o =
plot.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c plot3d.c -=
o =

plot3d.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c plotmath.c=
 -o =

plotmath.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c print.c -o=
 =

print.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c printarray=
=2Ec -o =

printarray.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c printvecto=
r.c =

-o printvector.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c printutils=
=2Ec -o =

printutils.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c random.c -=
o =

random.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c relop.c -o=
 =

relop.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c saveload.c=
 -o =

saveload.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c scan.c -o =
scan.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c seq.c -o s=
eq.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c sort.c -o =
sort.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c source.c -=
o =

source.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c split.c -o=
 =

split.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c subassign.=
c -o =

subassign.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c subscript.=
c -o =

subscript.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c subset.c -=
o =

subset.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c summary.c =
-o =

summary.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c unique.c -=
o =

unique.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c util.c -o =
util.o
gcc -ieee_with_inexact -g -I../include -I../../src/include  -c version.c =
-o =

version.o
f77 -g -nofor_main -fpe3   -o ../../bin/R.binary arithmetic.o array.o att=
rib.o =

bind.o builtin.o character.o coerce.o colors.o complex.o context.o cov.o =
cum.o =

debug.o deparse.o deriv.o devices.o dotcode.o dstruct.o duplicate.o envir=
=2Eo =

errors.o eval.o format.o fourier.o gram.o graphics.o iosupport.o list.o =

logic.o main.o match.o memory.o model.o names.o objects.o optimize.o opti=
ons.o =

par.o paste.o plot.o plot3d.o plotmath.o print.o printarray.o printvector=
=2Eo =

printutils.o random.o relop.o saveload.o scan.o seq.o sort.o source.o spl=
it.o =

subassign.o subscript.o subset.o summary.o unique.o util.o version.o =

=2E./unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE =

-L/local/X11R5/lib -lX11 -ldnet_stub -ldxml  -ltermcap -lm
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/m=
ain'
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
script
s'
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/s=
cripts
'
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/base'
Building R base package
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/base'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/eda'
make[4]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/eda/src'
gcc -ieee_with_inexact -g  -I../../../../include -c line.c -o line.o
gcc -ieee_with_inexact -g  -I../../../../include -c smooth.c -o smooth.o
ld -shared -lm -o eda.so line.o smooth.o
ld:
Warning: Unresolved:
floor
ceil
rsort
__exc_add_pc_range_table
__exc_add_gp_range
__exc_remove_pc_range_table
__exc_remove_gp_range
make[4]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/eda/src'
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/eda'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/lqs'
make[4]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/lqs/src'
gcc -ieee_with_inexact -g  -I../../../../include -c lqs.c -o lqs.o
ld -shared -lm -o lqs.so lqs.o
ld:
Warning: Unresolved:
unif_rand
calloc
free
R_PosInf
seed_in
dqrdc2_
dqrsl_
rsort
rPsort
sqrt
seed_out
log
__exc_add_pc_range_table
__exc_add_gp_range
__exc_remove_pc_range_table
__exc_remove_gp_range
make[4]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/lqs/src'
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/lqs'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/modreg'
make[4]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/modreg/src'
f77 -g -fpe3 -fpic -c bsplvd.f -o bsplvd.o
f77 -g -fpe3 -fpic -c bvalue.f -o bvalue.o
f77 -g -fpe3 -fpic -c bvalus.f -o bvalus.o
f77 -g -fpe3 -fpic -c dpbfa.f -o dpbfa.o
f77 -g -fpe3 -fpic -c dpbsl.f -o dpbsl.o
gcc -ieee_with_inexact -g  -I../../../../include -c ksmooth.c -o ksmooth.=
o
gcc -ieee_with_inexact -g  -I../../../../include -c loessc.c -o loessc.o
f77 -g -fpe3 -fpic -c loessf.f -o loessf.o
f77 -g -fpe3 -fpic -c ppr.f -o ppr.o
f77 -g -fpe3 -fpic -c qsbart.f -o qsbart.o
f77 -g -fpe3 -fpic -c sbart.f -o sbart.o
fort: Info: sbart.f, line 164: No path to this statement
23012 continue
^
f77 -g -fpe3 -fpic -c sgram.f -o sgram.o
f77 -g -fpe3 -fpic -c sinerp.f -o sinerp.o
f77 -g -fpe3 -fpic -c sslvrg.f -o sslvrg.o
f77 -g -fpe3 -fpic -c stxwx.f -o stxwx.o
=2E./../../../bin/R SHLIB -o modreg.so bsplvd.o bvalue.o bvalus.o dpbfa.o=
 =

dpbsl.o ksmooth.o loessc.o loessf.o ppr.o qsbart.o sbart.o sgram.o sinerp=
=2Eo =

sslvrg.o stxwx.o
make[5]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/modreg/src'
ld -shared -lm -o modreg.so bsplvd.o bvalue.o bvalus.o dpbfa.o dpbsl.o =

ksmooth.o loessc.o loessf.o ppr.o qsbart.o sbart.o sgram.o sinerp.o sslvr=
g.o =

stxwx.o -ldxml
ld:
Warning: Unresolved:
_OtsDivide32
R_NaReal
sprintf
warning
strcmp
calloc
free
strncpy
strcat
d1mach_
dqrdc_
dqrsl_
dsvdc_
intpr_
dblepr_
__exc_add_pc_range_table
__exc_add_gp_range
__exc_remove_pc_range_table
__exc_remove_gp_range
make[5]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/modreg/src'
make[4]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/modreg/src'
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/modreg'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/mva'
make[4]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/mva/src'
gcc -ieee_with_inexact -g  -I../../../../include -c dblcen.c -o dblcen.o
f77 -g -fpe3 -fpic -c hclust.f -o hclust.o
f77 -g -fpe3 -fpic -c kmns.f -o kmns.o
ld -shared -lm -o mva.so dblcen.o hclust.o kmns.o
ld:
Warning: Unresolved:
_OtsDivide32
__exc_add_pc_range_table
__exc_add_gp_range
__exc_remove_pc_range_table
__exc_remove_gp_range
make[4]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/mva/src'
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/mva'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/stepfun'
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/stepfun'
make[3]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y/profile'
Building system startup profile
make[3]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
/profile'
make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
'
make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src'
You should `make docs' now ...
make[1]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y'
Building ALL documentation (help, HTML, LaTeX, R-Examples)
make[2]: Entering directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/=
librar
y'
         >>> Building help pages for package `base'
      Formats: text html latex example =

         >>> Building help pages for package `eda'
      Formats: text html latex example =

         >>> Building help pages for package `lqs'
      Formats: text html latex example =

         >>> Building help pages for package `modreg'
      Formats: text html latex example =

         >>> Building help pages for package `mva'
      Formats: text html latex example =

         >>> Building help pages for package `stepfun'
      Formats: text html latex example =

make[2]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary
'
make[1]: Leaving directory `/mn/vega/astro/local/src/rstat/R-0.63.3/src/l=
ibrary

--==_Exmh_981436288450--



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Mon May  3 18:40:23 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Mon, 3 May 1999 19:40:23 +0200 (MET DST)
Subject: parse error in terms (PR#184)
Message-ID: <199905031740.TAA26328@pubhealth.ku.dk>

If I use (0.64.0 in intel RH5.2)

abcdefg <- list()
abcdefg$abcdefg$abcdefg <- matrix(rpois(20,5),ncol=5)
terms(~(abcdefg$abcdefg$abcdefg[,1]==1)|(abcdefg$abcdefg$abcdefg[,3]==1)|
	(abcdefg$abcdefg$abcdefg[,5]==1))

I get a parse error. This seems to be connected to the length of the
names or of the expression, as I do not get an error if the list and
its elements are called a: a$a$a

(Please do not ask why I would want to do such a thing!)
  Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon May  3 18:55:07 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Mon, 3 May 1999 19:55:07 +0200 (MET DST)
Subject: parse error in terms (PR#184)
Message-ID: <199905031755.TAA26383@pubhealth.ku.dk>

On Mon, 3 May 1999 jlindsey@alpha.luc.ac.be wrote:

> If I use (0.64.0 in intel RH5.2)
> 
> abcdefg <- list()
> abcdefg$abcdefg$abcdefg <- matrix(rpois(20,5),ncol=5)
> terms(~(abcdefg$abcdefg$abcdefg[,1]==1)|(abcdefg$abcdefg$abcdefg[,3]==1)|
> 	(abcdefg$abcdefg$abcdefg[,5]==1))
> 
> I get a parse error. This seems to be connected to the length of the
> names or of the expression, as I do not get an error if the list and
> its elements are called a: a$a$a

This is fixed for 0.64.1.  terms.formula() used deparse with a line length
 of 60 characters. It now uses the maximum allowable length (currently 500
characters).

The survival5 test suite comes with a real example of why 60 characters is
not long enough.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue May  4 14:36:19 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 04 May 1999 09:36:19 -0400
Subject: rnorm
Message-ID: <372EF7D3.9F685535@bank-banque-canada.ca>

Brian

I've been playing a bit with the Wichmann-Hill RNG. I would prefer to have
normally distributed random numbers and I think I have things generally worked
out to use Wichmann-Hill and then Box-Muller. In the process, I was looking at
R's rnorm.c, but could not figure out what transformation is used in R to
convert uniform rv's to normal rv's. Do you know? It looks like there are
options in the code, but I couldn't figure out how an option is chosen.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue May  4 15:07:25 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 4 May 1999 15:07:25 +0100 (BST)
Subject: rnorm
Message-ID: <199905041407.PAA07212@toucan.stats.ox.ac.uk>


> Date: Tue, 04 May 1999 09:36:19 -0400
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> To: Brian Ripley <ripley@stats.ox.ac.uk>
> CC: R-devel <R-devel@stat.math.ethz.ch>
> Subject: rnorm
> 
> Brian
> 
> I've been playing a bit with the Wichmann-Hill RNG. I would prefer to have
> normally distributed random numbers and I think I have things generally worked
> out to use Wichmann-Hill and then Box-Muller. In the process, I was looking at
> R's rnorm.c, but could not figure out what transformation is used in R to
> convert uniform rv's to normal rv's. Do you know? It looks like there are
> options in the code, but I couldn't figure out how an option is chosen.
> 
> Paul
> 

Well, I hadn't looked until recently. I find all of that section of code
somewhat less than transparent (and spread across directories, let alone
files).

rnorm.c says

N01type N01_kind = KINDERMAN_RAMAGE;

so that is what you get by default. You can change it from C code as that
is an exported variable.  But the intended mechanism appears to be that it is
part of the choice of RNG in RNGkind, except that is it unused. See 
(nmath/sunif.c)

RNGTAB RNG_Table[] =
{
/* kind Nkind     name    is_seeded seed-length i1_s, *seed-vec */
    { 0, 0, "Wichmann-Hill",    0,      3,      123,    dummy},
    { 1, 0, "Marsaglia-MultiCarry",0,   2,      123,    dummy},
    { 2, 0, "Super-Duper",      0,      2,      123,    dummy},
    { 3, 0, "Mersenne-Twister", 0,  1+624,      123,    dummy},
    { 4, 0, "Rand",             0,      2,      -1,     dummy},
};

where Nkind is of N01type. I think Martin Maechler will need to explain
what he intended here, as well as why he did not use the enumeration
constants for Nkind in this table.  And

head src/include/Random.h 
/* only used by ../main/random.c  & ../nmath/sunif.c
 */

appears to be wrong: it is used in ../nmath/snorm.c too.

Martin: as a general policy I would prefer header files used in a few
places to be explicit, not hidden through Mathlib.h.  The way it is
currently done hides dependencies, as in the missing dependence of snorm.o on
$(top_srcdir)/src/include/Random.h.

[I have committed the dependencies in brief spell while Auckland was 
contactable.]

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May  4 23:27:23 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 5 May 1999 00:27:23 +0200 (MET DST)
Subject: [R] R_problem_buf in the S.h files & lists in .C (PR#185)
Message-ID: <199905042227.AAA05185@pubhealth.ku.dk>

Duncan Temple Lang <duncan@rice.research.bell-labs.com> writes:

> I didn't see any mention of this in the material on CRAN.  The two S.h
> files define R_problem_buf as a real symbol rather than simply
> declaring its existence. As a result, a shared library that links two
> or more files that include this will get duplicate symbol complaints.
> Since it is not defined elsewhere in the code, someone has to define it.

[I'll file this as a bug report and take it off of R-help]

Yes. This game is commonly played by the 

#ifdef __MAIN__
#define extern
#endif

and including the .h files in main.c. However, R doesn use that trick
(not even for the declarations in Defn.h) for some reason that I don't
quite see. A quick workaround could be to define the buffer in
S_compat.c. 

> A secondly thing is the documentation for .C() and company. It omits
> what type list() objects have when passed to a C routine. It should
> read void *, which is actually a SEXP * in this case. (I know, I
> should be using .External but I am trying to keep the code for the
> different S's and R's together until I have to abandon things.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May  5 17:31:59 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 05 May 1999 12:31:59 -0400
Subject: RNG  R/Splus compatibility
Message-ID: <3730727E.1ACB4D6D@bank-banque-canada.ca>

Starting with example Wichmann-Hill code from Brian Ripley I have been playing
with a set of programs for getting the same random sequences from R and Splus. A
copy is included below along with a test (which works in Solaris with R and
Splus 3.3).

The approach is somewhat different from the usual problems on this list as I am
trying to get the same results from Splus as I get from R. However, there are a
couple of R issues:

  - There  is a small change to RNGkind to allow  "default" (currently
Wichmann-Hill but could change from time to time).

 -The strategy for specifying the transformation to get rnorm results should be
examined, as I think it should be put into R and extended for other random
number transformations.

Paul Gilbert
________

# First define these 3 functions appropriately if you don't have them already:
# is.S <- function(){T or F}
# is.R <- function(){T or F}
# is.Splus <- function(){T or F}

if (is.S())
  {
    RNGkind <- function(kind=NULL)
      {# With a null argument this returns the current kind.
       # kind = "default" resets the RNG to the Splus default.
       # Splus does not allow arbitrary setting of .Random.seed so
       #     .RandomSeed is used. The existence of .RandomSeed is
       #     used to indicate whether an alternate RNG is used and the
       #     first element of .RandomSeed indicates the generator.
       if ( is.null(kind))
         {if(exists(".RandomSeed")) kind <- c("Wichmann-Hill")[1+.RandomSeed[1]]

          else                      kind <- "default"
         }
       else
         {# set the RNG kind
          if (kind == "default")
            {if(exists(".RandomSeed")) remove(".RandomSeed", where = 1) }
          else if (kind == "Wichmann-Hill")
             assign(".RandomSeed", c(0, as.integer(100000*runif(3))), where=1)
          else stop("Only Wichmann-Hill, default or NULL supported for kind.")
         }
       kind
      }


    if (!exists("set.seed.Splus")) set.seed.Splus <- set.seed

    set.seed <- function(seed=NULL)
      {# with a null argument this also serves as get.seed.
       kind <- RNGkind()
       if ( is.null(seed))
         {if (kind == "default") seed <-.Random.seed
          else                   seed <-.RandomSeed
         }
       else
         {# set seed
          if (kind == "default")
             {if (1==length(seed)) set.seed.Splus(seed)
              else                 assign(".Random.seed", seed, where=1)
             }
          else if (kind == "Wichmann-Hill")
             {if (3 == length(seed)) seed <- c(0,seed)
              if (0 != seed[1])
                         stop("seed[1] should be 0 for Wichmann-Hill RNG.")
              if (4 != length(seed))
                 stop("seed length is not consistent with kind Wichmann-Hill.")
              assign(".RandomSeed", seed, where=1)
             }
          else stop("seed does not match RNG kind.")
         }
       seed
      }

    set.RNORMtransform <- function(rnorm=NULL)
      {# with a null argument this returns setting
       if (is.null(rnorm))
          {if(exists(".RNORMtransform", where=1)) rnorm <- .RNORMtransform
           else                                   rnorm <- "default"
          }
       else
          {if (rnorm == "Box-Muller") assign(".RNORMtransform", rnorm, where=1)
           else if (rnorm == "default")
              {if(exists(".RNORMtransform", where=1))
                  remove(".RNORMtransform", where=1)}
           else stop("Only Box-Muller, default or NULL supported for rnorm.")
          }
       rnorm
      }

  }   # end of if is.S

if (is.R())
  {

    # the only change in RNGkind is to allow "default" (for "Wichmann-Hill")
    if (!exists("RNGkind.R")) RNGkind.R <- RNGkind
    RNGkind <- function (kind = NULL)
      {if ((!is.null(kind)) && (kind == "default")) kind <- "Wichmann-Hill"
       RNGkind.R(kind=kind)
      }

    set.seed <- function(seed=NULL)
      {# with a null argument this also serves as get.seed.
       kind <- RNGkind()
       if ( is.null(seed))
         {if (!exists(".Random.seed")) z <- runif(1) # initializes seed
          seed <-.Random.seed
         }
       else
         {# set seed
          if (kind == "Wichmann-Hill")
             {if (3 == length(seed)) seed <- c(0,seed)
              if (0 != seed[1])
                         stop("seed[1] should be 0 for Wichmann-Hill RNG.")
              if (4 != length(seed))
                 stop("seed length is not consistent with kind Wichmann-Hill.")
              assign(".Random.seed", seed, envir=.GlobalEnv)
             }
           else
              {# seed <- c(kind,seed) ????
               # should do some other checks or are they done elsewhere?
               assign(".Random.seed", seed, envir=.GlobalEnv)
              }
           # else stop("seed does not match RNG kind.")
          }
       seed
      }

    set.RNORMtransform <- function(rnorm=NULL)
      {# with a null argument this returns setting
       if (is.null(rnorm))
          {if(exists(".RNORMtransform", where=1)) rnorm <- .RNORMtransform
           else                                   rnorm <- "default"
          }
       else
          {if (rnorm == "Box-Muller")
                assign(".RNORMtransform", rnorm, envir=.GlobalEnv)
           else if (rnorm == "default")
              {if(exists(".RNORMtransform", where=1))
                  remove(".RNORMtransform", pos=1)}
           else stop("Only Box-Muller, default or NULL supported for rnorm.")
          }
       rnorm
      }

  }  # end of if is.R


# in both Splus and R:

    set.RNG <- function(kind=NULL, seed=NULL, rnorm=NULL)
      {# with a null argument this also serves as get.RNG so it is possible to
       # old <- set.RNG(...)
       # on.exit(set.RNG(old))
       # set.RNG("default")  can affect both kind and seed, but not rnorm
       if (is.list(kind))
         {kind  <- RNGkind(kind$kind)
          seed  <- set.seed(kind$seed)
          rnorm <- set.RNORMtransform(kind$rnorm)
         }
       else
         {kind  <- RNGkind(kind)
          seed  <- set.seed(seed)
          rnorm <- set.RNORMtransform(rnorm)
         }
       list(kind=kind, seed=seed, rnorm=rnorm)
      }

    if (!exists("runif.default")) runif.default <- runif

    runif <- function(n, min=0, max=1, compiled=is.R())
       {# This typically just calls runif.default, but allows using other
        # RNGs to generate the same sequence in R and S.
        # eg: set.seed(seed=c(1:3), kind="Wichmann-Hill")
        #     runif(10)

        if(RNGkind() == "default")  return(runif.default(n, min=min, max=max))
        else if(compiled)           return(runif.default(n, min=min, max=max))
        else seed <- set.seed() # returns the setting
        kind <-  c("Wichmann-Hill")[1+seed[1]]
        if(kind == "Wichmann-Hill")
           {out <- numeric(n)
            if (seed[1] != 0) stop("seed setting is not consistent with RNG.")
            x <- seed[2]; y <- seed[3]; z <- seed[4]
            for(i in 1:length(out))
               {x <- (171*x) %% 30269
                y <- (172*y) %% 30307
                z <- (170*z) %% 30323
                out[i] <- (x/30269 + y/30307 + z/30323) %% 1.0
               }
            set.seed( c(0, x,y,z))
           }
        else stop("runif RNG kind not supported.")
        out
       }


if (!exists("rnorm.default")) rnorm.default <- rnorm

rnorm <- function(n, mean=0, sd=1, compiled=F)
   {# This typically just calls rnorm.default, but provides the possibility of
    # using "Wichmann-Hill" to generate the same runif sequence in R and S and
    #    then generate the same normally distributed numbers.
    # eg: set.seed(seed=c(1:3), kind="Wichmann-Hill", rnorm="Box-Muller")
    #     rnorm(10)

    transf <- set.RNORMtransform()
    if(transf == "default") return(rnorm.default(n, mean=mean, sd=sd))
    else if(compiled)       return(rnorm.default(n, mean=mean, sd=sd))
    else if(transf == "Box-Muller")
      {out <- runif(n + n%%2)
       out <- matrix(out, 2, length(out)/2)
       out <- c( sqrt(log(1/out[1,])) * sin(2*pi*out[2,]),
                 sqrt(log(1/out[1,])) * cos(2*pi*out[2,]))
       if (1 == n%%2) out <- out[-length(out)] #drop last point if n is odd
      }
    else stop("normal rv transformation technique not supported.")

    mean + out*sd
   }

#########################################################

#   test function

#########################################################


random.number.test <- function()
 {cat("Random number generator tests ...")
  if (is.R())
     {test.seed<- c( 979, 1479, 1542) # values from 0.49 beta
      test.valueU <-c(5.693354055333957e-01,1.051357751852140e-01,
          5.846933178718317e-02, 7.537960906527452e-02, 7.043734921992200e-01)
      test.valueN <-c(-5.559389931781886e-01,
                   -1.902431069568611e+00,  1.524595894866778e+00,
                   -7.863494805034426e-01, 1.328128164898773e-01)
     }
  if (is.Splus())
     {test.seed<- c(37, 39, 39, 4, 7, 2, 27, 58, 38, 15, 32, 2)
      test.valueU <- c(0.4299328043125570, 0.3092006836086512,
            0.5808096211403608, 0.3061958812177181, 0.8137333435006440)
      test.valueN <- c( -0.7613318231781665, -0.5724360196433543,
            0.8536399448225964, -0.2269096022522968, -0.8126790170570223)
     }

  old.seed <- set.RNG(kind="default", seed=test.seed, rnorm="default")
  on.exit(set.RNG(old.seed))

  ok <- TRUE
  if (1e-14 < max(abs(runif(5)-test.valueU)))
    {warning("The default runif number generator has been changed.")
     ok <- FALSE
    }

  set.RNG(kind="default", seed=test.seed, rnorm="default")

  if (1e-14  < max(abs(rnorm(5)-test.valueN)))
    {warning("The default rnorm number generator has been changed.")
     ok <- FALSE
    }

  set.RNG(kind="Wichmann-Hill", seed=c(979,1479,1542), rnorm="Box-Muller")
  if (1e-14 < max(abs(runif(5) -
      c(0.56933540553339546, 0.10513577518521355, 0.05846933178718317,
        0.07537960906527452, 0.70437349219921996))))
    {warning("The Wichmann-Hill runif number generator has been changed.")
     ok <- FALSE
    }

  set.RNG(kind="Wichmann-Hill", seed=c(979,1479,1542), rnorm="Box-Muller")
  if (1e-14 < max(abs(rnorm(5) -
      c(0.4605069059114530, 0.7685565310963474, -0.3737680932387061,
        0.5926372779538560, 1.4995245125275518))))
    {warning("The Box-Muller rnorm number generator has been changed.")
     ok <- FALSE
    }

  if (ok) cat("ok\n")
  else    cat("failed!\n")
  invisible(ok)
 }




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu May  6 15:15:44 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 06 May 1999 10:15:44 -0400
Subject: RNG  R/Splus compatibility
References: <3730727E.1ACB4D6D@bank-banque-canada.ca>
Message-ID: <3731A410.4AF78E20@bank-banque-canada.ca>

Here is a correction to one of the functions I posted yesterday, which did not
work correctly when kind was a list. With a null argument this function returns
current RNG and seed information. Otherwise, it sets the values and returns the
new settings. Thus, in a function one might

  old <- set.RNG()
  on.exit(set.RNG(old))
  effective <- set.RNG(new)   #(= new)

Another approach would be that used by par() (i.e. return the old settings) so
one would

  old <- set.RNG(new)
  on.exit(set.RNG(old))
  effective <- set.RNG()  #(= new)

Does anyone have thoughts on this?

Paul Gilbert
_________

    set.RNG <- function(kind=NULL, seed=NULL, rnorm=NULL)
      {# with a null argument this also serves as get.RNG so it is possible to
       # old <- set.RNG()
       # on.exit(set.RNG(old))
       # set.RNG("default")  can affect both kind and seed, but not rnorm
       if (is.list(kind))
         list(kind=RNGkind(kind$kind), seed=set.seed(kind$seed),
              rnorm= set.RNORMtransform(kind$rnorm) )
       else
         list(kind=RNGkind(kind), seed=set.seed(seed),
              rnorm=set.RNORMtransform(rnorm) )
      }


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Fri May  7 06:15:03 1999
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri, 7 May 1999 07:15:03 +0200
Subject: Bug list summary (automatic post)
Message-ID: <199905070515.HAA24818@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100

Directory:  Add-ons

* PR# 137 *
Subject: funfits
From: "Alvaro A. Novo" <novo@uiuc.edu>
Date: Tue, 9 Mar 1999 22:24:54 -0600
* PR# 164 *
Subject: Re: [R] repeated measurements libraries v0.4
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 11 Apr 1999 22:52:34 +0100 (BST)

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100

Directory:  Documentation

* PR# 146 *
Subject: nlm docs
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 24 Mar 1999 15:48:41 +0100 (MET)

Directory:  Graphics

* PR# 38 *
Subject: possible bugs
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Sun, 6 Sep 1998 15:59:34 -0400 (EDT)
--ylim problem which appears solved
--Postscript overflow still with us (22feb99)
* PR# 61 *
Subject: points(...,  cex = ..)  is pretty wrong...
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 2 Nov 1998 19:15:06 +0100
--Symbols getting decentered when too large cex for X. Still there 22feb99  
* PR# 66 *
Subject: Bug with bounding box?
From: johnp@tip.csiro.au
Date: Thu, 3 Dec 1998 02:15:38 +0100
--Yes, this appears to have x/y reversed. The supplied example gives 
--%%Orientation: Landscape
--%%BoundingBox: 18 18 824 577 
--but the convention is to rotate the paper but leave the coordinate system.
* PR# 69 *
Subject: Some graphics bugs
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 04 Dec 1998 11:42:50 -0000 ()
Date: 04-Dec-98
--Various anomalies with text size and alignment. 2B appears to be solved. The 
--rest is still there (22feb99)
* PR# 79 *
Subject: apology: text(locator(),"sometext") works
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Tue, 15 Dec 1998 19:45:29 -0500 (EST)
--Clipping discrepancy x11/PS
* PR# 106 *
Subject: border-arg. in persp
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
Date: Fri, 29 Jan 1999 11:12:39 +0100
--No effect of arg. Still here 22feb99. Segfault with border=0 seems gone now. 
* PR# 114 *
Subject: PostScript Level 1/2 bug
From: ben@eno.princeton.edu
Date: Mon, 8 Feb 1999 00:07:20 +0100
--Not sure whether this is really PS lev 1/2 issue.
--/Font5 /Symbol findfont definefont
--(missing scalefont?)
* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 123 *
Subject: Text in plot
From: Ennapadam Venkatraman <venkat@biosta.mskcc.org>
Date: Thu, 18 Feb 1999 13:05:37 -0500
--Multiline text not working
* PR# 130 *
Subject: lty=0 -- shouldn't it give an invisible line?
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 28 Feb 1999 21:45:43 +0100
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
* PR# 153 *
Subject: image + x11
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
Date: Wed, 31 Mar 1999 14:09:53 +0200

Directory:  In-Out

* PR# 125 *
Subject: scan rejects complex
From: John.Peters@tip.csiro.au (John Peters)
Date: Mon, 22 Feb 1999 10:08:14 +1100 (EST)
* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM

Directory:  Installation

* PR# 95 *
Subject: patch to 63.2
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 15 Jan 1999 11:00:25 +0100 (MET)
--An incident where the 0.63.2 patches didn't take. So far the only one. 
--Maybe caused by patching unclean sources?
* PR# 165 *
Subject: make check
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 13 Apr 1999 12:03:42 +0200 (CEST)

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 118 *
Subject: Function parsing
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Wed, 10 Feb 1999 13:42:01 +0000 (GMT)
--comment placement.
* PR# 166 *
Subject: outer fails with group generic operations on factors
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Tue, 13 Apr 1999 18:28:53 +0100 (BST)
* PR# 167 *
Subject: R's UseMethod() does not dispatch on changed class()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 14 Apr 1999 11:22:10 +0200
--Did this get resolved into the "S has the bug, 
--one shouldn't try that" category?

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

* PR# 121 *
Subject:  model.frame mangles time series 
From: Peter Dalgaard BSA <pd@biostat.ku.dk>
Date: Thu, 18 Feb 1999 15:47:24 +0100
--Subset in C code + attributes = mess
--Switch to interpreted ("[")

Directory:  Startup

* PR# 21 *
Subject: Restoring large image files
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 21 Aug 1998 13:29:16 -0000 ()

Directory:  System-specific

* PR# 145 *
Subject: R-0.63.3 package on IRIX 6.5 machine
From: Jayshree Sarma <jsarma@cs.gmu.edu>
Date: Tue, 23 Mar 1999 16:54:20 -0500 (EST)
* PR# 163 *
Subject: IRIX compile
From: mtim@farm.ecs.umass.edu
Date: Sat, 10 Apr 1999 19:35:43 +0200

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 174 *
Subject:  do.call() mangles expressions in arguments 
From: Peter Dalgaard BSA <pd@biostat.ku.dk>
Date: Wed, 21 Apr 1999 19:39:53 +0200
* PR# 177 *
Subject: R won't compile on Redhat 5.2
From: pgutwin@us.ibm.com
Date: Fri, 23 Apr 1999 20:08:55 +0200 (MET DST)
* PR# 180 *
Subject: nlm on a function in the Math group
From: Douglas Bates <bates@stat.wisc.edu>
Date: Thu, 29 Apr 1999 17:11:00 -0500 (CDT)
* PR# 183 *
Subject: compilation of R-0.63.3 on alpha
From: a.o.jaunsen@astro.uio.no
Date: Mon, 03 May 1999 11:28:31 +0200
* PR# 184 *
Subject: parse error in terms
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 3 May 1999 19:43:00 +0200 (MET DST)
* PR# 185 *
Subject: Re: [R] R_problem_buf in the S.h files & lists in .C
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 1999 00:32:49 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mao@compstat.wharton.upenn.edu  Sun May  9 17:41:07 1999
From: mao@compstat.wharton.upenn.edu (mao@compstat.wharton.upenn.edu)
Date: Sun, 9 May 1999 18:41:07 +0200 (MET DST)
Subject: subscripting in list() (PR#186)
Message-ID: <199905091641.SAA05061@pubhealth.ku.dk>


In R, (0.64 Binary, Linux 5.0) I tried this command and get an error
message:

> mylist <- list()
> mylist[[1]]
Error in mylist[[1]] : subscript out of bounds

It thus makes my Splus programs un-runable, because in SPlus 4.0 or 3.4,
you have

> mylist <- list()
> mylist[[1]]
NULL

instead of a stop message.


Thanks,
vincent






-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mao@compstat.wharton.upenn.edu  Sun May  9 18:01:28 1999
From: mao@compstat.wharton.upenn.edu (mao@compstat.wharton.upenn.edu)
Date: Sun, 9 May 1999 19:01:28 +0200 (MET DST)
Subject: subscripting in list() (PR#187)
Message-ID: <199905091701.TAA05120@pubhealth.ku.dk>


Sorry My previous report is not detailed.

In R, you will get this:

> mylist <- list()
> mylist[[1]]
Error in mylist[[1]] : subscript out of bounds
> mylist[[1]] <- c(1)
Error: (list) object cannot be coerced to vector type 14
> mylist[[1]] <- c(1,2)
> mylist[[1]] <- c(1)
> mylist
[[1]]
[1] 1

I was trying to assigning c(1) to (mylist[[1]] <- c(1)) -- it seems
impossible if I dont' assign something else to it in advance.

(although a walk around would be mylist[1] <- list(1)) In
SPLUS 4 or 3.4, the reactions are different:

> mylist <- list()
> mylist[[1]]
NULL
> mylist[[1]] <- c(1)
> mylist
[[1]]:
[1] 1





On Sun, 9 May 1999, Wenxin Mao wrote:

> Date: Sun, 9 May 1999 12:42:29 -0400 (EDT)
> From: Wenxin Mao <mao@stat.wharton.upenn.edu>
> To: r-bugs@biostat.ku.dk
> Subject: subscripting in list()
> 
> 
> In R, (0.64 Binary, Linux 5.0) I tried this command and get an error
> message:
> 
> > mylist <- list()
> > mylist[[1]]
> Error in mylist[[1]] : subscript out of bounds
> 
> It thus makes my Splus programs un-runable, because in SPlus 4.0 or 3.4,
> you have
> 
> > mylist <- list()
> > mylist[[1]]
> NULL
> 
> instead of a stop message.
> 
> 
> Thanks,
> vincent
> 
> 
> 
> 
> 
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun May  9 20:19:55 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 9 May 1999 21:19:55 +0200 (MET DST)
Subject: subscripting in list() (PR#187)
Message-ID: <199905091919.VAA05332@pubhealth.ku.dk>

On Sun, 9 May 1999 mao@compstat.wharton.upenn.edu wrote:

> 
> Sorry My previous report is not detailed.
> 
> In R, you will get this:
> 
> > mylist <- list()
> > mylist[[1]]
> Error in mylist[[1]] : subscript out of bounds

Yes, that is a known difference, I believe deliberate.

> > mylist[[1]] <- c(1)
> Error: (list) object cannot be coerced to vector type 14

I get no error in 0.64.1, the current version (since Friday): try
upgrading.

> > In R, (0.64 Binary, Linux 5.0) I tried this command and get an error
> > message:

(I assume you tried 0.64.0: there is no 0.64 that I know of.)

I do suggest though that you only index lists by names: relying on the
order of list components is fraught with possibilities for error.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dimi@ci.tuwien.ac.at  Mon May 10 17:15:31 1999
From: dimi@ci.tuwien.ac.at (dimi@ci.tuwien.ac.at)
Date: Mon, 10 May 1999 18:15:31 +0200 (MET DST)
Subject: linear mixed models (PR#188)
Message-ID: <199905101615.SAA14171@pubhealth.ku.dk>

in lmList ,lmList.formula and lmList.groupedData functions in help pages there is an argument called "groups" that doesn't exist in the code of the functions.
<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Patched (unreleased snapshot)
 status.rev = 0
 major = 0
 minor = 64.1
 year = 1999
 month = May
 day = 10
 language = R

Search Path:
 .GlobalEnv, package:lme, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dimi@ci.tuwien.ac.at  Mon May 10 17:46:21 1999
From: dimi@ci.tuwien.ac.at (Evgenia Dimitriadou)
Date: Mon, 10 May 1999 18:46:21 +0200 (CEST)
Subject: linear mixed models (PR#188)
In-Reply-To: <199905101615.SAA14171@pubhealth.ku.dk>
Message-ID: <Pine.LNX.3.96.990510184544.29534O-100000@gandalf.ci.tuwien.ac.at>

sorry for the bug report, but we had an older version of this library.

On Mon, 10 May 1999 dimi@ci.tuwien.ac.at wrote:

> in lmList ,lmList.formula and lmList.groupedData functions in help pages there is an argument called "groups" that doesn't exist in the code of the functions.
> <<insert bug report here>>
> 
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i686-unknown-linux
>  arch = i686
>  os = linux
>  system = i686, linux
>  status = Patched (unreleased snapshot)
>  status.rev = 0
>  major = 0
>  minor = 64.1
>  year = 1999
>  month = May
>  day = 10
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:lme, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon May 10 18:14:22 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 10 May 1999 12:14:22 -0500
Subject: linear mixed models (PR#188)
In-Reply-To: dimi@ci.tuwien.ac.at's message of "Mon, 10 May 1999 18:15:31 +0200 (MET DST)"
References: <199905101615.SAA14171@pubhealth.ku.dk>
Message-ID: <6rn1zcrgnl.fsf@verdi.stat.wisc.edu>

dimi@ci.tuwien.ac.at writes:

> in lmList ,lmList.formula and lmList.groupedData functions in help
> pages there is an argument called "groups" that doesn't exist in the
> code of the functions.

Can you tell us which version of the lme library you are using?

I don't see this with the most recent version (3.0b7-1) of the lme
library.  In that version the lmList help page starts with

   List of lm Objects with a Common Model

        lmList(object, data, level, na.action, pool)

I did cause some confusion by not uploading the tar file for
lme_3.0b7-2.tar.gz with the correct name.  The result was that there
were two packages, lme and lme3, listed on the web pages for a while.
To get the most recent version go directly to the src/contrib
directory and download lme_3.0b7-2.tar.gz

(Fritz or Andreas: Could you take a look at the PACKAGES.html file in
the src/contrib library?  I think it will need to be modified by
hand.  Sorry for this confusion.)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Tue May 11 09:13:49 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Tue, 11 May 1999 10:13:49 +0200 (MET DST)
Subject: model.matrix crashes (PR#189)
Message-ID: <199905110813.KAA17434@pubhealth.ku.dk>

With 0.64.1 on Intel RH5.2,

abc <- list()
abc$abc$abc <- matrix(1:20)
mt <- terms(~(abc$abc$abc[,1]==64)|(abc$abc$abc[,1]==65)|(abc$abc$abc[,1]==75)
	|(abc$abc$abc[,1]==84)|(abc$abc$abc[,1]==85))
model.matrix(mt,model.frame(mt))

crashes. With ab$ab$ab, it does not. Apparently, the bug I reported
for 0.64.0 has just been pushed back one step. Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Tue May 11 12:39:06 1999
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Tue, 11 May 1999 13:39:06 +0200 (MET DST)
Subject: dev.print help page (PR#191)
Message-ID: <199905111139.NAA19140@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 0.64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


Two problems with dev.print help.

1. Under Examples:
        dev.print(width=6, height=6, horizontal=F)
                                                ^ FALSE

2. dev.print help does not describe any of its parameters (e.g. height or
width).
Not described on the other dev.xxx pages either

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Tue May 11 12:43:51 1999
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Tue, 11 May 1999 13:43:51 +0200 (MET DST)
Subject: dev.print aspect ratio (PR#192)
Message-ID: <199905111143.NAA19204@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 0.64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


dev.print(horizontal=FALSE,width=7,height=7,file="r/rt/junk.ps")
does not produce a square plot. I find I need:

dev.print(horizontal=FALSE,width=7,height=7.6,file="r/rt/junk.ps")
to make it square.

I tried
par(pty="s")
prior to making the image or contour plot, but this does not make the plot
square.
(Maybe this is a bug for par() or image() and contour()).

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Tue May 11 13:02:01 1999
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Tue, 11 May 1999 14:02:01 +0200 (MET DST)
Subject: matrix() can't handle NaN (PR#193)
Message-ID: <199905111202.OAA19347@pubhealth.ku.dk>

Full_Name: Bill Simpson
Version: 0.64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


Here is the data file:
x y z
1 1 1
1 2 2
2 1 NaN
2 2 4

>data<-read.table("~/junk.dat",header=TRUE)

> data
  x y   z
1 1 1   1
2 1 2   2
3 2 1 NaN
4 2 2   4

> matrix(data$z,length(y),length(x)) 
     [,1] [,2]
[1,]    1    4
[2,]    2    3

This is not the correct matrix.  It seems that NaNs screw up matrix().

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue May 11 13:34:26 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 11 May 1999 14:34:26 +0200 (CEST)
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: <199905111202.OAA19347@pubhealth.ku.dk>
References: <199905111202.OAA19347@pubhealth.ku.dk>
Message-ID: <14136.9170.142518.789273@pc87.maho.magnaeu.com>

>>>>> wsi  writes:

> Full_Name: Bill Simpson
> Version: 0.64.1
> OS: linux
> Submission from: (NULL) (193.62.250.209)


> Here is the data file:
> x y z
> 1 1 1
> 1 2 2
> 2 1 NaN
> 2 2 4

>> data<-read.table("~/junk.dat",header=TRUE)

>> data
>   x y   z
> 1 1 1   1
> 2 1 2   2
> 3 2 1 NaN
> 4 2 2   4

>> matrix(data$z,length(y),length(x)) 
>      [,1] [,2]
> [1,]    1    4
> [2,]    2    3

> This is not the correct matrix.  It seems that NaNs screw up matrix().

Actually, data$z is a factor with one level NaN.

R> data$z
[1] 1   2   NaN 4  
Levels:  1 2 4 NaN

What you get is the codes of that, which I think is what you want.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill Simpson <wsi@gcal.ac.uk>  Tue May 11 14:48:57 1999
From: Bill Simpson <wsi@gcal.ac.uk> (Bill Simpson)
Date: Tue, 11 May 1999 13:48:57 +0000 (GMT)
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: <14136.9170.142518.789273@pc87.maho.magnaeu.com>
Message-ID: <Pine.LNX.3.96.990511133535.8568A-100000@cbe207.gcal.ac.uk>



On Tue, 11 May 1999, Kurt Hornik wrote:

> >>>>> wsi  writes:
> 
> > Full_Name: Bill Simpson
> > Version: 0.64.1
> > OS: linux
> > Submission from: (NULL) (193.62.250.209)
> 
> 
> > Here is the data file:
> > x y z
> > 1 1 1
> > 1 2 2
> > 2 1 NaN
> > 2 2 4
> 
> >> data<-read.table("~/junk.dat",header=TRUE)
> 
> >> data
> >   x y   z
> > 1 1 1   1
> > 2 1 2   2
> > 3 2 1 NaN
> > 4 2 2   4
> 
I forgot these steps:
x<-unique(data$x)
y<-unique(data$y)

> >> matrix(data$z,length(y),length(x)) 
> >      [,1] [,2]
> > [1,]    1    4
> > [2,]    2    3
> 
> > This is not the correct matrix.  It seems that NaNs screw up matrix().
> 
> Actually, data$z is a factor with one level NaN.
Geez, I why is data$z a factor?  That seems bizarre. It is supposed to be
the measured value (IV) at each combination of x and y. So what is the
right way to convert my original file?

I go through all this just to produce an image or contour or persp plot.

> R> data$z
> [1] 1   2   NaN 4  
> Levels:  1 2 4 NaN
Weird! Is this because matrix() interprets NaN as a character string
instead of as an NaN (which is a "number", isn't it?)?

Why then isn't everything converted to a factor?
> data$x
[1] 1 1 2 2
> data$y
[1] 1 2 1 2

Also, why does matrix() work as I expect when the NaN in the file is
changed to a 0:
> matrix(data$z,length(y),length(x))
     [,1] [,2]
[1,]    1    0
[2,]    2    4

It also works as I expect when the NaN is changed to an NA:
> matrix(data$z,length(y),length(x))
     [,1] [,2]
[1,]    1   NA
[2,]    2    4


> What you get is the codes of that, which I think is what you want.
NOPE! I want a matrix:
1	NaN
2	4

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ben@eno.princeton.edu  Tue May 11 14:05:04 1999
From: ben@eno.princeton.edu (Ben Bolker)
Date: Tue, 11 May 1999 09:05:04 -0400 (EDT)
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: <Pine.LNX.3.96.990511133535.8568A-100000@cbe207.gcal.ac.uk>
Message-ID: <Pine.SUN.3.91.990511090318.11064B-100000@paca>


  Perhaps this should be in a FAQ list ...

> data<-read.table("~/junk.dat",header=TRUE, na.strings="NaN")
> data
  x y  z
1 1 1  1
2 1 2  2
3 2 1 NA
4 2 2  4

> x<-unique(data$x)
> y<-unique(data$y)
> matrix(data$z,length(y),length(x))
     [,1] [,2]
[1,]    1   NA
[2,]    2    4

  "NaN" (Not a Number) as seen in debuggers, etc., is not the same as "NA"
as a "not available/applicable" value in R.

On Tue, 11 May 1999, Bill Simpson wrote:

> 
> 
> On Tue, 11 May 1999, Kurt Hornik wrote:
> 
> > >>>>> wsi  writes:
> > 
> > > Full_Name: Bill Simpson
> > > Version: 0.64.1
> > > OS: linux
> > > Submission from: (NULL) (193.62.250.209)
> > 
> > 
> > > Here is the data file:
> > > x y z
> > > 1 1 1
> > > 1 2 2
> > > 2 1 NaN
> > > 2 2 4
> > 
> > >> data<-read.table("~/junk.dat",header=TRUE)
> > 
> > >> data
> > >   x y   z
> > > 1 1 1   1
> > > 2 1 2   2
> > > 3 2 1 NaN
> > > 4 2 2   4
> > 
> I forgot these steps:
> x<-unique(data$x)
> y<-unique(data$y)
> 
> > >> matrix(data$z,length(y),length(x)) 
> > >      [,1] [,2]
> > > [1,]    1    4
> > > [2,]    2    3
> > 
> > > This is not the correct matrix.  It seems that NaNs screw up matrix().
> > 
> > Actually, data$z is a factor with one level NaN.
> Geez, I why is data$z a factor?  That seems bizarre. It is supposed to be
> the measured value (IV) at each combination of x and y. So what is the
> right way to convert my original file?
> 
> I go through all this just to produce an image or contour or persp plot.
> 
> > R> data$z
> > [1] 1   2   NaN 4  
> > Levels:  1 2 4 NaN
> Weird! Is this because matrix() interprets NaN as a character string
> instead of as an NaN (which is a "number", isn't it?)?
> 
> Why then isn't everything converted to a factor?
> > data$x
> [1] 1 1 2 2
> > data$y
> [1] 1 2 1 2
> 
> Also, why does matrix() work as I expect when the NaN in the file is
> changed to a 0:
> > matrix(data$z,length(y),length(x))
>      [,1] [,2]
> [1,]    1    0
> [2,]    2    4
> 
> It also works as I expect when the NaN is changed to an NA:
> > matrix(data$z,length(y),length(x))
>      [,1] [,2]
> [1,]    1   NA
> [2,]    2    4
> 
> 
> > What you get is the codes of that, which I think is what you want.
> NOPE! I want a matrix:
> 1	NaN
> 2	4
> 
> Bill
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Benjamin Bolker          Dep't of Ecology and Evolutionary Biology,
ben@eno.princeton.edu    Princeton University
tel: (609) 258-6886,     fax: (609) 258-1334

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ben@eno.princeton.edu  Tue May 11 14:33:37 1999
From: ben@eno.princeton.edu (Ben Bolker)
Date: Tue, 11 May 1999 09:33:37 -0400 (EDT)
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: <Pine.LNX.3.96.990511141530.8636A-100000@cbe207.gcal.ac.uk>
Message-ID: <Pine.SUN.3.91.990511092658.11064E-100000@paca>

On Tue, 11 May 1999, Bill Simpson wrote:


 [examples with read.table(...,na.strings="NaN") snipped]
> 
> >   "NaN" (Not a Number) as seen in debuggers, etc., is not the same as "NA"
> > as a "not available/applicable" value in R.
> 
> Yes, I realize that.
> However, since there is an R function is.nan(), and through experiments at
> the command line like this
> > xx<-NaN
> > xx+1
> NaN
> I thought that NaN was recognized by the R system and obeyed the proper
> rules. Same for Inf and -Inf.
> 
> Or are these things only sometimes recognized and sometimes not? Shouldn't
> they be employed consistently?
> 
> Bill
> 

  I'm going to defer this to people who know more than I about 
consistency and the differences between NA and NaN.  I will note that
the help for is.na() says:

The generic function `is.na' returns a logical vector of the same ``form''
as its argument `x', containing `TRUE' for those elements marked `NA' or
`NaN' (!) and `FALSE' otherwise.

  The (!) suggests that whoever wrote the help file recognized some 
subtlety here ... [similarly, is.finite() recognizes NA as a non-finite 
number]

  This seems to fall in the general category of "how do we help people 
avoid 'gotchas' in R that, while logical, are not necessarily what they 
expect?  Can we do this without blurring logical distinctions that are 
interesting/important/significant to more knowledgeable users?"

  One *could* extend the default na.strings in read.table to 
c("NA","NaN"), which would take care of the immediate problem but might 
further blur the subtle distinction between NA and NaN.  I don't know 
how/whether one would want to extend read.table() to deal with Inf/-Inf 
in data files ... (I think not).

  Ben
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill Simpson <wsi@gcal.ac.uk>  Tue May 11 15:51:23 1999
From: Bill Simpson <wsi@gcal.ac.uk> (Bill Simpson)
Date: Tue, 11 May 1999 14:51:23 +0000 (GMT)
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: <Pine.SUN.3.91.990511092658.11064E-100000@paca>
Message-ID: <Pine.LNX.3.96.990511144151.8662B-100000@cbe207.gcal.ac.uk>



On Tue, 11 May 1999, Ben Bolker wrote:
>   One *could* extend the default na.strings in read.table to 
> c("NA","NaN"), which would take care of the immediate problem but might 
> further blur the subtle distinction between NA and NaN.  I don't know 
> how/whether one would want to extend read.table() to deal with Inf/-Inf 
> in data files ... (I think not).

My attitude is that if NaN is a recognized "number" by the numerical
analysts (the guys who write the floating point standards), why not treat
it as such throughout R? But maybe this opens a can of worms.

In my example, I was expecting to have the z matrix for an image plot with
NaNs in it. Then I was going to convert them either to zeros or NAs prior
to making the plot.

I would put the onus on the user to deal with the NaNs prior to
passing the data onto some other function. I would not favour some
automatic conversion of NaN into NA.

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 11 15:26:43 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 11 May 1999 16:26:43 +0200 (MET DST)
Subject: matrix() can't handle NaN (PR#193)
Message-ID: <199905111426.QAA20739@pubhealth.ku.dk>

Bill argues that NaN should be treated as a number, 
even by read.table() and I think he is right.
{ scan(.) does fine !  it *does* treat NaN as numbers ! }

At the moment, I don't even see where the problem is;
the read.table internal function  type.convert()
does well with NaN's :
     > cc <- as.character(c(pi,NaN))
     > str(type.convert(cc))
      num [1:2] 3.14  NaN

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue May 11 15:54:19 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 11 May 1999 15:54:19 +0100 (BST)
Subject: matrix() can't handle NaN (PR#193)
Message-ID: <199905111454.PAA03015@toucan.stats.ox.ac.uk>

> Date: Tue, 11 May 1999 16:26:43 +0200 (MET DST)
> From: maechler@stat.math.ethz.ch
> To: r-devel@stat.math.ethz.ch
> Subject: Re: matrix() can't handle NaN (PR#193)
> 
> Bill [Simpson] argues that NaN should be treated as a number, 
> even by read.table() and I think he is right.
> { scan(.) does fine !  it *does* treat NaN as numbers ! }
> 
> At the moment, I don't even see where the problem is;
> the read.table internal function  type.convert()
> does well with NaN's :
>      > cc <- as.character(c(pi,NaN))
>      > str(type.convert(cc))
>       num [1:2] 3.14  NaN

The field is regarded as a character field unless  na.strings is
extended to include NaN.

I am not in favour of treating NaN as a number, which is linguistic nonsense!
(What does NaN stand for?)

First, in IEEE arithmetic, NaN is a class of numbers as I understand it
(and internally in R NA is one of those NaNs).  So just which one do
you mean?  And what are you going to achieve by having essentially a
second NA, except to blur the real purposes of NaNs?

Secondly, on non-IEEE implementations of R, I believe NaN = NA: in any
case we should not lightly be making IEEE features an essential part of the
language. (Or with the gradual demise of Vaxen is IEEE arithmetic now
universal: I still have a Sun running with a special-purpose non-IEEE
floating-point unit.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue May 11 18:08:44 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 11 May 1999 13:08:44 -0400
Subject: another multivariate ts bug
Message-ID: <3738641B.3630B0F2@bank-banque-canada.ca>

I think this is another one of the same kind of bugs in ts:

Version 0.64.1  (May 8, 1999)
...
>  z <- ts(matrix(1:20,10,2), start=c(1969,1), frequency=12)
> (z > 5) | (z < 2)
Error: invalid time series parameters specified
>

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue May 11 20:26:09 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Tue, 11 May 1999 21:26:09 +0200 (MET DST)
Subject: model.matrix crashes (PR#189)
Message-ID: <199905111926.VAA21832@pubhealth.ku.dk>

On Tue, 11 May 1999 jlindsey@alpha.luc.ac.be wrote:

> With 0.64.1 on Intel RH5.2,
> 
> abc <- list()
> abc$abc$abc <- matrix(1:20)
> mt <- terms(~(abc$abc$abc[,1]==64)|(abc$abc$abc[,1]==65)|(abc$abc$abc[,1]==75)
> 	|(abc$abc$abc[,1]==84)|(abc$abc$abc[,1]==85))
> model.matrix(mt,model.frame(mt))
> 
> crashes. With ab$ab$ab, it does not. Apparently, the bug I reported
> for 0.64.0 has just been pushed back one step. Jim

I can't reproduce this on Solaris.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 11 21:59:28 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 May 1999 22:59:28 +0200
Subject: model.matrix crashes (PR#189)
In-Reply-To: thomas@biostat.washington.edu's message of "Tue, 11 May 1999 21:26:09 +0200 (MET DST)"
References: <199905111926.VAA21832@pubhealth.ku.dk>
Message-ID: <x2k8ufqq4v.fsf@blueberry.kubism.ku.dk>

thomas@biostat.washington.edu writes:

> On Tue, 11 May 1999 jlindsey@alpha.luc.ac.be wrote:
> 
> > With 0.64.1 on Intel RH5.2,
> > 
> > abc <- list()
> > abc$abc$abc <- matrix(1:20)
> > mt <- terms(~(abc$abc$abc[,1]==64)|(abc$abc$abc[,1]==65)|(abc$abc$abc[,1]==75)
> > 	|(abc$abc$abc[,1]==84)|(abc$abc$abc[,1]==85))
> > model.matrix(mt,model.frame(mt))
> > 
> > crashes. With ab$ab$ab, it does not. Apparently, the bug I reported
> > for 0.64.0 has just been pushed back one step. Jim
> 
> I can't reproduce this on Solaris.

I can, on Linux, RH6.0.

The problem is neatly described in src/main/model.c:1690

    /* FIXME : we need to check for buffer overflow here. */

I've upped the BUFSIZE from 128 to 4096, which should push the problem
a bit further back....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 11 22:05:11 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 May 1999 23:05:11 +0200
Subject: another multivariate ts bug
In-Reply-To: Paul Gilbert's message of "Tue, 11 May 1999 13:08:44 -0400"
References: <3738641B.3630B0F2@bank-banque-canada.ca>
Message-ID: <x2iu9zqpvc.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I think this is another one of the same kind of bugs in ts:
> 
> Version 0.64.1  (May 8, 1999)
> ...
> >  z <- ts(matrix(1:20,10,2), start=c(1969,1), frequency=12)
> > (z > 5) | (z < 2)
> Error: invalid time series parameters specified
> >

Sigh.

Found and fixed. Same problem. This time in src/main/logic.c, lbinary
function. Here's the patch (cut+paste'd, watch out for whitespace
problems).

RCS file: /users/rdev/R/CVS-ARCHIVE/R/src/main/logic.c,v
retrieving revision 1.8
diff -c -r1.8 logic.c
*** logic.c     1999/03/05 19:19:04     1.8
--- logic.c     1999/05/11 21:02:09
***************
*** 110,121 ****
      y = CADR(args) = coerceVector(y, LGLSXP);
      PROTECT(x = binaryLogic(PRIMVAL(op), x, y));
  
-     if (xts || yts) {
-       setAttrib(x, R_TspSymbol, tsp);
-       setAttrib(x, R_ClassSymbol, class);
-       UNPROTECT(2);
-     }
- 
      if (dims != R_NilValue) {
        setAttrib(x, R_DimSymbol, dims);
        if(xnames != R_NilValue)
--- 110,115 ----
***************
*** 128,133 ****
--- 122,133 ----
            setAttrib(x, R_NamesSymbol, xnames);
        else if(length(x) == length(ynames))
            setAttrib(x, R_NamesSymbol, ynames);
+     }
+ 
+     if (xts || yts) {
+       setAttrib(x, R_TspSymbol, tsp);
+       setAttrib(x, R_ClassSymbol, class);
+       UNPROTECT(2);
      }
      UNPROTECT(4);
      return x;


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill Simpson <wsi@gcal.ac.uk>  Wed May 12 10:51:35 1999
From: Bill Simpson <wsi@gcal.ac.uk> (Bill Simpson)
Date: Wed, 12 May 1999 09:51:35 +0000 (GMT)
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: <199905111454.PAA03015@toucan.stats.ox.ac.uk>
Message-ID: <Pine.LNX.3.96.990512092041.9531A-100000@cbe207.gcal.ac.uk>



On Tue, 11 May 1999, Prof Brian Ripley wrote:

> 
> The field is regarded as a character field unless  na.strings is
> extended to include NaN.
> 
> I am not in favour of treating NaN as a number, which is linguistic nonsense!
That's why I said that NaN was a "number" (with quotes). It is a number in
the sense that it is the output of an arithmetic operation.
> 
> First, in IEEE arithmetic, NaN is a class of numbers as I understand it
Yes.
> (and internally in R NA is one of those NaNs).
Oh.

> So just which one do
> you mean?  And what are you going to achieve by having essentially a
> second NA, except to blur the real purposes of NaNs?
Well to me NA means missing value, and it is abuse of NA to use it to
represent things like 0/0.

The purpose of having NaN to me:
I am allowed to get an NaN as a result of some operation in R. Let's say I
then save that in a file, then I read the file in again using read.table.
In the process of saving and reading it in I lose the NaN. I don't like
that. It doesn't seem consistent. If the NaN is to be changed, I would
like to do the changing explicitly myself, so I know what happened to it.

I would also include Inf and -Inf here. These are allowed outputs from R
operations, so why can't they be read in by read.table? So I am proposing
that allowable IEEE entities Inf, -Inf, NaN be read in by read.table as
themselves (not as character strings).

> Secondly, on non-IEEE implementations of R, I believe NaN = NA: in any
> case we should not lightly be making IEEE features an essential part of the
> language. (Or with the gradual demise of Vaxen is IEEE arithmetic now
> universal: I still have a Sun running with a special-purpose non-IEEE
> floating-point unit.)
OK I see this point. That's what I meant when I said maybe it would be
opening a can of worms to try to use NaN and Inf consistently throughout
R.

Bill

PS: I remember reading on this list about complex numbers in R. That
brings in a conflict with IEEE (doesn't it?), because in IEEE,
sqrt(negative number)->NaN.
But that is not a NaN if you allow complex numbers (I would think).
> sqrt(-1)
Warning: NaNs produced in function "sqrt"
[1] NaN

Is there a need for an "I" symbol in R?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 12 10:27:17 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 May 1999 11:27:17 +0200
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: Bill Simpson's message of "Wed, 12 May 1999 09:51:35 +0000 (GMT)"
References: <Pine.LNX.3.96.990512092041.9531A-100000@cbe207.gcal.ac.uk>
Message-ID: <x21zgmd4ei.fsf@blueberry.kubism.ku.dk>

Bill Simpson <wsimpson@gcal.ac.uk> writes:

> > So just which one do
> > you mean?  And what are you going to achieve by having essentially a
> > second NA, except to blur the real purposes of NaNs?
>
> Well to me NA means missing value, and it is abuse of NA to use it to
> represent things like 0/0.

And actually the logic is a bit warped:

> NA+NaN     
[1] NA
> NaN+NA
[1] NA
> NaN+NaN
[1] NaN
> is.nan(NaN)
[1] TRUE
> is.nan(NA)
[1] FALSE
> is.na(NaN)
[1] TRUE
 
> The purpose of having NaN to me:
> I am allowed to get an NaN as a result of some operation in R. Let's say I
> then save that in a file, then I read the file in again using read.table.
> In the process of saving and reading it in I lose the NaN. I don't like
> that. It doesn't seem consistent. If the NaN is to be changed, I would
> like to do the changing explicitly myself, so I know what happened to it.
> 
> I would also include Inf and -Inf here. These are allowed outputs from R
> operations, so why can't they be read in by read.table? So I am proposing
> that allowable IEEE entities Inf, -Inf, NaN be read in by read.table as
> themselves (not as character strings).

We do allow them as constants in the language itself, so I suppose we
could do it in read.table as well - this really means inside
as.double, I suppose. The prototype does this:

Splus> is.nan(as.double("NaN"))
[1] T

> PS: I remember reading on this list about complex numbers in R. That
> brings in a conflict with IEEE (doesn't it?), because in IEEE,
> sqrt(negative number)->NaN.
> But that is not a NaN if you allow complex numbers (I would think).
> > sqrt(-1)
> Warning: NaNs produced in function "sqrt"
> [1] NaN
> 
> Is there a need for an "I" symbol in R?

Nope:

> sqrt(-1+0i)
[1] 0+1i

or, equivalently,

> sqrt(as.complex(-1))
[1] 0+1i

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 12 12:07:00 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 12 May 1999 13:07:00 +0200 (MET DST)
Subject: matrix() can't handle NaN (PR#193)
Message-ID: <199905121107.NAA29025@pubhealth.ku.dk>

Can we backtrack here. I have just tried the original example on Solaris,
and matrix() _can_ handle NaN with a mature ANSI C library.

toucan% cat > junk.dat
x y z
1 1 1
1 2 2
2 1 NaN
2 2 4
toucan% R

R : Copyright 1999, The R Development Core Team
Version 0.64.1  (May 8, 1999)
...

> data <- read.table("junk.dat",header=TRUE)
> x<-unique(data$x)
> y<-unique(data$y)
> matrix(data$z,length(y),length(x)) 
     [,1] [,2]
[1,]    1  NaN
[2,]    2    4

So on Solaris NaNs are read as such, and on Linux they are not.


> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 12 May 1999 11:27:17 +0200

> We do allow them as constants in the language itself, so I suppose we
> could do it in read.table as well - this really means inside
> as.double, I suppose. The prototype does this:
> 
> Splus> is.nan(as.double("NaN"))
> [1] T

and so does my R on Solaris. On Linux

> is.nan(as.double("NaN"))
Warning: NAs introduced by coercion
[1] FALSE

so I think there is a problem with Linux versions specifically. The
conversion is done by strtod. Solaris says (same man page)

     If str is NaN, then atof() returns NaN.

This sort of mess is my underlying objection: should we be assuming
IEEE arithmetic, let alone a particular implementation of it?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed May 12 12:20:12 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 12 May 1999 13:20:12 +0200 (MET DST)
Subject: dev.print help page (PR#191)
Message-ID: <199905121120.NAA29328@pubhealth.ku.dk>

>>>>> "Bill" == Bill Simpson <wsi@gcal.ac.uk> writes:

    Bill> Full_Name: Bill Simpson Version: 0.64.1 OS: linux Submission
    Bill> from: (NULL) (193.62.250.209)


    Bill> Two problems with dev.print help.

    Bill> 1. Under Examples: dev.print(width=6, height=6, horizontal=F) ^
    Bill> FALSE

fixed, thank you.

    Bill> 2. dev.print help does not describe any of its parameters
    Bill> (e.g. height or width).  Not described on the other dev.xxx pages
    Bill> either

But the help page says that "..." are parameters of the "device" function,
if the "device" functions is postscript (as it is here),
you must look at  ?postscript  to see what parameters you can use.
Even though, all would have been clear already, 
I've added to the help  which now reads

    Copy Graphics Between Multiple Devices

	 dev.copy(device, ..., which=dev.next())
	 dev.print(device=postscript, ...)
	 dev.control(displaylist)

    Arguments:

      device: A device function (e.g., `x11', `postscript', ...)

	 ...: Arguments to the `device' function above.  For
	      `dev.print', this includes `which' and by default
	      any `postscript' arguments.

   ................
	      
Thanks for the report.
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plindsey@alpha.luc.ac.be  Wed May 12 13:40:51 1999
From: plindsey@alpha.luc.ac.be (plindsey@alpha.luc.ac.be)
Date: Wed, 12 May 1999 14:40:51 +0200 (MET DST)
Subject: Memory crash. (PR#194)
Message-ID: <199905121240.OAA00492@pubhealth.ku.dk>

I just had a memory crash with R-0.64.1.
I am running under intel pentium 200mhz under slackware linux 2.0.30.

1/home/plindsey >gdb /usr/local/src/R/bin/R.binary core 
GDB is free software and you are welcome to distribute copies of it
 under certain conditions; type "show copying" to see the conditions.
There is absolutely no warranty for GDB; type "show warranty" for details.
GDB 4.16 (i486-slackware-linux), Copyright 1996 Free Software Foundation, Inc...
Core was generated by `/usr/local/src/R-0.64.1/bin/R.binary --no-save --no-restore --vsize 8000000 --nsob'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /usr/X11R6/lib/libSM.so.6...done.
Reading symbols from /usr/X11R6/lib/libICE.so.6...done.
Reading symbols from /usr/X11R6/lib/libX11.so.6...done.
Reading symbols from /lib/libdl.so.1...done.
Reading symbols from /lib/libncurses.so.3.0...done.
Reading symbols from /lib/libm.so.5...done.
Reading symbols from /lib/libc.so.5...done.
Reading symbols from /lib/ld-linux.so.1...done.
Reading symbols from /usr/local/src/R-0.64.1/library/rmutil/libs/rmutil.so...done.
Reading symbols from /usr/local/src/R-0.64.1/library/mmdc33/libs/mmdc33.so...done.
Reading symbols from /usr/local/src/R-0.64.1/library/gnlm/libs/gnlm.so...done.
#0  compactPhase () at memory.c:599
599             switch (TYPEOF(s)) {    /* get size in bytes */
(gdb) quit

Patrick.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 12 14:13:15 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 May 1999 15:13:15 +0200
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Wed, 12 May 1999 13:07:00 +0200 (MET DST)"
References: <199905121107.NAA29025@pubhealth.ku.dk>
Message-ID: <x2zp3abfdg.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> > Splus> is.nan(as.double("NaN"))
> > [1] T
> 
> and so does my R on Solaris. On Linux
> 
> > is.nan(as.double("NaN"))
> Warning: NAs introduced by coercion
> [1] FALSE
> 
> so I think there is a problem with Linux versions specifically. The
> conversion is done by strtod. Solaris says (same man page)
> 
>      If str is NaN, then atof() returns NaN.
> 
> This sort of mess is my underlying objection: should we be assuming
> IEEE arithmetic, let alone a particular implementation of it?

Aha! I wonder if that is a Solaris specialty or actually conforming to
standards? A little digging on deja.com turned up a couple of blanket
statements to the effect that "any implementation where strtod can
return NaN is broken", but I'm not too sure about their authority.
Even the textual representation "NaN" is IEEE-854, not 754....

Whatever. I think we should fix as.double() (really: as.vector(x,
"double")) to accept the IEEE extended values in the same way that the
language itself does. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 12 14:37:06 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 May 1999 15:37:06 +0200
Subject: Memory crash. (PR#194)
In-Reply-To: plindsey@alpha.luc.ac.be's message of "Wed, 12 May 1999 14:40:51 +0200 (MET DST)"
References: <199905121240.OAA00492@pubhealth.ku.dk>
Message-ID: <x2wvyebe9p.fsf@blueberry.kubism.ku.dk>

plindsey@alpha.luc.ac.be writes:

> I just had a memory crash with R-0.64.1.
> I am running under intel pentium 200mhz under slackware linux 2.0.30.
> 
> 1/home/plindsey >gdb /usr/local/src/R/bin/R.binary core 
> GDB is free software and you are welcome to distribute copies of it
>  under certain conditions; type "show copying" to see the conditions.
> There is absolutely no warranty for GDB; type "show warranty" for details.
> GDB 4.16 (i486-slackware-linux), Copyright 1996 Free Software Foundation, Inc...
> Core was generated by `/usr/local/src/R-0.64.1/bin/R.binary --no-save --no-restore --vsize 8000000 --nsob'.
> Program terminated with signal 11, Segmentation fault.
> Reading symbols from /usr/X11R6/lib/libSM.so.6...done.
> Reading symbols from /usr/X11R6/lib/libICE.so.6...done.
> Reading symbols from /usr/X11R6/lib/libX11.so.6...done.
> Reading symbols from /lib/libdl.so.1...done.
> Reading symbols from /lib/libncurses.so.3.0...done.
> Reading symbols from /lib/libm.so.5...done.
> Reading symbols from /lib/libc.so.5...done.
> Reading symbols from /lib/ld-linux.so.1...done.
> Reading symbols from /usr/local/src/R-0.64.1/library/rmutil/libs/rmutil.so...done.
> Reading symbols from /usr/local/src/R-0.64.1/library/mmdc33/libs/mmdc33.so...done.
> Reading symbols from /usr/local/src/R-0.64.1/library/gnlm/libs/gnlm.so...done.
> #0  compactPhase () at memory.c:599
> 599             switch (TYPEOF(s)) {    /* get size in bytes */
> (gdb) quit

Thanks for reporting, Pat, but reports like the above are essentially
useless because the memory corruption could be *anywhere*. 

At the very least, we'd need a backtrace ('bt' command in gdb) to see
what functions was involved. Even then, it may be difficult, because
the true damage may have been done by the *previous* garbage
collection. 

The best thing would a simple example showing up the effect. This can
be difficult to create because things depend on the GC getting call at
the exact wrong moment. Turning on gctorture() can help with that by
forcing GC on any allocation, although it slows everything by three
orders of magnitude or so.

Another (even better) option would be if you could debug it yourself.
What I would do is to find the location of the "s" pointer which is
apparently getting overwritten and set a hardware watchpoint on it,
possibly conditionalised on the number of garbage collections.
However, that requires quite some knowledge of gdb.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From magni@omega.ien.it  Wed May 12 16:56:30 1999
From: magni@omega.ien.it (Alessandro Magni)
Date: Wed, 12 May 1999 17:56:30 +0200
Subject: R manual - S manual
Message-ID: <3739A4AE.A2CD78@omega.ien.it>

I just started working on R, and lacking a manual I saw that the advice
is to use som S or S-plus manual.
Where can I find it online?

P.S. I already downloaded and read "notes on S-plus" by Venables/Smith:
now I'd need something
deeper.


P.P.S. please, reply even by email to magni@omega.ien.it

--
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
\ Alessandro Magni
/                               IEN Galileo Ferraris
\                               c.M.d'Azeglio 42, 10125 Torino (ITALIA)
/                               magni@omega.ien.it
\                               Fax (39)11-6507611
/                               Tel (39)11-3919757
\                               Homepage at:
http://alpha.ien.it/~magni/home.html
/
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May 12 22:02:07 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 12 May 1999 17:02:07 -0400
Subject: yet another ts problem
Message-ID: <3739EC4F.840C8F9E@bank-banque-canada.ca>

This looks like a slightly different problem then the other ones:

R : Copyright 1999, The R Development Core Team
Version 0.64.1  (May 8, 1999)
...
> z <- ts(matrix(c(1:9,NA), 5, 2), start=c(1991,1))
> na <- is.na(z)
> z[na]
Error: subscript (10) out of bounds, should be at most 5
>

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed May 12 23:20:13 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 13 May 1999 10:20:13 +1200 (NZST)
Subject: yet another ts problem
In-Reply-To: <3739EC4F.840C8F9E@bank-banque-canada.ca>
Message-ID: <Pine.BSF.4.05.9905131005150.525-100000@g.ihaka.slip.auckland.ac.nz>


On Wed, 12 May 1999, Paul Gilbert wrote:

> This looks like a slightly different problem then the other ones:
> 
> R : Copyright 1999, The R Development Core Team
> Version 0.64.1  (May 8, 1999)
> ...
> > z <- ts(matrix(c(1:9,NA), 5, 2), start=c(1991,1))
> > na <- is.na(z)
> > z[na]
> Error: subscript (10) out of bounds, should be at most 5

There seem to be two problems here

1. I think that "[.ts" tries too hard to turn its value back into
   a time series.  The only case where this makes sense is when
   a selection of columns is taken from a multivariate series.
   If a row subset is taken, it can only be a time series if
   the subscripts have a very special pattern.  This would be
   too expensive I think.

   In S there is no "[.ts", and a simple array subset is returned.

2. There is a subscripting problem in 0.65 which is tripped by this
   (Paul's example triggers a coredump in 0.65).  The problem can
   be reproduced simply with:
	x <- 1:5
	i <- matrix(F,nr=5,nc=2)
	i[5,2] <- T
	x[i]

I will look at the latter, but I think the former needs a look too. 

	Ross

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 13 07:34:20 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 13 May 1999 08:34:20 +0200 (MET DST)
Subject: Error in stripplot  (was Re: [R] stripplot gets weird) (PR#195)
Message-ID: <199905130634.IAA06891@pubhealth.ku.dk>

[Moved to R-bugs, hence R-devel, as this is now a bug report. I have
fixed the stripplot bug.]

On Thu, 13 May 1999, David Scott wrote:

> 
> After thinking that the name difference was a problem, or that attaching
> the dataframe was a problem, I think it might be something to do with
> internal representation of numbers:

More precisely, with rounding errors.

> 
> aitken/Exam9> R
> 
> R : Copyright 1999, The R Development Core Team
> Version 0.63.3  (March 6, 1999)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type    "?license" or "?licence" for distribution details.
> 
> R is a collaborative project with many contributors.
> Type    "?contributors" for a list.
> 
> Type    "demo()" for some demos, "help()" for on-line help, or
>         "help.start()" for a HTML browser interface to help.
> Type    "q()" to quit R.
> 
> 
> > impurity.df<-read.table("impurities.dat",header=T)
> > impurity.df
>    supplier1 supplier2
> 1        3.8       1.8
> 2        3.5       2.2
> 3        4.1       1.3
> 4        2.5       5.1
> 5        3.6       4.0
> 6        4.3       4.7
> 7        2.1       3.3
> 8        2.9       4.3
> 9        3.2       4.2
> 10       3.7       2.5
> 11       2.8       5.4
> 12       2.7       4.6
> > supp.diff<-impurity.df$supplier1-impurity.df$supplier2
> > stripplot(supp.diff,method="stack")
> Warning in y + (unlist(xo) - 1) * offset * csize : longer object length
>         is not a multiple of shorter object length
> Error: x and y lengths differ
> > dput(supp.diff)
> c(2, 1.3, 2.8, -2.6, -0.4, -0.4, -1.2, -1.4, -1, 1.2, -2.6, -1.9
> )
> > supp.diff<-c(2, 1.3, 2.8, -2.6, -0.4, -0.4, -1.2, -1.4, -1, 1.2, -2.6,
> -1.9
> + )
> > stripplot(supp.diff,method="stack")
> >
> 
> Works!!!
> 
> The bit of code inside stripplot that is playing up is intended to
> determine where there are repeated values, and create a sequence
> numbering the values:
>     f <- function(x) seq(length(x))
>     for (i in 1:n) {
>         x <- groups[[i]]
>         y <- rep(i, length(x))
>         if (method == 2) 
>             y <- y + runif(length(y), -jitter, jitter)
>         else if (method == 3) {
>             xg <- split(x, factor(x))
>             xo <- lapply(xg, f)
>             x <- unlist(xg)
>             y <- y + (unlist(xo) - 1) * offset * csize

Yes. On my machine

Browse[1]> x
-2.61 -2.62  -1.9  -1.4  -1.2    -1 -0.41 -0.42   1.2   1.3     2   2.8 
 -2.6  -2.6  -1.9  -1.4  -1.2  -1.0  -0.4  -0.4   1.2   1.3   2.0   2.8 
Browse[1]> print(x, digits=17)                                                 
               -2.61                -2.62                 -1.9 
-2.59999999999999964 -2.60000000000000053 -1.89999999999999947 
                -1.4                 -1.2                   -1 
-1.39999999999999991 -1.19999999999999973 -1.00000000000000000 
               -0.41                -0.42                  1.2 
-0.39999999999999991 -0.40000000000000036  1.20000000000000018 
                 1.3                    2                  2.8 
 1.29999999999999982  1.99999999999999978  2.79999999999999982 
Browse[1]> factor(x)
 [1] -2.6 -2.6 -1.9 -1.4 -1.2 -1   -0.4 -0.4 1.2  1.3  2    2.8 
Levels:  -2.6 -2.6 -1.9 -1.4 -1.2 -1 -0.4 -0.4 1.2 1.3 2 2.8 
Browse[1]> unlist(xg)
-2.61 -2.62  -1.9  -1.4  -1.2    -1 -0.41 -0.42   1.2   1.3     2   2.8 
 -2.6  -2.6  -1.9  -1.4  -1.2  -1.0  -0.4  -0.4   1.2   1.3   2.0   2.8 
Browse[1]> unlist(xo)
-2.61 -2.62 -2.61 -2.62  -1.9  -1.4  -1.2    -1 -0.41 -0.42 -0.41 
    1     2     1     0     1     1     1     1     1     2     1 
-0.42   1.2   1.3     2   2.8 
    0     1     1     1     1 

The main problem is that 

Browse[1]> seq(0)
[1] 1 0

which is definitely wrong for here. stripplot should have 

    f <- function(x) seq(length=length(x))

En route, unlist gives very confusing labels, and I have added
use.names=FALSE.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu May 13 10:36:52 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Thu, 13 May 1999 11:36:52 +0200
Subject: yet another ts problem
References: <Pine.BSF.4.05.9905131005150.525-100000@g.ihaka.slip.auckland.ac.nz>
Message-ID: <373A9D34.EE7511F9@iarc.fr>

Ross Ihaka wrote:

> 1. I think that "[.ts" tries too hard to turn its value back into
>    a time series.  The only case where this makes sense is when
>    a selection of columns is taken from a multivariate series.
>    If a row subset is taken, it can only be a time series if
>    the subscripts have a very special pattern.  This would be
>    too expensive I think.
> 
>    In S there is no "[.ts", and a simple array subset is returned.

An alternative to using "[.ts" to take row subsets would be to 
expand the window.ts() function to include a "freq" or "deltat"
argument. One can then use window() to thin out a regular time series
and "[.ts" could be modified to just return a simple array subset
(in the process get rid of the horrible warning about not returning a
time series).

I already did something like this in the coda package for MCMC output -
which one often wants to thin out because of high autocorrelation.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu May 13 16:25:15 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 13 May 1999 11:25:15 -0400
Subject: yet another ts problem
References: <Pine.BSF.4.05.9905131005150.525-100000@g.ihaka.slip.auckland.ac.nz> <373A9D34.EE7511F9@iarc.fr>
Message-ID: <373AEEDA.39CAAC16@bank-banque-canada.ca>

Ross Ihaka wrote:

> 1. I think that "[.ts" tries too hard to turn its value back into
>    a time series.  ...

I agree with this, although, despite all the bugs I'm reporting, a lot of "[.ts"
works ok. All of my calls to "[.ts" that should try to preserve time series
properties are (or should be) from window or some window like utilities that I
use in my tframe kernel. So there is a lot of duplication because these are
already doing most of the stuff that "[.ts" is trying to do too.

(My tframe kernel used to completely take over  all time series including "ts",
but to do that I had to redefine some top level generics like window and plot -
which I think would eventually lead to trouble. My recent batch of ts problems
is because I have changed things so I don't take over the top level. This gives
more control to the class methods, which I think is the way it should work.)

>    In S there is no "[.ts", and a simple array subset is returned.

Splus 3.3 has  "[.its", "[.cts", and "[.rts", the class methods for time series.
However, I haven't used them much and I have no idea if they work properly.

Martyn Plummer wrote:

>An alternative to using "[.ts" to take row subsets would be to
>expand the window.ts() function to include a "freq" or "deltat"
>argument.

I don't see why this should be necessary? window works with dates and
automatically knows the frequency of the object.

>One can then use window() to thin out a regular time series
>and "[.ts" could be modified to just return a simple array subset

That is the way I (try to) use it already. I think if you're doing time-wise
stuff then you should be using dates, except at the lowest level when you need
to get into the representation and use "[". That is probably the main thing that
my tframe kernel lets me do fairly easily.

>(in the process get rid of the horrible warning about not returning a
>time series).

YES PLEASE !! In fact, I always have to redefine that function or I can't see my
output for all the warning messages.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May 13 19:07:23 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 May 1999 20:07:23 +0200
Subject: yet another ts problem
In-Reply-To: Paul Gilbert's message of Thu, 13 May 1999 11:25:15 -0400
References: <Pine.BSF.4.05.9905131005150.525-100000@g.ihaka.slip.auckland.ac.nz>
 <373A9D34.EE7511F9@iarc.fr> <373AEEDA.39CAAC16@bank-banque-canada.ca>
Message-ID: <x2pv44sv1g.fsf@biostat.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> 
> Ross Ihaka wrote:
> 
> > 1. I think that "[.ts" tries too hard to turn its value back into
> >    a time series.  ...
> 
> I agree with this, although, despite all the bugs I'm reporting, a lot of "[.ts"
> works ok. All of my calls to "[.ts" that should try to preserve time series

Notice that there's a quickhack(TM) for the specific problem:

    y <- NextMethod("[")
    if (missing(i)) 
        ts(y, start = start(x), freq = frequency(x))
    else {
        n <- if (is.matrix(x)) 
            nrow(x)

insert "if (is.matrix(i)) return(y)" at the beginning of the else clause.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From leifj@matematik.su.se  Fri May 14 11:30:52 1999
From: leifj@matematik.su.se (leifj@matematik.su.se)
Date: Fri, 14 May 1999 12:30:52 +0200 (MET DST)
Subject: R 0.64 and -release fails to build on DU4.0 (PR#196)
Message-ID: <199905141030.MAA13049@pubhealth.ku.dk>


OS: Digital Unix 4.0E
Compiler: vanilla f77 and cc.

Build error:

f77  -o ../../bin/R.binary arithmetic.o array.o attrib.o bind.o builtin.o 
character.o coerce.o colors.o complex.o context.o cov.o cum.o debug.o 
deparse.o deriv.o devices.o dotcode.o dstruct.o duplicate.o envir.o errors.o 
eval.o format.o fourier.o gram.o gram-ex.o graphics.o iosupport.o list.o 
logic.o main.o match.o memory.o model.o names.o objects.o optimize.o options.o 
par.o paste.o platform.o plot.o plot3d.o plotmath.o print.o printarray.o 
printvector.o printutils.o random.o relop.o saveload.o scan.o seq.o sort.o 
source.o split.o subassign.o subscript.o subset.o summary.o unique.o util.o 
version.o ../unix/libunix.a ../appl/libappl.a ../nmath/libmath.a -lSM -lICE 
-L/usr/local/X11R6.3/lib -lX11 -ldnet_stub -lz -ltermcap -lm
ld:
../unix/libunix.a(system.o): main: multiply defined
fort: Severe: Failed while trying to link.
make[2]: *** [../../bin/R.binary] Error 1
make[2]: Leaving directory `/usr/local/src/R-release/src/main'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/usr/local/src/R-release/src'
make: *** [R] Error 1

Please advise. I tried using egcs 1.1.2 to build R at first but then 
R dies with a floating point exception.

	Best R.

Leif Johansson				Phone: +46 8 164541		
Department of Mathematics		Fax  : +46 8 6126717		
Stockholm University 			email: leifj@matematik.su.se 	

    <This space is left blank for quotational and disclamatory purposes.>



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 14 11:40:18 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 May 1999 12:40:18 +0200
Subject: R 0.64 and -release fails to build on DU4.0 (PR#196)
In-Reply-To: leifj@matematik.su.se's message of Fri, 14 May 1999 12:30:52 +0200 (MET DST)
References: <199905141030.MAA13049@pubhealth.ku.dk>
Message-ID: <x2lneskk8d.fsf@biostat.ku.dk>

leifj@matematik.su.se writes:

> OS: Digital Unix 4.0E
> Compiler: vanilla f77 and cc.
> 
> Build error:
> 
> f77  -o ../../bin/R.binary arithmetic.o array.o attrib.o bind.o builtin.o 
...
> ld:
> ../unix/libunix.a(system.o): main: multiply defined
                              ^^^^^^^^^^^^^^^^^^^^^^^
> 
> Please advise. I tried using egcs 1.1.2 to build R at first but then 
> R dies with a floating point exception.

Hmmm. This looks like f77 is trying to supply its own main() routine.
Try changing LDCMD (in Makeconf) to cc.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 14 11:48:13 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 May 1999 12:48:13 +0200
Subject: r-bugs website down
Message-ID: <x2k8uckjv6.fsf@biostat.ku.dk>

The machine that runs the r-bugs website seems to have gone belly-up
some time yesterday. The e-mail interface should still work. 

(No jokes about "Ascension Day", please, I can make up those myself!)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 14 13:36:22 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 May 1999 14:36:22 +0200
Subject: r-bugs website down
In-Reply-To: Peter Dalgaard BSA's message of "14 May 1999 12:48:13 +0200"
References: <x2k8uckjv6.fsf@biostat.ku.dk>
Message-ID: <x24slf96bd.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> The machine that runs the r-bugs website seems to have gone belly-up
> some time yesterday. The e-mail interface should still work. 

It's back up again now.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri May 14 18:31:01 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 14 May 1999 19:31:01 +0200
Subject: yet another ts problem
References: <Pine.BSF.4.05.9905131005150.525-100000@g.ihaka.slip.auckland.ac.nz> <373A9D34.EE7511F9@iarc.fr> <373AEEDA.39CAAC16@bank-banque-canada.ca>
Message-ID: <373C5DD5.CB6D93F8@iarc.fr>

Paul Gilbert wrote:

> Splus 3.3 has  "[.its", "[.cts", and "[.rts", the class methods for time series.
> However, I haven't used them much and I have no idea if they work properly.

Splus time series do preserve their class: an irregular subset of an rts
(regular)
or its (irregular) yields an its, and a regular subset of either yields an rts.
Since time series are classed objects in R, they are more like Splus "rts"
objects than vanilla S time series: hence the idea that subsetting should
preserve
the class (yes I am responsible for this, and I'm REALLY sorry about the
warning).

> Martyn Plummer wrote:
> 
> >An alternative to using "[.ts" to take row subsets would be to
> >expand the window.ts() function to include a "freq" or "deltat"
> >argument.
> 
> I don't see why this should be necessary? window works with dates and
> automatically knows the frequency of the object.

Perhaps I wasn't very clear. There are three ways to take a subset
of a regular time series that yield another regular time series:
1) Take all observations after "start"
2) Take all observations before "end"
3) Take all observations where time between "start" and the observation
   is a multiple of "deltat".
We all agree that "[.ts" isn't the place to do this.  Since window.ts
already does 1) and 2), I propose extending it to do 3) too. Maybe
this is silly. Maybe nobody else wants to do this. But anyway, the
code is below. YMMV.

Martyn

"window.ts" <-
function (x, start, end, frequency, deltat) 
{
    x <- as.ts(x)
    xtsp <- tsp(x)
    xfreq <- xtsp[3]
    xtime <- time(x)
    ts.eps <- .Options$ts.eps
    if (missing(frequency) && missing(deltat)) 
        yfreq <- xfreq
    else if (missing(deltat)) 
        yfreq <- frequency
    else if (missing(frequency)) 
        yfreq <- 1/deltat
    if (xfreq%%yfreq < ts.eps) {
        thin <- round(xfreq/yfreq)
        yfreq <- xfreq/thin
    }
    else {
        thin <- 1
        yfreq <- xfreq
        warning("Frequency not changed")
    }
    start <- if (missing(start)) 
        xtsp[1]
    else switch(length(start), start, start[1] + (start[2] - 
        1)/xfreq, stop("Bad value for start"))
    if (start < xtsp[1]) {
        start <- xtsp[1]
        warning("start value not changed")
    }
    end <- if (missing(end)) 
        xtsp[2]
    else switch(length(end), end, end[1] + (end[2] - 1)/xfreq, 
        stop("Bad value for end"))
    if (end > xtsp[2]) {
        end <- xtsp[2]
        warning("end value not changed")
    }
    if (start > end) 
        stop("start cannot be after end")
    if (all(abs(start - xtime) > abs(start) * ts.eps)) {
        start <- xtime[(xtime > start) & ((start + 1/xfreq) > 
            xtime)]
    }
    if (all(abs(end - xtime) > abs(end) * ts.eps)) {
        end <- xtime[(xtime < end) & ((end - 1/xfreq) < xtime)]
    }
    i <- seq(trunc((start - xtsp[1]) * xfreq + 1.5), trunc((end - 
        xtsp[1]) * xfreq + 1.5), by = thin)
    y <- if (is.matrix(x)) 
        x[i, , drop = FALSE]
    else x[i]
    ystart <- xtime[i[1]]
    yend <- xtime[i[length(i)]]
    tsp(y) <- c(ystart, yend, yfreq)
    y
}

function (x, i, j, drop = TRUE) 
{
    y <- NextMethod("[")
    if (missing(i)) 
        ts(y, start = start(x), freq = frequency(x))
    else y
}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri May 14 18:55:12 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 14 May 1999 13:55:12 -0400
Subject: yet another ts problem
References: <Pine.BSF.4.05.9905131005150.525-100000@g.ihaka.slip.auckland.ac.nz> <373A9D34.EE7511F9@iarc.fr> <373AEEDA.39CAAC16@bank-banque-canada.ca> <373C5DD5.CB6D93F8@iarc.fr>
Message-ID: <373C637F.6E37B1BE@bank-banque-canada.ca>

>3) Take all observations where time between "start" and the observation
>   is a multiple of "deltat".

ok, and I agree that window.ts seems a better place to do this. I would prefer

window.ts <- function (x, start=NULL, end=NULL, frequency=NULL, deltat=NULL)
then use is.null() rather than missing()
or
window.ts <- function (x, start=start(x), end=end(x), frequency=frequency(x),
deltat=NULL)

as I always get nervous (after many long hours debugging) about how missing
arguments will get matched.

Paul

P.S. And thanks for removing the warning.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 14 19:15:29 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 May 1999 20:15:29 +0200
Subject: matrix() can't handle NaN (PR#193)
In-Reply-To: Peter Dalgaard BSA's message of "12 May 1999 15:13:15 +0200"
References: <199905121107.NAA29025@pubhealth.ku.dk> <x2zp3abfdg.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2btfnecvy.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Whatever. I think we should fix as.double() (really: as.vector(x,
> "double")) to accept the IEEE extended values in the same way that the
> language itself does. 

Fixed now, for what is to become 0.65.0.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hohn@math.utah.edu  Mon May 17 06:44:38 1999
From: hohn@math.utah.edu (Michael Hohn)
Date: Sun, 16 May 1999 23:44:38 -0600 (MDT)
Subject: minor installation problems
Message-ID: <199905170544.XAA06256@sunfish.math.utah.edu>

Hello,

I just finished installing R-0.64.1 on my linux machine (using kernel
2.0.36 under red hat 5.2, and 
gcc version egcs-2.91.60 19981201 (egcs-1.1.1 release)
)

The two problems I had:

1. ./configure --with-readline --with-x --prefix=/usr/local
   ran to a point, then gave up with
    ...	  
    checking return type of signal handlers... void
    checking for working const... yes
    checking size of long... 0
    Size of long must be at least 32 bits

Manual modification of ./configure to use 4 bytes fixed this problem.  
A manual run of the autoconf C program

#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long));
  exit(0);
}

produced the correct result, so
I don't know where this zero size problem came from.  


2.  After the final linking of R via

g77 -o ../../bin/R.binary  arithmetic.o array.o attrib.o bind.o
builtin.o character.o coerce.o colors.o complex.o context.o cov.o
cum.o debug.o deparse.o deriv.o devices.o dotcode.o dstruct.o
duplicate.o envir.o errors.o eval.o format.o fourier.o gram.o
gram-ex.o graphics.o iosupport.o list.o logic.o main.o match.o
memory.o model.o names.o objects.o optimize.o options.o par.o paste.o
platform.o plot.o plot3d.o plotmath.o print.o printarray.o
printvector.o printutils.o random.o relop.o saveload.o scan.o seq.o
sort.o source.o split.o subassign.o subscript.o subset.o summary.o
unique.o util.o version.o ../unix/libunix.a ../appl/libappl.a
../nmath/libmath.a -lSM -lICE -L/usr/X11R6/lib -lX11 -lreadline -lz
-ldl -lncurses -lm

the binary would exit with the error

    /usr/local/lib/R-0.64.1/bin/R.binary: error in loading shared
    libraries
    : undefined symbol: __register_frame_info

when run.

This symbol is defined in libstdc++.  A manual link via 

g77 -o ../../bin/R.binary /usr/lib/libstdc++.so arithmetic.o array.o
attrib.o bind.o builtin.o character.o coerce.o colors.o complex.o
context.o cov.o cum.o debug.o deparse.o deriv.o devices.o dotcode.o
dstruct.o duplicate.o envir.o errors.o eval.o format.o fourier.o
gram.o gram-ex.o graphics.o iosupport.o list.o logic.o main.o match.o
memory.o model.o names.o objects.o optimize.o options.o par.o paste.o
platform.o plot.o plot3d.o plotmath.o print.o printarray.o
printvector.o printutils.o random.o relop.o saveload.o scan.o seq.o
sort.o source.o split.o subassign.o subscript.o subset.o summary.o
unique.o util.o version.o ../unix/libunix.a ../appl/libappl.a
../nmath/libmath.a -lSM -lICE -L/usr/X11R6/lib -lX11 -lreadline -lz
-ldl -lncurses -lm

produced a working executable.



Any ideas on the source of these two problems?

Cheers,
	Mike
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon May 17 09:39:13 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 17 May 1999 10:39:13 +0200
Subject: Using  automake & libtool instead of just autoconf.. ?
Message-ID: <199905170839.KAA07904@sophie.ethz.ch>

Since we also ``sometimes'' have problems with incorrect configurations...
 ;-)

Read this on the octave mailing list :
  (I'm not using octave;  I'm trying to hear what they are talking about)

------- Start of forwarded message -------
Date: Mon, 17 May 1999 10:30:51 +0200
From: Thomas Walter <walter@pctc.chemie.uni-erlangen.de>
To: jwe@bevo.che.wisc.edu
CC: gohel@babbage.csee.usf.edu, help-octave@bevo.che.wisc.edu
Subject: Re: IRIX octave 2.0.14 can't find runtime libs


>>>>> "John" == John W Eaton <jwe@bevo.che.wisc.edu> writes:

[snip]

    John> Eventually, Octave's configure script and Makefiles should be fixed to
    John> use libtool, which should help to make these things work better.
    John> Unfortunately, I have little time to spend working on that project.
    John> Any volunteers?

To do this I think it is best to use 'automake' too.  Writing the
dependencies into the files 'Makefile.am' is much easier because they
are much shorter then `Makefile.in' files..  After that
calling 'automake' will build all the 'Makefile.in'.  And 'automake'
knows how to use 'libtool'.  There will be no need write rules to call
'libtool' by hand.

What are the opinions about that?  I have used automake and libtool
for a long time and I would help to do the step.

...
------- End of forwarded message -------

Any "R-devel"er who's willing to help here ?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Fri May 21 06:15:03 1999
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri, 21 May 1999 07:15:03 +0200
Subject: Bug list summary (automatic post)
Message-ID: <199905210515.HAA08645@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100

Directory:  Add-ons

* PR# 137 *
Subject: funfits
From: "Alvaro A. Novo" <novo@uiuc.edu>
Date: Tue, 9 Mar 1999 22:24:54 -0600

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100

Directory:  Documentation

* PR# 146 *
Subject: nlm docs
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 24 Mar 1999 15:48:41 +0100 (MET)

Directory:  Graphics

* PR# 38 *
Subject: possible bugs
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Sun, 6 Sep 1998 15:59:34 -0400 (EDT)
--ylim problem which appears solved
--Postscript overflow still with us (22feb99)
* PR# 61 *
Subject: points(...,  cex = ..)  is pretty wrong...
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 2 Nov 1998 19:15:06 +0100
--Symbols getting decentered when too large cex for X. Still there 22feb99  
* PR# 66 *
Subject: Bug with bounding box?
From: johnp@tip.csiro.au
Date: Thu, 3 Dec 1998 02:15:38 +0100
--Yes, this appears to have x/y reversed. The supplied example gives 
--%%Orientation: Landscape
--%%BoundingBox: 18 18 824 577 
--but the convention is to rotate the paper but leave the coordinate system.
* PR# 69 *
Subject: Some graphics bugs
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 04 Dec 1998 11:42:50 -0000 ()
Date: 04-Dec-98
--Various anomalies with text size and alignment. 2B appears to be solved. The 
--rest is still there (22feb99)
* PR# 79 *
Subject: apology: text(locator(),"sometext") works
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Tue, 15 Dec 1998 19:45:29 -0500 (EST)
--Clipping discrepancy x11/PS
* PR# 106 *
Subject: border-arg. in persp
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
Date: Fri, 29 Jan 1999 11:12:39 +0100
--No effect of arg. Still here 22feb99. Segfault with border=0 seems gone now. 
* PR# 114 *
Subject: PostScript Level 1/2 bug
From: ben@eno.princeton.edu
Date: Mon, 8 Feb 1999 00:07:20 +0100
--Not sure whether this is really PS lev 1/2 issue.
--/Font5 /Symbol findfont definefont
--(missing scalefont?)
* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
* PR# 123 *
Subject: Text in plot
From: Ennapadam Venkatraman <venkat@biosta.mskcc.org>
Date: Thu, 18 Feb 1999 13:05:37 -0500
--Multiline text not working
* PR# 130 *
Subject: lty=0 -- shouldn't it give an invisible line?
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 28 Feb 1999 21:45:43 +0100
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
* PR# 153 *
Subject: image + x11
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
Date: Wed, 31 Mar 1999 14:09:53 +0200

Directory:  In-Out

* PR# 125 *
Subject: scan rejects complex
From: John.Peters@tip.csiro.au (John Peters)
Date: Mon, 22 Feb 1999 10:08:14 +1100 (EST)
* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM

Directory:  Installation

* PR# 95 *
Subject: patch to 63.2
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 15 Jan 1999 11:00:25 +0100 (MET)
--An incident where the 0.63.2 patches didn't take. So far the only one. 
--Maybe caused by patching unclean sources?

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
* PR# 118 *
Subject: Function parsing
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Wed, 10 Feb 1999 13:42:01 +0000 (GMT)
--comment placement.
* PR# 166 *
Subject: outer fails with group generic operations on factors
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Tue, 13 Apr 1999 18:28:53 +0100 (BST)
--There is a suggested solution (PD), but not yet implemented (99/05/07)

Directory:  Low-level

* PR# 37 *
Subject: S.h compatibility issues
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 6 Sep 1998 19:58:47 +0100 (BST)
--1 is fixed
--2 R's own RNG entry points are still not public
--3 is the perennial issue of what is the `public' API -- specific points are
--fixed
* PR# 101 *
Subject: Re: [R] Re: R-0.63.2 for Windows - some comments
From: Guido Masarotto <guido@hal.stat.unipd.it>
Date: Fri, 22 Jan 1999 12:40:26 +0100
--This is really about fixed buffer sizes in printutils.c
* PR# 135 *
Subject: summary() of lm() problem
From: Simon Fear <fears@roycastle.liv.ac.uk>
Date: Tue, 9 Mar 1999 13:18:37 -0000 
--lm (?) AND Windows problem;  Win solved (fudged) for 0.63.3
--
--Another low-level buffer-size problem
* PR# 180 *
Subject: nlm on a function in the Math group
From: Douglas Bates <bates@stat.wisc.edu>
Date: Thu, 29 Apr 1999 17:11:00 -0500 (CDT)
--causes R to core dump
* PR# 185 *
Subject: Re: [R] R_problem_buf in the S.h files & lists in .C
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 1999 00:32:49 +0200
--S objects in .C calls (not just lists) are now documented in the help file

Directory:  Misc

* PR# 91 *
Subject: possible bug
From: Rashid Nassar <rnassar@duke.edu>
Date: Sat, 9 Jan 1999 14:50:58 -0500 (EST)
--Remaining issue is whether we can do something more friendly than dumping 
--users into vi?

Directory:  Models

* PR# 121 *
Subject:  model.frame mangles time series 
From: Peter Dalgaard BSA <pd@biostat.ku.dk>
Date: Thu, 18 Feb 1999 15:47:24 +0100
--Subset in C code + attributes = mess
--Switch to interpreted ("[")

Directory:  Startup

* PR# 21 *
Subject: Restoring large image files
From: Martyn Plummer <plummer@iarc.fr>
Date: Fri, 21 Aug 1998 13:29:16 -0000 ()
--Request to change in error conditions in R_InitialData. Could be done, but
--at present initial loads are not distinguished from load("file") calls. 

Directory:  System-specific

* PR# 145 *
Subject: R-0.63.3 package on IRIX 6.5 machine
From: Jayshree Sarma <jsarma@cs.gmu.edu>
Date: Tue, 23 Mar 1999 16:54:20 -0500 (EST)
* PR# 163 *
Subject: IRIX compile
From: mtim@farm.ecs.umass.edu
Date: Sat, 10 Apr 1999 19:35:43 +0200

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)

Directory:  Windows

none

Directory:  incoming

* PR# 174 *
Subject:  do.call() mangles expressions in arguments 
From: Peter Dalgaard BSA <pd@biostat.ku.dk>
Date: Wed, 21 Apr 1999 19:39:53 +0200
* PR# 186 *
Subject: subscripting in list()
From: Wenxin Mao <mao@compstat.wharton.upenn.edu>
Date: Sun, 9 May 1999 12:42:29 -0400 (EDT)
* PR# 187 *
Subject: subscripting in list()
From: Wenxin Mao <mao@compstat.wharton.upenn.edu>
Date: Sun, 9 May 1999 13:02:51 -0400 (EDT)
* PR# 189 *
Subject: model.matrix crashes
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Tue, 11 May 1999 10:16:33 +0200 (MET DST)
* PR# 190 *
Subject: PRIVATE: xxxx
From: barakil@nice.com
Date: Tue, 11 May 1999 13:38:49 +0200 (MET DST)
* PR# 191 *
Subject: dev.print help page
From: wsi@gcal.ac.uk
Date: Tue, 11 May 1999 13:39:05 +0200 (MET DST)
* PR# 192 *
Subject: dev.print aspect ratio
From: wsi@gcal.ac.uk
Date: Tue, 11 May 1999 13:43:50 +0200 (MET DST)
* PR# 193 *
Subject: matrix() can't handle NaN
From: wsi@gcal.ac.uk
Date: Tue, 11 May 1999 14:01:59 +0200 (MET DST)
* PR# 194 *
Subject: Memory crash.
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 12 May 1999 14:43:45 +0200 (MET DST)
* PR# 195 *
Subject: Error in stripplot  (was Re: [R] stripplot gets weird)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 13 May 1999 07:34:06 +0100 (BST)
* PR# 196 *
Subject: R 0.64 and -release fails to build on DU4.0
From: Leif Johansson <leifj@matematik.su.se>
Date: Fri, 14 May 1999 12:32:14 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Cor.Berrevoets@gironet.nl  Fri May 21 19:04:12 1999
From: Cor.Berrevoets@gironet.nl (Cor.Berrevoets@gironet.nl)
Date: Fri, 21 May 1999 20:04:12 +0200 (MET DST)
Subject: glm crash (PR#197)
Message-ID: <199905211804.UAA12871@pubhealth.ku.dk>

Dear bug-busters,

This week I've posted a message to the R-help mailing to inquire if
anybody had experienced alike me. When I run the following GLM:
glm(n~s+c+m, family=quasi(link=log, variance=mu))
several times using exactly the same dataset R crashes at random. I have
tried to probe into the problem by tracking the response times of the
above function with system.time (e.g. system.time(glm ....))

I noticed that the response times increased in subsequent calls to the
function, at some (random) point leading to a crash. So it looked as if
R was "leaking" somewhere. Then I started all-over again (restarted PC)
and released before the glm-command a gc-command to collect the garbage.
That works rather well and the crashing seems less frequent (mostly
after 3-4 times issueing the glm-command) . Also the increasing response
times changed into a stable component with one big exception, the First
Call. Every time after fully re-starting R I issued gc() and then the
glm-command . This call is about 1/3 or so of the time spend in the
subsequent calls. Looking at the Ncells/Vcells hardly any difference
exists, on average the Ncells/Vcells (virgin state of the program) are
about 50 cells bigger than after the subsequent glm-commands.  In the
table below you can see the effects I just mentioned, notice the "odd"
behaviour of the default Vsize.

Table: response times glm function at varying Vsizes.

Vsize    1st response    subsequent
default            47.57        27.96
8M                39.27        62.15
16M              38.44        62.37
32M              13.34        32.77
64M              10.13        34.28
128M            11.45        34.21

Im using R 0.64.1 on Win95..

Maybe someone of your team can tell me more on the nature of this
"thing".

Hoping not to bug to much,

greetings

Cor Berrevoets





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri May 21 19:22:21 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 21 May 1999 11:22:21 -0700 (PDT)
Subject: glm crash (PR#197)
In-Reply-To: <199905211804.UAA12871@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.9905211112010.269-100000@wompom.biostat.washington.edu>

On Fri, 21 May 1999 Cor.Berrevoets@gironet.nl wrote:

> Dear bug-busters,
> 
> This week I've posted a message to the R-help mailing to inquire if
> anybody had experienced alike me. When I run the following GLM:
> glm(n~s+c+m, family=quasi(link=log, variance=mu))
> several times using exactly the same dataset R crashes at random. I have
> tried to probe into the problem by tracking the response times of the
> above function with system.time (e.g. system.time(glm ....))

This could be some nasty form of memory problem, but it is difficult to
tell.  With a program as complex as R it is very hard to diagnose bugs
from symptoms like this.

At a minimum we need to know exactly what message R gives, however this
probably isn't enough. An example data set that reliably produces the
problem gives us a chance to track the bug down and at least makes it
easy to distinguish Windows-based bugs from general-purpose bugs.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Fri May 21 21:09:06 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Fri, 21 May 1999 21:09:06 +0100
Subject: glm crash (PR#197)
In-Reply-To: <199905211804.UAA12871@pubhealth.ku.dk>; from Cor.Berrevoets@gironet.nl on Fri, May 21, 1999 at 08:04:12PM +0200
References: <199905211804.UAA12871@pubhealth.ku.dk>
Message-ID: <19990521210906.00262@hal.stat.unipd.it>

On Fri, May 21, 1999 at 08:04:12PM +0200, Cor.Berrevoets@gironet.nl wrote:
> Dear bug-busters,
> 
> This week I've posted a message to the R-help mailing to inquire if
  
  Cor,
  I apologize for not asking you what follows after your first message.

> anybody had experienced alike me. When I run the following GLM:
> glm(n~s+c+m, family=quasi(link=log, variance=mu))

  Could you send me the data? I will try to replicate the error
  both under Windows and some flavour of Unixes to try to understand
  what is going on. 
  Have you got into similar problem with previous version?
  
  guido
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun May 23 07:59:02 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 23 May 1999 08:59:02 +0200 (MET DST)
Subject: Bug in loglin with variable called "c" (PR#198)
Message-ID: <199905230659.IAA17027@pubhealth.ku.dk>

Summary:

loglin will fail if there is a global variable called c. I have
fixed this for 0.64.2 and 0.65.

On Sat, 22 May 1999, Cor en Aylin wrote:

> Dear Brian,
> 
> Using the mass library for R (the most recent port dated 16 may 1999) I

Could you give version numbers in such reports please: at the moment there
is an official version (5.3pl037) of MASS for R, plus a pre-release of MASS
for V&R3, and you seem to be using the latter.  That is _not_ the most
recent port:  it is a different major version (6.1 not 5.3) and please
don't use it unless you like testing pre-release software. BTW, the name is
MASS, not mass or Mass: it is an acronym.

> have encountered a minor problem you  might want to be informed about :
> 
> If used the following command:
>   mydata.loglm <- loglm(n~ s+c+m, mydata)
> 
> I got an the following error :  Error in get(x, envir, mode, inherits) :
> variable "FUN" was not found
> 
> traceback()
> [1] "get(as.character(f), mode = \"function\")"
> [2] "match.fun(FUN)"
> [3] "lapply(y, c, x[i])"
> [4] "subsets(margin[[k]])"
> [5] "loglin(data, margins, start = start, fit = fitted, param = param, "
> 
> [6] "    eps = eps, iter = iter, print = print)"
> [7] "loglm1.default(formula, data, ..., start = st)"
> [8] "loglm1.data.frame(formula, data, ...)"
> [9] "loglm(n ~ s + m + c, mydata )"
> 
> Trying to see where the problem sits within loglin I saw that (line 3 of
> traceback) variable "c" is used in lapply, and since my data-variable
> also is called "c" mine was used instead (wrongly). I understood the
> message and I think that I better not use often uses variable-names
> (a..z) as names for my data-vars.

The problem is not in MASS: it is occurring in the R version of loglin.

To reproduce this I have to have a global variable c, not a column c in
the dataframe. So that is the workaround: make your variables columns in 
mydata. Here is a example:

library(MASS)
data(quine)
c <- quine$Eth
loglm(Days ~ .^2, quine)

To fix this in R, the line in loglin needs to be lapply(y, "c", x[i]).

Kurt: do you want explicitly to get c() from package:base here, to be
safer, or would that be too restrictive?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From o1422@aol.com  Wed May 26 06:54:47 1999
From: o1422@aol.com (o1422@aol.com)
Date: Wed, 26 May 1999 07:54:47 +0200
Subject: INTERNATIONAL DRIVERS LICENCE
Message-ID: <B0003602282@mail.astat.de>




INTERNATIONAL DRIVER'S LICENSE

Need a new driver's license? 

Too many points or other trouble?

Want a license that can never be suspended 
or revoked?

Want ID for nightclubs or hotel check-in?

Avoid tickets, fines, and mandatory driver's 
education.

Protect your privacy, and hide your identity.

The United Nations gave you the privilege to
drive freely throughout the world! (Convention 
on International Road Traffic of September 19, 
1949 & World Court Decision, The Hague, 
Netherlands, January 21, 1958)

Take advantage of your rights.  Order a valid 
International Driver's License that can never 
be suspended or revoked.

Confidentiality assured.

CALL NOW!!! 

1-937-586-9313 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Wed May 26 14:53:44 1999
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Wed, 26 May 1999 15:53:44 +0200 (MET DST)
Subject: help for trig functions (PR#199)
Message-ID: <199905261353.PAA00615@pubhealth.ku.dk>

The help for trig functions (e.g. ?tan) says 
Description:

        These functions give the obvious trigonometric func-
        tions.  They respectively compute the cosine, sine,
        tangent, arc-cosine, arc-sine, arc-tangent and arc-tan-
        gent of two arguments.

1. I think it would be useful to state that the arguments are in radians
(not degrees).

2. only atan2 expects two arguments, the rest take one argument.

> version
           _                 
platform   i686-unknown-linux
arch       i686              
os         linux             
system     i686, linux       
status                       
status.rev 0                 
major      0                 
minor      64.1              
year       1999              
month      May               
day        8                 
language   R     

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From msa@biostat.mgh.harvard.edu  Thu May 27 17:40:04 1999
From: msa@biostat.mgh.harvard.edu (msa@biostat.mgh.harvard.edu)
Date: Thu, 27 May 1999 18:40:04 +0200 (MET DST)
Subject: Factor structures not preserved after dump/dput (PR#200)
Message-ID: <199905271640.SAA11822@pubhealth.ku.dk>

Full_Name: Marek Ancukiewicz
Version: 0.64.0
OS: Linux (RedHat 6.0)
Submission from: (NULL) (132.183.12.87)


I've noticed that factor structures get recoded when the data is dumped
using either dump or dput and then restored with source or dget. This
occurs when the values taken by factors do not include 1. For example:

  a <- factor(1:5,1:5,c('a','b','c','d','e'))
  b <- a[3:5]
  dput(b,'b.data')
  new.b <- dget('b.data')

Then b is not the same as new.b:
  > b
  [1] c d e
  Levels:  a b c d e 
  > new.b
  [1] a b c
  Levels:  a b c d e 

This seems to be a very serious bug. It can make one to 
mislabel treatments: a very emabarassing (and potentially 
disastrous) mistake. The reason for this bug seems to
lie in a way in which structure() treats factor structures.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May 27 18:06:37 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 May 1999 19:06:37 +0200
Subject: Factor structures not preserved after dump/dput (PR#200)
In-Reply-To: msa@biostat.mgh.harvard.edu's message of "Thu, 27 May 1999 18:40:04 +0200 (MET DST)"
References: <199905271640.SAA11822@pubhealth.ku.dk>
Message-ID: <x2wvxujvc2.fsf@blueberry.kubism.ku.dk>

msa@biostat.mgh.harvard.edu writes:

>   a <- factor(1:5,1:5,c('a','b','c','d','e'))
>   b <- a[3:5]
>   dput(b,'b.data')
>   new.b <- dget('b.data')
> 
> Then b is not the same as new.b:
>   > b
>   [1] c d e
>   Levels:  a b c d e 
>   > new.b
>   [1] a b c
>   Levels:  a b c d e 
> 
> This seems to be a very serious bug. It can make one to 
> mislabel treatments: a very emabarassing (and potentially 
> disastrous) mistake. The reason for this bug seems to
> lie in a way in which structure() treats factor structures.

Ouch! The fix seems to be to have structure() contain

        if (is.numeric(.Data) && any(names(attrib) == "levels")) 
            .Data <- factor(.Data, levels = 1:max(1,.Data))

rather than just plain  factor(.Data) .  Will commit this in a moment.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

