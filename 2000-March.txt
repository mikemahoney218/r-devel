From J.C.Rougier@durham.ac.uk  Wed Mar  1 11:13:03 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Wed, 1 Mar 2000 12:13:03 +0100 (MET)
Subject: [Rd] "is.qr" definition (PR#465)
Message-ID: <200003011113.MAA25485@pubhealth.ku.dk>

Might it be possible to tighten the definition of "is.qr".  I
noticed that after I mistakenly typed

example(lm)  # make lm object named lm.D9
qr.Q(lm.D9)

which exhausted the heap memory and produced two warning
messages.  As an object of class "lm" has a "qr" component,
"is.qr" failed to detect that "lm.D9" was not a "qr" object.  The
obvious thing might be to tighten the definition of "is.qr",
perhaps

"is.qr" <-
function(x) all(c("qr", "rank", "qraux", "pivot") %in% names(x))

And may I add my congratulations to the core group.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Patched
 major = 0
 minor = 99.0
 year = 2000
 month = February
 day = 9
 language = R

Search Path:
 .GlobalEnv, package:mva, package:patches, Autoloads, package:base


Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Mar  1 14:43:18 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 1 Mar 2000 15:43:18 +0100 (MET)
Subject: [Rd] "is.qr" definition (PR#465)
In-Reply-To: <200003011113.MAA25485@pubhealth.ku.dk>
References: <200003011113.MAA25485@pubhealth.ku.dk>
Message-ID: <14525.11398.674344.77690@lynne.ethz.ch>

>>>>> "JonR" == J C Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> Might it be possible to tighten the definition of "is.qr".  I
    JonR> noticed that after I mistakenly typed

    JonR> example(lm) # make lm object named lm.D9
    JonR>  qr.Q(lm.D9)

    JonR> which exhausted the heap memory and produced two warning
    JonR> messages.  As an object of class "lm" has a "qr" component,
    JonR> "is.qr" failed to detect that "lm.D9" was not a "qr" object.
indeed.
yes, it should be tightened.

    JonR> The obvious thing might be to tighten the definition of "is.qr",

    JonR> perhaps

    JonR> "is.qr" <- function(x) all(c("qr", "rank", "qraux", "pivot") %in%
    JonR> names(x))

Just checked: 
 S-plus 5.1 checks for  qr and qraux only (but not just for the presence of
 the names, also !is.null(.) as we now do for $qr.

It makes sense to have this a FAST function since it's called quite a few
times in some calculations... maybe change current
    is.qr <- function(x) is.null(x$qr)
to
    is.qr <- function(x) is.null(x$qr) && !is.null(x$rank) && !is.null(x$qraux)

The current behavior is "according to documentation" so that would have to
be updated as well.

    JonR> And may I add my congratulations to the core group.

thank you 

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bhoel@server.python.net  Wed Mar  1 17:12:57 2000
From: bhoel@server.python.net (bhoel@server.python.net)
Date: Wed, 1 Mar 2000 18:12:57 +0100 (MET)
Subject: [Rd] Re: R-1.0.0 is released (PR#466)
Message-ID: <200003011712.SAA01327@pubhealth.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> I've rolled up R-1.0.0.tgz a short while ago. 
> 
I've build R-1.0.0 on my

>uname -a
Linux pchoel 2.2.14 #3 Mit Jan 5 08:57:39 MET 2000 i686 unknown

box. Calling "make check" fails with 

...
make[4]: Entering directory `/opt/src/devel/R-1.0.0/tests/Examples'
updating base-Ex.R ...
make[5]: Entering directory `/opt/src/devel/R-1.0.0/src/library'
 >>> Building/Updating help pages for package `base'
     Formats: text example 
make[5]: Leaving directory `/opt/src/devel/R-1.0.0/src/library'
running code in base-Ex.R ...
../../bin/R --vanilla < base-Ex.R > base-Ex.Rout
make[4]: *** [base-Ex.Rout] Error 1
...

and 

>tail tests/Examples/base-Ex.Rout
> 
> cut(rep(1,5),4)#-- dummy
[1] (0.9995,1] (0.9995,1] (0.9995,1] (0.9995,1] (0.9995,1]
Levels:  (0.999,0.9995] (0.9995,1] (1,1.0005] (1.0005,1.001] 
> tx0 <- c(9, 4, 6, 5, 3, 10, 5, 3, 5)
> x <- rep(0:8, tx0)
> tx <- table(x)
> all(tx == tx0)
Error in all(tx == tx0) : dim<- length of dims do not match the length of object
Execution halted

Don't shure what I should think about it. 

my compiler is:

>gcc --version
2.95.2

R is compiled using the

"-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro -march=pentiumpro -fschedule-insns2"

compiler switches. I used 

./configure --with-g77 --enable-blas_risc --enable-readline --with-x

for configuring.

Cheers

Berthold

-- 
bhoel@starship.python.net / http://starship.python.net/crew/bhoel/
        It is unlawful to use this email address for unsolicited ads
        (USC Title 47 Sec.227). I will assess a US$500 charge for
        reviewing and deleting each unsolicited ad.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar  1 19:27:43 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 1 Mar 2000 20:27:43 +0100 (MET)
Subject: [Rd] Re: [R] Re: R-1.0.0 is released (PR#467)
Message-ID: <200003011927.UAA01880@pubhealth.ku.dk>

bhoel@server.python.net (Berthold Höllmann) writes:

> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
> 
> > I've rolled up R-1.0.0.tgz a short while ago. 
> > 
> I've build R-1.0.0 on my
> 
> >uname -a
> Linux pchoel 2.2.14 #3 Mit Jan 5 08:57:39 MET 2000 i686 unknown
> 
> box. Calling "make check" fails with 
....
> > all(tx == tx0)
> Error in all(tx == tx0) : dim<- length of dims do not match the length of object
> Execution halted
> 
> Don't shure what I should think about it. 
> 
> my compiler is:
> 
> >gcc --version
> 2.95.2
> 
> R is compiled using the
> 
> "-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro -march=pentiumpro -fschedule-insns2"
> 
> compiler switches. I used 
> 
> ./configure --with-g77 --enable-blas_risc --enable-readline --with-x
> 
> for configuring.

That's a pretty heavy set of optimization options you're using there!

Basically, there are two possibilities:

1) You've triggered a compiler bug
2) You've triggered a bug in R

In either case, you'll have to dig deeper and see if you can catch the
exact spot where things go wrong. You might start R with the debugger,
run the base-Ex.R with it while having a breakpoint set at the error
message you are getting. But before that try running the example that
triggers the bug by itself and see if the bug is still tickled.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar  1 19:40:48 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Mar 2000 20:40:48 +0100
Subject: [Rd] Re: [R] Re: R-1.0.0 is released (PR#467)
In-Reply-To: p.dalgaard@biostat.ku.dk's message of "Wed, 1 Mar 2000 20:27:43 +0100 (MET)"
References: <200003011927.UAA01880@pubhealth.ku.dk>
Message-ID: <x266v6cwcf.fsf@blueberry.kubism.ku.dk>

p.dalgaard@biostat.ku.dk writes:

...and notice that it is a very bad idea to mail to both r-help and
r-bugs. Anyone who answers the one on r-help without resetting the
Cc's will generate a new PR# , like I just did!

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu Mar  2 10:07:39 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Thu, 02 Mar 2000 11:07:39 +0100 (CET)
Subject: [Rd] Re: R-1.0.0 is released (PR#466)
In-Reply-To: <200003011712.SAA01327@pubhealth.ku.dk>
Message-ID: <XFMail.000302110739.plummer@iarc.fr>

On 01-Mar-00 bhoel@server.python.net wrote:
> R is compiled using the
> 
> "-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro
> -march=pentiumpro -fschedule-insns2"
> 
> compiler switches. I used 
> 
> ./configure --with-g77 --enable-blas_risc --enable-readline --with-x
> 
> for configuring.

I can't help noticing that you are configuring for a RISC optimized BLAS
library on an Intel x86 processor.  I have no idea if this is serious,
but it seems a bit odd.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu Mar  2 10:41:12 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Thu, 02 Mar 2000 11:41:12 +0100 (CET)
Subject: [Rd] Mathlib
Message-ID: <XFMail.000302114112.plummer@iarc.fr>

First of all I would like to join the chorus of approval over the release
of R 1.0.0.  It really is an excellent piece of software. I'm sure you
will astonish us again with Omega.

I have a query about Mathlib.  It is such a nice collection of functions
that it would be nice to use it in other software, not necessarily related
to R.  Is it possible to build Mathlib separately, and/or install the
shared object and the header file in a more public place?

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Mar  2 11:04:39 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 2 Mar 2000 11:04:39 +0000 (GMT)
Subject: [Rd] Mathlib
Message-ID: <200003021104.LAA06377@toucan.stats.ox.ac.uk>


> X-Priority: 3 (Normal)
> Date: Thu, 02 Mar 2000 11:41:12 +0100 (CET)
> From: Martyn Plummer <plummer@iarc.fr>
> To: R-devel@stat.math.ethz.ch
> Subject: [Rd] Mathlib
> 
> First of all I would like to join the chorus of approval over the release
> of R 1.0.0.  It really is an excellent piece of software. I'm sure you
> will astonish us again with Omega.
> 
> I have a query about Mathlib.  It is such a nice collection of functions
> that it would be nice to use it in other software, not necessarily related
> to R.  Is it possible to build Mathlib separately, and/or install the
> shared object and the header file in a more public place?

It has been possible. Note that the header file has a switch 

/*-- Mathlib as part of R --  undefine this for standalone : */
#define MATHLIB_IN_R

which controls whether R error handling is used.

Now, I suspect that it may not be totally in a state where it can be
used separately in 1.0.0, as this may well not have been tested 
recently. It did work at some stage between 0.90.1 and 0.99.0, as
I tested it during the API changes, but there have been a lot
of changes since, and at least two of those (log1p and pnorm5) have
failed in the standalone case when I tried just now.

The other problem is that some careful configuring would be needed for
the settings of e.g. ISNAN.

Is it worth trying to set up a configure script and Makefile.in to build
a standalone libnmath.a?   I suspect Martyn is suggesting that it is?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Mar  2 11:39:02 2000
From: gb@stat.umu.se (gb@stat.umu.se)
Date: Thu, 2 Mar 2000 12:39:02 +0100 (CET)
Subject: [Rd] Optimized blas?
In-Reply-To: <XFMail.000302110739.plummer@iarc.fr>
Message-ID: <Pine.LNX.4.10.10003021232510.10772-100000@pc16.stat.umu.se>

On Thu, 2 Mar 2000, Martyn Plummer wrote:

> On 01-Mar-00 bhoel@server.python.net wrote:
> > R is compiled using the
> > 
> > "-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro
> > -march=pentiumpro -fschedule-insns2"
> > 
> > compiler switches. I used 
> > 
> > ./configure --with-g77 --enable-blas_risc --enable-readline --with-x
> > 
> > for configuring.
> 
> I can't help noticing that you are configuring for a RISC optimized BLAS
> library on an Intel x86 processor.  I have no idea if this is serious,
> but it seems a bit odd.

Talking about that, is there an x86 optimized (for Linux and/or NT)
BLAS around somewhere?

Göran
----------------------------------------------------------
 Göran Broström                      tel: +46 90 786-5223
 Department of Statistics            fax: +46 90 786-6614
 Umeå University                                         
 SE-90187 Umeå, Sweden              email: gb@stat.umu.se
                                                        
 http://www.stat.umu.se/egna/gb    ftp://capa.stat.umu.se
----------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Mar  2 13:52:01 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 02 Mar 2000 07:52:01 -0600
Subject: [Rd] Optimized blas?
In-Reply-To: gb@stat.umu.se's message of "Thu, 2 Mar 2000 12:39:02 +0100 (CET)"
References: <Pine.LNX.4.10.10003021232510.10772-100000@pc16.stat.umu.se>
Message-ID: <qxpzoshscn2.fsf@verdi.stat.wisc.edu>

>>>>> "gb" == gb  <gb@stat.umu.se> writes:

  >> I can't help noticing that you are configuring for a RISC
  >> optimized BLAS library on an Intel x86 processor.  I have no idea
  >> if this is serious, but it seems a bit odd.

  gb> Talking about that, is there an x86 optimized (for Linux and/or
  gb> NT) BLAS around somewhere?

You can try atlas (http://www.netlib.org/atlas/). You will have to
download the source and build it on your machine if you want it to
work optimally. The problem with that is that it does not build the
shared libraries by default and the whole build process is rather
complicated. Also, you will have to patch the R-1.0.0 configure.in file
(I am attaching the patch below) and then run autoconf to generate the
configure file.

Even after you do all these, the performance benefit is not great. R
currently uses only level 1 blas and the most significant atlas
optimizations are for level 3 (and level 2 to some extant). I do not
think that it is worth the effort.

Note that this patch for autoconf is a hack borrowed from a hack on
the octave configure.in and I have tested this only on a debian x86
system.

Saikat

========================================================================
--- configure.in	Thu Mar  2 07:27:13 2000
+++ configure.in	Thu Mar  2 07:34:18 2000
@@ -126,6 +126,11 @@
     fi],
   use_blas_risc=true)
 
+AC_ARG_WITH(fastblas,
+  [  --with-fastblas         use an optimized BLAS library (if available)],
+  [ use_fastblas=${withval} ],
+  use_fastblas=true)
+
 AC_ARG_WITH(dxml,
   [  --with-dxml             use DXML library (if available)],
   [ if test "${withval}" = no; then
@@ -352,7 +357,42 @@
 if ${use_dxml}; then
   AC_CHECK_LIB(dxml, main, FLIBS="-ldxml ${FLIBS}" BLAS="")
 fi
-if test -n "${BLAS}" && ${use_blas}; then
+
+# ----------------------------------------------------------------------
+# Checks for BLAS and LAPACK libraries:
+
+# name of Fortran dgemm function to check for (depends upon F77 compiler
+# name-mangling scheme):
+if test "$r_cv_prog_f77_append_underscore" = "yes"; then
+  dgemm_func=dgemm_
+else
+  dgemm_func=dgemm
+fi
+
+# remember current FLIBS, so we can check if any libs were found below.
+blas_save_FLIBS="${FLIBS}"
+if test ${use_fastblas} = no; then
+  blas_save_FLIBS="different from $LIBS so tests fail below"
+elif test ${use_fastblas} != "yes"; then
+  # user specified a BLAS library to try on the command line
+  AC_CHECK_LIB($use_fastblas, $dgemm_func, 
+    [ BLAS="" FLIBS="-l$use_fastblas $FLIBS"], , ${FLIBS})
+fi
+
+if test "${blas_save_FLIBS}" = "${FLIBS}"; then
+  # Checks for ATLAS BLAS library:
+  AC_CHECK_LIB(atlas, ATL_xerbla,
+      [ FLIBS="-latlas ${FLIBS}"], , $FLIBS)
+  if test "${blas_save_FLIBS}" != "${FLIBS}"; then
+    # check for other atlas libs:
+    AC_CHECK_LIB(cblas, cblas_dgemm,
+      [ FLIBS="-lcblas ${FLIBS}"
+	AC_CHECK_LIB(f77blas, $dgemm_func, 
+	  [ BLAS="" FLIBS="-lf77blas ${FLIBS}"],
+	  [ FLIBS="{blas_save_FLIBS}"], $FLIBS)],
+	[ FLIBS="{blas_save_FLIBS}"], $FLIBS)
+  fi
+elif test -n "${BLAS}" && ${use_blas}; then
   AC_CHECK_LIB(blas, main,
     [ FLIBS="-lblas ${FLIBS}" BLAS=""
       if ${use_blas_risc}; then

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Mar  2 14:43:50 2000
From: gb@stat.umu.se (gb@stat.umu.se)
Date: Thu, 2 Mar 2000 15:43:50 +0100 (CET)
Subject: [Rd] R and lapack/linpack
In-Reply-To: <qxpzoshscn2.fsf@verdi.stat.wisc.edu>
Message-ID: <Pine.LNX.4.10.10003021516240.11160-100000@pc16.stat.umu.se>

On 2 Mar 2000, Saikat DebRoy wrote:

> >>>>> "gb" == gb  <gb@stat.umu.se> writes:
> 
>   >> I can't help noticing that you are configuring for a RISC
>   >> optimized BLAS library on an Intel x86 processor.  I have no idea
>   >> if this is serious, but it seems a bit odd.
> 
>   gb> Talking about that, is there an x86 optimized (for Linux and/or
>   gb> NT) BLAS around somewhere?
> 
> You can try atlas (http://www.netlib.org/atlas/). You will have to
> download the source and build it on your machine if you want it to
> work optimally. The problem with that is that it does not build the
> shared libraries by default and the whole build process is rather
> complicated. Also, you will have to patch the R-1.0.0 configure.in file
> (I am attaching the patch below) and then run autoconf to generate the
> configure file.
> 
> Even after you do all these, the performance benefit is not great. R
> currently uses only level 1 blas and the most significant atlas
> optimizations are for level 3 (and level 2 to some extant). I do not
> think that it is worth the effort.
[snip]

Thank you for the information. It looks as if it is of no big concern.
However, I can report that I found BLAS and LAPACK rpms as contribs for
RedHat, which is my brand of Linux. Maybe they are optimized.

That leads to a follow-up question about LAPACK. I am maintaining 
a larger, standalone  C  program, which uses (C)LAPACK and (C)BLAS 
(for a Newton-Raphson algorithm). I am currently working with 
transforming the  C  program into an  R  package. As I understands it,
R uses LINPACK and not LAPACK (why? historical reasons?), and I have
two options: (1) throw out LAPACK and use LINPACK supplied with  R,
or (2) keep the clapack routines I need in the C code of the  R 
library. 

I have tried (2), and it works, of course, but I am somehow tempted
by (1). Any recommendations?

Göran
----------------------------------------------------------
 Göran Broström                      tel: +46 90 786-5223
 Department of Statistics            fax: +46 90 786-6614
 Umeå University                                         
 SE-90187 Umeå, Sweden              email: gb@stat.umu.se
                                                        
 http://www.stat.umu.se/egna/gb    ftp://capa.stat.umu.se
----------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bacon@aerodyne.com  Thu Mar  2 15:36:46 2000
From: bacon@aerodyne.com (bacon@aerodyne.com)
Date: Thu, 2 Mar 2000 10:36:46 -0500 (EST)
Subject: [Rd] Re: R-1.0.0 is released (PR#466)
In-Reply-To: <XFMail.000302110739.plummer@iarc.fr>
Message-ID: <200003021527.KAA01933@aerodyne.com>

On  2 Mar, Martyn Plummer wrote:
>  On 01-Mar-00 bhoel@server.python.net wrote:
> > R is compiled using the
> > 
> > "-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro
> > -march=pentiumpro -fschedule-insns2"
> > 
> > compiler switches. I used 
> > 
> > ./configure --with-g77 --enable-blas_risc --enable-readline --with-x
> > 
> > for configuring.
>  
>  I can't help noticing that you are configuring for a RISC optimized BLAS
>  library on an Intel x86 processor.  I have no idea if this is serious,
>  but it seems a bit odd.
>  

Since this feature was added for PowerPC Linux distributions at my
request, I'll comment on this.  I would say that it is very unlikely to
be of any help, but it probably won't hurt.  The configure script will
check to see if libblas_risc can be located.  If it can't be found, it
won't be used.  Configure won't even look for it unless you request it
with --enable-blas_risc.

Furthermore, I don't believe that configure will actually use
libblas_risc unless you also --enable-blas.  I could be wrong in that
regard.  Using --enable-blas_risc could implicitly --enable-blas as
well. It's been many months since I wrote that configure option.  I do
know that configure will test if linking -lblas works first.  If that
fails, it won't even bother with -lblas_risc.  

Hope this helps,

-- 
Fred Bacon

==============================================================================
Aerodyne Research, Inc.                        Phone:  (978) 663-9500 ext. 273
45 Manning Rd.                                   FAX:  (978) 663-4918
Billerica, MA 01821-3976                        http://www.aerodyne.com
==============================================================================
"Oh my God!  Space aliens!  Don't eat me, I have a wife and kids!  Eat them."
                                                             -- Homer Simpson


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bacon@aerodyne.com  Thu Mar  2 15:52:55 2000
From: bacon@aerodyne.com (bacon@aerodyne.com)
Date: Thu, 2 Mar 2000 10:52:55 -0500 (EST)
Subject: [Rd] Optimized blas?
In-Reply-To: <Pine.LNX.4.10.10003021232510.10772-100000@pc16.stat.umu.se>
Message-ID: <200003021543.KAA07526@aerodyne.com>

On  2 Mar, gb@stat.umu.se wrote:
>  On Thu, 2 Mar 2000, Martyn Plummer wrote:
>  
>  Talking about that, is there an x86 optimized (for Linux and/or NT)
>  BLAS around somewhere?

There is a superb package called ATLAS (Automatically Tuned Linear
Algebra Subroutines) which is available from 

http://www.netlib.org/atlas

A word of warning, building this runs an extensive series of tests on
your machine to configure ATLAS properly for your processor and and
cache.  The slower the machine, the longer the tests will take to
complete.  But the performance boost is incredible.  Large
matrix-matrix computations are 8-10 time faster than with the reference
blas from netlib.

Check it out.

-- 
Fred Bacon

==============================================================================
Aerodyne Research, Inc.                        Phone:  (978) 663-9500 ext. 273
45 Manning Rd.                                   FAX:  (978) 663-4918
Billerica, MA 01821-3976                        http://www.aerodyne.com
==============================================================================
"Oh my God!  Space aliens!  Don't eat me, I have a wife and kids!  Eat them."
                                                             -- Homer Simpson


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Mar  2 16:20:42 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 2 Mar 2000 08:20:42 -0800 (PST)
Subject: [Rd] Optimized blas?
In-Reply-To: <Pine.LNX.4.10.10003021232510.10772-100000@pc16.stat.umu.se>
Message-ID: <Pine.GSO.4.21.0003020816360.29932-100000@mail.biostat.washington.edu>

On Thu, 2 Mar 2000 gb@stat.umu.se wrote:

> 
> Talking about that, is there an x86 optimized (for Linux and/or NT)
> BLAS around somewhere?

There is a Pentium optimised BLAS around (from the ASCI project),see
http://www.beowulf.org/listarchives/beowulf/1998/03/0099.html
 Another poster has mentioned ATLAS. 

However, an optimised BLAS makes disappointing little difference to R,
partly because we don't spend that much time in BLAS and partly because we
only use the lowest-level routines.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Mar  2 20:59:40 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 02 Mar 2000 15:59:40 -0500
Subject: [Rd] congratulations and thanks
Message-ID: <38BED63C.C01199C5@bank-banque-canada.ca>

In the chorus, I would like to say congratulations and thanks to the core team.
As usual, I'm a bit out of sync.  After four year I especially like the part
about "the release of 1.0.0 marks that the base language and the API for
extension writers will remain stable" (even if I am already asking for changes).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Fri Mar  3 09:10:59 2000
From: hothorn@ci.tuwien.ac.at (hothorn@ci.tuwien.ac.at)
Date: Fri, 3 Mar 2000 10:10:59 +0100 (MET)
Subject: [Rd] using function names as parameters (PR#469)
Message-ID: <200003030910.KAA15280@pubhealth.ku.dk>

When using a function name as parameter, here date, the following happends: 

R> foo <- function(date=date()) cat(date, "\n")
R> foo()
Error in cat(date, "\n") : recursive default argument reference

R> foo("Good Morning!")
Good Morning!

works.

Torsten

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar  3 11:55:21 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Mar 2000 12:55:21 +0100
Subject: [Rd] using function names as parameters (PR#469)
In-Reply-To: hothorn@ci.tuwien.ac.at's message of "Fri, 3 Mar 2000 10:10:59 +0100 (MET)"
References: <200003030910.KAA15280@pubhealth.ku.dk>
Message-ID: <x2og8wi7yu.fsf@blueberry.kubism.ku.dk>

hothorn@ci.tuwien.ac.at writes:

> When using a function name as parameter, here date, the following happends: 
> 
> R> foo <- function(date=date()) cat(date, "\n")
> R> foo()
> Error in cat(date, "\n") : recursive default argument reference

This is not a bug. Default arguments are evaluated in the frame of the
called function, so when the date variable is requested and no actual
argument was supplied, R tries to evaluate the default expression, but
that involved the variable "date" again. If you pass an argument, the
default expression is never evaluated and the problem does not arise.

Similarly a definition like

function(x=y, y=x) x + y

is asking for trouble if both x and y are left unspecified on the call.

[This has nothing to do with passing functions as parameters, by the
way] 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Mar  3 12:10:19 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Fri, 3 Mar 2000 13:10:19 +0100 (MET)
Subject: [Rd] using function names as parameters (PR#469)
Message-ID: <200003031210.NAA18706@pubhealth.ku.dk>

>>>>> On 03 Mar 2000 12:55:21 +0100,
>>>>> Peter Dalgaard BSA (PDB) wrote:

PDB> hothorn@ci.tuwien.ac.at writes:
>> When using a function name as parameter, here date, the following happends: 
>> 
R> foo <- function(date=date()) cat(date, "\n")
R> foo()
>> Error in cat(date, "\n") : recursive default argument reference

PDB> This is not a bug. Default arguments are evaluated in the frame of the
PDB> called function, so when the date variable is requested and no actual
PDB> argument was supplied, R tries to evaluate the default expression, but
PDB> that involved the variable "date" again. If you pass an argument, the
PDB> default expression is never evaluated and the problem does not arise.

PDB> Similarly a definition like

PDB> function(x=y, y=x) x + y

PDB> is asking for trouble if both x and y are left unspecified on the call.

PDB> [This has nothing to do with passing functions as parameters, by the
PDB> way] 

[Taken to r-core]

Hmm, I asked Torsten to mail the bug report ... I first thought along
your lines and I would agree if I pass ``date'' as default, but we
have ``date()'' as default argument which is the return value of the
function, no?

IMO evaluating the default expression comes down to evaluating
``date <- date()'' which is perfectly legal ...

BTW, BB can do it:

S> foo <- function(date=date()) cat(date, "\n")
S> foo()
Fri Mar  3 09:49:20 MET 2000 
Warning messages:
  looking for function "date", ignored local non-function in: foo()


.f



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar  3 13:26:14 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 3 Mar 2000 14:26:14 +0100 (MET)
Subject: [Rd] using function names as parameters (PR#469)
Message-ID: <200003031326.OAA20028@pubhealth.ku.dk>

Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

> Hmm, I asked Torsten to mail the bug report ... I first thought along
> your lines and I would agree if I pass ``date'' as default, but we
> have ``date()'' as default argument which is the return value of the
> function, no?
> 
> IMO evaluating the default expression comes down to evaluating
> ``date <- date()'' which is perfectly legal ...
> 
> BTW, BB can do it:
> 
> S> foo <- function(date=date()) cat(date, "\n")
> S> foo()
> Fri Mar  3 09:49:20 MET 2000 
> Warning messages:
>   looking for function "date", ignored local non-function in: foo()

However,

> foo <- function(date=date) date             
> foo() 
Error in foo(): Recursive occurrence of default argument "date"
Dumped

So S-plus only works by assuming that the local variable is not a
function (*before* evaluating its default)! R is being cleaner and
more consistent..

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Mar  3 16:07:37 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 3 Mar 2000 17:07:37 +0100 (CET)
Subject: [Rd] StatDataML
Message-ID: <14527.58185.135296.986847@galadriel.ci.tuwien.ac.at>


Hi,

we have a first draft of R functions reading/writing data to XML files
including a rather general DTD ... which borrows heavily from the data
types of a certain programming language :-)

The basic idea is to create an XML standard for data exchange,
together with import/export functions for as many applications as
possible. We here will need R, Matlab & Octave for our research
program, but the idea is of course to create a general standard.

After looking in several other applications we think that all the data
types there can easily be represented using S constructs (i.e., arrays
and lists together with attributes) ... so why make life complicated
and invent something new.

Of course this only applies to the low-level representaion ... the
real thing will come next when one starts defining higher level
classes, this step we have avoided so far because one needs the
low-level things first to have something to play with.

A short description of the DTD and an R package with import/export
functions can be found at

	http://www.ci.tuwien.ac.at/~leisch/R

(Modulo some bugs) R data objects can be saved/restored without loss
of information. We don't intend to cover functions or models yet.

All comments and ideas are appreciated! This is just a proposal and
anything can still be changed ... 

Best,
Fritz

PS: Almost all the work has been done by Torsten Hothorn, I'm just
writing the email ;-)

-- 
-------------------------------------------------------------------
                        Friedrich  Leisch 
Institut für Statistik                     Tel: (+43 1) 58801 10715
Technische Universität Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstraße 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Fri Mar  3 16:15:46 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Fri, 3 Mar 2000 11:15:46 -0500 (EST)
Subject: [Rd] StatDataML
Message-ID: <200003031615.LAA12407@jessie.research.bell-labs.com>



Great. Will take a closer look.

Did you take a look at the DTDs in Omegahat - $OMEGA_HOME/XML/DTDs?
There are some things in there that might prove useful. Because
of its reference-oriented style, things like connected/linked observations,
etc. arise more naturally than in S-like languages. 

D.





-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar  3 16:34:29 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 3 Mar 2000 08:34:29 -0800 (PST)
Subject: [Rd] backup signal
In-Reply-To: <001501bf82a6$f1001640$b1eb92c1@unirioja.es>
Message-ID: <Pine.GSO.4.21.0003030833040.20733-100000@mail.biostat.washington.edu>

On Tue, 29 Feb 2000, Manuel Castejon Limas wrote:

> Hi all Is there any signal that one can send in UNIX to R so that it
> stops its execution in a safe way, (like save.image()  and q() ) so
> that the enviroment is not erased, instead of kill -9 somePID

This has been implemented in the current development version, so that
SIGUSR1 quits and saves, SIGUSR2 quits and saves without running
on.exit() or .Last().

However, the signals may get repossessed for exception handling at some
point in the future, so it would be unwise to plan for this feature
remaining.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From David James <dj@research.bell-labs.com>  Fri Mar  3 21:36:36 2000
From: David James <dj@research.bell-labs.com> (David James)
Date: Fri, 3 Mar 2000 16:36:36 -0500 (EST)
Subject: [Rd] Re: [Omega-devel] StatDataML
Message-ID: <200003032136.QAA20959@jessie.research.bell-labs.com>

Hi,

I just had a very quick look at the StatDataML proposal --- nice
work!   At the risk of showing my ignorance, I want to mention 
my first impressions.

My first impression is that defining datasets in terms of
arrays and list is a bit too high a level.  What about 
simpler vectors, scalars? (I know that R/S don't have scalars,
but other systems/applications do.)  Can we think of a core
set of "basic" data types (factors, strings, integers, etc.)
from which to build on other, possibly recursive types (perhaps
similar to corba's IDL basic data types or S's datadump?).  
Would it make sense to imagine, say xlispstat/python/java applications 
reading  and interpreting an StatDataML document without serious difficulties? 

My gut feeling (which is often wrong) is that the DTD should make
the data self-describing:  e.g., the factor "machineId" has 
levels (or defining set) "Stepper1", "Stepper2", ... "Stepper20", 
eventhough the particular dataset at hand has only a
subset of those.  Similarly, perhaps allowing  units and classes
to be included in the dataset (in the case of currency, it is certainly 
a number, perhaps single precision, perhaps not, with specific units 
dollars, euros, pesos, etc.)

More long-term, how about application-defined data?  Application may have
it's own set of data objects that fully exploits contextual 
information that could be extremely useful to capture and 
communicate.  Also, do the data have to be in ASCII format?  What about 
(possibly mime-encoded) images? sound?

As I mentioned, these are questions coming from my lack of experience
with XML, but may be worth raising now better than later :-)

David A. James
Statistics Research, Room 2C-253            Phone:  (908) 582-3082       
Bell Labs, Lucent Technologies              Fax:    (908) 582-3340
Murray Hill, NJ 09794-0636
-----------------------------------------------------------------------------

> From: Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
> MIME-Version: 1.0
> Content-Transfer-Encoding: 8bit
> Date: Fri, 3 Mar 2000 17:07:37 +0100 (CET)
> To: omega-devel@omegahat.org, r-devel@R-project.org, 
Erich.Neuwirth@univie.ac.at, hothorn@ci.tuwien.ac.at, baier@ci.tuwien.ac.at, 
Christian.Buchta@wu-wien.ac.at
> Subject: [Omega-devel] StatDataML
> X-Mailman-Version: 1.0rc2
> List-Id: Developers of Omega <omega-devel.www.omegahat.org>
> X-BeenThere: omega-devel@www.omegahat.org
> 
> 
> Hi,
> 
> we have a first draft of R functions reading/writing data to XML files
> including a rather general DTD ... which borrows heavily from the data
> types of a certain programming language :-)
> 
> The basic idea is to create an XML standard for data exchange,
> together with import/export functions for as many applications as
> possible. We here will need R, Matlab & Octave for our research
> program, but the idea is of course to create a general standard.
> 
> After looking in several other applications we think that all the data
> types there can easily be represented using S constructs (i.e., arrays
> and lists together with attributes) ... so why make life complicated
> and invent something new.
> 
> Of course this only applies to the low-level representaion ... the
> real thing will come next when one starts defining higher level
> classes, this step we have avoided so far because one needs the
> low-level things first to have something to play with.
> 
> A short description of the DTD and an R package with import/export
> functions can be found at
> 
> 	http://www.ci.tuwien.ac.at/~leisch/R
> 
> (Modulo some bugs) R data objects can be saved/restored without loss
> of information. We don't intend to cover functions or models yet.
> 
> All comments and ideas are appreciated! This is just a proposal and
> anything can still be changed ... 
> 
> Best,
> Fritz
> 
> PS: Almost all the work has been done by Torsten Hothorn, I'm just
> writing the email ;-)
> 
> -- 
> -------------------------------------------------------------------
>                         Friedrich  Leisch 
> Institut für Statistik                     Tel: (+43 1) 58801 10715
> Technische Universität Wien                Fax: (+43 1) 58801 10798
> Wiedner Hauptstraße 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
> A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
>      PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
> -------------------------------------------------------------------
> 
> 
> _______________________________________________
> Omega-devel maillist  -  Omega-devel@www.omegahat.org
> http://www.omegahat.org/mailman/listinfo/omega-devel


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Mar  3 22:01:31 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 03 Mar 2000 17:01:31 -0500
Subject: [Rd] StatDataML
References: <14527.58185.135296.986847@galadriel.ci.tuwien.ac.at>
Message-ID: <38C0363B.DDB2AEA6@bank-banque-canada.ca>

Fritz

Could you compare/contrast this a bit with NetCDF and  the UN/EDIFACT General
Statistical Message (GESMES ). I know almost nothing about NetCDF, but from the
little I know it seems to attempt to do a similar thing. I know a bit more about
Gesmes, and there seems to be a lot of overlap with what you are proposing.

Ten years ago, given the number of governments and organization involved, it
would have been easy to say go ahead and do something that we can use sooner (in
fact, we did). However, Gesmes is relatively advanced now, with several groups
working on implementations of a least parts of it, and governments committed to
exchanging data using it. A GNU implementation would be a real benefit to a lot
of tax payers around the world, not to mention the statistics community.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Sat Mar  4 10:55:58 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Sat, 4 Mar 2000 11:55:58 +0100 (CET)
Subject: [Rd] StatDataML
In-Reply-To: <38C0363B.DDB2AEA6@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.21.0003041145450.8684-100000@boromir.ci.tuwien.ac.at>


On Fri, 3 Mar 2000, Paul Gilbert wrote:

> Fritz
> 
> Could you compare/contrast this a bit with NetCDF and  the UN/EDIFACT General
> Statistical Message (GESMES ). I know almost nothing about NetCDF, but from the
> little I know it seems to attempt to do a similar thing. I know a bit more about
> Gesmes, and there seems to be a lot of overlap with what you are proposing.
> 

I just had a short (!) look at the description of the data model and the
user guide for GESMES at http://www.ecb.int/stats/gesmes/gesmes.htm

For me it looks biased to banking problems and very dataframe/array
centric.  

> Ten years ago, given the number of governments and organization involved, it
> would have been easy to say go ahead and do something that we can use sooner (in
> fact, we did). 

The problem I see is that GESMES would probably be to complicated, think
of exchanging data via CORBA, which is easy (and, in our opinion,
efficient) with XML structured strings. 

> However, Gesmes is relatively advanced now, with several groups
> working on implementations of a least parts of it, and governments committed to
> exchanging data using it. A GNU implementation would be a real benefit to a lot
> of tax payers around the world, not to mention the statistics community.
> 

agree, free software is always a benefit :-) 

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Sat Mar  4 13:41:51 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Sat, 4 Mar 2000 13:41:51 +0000 (GMT)
Subject: [Rd] StatDataML
In-Reply-To: <14527.58185.135296.986847@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.20.0003041325420.12572-100000@laplace>

Hi Fritz,

Interesting proposal!  If I may second your comment "Note: Move dimension
and/or dimnames to properties list?", which I think ties in with David
James's point.  My feeling is that it be better to operate at a slightly
lower level and represent array-type constructions as properties of simple
numeric or character vectors, ie very much the way that R does anyway.  
Presumably it would be possible to make a property a recursive structure,
such as a list of dimnames?  (I am not very XML-literate.)

If I might also comment on Paul Gilbert's point about existing alternative
standards.  Our experience with one of our commerical partners suggests
that parsers for R dput objects into XML will be written, if they do not
already exist.  Whatever its shortcomings, XML seems to be here to stay,
and I think the development of a set of R tools at this stage will allow
us to attempt some degree of standardisation.

Best wishes, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcneney@cs.sfu.ca  Sat Mar  4 18:23:52 2000
From: mcneney@cs.sfu.ca (Brad McNeney)
Date: Sat, 4 Mar 2000 10:23:52 -0800 (PST)
Subject: [Rd] problem with glm (PR#452)
In-Reply-To: <x2snyogipc.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.OSF.4.21.0003041022320.263210-100000@smahlt.math.sfu.ca>

I looked into the glm problem some more. Seems to be a memory problem that
occurs just after garbage collection. The easiest way for me to
reproduce  the error is in lapply. I take a list and ask lapply to provide
the descriptive stat summary. I do this several times with the same list.
Most often it gives the correct summary, but just after allocSExp calls
R_gc, one of the summaries for a list element will be NULL. 

E.g for a data frame dat with five columns I get the following (having added
print statements in summary.default and in allocSExp just after the test
for whether gc is necessary):

> lapply(as.list(dat), summary, maxsum = maxsum)
[1] "exiting summary.default"
R_FreeSEXP == NULL  
[1] "exiting summary.default"
[1] "exiting summary.default"
[1] "exiting summary.default"
[1] "exiting summary.default"
$Delta
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   0.00    1.00    1.00    1.19    2.00    2.00 

$D
NULL

$R
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   0.00    1.00    1.00    0.86    1.00    1.00 

$V
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
0.004552 0.740700 1.575000 1.754000 3.205000 3.390000 

$X
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    0.0     0.0     0.5     0.5     1.0     1.0 


I don't know if the following is relevant, but for some reason I've found 
I can avoid this particular problem if I make a small change in lapply in 
its main loop.  Around line 50 of apply.c:

    PROTECT(ans = allocVector(VECSXP, n));
    for(i = 0; i < n; i++) {
        INTEGER(ind)[0] = i + 1;
        VECTOR(ans)[i] = eval(R_fcall, rho);
    }

if I change it to make an assignment to a
temporary variable first everything seems to work fine:

    PROTECT(ans = allocVector(VECSXP, n));
    for(i = 0; i < n; i++) {
        INTEGER(ind)[0] = i + 1;
        tem = eval(R_fcall, rho);
        VECTOR(ans)[i] = tem;
    }

hasn't given me any NULLs yet. 



On 20 Feb 2000, Peter Dalgaard BSA wrote:

> Brad McNeney <mcneney@cs.sfu.ca> writes:
> 
> > I'll see what I can do about getting a more reproducible error. 
> > 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Mar  5 00:03:15 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Mar 2000 01:03:15 +0100
Subject: [Rd] problem with glm (PR#452)
In-Reply-To: Brad McNeney's message of "Sat, 4 Mar 2000 10:23:52 -0800 (PST)"
References: <Pine.OSF.4.21.0003041022320.263210-100000@smahlt.math.sfu.ca>
Message-ID: <x2putauvuk.fsf@blueberry.kubism.ku.dk>

Brad McNeney <mcneney@cs.sfu.ca> writes:

> I don't know if the following is relevant, but for some reason I've found 
> I can avoid this particular problem if I make a small change in lapply in 
> its main loop.  Around line 50 of apply.c:
> 
>     PROTECT(ans = allocVector(VECSXP, n));
>     for(i = 0; i < n; i++) {
>         INTEGER(ind)[0] = i + 1;
>         VECTOR(ans)[i] = eval(R_fcall, rho);
>     }
> 
> if I change it to make an assignment to a
> temporary variable first everything seems to work fine:
> 
>     PROTECT(ans = allocVector(VECSXP, n));
>     for(i = 0; i < n; i++) {
>         INTEGER(ind)[0] = i + 1;
>         tem = eval(R_fcall, rho);
>         VECTOR(ans)[i] = tem;
>     }
> 
> hasn't given me any NULLs yet. 

Now that is pretty darn odd... Looks quite a bit like a compiler bug.
Those two pieces of code should be equivalent as far as I can see.

One thing that you might do: objdump -dS apply.o allows you to see
what code the compiler generates for the two cases. Also, of course,
you can try reducing the level of optimization.


Alternatively, the mere addition of "tem" changes the local memory use
of that function so that something that got clobbered before doesn't
get clobbered now.

The effect doesn't seem to be present on Intels:

> dfr<-do.call("data.frame",lapply(1:100,function(i)rnorm(100)))
> any(sapply(lapply(dfr,summary),is.null))
[1] FALSE

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Mar  5 10:04:44 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 5 Mar 2000 11:04:44 +0100
Subject: [Rd] Mathlib
In-Reply-To: <200003021104.LAA06377@toucan.stats.ox.ac.uk>
References: <200003021104.LAA06377@toucan.stats.ox.ac.uk>
Message-ID: <200003051004.LAA25042@fangorn.ci.tuwien.ac.at>

>>>>> Prof Brian Ripley writes:

>> X-Priority: 3 (Normal)
>> Date: Thu, 02 Mar 2000 11:41:12 +0100 (CET)
>> From: Martyn Plummer <plummer@iarc.fr>
>> To: R-devel@stat.math.ethz.ch
>> Subject: [Rd] Mathlib
>> 
>> First of all I would like to join the chorus of approval over the release
>> of R 1.0.0.  It really is an excellent piece of software. I'm sure you
>> will astonish us again with Omega.
>> 
>> I have a query about Mathlib.  It is such a nice collection of functions
>> that it would be nice to use it in other software, not necessarily related
>> to R.  Is it possible to build Mathlib separately, and/or install the
>> shared object and the header file in a more public place?

> It has been possible. Note that the header file has a switch 

> /*-- Mathlib as part of R --  undefine this for standalone : */
> #define MATHLIB_IN_R

> which controls whether R error handling is used.

> Now, I suspect that it may not be totally in a state where it can be
> used separately in 1.0.0, as this may well not have been tested 
> recently. It did work at some stage between 0.90.1 and 0.99.0, as
> I tested it during the API changes, but there have been a lot
> of changes since, and at least two of those (log1p and pnorm5) have
> failed in the standalone case when I tried just now.

> The other problem is that some careful configuring would be needed for
> the settings of e.g. ISNAN.

> Is it worth trying to set up a configure script and Makefile.in to build
> a standalone libnmath.a?   I suspect Martyn is suggesting that it is?

In a way, this had always been the plan, so I would say yes it is worth
the trouble.

One issue is the naming issue.  I'd still recommend `Rmath'.  We should
also try to standardized the header file procedure.  (E.g., by declaring
#include <Rmath.h> as the official way ...)

Most likely, this would require setting up a second configure.in in the
Rmath (nmath) srcdir, but that shouldn't be to hard ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Mar  6 11:27:25 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 6 Mar 2000 12:27:25 +0100 (CET)
Subject: [Rd] Re: [Omega-devel] StatDataML
In-Reply-To: <200003032136.QAA20959@jessie.research.bell-labs.com>
References: <200003032136.QAA20959@jessie.research.bell-labs.com>
Message-ID: <14531.38429.238420.501197@galadriel.ci.tuwien.ac.at>


>>>>> On Fri, 3 Mar 2000 16:36:36 -0500 (EST),
>>>>> David James (DJ) wrote:

DJ> Hi,
DJ> I just had a very quick look at the StatDataML proposal --- nice
DJ> work!   At the risk of showing my ignorance, I want to mention 
DJ> my first impressions.

DJ> My first impression is that defining datasets in terms of
DJ> arrays and list is a bit too high a level.  What about 
DJ> simpler vectors, scalars? (I know that R/S don't have scalars,
DJ> but other systems/applications do.)  Can we think of a core
DJ> set of "basic" data types (factors, strings, integers, etc.)
DJ> from which to build on other, possibly recursive types (perhaps
DJ> similar to corba's IDL basic data types or S's datadump?).

Hmm, basically we have that ... just that I don't see why it's
necessary to differentiate between a vector (=1-dimensional array) and
higher dimensions, i.e., introduce different tags for it. But if many
others feel like this is necessary: I don't have s trong opinion about
it, we just wanted to keep the thing as simple as possible.

Regarding data types: Torsten and I just discussed that we want to
keep the mode of an array as abstract as possible such that
applications can use the internal representation that fits the data
best.

IMO the following modes will be necessary to represent statistical
data:

logical, nominal, ordinal, integer, real, complex



DJ> Would it make sense to imagine, say xlispstat/python/java applications 
DJ> reading  and interpreting an StatDataML document without serious difficulties? 

Sure! What's the difference?


DJ> My gut feeling (which is often wrong) is that the DTD should make
DJ> the data self-describing:  e.g., the factor "machineId" has 
DJ> levels (or defining set) "Stepper1", "Stepper2", ... "Stepper20", 
DJ> eventhough the particular dataset at hand has only a
DJ> subset of those.  Similarly, perhaps allowing  units and classes
DJ> to be included in the dataset (in the case of currency, it is certainly 
DJ> a number, perhaps single precision, perhaps not, with specific units 
DJ> dollars, euros, pesos, etc.)

DJ> More long-term, how about application-defined data?  Application may have
DJ> it's own set of data objects that fully exploits contextual 
DJ> information that could be extremely useful to capture and 
DJ> communicate.

We definitely need (and want) any user to be able to exctend
StatDataML, i.e., define new classes. There should be a set of
standard classes (like dataframe or time series), but also interfaces
for defining new classes.

The current idea (in R) is to have the following: If the SDML object
has a class and there exists a conversion function for that particular
class then use it, otherwise do the default thing.

The conversion function shouldn't do to much, probably mostly renaming
some slots and re-organizing the structure (as claases on different
systems will probably have different structures).



DJ> Also, do the data have to be in ASCII format?  What about 
DJ> (possibly mime-encoded) images? sound?

Hmm, haven't thought about that yet. 


DJ> As I mentioned, these are questions coming from my lack of experience
DJ> with XML, but may be worth raising now better than later :-)

YES!!! That's why we called it ``proposal'' rather than
``StatDataML version 1.0'' :-)

Best,
Fritz

PS: We are also no XML experts!

-- 
-------------------------------------------------------------------
                        Friedrich  Leisch 
Institut für Statistik                     Tel: (+43 1) 58801 10715
Technische Universität Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstraße 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Mar  6 11:35:11 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 6 Mar 2000 12:35:11 +0100 (CET)
Subject: [Rd] Re: [Omega-devel] StatDataML
In-Reply-To: <14531.38429.238420.501197@galadriel.ci.tuwien.ac.at>
References: <200003032136.QAA20959@jessie.research.bell-labs.com>
 <14531.38429.238420.501197@galadriel.ci.tuwien.ac.at>
Message-ID: <14531.38895.432529.339700@galadriel.ci.tuwien.ac.at>

>>>>> On Mon, 6 Mar 2000 12:27:25 +0100 (CET),
>>>>> Friedrich Leisch (FL) wrote:


FL> IMO the following modes will be necessary to represent statistical
FL> data:

FL> logical, nominal, ordinal, integer, real, complex

Sorry, forgot character.

.fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Mar  6 11:39:25 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 6 Mar 2000 12:39:25 +0100 (CET)
Subject: [Rd] StatDataML
In-Reply-To: <38C0363B.DDB2AEA6@bank-banque-canada.ca>
References: <14527.58185.135296.986847@galadriel.ci.tuwien.ac.at>
 <38C0363B.DDB2AEA6@bank-banque-canada.ca>
Message-ID: <14531.39149.147189.715132@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 03 Mar 2000 17:01:31 -0500,
>>>>> Paul Gilbert (PG) wrote:

PG> Fritz
PG> Could you compare/contrast this a bit with NetCDF and  the UN/EDIFACT General
PG> Statistical Message (GESMES ). I know almost nothing about NetCDF, but from the
PG> little I know it seems to attempt to do a similar thing. I know a bit more about
PG> Gesmes, and there seems to be a lot of overlap with what you are proposing.


I don't know anything about GESMES, and have only looked into NetCDF a
little bit. Of course there are several ``standards'' for exchanging
data, and XML is one of them which looks promising to us.

One nice thing about XML is that more and more applications start
supporting it, i.e., have parsers for XML.  And you don't need any
special software for writing XML, as it is plain text -> you can
create XML files without the need to link any shared libs etc.

That XML can be easily extended is already part of the name ...

Best,

-- 
-------------------------------------------------------------------
                        Friedrich  Leisch 
Institut für Statistik                     Tel: (+43 1) 58801 10715
Technische Universität Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstraße 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Mar  6 14:47:54 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 06 Mar 2000 08:47:54 -0600
Subject: [Rd] A new way for an Alpha to fail
Message-ID: <6rd7p8889x.fsf@franz.stat.wisc.edu>

Previously I had managed to get R-0.99.0 to compile and pass the tests
on a Debian Linux/Alpha 2.2 system by recompiling src/main/optim.c by
hand omitting the -O2 flag.

I just tried R-1.0.0 on a similarly configured machine, although not
the same machine as before, and it compiled ok but failed the tests.
This time it fails on
 bessel> x <- seq(0, 4, len = 501)

 bessel> plot(x, x, ylim = c(0, 6), ylab = "", type = "n", 
     main = "Bessel Functions  I_nu(x)")
 Error in axis(side, at, labels, ...) : no locations are finite

Doing some checking by hand shows that
 plot(x, x)
works and that range(x) is 0 to 4, as expected, but
 plot(x, x, ylim = c(0, 6))
fails with the above message.

The compilers are gcc 2.95.2 and g77 from 1999/10/xx

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Mon Mar  6 15:02:43 2000
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 06 Mar 2000 07:02:43 -0800
Subject: [Rd] Re: [Omega-devel] StatDataML
In-Reply-To: Friedrich Leisch's message of "Mon, 6 Mar 2000 12:27:25 +0100 (CET)"
References: <200003032136.QAA20959@jessie.research.bell-labs.com> <14531.38429.238420.501197@galadriel.ci.tuwien.ac.at>
Message-ID: <87bt4sgmzw.fsf@alpha.cfas.washington.edu>

>>>>> "FL" == Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

    DJ> Also, do the data have to be in ASCII format?  What about
    DJ> (possibly mime-encoded) images? sound?

You can insert _SOME_ base64 encoded binary files.  There are
problems, depending on the image encoding format used
(gif/tiff/png/xbm, I'm not sure which are problematic; see the xml-dev
archives for more info).   I think the solutions where simple.

There are XML-based proposals for images that are quite interesting (I
think SDL?  or SML?  Look under the XML computational chemistry
section) Basically, it's a flexible vector-graphics format, that
scales on the fly and has other nice features...

Have you looked at MathML integration for providing output?  Frank
Harrell pop'd up a quite interesting question regarding literate
programming, and this (the SDML) could be one aspect of it...).

Still havn't looked at it; maybe Friday I'll find some time...

best,
-tony

-- 
A.J. Rossini		       Research Assistant Professor of Biostatistics 
Biostatistics/Univ. of Washington  (Th)	Box 357232   206-543-1044 (3286=fax)
Center for AIDS Research/HMC/UW	  (M/F)	Box 359931   206-731-3647 (3693=fax)
VTN/SCHARP/FHCRC		 (Tu/W)	Box 358080   206-667-7025 (4812=fax)
rossini@(biostat.washington.edu|u.washington.edu|hivnet.fhcrc.org)
http://www.biostat.washington.edu/~rossini

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar  6 15:09:30 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Mar 2000 16:09:30 +0100
Subject: [Rd] A new way for an Alpha to fail
In-Reply-To: Douglas Bates's message of "06 Mar 2000 08:47:54 -0600"
References: <6rd7p8889x.fsf@franz.stat.wisc.edu>
Message-ID: <x2ln3w879x.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

>  bessel> x <- seq(0, 4, len = 501)
> 
>  bessel> plot(x, x, ylim = c(0, 6), ylab = "", type = "n", 
>      main = "Bessel Functions  I_nu(x)")
>  Error in axis(side, at, labels, ...) : no locations are finite
> 
> Doing some checking by hand shows that
>  plot(x, x)
> works and that range(x) is 0 to 4, as expected, but
>  plot(x, x, ylim = c(0, 6))
> fails with the above message.

Interesting... How about firing ub gdb with a breakpoint in do_axis?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Mon Mar  6 15:35:45 2000
From: dtrenkler@nts6.oec.uni-osnabrueck.de (dtrenkler@nts6.oec.uni-osnabrueck.de)
Date: Mon, 6 Mar 2000 16:35:45 +0100 (MET)
Subject: [Rd] anova-bug in R-version  1.0.0? (PR#470)
Message-ID: <200003061535.QAA07778@pubhealth.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@biostat.ku.dk
#
######################################################

Under R version 0.6.51  the following 

A_c(13,9,15,5,25,15,3,9,6,12)
B_c(42,24,41,19,27)
C_c(8,24,9,18,9,24,12,4)
D_c(9,12,7,18,2,18)
kaeufe_c(A,B,C,D)
region_factor(rep(1:4,c(10,5,8,6)),labels=LETTERS[1:4])
anova(lm(kaeufe~region))   

delivers

Analysis of Variance Table

Response: kaeufe
          Df  Sum Sq Mean Sq F value   Pr(>F)    
region     3 1474.65  491.55  8.7852 0.000376 ***
Residuals 25 1398.80   55.95                     
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1


This is what I expected. Under RW 1.0.0 I get

Analysis of Variance Table

Response: kaeufe
Error in print.coefmat(x, digits = digits, signif.stars = signif.stars,
: 
        binary operator applied to invalid types

Am I doing something wrong or is this a real bug?

Regards,

  *** D.Trenkler ***

====================================================================
Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
Statistik / Empirische Wirtschaftsforschung
Universitaet Osnabrueck
Rolandstrasse 8                           Phone: +49(0) 541-969-2753
D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
GERMANY
====================================================================



--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows NT 4.0 (build 1381) Service Pack 3

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar  6 15:51:10 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Mar 2000 16:51:10 +0100
Subject: [Rd] anova-bug in R-version  1.0.0? (PR#470)
In-Reply-To: dtrenkler@nts6.oec.uni-osnabrueck.de's message of "Mon, 6 Mar 2000 16:35:45 +0100 (MET)"
References: <200003061535.QAA07778@pubhealth.ku.dk>
Message-ID: <x2aekc85ch.fsf@blueberry.kubism.ku.dk>

dtrenkler@nts6.oec.uni-osnabrueck.de writes:

> Under R version 0.6.51  the following 
> 
> A_c(13,9,15,5,25,15,3,9,6,12)
> B_c(42,24,41,19,27)
> C_c(8,24,9,18,9,24,12,4)
> D_c(9,12,7,18,2,18)
> kaeufe_c(A,B,C,D)
> region_factor(rep(1:4,c(10,5,8,6)),labels=LETTERS[1:4])
> anova(lm(kaeufe~region))   
> 
> delivers
> 
> Analysis of Variance Table
> 
> Response: kaeufe
>           Df  Sum Sq Mean Sq F value   Pr(>F)    
> region     3 1474.65  491.55  8.7852 0.000376 ***
> Residuals 25 1398.80   55.95                     
> ---
> Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1
> 
> 
> This is what I expected. Under RW 1.0.0 I get
> 
> Analysis of Variance Table
> 
> Response: kaeufe
> Error in print.coefmat(x, digits = digits, signif.stars = signif.stars,
> : 
>         binary operator applied to invalid types
> 
> Am I doing something wrong or is this a real bug?

It's not happening on Unix... Does this happen when starting from a
blank workspace?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar  6 18:02:18 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 6 Mar 2000 18:02:18 +0000 (GMT Standard Time)
Subject: [Rd] anova-bug in R-version  1.0.0? (PR#470)
In-Reply-To: <x2aekc85ch.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.WNT.4.05.10003061800470.1821-100000@tern.stats>

On 6 Mar 2000, Peter Dalgaard BSA wrote:

> dtrenkler@nts6.oec.uni-osnabrueck.de writes:
> 
> > Under R version 0.6.51  the following 
> > 
> > A_c(13,9,15,5,25,15,3,9,6,12)
> > B_c(42,24,41,19,27)
> > C_c(8,24,9,18,9,24,12,4)
> > D_c(9,12,7,18,2,18)
> > kaeufe_c(A,B,C,D)
> > region_factor(rep(1:4,c(10,5,8,6)),labels=LETTERS[1:4])
> > anova(lm(kaeufe~region))   
> > 
> > delivers
> > 
> > Analysis of Variance Table
> > 
> > Response: kaeufe
> >           Df  Sum Sq Mean Sq F value   Pr(>F)    
> > region     3 1474.65  491.55  8.7852 0.000376 ***
> > Residuals 25 1398.80   55.95                     
> > ---
> > Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1
> > 
> > 
> > This is what I expected. Under RW 1.0.0 I get
> > 
> > Analysis of Variance Table
> > 
> > Response: kaeufe
> > Error in print.coefmat(x, digits = digits, signif.stars = signif.stars,
> > : 
> >         binary operator applied to invalid types
> > 
> > Am I doing something wrong or is this a real bug?
> 
> It's not happening on Unix... Does this happen when starting from a
> blank workspace?

It is also not happening on rw1000. Is your .Rprofile (if any) valid?
Try starting with --vanilla.

BDR

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar  6 18:47:15 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Mar 2000 19:47:15 +0100
Subject: [Rd] anova-bug in R-version  1.0.0? (PR#470)
In-Reply-To: Prof Brian D Ripley's message of "Mon, 6 Mar 2000 18:02:18 +0000 (GMT Standard Time)"
References: <Pine.WNT.4.05.10003061800470.1821-100000@tern.stats>
Message-ID: <x24sakylzg.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> > 
> > It's not happening on Unix... Does this happen when starting from a
> > blank workspace?
> 
> It is also not happening on rw1000. Is your .Rprofile (if any) valid?
> Try starting with --vanilla.

The submitter told me in private email that the problem disappeared
when starting with a blank workspace, so a critical function probably
had been overridden.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar  6 18:46:22 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Mon, 6 Mar 2000 19:46:22 +0100 (MET)
Subject: [Rd] anova-bug in R-version  1.0.0? (PR#470)
Message-ID: <200003061846.TAA09039@pubhealth.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> > 
> > It's not happening on Unix... Does this happen when starting from a
> > blank workspace?
> 
> It is also not happening on rw1000. Is your .Rprofile (if any) valid?
> Try starting with --vanilla.

The submitter told me in private email that the problem disappeared
when starting with a blank workspace, so a critical function probably
had been overridden.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Mon Mar  6 21:26:41 2000
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 06 Mar 2000 13:26:41 -0800
Subject: [Rd] StatDataML and graphics... I meant to say "SVG".
Message-ID: <878zzvn626.fsf@alpha.cfas.washington.edu>


See subject...

-- 
A.J. Rossini		       Research Assistant Professor of Biostatistics 
Biostatistics/Univ. of Washington  (Th)	Box 357232   206-543-1044 (3286=fax)
Center for AIDS Research/HMC/UW	  (M/F)	Box 359931   206-731-3647 (3693=fax)
VTN/SCHARP/FHCRC		 (Tu/W)	Box 358080   206-667-7025 (4812=fax)
rossini@(biostat.washington.edu|u.washington.edu|hivnet.fhcrc.org)
http://www.biostat.washington.edu/~rossini

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Mar  6 21:55:12 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Mon, 6 Mar 2000 16:55:12 -0500 (EST)
Subject: [Rd] nlm and optional arguments
Message-ID: <Pine.LNX.4.10.10003061650300.1417-100000@bolker.zoo.ufl.edu>


  It would be really nice if nlm took a set of "..." optional arguments
that were passed through to the objective function.  This level of hacking
is probably slightly beyond me: is there a reason it would be technically
difficult/inefficient?  (I have a vague memory that it used to work this
way either in S-PLUS or in some previous version of R, but I could easily
be wrong.)

  Here's a hack in R code that works for me (basically copying the R code
of nlm() but defining a temporary function that passes the optional
arguments to the objective function), but I presume this would be cleaner
and faster if implemented at a lower level ...

nlm2 <- function(f, p, hessian=FALSE, typsize=rep(1,length(p)),
                fscale=1, print.level=0, ndigit=12, gradtol=1e-6,
                stepmax=max(1000 * sqrt(sum((p/typsize)^2)), 1000),
                steptol=1e-6, iterlim=100, check.analyticals=TRUE, ...) {
  tmpf <- function(x) {
    f(x,...)
  }
  nlm(tmpf,p,hessian=hessian,typsize=typsize,fscale=fscale,print.level=print.level,
      ndigit=ndigit,gradtol=gradtol,stepmax=stepmax,steptol=steptol,iterlim=iterlim,
      check.analyticals=check.analyticals)
}

  As a matter of general principle, would the R-core folks prefer that
"wishlist" items like this get sent to R-bugs (so they can be kept better
track of) or not (so they don't clutter up the bugs database) ?

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Mar  6 22:10:28 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 06 Mar 2000 17:10:28 -0500
Subject: [Rd] StatDataML
Message-ID: <38C42CD4.FA989479@bank-banque-canada.ca>

PG> Could you compare/contrast this a bit with NetCDF and  the
UN/EDIFACT
PG> General Statistical Message (GESMES ).

Well, I guess I'll try to answer part of my own question. I'm groping a
bit to understand the various pieces, and to what extent they overlap or
are complementary, so I would especially invite anyone with more
knowledge to help clear things up. Having very little true
understanding, I think of XML as a language that allows one to define a
format for the data exchange, whereas Gesmes actually defines a format.
I believe they both result in ASCII files. I'm not sure if this means
that XML could be used to define the Gesmes message format or not. CORBA
on the other hand is a protocol for negotiating the exchange of a
formatted message between a client and a server, so it could be used to
exchange Gesmes or some other format defined by XML. CORBA is probably a
replacement for the PADI protocol, based on RPC, which we use here to
exchange time series data between our data servers (Fame) and R and
Splus. (PADI is publicly available but not widely used.)

Torsten>I just had a short (!) look at the description of the data model
and the
Torsten>user guide for GESMES at
http://www.ecb.int/stats/gesmes/gesmes.htm
Torsten>For me it looks biased to banking problems and very
dataframe/array
Torsten>centric.

Yes, I won't recommend it for being simple. That link seems to go to
Gesmes/CB (Central Bank subset of Gesmes) which is decidedly oriented
toward banking and time series data. Reference documents for other parts
of Gesmes are available at

<http://forum.europa.eu.int/Public/irc/dsis/eeg6/library?l=/reference_implementation/gesmes_statistical&vm=detailed&sb=Title>

After looking at this, one might be inclined to think that trying to be
too general is dangerous.  However, even if Gesmes is very complicated,
I'm not sure that trying to define a different general message is the
answer.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Tue Mar  7 06:15:02 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue, 7 Mar 2000 07:15:02 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200003070615.HAA01626@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

none

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 400 *
Subject: X11 troubles
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Jan 2000 14:31:42 +0100
--a) We don't handle multiple window closes well
--b) X11 errors should be caught by an error handler, not kill R
* PR# 414 *
Subject:  graphics bugs: steep slopes and large values beyond ylim 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 7 Feb 2000 18:28:04 -0500
--Followup on R-devel showed this was due to generating integer coordinates 
--outside +/- 2^15 in the X11 driver.

Directory:  In-Out

none

Directory:  Installation

none

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100

Directory:  Low-level

* PR# 391 *
Subject: Segfault in dataentry()
From: Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk>
Date: 29 Dec 1999 11:59:50 +0100
--dataentry(0,0) segfaults

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 462 *
Subject: pgamma
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Tue, 29 Feb 2000 09:50:00 +0100 (MET)
* PR# 463 *
Subject: Bug in read.table
From: "E. S. Venkatraman" <venkat@biosta.mskcc.org>
Date: Tue, 29 Feb 2000 17:47:54 -0500 (EST)
* PR# 465 *
Subject: "is.qr" definition
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Wed, 1 Mar 2000 11:12:37 +0000 (GMT)
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
* PR# 469 *
Subject:  using function names as parameters 
From: Torsten Hothorn <hothorn@ci.tuwien.ac.at>
Date: Fri, 3 Mar 2000 10:11:00 +0100
* PR# 470 *
Subject: anova-bug in R-version  1.0.0?
From: "Trenkler, Dietrich" <dtrenkler@nts6.oec.uni-osnabrueck.de>
Date: Mon, 6 Mar 2000 16:35:12 +0100 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  7 07:06:28 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 7 Mar 2000 07:06:28 +0000 (GMT)
Subject: [Rd] nlm and optional arguments
In-Reply-To: <Pine.LNX.4.10.10003061650300.1417-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.GSO.4.05.10003070701290.20391-100000@auk.stats>

On Mon, 6 Mar 2000, Ben Bolker wrote:

> 
>   It would be really nice if nlm took a set of "..." optional arguments
> that were passed through to the objective function.  This level of hacking
> is probably slightly beyond me: is there a reason it would be technically
> difficult/inefficient?  (I have a vague memory that it used to work this
> way either in S-PLUS or in some previous version of R, but I could easily
> be wrong.)

Well, ms and nlminb work that way in S-PLUS, and optimize and optim do in
R, so there is no real problem.

>   Here's a hack in R code that works for me (basically copying the R code
> of nlm() but defining a temporary function that passes the optional
> arguments to the objective function), but I presume this would be cleaner
> and faster if implemented at a lower level ...
> 
> nlm2 <- function(f, p, hessian=FALSE, typsize=rep(1,length(p)),
>                 fscale=1, print.level=0, ndigit=12, gradtol=1e-6,
>                 stepmax=max(1000 * sqrt(sum((p/typsize)^2)), 1000),
>                 steptol=1e-6, iterlim=100, check.analyticals=TRUE, ...) {
>   tmpf <- function(x) {
>     f(x,...)
>   }
>   nlm(tmpf,p,hessian=hessian,typsize=typsize,fscale=fscale,print.level=print.level,
>       ndigit=ndigit,gradtol=gradtol,stepmax=stepmax,steptol=steptol,iterlim=iterlim,
>       check.analyticals=check.analyticals)
> }

One can just put function(x) f(x, ...) as the first argumnet of the
.Internal call.  It can also fairly easily be done internally (but
why bother?)   I'll take a look at this, but why not try optim instead?


>   As a matter of general principle, would the R-core folks prefer that
> "wishlist" items like this get sent to R-bugs (so they can be kept better
> track of) or not (so they don't clutter up the bugs database) ?

I'll leave that for the R-bugs-master.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Tue Mar  7 07:27:59 2000
From: berwin@maths.uwa.edu.au (berwin@maths.uwa.edu.au)
Date: Tue, 7 Mar 2000 08:27:59 +0100 (MET)
Subject: [Rd] Problems with nlme (PR#471)
Message-ID: <200003070727.IAA11450@pubhealth.ku.dk>

Dear R developers,

first of all let me join the chorus of congratulations for the release
of R 1.0.0.  Well, done!

Unfortunately, I find it necessary to e-mail in a bug report regarding
the `nlme' package.  On my office machine I experience the following
trouble:

bossiaea:/opt/R$ R CMD check -c nlme 
Checking package `nlme' ...
 Massaging examples into `nlme-Ex.R' ...
 Running examples in package `nlme' ...
 ERROR

The end of nlme-Ex.Rout is:

> rm(list = ls(all = TRUE)); .Random.seed <- c(0,rep(7654,3))
> ###--- >>> `anova.gls' <<<----- Compare Likelihoods of Fitted Objects
> 
> 	## alias	 help(anova.gls)
> 
> ##___ Examples ___:
> 
> library(nlme)
> data(Ovary)
> # AR(1) errors within each Mare
> fm1 <- gls(follicles ~ sin(2*pi*Time) + cos(2*pi*Time), Ovary,
+            correlation = corAR1(form = ~ 1 | Mare))
Warning message: 
NA/Inf replaced by maximum positive value 
> anova(fm1)
Denom. DF: 305 
                   numDF  F-value p-value
(Intercept)            1 354.7375  <.0001
sin(2 * pi * Time)     1  18.5035  <.0001
cos(2 * pi * Time)     1   1.6633  0.1981
> # variance changes with a power of the absolute fitted values?
> fm2 <- update(fm1, weights = varPower())
Error in update.gls(fm1, weights = varPower()) : 
	subscript out of bounds
Execution halted


(R CMD check MASS is also failing on an example that uses update.gls.)

On my machine at home I run into troubles even faster when running `R
CMD check nlme'.  One of the early examples chokes on the line:
> data(Orthodont)

I had done a "clean install" on that machine, i.e., I first blew away
the older installation of R.  It seems that the datasets Orthodont and
Pixel have been distributed with the nls library in earlier R versions
but not so in R 1.0.0.  But they are not distributed with the current
version of nlme either.

Cheers,

        Berwin

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Tue Mar  7 08:26:16 2000
From: dtrenkler@nts6.oec.uni-osnabrueck.de (Trenkler, Dietrich)
Date: Tue, 7 Mar 2000 09:26:16 +0100
Subject: AW: [Rd] anova-bug in R-version  1.0.0? (PR#470)
Message-ID: <51615E1449A4D111AE9900008322A88025CD0E@nts6.oec.Uni-Osnabrueck.DE>

I think I've discovered what went wrong.

My workspace included a function wilcox.test formerly copied from
ctest. Now ctest ist part of the distribution and because of that I
always got the message:

[Previously saved workspace restored]

Error in autoload("wilcox.test", "ctest") :
        Object already exists

I didn't take care of this message. Now I removed wilcox.test, saved
the WS, restarted R without the vanilla-option and alas, anova
now works.

It seems that R stops initializing after encountering the error
mentioned above. Is this correct?   


> Regards,
> 
>   *** D.Trenkler ***
> 
> ====================================================================
> Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
> Statistik / Empirische Wirtschaftsforschung
> Universitaet Osnabrueck
> Rolandstrasse 8                           Phone: +49(0) 541-969-2753
> D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
> GERMANY
> ====================================================================
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Tue Mar  7 08:26:53 2000
From: dtrenkler@nts6.oec.uni-osnabrueck.de (dtrenkler@nts6.oec.uni-osnabrueck.de)
Date: Tue, 7 Mar 2000 09:26:53 +0100 (MET)
Subject: AW: [Rd] anova-bug in R-version  1.0.0? (PR#470)
Message-ID: <200003070826.JAA12238@pubhealth.ku.dk>

I think I've discovered what went wrong.

My workspace included a function wilcox.test formerly copied from
ctest. Now ctest ist part of the distribution and because of that I
always got the message:

[Previously saved workspace restored]

Error in autoload("wilcox.test", "ctest") :
        Object already exists

I didn't take care of this message. Now I removed wilcox.test, saved
the WS, restarted R without the vanilla-option and alas, anova
now works.

It seems that R stops initializing after encountering the error
mentioned above. Is this correct?   


> Regards,
> 
>   *** D.Trenkler ***
> 
> ====================================================================
> Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
> Statistik / Empirische Wirtschaftsforschung
> Universitaet Osnabrueck
> Rolandstrasse 8                           Phone: +49(0) 541-969-2753
> D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
> GERMANY
> ====================================================================
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  7 08:40:40 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 7 Mar 2000 08:40:40 +0000 (GMT)
Subject: AW: [Rd] anova-bug in R-version  1.0.0? (PR#470)
In-Reply-To: <51615E1449A4D111AE9900008322A88025CD0E@nts6.oec.Uni-Osnabrueck.DE>
Message-ID: <Pine.GSO.4.05.10003070836280.15700-100000@auk.stats>

On Tue, 7 Mar 2000, Trenkler, Dietrich wrote:

> I think I've discovered what went wrong.
> 
> My workspace included a function wilcox.test formerly copied from
> ctest. Now ctest ist part of the distribution and because of that I
> always got the message:
> 
> [Previously saved workspace restored]
> 
> Error in autoload("wilcox.test", "ctest") :
>         Object already exists
> 
> I didn't take care of this message. Now I removed wilcox.test, saved
> the WS, restarted R without the vanilla-option and alas, anova
> now works.
> 
> It seems that R stops initializing after encountering the error
> mentioned above. Is this correct?   

Yes, in that the rest of the system Rprofile file is skipped
and hence options show.signif.stars and show.coef.Pvalues are not set.

It looks to me as if a bit more protection is needed in print.coefmat,
at least.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar  7 08:53:43 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Mar 2000 09:53:43 +0100
Subject: [Rd] nlm and optional arguments
In-Reply-To: Prof Brian D Ripley's message of "Tue, 7 Mar 2000 07:06:28 +0000 (GMT)"
References: <Pine.GSO.4.05.10003070701290.20391-100000@auk.stats>
Message-ID: <x2ln3vf9ew.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> >   As a matter of general principle, would the R-core folks prefer that
> > "wishlist" items like this get sent to R-bugs (so they can be kept better
> > track of) or not (so they don't clutter up the bugs database) ?
> 
> I'll leave that for the R-bugs-master.

Probably better just to discuss things on the lists.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Tue Mar  7 10:00:34 2000
From: dtrenkler@nts6.oec.uni-osnabrueck.de (dtrenkler@nts6.oec.uni-osnabrueck.de)
Date: Tue, 7 Mar 2000 11:00:34 +0100 (MET)
Subject: [Rd] R-crash using cut-and-paste (PR#472)
Message-ID: <200003071000.LAA13965@pubhealth.ku.dk>

Dear R-Team,

sorry for bugging (:-)), it's me again. In the FAQ coming along with the
R distribution it reads:

If R executes an illegal instruction, or dies with an operating system
error message that indicates a problem in the program (as opposed to
something like "disk full"), then it is certainly a bug.

This encourages me to describe a crash I encountered a few minutes ago.

I had written a function in an  editor, copied it to the clip-board and
tried to establish it in my workspace (cut and paste). Suddenly I got
the following message form Windows NT (sorry it's german):


Die Anweisung "0x7762d4be" verweist auf Speicher in "0x0247c000".  Der
Vorgang "read" konnte nicht auf dem Speicher durchgeführt werden.
Klicken Sie auf "OK um die Anwendung zu beenden.

Rgui.exe-Fehler in Anwendung

There are very technical terms which I hope will be translated such
that it makes sense to you:

The instruction "0x7762d4be" points to memory in "0x0247c000".  "read"
could not be carried out in memory.  Click on "OK to stop the program.  

Clicking on OK caused R to close (and of course the most recent work was
lost)


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows NT 4.0 (build 1381) Service Pack 3

Search Path:
 .GlobalEnv, Autoloads, package:base


Regards,

  *** D.Trenkler ***

====================================================================
Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
Statistik / Empirische Wirtschaftsforschung
Universitaet Osnabrueck
Rolandstrasse 8                           Phone: +49(0) 541-969-2753
D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
GERMANY
====================================================================


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  7 10:30:26 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 7 Mar 2000 10:30:26 +0000 (GMT)
Subject: [Rd] R-crash using cut-and-paste (PR#472)
In-Reply-To: <200003071000.LAA13965@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10003071023280.20024-100000@auk.stats>

On Tue, 7 Mar 2000 dtrenkler@nts6.oec.uni-osnabrueck.de wrote:

> Dear R-Team,
> 
> sorry for bugging (:-)), it's me again. In the FAQ coming along with the
> R distribution it reads:
> 
> If R executes an illegal instruction, or dies with an operating system
> error message that indicates a problem in the program (as opposed to
> something like "disk full"), then it is certainly a bug.
> 
> This encourages me to describe a crash I encountered a few minutes ago.
> 
> I had written a function in an  editor, copied it to the clip-board and
> tried to establish it in my workspace (cut and paste). Suddenly I got
> the following message form Windows NT (sorry it's german):

[...]

How big was the function you were trying to paste in?  There are 
distinct limits to such cut-and-paste, not all of which are under 
our control. To quote more of the FAQ:

  Please include an example that reproduces the problem, preferably the
  simplest one you have found.

Without such an example, there is nothing we can do to help.

As a general work-around, you will find it much easier to use source() to
load in sizeable functions than cut-and-paste.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Mar  7 10:47:43 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 7 Mar 2000 11:47:43 +0100 (MET)
Subject: [Rd] autoload error in profile {was anova-bug in R-version  1.0.0?} (PR#470)
Message-ID: <200003071047.LAA14756@pubhealth.ku.dk>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Tue, 7 Mar 2000, Trenkler, Dietrich wrote:
    >> I think I've discovered what went wrong.
    >> 
    >> My workspace included a function wilcox.test formerly copied from
    >> ctest. Now ctest ist part of the distribution and because of that I
    >> always got the message:
    >> 
    >> [Previously saved workspace restored]
    >> 
    >> Error in autoload("wilcox.test", "ctest") :
    >> Object already exists
    >> 
    >> I didn't take care of this message. Now I removed wilcox.test, saved
    >> the WS, restarted R without the vanilla-option and alas, anova
    >> now works.
    >> 
    >> It seems that R stops initializing after encountering the error
    >> mentioned above. Is this correct?   

    BDR> Yes, in that the rest of the system Rprofile file is skipped
    BDR> and hence options show.signif.stars and show.coef.Pvalues are not set.
but other options as well..
I think this shouldn't happen and *is* a bug.

    BDR> It looks to me as if a bit more protection is needed in print.coefmat,
    BDR> at least.
In extrapolation, wouldn't all R functions using non-internal *)
options() {i.e. getOption() nowadays} need protection against these options
being wrong or non existent ?
I feel that this is exaggerated..

*) Currently, the following options are "internal"
   (i.e. changing them does some consistency checks in src/main/options.c):

   Option	       Requirements
   ------	       ------------
   width	       integer    MIN_WIDTH..MAX_WIDTH
   digits	       integer    MIN_DIGITS..MAX_DIGITS
   expressions	       integer    MIN_EXPRESSIONS..MAX_EXPRESSIONS
   editor	       character  {not NA nor character(0)}
   continue	       character  {not NA nor character(0)}
   prompt	       character  {not NA nor character(0)}
   contrasts	       character(2)
   warn		       numeric(1)
   warning.expression  expression or language
   error	       expression or language
   show.error.messages logical(1)
   echo		       logical(1)

------------

However, I wonder if we shouldn't do consistency checks on other options as
well,  e.g. na.action seems to be more important than the show.* ones ...

For the 1.0.x patches, at least, I'll move the autoload()'s to the end of
profile/Common.R

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Mar  7 11:03:33 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 07 Mar 2000 12:03:33 +0100
Subject: [Rd] R-crash using cut-and-paste (PR#472)
References: <Pine.GSO.4.05.10003071023280.20024-100000@auk.stats>
Message-ID: <38C4E205.9C9A5B72@statistik.uni-dortmund.de>

Hi!

Prof Brian D Ripley schrieb:
> 
> On Tue, 7 Mar 2000 dtrenkler@nts6.oec.uni-osnabrueck.de wrote:
> 
> > Dear R-Team,
> >
> > sorry for bugging (:-)), it's me again. In the FAQ coming along with the
> > R distribution it reads:
> >
> > If R executes an illegal instruction, or dies with an operating system
> > error message that indicates a problem in the program (as opposed to
> > something like "disk full"), then it is certainly a bug.
> >
> > This encourages me to describe a crash I encountered a few minutes ago.
> >
> > I had written a function in an  editor, copied it to the clip-board and
> > tried to establish it in my workspace (cut and paste). Suddenly I got
> > the following message form Windows NT (sorry it's german):
...

Happens here too (R 1.0.0, Windows NT 4.0, SP5).
Sometimes with Dr. Watson, sometimes as described above by D.Trenkler,
sometimes R terminates without any message.

> How big was the function you were trying to paste in?  There are
> distinct limits to such cut-and-paste, not all of which are under
> our control. To quote more of the FAQ:
> 
>   Please include an example that reproduces the problem, preferably the
>   simplest one you have found.
> 
> Without such an example, there is nothing we can do to help.


If you paste the following function about four times (makes no sense,
but reproduces the error without pasting a really big function), the
error occurs:
-------------

"scoredach" <-
  function (x) 
{
  v1 <- x[1]
  u11<- x[2]
  u12<- x[3]
  v2 <- x[4]
  u21<- x[5]
  u22<- x[6]
  v3 <- x[7]
  u31<- x[8]
  u32<- x[9]
  w1 <- x[10]
  w2 <- x[11]
  w3 <- x[12]
  z11<- x[13]
  z21<- x[14]
  z31<- x[15]
  z12<- x[16]
  z22<- x[17]
  z32<- x[18]
 scoredach <- v1/(1 + exp(-(u11 * xseq + u12 * yseq))) 
             + v2/(1 + exp(-(u21 * xseq + u22 * yseq))) 
             + v3/(1 + exp(-(u31 * xseq + u32 * yseq)))

return(scoredach)}

---------------------

> As a general work-around, you will find it much easier to use source() to
> load in sizeable functions than cut-and-paste.


Regards, 
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  7 11:03:41 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 7 Mar 2000 12:03:41 +0100 (MET)
Subject: [Rd] Re: autoload error in profile {was anova-bug in R-version  1.0.0?} (PR#473)
Message-ID: <200003071103.MAA15042@pubhealth.ku.dk>

On Tue, 7 Mar 2000, Martin Maechler wrote:

> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> 
>     BDR> On Tue, 7 Mar 2000, Trenkler, Dietrich wrote:
>     >> I think I've discovered what went wrong.
>     >> 
>     >> My workspace included a function wilcox.test formerly copied from
>     >> ctest. Now ctest ist part of the distribution and because of that I
>     >> always got the message:
>     >> 
>     >> [Previously saved workspace restored]
>     >> 
>     >> Error in autoload("wilcox.test", "ctest") :
>     >> Object already exists
>     >> 
>     >> I didn't take care of this message. Now I removed wilcox.test, saved
>     >> the WS, restarted R without the vanilla-option and alas, anova
>     >> now works.
>     >> 
>     >> It seems that R stops initializing after encountering the error
>     >> mentioned above. Is this correct?   
> 
>     BDR> Yes, in that the rest of the system Rprofile file is skipped
>     BDR> and hence options show.signif.stars and show.coef.Pvalues are not set.
> but other options as well..
> I think this shouldn't happen and *is* a bug.
> 
>     BDR> It looks to me as if a bit more protection is needed in print.coefmat,
>     BDR> at least.
> In extrapolation, wouldn't all R functions using non-internal *)
> options() {i.e. getOption() nowadays} need protection against these options
> being wrong or non existent ?
> I feel that this is exaggerated..

Yes, they should, and when I write them I do check for sensible values.

> *) Currently, the following options are "internal"
>    (i.e. changing them does some consistency checks in src/main/options.c):
> 
>    Option	       Requirements
>    ------	       ------------
>    width	       integer    MIN_WIDTH..MAX_WIDTH
>    digits	       integer    MIN_DIGITS..MAX_DIGITS
>    expressions	       integer    MIN_EXPRESSIONS..MAX_EXPRESSIONS
>    editor	       character  {not NA nor character(0)}
>    continue	       character  {not NA nor character(0)}
>    prompt	       character  {not NA nor character(0)}
>    contrasts	       character(2)
>    warn		       numeric(1)
>    warning.expression  expression or language
>    error	       expression or language
>    show.error.messages logical(1)
>    echo		       logical(1)
> 
> ------------
> 
> However, I wonder if we shouldn't do consistency checks on other options as
> well,  e.g. na.action seems to be more important than the show.* ones ...

We do have some consistency checks on na.action in model.frame.default.

> For the 1.0.x patches, at least, I'll move the autoload()'s to the end of
> profile/Common.R

I _think_ they should have try() around them, which is what S-PLUS 
now does with all startup code.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Tue Mar  7 11:06:34 2000
From: dtrenkler@nts6.oec.uni-osnabrueck.de (Trenkler, Dietrich)
Date: Tue, 7 Mar 2000 12:06:34 +0100
Subject: AW: [Rd] R-crash using cut-and-paste (PR#472)
Message-ID: <51615E1449A4D111AE9900008322A88025CD10@nts6.oec.Uni-Osnabrueck.DE>



> -----Ursprüngliche Nachricht-----
> Von:	Prof Brian D Ripley 
> Gesendet am:	Tuesday, March 07, 2000 11:30 AM
> An:	dtrenkler@nts6.oec.uni-osnabrueck.de
> Cc:	r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Betreff:	Re: [Rd] R-crash using cut-and-paste (PR#472)
> 
> On Tue, 7 Mar 2000 dtrenkler@nts6.oec.uni-osnabrueck.de wrote:
> 
> > Dear R-Team,
> > 
> > sorry for bugging (:-)), it's me again. In the FAQ coming along with
> the
> > R distribution it reads:
> > 
> > If R executes an illegal instruction, or dies with an operating
> system
> > error message that indicates a problem in the program (as opposed to
> > something like "disk full"), then it is certainly a bug.
> > 
> > This encourages me to describe a crash I encountered a few minutes
> ago.
> > 
> > I had written a function in an  editor, copied it to the clip-board
> and
> > tried to establish it in my workspace (cut and paste). Suddenly I
> got
> > the following message form Windows NT (sorry it's german):
> 
> [...]
> 
> How big was the function you were trying to paste in?  
	[Dietrich Trenkler]  About 36 lines. Here you are:

	
tefo_function(form,symb="%",dir="F:/DIDITEX/compstatr/ss00/r2latex/"){
	tf_paste(c(dir,form,".r2l"),collapse="")
	cat(c("Reading ",tf,".\n"),collapse="")
	ss_scan(file=tf,what="",sep="\n",quiet=TRUE)
	sss_ss
	a_(1:length(sss))[ss==as.vector("\\end{RFunction}")]
	sss_sss[1:a-1]
	b_(1:length(sss))[ss==as.vector("\\begin{RFunction}")]

	collect.expressions_function(ss){
	ss_ss[grep("%",ss)]
	ss_paste(ss,collapse="")
	ss_substring(ss,1:nchar(ss),1:nchar(ss))
	ss_as.vector(ss[!((ss=="%")|(ss==" "))])
	ss_paste(c("list(",ss[-1],")"),collapse="")
	ss
	}
	a_collect.expressions(ss[-(1:a)])
	a_paste(c("a0_",a),collapse="")
	sss_c(sss[-(1:b)],a)
	sss_c(sss,"a0_lapply(a0,signif,digits=digits)")
	a_paste(c("ss_paste(c('",tf,,"'),collapse='')"),collapse="")
	sss_c(sss,a)
	sss_c(sss,"ss_scan(file=ss,what='',sep='\\n',quiet=TRUE)")
	
sss_c(sss,"a_(1:length(ss))[ss==as.vector('\\\\end{RFunction}')]")
	sss_c(sss,"ss_ss[-(1:a)]")
	sss_c(sss,"ss_ss[-grep('%',ss)]")
	sss_c(sss,"ss_paste(ss,collapse='\\n',sep='\\n')")
	sss_c(sss,paste("for(i in
1:length(a0)){ss_sub('",symb,"',as.character(a0),ss);a0_a0[-1]}",sep="")
)
	sss_c(sss,"if(!file=='')")
	
sss_c(sss,"write(paste(ss,collapse='\\n',sep='\\n'),file=paste(c(dir,fil
e,'.tex'),collapse=''))")
	sss_c(sss,"else return(cat(ss,'\\n'))")
	sss_c(sss,"}")
	
eval(parse(text=paste(sss,collapse="\n",sep="\n")),envir=.GlobalEnv)
	cat("Function ",form," established.\n")
	}
	 


> There are 
> distinct limits to such cut-and-paste, not all of which are under 
> our control. 
	[Dietrich Trenkler]  This seems to be true. When I copied this
function to the clipboard R crashed several times (sometimes without any
messages). There seems to be some interferences with the clipboard...


> As a general work-around, you will find it much easier to use source()
> to
> load in sizeable functions than cut-and-paste.
	[Dietrich Trenkler]  Henceforth I will obey to your advice.


> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jfox@mcmaster.ca  Tue Mar  7 14:08:03 2000
From: jfox@mcmaster.ca (jfox@mcmaster.ca)
Date: Tue, 7 Mar 2000 15:08:03 +0100 (MET)
Subject: [Rd] update fails after specific sequence of steps (PR#474)
Message-ID: <200003071408.PAA18937@pubhealth.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@biostat.ku.dk
#
######################################################



I stumbled on this error while doing a classroom demonstration. The error is reproducible, 
but seems to require a specific sequence of operations: (1) fitting a linear model; (2) 
calling the summary function; (3) calling a function of mine, called test.terms; (4) making 
a typing error in a call to update -- typing "~.~" instead of ".~." . (5) After this, a 
correct call to update fails. If any of the steps 1-4 is omitted, everything proceeds 
normally.

I've attached the following: 

 o   several listings illustrating when the error occurs and when it does not; 

 o   a listing of the dataset; 

 o   a listing of the test.terms function and the functions that it uses. 

The dataset, though, seems unremarkable, and test.tests is a straightforward function 
without (intended) side effects. The library fox just contains some functions and datasets; 
I can, of course, supply it if that seems relevant.

I'm not sure that this is a bug in R, but it seemed worth reporting.

Thanks for your trouble,
 John

----------------- first listing, showing error ---------------------------

R : Copyright 2000, The R Development Core Team
Version 1.0.0  (February 29, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(fox)
> data(Moore)
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)

Call:
lm(formula = conform ~ status * fcategory)

Residuals:
    Min      1Q  Median      3Q     Max 
-8.6250 -2.9000 -0.2727  2.7273 11.3750 

Coefficients:
                          Estimate Std. Error t value Pr(>|t|)    
(Intercept)                11.8571     1.7307   6.851 3.44e-08 ***
statuslow                   0.7679     2.3699   0.324   0.7477    
fcategorylow                5.5429     2.6813   2.067   0.0454 *  
fcategorymedium             2.4156     2.2140   1.091   0.2819    
statuslow.fcategorylow     -9.2679     3.4507  -2.686   0.0106 *  
statuslow.fcategorymedium  -7.7906     3.5728  -2.181   0.0353 *  
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 

Residual standard error: 4.579 on 39 degrees of freedom
Multiple R-Squared: 0.3237,     Adjusted R-squared: 0.237 
F-statistic: 3.734 on 5 and 39 degrees of freedom,      p-value: 0.007397 

> test.terms(mod.full)
                 Sum Sq Df F value    Pr(>F)    
(Intercept)      984.14  1 46.9348 3.436e-08 ***
status             2.20  1  0.1050   0.74767    
fcategory         89.67  2  2.1383   0.13147    
status:fcategory 175.49  2  4.1846   0.02257 *  
Residuals        817.76 39                      
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 
> mod.m<-update(mod.full, ~.~-status:fcategory)
Error in model.frame.default(formula = ~conform ~ 1, drop.unused.levels = TRUE) : 
        object is not a matrix
> mod.m<-update(mod.full, .~.-status:fcategory)  # fails after summary, test.terms, & error
Error in parse(file, n, text, prompt) : parse error
> 

----------------- second listing, omitting error in call to update, everything works -------

R : Copyright 2000, The R Development Core Team
Version 1.0.0  (February 29, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(fox)
> data(Moore)
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)

Call:
lm(formula = conform ~ status * fcategory)

Residuals:
    Min      1Q  Median      3Q     Max 
-8.6250 -2.9000 -0.2727  2.7273 11.3750 

Coefficients:
                          Estimate Std. Error t value Pr(>|t|)    
(Intercept)                11.8571     1.7307   6.851 3.44e-08 ***
statuslow                   0.7679     2.3699   0.324   0.7477    
fcategorylow                5.5429     2.6813   2.067   0.0454 *  
fcategorymedium             2.4156     2.2140   1.091   0.2819    
statuslow.fcategorylow     -9.2679     3.4507  -2.686   0.0106 *  
statuslow.fcategorymedium  -7.7906     3.5728  -2.181   0.0353 *  
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 

Residual standard error: 4.579 on 39 degrees of freedom
Multiple R-Squared: 0.3237,     Adjusted R-squared: 0.237 
F-statistic: 3.734 on 5 and 39 degrees of freedom,      p-value: 0.007397 

> test.terms(mod.full)
                 Sum Sq Df F value    Pr(>F)    
(Intercept)      984.14  1 46.9348 3.436e-08 ***
status             2.20  1  0.1050   0.74767    
fcategory         89.67  2  2.1383   0.13147    
status:fcategory 175.49  2  4.1846   0.02257 *  
Residuals        817.76 39                      
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 
> mod.m<-update(mod.full, .~.-status:fcategory) # works following summary & test.terms
> mod.m

Call:
lm(formula = conform ~ status + fcategory)

Coefficients:
    (Intercept)        statuslow     fcategorylow  fcategorymedium  
       14.72356         -4.60667          0.08089         -1.09511  

> 

----- third listing, omitting call to test.terms, everything works --------------------

R : Copyright 2000, The R Development Core Team
Version 1.0.0  (February 29, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(fox)
> data(Moore)
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)

Call:
lm(formula = conform ~ status * fcategory)

Residuals:
    Min      1Q  Median      3Q     Max 
-8.6250 -2.9000 -0.2727  2.7273 11.3750 

Coefficients:
                          Estimate Std. Error t value Pr(>|t|)    
(Intercept)                11.8571     1.7307   6.851 3.44e-08 ***
statuslow                   0.7679     2.3699   0.324   0.7477    
fcategorylow                5.5429     2.6813   2.067   0.0454 *  
fcategorymedium             2.4156     2.2140   1.091   0.2819    
statuslow.fcategorylow     -9.2679     3.4507  -2.686   0.0106 *  
statuslow.fcategorymedium  -7.7906     3.5728  -2.181   0.0353 *  
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 

Residual standard error: 4.579 on 39 degrees of freedom
Multiple R-Squared: 0.3237,     Adjusted R-squared: 0.237 
F-statistic: 3.734 on 5 and 39 degrees of freedom,      p-value: 0.007397 

> mod.m<-update(mod.full, ~.~-status:fcategory)
Error in model.frame.default(formula = ~conform ~ 1, drop.unused.levels = TRUE) : 
        object is not a matrix
> mod.m<-update(mod.full, .~.-status:fcategory) # works following summary and error
> mod.m

Call:
lm(formula = conform ~ status + fcategory)

Coefficients:
    (Intercept)        statuslow     fcategorylow  fcategorymedium  
       14.72356         -4.60667          0.08089         -1.09511  

> 


----------- fourth listing, omitting call to summary, everything works ------------------

R : Copyright 2000, The R Development Core Team
Version 1.0.0  (February 29, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(fox)
> data(Moore)
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> test.terms(mod.full)
                 Sum Sq Df F value    Pr(>F)    
(Intercept)      984.14  1 46.9348 3.436e-08 ***
status             2.20  1  0.1050   0.74767    
fcategory         89.67  2  2.1383   0.13147    
status:fcategory 175.49  2  4.1846   0.02257 *  
Residuals        817.76 39                      
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 
> mod.m<-update(mod.full, ~.~-status:fcategory)
Error in model.frame.default(formula = ~conform ~ 1, drop.unused.levels = TRUE) : 
        object is not a matrix
> mod.m<-update(mod.full, .~.-status:fcategory) # works following test.terms and error
> mod.m

Call:
lm(formula = conform ~ status + fcategory)

Coefficients:
    (Intercept)        statuslow     fcategorylow  fcategorymedium  
       14.72356         -4.60667          0.08089         -1.09511  


------------------------ listing of dataset ----------------------------------------

> Moore
   subject status conform fcategory fscore
1        1    low       8       low     37
2        2    low       4      high     57
3        3    low       8      high     65
4        4    low       7       low     20
5        5    low      10       low     36
6        6    low       6       low     18
7        7    low      12    medium     51
8        8    low       4    medium     44
9        9    low      13       low     31
10      10    low      12       low     36
11      11    low       4    medium     42
12      12    low      13      high     56
13      13    low       7       low     28
14      14    low       9    medium     43
15      15    low       9      high     65
16      16    low      24      high     57
17      17    low       6       low     28
18      18    low       7      high     61
19      19    low      23      high     57
20      20    low      13      high     55
21      21    low       8       low     17
22      22    low      12       low     35
23      23   high      19      high     68
24      24   high      12    medium     41
25      25   high      21       low     16
26      26   high       9      high     63
27      27   high      23       low     15
28      28   high       7      high     54
29      29   high      17    medium     48
30      30   high      14    medium     42
31      31   high      11      high     59
32      32   high      16    medium     45
33      33   high      15       low     30
34      34   high      20    medium     44
35      35   high       8    medium     42
36      36   high      12       low     22
37      37   high      14      high     52
38      38   high      14    medium     42
39      39   high      17    medium     41
40      40   high       7    medium     50
41      41   high      17    medium     39
42      42   high      13      high     57
43      43   high      16       low     35
44      44   high      10      high     52
45      45   high      15    medium     44
> 

------------------ function test.terms and functions it calls ------------------------

> test.terms
function (object, ...) 
{
    UseMethod("test.terms")
}

> test.terms.lm
function (mod, error, ...) 
{
    if (!missing(error)) {
        sumry <- summary(error, corr = FALSE)
        s2 <- sumry$sigma^2
        error.df <- error$df.residual
        error.SS <- s2 * error.df
    }
    intercept <- has.intercept(mod)
    p <- length(coefficients(mod))
    I.p <- diag(p)
    Source <- term.names(mod)
    n.terms <- length(Source)
    SS <- rep(0, n.terms + 1)
    df <- rep(0, n.terms + 1)
    F <- rep(0, n.terms + 1)
    p <- rep(0, n.terms + 1)
    assign <- mod$assign
    for (term in 1:n.terms) {
        subs <- which(assign == term - intercept)
        hyp.matrix <- I.p[subs, ]
        test <- if (missing(error)) 
            linear.hypothesis(mod, hyp.matrix, ...)
        else linear.hypothesis(mod, hyp.matrix, error.SS = error.SS, 
            error.df = error.df, ...)
        SS[term] <- test$SS
        df[term] <- test$df[1]
        F[term] <- test$F
        p[term] <- test$p
    }
    Source[n.terms + 1] <- "Residuals"
    df.res <- if (missing(error)) 
        mod$df.residual
    else error.df
    sumry <- summary(mod, corr = FALSE)
    s2 <- sumry$sigma^2
    SS[n.terms + 1] <- if (missing(error)) 
        s2 * df.res
    else error.SS
    df[n.terms + 1] <- df.res
    F[n.terms + 1] <- NA
    p[n.terms + 1] <- NA
    result <- data.frame(SS, df, F, p)
    row.names(result) <- Source
    names(result) <- c("Sum Sq", "Df", "F value", "Pr(>F)")
    class(result) <- c("anova", "data.frame")
    result
}

> has.intercept
function (object, ...) 
{
    UseMethod("has.intercept")
}

> term.names
function (object, ...) 
{
    UseMethod("term.names")
}

> term.names.default
function (model) 
{
    term.names <- labels(terms(model))
    if (has.intercept(model)) 
        c("(Intercept)", term.names)
    else term.names
}

> linear.hypothesis
function (object, ...) 
{
    UseMethod("linear.hypothesis")
}

> linear.hypothesis.lm
function (mod, hypothesis.matrix, rhs = 0, white.adjust = F, 
    error.SS, error.df) 
{
    sumry <- summary(mod, corr = FALSE)
    s2 <- if (missing(error.SS)) 
        sumry$sigma^2
    else error.SS/error.df
    V <- if (white.adjust == FALSE) 
        sumry$cov.unscaled
    else hccm(mod, type = white.adjust)/s2
    b <- coefficients(mod)
    L <- if (is.null(dim(hypothesis.matrix))) 
        t(hypothesis.matrix)
    else hypothesis.matrix
    q <- nrow(L)
    SSH <- t(L %*% b - rhs) %*% inv(L %*% V %*% t(L)) %*% (L %*% 
        b - rhs)
    F <- SSH/(q * s2)
    df <- if (missing(error.df)) 
        mod$df.residual
    else error.df
    p <- 1 - pf(F, q, df)
    list(SS = SSH[1, 1], F = F[1, 1], df = c(q, df), p = p[1, 
        1])
}

> hccm
function (model, type = "hc3") 
{
    if (is.null(class(model)) || class(model) != "lm" || !is.null(weights(mod))) {
        stop("requires unweighted lm")
    }
    sumry <- summary(model, corr = FALSE)
    s2 <- sumry$sigma^2
    V <- sumry$cov.unscaled
    if (type == FALSE) 
        return(s2 * V)
    e <- residuals(model)
    X <- model.matrix(model)
    df.res <- df.residual(model)
    factor <- switch(type, hc0 = 1, hc1 = n/df.res, hc2 = 1/(1 - 
        hat(X)), hc3 = 1/(1 - hat(X))^2)
    V %*% t(X) %*% apply(X, 2, "*", (e^2)/factor) %*% V
}
> 

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows NT 4.0 (build 1381) Service Pack 3

Search Path:
 .GlobalEnv, Moore, package:fox, Autoloads, package:base


|----------------------------------------------------|
| John Fox                          jfox@McMaster.ca |
| Department of Sociology        McMaster University |
|----------------------------------------------------|

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Mar  7 14:43:35 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 07 Mar 2000 08:43:35 -0600
Subject: [Rd] Problems with nlme (PR#471)
In-Reply-To: berwin@maths.uwa.edu.au's message of "Tue, 7 Mar 2000 08:27:59 +0100 (MET)"
References: <200003070727.IAA11450@pubhealth.ku.dk>
Message-ID: <6rwvnelu20.fsf@franz.stat.wisc.edu>

berwin@maths.uwa.edu.au writes:

> bossiaea:/opt/R$ R CMD check -c nlme 
> Checking package `nlme' ...
>  Massaging examples into `nlme-Ex.R' ...
>  Running examples in package `nlme' ...
>  ERROR
> 
> The end of nlme-Ex.Rout is:
> 
> > rm(list = ls(all = TRUE)); .Random.seed <- c(0,rep(7654,3))
> > ###--- >>> `anova.gls' <<<----- Compare Likelihoods of Fitted Objects
> > 
> > 	## alias	 help(anova.gls)
> > 
> > ##___ Examples ___:
> > 
> > library(nlme)
> > data(Ovary)
> > # AR(1) errors within each Mare
> > fm1 <- gls(follicles ~ sin(2*pi*Time) + cos(2*pi*Time), Ovary,
> +            correlation = corAR1(form = ~ 1 | Mare))
> Warning message: 
> NA/Inf replaced by maximum positive value 
> > anova(fm1)
> Denom. DF: 305 
>                    numDF  F-value p-value
> (Intercept)            1 354.7375  <.0001
> sin(2 * pi * Time)     1  18.5035  <.0001
> cos(2 * pi * Time)     1   1.6633  0.1981
> > # variance changes with a power of the absolute fitted values?
> > fm2 <- update(fm1, weights = varPower())
> Error in update.gls(fm1, weights = varPower()) : 
> 	subscript out of bounds
> Execution halted
> 
> 
> (R CMD check MASS is also failing on an example that uses update.gls.)
> 
> On my machine at home I run into troubles even faster when running `R
> CMD check nlme'.  One of the early examples chokes on the line:
> > data(Orthodont)
> 
> I had done a "clean install" on that machine, i.e., I first blew away
> the older installation of R.  It seems that the datasets Orthodont and
> Pixel have been distributed with the nls library in earlier R versions
> but not so in R 1.0.0.  But they are not distributed with the current
> version of nlme either.

Ah, it appears that I need to update the nlme library.  I probably
won't be able to do that until tomorrow at the earliest.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar  7 14:43:39 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Mar 2000 15:43:39 +0100
Subject: [Rd] update fails after specific sequence of steps (PR#474)
In-Reply-To: jfox@mcmaster.ca's message of "Tue, 7 Mar 2000 15:08:03 +0100 (MET)"
References: <200003071408.PAA18937@pubhealth.ku.dk>
Message-ID: <x2wvnekfhg.fsf@blueberry.kubism.ku.dk>


Strange things happen on Unix too. 

> source('fox.R')
> Moore<-read.table('Moore.txt')
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)
...
> mod.m<-update(mod.full, ~.~-status:fcategory)
Error in model.frame.default(formula = ~conform ~ 1, drop.unused.levels = TRUE) : 
	object is not a matrix
> mod.m<-update(mod.full, .~.-status:fcategory) # works following summary and error
> mod.m

Call:
lm(formula = conform ~ status + fcategory)

Coefficients:
    (Intercept)        statuslow     fcategorylow  fcategorymedium  
       14.72356         -4.60667          0.08089         -1.09511  


#### Well you *thought* it worked, but watch: ####
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)

Call:
lm(formula = conform ~ L×@ * fcategory)
                       ^^^^^^^

...and the attached dataframe is corrupted. Must investigate further.

> ls("Moore")
[1] "conform"   "fcategory" "fscore"    "L×@"      "subject"  
                                         ^^^^^^^
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgutwin@us.ibm.com  Tue Mar  7 15:36:01 2000
From: pgutwin@us.ibm.com (pgutwin@us.ibm.com)
Date: Tue, 7 Mar 2000 16:36:01 +0100 (MET)
Subject: [Rd] Error compiling R on RS6000 (PR#475)
Message-ID: <200003071536.QAA20337@pubhealth.ku.dk>

Full_Name: Paul Gutwin
Version: R-1.0.0
OS: AIX 4.2.1
Submission from: (NULL) (198.133.22.67)


R-1.0.0 fails to compile. I'm using the config.cache file from a successful
compliation of R-0.65.0 (prob #290, fixed thanks to Thomas Vogels @ CMU). 
Compiling R-1.0.0 fails with the following error messages:

make
Target "R" is up to date.
	gcc -I. -I../include -I../../src/include -I../../src/include/R_ext 
-DHAVE_CONFIG_H -mno-fp-in-toc -g -O2 -c Rsock.c -o Rsock.o
In file included from Rsock.c:34:
/usr/include/unistd.h:162: parse error before `lseek64'
/usr/include/unistd.h:162: parse error before `off64_t'
/usr/include/unistd.h:162: warning: data definition has no type or storage
class
In file included from /usr/include/sys/lockf.h:41,
                 from /usr/include/unistd.h:382,
                 from Rsock.c:34:
/usr/include/sys/stat.h:127: parse error before `soff_t'
/usr/include/sys/stat.h:127: warning: no semicolon at end of struct or union
/usr/include/sys/stat.h:146: parse error before `st_size'
/usr/include/sys/stat.h:146: warning: data definition has no type or storage
class
In file included from /usr/include/unistd.h:382,
                 from Rsock.c:34:
/usr/include/sys/lockf.h:60: parse error before `off64_t'
In file included from Rsock.c:34:
/usr/include/unistd.h:417: parse error before `off64_t'
/usr/include/unistd.h:438: parse error before `off64_t'
/usr/include/unistd.h:440: parse error before `ualarm'
/usr/include/unistd.h:440: warning: parameter names (without types) in function
declaration
/usr/include/unistd.h:440: warning: data definition has no type or storage
class
/usr/include/unistd.h:441: warning: parameter names (without types) in function
declaration
/usr/include/unistd.h:474: parse error before `fclear64'
/usr/include/unistd.h:474: parse error before `off64_t'
/usr/include/unistd.h:474: warning: data definition has no type or storage
class
/usr/include/unistd.h:475: parse error before `off64_t'
make: 1254-004 The error code from the last command is 1.


Stop.
make: 1254-004 The error code from the last command is 2.


Stop.
make: 1254-004 The error code from the last command is 1.


Stop.
make: 1254-004 The error code from the last command is 1.


Stop.

Compilation exited abnormally with code 2 at Tue Mar  7 10:15:58


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Mar  7 15:45:29 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 7 Mar 2000 16:45:29 +0100 (CET)
Subject: [Rd] Error compiling R on RS6000 (PR#475)
In-Reply-To: <200003071536.QAA20337@pubhealth.ku.dk>
References: <200003071536.QAA20337@pubhealth.ku.dk>
Message-ID: <14533.9241.474692.985917@galadriel.ci.tuwien.ac.at>

>>>>> On Tue, 7 Mar 2000 16:36:01 +0100 (MET),
>>>>> pgutwin  (p) wrote:

p> Full_Name: Paul Gutwin
p> Version: R-1.0.0
p> OS: AIX 4.2.1
p> Submission from: (NULL) (198.133.22.67)


p> R-1.0.0 fails to compile. I'm using the config.cache file from a successful
p> compliation of R-0.65.0 

Uhm, why would you want to do that???

Have you tried building from a clean (fresh) source tree?

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar  7 15:47:47 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Mar 2000 16:47:47 +0100
Subject: [Rd] Error compiling R on RS6000 (PR#475)
In-Reply-To: pgutwin@us.ibm.com's message of "Tue, 7 Mar 2000 16:36:01 +0100 (MET)"
References: <200003071536.QAA20337@pubhealth.ku.dk>
Message-ID: <x2r9dmkcik.fsf@blueberry.kubism.ku.dk>

pgutwin@us.ibm.com writes:

> Full_Name: Paul Gutwin
> Version: R-1.0.0
> OS: AIX 4.2.1
> Submission from: (NULL) (198.133.22.67)
> 
> 
> R-1.0.0 fails to compile. I'm using the config.cache file from a successful
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> compliation of R-0.65.0 (prob #290, fixed thanks to Thomas Vogels @ CMU). 
  ^^^^^^^^^^^^^^^^^^^^^^^

What on earth gives you the idea that that might work?? The configure
scripts have changed many a time since 0.65.0. Or was config.cache a
typo?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Tue Mar  7 18:32:52 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Tue, 7 Mar 2000 19:32:52 +0100 (MET)
Subject: [Rd] lm(rnorm(1000)~rnorm(1000)) kills rw1000 (PR#476)
Message-ID: <200003071832.TAA21815@pubhealth.ku.dk>


First:

	R core: (Thank You!)^HUGE_VAL

Now, down to business:

In a loop or in repeated command lines:

system.time(lm(rnorm(1000)~rnorm(1000)))

( or lm(rnorm(1000)~rnorm(1000))$coef )

fails after several iterations with the Windows message 'This program
has performed an illegal operation and will be shut down. If the
problem persists, please contact the vendor'.

clicking on DETAILS reveals:

RGUI caused an invalid page fault in
module R.DLL at 0137:100e938a.
Registers:
EAX=02dd9918 CS=0137 EIP=100e938a EFLGS=00010283
EBX=02bb9b18 SS=013f ESP=0253d4c0 EBP=0253e578
ECX=02bb9b2c DS=013f ESI=02dd9848 FS=3ebf
EDX=00000001 ES=013f EDI=0010a1ba GS=0000
Bytes at CS:EIP:
89 14 b8 8b 8d e8 ef ff ff 8b 9d c0 ef ff ff 47 
Stack dump:
00000000 02bb9cbc 02559278 1002fb4f 51eb851f 02bbac20 02bbac20 1002fb77 00000001 00000001 72707865 69737365 00000001 0262d9c4 8038456c 17f70bef 


Likewise with Rterm.

This also happens on rw0990.

My office setup is a trifle unusual - it is a SUNPCi board (actually
an AMDK6) that fits in an Ultra 10. Some of the Windows drivers are
replaced by Sun versions that allow access to system services on the
UltraSparc. There are bugs in this setup, but on the whole it seems
fairly stable when using applications like SAS and Office.

It does not happen on rw0901 or rw0651 (? version number ?) on my HOME
PC. Nor on R 0.90.1 under Solaris

Enclosing EITHER 'rnorm(1000)' within I( ) seems to cure this
behavior. (It also produces the behavior I expected, viz. regressing
one set of random normal deviates on another. FWIW, neither Splus3.4
for Solaris nor R 0.90.1 produce the result I expected unless I() is
used.)

Chuck Berry

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows 9x 4.0 (build 1111)  B

Search Path:
 .GlobalEnv, Autoloads, package:base




-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  7 18:51:58 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 7 Mar 2000 18:51:58 +0000 (GMT Standard Time)
Subject: [Rd] lm(rnorm(1000)~rnorm(1000)) kills rw1000 (PR#476)
In-Reply-To: <200003071832.TAA21815@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.05.10003071851000.98-100000@tern.stats>

On Tue, 7 Mar 2000 cberry@tajo.ucsd.edu wrote:

> It does not happen on rw0901 or rw0651 (? version number ?) on my HOME
> PC. Nor on R 0.90.1 under Solaris

It does happen on R 1.0.0 on Solaris and on rw1000 on a real PC.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Mar  7 19:17:30 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 7 Mar 2000 11:17:30 -0800 (PST)
Subject: [Rd] lm(rnorm(1000)~rnorm(1000)) kills rw1000 (PR#476)
In-Reply-To: <Pine.WNT.4.05.10003071851000.98-100000@tern.stats>
Message-ID: <Pine.GSO.4.21.0003071108270.27319-100000@mail.biostat.washington.edu>

On Tue, 7 Mar 2000, Prof Brian D Ripley wrote:

> On Tue, 7 Mar 2000 cberry@tajo.ucsd.edu wrote:
> 
> > It does not happen on rw0901 or rw0651 (? version number ?) on my HOME
> > PC. Nor on R 0.90.1 under Solaris
> 
> It does happen on R 1.0.0 on Solaris and on rw1000 on a real PC.

Something strange is happening where we ensure that the response does not
appear on the rhs of the formula.  

At lines 1643ff of model.c we count how many columns of the design matrix
are needed for each model term.  This count is not done if the term is the
response, which leaves the count uninitialised.

We then use this uninitialised count at 1673ff to construct the assign
attribute.

	-thomas



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Mar  7 19:24:06 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 7 Mar 2000 11:24:06 -0800 (PST)
Subject: [Rd] lm(rnorm(1000)~rnorm(1000)) kills rw1000 (PR#476)
In-Reply-To: <Pine.GSO.4.21.0003071108270.27319-100000@mail.biostat.washington.edu>
Message-ID: <Pine.GSO.4.21.0003071120060.27319-100000@mail.biostat.washington.edu>

On Tue, 7 Mar 2000, Thomas Lumley wrote:

> On Tue, 7 Mar 2000, Prof Brian D Ripley wrote:
> 
> > On Tue, 7 Mar 2000 cberry@tajo.ucsd.edu wrote:
> > 
> > > It does not happen on rw0901 or rw0651 (? version number ?) on my HOME
> > > PC. Nor on R 0.90.1 under Solaris
> > 
> > It does happen on R 1.0.0 on Solaris and on rw1000 on a real PC.
> 
> Something strange is happening where we ensure that the response does not
> appear on the rhs of the formula.  
> 
> At lines 1643ff of model.c we count how many columns of the design matrix
> are needed for each model term.  This count is not done if the term is the
> response, which leaves the count uninitialised.
> 
> We then use this uninitialised count at 1673ff to construct the assign
> attribute.

Incidentally, this command doesn't do what the user probably thinks it
does:  lm thinks that the rnorm(1000) on the lhs is the same as the one on
the rhs and drops it from the model, fitting only an intercept.

I think this is unavoidable, since model.matrix can't be expected to know
whether an arbitrary function is deterministic or random.

The work-around is
	a<-rnorm(1000)
	b<-rnorm(1000)
	lm(a~b)


	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Mar  7 19:39:47 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 7 Mar 2000 11:39:47 -0800 (PST)
Subject: [Rd] lm(rnorm(1000)~rnorm(1000)) kills rw1000 (PR#476)
In-Reply-To: <Pine.GSO.4.21.0003071120060.27319-100000@mail.biostat.washington.edu>
Message-ID: <Pine.GSO.4.21.0003071134290.27319-100000@mail.biostat.washington.edu>


A patch is

1649,1652c1649
<       if (j == rhs_response) {
<           INTEGER(count)[j]=0;  /* need this initialised */
<           continue;
<       }
---
>       if (j == rhs_response) continue;



	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar  7 19:48:24 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Mar 2000 20:48:24 +0100
Subject: [Rd] lm(rnorm(1000)~rnorm(1000)) kills rw1000 (PR#476)
In-Reply-To: Thomas Lumley's message of "Tue, 7 Mar 2000 11:39:47 -0800 (PST)"
References: <Pine.GSO.4.21.0003071134290.27319-100000@mail.biostat.washington.edu>
Message-ID: <x2aekah88n.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> A patch is
> 
> 1649,1652c1649
> <       if (j == rhs_response) {
> <           INTEGER(count)[j]=0;  /* need this initialised */
> <           continue;
> <       }
> ---
> >       if (j == rhs_response) continue;

Hmm, this wouldn't happen to cure the update(.~.-whateveritwas) case
by jfox, would it? (darn nasty one that one...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From klittle@iecodesign.com  Tue Mar  7 20:22:09 2000
From: klittle@iecodesign.com (Kevin Little)
Date: Tue, 7 Mar 2000 14:22:09 -0600
Subject: [Rd] Re: [Omega-devel] StatDataML Description element
In-Reply-To: <87bt4sgmzw.fsf@alpha.cfas.washington.edu>
Message-ID: <LMBBIPCDANABKBDOOCEHKEFJEIAA.klittle@iecodesign.com>

This is a multi-part message in MIME format.

------=_NextPart_000_0033_01BF8840.85DCFC80
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

  [from your draft]
  The description element
  <!ELEMENT description (title?, source?, date?, version?, comment?)>

  <!ELEMENT title (#PCDATA) >
  <!ELEMENT source (#PCDATA) >
  <!ELEMENT date (#PCDATA) >
  <!ELEMENT version (#PCDATA) >
  <!ELEMENT comment (#PCDATA) >

  The description element itself consists of five elements (title, source,
date, comment, version) which are simple strings and include no other
elements. It is used to provide meta-information about a dataset that is
typically not needed for computations on the data itself.

One of the key issues I worry about is "data set provenance" and I encourage
my clients to be able to trace back to one or more sources to inform
themselves of the quality of the data set (how much reliance they can place
in what they are about to see or manipulate, etc).

1. easy links to an originator would be good e.g. is there any way to use
hypertext in any of the arguments for email or web site referrals?

2. what limits (any?) are there typically on the length of the strings in
the arguments of DESCRIPTION?

3. In S or R or Omega, a statistical dataset's description is always
available by command or menu item (I'm guessing).  Are the arguments
typically available now for any kind of search or filtering or action by my
statistical application (e.g. can I ask the statistical application to only
allow me to work on datasets from a certain source? I guess this is possible
and would be addressed by the application developers, not the developers of
the XML standard but maybe there is something required of the XML standard
to make it possible to hook to applications?)

4. is the list of arguments fixed at five? Or could one allow for multiple
comment1, comment2, ...

[If one can search or otherwise operate on the string in the "comment" field
then I guess you don't need to extend the list of arguments.  That leads to
another question:  how extensible or upgradeable is StatDataML envisioned to
be?  I can imagine a "Data Quality Stamp or Certification" being relevant
within certain communities and it would be nice to have that in the
meta-data description, perhaps as a separate argument.]

Thanks again for your draft proposal on StatDataML, this is a potentially
very important contribution.

Regards
Kevin Little, Ph.D.
Informing Ecological Design, LLC
2213 West Lawn Avenue
Madison, WI  53711
tel 608.251.4355 fax 608.251.0399
email klittle@iecodesign.com


------=_NextPart_000_0033_01BF8840.85DCFC80
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE></TITLE>
<META content=3D"text/html; charset=3Diso-8859-1" =
http-equiv=3DContent-Type>
<META content=3D"MSHTML 5.00.2614.3500" name=3DGENERATOR></HEAD>
<BODY>
<BLOCKQUOTE style=3D"MARGIN-RIGHT: 0px">
  <DIV style=3D"MARGIN-RIGHT: 0px"><FONT color=3D#0000ff face=3DArial =
size=3D2>[from=20
  your draft]</FONT></DIV>
  <DIV style=3D"MARGIN-RIGHT: 0px"><FONT color=3D#0000ff face=3DArial =
size=3D2>The=20
  description element<BR>&lt;!ELEMENT description (title?, source?, =
date?,=20
  version?, comment?)&gt;<BR><BR>&lt;!ELEMENT title (#PCDATA)=20
  &gt;<BR>&lt;!ELEMENT source (#PCDATA) &gt;<BR>&lt;!ELEMENT date =
(#PCDATA)=20
  &gt;<BR>&lt;!ELEMENT version (#PCDATA) &gt;<BR>&lt;!ELEMENT comment =
(#PCDATA)=20
  &gt;<BR><BR>The description element itself consists of five elements =
(title,=20
  source, date, comment, version) which are simple strings and include =
no other=20
  elements. It is used to provide meta-information about a dataset that =
is=20
  typically not needed for computations on the data=20
itself.<BR></DIV></BLOCKQUOTE></FONT>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2>One of the =
key issues I=20
worry about is "data set provenance" and I encourage my clients to be =
able to=20
trace back to one or more sources to&nbsp;inform themselves of the =
quality of=20
the data set (how much reliance they can place in what they are about to =
see or=20
manipulate, etc).&nbsp; </FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial =
size=3D2></FONT>&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2>1. easy =
links to an=20
originator would be good e.g. is <FONT face=3DArial size=3D2>there any =
way to use=20
hypertext in any of the arguments for email or web site=20
referrals?</FONT></FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2><FONT =
face=3DArial=20
size=3D2></FONT></FONT>&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2><FONT =
face=3DArial=20
size=3D2>2. what limits (any?) are there typically on the length of the =
strings in=20
the arguments of&nbsp;DESCRIPTION?</FONT></FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px">&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2>3. In S or =
R or Omega, a=20
statistical dataset's description is always available by command or menu =
item=20
(I'm guessing).&nbsp; Are the arguments typically available now for any =
kind of=20
search or filtering or action by my statistical application (e.g. can I =
ask the=20
statistical application to only allow me to work on datasets from a =
certain=20
source? I guess this is possible and would be addressed by the =
application=20
developers, not the developers of the XML standard but maybe there is =
something=20
required of the XML standard to make it possible to hook to=20
applications?)</FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px">&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2><FONT =
face=3DArial=20
size=3D2>4.&nbsp;is the list of arguments fixed at five? Or could one =
allow for=20
multiple comment1, comment2, ... </FONT></FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2><FONT =
face=3DArial=20
size=3D2></FONT></FONT>&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2><FONT =
face=3DArial=20
size=3D2>[If one can search or otherwise operate on the string in the =
"comment"=20
field then I guess you don't need to extend the list of arguments.&nbsp; =
That=20
leads to another question:&nbsp; how extensible or upgradeable is =
StatDataML=20
envisioned to be?&nbsp; I can imagine a "Data Quality=20
Stamp&nbsp;or&nbsp;Certification" being relevant within certain =
communities=20
and&nbsp;it would be nice to have that in&nbsp;the meta-data =
description,=20
perhaps as a separate argument.]&nbsp; </FONT></FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial =
size=3D2></FONT>&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2><FONT =
color=3D#0000ff=20
face=3DArial size=3D2><FONT color=3D#000000>Thanks again for your draft =
proposal on=20
StatDataML, this is a potentially very important=20
contribution.</FONT></FONT></FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial =
size=3D2></FONT>&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial =
size=3D2>Regards</FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2>
<P><FONT face=3DArial size=3D2>Kevin Little, Ph.D.</FONT> <BR><FONT =
face=3DArial=20
size=3D2>Informing Ecological Design, LLC</FONT> <BR><FONT face=3DArial =
size=3D2>2213=20
West Lawn Avenue</FONT> <BR><FONT face=3DArial size=3D2>Madison, =
WI&nbsp;=20
53711</FONT> <BR><FONT face=3DArial size=3D2>tel 608.251.4355 fax=20
608.251.0399</FONT> <BR><FONT face=3DArial size=3D2>email=20
klittle@iecodesign.com</FONT> </P></DIV></FONT></BODY></HTML>

------=_NextPart_000_0033_01BF8840.85DCFC80--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Tue Mar  7 22:31:43 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 07 Mar 2000 17:31:43 -0500
Subject: [Rd] Error compiling R on RS6000 (PR#475)
In-Reply-To: Peter Dalgaard BSA's message of "07 Mar 2000 16:47:47 +0100"
References: <200003071536.QAA20337@pubhealth.ku.dk> <x2r9dmkcik.fsf@blueberry.kubism.ku.dk>
Message-ID: <871z5m1kfk.fsf@bavaria.ece.cmu.edu>


Hi,

  I'll assume Paul meant config.site which contains all the extra
  compiler and linker flags and those flags are somewhat involved in
  his environment.  Triggered by Paul's email I tried to
  compile R-1.0.0.  It compiles cleanly but dies with "Illegal
  Instruction" upon start.  Sorry, I don't have any further insight
  into this problem at this time.

  I've been working on my Linux box instead of the my AIX workstation
  lately, so I didn't see this earlier.  Actually I've been so busy
  using R, that I've missed to congratulate on the release or 1.0.
  Thanks to all who work on R which has been a tremendous help for me!

  -tom


Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> pgutwin@us.ibm.com writes:
> 
> > Full_Name: Paul Gutwin
> > Version: R-1.0.0
> > OS: AIX 4.2.1
> > Submission from: (NULL) (198.133.22.67)
> > 
> > 
> > R-1.0.0 fails to compile. I'm using the config.cache file from a successful
>                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> > compliation of R-0.65.0 (prob #290, fixed thanks to Thomas Vogels @ CMU). 
>   ^^^^^^^^^^^^^^^^^^^^^^^
> 
> What on earth gives you the idea that that might work?? The configure
> scripts have changed many a time since 0.65.0. Or was config.cache a
> typo?

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Wed Mar  8 08:25:00 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Wed, 8 Mar 2000 09:25:00 +0100 (CET)
Subject: [Rd] Re: [Omega-devel] StatDataML Description element
In-Reply-To: <LMBBIPCDANABKBDOOCEHKEFJEIAA.klittle@iecodesign.com>
Message-ID: <Pine.LNX.4.21.0003080915400.30257-100000@boromir.ci.tuwien.ac.at>


> 
> 1. easy links to an originator would be good e.g. is there any way to use
> hypertext in any of the arguments for email or web site referrals?
> 

as long as all elements include strings, "source" would be the right place
to save a URL 

> 2. what limits (any?) are there typically on the length of the strings in
> the arguments of DESCRIPTION?
> 

interesting question, I think there is no limit.

> 3. In S or R or Omega, a statistical dataset's description is always
> available by command or menu item (I'm guessing).  Are the arguments
> typically available now for any kind of search or filtering or action by my
> statistical application (e.g. can I ask the statistical application to only
> allow me to work on datasets from a certain source? I guess this is possible
> and would be addressed by the application developers, not the developers of
> the XML standard but maybe there is something required of the XML standard
> to make it possible to hook to applications?)
> 

in our alpha implementation, readSDML returns the read object with an
additional "SDMLdescription" attribute. One can check, if e.g. the source
is valid in a special application.

> 4. is the list of arguments fixed at five? Or could one allow for multiple
> comment1, comment2, ...
> 

<!ELEMENT description (title?, source?, date?, version?, comment*)>

allows comments until the end of time (will be added in StatDataML.dtd,
thanks for the hint). 

> [If one can search or otherwise operate on the string in the "comment" field
> then I guess you don't need to extend the list of arguments.  That leads to
> another question:  how extensible or upgradeable is StatDataML envisioned to
> be?  I can imagine a "Data Quality Stamp or Certification" being relevant
> within certain communities and it would be nice to have that in the
> meta-data description, perhaps as a separate argument.]
> 

something like a RSA-key included in the description? will think about
this! 

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Mar  8 09:16:39 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 8 Mar 2000 10:16:39 +0100
Subject: [Rd] possible BUG with as.data.frame() and/or [.data.frame
Message-ID: <000501bf88df$039febc0$a9021aac@joelschlaegel>



Here is a possible BUG with as.data.frame() and/or [.data.frame which broke
Michael Lapsleys RODBC-Code.
Can anyone confirm it is a bug or a 'feature' of the prototype?


tablename <- "abc"
a <- as.data.frame(cbind("abc", 1:3))
b <- as.data.frame(cbind(tablename, 1:3))

# ok
> a
   V1 V2
1 abc  1
2 abc  2
3 abc  3

# missing column name
> b
  tablename
1       abc 1
2       abc 2
3       abc 3

# subsetting ok
> b[1,1]
[1] abc
Levels:  abc

# subsetting fails
> b[1,2]
Error in [.data.frame(b, 1, 2) : undefined columns selected


##by contrast
> data.frame(cbind(tablename, 1:3))
  tablename Var.2
1       abc     1
2       abc     2
3       abc     3

Regards


--
Dr. Jens Oehlschlägel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 München

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Mar  8 09:14:38 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 8 Mar 2000 10:14:38 +0100
Subject: [Rd] RODBC: follow up
Message-ID: <000401bf88de$bb153630$a9021aac@joelschlaegel>



Hi Michael,
Here is the result of my first testing:

(0) Dr. Watson
Sorry, I should have given a more precise description: by default in R
exists a function with the name 'table', if you use this name as in

  odbcPrimaryKeys(0, table)

a Dr. Watson occurs, because table does not give a table name.
However, it is always a good idea to prevent Dr. Watsons, even if it is
triggered by a stupid user, as in my case.


(1, may be Davids comment already solves this?)
There are still some problems with sqlTables() and sqlQuery() which should
return a data.frame, but only return one line.
I tried with MS Access and Oracle, and now odbcGetErrMsg() somewhat explains
the problem.

sqlTables(0)
  TABLE_QUALIFIER TABLE_OWNER TABLE_NAME   TABLE_TYPE REMARKS
1    C:\\TEMP\\db          NA   MSysACEs SYSTEM TABLE      NA
Browse[1]> odbcGetErrMsg(channel)
[1] "[RODBC]ERROR: Row count not supported"


Why is this? If it is generally possible, that some ODBC drivers do not
support Row count,
then we need to check odbcGetErrMsg() after each of those functions, which
are expected to return a data.frame.
Or better those functions have to check on their own and to build up the
COMPLETE data frame using odbcFetchRow()
until all rows are fetched. Of course this should not be R-code but C-code,
as looping in R is not a good idea.



(2)
in sqlSave()

  if (any(sqlTables(0)[3] == tablename)) {

probably should read

  if (any(sqlTables(channel)[3] == tablename)) {

furthermore if sqlTables() fails with "[RODBC]ERROR: Row count not
supported"
this check for existence is currently not reliable (sqlTables() silently
returns a one-line data.frame).



(3, see posting to r-devel)
in sqlSave()

  newname <- as.data.frame(cbind(NA, NA, tablename, as.matrix(names(dat)),
    12, "varchar", 255, 255, NA, NA, 1, NA))

creates a data.frame with "" as column names (except for "tablename" as
third column name)
I don't know whether this is a R bug or expected behaviour. However it
currently creates trouble as the later call of

  query <- sqltablecreate(tablename, newname, keys = 0)

fails at

Browse[1]>
debug: if (coldata[i, 11] == 1) {
    null <- "NULL"
} else {
    null <- "NOT NULL"
}
Browse[1]>
Error in [.data.frame(coldata, i, 11) : undefined columns selected


because newname/coldata misses colnames

  debug: print(coldata)
  Browse[1]>
          tablename
1 NA NA        dd V1 12 varchar 255 255 NA NA 1 NA
2 NA NA        dd V2 12 varchar 255 255 NA NA 1 NA


BTW: why use as.matrix(names(dat)) ?



(4) in sqltablecreate

  gsub("[^A-Za-z]+", "", as.character(coldata[i, 4]))

destroys numbers in column names, rather use

  gsub("[^A-Za-z0-9]+", "", as.character(coldata[i, 4]))


Furthermore think about substituting '_' in SQLNAMES to '.' in
RNAMEodbcColumns(channel, table)S and vice versa.
  gsub("[.]", "_", RNAME)
  gsub("[_]", ".", SQLNAME)


(5) in several functions you use

  if (!any(sqlTables(channel) == sqtable)) )

shouldn't that read

  if (!any(sqlTables(channel)[4] == sqtable))

?

The above mentioned one-line-only problem with sqlTables() of course breaks
this code


(6) Some more comments (perhaps due to my ignorance about ODBC, can ODBC
write data without sending sql statements?)

(6.1) looping
sqlwrite() sqlgetresults() uses for-loops for writing/reading data rowwise.
I expect this to be rather slow.
Is it possible to have this done in C instead of R?
If in R, might it be that the sequence of multiple rbind() leads to memory
segmentation (growing lists)??
May be one should ask  on R-Help, if it is better to first create an object
of approbriate size and then replacing single rows.

(6.2) block read/write
Reading all rows at a time with sqlgetresults() could run into memory
trouble.
Fetching single rows using odbcFetchRow() probably creates slow looping
problems in R.
I think the interface would become more suitable for big datasets if it had
functions for writing and reading BLOCKS of rows. E.g. sqlgetresults() could
get a parameter nmax= .

(6.3) sqlCopy()
Convert query results into a data.frame before sending them to another
channel could lead to memory trouble.
Better would be a lowlevel implementation in C, which copies rowwise.

Regards


Jens

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar  8 10:14:17 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Mar 2000 11:14:17 +0100
Subject: [Rd] possible BUG with as.data.frame() and/or [.data.frame
In-Reply-To: "Jens Oehlschl?gel-Akiyoshi"'s message of "Wed, 8 Mar 2000 10:16:39 +0100"
References: <000501bf88df$039febc0$a9021aac@joelschlaegel>
Message-ID: <x2g0u1wyyu.fsf@blueberry.kubism.ku.dk>

"Jens Oehlschlägel-Akiyoshi" <jens.oehlschlaegel-akiyoshi@mdfactory.de> writes:

> Here is a possible BUG with as.data.frame() and/or [.data.frame which broke
> Michael Lapsleys RODBC-Code.
> Can anyone confirm it is a bug or a 'feature' of the prototype?
> 
> 
> tablename <- "abc"
> a <- as.data.frame(cbind("abc", 1:3))
> b <- as.data.frame(cbind(tablename, 1:3))
> 
> # ok
> > a
>    V1 V2
> 1 abc  1
> 2 abc  2
> 3 abc  3
> 
> # missing column name
> > b
>   tablename
> 1       abc 1
> 2       abc 2
> 3       abc 3
> 
> # subsetting ok
> > b[1,1]
> [1] abc
> Levels:  abc
> 
> # subsetting fails
> > b[1,2]
> Error in [.data.frame(b, 1, 2) : undefined columns selected
> 
> 
> ##by contrast
> > data.frame(cbind(tablename, 1:3))
>   tablename Var.2
> 1       abc     1
> 2       abc     2
> 3       abc     3


It's a prototype "feature"...
...
Version 3.4 Release 1 for Sun SPARC, SunOS 5.3 : 1996 
...
>  tablename <- "abc"
>  b <- as.data.frame(cbind(tablename, 1:3))
> b
  tablename   
1       abc 1
2       abc 2
3       abc 3
> b[,2]
Error in "[.data.frame"(b,  , 2): undefined columns selected
Dumped


This is a conspiracy of three things: 

1) The deparse.level feature of cbind (which is unsettable, but the
   internals still behave as if deparse.level=1) which causes a
   deparsing of simple arguments (i.e. symbols) into colnames, leaving
   others blank.

2) as.data.frame.matrix expects that if colnames are present, they can
   just be copied to the names() of the result

3) "[.data.frame" explicitly checks whether a column name is blank
   after subsetting, and protests if it is. 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Mar  8 10:16:30 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 8 Mar 2000 10:16:30 +0000 (GMT)
Subject: [Rd] possible BUG with as.data.frame() and/or [.data.frame
Message-ID: <200003081016.KAA05882@toucan.stats.ox.ac.uk>

> From: "Jens Oehlschlägel-Akiyoshi" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
> Date: Wed, 8 Mar 2000 10:16:39 +0100
> 
> Here is a possible BUG with as.data.frame() and/or [.data.frame which broke
> Michael Lapsleys RODBC-Code.

> Can anyone confirm it is a bug or a 'feature' of the prototype?

It's the same in S-PLUS 3.4, but different in 2000 and 5.1. In short,
it seems a bug in Svr3 that have been fixed since in S-PLUS, but
one could argue that it is intentional.

> tablename <- "abc"
> a <- as.data.frame(cbind("abc", 1:3))
> b <- as.data.frame(cbind(tablename, 1:3))
> 
> # ok
> > a
>    V1 V2
> 1 abc  1
> 2 abc  2
> 3 abc  3
> 
> # missing column name
> > b
>   tablename
> 1       abc 1
> 2       abc 2
> 3       abc 3

It's empty not missing.
> names(b)
[1] "tablename" ""         

Here 2000 and 5.1 give

  tablename X.2 
1       abc   1
2       abc   2
3       abc   3


There's an easy fix here:

as.data.frame.matrix can fixed by adding the two lines after
collabs <- dn[[2]]

    if(any(empty <- nchar(collabs)==0)) 
        collabs[empty] <- paste("V", 1:ncols, sep = "")[empty]

I am inclined to regard this as a reported bug, and fix it in R-release.
I am not sure I know what the optional argument in as.data.frame.matrix is
supposed to do: it seems documented nowhere.  On the other hand, the
behaviour has been there for a long time undetected (in R).


> # subsetting ok
> > b[1,1]
> [1] abc
> Levels:  abc
> 
> # subsetting fails
> > b[1,2]
> Error in [.data.frame(b, 1, 2) : undefined columns selected

That appears to be deliberate: you cannot select unnamed columns.


As for the original code that triggers the problem:

   in sqlSave() in RODBC
   
     newname <- as.data.frame(cbind(NA, NA, tablename, as.matrix(names(dat)),
       12, "varchar", 255, 255, NA, NA, 1, NA))

it is almost always a good idea to name the arguments to cbind.



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Mar  8 10:34:25 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 8 Mar 2000 11:34:25 +0100
Subject: [Rd] RE: [R] RODBC
In-Reply-To: <200003081028.KAA05923@toucan.stats.ox.ac.uk>
Message-ID: <001501bf88e9$e0b32ea0$a9021aac@joelschlaegel>



Sorry,

I was commenting on the previous windows version (version file says 0.5a)
(the first one which ran under RW.1.0.0)

I have Win NT 4.0 Service pack 5
and R is

> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    0.0
year     2000
month    February
day      29
language R



> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk]
> Sent: Wednesday, March 08, 2000 11:29 AM
> To: dajm@deeq.demon.co.uk; mlapsley@ndirect.co.uk
> Cc: jens.oehlschlaegel-akiyoshi@mdfactory.de
> Subject: Re: [R] RODBC
>
>
>
> > Date: Wed, 8 Mar 2000 08:23:02 +0000
> > From: Michael Lapsley <mlapsley@ndirect.co.uk>
> > To: David Middleton <dajm@deeq.demon.co.uk>
> > Cc: Michael Lapsley <mlapsley@ndirect.co.uk>, Prof Brian Ripley
> <ripley@stats.ox.ac.uk>, jens.oehlschlaegel-akiyoshi@mdfactory.de
> > Subject: Re: [R] RODBC
> > X-Keywords:
> >
> > Dammit!  Sorry, folks, to make such stupid mistakes.
> > New version on my 'web page'.
> >
> > On Tue, Mar 07, 2000 at 08:37:14PM -0300, David Middleton wrote:
> > > i) a typo in sqlgetresults "odbcFetchrow" should be
> "odbcFetchRow" at
> > >    line 420 of RODBC/R/RODBC (binary dist. from Brian Ripley)
> > >    line 356 of RODBC/R/sql.R (your source dist)
> > >
> > > ii) the C source change to RODBCNumRows does not set num[0] in the
> > >     case where handles[channel].nRows == -1.  Thus where
> > >     odbcNumRows previously gave me $num=-1, $stat=1, I now
> > >     $num=1, $stat=-1, so it still just returns the first
> row of the query!
>
> I happen to have my laptop in my office of for a demo in 30 mins, so
> a new Windows version is now up at http://www.stats.ox.ac.uk/pub/bdr.
>
> I have no idea which version Jens has been commenting on this morning:
> Jens could you always tell us please?
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Mar  8 13:39:59 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 08 Mar 2000 07:39:59 -0600
Subject: [Rd] Error compiling R on RS6000 (PR#475)
In-Reply-To: Thomas J Vogels's message of "07 Mar 2000 17:31:43 -0500"
References: <200003071536.QAA20337@pubhealth.ku.dk> <x2r9dmkcik.fsf@blueberry.kubism.ku.dk> <871z5m1kfk.fsf@bavaria.ece.cmu.edu>
Message-ID: <6rwvndh974.fsf@franz.stat.wisc.edu>

Thomas J Vogels <tov@ece.cmu.edu> writes:

>   I'll assume Paul meant config.site which contains all the extra
>   compiler and linker flags and those flags are somewhat involved in
>   his environment.  Triggered by Paul's email I tried to
>   compile R-1.0.0.  It compiles cleanly but dies with "Illegal
>   Instruction" upon start.  Sorry, I don't have any further insight
>   into this problem at this time.

Do the compilers need special flags to control IEEE floating point
behavior?  One of the first things that R does on startup is to force
an evaluation of 1.0/0.0 and store the result as a global "Infinity".
On some architecture/compiler combinations this will generate an error
unless you instruct the compiler to insert special code for full IEEE
compliance.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar  8 15:31:06 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Mar 2000 16:31:06 +0100
Subject: [Rd] update fails after specific sequence of steps (PR#474)
In-Reply-To: Peter Dalgaard BSA's message of "07 Mar 2000 15:43:39 +0100"
References: <200003071408.PAA18937@pubhealth.ku.dk> <x2wvnekfhg.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2ya7tv5qd.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Strange things happen on Unix too. 
..
> > mod.m<-update(mod.full, ~.~-status:fcategory)
...
> ...and the attached dataframe is corrupted. Must investigate further.
> 
> > ls("Moore")
> [1] "conform"   "fcategory" "fscore"    "L×@"      "subject"  

I think this is fixed now. Apparently model formulas like the above
caused R to become confused as to the number of variables in the
model and overrun the array of names, subsequently confusing the
garbage collector.

(Temporary workaround: Just don't do that...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar  8 15:41:06 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 08 Mar 2000 10:41:06 -0500
Subject: [Rd] Re: [Omega-devel] StatDataML Description element
References: <Pine.LNX.4.21.0003080915400.30257-100000@boromir.ci.tuwien.ac.at>
Message-ID: <38C67491.13E2B99E@bank-banque-canada.ca>

>> be?  I can imagine a "Data Quality Stamp or Certification" being
relevant
> >within certain communities and it would be nice to have that in the
> >meta-data description, perhaps as a separate argument.]

>something like a RSA-key included in the description? will think about
>this!

I would think of any certification as being part of the "communication
protocol". I could see a place in the data format for indicating the
source, description, and possibly a special field for the the source's
assessment of the quality. If you really want  certification ( =
authentication)  you should have the whole thing encrypted so that it
needs to be unencrypted with the source's public key, but you have to do
that outside the format description (and you need PKI infastructure to
do it correctly).

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Wed Mar  8 15:50:37 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Wed, 8 Mar 2000 16:50:37 +0100 (CET)
Subject: [Rd] Re: [Omega-devel] StatDataML Description element
In-Reply-To: <38C67491.13E2B99E@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.21.0003081642440.25544-100000@boromir.ci.tuwien.ac.at>


> >> be?  I can imagine a "Data Quality Stamp or Certification" being
> relevant
> > >within certain communities and it would be nice to have that in the
> > >meta-data description, perhaps as a separate argument.]
> 
> >something like a RSA-key included in the description? will think about
> >this!
> 
> I would think of any certification as being part of the "communication
> protocol". I could see a place in the data format for indicating the
> source, description, and possibly a special field for the the source's
> assessment of the quality. If you really want  certification ( =
> authentication)  you should have the whole thing encrypted so that it
> needs to be unencrypted with the source's public key, but you have to do
> that outside the format description (and you need PKI infastructure to
> do it correctly).

The idea was not encryption but having something that we can be sure that
the dataset has not been manipulated. There is a w3 project about XML and
signatures at http://www.w3.org/Signature/, maybe one can use something
like this. 

Additionaly, Fritz and I discussed the helpful mail by Kevin and decided
to add a properties element to the description instead of more
comments. One can save "proprietary", that means application based
extentions as properties to the document (which is, in our opinion,
more closed to the framework and saves some lines of code)

We suggest to use the extention *.sdml for StatDataML files, any protests?

Torsten


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar  8 16:47:31 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 08 Mar 2000 11:47:31 -0500
Subject: [Rd] Re: [Omega-devel] StatDataML Description element
References: <Pine.LNX.4.21.0003081642440.25544-100000@boromir.ci.tuwien.ac.at>
Message-ID: <38C68422.BDF20B27@bank-banque-canada.ca>

Torsten

>The idea was not encryption but having something that we can be sure
that
>the dataset has not been manipulated.

This is called authentication. You can add a checksum to the data
format, or something like that, but that just helps stop accidental
manipulation. I think it is useful and may be the way to go, but don't
think of it as any kind of certification or authentication. If you
really want authentication, then the whole format (data, description and
all)  needs to be encrypted by the source with their private key, and it
can then be unencrypted by anyone with the source's public key. The
encryption does not prevent anyone from reading it, since anyone can get
the source's public key. It just prevents manipulation. To do this
properly you then need to be sure that you can get the true source's
public key (not some bogus key provided by whoever is providing you with
manipulated data). That is where Public Key Infrastructure (PKI) is
necessary.

Needless to say, this gets a bit messy, but there are some important
points. The key cannot be part of the message (data format), otherwise
you cannot unlock the key. That is, the authentication has to be part of
what I loosely call the "communications protocol."  I believe these
services are provided by CORBA. If you really want authentication then
you should be looking at the communications protocol, and that is
separate from the data format.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From P.J.Green@bristol.ac.uk  Wed Mar  8 17:23:34 2000
From: P.J.Green@bristol.ac.uk (P.J.Green@bristol.ac.uk)
Date: Wed, 8 Mar 2000 18:23:34 +0100 (MET)
Subject: [Rd] Printing graphs on W98 laptop (PR#477)
Message-ID: <200003081723.SAA04355@pubhealth.ku.dk>

Full_Name: Peter Green
Version: 1.0.0 and 0.99.0
OS: windows 98
Submission from: (NULL) (194.83.240.36)


Running R (either 1.0.0 or 0.99.0) under Windows 98 on
my Toshiba laptop (Satellite 4080), I get a problem
when I hit the print toolbar button with the graph window on top.
It declares an illegal operation, and produces the error
messages reproduced below (slightly different in each
version). It then terminates R and returns to the desktop.

The printer is an HP 6MP, directly connected to the laptop,
no network.

All is fine on my desktop with Windows NT4.0.

Is this a known problem?   

R 1.0.0

RGUI caused an exception 10H in module R.DLL at 015f:1002460b.
Registers:
EAX=00000006 CS=015f EIP=1002460b EFLGS=00010246
EBX=00000000 SS=0167 ESP=0253f220 EBP=0253f258
ECX=0045c8f0 DS=0167 ESI=02ee81c8 FS=0e47
EDX=00000001 ES=0167 EDI=0045c8f0 GS=0000
Bytes at CS:EIP:
dd 99 90 0a 00 00 89 81 90 0a 00 00 8b 81 34 24
Stack dump:     
0045c8f0 02ee81c8 0045c8f0 1007449a 00000002 0322a560
0253f258 1001b862 0045c8f0 00000000 0253f298 10023f7d
00455f70 1000e0fd 0253f298 100249a2

R 0.99.0

RGUI caused an exception 10H in module R.DLL at 015f:1002450b.
Registers:
EAX=00000006 CS=015f EIP=1002450b EFLGS=00010246
EBX=00000000 SS=0167 ESP=0253f220 EBP=0253f258
ECX=0045bad0 DS=0167 ESI=02e6c064 FS=3407
EDX=00000001 ES=0167 EDI=0045bad0 GS=0000
Bytes at CS:EIP:
dd 99 90 0a 00 00 89 81 90 0a 00 00 8b 81 34 24
Stack dump:
0045bad0 02e6c064 0045bad0 100737da 00000002 0318a260
0253f258 1001b822 0045bad0 00000000 0253f298 10023e7d
00455fa0 1000e0dd 0253f298 100248a2
                                                                                
                                                      

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar  8 18:58:20 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 08 Mar 2000 13:58:20 -0500
Subject: [Rd] Re: [Omega-devel] StatDataML Description element
References: <Pine.GSO.4.21.0003080823460.22094-100000@mail.biostat.washington.edu>
Message-ID: <38C6A2CC.405047D2@bank-banque-canada.ca>

Thomas

(I'm getting a bit confused about whether this discussion is taking
place on r-devel or omega-devel, and perhaps everyone is on both lists)

I just posted something on R-devel which I hope addresses many of the
points you mentioned, in particular pointing out that I meant encryption
for the purpose of authentication, not for the purpose of making
something secret, and I was using the term "communication protocol"
rather loosely. In particular, I meant it more broadly than something
like TCP/IP, which would handle accidental corruption during
transmission.

>For this purpose you would want a field that was a (cryptographically
>secure) hash of the data. This could be signed using a public key
system ...

I was rather brief on this point, but it turns out to be a problem to do
this in a way that can be authenticated. That's why encryption is
necessary and why authentication has to be done outside the data format.
It would be possible to build this level into R, for example, in the
same way that Netscape can handle the authentication of email messages,
but it seems to make much more sense to draw on the services from
something like CORBA (which I believe can provide this). In any case, it
has to be "outside" the data format in the same way that it is outside
an email message.

If you are just thinking of the hash for an occassional data set, then
providing a publicly available hash may be adequate. I don't think we
would consider that adequate authentication for data we provide to the
public on a regular basis, because of the problem that the hash can be
spoofed.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgutwin@us.ibm.com  Wed Mar  8 20:00:35 2000
From: pgutwin@us.ibm.com (pgutwin@us.ibm.com)
Date: Wed, 8 Mar 2000 15:00:35 -0500
Subject: [Rd] Error compiling R on RS6000 (PR#475)
Message-ID: <OF18295FA2.47E108A9-ON8525689C.006D91F2@pok.ibm.com>


(sorry - gcc changed underneath me and I was getting a bogus compile error)
I am now getting the same results: Illegal Instruction. I did a little
poking around and found (I think) that during a return following an
UNPROTECT the code is jumping to address #000000. Does this help any?

----------------------------------------------------------------------------------------------------------

Paul Gutwin
802-769-6433
 X86 Product Development
pgutwin@us.ibm.com


Thomas J Vogels <tov@ece.cmu.edu>@bavaria.ece.cmu.edu on 03/07/2000
05:31:43 PM

Please respond to Thomas Vogels <tov@ece.cmu.edu>

Sent by:  tov@bavaria.ece.cmu.edu


To:   Paul Gutwin/Burlington/IBM@IBMUS, r-devel@stat.math.ethz.ch,
      tov@ece.cmu.edu
cc:
Subject:  Re: [Rd] Error compiling R on RS6000 (PR#475)




Hi,

  I'll assume Paul meant config.site which contains all the extra
  compiler and linker flags and those flags are somewhat involved in
  his environment.  Triggered by Paul's email I tried to
  compile R-1.0.0.  It compiles cleanly but dies with "Illegal
  Instruction" upon start.  Sorry, I don't have any further insight
  into this problem at this time.

  I've been working on my Linux box instead of the my AIX workstation
  lately, so I didn't see this earlier.  Actually I've been so busy
  using R, that I've missed to congratulate on the release or 1.0.
  Thanks to all who work on R which has been a tremendous help for me!

  -tom


Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> pgutwin@us.ibm.com writes:
>
> > Full_Name: Paul Gutwin
> > Version: R-1.0.0
> > OS: AIX 4.2.1
> > Submission from: (NULL) (198.133.22.67)
> >
> >
> > R-1.0.0 fails to compile. I'm using the config.cache file from a
successful
>
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> > compliation of R-0.65.0 (prob #290, fixed thanks to Thomas Vogels @
CMU).
>   ^^^^^^^^^^^^^^^^^^^^^^^
>
> What on earth gives you the idea that that might work?? The configure
> scripts have changed many a time since 0.65.0. Or was config.cache a
> typo?

--
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgutwin@us.ibm.com  Wed Mar  8 20:04:02 2000
From: pgutwin@us.ibm.com (pgutwin@us.ibm.com)
Date: Wed, 8 Mar 2000 15:04:02 -0500
Subject: [Rd] Error compiling R on RS6000 (PR#475)
Message-ID: <OFE5F04C32.10597618-ON8525689C.006DFEC0@pok.ibm.com>


Oops - sorry. The aforementioned jump to #00000 is performed someplace deep
in R_LoadProfile, called at line 417 in main.c

----------------------------------------------------------------------------------------------------------

Paul Gutwin
802-769-6433
 X86 Product Development
pgutwin@us.ibm.com

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar  9 00:04:11 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Mar 2000 01:04:11 +0100
Subject: [Rd] Printing graphs on W98 laptop (PR#477)
In-Reply-To: P.J.Green@bristol.ac.uk's message of "Wed, 8 Mar 2000 18:23:34 +0100 (MET)"
References: <200003081723.SAA04355@pubhealth.ku.dk>
Message-ID: <x266ux6mbo.fsf@blueberry.kubism.ku.dk>

P.J.Green@bristol.ac.uk writes:

> Is this a known problem?   

It's been reported before, but been unreproduceable for any of the
developers... I'm fairly sure this is the exact same spot that tripped
Bendix & coworkers. On their systems it appears to depend on the day
of the week and go away when the system adinistrators are looking!
Yours seems to be the first "plain" system (i.e. non-networked
printers) with the problem. Hmm... Are you any good with a debugger?

> 
> R 1.0.0
> 
> RGUI caused an exception 10H in module R.DLL at 015f:1002460b.
> Registers:
> EAX=00000006 CS=015f EIP=1002460b EFLGS=00010246
> EBX=00000000 SS=0167 ESP=0253f220 EBP=0253f258
> ECX=0045c8f0 DS=0167 ESI=02ee81c8 FS=0e47
> EDX=00000001 ES=0167 EDI=0045c8f0 GS=0000
> Bytes at CS:EIP:
> dd 99 90 0a 00 00 89 81 90 0a 00 00 8b 81 34 24
> Stack dump:     
> 0045c8f0 02ee81c8 0045c8f0 1007449a 00000002 0322a560
> 0253f258 1001b862 0045c8f0 00000000 0253f298 10023f7d
> 00455f70 1000e0fd 0253f298 100249a2


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hoffmann@ehmgs2.et.tu-dresden.de  Thu Mar  9 08:43:03 2000
From: hoffmann@ehmgs2.et.tu-dresden.de (hoffmann@ehmgs2.et.tu-dresden.de)
Date: Thu, 9 Mar 2000 09:43:03 +0100 (MET)
Subject: [Rd] Conditional for XDR code left out in saveload.c (PR#478)
Message-ID: <200003090843.JAA07578@pubhealth.ku.dk>

Full_Name: Thomas Hoffmann
Version: 1.0.0
OS: OS/2 Warp 4.0 FP 11
Submission from: (NULL) (141.30.125.20)


I autoconfigured/configured the src'es w/o having XDR (#undef HAVE_RPC_XDR_H).

In saveload.c , at the beginning of the file the XDR code is enclosed by
matching #ifdefs.

But in the NEW_SAVE_FORMAT section, there are no #ifdefs around the XDR code.

Does this imply that using the new save format requires using XDR or is 
this simply an oversight?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar  9 09:10:51 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 9 Mar 2000 09:10:51 +0000 (GMT)
Subject: [Rd] Conditional for XDR code left out in saveload.c (PR#478)
In-Reply-To: <200003090843.JAA07578@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10003090908141.7342-100000@auk.stats>

On Thu, 9 Mar 2000 hoffmann@ehmgs2.et.tu-dresden.de wrote:

> Full_Name: Thomas Hoffmann
> Version: 1.0.0
> OS: OS/2 Warp 4.0 FP 11
> Submission from: (NULL) (141.30.125.20)
> 
> 
> I autoconfigured/configured the src'es w/o having XDR (#undef HAVE_RPC_XDR_H).
> 
> In saveload.c , at the beginning of the file the XDR code is enclosed by
> matching #ifdefs.
> 
> But in the NEW_SAVE_FORMAT section, there are no #ifdefs around the XDR code.
> 
> Does this imply that using the new save format requires using XDR or is 
> this simply an oversight?

The defines in R_SaveToFile and R_LoadFromFile determine what is 
actually used.  I think all that happens is that unused code is not
excluded from the compile (and that happens with the BinarySave code
if XDR is available).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Mar 10 10:09:02 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 10 Mar 2000 11:09:02 +0100
Subject: [Rd] Using WinEdt as editor for R
Message-ID: <38C8C9BE.DE9F7CD2@statistik.uni-dortmund.de>

I just uploaded the archive "R-WinEdt" to CRAN.
You will find it in "Contributed Extensions" - "Non-standard
Extensions".

Note: WinEdt is a Windows 32-bit editor (shareware). (Mik)TeX users may
know the editor.


Relevant part of Readme.txt:

==========================================================================
Using WinEdt as an editor and pager for R			09.03.2000
==========================================================================

Overview:
---------

  This package contains an example and macro file to configure WinEdt
  as an editor or pager for R.


Features:
---------

  - Syntax-Highlighting
  - Pasting selected code from WinEdt directly to R (i.e. from history)
  - Faster start than with standard configuration
  - features of WinEdt (i.e. Delimiter Check, ...)

[.....]
==========================================================================


Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Mar 10 10:34:01 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 10 Mar 2000 11:34:01 +0100 (CET)
Subject: [Rd] README & Apache
Message-ID: <14536.53145.633068.790805@galadriel.ci.tuwien.ac.at>



Due to recent config changes Apache does (by default) not list files
called ``README'' anymore but only prints the contents. This can be a
hassle if you want to download the file ...

As we have no control over all CRAN mirrors we can therefore only
rename the files such that they get listed again. Brian Ripley
suggested to use ReadMe instead which seems to be safe (at least
currently).

I have renamed all files on CRAN over which I have control (i.e., the
ones we do not mirror from some other place), Brian has done his
subtree.

**This applies only to people maintaining CRAN subtrees**: Please
rename all files called README that people might want to download to
ReadMe (or some other safe name). Attached you find a list of
candidates.

The reason why I'm writing this to r-devel is that we want to
discourage the use of name ``README'' for future submissions. I will
configure the CRAN master site in a minute such that it prints
ReadMe's, but also lists the file in the directory listing.

Best,
Fritz

**********************************************************

galadriel:R$ find -name README
./bin/windows/README
./bin/windows/windows-NT/base/README
./bin/windows/windows-NT/README
./bin/osf/osf4.0/tar/alpha_ev5/README
./bin/osf/osf4.0/RPMS/alpha_ev5/source/README
./bin/osf/osf4.0/RPMS/README
./bin/osf/osf4.0/RPMS/alpha_ev6/source/README
./bin/osf/osf4.0/README
./bin/linux/redhat/SRPMS/contrib/README
./bin/linux/redhat/6.x/sparc/README
./bin/linux/redhat/6.x/i386/README
./bin/linux/redhat/6.x/alpha/README
./bin/linux/linuxppc/5.0/README
./bin/linux/suse/5.3/RPMS/i386/source/README
./bin/linux/suse/5.3/RPMS/i386/README
./bin/linux/suse/6.0/RPMS/i386/source/README
./bin/linux/suse/6.0/RPMS/i386/README
./bin/linux/suse/6.2/RPMS/i386/source/README
./bin/linux/suse/6.2/RPMS/i386/README
./bin/linux/suse/README
/bin/linux/suse/6.3/RPMS/i386/README
./src/base/README
./src/base/Historic/Windows/README
./src/base/Historic/README

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Fri Mar 10 14:19:27 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Fri, 10 Mar 2000 15:19:27 +0100 (CET)
Subject: [Rd] StatDataML version 0.1-2
In-Reply-To: <38C6A2CC.405047D2@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.21.0003101514560.30227-100000@boromir.ci.tuwien.ac.at>


I just uploaded version 0.1-2 of the StatDataML proposal with the 
changes discussed this week to 

http://www.ci.tuwien.ac.at/~leisch/R/

Also available at this adress version 0.2-2 of the R implementation of
StatDataML and version 0.1-3 of the XML package. 

Torsten 

*****************************************************************
*								*
* Torsten Hothorn, Statistician					*
* at the moment: Institut fuer Statistik, TU Wien		*
* Tel: 0043 1 58801 10772					*
* Fax: 0043 1 58801 10798					*
*								*
*****************************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Mon Mar 13 01:23:45 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Mon, 13 Mar 2000 02:23:45 +0100 (MET)
Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
Message-ID: <200003130123.CAA03987@pubhealth.ku.dk>

plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))

  shows axis labels as:
  
      |    |    |    |    |     |
                                0
  rather than
      |    |    |    |    |    |
      5    4    3    2    1    0

as I believe it used to do in some earlier version.

Thank you for R.

Rashid Nassar

--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Shannon2, Autoloads, package:base





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Mar 13 12:44:10 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 13 Mar 2000 12:44:10 +0000 (GMT)
Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
Message-ID: <200003131244.MAA07249@toucan.stats.ox.ac.uk>


> From: rnassar@duke.edu
> Date: Mon, 13 Mar 2000 02:23:45 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
> 
>   shows axis labels as:
>   
>       |    |    |    |    |     |
>                                 0
>   rather than
>       |    |    |    |    |    |
>       5    4    3    2    1    0
> 
> as I believe it used to do in some earlier version.

Up to 0.64.2, not since 0.65.0.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Mar 13 13:08:11 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 13 Mar 2000 14:08:11 +0100 (MET)
Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
In-Reply-To: <200003131244.MAA07249@toucan.stats.ox.ac.uk>
References: <200003131244.MAA07249@toucan.stats.ox.ac.uk>
Message-ID: <14540.59451.128319.746184@lynne.ethz.ch>


>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    >> From: rnassar@duke.edu
    >> Date: Mon, 13 Mar 2000 02:23:45 +0100 (MET)
    >> To: r-devel@stat.math.ethz.ch
    >> Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
    >> CC: R-bugs@biostat.ku.dk
    >> X-Loop: R-bugs@biostat.ku.dk
    >> 
    >> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
    >> 
    >> shows axis labels as:
    >> 
    >> |    |    |    |    |     |
    >> 0
    >> rather than
    >> |    |    |    |    |    |
    >> 5    4    3    2    1    0
    >> 
    >> as I believe it used to do in some earlier version.

    BDR> Up to 0.64.2, not since 0.65.0.

No, unfortunately,  happens here with 1.0.0 (even patched; "R-release")

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 13 13:23:53 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Mar 2000 14:23:53 +0100
Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
In-Reply-To: Martin Maechler's message of "Mon, 13 Mar 2000 14:08:11 +0100 (MET)"
References: <200003131244.MAA07249@toucan.stats.ox.ac.uk> <14540.59451.128319.746184@lynne.ethz.ch>
Message-ID: <x2bt4jj95i.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> >>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

>     >> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
>     >> 
>     >> shows axis labels as:
>     >> 
>     >> |    |    |    |    |     |
>     >> 0
>     >> rather than
>     >> |    |    |    |    |    |
>     >> 5    4    3    2    1    0
>     >> 
>     >> as I believe it used to do in some earlier version.
> 
>     BDR> Up to 0.64.2, not since 0.65.0.
> 
> No, unfortunately,  happens here with 1.0.0 (even patched; "R-release")
> 

I think Brian meant that it hasn't done the  5 4 3 2 1 thing since
0.64.2...  

In general, it can be argued that the reversed xy limits are not safe
and shouldn't be, since things are likely not to work at the device
level with a mirrored coordinate system (I.e.: if we decide that it
should work, we may find ourselves fixing lots of small glitches in
devxxx.c). 

Plotting (5-x,5-y) and doing the axes with axis(n, at=0:5, labels=5:0)
will get the plot done in a cleaner, albeit more cumbersome fashion.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From neteler@geog.uni-hannover.de  Mon Mar 13 18:04:51 2000
From: neteler@geog.uni-hannover.de (neteler@geog.uni-hannover.de)
Date: Mon, 13 Mar 2000 19:04:51 +0100 (MET)
Subject: [Rd] check does not accept --vsize option (PR#481)
Message-ID: <200003131804.TAA12983@pubhealth.ku.dk>

Full_Name: Markus Neteler
Version: 1.0.0
OS: Linux 2.2.10/i686
Submission from: (NULL) (130.75.72.37)


Hi,

I wanted to "check" the R.GRASS GIS interface from Roger Bivand:
http://www.geog.uni-hannover.de/grass/statsgrasslist.html

using
R CMD check --vsize=10M GRASS

but:

[error message shortened]
> G <- gmeta()
Error: heap memory (6144 Kb) exhausted [needed 1024 Kb more]
       See "help(Memory)" on how to increase the heap size.
Execution halted

It seems that --vsize is ignored. I check R/bin/check, the
parameter is sent properly to R but ignored there. From the
buglist I have seen that this problem occured with --nsize, too.

Hoping for a bug fix!

Kind regards and many thanks for your work

 Markus Neteler
 GRASS GIS 5 coordinator




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Mar 13 19:02:37 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 13 Mar 2000 13:02:37 -0600
Subject: [Rd] check does not accept --vsize option (PR#481)
In-Reply-To: neteler@geog.uni-hannover.de's message of "Mon, 13 Mar 2000 19:04:51 +0100 (MET)"
References: <200003131804.TAA12983@pubhealth.ku.dk>
Message-ID: <6rya7msng2.fsf@franz.stat.wisc.edu>

neteler@geog.uni-hannover.de writes:

> I wanted to "check" the R.GRASS GIS interface from Roger Bivand:
> http://www.geog.uni-hannover.de/grass/statsgrasslist.html
> 
> using
> R CMD check --vsize=10M GRASS
> 
> but:
> 
> [error message shortened]
> > G <- gmeta()
> Error: heap memory (6144 Kb) exhausted [needed 1024 Kb more]
>        See "help(Memory)" on how to increase the heap size.
> Execution halted
> 
> It seems that --vsize is ignored. I check R/bin/check, the
> parameter is sent properly to R but ignored there. From the
> buglist I have seen that this problem occured with --nsize, too.

An R CMD check is designed to run in a protected environment, which is
the reason that some command line switches are ignored.  A workaround
is to specify the size as a shell or environment variable.  That is, use
 R_VSIZE=10M R CMD check GRASS
from a Bourne shell (or equivalent).  From the C-shell you may need to
use
 setenv R_VSIZE 10M
 R CMD check GRASS

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Mon Mar 13 19:11:21 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Mon, 13 Mar 2000 20:11:21 +0100 (MET)
Subject: [Rd] plot(1:10,c(1)$nothing)  yields index plot (PR#482)
Message-ID: <200003131911.UAA13262@pubhealth.ku.dk>

<<insert bug report here>>

IMHO, 

	plot(x,c(1)$nothing)

should fail or at least issue a warning.

Instead it produces an index plot of the first argument, i.e. plot(x)

Chuck Berry

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Patched
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive
Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Mar 13 19:27:42 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 13 Mar 2000 11:27:42 -0800 (PST)
Subject: [Rd] plot(1:10,c(1)$nothing)  yields index plot (PR#482)
In-Reply-To: <200003131911.UAA13262@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0003131116350.18281-100000@mail.biostat.washington.edu>

On Mon, 13 Mar 2000 cberry@tajo.ucsd.edu wrote:

> <<insert bug report here>>
> 
> IMHO, 
> 
> 	plot(x,c(1)$nothing)
> 
> should fail or at least issue a warning.
> 
> Instead it produces an index plot of the first argument, i.e. plot(x)

No, the alternative is worse.

The ability to do plot(x) with x a vector is important.  One might think
that in 
	plot(x,y=NULL)
we could test for missing(y) rather than is.null(y) and issue a warning if
y was NULL but not missing.  More-or-less equivalently we could use
substitute(y) to check whether y was a literal NULL or an expression
evaluating to NULL.

This turns out to be a bad idea, because we must be able to call plot(x)
from other functions (with arbitrarily deep nesting), and it becomes very
messy to trick plot() into handling the arguments correctly as they are
passed from one function to another. 

Since plot(x) can't tell whether the NULL argument is deliberate or
accidental, it shouldn't try to guess and give a warning.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 13 19:49:02 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Mar 2000 20:49:02 +0100
Subject: [Rd] plot(1:10,c(1)$nothing)  yields index plot (PR#482)
In-Reply-To: Thomas Lumley's message of "Mon, 13 Mar 2000 11:27:42 -0800 (PST)"
References: <Pine.GSO.4.21.0003131116350.18281-100000@mail.biostat.washington.edu>
Message-ID: <x23dpuabwx.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> This turns out to be a bad idea, because we must be able to call plot(x)
> from other functions (with arbitrarily deep nesting), and it becomes very
> messy to trick plot() into handling the arguments correctly as they are
> passed from one function to another. 

Actually, S-plus has that problem, not R:

> f<-function(x,y)g(x,y)
> g<-function(x,y)missing(y)
> f(2)
[1] F

where R propagates missings just fine:

> f<-function(x,y)g(x,y)
> g<-function(x,y)missing(y)
> f(2)
[1] TRUE

but given the amount of ported code we have to deal with, we probably
have to be able to deal with NULLs being passed to signify absent
arguments. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 13 20:28:41 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 13 Mar 2000 20:28:41 +0000 (GMT)
Subject: [Rd] check does not accept --vsize option (PR#481)
In-Reply-To: <6rya7msng2.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.GSO.4.05.10003132010540.26046-100000@auk.stats>

On 13 Mar 2000, Douglas Bates wrote:

> neteler@geog.uni-hannover.de writes:
> 
> > I wanted to "check" the R.GRASS GIS interface from Roger Bivand:
> > http://www.geog.uni-hannover.de/grass/statsgrasslist.html
> > 
> > using
> > R CMD check --vsize=10M GRASS
> > 
> > but:
> > 
> > [error message shortened]
> > > G <- gmeta()
> > Error: heap memory (6144 Kb) exhausted [needed 1024 Kb more]
> >        See "help(Memory)" on how to increase the heap size.
> > Execution halted
> > 
> > It seems that --vsize is ignored. I check R/bin/check, the
> > parameter is sent properly to R but ignored there. From the
> > buglist I have seen that this problem occured with --nsize, too.

What version of R were you using?  That bug report was from 0.99.0,
I think.

> An R CMD check is designed to run in a protected environment, which is
> the reason that some command line switches are ignored.  A workaround
> is to specify the size as a shell or environment variable.  That is, use
>  R_VSIZE=10M R CMD check GRASS
> from a Bourne shell (or equivalent).  From the C-shell you may need to
> use
>  setenv R_VSIZE 10M
>  R CMD check GRASS

I think CMD check _is_ now supposed to accept --vsize and --nsize:

auk%  R CMD check --help
Usage: R CMD check [options] pkgs
...
  --vsize=N             set R's vector heap size to N bytes
  --nsize=N             set R's number of cons cells to N


However, it seems not to work correctly

ARGUMENT '{R_opts}' __ignored__

appears in *.Rout on Solaris, and only one of them is accepted.

In the check script we need

    --nsize=*)
      R_opts="${R_opts} ${1}" ;;
    --vsize=*)
      R_opts="${R_opts} ${1}" ;;

adding a couple of `$'.


On (t)csh I use something like.

env R_VSIZE=10M R CMD check GRASS


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aim@uwo.ca  Mon Mar 13 21:02:44 2000
From: aim@uwo.ca (aim@uwo.ca)
Date: Mon, 13 Mar 2000 22:02:44 +0100 (MET)
Subject: [Rd] error in par option xaxt (PR#483)
Message-ID: <200003132102.WAA13861@pubhealth.ku.dk>

Full_Name: Ian McLeod
Version: 1
OS: WinNT
Submission from: (NULL) (129.100.45.131)


The plot optional argument xaxt does not work.  Setting xaxt="n" has no effect,
the axis is annotated. The R online documention provides an example. See
help(axis) and try to execute the illustrative script. The annotated labels are
overwritten.

For convenience, I have extracted the following from the help(axis) page:

plot(1:4, rnorm(4), axes=FALSE)
axis(1, 1:4, LETTERS[1:4])
axis(2)
box() #- to make it look "as usual"

plot(1:7, rnorm(7), type = 's', xaxt='n', col = 'red')
axis(1, 1:7, LETTERS[1:7], col.axis = 'blue')




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aim@uwo.ca  Mon Mar 13 21:03:02 2000
From: aim@uwo.ca (aim@uwo.ca)
Date: Mon, 13 Mar 2000 22:03:02 +0100 (MET)
Subject: [Rd] error in par option xaxt (PR#484)
Message-ID: <200003132103.WAA13875@pubhealth.ku.dk>

Full_Name: Ian McLeod
Version: 1
OS: WinNT
Submission from: (NULL) (129.100.45.131)


The plot optional argument xaxt does not work.  Setting xaxt="n" has no effect,
the axis is annotated. The R online documention provides an example. See
help(axis) and try to execute the illustrative script. The annotated labels are
overwritten.

For convenience, I have extracted the following from the help(axis) page:

plot(1:4, rnorm(4), axes=FALSE)
axis(1, 1:4, LETTERS[1:4])
axis(2)
box() #- to make it look "as usual"

plot(1:7, rnorm(7), type = 's', xaxt='n', col = 'red')
axis(1, 1:7, LETTERS[1:7], col.axis = 'blue')




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyzhang@umich.edu  Mon Mar 13 21:13:29 2000
From: lyzhang@umich.edu (lyzhang@umich.edu)
Date: Mon, 13 Mar 2000 22:13:29 +0100 (MET)
Subject: [Rd] Install R1.0.0 (PR#485)
Message-ID: <200003132113.WAA13935@pubhealth.ku.dk>


Hello,

I tried to compile and install R. After I ran
make 2>&1 | tee log
., I got the following error:

making system.d from system.c
system.c:37: readline/readline.h: No such file or directory
make[3]: *** [system.d] Error 1
make[3]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
0.0/src/unix'
make[2]: *** [R] Error 2
make[2]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
0.0/src/unix'
make[1]: *** [R] Error 1
make[1]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
0.0/src'
make: *** [R] Error 1



Please help.

Lots aof thanks!

*=======================================* 
*	Lynn Zhang             	        *
*	LS&A System Services Team       *
*	lyzhang@umich.edu               *
*=======================================*


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Mar 13 21:24:59 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 13 Mar 2000 13:24:59 -0800 (PST)
Subject: [Rd] Install R1.0.0 (PR#485)
In-Reply-To: <200003132113.WAA13935@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0003131315460.18281-100000@mail.biostat.washington.edu>

On Mon, 13 Mar 2000 lyzhang@umich.edu wrote:

> 
> Hello,
> 
> I tried to compile and install R. After I ran
> make 2>&1 | tee log
> ., I got the following error:
> 
> making system.d from system.c
> system.c:37: readline/readline.h: No such file or directory

It looks as though you are trying to use GNU readline without it being
present.  This shouldn't be allowed by configure.

Try 
     make distclean
     ./configure
     make

again, to see if the problem goes away. If it doesn't then
look at src/include/config.h to see if you have something like
/* GNU Readline Library */
#define HAVE_LIBREADLINE 1
#define HAVE_READLINE_HISTORY_H 1
#define HAVE_READLINE_READLINE_H 1
indicating that configure thinks you have readline or like
/* GNU Readline Library */
/* #undef HAVE_LIBREADLINE */
/* #undef HAVE_READLINE_HISTORY_H */
/* #undef HAVE_READLINE_READLINE_H */
indicating that it doesn't.

In either case there would be a problem with configure, but a different
one. It's possible, for example, that configure is finding the readline
headers but that the compiler isn't looking in the same place.

Of course this is assuming you do have the GNU readline library and
headers. If you don't, then
	./configure --without-readline
is a workaround, though we would still like to know why configure thinks
you have it.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle




> make[3]: *** [system.d] Error 1
> make[3]: Leaving directory
> `/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
> 0.0/src/unix'
> make[2]: *** [R] Error 2
> make[2]: Leaving directory
> `/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
> 0.0/src/unix'
> make[1]: *** [R] Error 1
> make[1]: Leaving directory
> `/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
> 0.0/src'
> make: *** [R] Error 1
> 
> 
> 
> Please help.
> 
> Lots aof thanks!
> 
> *=======================================* 
> *	Lynn Zhang             	        *
> *	LS&A System Services Team       *
> *	lyzhang@umich.edu               *
> *=======================================*
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 13 21:46:59 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 13 Mar 2000 21:46:59 +0000 (GMT)
Subject: [Rd] error in par option xaxt (PR#483)
In-Reply-To: <200003132102.WAA13861@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10003132143060.27721-100000@auk.stats>

On Mon, 13 Mar 2000 aim@uwo.ca wrote:

> Full_Name: Ian McLeod
> Version: 1
> OS: WinNT
> Submission from: (NULL) (129.100.45.131)
> 
> 
> The plot optional argument xaxt does not work.  Setting xaxt="n" has no effect,
> the axis is annotated. The R online documention provides an example. See
> help(axis) and try to execute the illustrative script. The annotated labels are
> overwritten.

You mean 1.0.0, I think. That bug is already fixed for R-release: as you
are on Windows you will just need to compile it up from source

As a workaround, 

par(xaxt='n')
plot(1:7, rnorm(7), type = 's', col = 'red')

_does_ work: it is only the inline setting that is broken, and only in that
version.

[I don't understand why this was sent out twice with different PR# numbers?
Did you submit it twice?]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Mar 14 09:32:37 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 14 Mar 2000 10:32:37 +0100 (MET)
Subject: [Rd] Re: autoload error in profile {was anova-bug in R-version  1.0.0?} (PR#486)
Message-ID: <200003140932.KAA17259@pubhealth.ku.dk>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Tue, 7 Mar 2000, Martin Maechler wrote:
    >> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
    >> 
    BDR> On Tue, 7 Mar 2000, Trenkler, Dietrich wrote:
    >> >> I think I've discovered what went wrong.
    >> >> 
    >> >> My workspace included a function wilcox.test formerly copied from
    >> >> ctest. Now ctest ist part of the distribution and because of that I
    >> >> always got the message:
    >> >> 
    >> >> [Previously saved workspace restored]
    >> >> 
    >> >> Error in autoload("wilcox.test", "ctest") :
    >> >> Object already exists
    >> >> 
    >> >> I didn't take care of this message. Now I removed wilcox.test, saved
    >> >> the WS, restarted R without the vanilla-option and alas, anova
    >> >> now works.
    >> >> 
    >> >> It seems that R stops initializing after encountering the error
    >> >> mentioned above. Is this correct?   
    >> 
    BDR> Yes, in that the rest of the system Rprofile file is skipped
    BDR> and hence options show.signif.stars and show.coef.Pvalues are not set.
    >> but other options as well..
    >> I think this shouldn't happen and *is* a bug.

    BDR> It looks to me as if a bit more protection is needed in print.coefmat,
    BDR> at least.

	 which Brian has implemented in the mean time.

	 ....

    >> For the 1.0.x patches, at least, I'll move the autoload()'s to the end of
    >> profile/Common.R

    BDR> I _think_ they should have try() around them, which is what S-PLUS 
    BDR> now does with all startup code.

I tried this, but it does not work :

try(autoload(..)) works okay when used after startup, but not *during*
startup.  However, I'll put a workaround into Common.R

Should this {try(.) not working during startup} be another bug report ?

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Tue Mar 14 11:16:27 2000
From: dtrenkler@nts6.oec.uni-osnabrueck.de (dtrenkler@nts6.oec.uni-osnabrueck.de)
Date: Tue, 14 Mar 2000 12:16:27 +0100 (MET)
Subject: [Rd] Bug in sub? (PR#487)
Message-ID: <200003141116.MAA19358@pubhealth.ku.dk>

I suspect that there is bug in sub when using "?":

> string_"This is a bug!"
>  sub("!", ", or isn't it?", string)
[1] "This is a bug, or isn't it?"
> string_"This is a bug?"
>  sub("?", ", or isn't it?", string)
[1] "This is a bug?"


Regards,

  *** D.Trenkler ***

====================================================================
Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
Statistik / Empirische Wirtschaftsforschung
Universitaet Osnabrueck
Rolandstrasse 8                           Phone: +49(0) 541-969-2753
D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
GERMANY
====================================================================


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows NT 4.0 (build 1381) Service Pack 3

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Tue Mar 14 11:22:54 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Tue, 14 Mar 2000 12:22:54 +0100 (CET)
Subject: [Rd] Bug in sub? (PR#487)
In-Reply-To: <200003141116.MAA19358@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0003141221520.18407-100000@boromir.ci.tuwien.ac.at>


> I suspect that there is bug in sub when using "?":
> 
> > string_"This is a bug!"
> >  sub("!", ", or isn't it?", string)
> [1] "This is a bug, or isn't it?"
> > string_"This is a bug?"
> >  sub("?", ", or isn't it?", string)
> [1] "This is a bug?"


R> string_"This is a bug?"
R> sub("[?]", ", or isn't it?", string)
[1] "This is a bug, or isn't it?"

works, has "?" a special meaning in regexp?

Torsten


> 
> 
> Regards,
> 
>   *** D.Trenkler ***
> 
> ====================================================================
> Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
> Statistik / Empirische Wirtschaftsforschung
> Universitaet Osnabrueck
> Rolandstrasse 8                           Phone: +49(0) 541-969-2753
> D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
> GERMANY
> ====================================================================
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 0.0
>  year = 2000
>  month = February
>  day = 29
>  language = R
> 
> Windows NT 4.0 (build 1381) Service Pack 3
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 14 11:33:38 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 2000 12:33:38 +0100
Subject: [Rd] Bug in sub? (PR#487)
In-Reply-To: dtrenkler@nts6.oec.uni-osnabrueck.de's message of "Tue, 14 Mar 2000 12:16:27 +0100 (MET)"
References: <200003141116.MAA19358@pubhealth.ku.dk>
Message-ID: <x266up4wh9.fsf@blueberry.kubism.ku.dk>

dtrenkler@nts6.oec.uni-osnabrueck.de writes:

> I suspect that there is bug in sub when using "?":
> 
> > string_"This is a bug!"
> >  sub("!", ", or isn't it?", string)
> [1] "This is a bug, or isn't it?"
> > string_"This is a bug?"
> >  sub("?", ", or isn't it?", string)
> [1] "This is a bug?"

Hmm. If there is a bug it may not where you think...

'?' is an operator of extended regular expressions, so you're not
looking for a question mark there: 

>  sub("\\?", ", or isn't it?", string)
[1] "This is a bug, or isn't it?"

>  sub("?", ", or isn't it?", ext=F, string)
[1] "This is a bug, or isn't it?"

One might expect that a null RE would always match the beginning of a
string, but it doesn't...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From simon.frost@ed.ac.uk  Tue Mar 14 13:15:54 2000
From: simon.frost@ed.ac.uk (simon.frost@ed.ac.uk)
Date: Tue, 14 Mar 2000 14:15:54 +0100 (MET)
Subject: [Rd] Error in lme? (PR#488)
Message-ID: <200003141315.OAA21607@pubhealth.ku.dk>

Full_Name: Simon Frost
Version: 1.0.0
OS: Windows
Submission from: (NULL) (129.215.60.79)


Hi everyone,

I've just installed R for Windows - I've previously been using it on Linux -
and I've run into a problem when using lme.

The lme routine throws up an error in the getGroups.data.frame command,
complaining about an error in the formula:

Error in getGroups.data.frame(dataMix, groups) : 
        Invalid formula for groups

getGroups works just fine, and I haven't run into this problem previously.

Any ideas?

Best wishes
Simon

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Mar 14 13:44:56 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 14 Mar 2000 07:44:56 -0600
Subject: [Rd] Error in lme? (PR#488)
In-Reply-To: simon.frost@ed.ac.uk's message of "Tue, 14 Mar 2000 14:15:54 +0100 (MET)"
References: <200003141315.OAA21607@pubhealth.ku.dk>
Message-ID: <6rg0ttll7r.fsf@franz.stat.wisc.edu>

simon.frost@ed.ac.uk writes:

> I've just installed R for Windows - I've previously been using it on Linux -
> and I've run into a problem when using lme.
> 
> The lme routine throws up an error in the getGroups.data.frame command,
> complaining about an error in the formula:
> 
> Error in getGroups.data.frame(dataMix, groups) : 
>         Invalid formula for groups
> 
> getGroups works just fine, and I haven't run into this problem previously.

Could you send us an example call that generates this error
(preferably using one of the data sets that comes with R)?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyzhang@umich.edu  Tue Mar 14 21:33:30 2000
From: lyzhang@umich.edu (Lynn Zhang)
Date: Tue, 14 Mar 2000 16:33:30 -0500 (EST)
Subject: [Rd] Install R1.0.0 (PR#485)
In-Reply-To: <Pine.GSO.4.21.0003131315460.18281-100000@mail.biostat.washington.edu>
Message-ID: <Pine.SOL.3.95.1000314163154.17926J-100000@kongzi.admin.lsa.umich.edu>


Hello,

After I run make, I got the following error,

__d_sign                            /usr/lsa/lib/libblas.a(drotg.o)
ld: fatal: Symbol referencing errors. No output written to ../../bin/R.X11
make[3]: *** [../../bin/R.X11] Error 1
make[3]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.0.0/src/main'
make[2]: *** [R] Error 2
make[2]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.0.0/src/main'
make[1]: *** [R] Error 1
make[1]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.0.0/src'
make: *** [R] Error 1


Would you please help me on that?

Lots of thanks!




*=======================================* 
*	Lynn Zhang             	        *
*	LS&A System Services Team       *
*	lyzhang@umich.edu               *
*=======================================*

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Wed Mar 15 11:03:03 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Wed, 15 Mar 2000 12:03:03 +0100
Subject: [Rd] solaris without x
Message-ID: <38CF6DE7.896575F0@univie.ac.at>

i am trying to compile the current release on solaris 8.
i do not have a complete x installation on my server.
so i tried
./configure --without-x
this is what i get

making dataentry.d from dataentry.c
In file included from dataentry.c:28:
dataentry.h:22: X11/X.h: No such file or directory
dataentry.h:23: X11/Xlib.h: No such file or directory
dataentry.h:24: X11/Xutil.h: No such file or directory
dataentry.h:25: X11/keysym.h: No such file or directory
dataentry.h:26: X11/cursorfont.h: No such file or directory
make[3]: *** [dataentry.d] Error 1

./configure --without-x --without-dataentry --disable-dataentry

this is what i get

make[3]: Entering directory `/servers/space/neuwirth/R/R-release/src/unix'
gcc -I. -I../include -I../../src/include -I../../src/include/R_ext   -DHAVE_CONF
IG_H  -g -O2 -c dataentry.c -o dataentry.o
In file included from dataentry.c:28:
dataentry.h:22: X11/X.h: No such file or directory
dataentry.h:23: X11/Xlib.h: No such file or directory
dataentry.h:24: X11/Xutil.h: No such file or directory
dataentry.h:25: X11/keysym.h: No such file or directory
dataentry.h:26: X11/cursorfont.h: No such file or directory
make[3]: *** [dataentry.o] Error 1

can anybody help me?



--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Mar 15 11:17:14 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 15 Mar 2000 12:17:14 +0100 (CET)
Subject: [Rd] solaris without x
In-Reply-To: <38CF6DE7.896575F0@univie.ac.at>
References: <38CF6DE7.896575F0@univie.ac.at>
Message-ID: <14543.28986.899408.308721@aragorn.ci.tuwien.ac.at>

>>>>> Erich Neuwirth writes:

> i am trying to compile the current release on solaris 8.
> i do not have a complete x installation on my server.
> so i tried
> ./configure --without-x
> this is what i get

> making dataentry.d from dataentry.c
> In file included from dataentry.c:28:
> dataentry.h:22: X11/X.h: No such file or directory
> dataentry.h:23: X11/Xlib.h: No such file or directory
> dataentry.h:24: X11/Xutil.h: No such file or directory
> dataentry.h:25: X11/keysym.h: No such file or directory
> dataentry.h:26: X11/cursorfont.h: No such file or directory
> make[3]: *** [dataentry.d] Error 1

> ./configure --without-x --without-dataentry --disable-dataentry

> this is what i get

> make[3]: Entering directory `/servers/space/neuwirth/R/R-release/src/unix'
> gcc -I. -I../include -I../../src/include -I../../src/include/R_ext   -DHAVE_CONF
> IG_H  -g -O2 -c dataentry.c -o dataentry.o
> In file included from dataentry.c:28:
> dataentry.h:22: X11/X.h: No such file or directory
> dataentry.h:23: X11/Xlib.h: No such file or directory
> dataentry.h:24: X11/Xutil.h: No such file or directory
> dataentry.h:25: X11/keysym.h: No such file or directory
> dataentry.h:26: X11/cursorfont.h: No such file or directory
> make[3]: *** [dataentry.o] Error 1

> can anybody help me?

Simply speaking, --without-x is not supported (yet).  We are planning to
package GUIs (X11, GNOME) in the near future, and along with that we
should also make it possible to build without X.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 15 11:34:20 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Mar 2000 12:34:20 +0100
Subject: [Rd] solaris without x
In-Reply-To: Kurt Hornik's message of "Wed, 15 Mar 2000 12:17:14 +0100 (CET)"
References: <38CF6DE7.896575F0@univie.ac.at> <14543.28986.899408.308721@aragorn.ci.tuwien.ac.at>
Message-ID: <x2r9dco4ar.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> Simply speaking, --without-x is not supported (yet).  We are planning to
> package GUIs (X11, GNOME) in the near future, and along with that we
> should also make it possible to build without X.

However, last I tried (a couple of years back, admittedly...) it
wasn't terribly difficult to force the sources to compile without X.
Basically, place R on the operating table and rip out the relevant
internal organs... I.e. you need to remove the entire dataentry.c and
devX11.c and all references to X include files and functions in other
places. 

If you figure out how to do this with proper #ifdef'ing I think we'd
like to have the patches (it is much easier to get right on a system
that doesn't actuallly have X11, and gives an error if one forget to
remove something...).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Wed Mar 15 13:31:00 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Wed, 15 Mar 2000 14:31:00 +0100
Subject: [Rd] headers needed in gcc
Message-ID: <38CF9094.EEE7BEEC@univie.ac.at>

i am working my way to create a stdin-stdout version of R

i am not a gcc configuration expert.
currently, i am missing

#include <sys/types.h>
#  include <sys/socket.h>
#  include <netinet/in.h>
#  include <netinet/tcp.h>
#include "sock.h"

as far as i understand my system,
these header files shpuld be in
/usr/local/lib/gcc-lib/sparc-sun-solaris2.7/2.95.1/include

what library do i have to create in gcc
to get these goodies?



--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Mar 15 14:08:41 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 15 Mar 2000 15:08:41 +0100 (MET)
Subject: [Rd] headers needed in gcc
In-Reply-To: <38CF9094.EEE7BEEC@univie.ac.at>
References: <38CF9094.EEE7BEEC@univie.ac.at>
Message-ID: <14543.39273.545539.516566@lynne.ethz.ch>

>>>>> "Erich" == Erich Neuwirth <erich.neuwirth@univie.ac.at> writes:

    Erich> i am working my way to create a stdin-stdout version of R
    Erich> i am not a gcc configuration expert.
    Erich> currently, i am missing

    Erich> #include <sys/types.h>
    Erich> #  include <sys/socket.h>
    Erich> #  include <netinet/in.h>
    Erich> #  include <netinet/tcp.h>

    Erich> #include "sock.h"
well, "sock.h"  (as the `"' suggests) is a local file, 
in this case, it's in the same directory as the *.c file which includes it.
 
    Erich> as far as i understand my system,
    Erich> these header files shpuld be in
    Erich> /usr/local/lib/gcc-lib/sparc-sun-solaris2.7/2.95.1/include

Well, I think to remember that for gcc under Solaris,
it looks *BOTH* in
   /usr/local/lib/gcc-lib/sparc..../<version>/include
AND
   /usr/include/

i.e. /usr/include/sys/  and /usr/include/netinet/  may contain your
headers..
Otherwise, try

    cd /usr/include
    find . -name types.h
    find . -name tcp.h

etc.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Wed Mar 15 15:20:26 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Wed, 15 Mar 2000 16:20:26 +0100
Subject: [Rd] question
Message-ID: <38CFAA3A.1108F0CC@univie.ac.at>

here is another question (kurt already knows about it).
i would like to do a client server version
of R where the server can run on a unix box and the client
is excel ond a win machine.
the easiest solution would be running a stdin-stdout version
of the server through inetd.
but this is vulnerable.
so what is needed is a sandbox version of the server,
where no acrtive access to the file system is open
and where spawning processes is disabled.
are there any plans for doing such a version?


--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Wed Mar 15 15:52:29 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Wed, 15 Mar 2000 16:52:29 +0100 (MET)
Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
Message-ID: <200003151552.QAA07465@pubhealth.ku.dk>

Dear Sirs,

Thank you very much for your replies.  If I may, and assuming this makes
sense, I would like to suggest as a low-priority wish-list item for a
future version that perhaps the plot function could take an additional
optional argument (e.g. reverse, which can have values "x", "y" or "xy")
which would make the plot function do the calculations suggested by Dr
Dalgaard below to allow easy plotting with reversed axis values, and even
prehaps issue a warning message for xlim=c(5:2) to make it clear that this
is not supposed to work that way?  Just some thoughts. 

Thank you again!

Rashid Nassar


On 13 Mar 2000, Peter Dalgaard BSA wrote:

> Date: 13 Mar 2000 14:23:53 +0100
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> To: Martin Maechler <maechler@stat.math.ethz.ch>
> Cc: Prof Brian Ripley <ripley@stats.ox.ac.uk>, r-devel@stat.math.ethz.ch,
>     rnassar@duke.edu, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
> 
> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > >>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> >     >> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
> >     >> 
> >     >> shows axis labels as:
> >     >> 
> >     >> |    |    |    |    |     |
> >     >> 0
> >     >> rather than
> >     >> |    |    |    |    |    |
> >     >> 5    4    3    2    1    0
> >     >> 
> >     >> as I believe it used to do in some earlier version.
> > 
> >     BDR> Up to 0.64.2, not since 0.65.0.
> > 
> > No, unfortunately,  happens here with 1.0.0 (even patched; "R-release")
> > 
> 
> I think Brian meant that it hasn't done the  5 4 3 2 1 thing since
> 0.64.2...  
> 
> In general, it can be argued that the reversed xy limits are not safe
> and shouldn't be, since things are likely not to work at the device
> level with a mirrored coordinate system (I.e.: if we decide that it
> should work, we may find ourselves fixing lots of small glitches in
> devxxx.c). 
> 
> Plotting (5-x,5-y) and doing the axes with axis(n, at=0:5, labels=5:0)
> will get the plot done in a cleaner, albeit more cumbersome fashion.
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> 
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Wed Mar 15 15:44:23 2000
From: rnassar@duke.edu (Rashid Nassar)
Date: Wed, 15 Mar 2000 10:44:23 -0500 (EST)
Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
In-Reply-To: <x2bt4jj95i.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SOL.3.91.1000315103144.28375A-100000@bio3.acpub.duke.edu>

Dear Sirs,

Thank you very much for your replies.  If I may, and assuming this makes
sense, I would like to suggest as a low-priority wish-list item for a
future version that perhaps the plot function could take an additional
optional argument (e.g. reverse, which can have values "x", "y" or "xy")
which would make the plot function do the calculations suggested by Dr
Dalgaard below to allow easy plotting with reversed axis values, and even
prehaps issue a warning message for xlim=c(5:2) to make it clear that this
is not supposed to work that way?  Just some thoughts. 

Thank you again!

Rashid Nassar


On 13 Mar 2000, Peter Dalgaard BSA wrote:

> Date: 13 Mar 2000 14:23:53 +0100
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> To: Martin Maechler <maechler@stat.math.ethz.ch>
> Cc: Prof Brian Ripley <ripley@stats.ox.ac.uk>, r-devel@stat.math.ethz.ch,
>     rnassar@duke.edu, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
> 
> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > >>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> >     >> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
> >     >> 
> >     >> shows axis labels as:
> >     >> 
> >     >> |    |    |    |    |     |
> >     >> 0
> >     >> rather than
> >     >> |    |    |    |    |    |
> >     >> 5    4    3    2    1    0
> >     >> 
> >     >> as I believe it used to do in some earlier version.
> > 
> >     BDR> Up to 0.64.2, not since 0.65.0.
> > 
> > No, unfortunately,  happens here with 1.0.0 (even patched; "R-release")
> > 
> 
> I think Brian meant that it hasn't done the  5 4 3 2 1 thing since
> 0.64.2...  
> 
> In general, it can be argued that the reversed xy limits are not safe
> and shouldn't be, since things are likely not to work at the device
> level with a mirrored coordinate system (I.e.: if we decide that it
> should work, we may find ourselves fixing lots of small glitches in
> devxxx.c). 
> 
> Plotting (5-x,5-y) and doing the axes with axis(n, at=0:5, labels=5:0)
> will get the plot done in a cleaner, albeit more cumbersome fashion.
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 15 16:33:17 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Mar 2000 17:33:17 +0100
Subject: [Rd] question
In-Reply-To: Erich Neuwirth's message of "Wed, 15 Mar 2000 16:20:26 +0100"
References: <38CFAA3A.1108F0CC@univie.ac.at>
Message-ID: <x2em9cnqgi.fsf@blueberry.kubism.ku.dk>

Erich Neuwirth <erich.neuwirth@univie.ac.at> writes:

> here is another question (kurt already knows about it). i would like
> to do a client server version of R where the server can run on a
> unix box and the client is excel ond a win machine. the easiest
> solution would be running a stdin-stdout version of the server
> through inetd. but this is vulnerable. so what is needed is a
> sandbox version of the server, where no acrtive access to the file
> system is open and where spawning processes is disabled. are there
> any plans for doing such a version?

No immediate plans no.

It sounds a bit dangerous with dyn.load and whatnot floating around.
What would be more likely to work would be to have a version of R that
would immediately chroot() to a directory specified on the command
line and an inetd.conf entry like

auth stream  tcp nowait  nobody  \
   /usr/sbin/tcpd in.Rdaemon --chroot=/usr/lib/Rdaemon 

and setup /usr/lib/Rdaemon as a "chroot jail" with no write
permissions and /bin and /lib subdirectories with only the few system
commands and .so files needed to run (if there are any), and with an
/RHOME tree with packages and soforth. That way, it could do little
damage apart from eating CPU cycles. (Much like the way in which
anonymous FTP is set up).
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Mar 15 16:35:12 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 15 Mar 2000 08:35:12 -0800 (PST)
Subject: [Rd] question
In-Reply-To: <38CFAA3A.1108F0CC@univie.ac.at>
Message-ID: <Pine.GSO.4.21.0003150821350.22376-100000@mail.biostat.washington.edu>

On Wed, 15 Mar 2000, Erich Neuwirth wrote:

> here is another question (kurt already knows about it).
> i would like to do a client server version
> of R where the server can run on a unix box and the client
> is excel ond a win machine.
> the easiest solution would be running a stdin-stdout version
> of the server through inetd.
> but this is vulnerable.
> so what is needed is a sandbox version of the server,
> where no acrtive access to the file system is open
> and where spawning processes is disabled.
> are there any plans for doing such a version?


This would be very hard to do properly.  It's certainly possible to
disable the interpreted commands that access the file system, and even to
remove them from the symbol table so that .C and .Internal can't get to
them. This would stop accidental damage or casual attacks.

However I don't think we can disable .C/.Fortran completely.  By passing
data of the wrong types to .C a sufficiently malicious program can
overwrite the stack and get with very little effort the sort of effect
that usually takes buffer overflows. 

I think a secure version of R would require rewriting all the important .C
and .Fortran code to use Internal or .Call and then disabling .C and
.Fortran as well as system() and all the file access commands (or perhaps 
restricting the file access to a specific tree as http servers do).

In the foreseeable future I think the solution is to assume that R can
execute arbitrary code and either run in a safe account or authenticate
the connection somehow. 


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Wed Mar 15 18:02:22 2000
From: luke@stat.umn.edu (Luke Tierney)
Date: Wed, 15 Mar 2000 12:02:22 -0600 (CST)
Subject: [Rd] question
In-Reply-To: <38CFAA3A.1108F0CC@univie.ac.at> from Erich Neuwirth at "Mar 15, 2000 04:20:26 pm"
Message-ID: <200003151802.MAA23423@nokomis.stat.umn.edu>

Erich Neuwirth wrote:
> here is another question (kurt already knows about it).
> i would like to do a client server version
> of R where the server can run on a unix box and the client
> is excel ond a win machine.
> the easiest solution would be running a stdin-stdout version
> of the server through inetd.
> but this is vulnerable.
> so what is needed is a sandbox version of the server,
> where no acrtive access to the file system is open
> and where spawning processes is disabled.
> are there any plans for doing such a version?
> 

You could have a look at some of the things Jeff Banfield did for Rweb
(http://www.math.montana.edu/Rweb).  He disabled some things to get a
moderate increase in security, but as Thomas and Peter said, you
really can't drop dyn.load and .C and with those more or less anything
is open to someone who knows what they are doing.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Wed Mar 15 18:52:41 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Wed, 15 Mar 2000 19:52:41 +0100
Subject: [Rd] compiling
Message-ID: <38CFDBF9.C8B9D227@univie.ac.at>

here i am again.
it turns out that
the link step does not automatically include
the lnsl library, which contains the tcp stuff.
how can i tell configure it should use the relevant library
in the link step?
i cannot find a way of doing this.


--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Mar 15 18:55:58 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 15 Mar 2000 10:55:58 -0800 (PST)
Subject: [Rd] compiling
In-Reply-To: <38CFDBF9.C8B9D227@univie.ac.at>
Message-ID: <Pine.GSO.4.21.0003151055380.22376-100000@mail.biostat.washington.edu>

On Wed, 15 Mar 2000, Erich Neuwirth wrote:

> here i am again.
> it turns out that
> the link step does not automatically include
> the lnsl library, which contains the tcp stuff.
> how can i tell configure it should use the relevant library
> in the link step?
> i cannot find a way of doing this.

Add it to the LIBS variable in config.site

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Wed Mar 15 20:42:17 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Wed, 15 Mar 2000 21:42:17 +0100
Subject: [Rd] solaris without x
References: <38CF6DE7.896575F0@univie.ac.at> <14543.28986.899408.308721@aragorn.ci.tuwien.ac.at> <x2r9dco4ar.fsf@blueberry.kubism.ku.dk>
Message-ID: <38CFF5A9.2634CAAA@univie.ac.at>

ok,
i managed to create a non x-rated version of R

i am not an expert in writing configurations,
so i just give the changes.
perhaps some kind soul can integrate them into configure and
the different Makefile.in
or wheerever chanegs are needed.

-=-=-=-=-=-=

the following changes are needed:

necessary changes in 
src/unix/Makefile

old
SOURCES = dataentry.c devX11.c dynload.c edit.c rotated.c \
         system.c sys-unix.c sys-common.c
--->
new
SOURCES = dynload.c edit.c  \
          system.c sys-unix.c sys-common.c

probably sensible changes:
remove
HEADERS = dataentry.h devX11.h rotated.h

-=-=-=-=-=-=-=-=-=-=-

necessary changes in 
src/main/devices.c

#ifdef Unix

has to be changed to
Unix AND X11
(or whatever the syntax needed is)

-=-=-=-=-=-=-=-=-=-=-

necessary changes in 
src/main/names.c
remove the entry
{"dataentry",   do_dataentry,   0,      11,     1,      PP_FUNCALL},

-=-=-=-=-=-=-=-=-=-=-

necessary changes in 
src/unix/system.c

1. remove

            case XActivity:
                R_ProcessEvents();
                break;

2. remove 

#include "devX11.h"
#define XActivity 1
    int connectionfd = X11ConnectionNumber();


3. remove 
    if (connectionfd > 0) {
        FD_SET(connectionfd, &readMask);
        if (connectionfd > stdinfd)
            maxfd = connectionfd;

4. remove 
   if (connectionfd > 0)
        if (FD_ISSET(connectionfd, &readMask))
            return XActivity;



-=-=-=-=-=-=-=-=-=-=-


> However, last I tried (a couple of years back, admittedly...) it
> wasn't terribly difficult to force the sources to compile without X.
> Basically, place R on the operating table and rip out the relevant
> internal organs... I.e. you need to remove the entire dataentry.c and
> devX11.c and all references to X include files and functions in other
> places.
> 
> If you figure out how to do this with proper #ifdef'ing I think we'd
> like to have the patches (it is much easier to get right on a system
> that doesn't actuallly have X11, and gives an error if one forget to
> remove something...).
> 
--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Wed Mar 15 23:27:33 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Thu, 16 Mar 2000 10:27:33 +1100
Subject: [Rd] question
In-Reply-To: <38CFAA3A.1108F0CC@univie.ac.at>; from erich.neuwirth@univie.ac.at on Wed, Mar 15, 2000 at 04:20:26PM +0100
References: <38CFAA3A.1108F0CC@univie.ac.at>
Message-ID: <20000316102733.A9676@ftoomsh.progsoc.uts.edu.au>

On Wed, Mar 15, 2000 at 04:20:26PM +0100, Erich Neuwirth wrote:
> here is another question (kurt already knows about it).
> i would like to do a client server version
> of R where the server can run on a unix box and the client
> is excel ond a win machine.
> the easiest solution would be running a stdin-stdout version
> of the server through inetd.
> but this is vulnerable.

It isn't too bad if you feed it through the /usr/sbin/tcpd
service which can screen incoming connections (various
filtering rules go into /etc/hosts.allow and /etc/hosts.deny,
see the man page for tcpd). If your local network keeps
static IP numbers then add all the acceptable machines into
your /etc/hosts file so you have a local copy of their IP numbers
and no one can use the DNS to confuse your machine, also make
sure nothing nearby has source-routing switched on.

That is reasonably secure if you can trust the machines which
you are allowing connections from and your routers are set up
in a way that they cannot get confused. It is still possible
for someone to clip their laptop to the local network, use a
false IP number and maybe make a connection but this is pretty
unlikely and you probably will see the person doing it (unless
your local network is completely insecure like ours).

Naturally, using a chroot is a good idea and creating a local
unix user that does only this and owns no files except its
own tree is also a good idea.

	- Tel
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Mar 16 08:02:03 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 16 Mar 2000 09:02:03 +0100 (MET)
Subject: [Rd] Attachments with bug reports: PLEASE don't
In-Reply-To: <200003160435.FAA26315@stat.math.ethz.ch>
References: <200003160435.FAA26315@stat.math.ethz.ch>
Message-ID: <14544.38139.84527.599335@lynne.ethz.ch>

Dear Gregory,
you'v sent a bug report (PR#489) to R-bugs
with the subject
  "r-base_1.0.0-1_i386.deb install problem (PR#489)"

you end saying

>> I've attached both the modified control file, and a complete debian
>> package which is identical to the original except for this change.
>> 
>> -Gregory 
 
and then you have a 5 MB attachment, filename "r-base_1.0.0-2_i386.deb"
base64 encoded.
{and hence (size!) the automatic forwarding of the bug report to R-devel
 is bounced --- that's how I got it}.

Now, please  (everyone!)

     >>>> --------------------------------------- <<<<
     >>>> stop using attachments in R bug reports <<<<
     >>>> --------------------------------------- <<<<

1) the attachments become practically unusable once the bug report is 
   put in the jitterbug archive,
      http://bugs.r-project.org
      ~~~~~~~~~~~~~~~~~~~~~~~~~
2) Bug reports should usually be short (up to at most a few hundred lines, IMO)
   
3) If you (really) need to provide long files for data or such,
   make them available via FTP or HTTP from your site..

---

However, thank you for sending useful bug reports!
	 ---------
This way you are becoming part of the ``R culture''
which as most Open Source / Free Software projects
relies on wide collaboration.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Thu Mar 16 22:25:29 2000
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Thu, 16 Mar 2000 23:25:29 +0100 (MET)
Subject: [Rd] R-1.0.0 on alpha/osf1 memory glitch (PR#490)
Message-ID: <200003162225.XAA21838@pubhealth.ku.dk>

Digital Alpha (various), Digital UNIX V4.0[EF], R-1.0.0, gcc, f77

When using batch mode with the save option, an error message is issued.
However [I have just discovered that] it appears that the operation
does complete, i.e. the .RData file is saved successfully.  The main
problem is that the return code is non-zero (and so it is impossible to
distinguish this "non-error" from some other error in a script).

Reproduce by:

    bats>  echo 'x <- 1' | R --save
    
    R : Copyright 2000, The R Development Core Team
    Version 1.0.0  (February 29, 2000)
    
    R is free software and comes with ABSOLUTELY NO WARRANTY.
    You are welcome to redistribute it under certain conditions.
    Type    "?license" or "?licence" for distribution details.
    
    R is a collaborative project with many contributors.
    Type    "?contributors" for a list.
    
    Type    "demo()" for some demos, "help()" for on-line help, or
            "help.start()" for a HTML browser interface to help.
    Type    "q()" to quit R.
    
    > x <- 1
    >
    xmalloc: out of virtual memory
    bats> 

Note that an alternate form that achieves the same desired effect does
not issue any error messages:

    echo 'x <- 1; save(list = ls(), file = ".RData")' | R --no-save

I can't find any record of the configure summary output (is it saved
anywhere, or does it only appear on the screen?) but I could reproduce
this if necessary.

Ray Brownrigg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 17 07:32:00 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 17 Mar 2000 08:32:00 +0100
Subject: [Rd] solaris without x
In-Reply-To: <38CFF5A9.2634CAAA@univie.ac.at>
References: <38CF6DE7.896575F0@univie.ac.at>
 <14543.28986.899408.308721@aragorn.ci.tuwien.ac.at>
 <x2r9dco4ar.fsf@blueberry.kubism.ku.dk>
 <38CFF5A9.2634CAAA@univie.ac.at>
Message-ID: <200003170732.IAA01479@aragorn.ci.tuwien.ac.at>

>>>>> Erich Neuwirth writes:

> ok,
> i managed to create a non x-rated version of R

> i am not an expert in writing configurations, so i just give the
> changes.  perhaps some kind soul can integrate them into configure and
> the different Makefile.in or wheerever chanegs are needed.

I'll try to merge the changes into R, but it may take a few days ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 17 07:32:00 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 17 Mar 2000 08:32:00 +0100
Subject: [Rd] compiling
In-Reply-To: <Pine.GSO.4.21.0003151055380.22376-100000@mail.biostat.washington.edu>
References: <38CFDBF9.C8B9D227@univie.ac.at>
 <Pine.GSO.4.21.0003151055380.22376-100000@mail.biostat.washington.edu>
Message-ID: <200003170732.IAA01482@aragorn.ci.tuwien.ac.at>

>>>>> Thomas Lumley writes:

> On Wed, 15 Mar 2000, Erich Neuwirth wrote:
>> here i am again.
>> it turns out that
>> the link step does not automatically include
>> the lnsl library, which contains the tcp stuff.
>> how can i tell configure it should use the relevant library
>> in the link step?
>> i cannot find a way of doing this.

> Add it to the LIBS variable in config.site

> 	-thomas

Or, do

	LIBS=-lnsl /path/to/configure

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 17 07:32:01 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 17 Mar 2000 08:32:01 +0100
Subject: [Rd] headers needed in gcc
In-Reply-To: <38CF9094.EEE7BEEC@univie.ac.at>
References: <38CF9094.EEE7BEEC@univie.ac.at>
Message-ID: <200003170732.IAA01487@aragorn.ci.tuwien.ac.at>

>>>>> Erich Neuwirth writes:

> i am working my way to create a stdin-stdout version of R
> i am not a gcc configuration expert.
> currently, i am missing

> #include <sys/types.h>
> #  include <sys/socket.h>
> #  include <netinet/in.h>
> #  include <netinet/tcp.h>
> #include "sock.h"

> as far as i understand my system, these header files shpuld be in
> /usr/local/lib/gcc-lib/sparc-sun-solaris2.7/2.95.1/include

> what library do i have to create in gcc to get these goodies?

I don't know whether the header files ``should'' be in gcc-lib (in which
case gcc should also find them), but the code definitely needs some
help.  I don't think that sys/socket.h or netinet/*.h are ANSI C, and
this is all we assume.  We should have AC_CONFIG_HEADER tests for each
of these, and not have sockets if the headers cannot be found.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kthaka@uta.fi  Fri Mar 17 09:16:11 2000
From: kthaka@uta.fi (kthaka@uta.fi)
Date: Fri, 17 Mar 2000 10:16:11 +0100 (MET)
Subject: [Rd] lag (PR#491)
Message-ID: <200003170916.KAA24535@pubhealth.ku.dk>

Full_Name: Hannu Kahra
Version: 1.0.0
OS: Windows
Submission from: (NULL) (153.1.50.127)


x1 <- lag(x, k=1) returns the original series x. The time series is not
shiftet at all. Only the time is shiftet: for x1 new start = old start -1 
and new end = old end -1. When I run, e.g. lm(x~x1) the result is not what
I expect. Both x and x1 are time series. Is this a bug or am I forgetting
something?

Regards
Hannu Kahra 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 17 09:38:18 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 17 Mar 2000 09:38:18 +0000 (GMT)
Subject: [Rd] lag (PR#491)
In-Reply-To: <200003170916.KAA24535@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10003170931560.26211-100000@auk.stats>

On Fri, 17 Mar 2000 kthaka@uta.fi wrote:

> Full_Name: Hannu Kahra
> Version: 1.0.0
> OS: Windows
> Submission from: (NULL) (153.1.50.127)
> 
> 
> x1 <- lag(x, k=1) returns the original series x. The time series is not
> shiftet at all. Only the time is shiftet: for x1 new start = old start -1 
> and new end = old end -1. When I run, e.g. lm(x~x1) the result is not what

So that is _not_ the original series!

> I expect. Both x and x1 are time series. Is this a bug or am I forgetting
> something?

Your description is exactly as documented:

Lag a Time Series

Description:

     Computed a lagged version of a time series, shifting the time base
     back by `k' observations.

[Please read the documentation before submitting a bug report. The FAQ
tells you what a bug is.]

Don't apply regression (a non-time-series technique) to time series, and
expect the implicit conversion to vectors to preserve the time alignment.
Do something like

library(ts)
data(lh)
df <- cbind(x=lh, x1 =lag(lh, 1))
lm(x ~ x1, data=df)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From robertasg@takas.lt  Fri Mar 17 15:35:38 2000
From: robertasg@takas.lt (robertasg@takas.lt)
Date: Fri, 17 Mar 2000 16:35:38 +0100 (MET)
Subject: [Rd] the R bug (PR#492)
Message-ID: <200003171535.QAA01208@pubhealth.ku.dk>

This is a multi-part message in MIME format.

------=_NextPart_000_0005_01BF9034.A9183BA0
Content-Type: text/plain;
	charset="iso-8859-4"
Content-Transfer-Encoding: quoted-printable

Hello, i am from Lithuania=20
I am workink with program R. But i have problem, if i need work with =
more als 220Mb disk space. Free disk space i have 2Gb.=20
Can you help me??

Sincerly Robertas Geistoraitis form Lithuania from Genetic Laboratory=20
University of Veterinary



------=_NextPart_000_0005_01BF9034.A9183BA0
Content-Type: text/html;
	charset="iso-8859-4"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META content=3D"text/html; charset=3Diso-8859-4" =
http-equiv=3DContent-Type>
<META content=3D"MSHTML 5.00.2614.3500" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT face=3DArial size=3D2>Hello, i am from Lithuania =
</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>I am workink with program R. But i have =
problem, if=20
i need work with more als 220Mb disk space. Free disk space i have 2Gb.=20
</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Can you help me??</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>Sincerly Robertas Geistoraitis form =
Lithuania from=20
Genetic Laboratory </FONT></DIV>
<DIV><FONT face=3DArial size=3D2>University of Veterinary</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV></BODY></HTML>

------=_NextPart_000_0005_01BF9034.A9183BA0--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Fri Mar 17 15:35:30 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Fri, 17 Mar 2000 16:35:30 +0100
Subject: [Rd] lag (PR#491)
References: <Pine.GSO.4.05.10003170931560.26211-100000@auk.stats>
Message-ID: <38D250C1.5D6EBE49@univie.ac.at>

here is another thing

on my relatively standard solaris 7 configuration i had to put
LIB="-lnsl -lsocket"
in config.site

perhaps this can be done by configure automatically,
if gcc is found?


--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar 17 16:30:34 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 17 Mar 2000 08:30:34 -0800 (PST)
Subject: [Rd] -nsl
In-Reply-To: <38D250C1.5D6EBE49@univie.ac.at>
Message-ID: <Pine.GSO.4.21.0003170826340.29031-100000@mail.biostat.washington.edu>

On Fri, 17 Mar 2000, Erich Neuwirth wrote:

> here is another thing
> 
> on my relatively standard solaris 7 configuration i had to put
> LIB="-lnsl -lsocket"
> in config.site
> 
> perhaps this can be done by configure automatically,
> if gcc is found?

On my Solaris 7 configuration it is looked for automatically with either
cc or gcc. The check is part of X_EXTRA_LIBS

If we are going to configure --without-x it would need to be
checked for.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dirk@surfer.sbm.temple.edu  Fri Mar 17 17:02:48 2000
From: dirk@surfer.sbm.temple.edu (dirk@surfer.sbm.temple.edu)
Date: Fri, 17 Mar 2000 18:02:48 +0100 (MET)
Subject: [Rd] optim: problem with additional arguments (PR#493)
Message-ID: <200003171702.SAA01912@pubhealth.ku.dk>

The R function "optim" fails when a function requires additional
arguments, if the option "hessian=T" is specified.  I am using R Version
1.0.0 on Windows 98.

Here is an example of the Rosenbrock Banana function from the optim help
example, with the function and gradient modified to take an additonal
argument.  Note that the call to optim works fine unless a hessian is
requested.


     ## Rosenbrock Banana function, modified to take an additional
argument
     fra <- function(x,a) {
         x1 <- x[1]
         x2 <- x[2]
         a * (x2 - x1 * x1)^2 + (1 - x1)^2
     }

     grra <- function(x,a) {
         x1 <- x[1]
         x2 <- x[2]
         c(-4*a * x1 * (x2 - x1 * x1) - 2 * (1 - x1), 2*a * (x2 - x1 *
x1))
     }
a <- 100
xx <- c(-2.1,1)
optim(c(-1.2,1), fra, grra, method = "BFGS",a=100)             # this
works
optim(c(-1.2,1), fra, grra, method = "BFGS",hessian=T,a=100)   # this
doesn't



Dirk Moore
Dept. of Statistics
Temple University
dirk@sbm.temple.edu




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 17 17:28:28 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 17 Mar 2000 18:28:28 +0100 (CET)
Subject: [Rd] -nsl
In-Reply-To: <Pine.GSO.4.21.0003170826340.29031-100000@mail.biostat.washington.edu>
References: <38D250C1.5D6EBE49@univie.ac.at>
 <Pine.GSO.4.21.0003170826340.29031-100000@mail.biostat.washington.edu>
Message-ID: <14546.27452.734481.937821@aragorn.ci.tuwien.ac.at>

>>>>> Thomas Lumley writes:

> On Fri, 17 Mar 2000, Erich Neuwirth wrote:
>> here is another thing
>> 
>> on my relatively standard solaris 7 configuration i had to put
>> LIB="-lnsl -lsocket"
>> in config.site
>> 
>> perhaps this can be done by configure automatically,
>> if gcc is found?

> On my Solaris 7 configuration it is looked for automatically with
> either cc or gcc. The check is part of X_EXTRA_LIBS

> If we are going to configure --without-x it would need to be checked
> for.

I think we need to test for socket functionality, both for header files
and libraries.  Let me see if I can come up with such a test ...

Where did sock.c && friends come from?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar 17 17:43:20 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 17 Mar 2000 09:43:20 -0800 (PST)
Subject: [Rd] -nsl
In-Reply-To: <14546.27452.734481.937821@aragorn.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.21.0003170942240.29432-100000@mail.biostat.washington.edu>

On Fri, 17 Mar 2000, Kurt Hornik wrote:

> >>>>> Thomas Lumley writes:
> 
> > On Fri, 17 Mar 2000, Erich Neuwirth wrote:
> >> here is another thing
> >> 
> >> on my relatively standard solaris 7 configuration i had to put
> >> LIB="-lnsl -lsocket"
> >> in config.site
> >> 
> >> perhaps this can be done by configure automatically,
> >> if gcc is found?
> 
> > On my Solaris 7 configuration it is looked for automatically with
> > either cc or gcc. The check is part of X_EXTRA_LIBS
> 
> > If we are going to configure --without-x it would need to be checked
> > for.
> 
> I think we need to test for socket functionality, both for header files
> and libraries.  Let me see if I can come up with such a test ...
> 
> Where did sock.c && friends come from?

They're based on Luke's socket code for xlispstat.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 17 18:43:42 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Mar 2000 19:43:42 +0100
Subject: [Rd] optim: problem with additional arguments (PR#493)
In-Reply-To: dirk@surfer.sbm.temple.edu's message of "Fri, 17 Mar 2000 18:02:48 +0100 (MET)"
References: <200003171702.SAA01912@pubhealth.ku.dk>
Message-ID: <x2zorxfndt.fsf@blueberry.kubism.ku.dk>

dirk@surfer.sbm.temple.edu writes:

> The R function "optim" fails when a function requires additional
> arguments, if the option "hessian=T" is specified.  I am using R Version
> 1.0.0 on Windows 98.
....
> optim(c(-1.2,1), fra, grra, method = "BFGS",a=100)             # this
> works
> optim(c(-1.2,1), fra, grra, method = "BFGS",hessian=T,a=100)   # this
> doesn't

Yes. However, you can easily fix it for yourself. In optim(), the line

    hess <- .Internal(optimhess(res$par, fn, gr, con))

needs to be modified along the lines of

    res <- .Internal(optim(par, function(par) fn(par, ...),
                           function(par) gr(par, ...),
                           method, con, lower, upper))

(although that might get you in trouble if gr is NULL, so a permanent
fix would be slightly different.)


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Hoffmann" <thoffman@zappa.sax.de  Fri Mar 17 23:04:10 2000
From: Thomas Hoffmann" <thoffman@zappa.sax.de (Thomas Hoffmann)
Date: Sat, 18 Mar 00 00:04:10 +0100
Subject: [Rd] d-p-q-r-tests: why is plnorm(exp(Inf)) equal pnorm(Inf)?
Message-ID: <38d2b9ec.thoffman.zappa@zappa.sax.de>

I stumbled across a result of d-p-q-r-tests:

d-p-q-r-tests expects pnorm(Inf) and pnorm(-Inf)  to give the same results as  plnorm(exp(Inf)) 
and plnorm(exp(-Inf)), respectively.

Does this mean that all expressions result in NaN (which I expect for the 3rd and 4th expression only) or 
does it mean that R can prevent the exp(Inf) to be evaluated before being parsed in the context of plnorm?

Thomas Hoffmann.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar 17 23:38:48 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 17 Mar 2000 15:38:48 -0800 (PST)
Subject: [Rd] d-p-q-r-tests: why is plnorm(exp(Inf)) equal pnorm(Inf)?
In-Reply-To: <38d2b9ec.thoffman.zappa@zappa.sax.de>
Message-ID: <Pine.GSO.4.21.0003171536410.29432-100000@mail.biostat.washington.edu>

On Sat, 18 Mar 2000, Thomas Hoffmann wrote:

> I stumbled across a result of d-p-q-r-tests:
> 
> d-p-q-r-tests expects pnorm(Inf) and pnorm(-Inf)  to give the same results as  plnorm(exp(Inf)) 
> and plnorm(exp(-Inf)), respectively.
> 
> Does this mean that all expressions result in NaN (which I expect for
> the 3rd and 4th expression only) or does it mean that R can prevent
> the exp(Inf) to be evaluated before being parsed in the context of
> plnorm?

No, it means that exp(Inf) and exp(-Inf) are evaluated correctly (Inf and
0 respectively) and the lognormal cdf is then evaluated as 1 and 0
respectively. 

If the result were NaN then equality would not hold. Nothing is equal to
NaN, not even itself.



	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Sat Mar 18 05:14:17 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 18 Mar 2000 00:14:17 -0500
Subject: [Rd] AIX fails on startup with R-1.0.0
Message-ID: <87ln3g97x2.fsf@bavaria.ece.cmu.edu>


Hi,

this is not a bug report since this may not be a problem with R per se. 

The current release of R (1.1.0) will compile cleanly on an AIX box
(I have 4.3.2) but it will fail upon startup with an Illegal
Instruction.  I've located the problem to be in do_strsplit when R
calls regcomp.

This function is defined in regex.c.  However, the text from regex.o
doesn't find its way into the executable, R.X11, since there's also a
regcomp in /usr/lib/libc.a  Apparently, this confuses the system
enough to completely lose its mind.  When regcomp in libc.a gets
called, the stack is trashed which made this hard to debug.

A temporary fix is to remove the _first_ use of -lc from the linker
command line.  This will affect the way the export symbols are
defined.  Not sure yet whether this matters.

Why does this bug only show up on AIX?  Is this some weird posix trap?

Thanks,
  -tom  

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Mar 18 10:58:00 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Mar 2000 11:58:00 +0100
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: Thomas J Vogels's message of "18 Mar 2000 00:14:17 -0500"
References: <87ln3g97x2.fsf@bavaria.ece.cmu.edu>
Message-ID: <x2hfe4czpj.fsf@blueberry.kubism.ku.dk>

Thomas J Vogels <tov@ece.cmu.edu> writes:

> Hi,
> 
> this is not a bug report since this may not be a problem with R per se. 
> 
> The current release of R (1.1.0) will compile cleanly on an AIX box
> (I have 4.3.2) but it will fail upon startup with an Illegal
> Instruction.  I've located the problem to be in do_strsplit when R
> calls regcomp.
> 
> This function is defined in regex.c.  However, the text from regex.o
> doesn't find its way into the executable, R.X11, since there's also a
> regcomp in /usr/lib/libc.a  Apparently, this confuses the system
> enough to completely lose its mind.  When regcomp in libc.a gets
> called, the stack is trashed which made this hard to debug.
> 
> A temporary fix is to remove the _first_ use of -lc from the linker
> command line.  This will affect the way the export symbols are
> defined.  Not sure yet whether this matters.
> 
> Why does this bug only show up on AIX?  Is this some weird posix trap?

We've discussed this recently (others know better than me). I think
you have it spot on, and the problem is that almost all other systems
than AIX will have the linker implicitly move -lc *after* the .o
files... AFAIR the permanent fix is equivalent to your temporary one.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Sat Mar 18 19:18:20 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Sat, 18 Mar 2000 11:18:20 -0800 (PST)
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: <x2hfe4czpj.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu>

On 18 Mar 2000, Peter Dalgaard BSA wrote:

> Thomas J Vogels <tov@ece.cmu.edu> writes:
> 
> > Hi,
> > 
> > this is not a bug report since this may not be a problem with R per se. 
> > 
> > The current release of R (1.1.0) will compile cleanly on an AIX box
> > (I have 4.3.2) but it will fail upon startup with an Illegal
> > Instruction.  I've located the problem to be in do_strsplit when R
> > calls regcomp.
> > 
> > This function is defined in regex.c.  However, the text from regex.o
> > doesn't find its way into the executable, R.X11, since there's also a
> > regcomp in /usr/lib/libc.a  Apparently, this confuses the system
> > enough to completely lose its mind.  When regcomp in libc.a gets
> > called, the stack is trashed which made this hard to debug.
> > 
> > A temporary fix is to remove the _first_ use of -lc from the linker
> > command line.  This will affect the way the export symbols are
> > defined.  Not sure yet whether this matters.
> > 
> > Why does this bug only show up on AIX?  Is this some weird posix trap?
> 
> We've discussed this recently (others know better than me). I think
> you have it spot on, and the problem is that almost all other systems
> than AIX will have the linker implicitly move -lc *after* the .o
> files... AFAIR the permanent fix is equivalent to your temporary one.


It's actually a combination of a number of factors.  On most systems we
link with the C compiler, which knows what to do with libc automatically.  
In any case, many linkers can handle the problem as Peter points out.

On AIX we were using ld rather than CC to link, and ld doesn't move -lc to
the end, and we were using a hardcoded set of linker options that some
helpful user had sent in a long time ago (no-one in R-core has very
convenient access to AIX). It worked fine until we added GNU regex to R.

The fix was what you suggest.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Sun Mar 19 14:50:30 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Sun, 19 Mar 2000 15:50:30 +0100
Subject: [Rd] windows version
References: <87ln3g97x2.fsf@bavaria.ece.cmu.edu> <x2hfe4czpj.fsf@blueberry.kubism.ku.dk>
Message-ID: <38D4E936.EB941D1C@univie.ac.at>

for all of you using the windows version:
i think having a look at the r-winedt
interface by volker ligges is a good idea.
it works quite nicely.

i talked to volker,
and at the moment,
there is something which could be improved,
anmley it would be nice if one could get access to the current
history buffer.

is there a way of getting it
(i.e. exactly what would be saved in .Rhistory if one were to exit right
now)?

then one could interactively edit the current session
in winedt.







Peter Dalgaard BSA wrote:
> 
> Thomas J Vogels <tov@ece.cmu.edu> writes:
> 
> > Hi,
> >
> > this is not a bug report since this may not be a problem with R per se.
> >
> > The current release of R (1.1.0) will compile cleanly on an AIX box
> > (I have 4.3.2) but it will fail upon startup with an Illegal
> > Instruction.  I've located the problem to be in do_strsplit when R
> > calls regcomp.
> >
> > This function is defined in regex.c.  However, the text from regex.o
> > doesn't find its way into the executable, R.X11, since there's also a
> > regcomp in /usr/lib/libc.a  Apparently, this confuses the system
> > enough to completely lose its mind.  When regcomp in libc.a gets
> > called, the stack is trashed which made this hard to debug.
> >
> > A temporary fix is to remove the _first_ use of -lc from the linker
> > command line.  This will affect the way the export symbols are
> > defined.  Not sure yet whether this matters.
> >
> > Why does this bug only show up on AIX?  Is this some weird posix trap?
> 
> We've discussed this recently (others know better than me). I think
> you have it spot on, and the problem is that almost all other systems
> than AIX will have the linker implicitly move -lc *after* the .o
> files... AFAIR the permanent fix is equivalent to your temporary one.
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Sun Mar 19 23:00:48 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 19 Mar 2000 18:00:48 -0500
Subject: [Rd] R-1.0.0 on alpha/osf1 memory glitch (PR#490)
References: <200003162225.XAA21838@pubhealth.ku.dk>
Message-ID: <87hfe21s67.fsf@bavaria.ece.cmu.edu>


Hi,

I just tried this on an AIX computer (4.3.2, also gcc + f77, R-1.0.0).
The same "error" comes up -- xmalloc complains.  This is somewhat
cosmetic as the data is fine so it may not be very high on the
priority list.
Anyways, let me know if I can help debug this--I don't know whether
you have easy access to DEC or AIX boxes.  But with a dysfunctional
gdb I'd need a hint about where this might happen.
Regards,
  -tom


Ray.Brownrigg@mcs.vuw.ac.nz writes:

> Digital Alpha (various), Digital UNIX V4.0[EF], R-1.0.0, gcc, f77
> 
> When using batch mode with the save option, an error message is issued.
> However [I have just discovered that] it appears that the operation
> does complete, i.e. the .RData file is saved successfully.  The main
> problem is that the return code is non-zero (and so it is impossible to
> distinguish this "non-error" from some other error in a script).

[snip]
>     xmalloc: out of virtual memory

[snip]

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Mar 19 23:49:00 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Mar 2000 00:49:00 +0100
Subject: [Rd] R-1.0.0 on alpha/osf1 memory glitch (PR#490)
In-Reply-To: Thomas J Vogels's message of "19 Mar 2000 18:00:48 -0500"
References: <200003162225.XAA21838@pubhealth.ku.dk> <87hfe21s67.fsf@bavaria.ece.cmu.edu>
Message-ID: <x266ui4j2r.fsf@blueberry.kubism.ku.dk>

Thomas J Vogels <tov@ece.cmu.edu> writes:

> Hi,
> 
> I just tried this on an AIX computer (4.3.2, also gcc + f77, R-1.0.0).
> The same "error" comes up -- xmalloc complains.  This is somewhat
> cosmetic as the data is fine so it may not be very high on the
> priority list.
> Anyways, let me know if I can help debug this--I don't know whether
> you have easy access to DEC or AIX boxes.  But with a dysfunctional
> gdb I'd need a hint about where this might happen.
> Regards,
>   -tom
...
> [snip]
> >     xmalloc: out of virtual memory
> 
> [snip]

Hmm. In system.c we have

    case SA_SAVE:
	if(runLast) R_dot_Last();
	if(R_DirtyImage) R_SaveGlobalEnv();
#ifdef HAVE_LIBREADLINE
#ifdef HAVE_READLINE_HISTORY_H
	if(R_Interactive && UsingReadline)
	    stifle_history(R_HistorySize);
	write_history(R_HistoryFile);
#endif
#endif
	break;


This looks wrong to me since write_history is getting called even if
!R_Interactive and !UsingReadline, in which case I don't think there
*is* a history to write and I'd suspect that anything could happen...
Could you try making that

        if(R_Interactive && UsingReadline) {
            stifle_history(R_HistorySize);
            write_history(R_HistoryFile);
	}

 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Mar 20 00:01:45 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 19 Mar 2000 19:01:45 -0500
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: Thomas Lumley's message of "Sat, 18 Mar 2000 11:18:20 -0800 (PST)"
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu>
Message-ID: <871z561pcm.fsf@bavaria.ece.cmu.edu>



Thomas Lumley <thomas@biostat.washington.edu> writes:

[snip]
> It's actually a combination of a number of factors.  On most systems we
> link with the C compiler, which knows what to do with libc automatically.  
> In any case, many linkers can handle the problem as Peter points out.

On AIX you have to build the export file, R.exp, which was the reason
to force the use of ld, I believe.  Also, the libs must be on the
command line for ldAIX to include exported symbols from libc.a in
R.exp (which reduces the size of shared libs).

> On AIX we were using ld rather than CC to link, and ld doesn't move -lc to
> the end, and we were using a hardcoded set of linker options that some
> helpful user had sent in a long time ago (no-one in R-core has very
> convenient access to AIX). It worked fine until we added GNU regex to R.

ok, now I understand why this problem didn't occur until 1.0.  I
glanced at Makeconf.  There is the '-lc' (along with '-lm') in the
DLLFLAGS but also in SHLIBLDFLAGS -- do you plan to export regexec and
friends?  Because the creation of shared libs with an early -lc will
create the same Illegal Instructions...

Thanks,
  -tom


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Mon Mar 20 00:57:23 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Mon, 20 Mar 2000 12:57:23 +1200
Subject: [Rd] followup to graphics bug #414
References: <Pine.LNX.4.10.10002110817290.953-100000@bolker.zoo.ufl.edu> <001301bf7696$9cde2780$175dd882@stat.auckland.ac.nz> <x2bt5k8a52.fsf@blueberry.kubism.ku.dk>
Message-ID: <016201bf9207$40fd6d40$175dd882@stat.auckland.ac.nz>

hi

i have committed a fix for this bug into the development version.

The idea is that, for devices which canClip, R still does some preclipping
to the device
extent.  This stops stupidly large numbers being sent to the device, but
there is a penalty in that two sets of clipping occurs.  Note that this
preclipping occurs in the graphics engine to  avoid the need for per-device
checks.  For more information, see the latex file included below.

paul


---snip---


\documentclass{article}
\title{Changes to Clipping in R}
\author{Paul Murrell}
\begin{document}
\maketitle

All devices have a {\tt canClip} field which indicates whether they
have clipping facilities.  Previously,
if this field was {\tt true} then R used to
delegate all clipping to the device.  R has its own clipping code (in
{\tt graphics.c}) for devices which cannot do the clipping themselves.

Note that R's clipping is inferior to a device's clipping (which is why we
let the device do the clipping if it can).  For example, R's text
clipping completely clips text if the text intersects the boundary of
the clipping region at all (i.e., text is only drawn if it lies wholly
within the clipping region).

\section*{The Problem}

Devices which can clip still have problems with (for example) very large
numbers.  For example, if you try to draw a line which is several feet
off the edge of an X11 window or a Postscript page, the device will fall
over.

\section*{The Solution}

For devices which {\tt canClip}, R does some ``preclipping'' to the device
extent.  This removes the possibility of ridiculously large numbers being
sent to a device.  The device is still responsible for any further clipping.
For devices which cannot clip, R does all of the clipping (as before).

This preclipping occurs at the level of graphical primitives (i.e.,
{\tt GLine}, {\tt GPolyline}, {\tt GPolygon}, {\tt GRect}, {\tt GCircle},
and {\tt GText}).
Only text is a special case.  In general, any part of the graphical
primitive which lies outside of the device extent gets clipped.  This means
that the device only gets sent graphical primitives which lie entirely
within the device extent.  Because R's text clipping is pretty crude,
this policy is a bit of overkill, so
if the device {\tt canClip} and the text intersects the device boundary,
the text is sent unaltered to the device.  It is assumed that, if a
piece of text intersects the boundary of the device then it cannot extend
a ridiculous distance outside of the device (unless it is a VERY long
piece of text, or a VERY large font is being used).

There will be a speed penalty for devices which {\tt canClip} because there
will now be two sets of clipping occurring (R clips to the device, then
the device clips to the current setting of {\tt par("xpd")}).  This may
affect X11 and Windows devices - don't know by how much.

\section*{Addendum}

The Postscript device was not doing any clipping, despite the fact that
Postscript has full clipping capabilities.  This has been changed so that
Postscript devices now {\tt canClip}.  This should improve the text
clipping on Postscript output (which used to use R's crude text clipping).

\end{document}



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Mon Mar 20 11:21:20 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 20 Mar 2000 12:21:20 +0100
Subject: [Rd] windows version
References: <87ln3g97x2.fsf@bavaria.ece.cmu.edu> <x2hfe4czpj.fsf@blueberry.kubism.ku.dk> <38D4E936.EB941D1C@univie.ac.at>
Message-ID: <38D609B0.5F652E67@statistik.uni-dortmund.de>

Erich Neuwirth schrieb:
> 
> for all of you using the windows version:
> i think having a look at the r-winedt
> interface by volker ligges is a good idea.
> it works quite nicely.
> 
> i talked to volker,
> and at the moment,
> there is something which could be improved,
> anmley it would be nice if one could get access to the current
> history buffer.
> 
> is there a way of getting it
> (i.e. exactly what would be saved in .Rhistory if one were to exit right
> now)?
> 
> then one could interactively edit the current session
> in winedt.

I just uploaded a new "version" of R-WinEdt with some improvements /
bugfixes and enhanced ReadMe to CRAN (Erich Neuwirth already has got
it).

The latest release is also available at 
http://www.statistik.uni-dortmund.de/leute/ligges.htm


Thanks for all comments!

Uwe Ligges
^^^  ;-)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Mon Mar 20 21:12:59 2000
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray Brownrigg)
Date: Tue, 21 Mar 2000 09:12:59 +1200 (NZST)
Subject: [Rd] R-1.0.0 on alpha/osf1 memory glitch (PR#490)
Message-ID: <200003202112.JAA07598@aqua.mcs.vuw.ac.nz>

> Hmm. In system.c we have
> 
>     case SA_SAVE:
> 	if(runLast) R_dot_Last();
> 	if(R_DirtyImage) R_SaveGlobalEnv();
> #ifdef HAVE_LIBREADLINE
> #ifdef HAVE_READLINE_HISTORY_H
> 	if(R_Interactive && UsingReadline)
> 	    stifle_history(R_HistorySize);
> 	write_history(R_HistoryFile);
> #endif
> #endif
> 	break;
> 
> Could you try making that
> 
>         if(R_Interactive && UsingReadline) {
>             stifle_history(R_HistorySize);
>             write_history(R_HistoryFile);
> 	}
> 
I can confirm that this change works in my situation.

Thanks,
Ray Brownrigg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Mar 20 22:20:15 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Mon, 20 Mar 2000 17:20:15 -0500 (EST)
Subject: [Rd] followup to graphics bug #414
In-Reply-To: <016201bf9207$40fd6d40$175dd882@stat.auckland.ac.nz>
Message-ID: <Pine.LNX.4.10.10003201645220.8643-100000@bolker.zoo.ufl.edu>


  I haven't been able to compile the development version on my machine yet
(problems with BLAS includes, I don't have time to dig into it right now),
so I'm curious: does this fix also solve the problem recently reported by
Robert Sandefur recently on R-help, where he got different results from
abline() on the X11 and Postscript drivers?  I can replicate his problem
(and perhaps shed some light on it) with the following code--

==========================

tmpf0 <- function(col=1:3,...) {
  p <- matrix(c(3.9,0.2,3.9,0.25,3.9,1.0),byrow=TRUE,ncol=2)
  abline(coef=p[1,],col=col[1],...)
  abline(coef=p[2,],col=col[2],...)
  abline(coef=p[3,],col=col[3],...)
}

tmpf0(3:4)
tmpf0(1:2,p1=c(3.9,0.2),p2=c(3.9,0.25))
tmpf0(1:2,p1=c(3.9,0.2),p2=c(3.9,0.25))

tmpf <- function() {
  plot(1:10,1:10,xlim=c(-3,3),ylim=c(2000,1000000),log="y")
  par(xpd=TRUE)
  tmpf0(lty=1)
  par(xpd=FALSE)
  tmpf0(lty=2)
  par(xpd=NA)
  tmpf0(lty=3)
}

x11()
tmpf()
postscript(file="tmp.ps")
tmpf()
dev.off()
========================

I set this up so that one line (red) would clip at the bottom only, one
line (green) would clip at the bottom and the top, and one line (black)
wouldn't need clipping at all. In R 1.0.0 everything works fine under the
X11 driver but under the Postscript driver, both of the clipped lines are
wrong, but are different depending on how the clipping parameter is set.

  I haven't yet been able to track the source of this down, but I hope
that this information helps if someone gets to it before I do.  If the
recent fix also fixes this bug, that would be very nice.

  Ben Bolker

On Mon, 20 Mar 2000, Paul Murrell wrote:

> hi
> 
> i have committed a fix for this bug into the development version.
> 
> The idea is that, for devices which canClip, R still does some preclipping
> to the device
> extent.  This stops stupidly large numbers being sent to the device, but
> there is a penalty in that two sets of clipping occurs.  Note that this
> preclipping occurs in the graphics engine to  avoid the need for per-device
> checks.  For more information, see the latex file included below.
> 
> paul
> 
> 


-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Mar 20 22:34:49 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Mon, 20 Mar 2000 23:34:49 +0100 (MET)
Subject: [Rd] minor problem in barplot legend (PR#494)
Message-ID: <200003202234.XAA19634@pubhealth.ku.dk>


  If length(col)<length(legend.txt) in barplot, then the reversal of
the legend leads to funny results.  For example:

x <- matrix(runif(25),nrow=5)
barplot(x,col=c("red","green","black"),legend=as.character(1:5),ylim=c(0,5))

The (easy) fix is to replace

       legend.col <- col

with

         legend.col <- rep(col,length=length(legend.text))

on line 94 of barplot.default.

  Trivia, but hey, it confused me for a little while, it might as well
be fixed.

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Mar 20 22:49:50 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 20 Mar 2000 17:49:50 -0500
Subject: [Rd] R-1.0.0 on alpha/osf1 memory glitch (PR#490)
In-Reply-To: Peter Dalgaard BSA's message of "20 Mar 2000 00:49:00 +0100"
References: <200003162225.XAA21838@pubhealth.ku.dk> <87hfe21s67.fsf@bavaria.ece.cmu.edu> <x266ui4j2r.fsf@blueberry.kubism.ku.dk>
Message-ID: <87bt49i7e9.fsf@bavaria.ece.cmu.edu>



Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

[snip]
>         if(R_Interactive && UsingReadline) {
>             stifle_history(R_HistorySize);
>             write_history(R_HistoryFile);
> 	}

That takes care of the xmalloc complaints on an AIX box as well.
(Also, recompiling R with -lc in LIBS instead of DLLFLAGS works for AIX...)

Thanks!
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 20 23:34:29 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Mar 2000 00:34:29 +0100
Subject: [Rd] followup to graphics bug #414
In-Reply-To: Ben Bolker's message of "Mon, 20 Mar 2000 17:20:15 -0500 (EST)"
References: <Pine.LNX.4.10.10003201645220.8643-100000@bolker.zoo.ufl.edu>
Message-ID: <x2k8ixp662.fsf@blueberry.kubism.ku.dk>

Ben Bolker <ben@zoo.ufl.edu> writes:

> I set this up so that one line (red) would clip at the bottom only, one
> line (green) would clip at the bottom and the top, and one line (black)
> wouldn't need clipping at all. In R 1.0.0 everything works fine under the
> X11 driver but under the Postscript driver, both of the clipped lines are
> wrong, but are different depending on how the clipping parameter is set.
> 
>   I haven't yet been able to track the source of this down, but I hope
> that this information helps if someone gets to it before I do.  If the
> recent fix also fixes this bug, that would be very nice.

I suspect it will. The clipping functions are broken with logged axes
on all devices which cannot do their own clipping, and since Paul made
devPS capable of clipping... 

We still need a fix for clipping for 1.0.1. I assume that the new
devPS has been changed too much to qualify as a bugfix (?) and
anyways, it is still a bug for any other device without clipping
capabilities. 

(As you may have gathered, the bug is that clipping is calculated by
linear interpolations on the original scale, which isn't going to
work...) 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Tue Mar 21 00:00:58 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Tue, 21 Mar 2000 12:00:58 +1200
Subject: [Rd] followup to graphics bug #414
References: <Pine.LNX.4.10.10003201645220.8643-100000@bolker.zoo.ufl.edu> <x2k8ixp662.fsf@blueberry.kubism.ku.dk>
Message-ID: <012101bf92c8$89c92ac0$175dd882@stat.auckland.ac.nz>

hi


> > I set this up so that one line (red) would clip at the bottom only, one
> > line (green) would clip at the bottom and the top, and one line (black)
> > wouldn't need clipping at all. In R 1.0.0 everything works fine under
the
> > X11 driver but under the Postscript driver, both of the clipped lines
are
> > wrong, but are different depending on how the clipping parameter is set.
> >
> >   I haven't yet been able to track the source of this down, but I hope
> > that this information helps if someone gets to it before I do.  If the
> > recent fix also fixes this bug, that would be very nice.
>
> I suspect it will. The clipping functions are broken with logged axes
> on all devices which cannot do their own clipping, and since Paul made
> devPS capable of clipping...


or it may have just made it a little more sinister.  devices which can do
their own clipping still use the R clipping to preclip to the device extent.
so if you specify a line which extends outside of the device extent (and you
have log axes) it will be (incorrectly) clipped by R before sending on to
the device.

also, Ross has pointed out that R's polygon clipping probably suffers from
the same problem (has anyone tried drawing polygons with log axes ?).  He
may take a look at this soon because he's mucking about with polygon
clipping for his maps stuff.


> We still need a fix for clipping for 1.0.1. I assume that the new
> devPS has been changed too much to qualify as a bugfix (?) and
> anyways, it is still a bug for any other device without clipping
> capabilities.


devPS has not changed that much, but graphics.c has.

paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 21 00:28:56 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Mar 2000 01:28:56 +0100
Subject: [Rd] followup to graphics bug #414
In-Reply-To: "Paul Murrell"'s message of "Tue, 21 Mar 2000 12:00:58 +1200"
References: <Pine.LNX.4.10.10003201645220.8643-100000@bolker.zoo.ufl.edu> <x2k8ixp662.fsf@blueberry.kubism.ku.dk> <012101bf92c8$89c92ac0$175dd882@stat.auckland.ac.nz>
Message-ID: <x266uhupx3.fsf@blueberry.kubism.ku.dk>

"Paul Murrell" <paul@stat.auckland.ac.nz> writes:

> > I suspect it will. The clipping functions are broken with logged axes
> > on all devices which cannot do their own clipping, and since Paul made
> > devPS capable of clipping...
> 
> 
> or it may have just made it a little more sinister.  devices which can do
> their own clipping still use the R clipping to preclip to the device extent.
> so if you specify a line which extends outside of the device extent (and you
> have log axes) it will be (incorrectly) clipped by R before sending on to
> the device.

Hmmno.. (well maybe now in the development version.) In R-release, we have

    if (dd->dp.canClip) {
        GClip(dd);
        dd->dp.polyline(n, x, y, coords, dd);
    }
    else
        CScliplines(n, x, y, coords, dd);

and CScliplines has the problem. GClip just sets the clip boundary for
the device.

> also, Ross has pointed out that R's polygon clipping probably suffers from
> the same problem (has anyone tried drawing polygons with log axes ?).  He
> may take a look at this soon because he's mucking about with polygon
> clipping for his maps stuff.

Yes. Same problem. Silly thing is that the only (simple) way to fix it
seems to be to take logs, do the clipping, take antilogs, and then
have the device function take logs once again...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Tue Mar 21 04:11:00 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Tue, 21 Mar 2000 16:11:00 +1200
Subject: [Rd] followup to graphics bug #414
References: <Pine.LNX.4.10.10003201645220.8643-100000@bolker.zoo.ufl.edu> <x2k8ixp662.fsf@blueberry.kubism.ku.dk> <012101bf92c8$89c92ac0$175dd882@stat.auckland.ac.nz> <x266uhupx3.fsf@blueberry.kubism.ku.dk>
Message-ID: <015f01bf92eb$7c17af00$175dd882@stat.auckland.ac.nz>

hi


> > > I suspect it will. The clipping functions are broken with logged axes
> > > on all devices which cannot do their own clipping, and since Paul made
> > > devPS capable of clipping...
> >
> >
> > or it may have just made it a little more sinister.  devices which can
do
> > their own clipping still use the R clipping to preclip to the device
extent.
> > so if you specify a line which extends outside of the device extent (and
you
> > have log axes) it will be (incorrectly) clipped by R before sending on
to
> > the device.
>
> Hmmno.. (well maybe now in the development version.) In R-release, we have
>
>     if (dd->dp.canClip) {
>         GClip(dd);
>         dd->dp.polyline(n, x, y, coords, dd);
>     }
>     else
>         CScliplines(n, x, y, coords, dd);
>
> and CScliplines has the problem. GClip just sets the clip boundary for
> the device.


yes, but in R-release postscript can't clip right ?  if, in r-release we
just changed devPS so that it would clip, then r-release would be ok.
r-devel is broken though because the above code segment has changed.

paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Tue Mar 21 06:15:08 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue, 21 Mar 2000 07:15:08 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200003210615.HAA13190@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 471 *
Subject:  Problems with nlme 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 7 Mar 2000 15:28:00 +0800
--Problem 1) was a subscripting bug introduced in 1.0.0 and fixed for 1.0.1
--Problem 2) (mssing datasets) needs a revised nlme

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 400 *
Subject: X11 troubles
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Jan 2000 14:31:42 +0100
--a) We don't handle multiple window closes well
--b) X11 errors should be caught by an error handler, not kill R
* PR# 414 *
Subject:  graphics bugs: steep slopes and large values beyond ylim 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 7 Feb 2000 18:28:04 -0500
--Followup on R-devel showed this was due to generating integer coordinates 
--outside +/- 2^15 in the X11 driver.

Directory:  In-Out

none

Directory:  Installation

* PR# 478 *
Subject: Conditional for XDR code left out in saveload.c
From: hoffmann@ehmgs2.et.tu-dresden.de
Date: Thu, 9 Mar 2000 09:43:01 +0100 (MET)
--This seems to be a harmless warning, not an error.

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100

Directory:  Low-level

* PR# 391 *
Subject: Segfault in dataentry()
From: Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk>
Date: 29 Dec 1999 11:59:50 +0100
--dataentry(0,0) segfaults

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 463 *
Subject: Bug in read.table
From: "E. S. Venkatraman" <venkat@biosta.mskcc.org>
Date: Tue, 29 Feb 2000 17:47:54 -0500 (EST)
* PR# 465 *
Subject: "is.qr" definition
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Wed, 1 Mar 2000 11:12:37 +0000 (GMT)
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
* PR# 474 *
Subject: update fails after specific sequence of steps
From: John Fox <jfox@mcmaster.ca>
Date: Tue, 07 Mar 2000 09:06:21 -0500
* PR# 475 *
Subject: Error compiling R on RS6000
From: pgutwin@us.ibm.com
Date: Tue, 7 Mar 2000 16:35:59 +0100 (MET)
* PR# 477 *
Subject: Printing graphs on W98 laptop
From: P.J.Green@bristol.ac.uk
Date: Wed, 8 Mar 2000 18:23:33 +0100 (MET)
* PR# 480 *
Subject: problem with plot(...., xlim=c(5,0))
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 12 Mar 2000 20:19:16 -0500 (EST)
* PR# 481 *
Subject: check does not accept --vsize option
From: neteler@geog.uni-hannover.de
Date: Mon, 13 Mar 2000 19:04:50 +0100 (MET)
* PR# 482 *
Subject: plot(1:10,c(1)$nothing)  yields index plot
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 13 Mar 2000 11:13:18 -0800
* PR# 483 *
Subject: error in par option xaxt
From: aim@uwo.ca
Date: Mon, 13 Mar 2000 22:02:42 +0100 (MET)
* PR# 484 *
Subject: error in par option xaxt
From: aim@uwo.ca
Date: Mon, 13 Mar 2000 22:03:00 +0100 (MET)
* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
* PR# 487 *
Subject: Bug in sub?
From: "Trenkler, Dietrich" <dtrenkler@nts6.oec.uni-osnabrueck.de>
Date: Tue, 14 Mar 2000 12:15:54 +0100
* PR# 488 *
Subject: Error in lme?
From: simon.frost@ed.ac.uk
Date: Tue, 14 Mar 2000 14:15:52 +0100 (MET)
* PR# 489 *
Subject: r-base_1.0.0-1_i386.deb install problem
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Thu, 16 Mar 2000 04:02:26 +0000 (GMT)
* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
* PR# 491 *
Subject: lag
From: kthaka@uta.fi
Date: Fri, 17 Mar 2000 10:16:09 +0100 (MET)
* PR# 492 *
Subject: the R bug
From: "Robertas Geistoraitis" <robertasg@takas.lt>
Date: Fri, 17 Mar 2000 17:17:23 +0100
* PR# 493 *
Subject: optim: problem with additional arguments
From: "Dirk F. Moore" <dirk@surfer.sbm.temple.edu>
Date: Fri, 17 Mar 2000 12:05:32 -0500
* PR# 494 *
Subject:  minor problem in barplot legend 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 20 Mar 2000 17:31:36 -0500
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From skala@incoma.cz  Tue Mar 21 08:20:35 2000
From: skala@incoma.cz (skala@incoma.cz)
Date: Tue, 21 Mar 2000 09:20:35 +0100 (MET)
Subject: [Rd] barplot (PR#495)
Message-ID: <200003210820.JAA22364@pubhealth.ku.dk>

Full_Name: Zdenek Skala
Version: 1.0.0
OS: MS Windows 95
Submission from: (NULL) (194.108.127.14)


Dear all,
a problem with barplot() was already discussed on R-help for R 0.90.0 - sorry,
if this is a known bug, but I was unable to find it in the bugs database.
In:
> barplot(c(.1,.5,1), ylim=(0:1))
or
> barplot(c(.1,.5,1), ylim=c(0,1))
the y axis is drawn from 0.2 to 0.8, in:
> barplot(c(.1,.5,1))
the y axis is drawn from 0.0 to 0.8.
As I was notified earlier by Peter Dalgaard, "the axis settings use yaxs='i' 
(or xaxs if horizontal) which sets the plot boundaries equal to the ylim 
(stated or computed) and marks the axes "internally". The endpoints of the 
axes are not considered to be internal."
Sorry again if this is already reported.
With regards
Zdenek Skala

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 21 08:56:30 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Mar 2000 09:56:30 +0100
Subject: [Rd] barplot (PR#495)
In-Reply-To: skala@incoma.cz's message of "Tue, 21 Mar 2000 09:20:35 +0100 (MET)"
References: <200003210820.JAA22364@pubhealth.ku.dk>
Message-ID: <x2aejs66rl.fsf@blueberry.kubism.ku.dk>

skala@incoma.cz writes:

> > barplot(c(.1,.5,1), ylim=c(0,1))
> the y axis is drawn from 0.2 to 0.8, in:

> As I was notified earlier by Peter Dalgaard, "the axis settings use yaxs='i' 
> (or xaxs if horizontal) which sets the plot boundaries equal to the ylim 
> (stated or computed) and marks the axes "internally". The endpoints of the 
> axes are not considered to be internal."
> Sorry again if this is already reported.

I actually thought we had that one fixed, but obviously not ...
As usual, the workaround is to extend the ylim a tiny bit:

barplot(c(.1,.5,1), ylim=c(-.001,1.001))

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Tue Mar 21 13:57:59 2000
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Tue, 21 Mar 2000 14:57:59 +0100 (MET)
Subject: [Rd] par help wrong: xlog & ylog (PR#497)
Message-ID: <200003211357.OAA29225@pubhealth.ku.dk>

Full_Name: 
Version: 1.0.0
OS: linux
Submission from: (NULL) (193.62.250.209)


    

?par lists and describes xlog and ylog, though these are obsolete. It does not
list
log. I found out about log from ?plot.defaults--so that help is OK.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Tue Mar 21 14:11:06 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Tue, 21 Mar 2000 15:11:06 +0100 (CET)
Subject: [Rd] is.null(list()) is FALSE ?
In-Reply-To: <200003211357.OAA29225@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0003211507220.16848-100000@boromir.ci.tuwien.ac.at>


On R-1.0.0, debian GNU/Linux, 

R> is.null(list())
FALSE

conflicts with the help for ?is.null:

Examples:

     is.null(list())    # TRUE (not so in S)
     is.null(integer(0))# F
     is.null(logical(0))# F
     as.null(list(a=1,b='c'))

and, I would like is.null(list()) to be TRUE :-)

Torsten

*****************************************************************
*								*
* Torsten Hothorn, Statistician					*
* at the moment: Institut fuer Statistik, TU Wien		*
* Tel: 0043 1 58801 10772					*
* Fax: 0043 1 58801 10798					*
*								*
*****************************************************************



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 21 14:18:04 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Mar 2000 15:18:04 +0100
Subject: [Rd] par help wrong: xlog & ylog (PR#497)
In-Reply-To: wsi@gcal.ac.uk's message of "Tue, 21 Mar 2000 14:57:59 +0100 (MET)"
References: <200003211357.OAA29225@pubhealth.ku.dk>
Message-ID: <x266ugs8yr.fsf@blueberry.kubism.ku.dk>

wsi@gcal.ac.uk writes:

> Full_Name: 
> Version: 1.0.0
> OS: linux
> Submission from: (NULL) (193.62.250.209)
> 
> 
>     
> 
> ?par lists and describes xlog and ylog, though these are obsolete. It does not
> list
> log. I found out about log from ?plot.defaults--so that help is OK.

Not a bug, not obsolete, and works as documented:

> plot(1,log="y")
> par("ylog")    
[1] TRUE


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Tue Mar 21 15:27:25 2000
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Tue, 21 Mar 2000 15:27:25 +0000 (GMT)
Subject: [Rd] par help wrong: xlog & ylog (PR#497)
In-Reply-To: <200003211357.OAA29225@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.10003211522090.9897-100000@localhost.localdomain>


> Full_Name: 
> Version: 1.0.0
> OS: linux
> Submission from: (NULL) (193.62.250.209)
> 
> ?par lists and describes xlog and ylog, though these are obsolete. It does not
> list
> log. I found out about log from ?plot.defaults--so that help is OK.
Reading through ?par again, I see that xlog and ylog are "read only". (I
initially thought xlog and ylog were obsolete because I could set them) I
don't find the help to be very clear:

ylog: R.O..  A logical value (see `log' in `plot.default').  See
          `xlog' above.

Instead of (see `log' in `plot.default'), why not have log listed here in
the par help? Or is it an argument to plot()? In which case, why not list
it in the help for plot()? I find it hard to find info for plots because
this info seems to be spread out in several places

Bill


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Tue Mar 21 15:30:31 2000
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Tue, 21 Mar 2000 15:30:31 +0000 (GMT)
Subject: [Rd] par help wrong: xlog & ylog (PR#497)
In-Reply-To: <x266ugs8yr.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10003211528091.9897-100000@localhost.localdomain>



On 21 Mar 2000, Peter Dalgaard BSA wrote:

> wsi@gcal.ac.uk writes:
> 
> > Full_Name: 
> > Version: 1.0.0
> > OS: linux
> > Submission from: (NULL) (193.62.250.209)
> > 
> > 
> >     
> > 
> > ?par lists and describes xlog and ylog, though these are obsolete. It does not
> > list
> > log. I found out about log from ?plot.defaults--so that help is OK.
> 
> Not a bug, not obsolete, and works as documented:
True. True. Not documented in plot help. It is documented in plot.default.
Why not in par, where xlog and ylog are? I find it confusing.

> 
> > plot(1,log="y")
> > par("ylog")    
> [1] TRUE

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Mar 21 16:05:42 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 21 Mar 2000 17:05:42 +0100 (MET)
Subject: [Rd] par help wrong: xlog & ylog (PR#497)
Message-ID: <200003211605.RAA00840@pubhealth.ku.dk>


>>>>> "Bill" == Bill Simpson <wsi@gcal.ac.uk> writes:

    Bill> On 21 Mar 2000, Peter Dalgaard BSA wrote:

    >> wsi@gcal.ac.uk writes:
    >> 
    >> > Full_Name: 
    >> > Version: 1.0.0
    >> > OS: linux
    >> > Submission from: (NULL) (193.62.250.209)
    >> > 
    >> > 
    >> >     
    >> > 
    >> > ?par lists and describes xlog and ylog, though these are
    >> > obsolete. It does not list log. I found out about log from
    >> > ?plot.defaults--so that help is OK.
    >> 
    >> Not a bug, not obsolete, and works as documented:
    Bill> True. True. Not documented in plot help. It is documented in plot.default.
    Bill> Why not in par, where xlog and ylog are? I find it confusing.

    >> 
    >> > plot(1,log="y")
    >> > par("ylog")    
    >> [1] TRUE

log is *not* a valid  par(.) argument, what makes you think it should be
documented there ?

  > par(log = "x")
  Warning message: 
  parameter "log" can't be set in: par(args) 


It *is* a valid argument to most(?) plot methods;
plot is the generic function, and the idea is that it only documents what
*ALL* plot methods have in common.  This is the reason that "log = .." is
documented with the default  plot method, plot.default.

You might have a point:  We could (should we?) consider requiring a 
"log =" argument for *ALL* plot methods, and then have it 
documented and possibly even among the listed arguements (the "non ..." ones)
of the generic  plot.

Opinions?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Mar 21 16:33:51 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 21 Mar 2000 08:33:51 -0800 (PST)
Subject: [Rd] par help wrong: xlog & ylog (PR#497)
In-Reply-To: <200003211605.RAA00840@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0003210829030.14323-100000@mail.biostat.washington.edu>

On Tue, 21 Mar 2000 maechler@stat.math.ethz.ch wrote:

> You might have a point:  We could (should we?) consider requiring a 
> "log =" argument for *ALL* plot methods, and then have it 
> documented and possibly even among the listed arguements (the "non ..." ones)
> of the generic  plot.
> 
> Opinions?
> 

Aaagh! No!  What about plots that intrinsically contain zero x or y
values, such as mortality plots (ie upside-down survival plots) or
Receiver Operating Characteristic curves?

Going further, some plot methods have a ... option but don't pass it to
plot. If the method uses plot to set up axes and then calls points() or
lines() to handle the actual drawing it may make sense to pass ... to
points() or lines().  These functions don't understand log=, so it would
be necessary to have an explicit log= option for the method, even if it
was completely inappropriate.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Mar 21 16:40:14 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 21 Mar 2000 08:40:14 -0800 (PST)
Subject: [Rd] is.null(list()) is FALSE ?
In-Reply-To: <Pine.LNX.4.21.0003211507220.16848-100000@boromir.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.21.0003210834560.14323-100000@mail.biostat.washington.edu>

On Tue, 21 Mar 2000, Torsten Hothorn wrote:

> 
> On R-1.0.0, debian GNU/Linux, 
> 
> R> is.null(list())
> FALSE
> 
> conflicts with the help for ?is.null:
> 
> Examples:
> 
>      is.null(list())    # TRUE (not so in S)
>      is.null(integer(0))# F
>      is.null(logical(0))# F
>      as.null(list(a=1,b='c'))
> 
> and, I would like is.null(list()) to be TRUE :-)

My guess is that this dates from old-style pairlists, where list() could
easily be NULL. Now a list is internally a vector, so list() is a vector
of length zero and so is stored as a VECTOR node.

Also, a difficulty with storing list() as NULL is that you can't set
attributes on NULL:
R> a<-NULL
R> attr(a,"foo")<-"bar"
Error: attempt to set an attribute on NULL
R> a<-list()
R> attr(a,"foo")<-"bar"
R> a
list()
attr(,"foo")
[1] "bar"


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Mar 21 16:57:55 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 21 Mar 2000 17:57:55 +0100 (MET)
Subject: [Rd] is.null(list()) is FALSE ?
In-Reply-To: <Pine.GSO.4.21.0003210834560.14323-100000@mail.biostat.washington.edu>
References: <Pine.LNX.4.21.0003211507220.16848-100000@boromir.ci.tuwien.ac.at>
 <Pine.GSO.4.21.0003210834560.14323-100000@mail.biostat.washington.edu>
Message-ID: <14551.43539.660392.388561@lynne.ethz.ch>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> On Tue, 21 Mar 2000, Torsten Hothorn wrote:
    >> 
    >> On R-1.0.0, debian GNU/Linux, 
    >> 
    R> is.null(list())
    >> FALSE
    >> 
    >> conflicts with the help for ?is.null:
    >> 
    >> Examples:
    >> 
    >> is.null(list())    # TRUE (not so in S)
    >> is.null(integer(0))# F
    >> is.null(logical(0))# F
    >> as.null(list(a=1,b='c'))
    >> 
    >> and, I would like is.null(list()) to be TRUE :-)

    TL> My guess is that this dates from old-style pairlists, where list() could
    TL> easily be NULL.
well guessed!
    TL> Now a list is internally a vector, so list() is a vector
    TL> of length zero and so is stored as a VECTOR node.

and we had decision quite a while ago that  is.null(list()) should give
FALSE {and this is S compatible}.

I've already committed fix for  the wrong comment above :

  cvs diff -r 1.3 src/library/base/man/NULL.Rd

  ...

  diff -r1.3 -r1.3.22.1
  24c24
  < is.null(list())    # TRUE (not so in S)
  ---
  > is.null(list())    # FALSE (on purpose!)


    TL> Also, a difficulty with storing list() as NULL is that you can't set
    TL> attributes on NULL:
    R> a<-NULL
    R> attr(a,"foo")<-"bar"
    TL> Error: attempt to set an attribute on NULL
    R> a<-list()
    R> attr(a,"foo")<-"bar"
    R> a
    TL> list()
    TL> attr(,"foo")
    TL> [1] "bar"

    TL> -thomas

    TL> Thomas Lumley
    TL> Assistant Professor, Biostatistics
    TL> University of Washington, Seattle

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Tue Mar 21 22:15:12 2000
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Tue, 21 Mar 2000 23:15:12 +0100 (MET)
Subject: [Rd] Use of Rd2txt on .Rd files from rw-1.0.0 (PR#498)
Message-ID: <200003212215.XAA03296@pubhealth.ku.dk>

>From e980153 Tue Mar 21 18:50:55 2000
To: bates@stat.wisc.edu
Subject: Use of Rd2txt on .Rd files from rw-1.0.0

Files generated using prompt.data.frame() under rw-1.0.0 get
scrambled (mildly) when I process them under Rd2txt on Solaris,
(using R-devel 1.1.0).
Files generated under R-devel 1.1 on Solaris are processed ok.

The .Rd files from the two sources look identical. The problem 
is likely to be with Rd2txt, I guess.

Here is an example.  I give only the first part of the output,
where the problem occurs.
=========================================================
Kiwifruit data

Description:

 Kiwifruitkiwishade' data frame has 48 rows and 3 columns.
     shading trial

Format:

     This data frame contains the following columns:

      yield a numeric vector

 `west'  ck a factor with levels

 `Feb2May'  a factor with levels
            `none' 

Details:

............
=========================================================

Here is what I expected to get, and do get when the .Rd file
is generated under Solaris:

=========================================================
Kiwifruit data

Description:

     The `kiwishade' data frame has 48 rows and 3 columns. Kiwifruit
     shading trial

Format:

     This data frame contains the following columns:

      yield a numeric vector

      block a factor with levels `east'  `north'  `west' 

      shade a factor with levels `Aug2Dec'  `Dec2Feb'  `Feb2May' 
            `none'
............
=========================================================

Here is the .Rd file, from the PC, then editing using emacs
under Solaris.  However the same scrambling occurs when the
files is processed without editing.
=========================================================
\name{kiwishade}
\alias{kiwishade}
\non_function{}
\title{Kiwifruit data}
\description{
The \code{kiwishade} data frame has 48 rows and 3 columns.
Kiwifruit shading trial
}
\format{
This data frame contains the following columns:
\describe{
\item{yield}{
a numeric vector
}
\item{block}{
a factor with levels
\code{east} 
\code{north} 
\code{west} 
}
\item{shade}{
a factor with levels
\code{Aug2Dec} 
\code{Dec2Feb} 
\code{Feb2May} 
\code{none} 
}
}
}
\details{

}
\source{
Snelgar at al.
}
\examples{
data(kiwishade)
}
\keyword{datasets}
=========================================================

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jgm@qed.econ.queensu.ca  Wed Mar 22 04:40:08 2000
From: jgm@qed.econ.queensu.ca (jgm@qed.econ.queensu.ca)
Date: Wed, 22 Mar 2000 05:40:08 +0100 (MET)
Subject: [Rd] help system does not work (PR#499)
Message-ID: <200003220440.FAA04346@pubhealth.ku.dk>

Full_Name: James MacKinnon
Version: Version 1.0.0
OS: Debian 2.1
Submission from: (NULL) (24.141.113.138)


I am a novice at R, so I am not totally sure that this is a bug, but I think it
must
be. When I type help.start() or ?help, Netscape starts up, as it should, but it
displays my normal home page, not any help for R. The relevant documents exist
in
/usr/lib/R/doc/html, but Netscape does not seem to know about them when it is
started
from within R. I cannot figure out how to tell Netscape about them.

I simply installed the Debian package from one of the R websites. The file I
used
is r-base_1.0.0-1_i386.deb.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Mar 22 10:40:47 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 22 Mar 2000 11:40:47 +0100 (MET)
Subject: [Rd] minor problem in barplot legend (PR#494)
Message-ID: <200003221040.LAA07976@pubhealth.ku.dk>

>>>>> "Ben" == Ben Bolker <bolker@zoo.ufl.edu> writes:

    Ben> If length(col)<length(legend.txt) in barplot, then the reversal of
    Ben> the legend leads to funny results.  For example:

    Ben> x <- matrix(runif(25),nrow=5)
    Ben> barplot(x,col=c("red","green","black"),legend=as.character(1:5),ylim=c(0,5))

    Ben> The (easy) fix is to replace

    Ben>     legend.col <- col

    Ben> with

    Ben>	legend.col <- rep(col,length=length(legend.text))

    Ben> on line 94 of barplot.default.

    Ben> Trivia, but hey, it confused me for a little while, it might as well
    Ben> be fixed.

Now done for "R-release", i.e. the (unreleased) future R 1.0.1

Thank you, Ben!
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Mar 22 15:02:15 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 22 Mar 2000 16:02:15 +0100 (CET)
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: <871z561pcm.fsf@bavaria.ece.cmu.edu>
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu>
 <871z561pcm.fsf@bavaria.ece.cmu.edu>
Message-ID: <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at>

>>>>> Thomas J Vogels writes:

> Thomas Lumley <thomas@biostat.washington.edu> writes:

> [snip]
>> It's actually a combination of a number of factors.  On most systems we
>> link with the C compiler, which knows what to do with libc automatically.  
>> In any case, many linkers can handle the problem as Peter points out.

> On AIX you have to build the export file, R.exp, which was the reason
> to force the use of ld, I believe.  Also, the libs must be on the
> command line for ldAIX to include exported symbols from libc.a in
> R.exp (which reduces the size of shared libs).

>> On AIX we were using ld rather than CC to link, and ld doesn't move -lc to
>> the end, and we were using a hardcoded set of linker options that some
>> helpful user had sent in a long time ago (no-one in R-core has very
>> convenient access to AIX). It worked fine until we added GNU regex to R.

> ok, now I understand why this problem didn't occur until 1.0.  I
> glanced at Makeconf.  There is the '-lc' (along with '-lm') in the
> DLLFLAGS but also in SHLIBLDFLAGS -- do you plan to export regexec and
> friends?  Because the creation of shared libs with an early -lc will
> create the same Illegal Instructions...

Can you have a look at the current r-devel snapshot?  The way I think my
code works is by adding to R_XTRA_LIBS, which should only be used when
linking the main binary, but not when creating shared libraries.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Mar 22 15:12:46 2000
From: bates@stat.wisc.edu (bates@stat.wisc.edu)
Date: Wed, 22 Mar 2000 16:12:46 +0100 (MET)
Subject: [Rd] help system does not work (PR#499)
Message-ID: <200003221512.QAA12449@pubhealth.ku.dk>

jgm@qed.econ.queensu.ca writes:

> Full_Name: James MacKinnon
> Version: Version 1.0.0
> OS: Debian 2.1
> Submission from: (NULL) (24.141.113.138)
> 
> 
> I am a novice at R, so I am not totally sure that this is a bug, but
> I think it must be. When I type help.start() or ?help, Netscape
> starts up, as it should, but it displays my normal home page, not
> any help for R. The relevant documents exist in /usr/lib/R/doc/html,
> but Netscape does not seem to know about them when it is started
> from within R. I cannot figure out how to tell Netscape about them.
> 
> I simply installed the Debian package from one of the R
> websites. The file I used is r-base_1.0.0-1_i386.deb.

Hello James,

When you use help.start it is supposed to create and populate a
directory ~/.R.  Within there there should be an html directory and
links to several of the html files in /usr/lib/R/doc/html.

Could you check that this directory exists?  My version (under Debian
2.2 and using an experimental r-base_1.0.1-0) looks like

  /u9/bates/.R/doc/html:
  total 19
  drwxrwxr-x    3 bates    bates        1024 Mar 22 09:05 .
  drwxrwxr-x    3 bates    bates        1024 Mar 22 09:05 ..
  lrwxrwxrwx    1 bates    bates          25 Mar 22 09:05 R.css -> /usr/lib/R/doc/html/R.css
  lrwxrwxrwx    1 bates    bates          30 Mar 22 09:05 about.html -> /usr/lib/R/doc/html/about.html
  lrwxrwxrwx    1 bates    bates          28 Mar 22 09:05 faq.html -> /usr/lib/R/doc/html/faq.html
  lrwxrwxrwx    1 bates    bates          33 Mar 22 09:05 function.html -> /usr/lib/R/doc/html/function.html
  lrwxrwxrwx    1 bates    bates          30 Mar 22 09:05 index.html -> /usr/lib/R/doc/html/index.html
  lrwxrwxrwx    1 bates    bates          28 Mar 22 09:05 left.jpg -> /usr/lib/R/doc/html/left.jpg
  lrwxrwxrwx    1 bates    bates          28 Mar 22 09:05 logo.jpg -> /usr/lib/R/doc/html/logo.jpg
  lrwxrwxrwx    1 bates    bates          30 Mar 22 09:05 logosm.jpg -> /usr/lib/R/doc/html/logosm.jpg
  lrwxrwxrwx    1 bates    bates          38 Mar 22 09:05 packages-foot.html -> /usr/lib/R/doc/html/packages-foot.html
  lrwxrwxrwx    1 bates    bates          38 Mar 22 09:05 packages-head.html -> /usr/lib/R/doc/html/packages-head.html
  -rw-r--r--    1 bates    bates       14580 Mar 22 09:05 packages.html
  lrwxrwxrwx    1 bates    bates          33 Mar 22 09:05 resource.html -> /usr/lib/R/doc/html/resource.html
  lrwxrwxrwx    1 bates    bates          29 Mar 22 09:05 right.jpg -> /usr/lib/R/doc/html/right.jpg
  drwxrwxr-x    2 bates    bates        1024 Mar 22 09:05 search
  lrwxrwxrwx    1 bates    bates          33 Mar 22 09:05 template.html -> /usr/lib/R/doc/html/template.html
  lrwxrwxrwx    1 bates    bates          31 Mar 22 09:05 thanks.html -> /usr/lib/R/doc/html/thanks.html
  lrwxrwxrwx    1 bates    bates          26 Mar 22 09:05 up.jpg -> /usr/lib/R/doc/html/up.jpg

BTW, my daughter, who is a student at Queen's, tells me that you are
having wonderful weather right now.  She was down to the lakefront to
do some reading yesterday.

--
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jgm@qed.econ.queensu.ca  Wed Mar 22 16:27:38 2000
From: jgm@qed.econ.queensu.ca (jgm@qed.econ.queensu.ca)
Date: Wed, 22 Mar 2000 17:27:38 +0100 (MET)
Subject: [Rd] help system does not work (PR#499)
Message-ID: <200003221627.RAA13198@pubhealth.ku.dk>

Thanks for the very speedy response.

I just tried again, but this time on my office machine, and I am extremely
embarrassed to report that everything seems to work fine! The only problem
is that the headings under "Data Analysis with R" are not actually links,
but no doubt that is because they are not (yet) supposed to be. 

It seems to be only on my home machine, where I was trying to experiment
with R last night, that there is a problem. I think the problem must have
something to do with the way in which netscape is installed on the two
machines. "which netscape" yields different results on the two of them.

I am pretty sure I can solve the problem now. I presume that R is passing
a command like "netscape URL" to the operating system, and I am pretty
sure that "URL" is not getting through on my home machine because it is
finding a script instead of the real executable. I think I just need to
change the script to pass its arguments to netscape. Unfortunately, I
cannot check the fix while I am at the office.

Incidentally, is there some way I can change the command that R is
issuing? That way, I could point it directly to a particular executable (I
have several netscapes).  Also, I would like to experiment with having it
fire up lynx in an xterm rather than netscape, if that is possible.

On 22 Mar 2000, Douglas Bates wrote:

> When you use help.start it is supposed to create and populate a
> directory ~/.R.  Within there there should be an html directory and
> links to several of the html files in /usr/lib/R/doc/html.

Yes, these directories are present on both machines, and the contents seem
to be fine. I think R itself is working fine.
 
> BTW, my daughter, who is a student at Queen's, tells me that you are
> having wonderful weather right now.  She was down to the lakefront to
> do some reading yesterday.

Incredible weather, actually. It is bright and sunny and warm enough that
a jacket really isn't needed.

I am very sorry to have bothered you. Should I do something to close the
bug report?

Cheers, James.

James G. MacKinnon                       Department of Economics
    phone: 613 533-2293                  Queen's University
      Fax: 613 533-2257                  Kingston, Ontario, Canada
    Email: jgm@qed.econ.queensu.ca       K7L 3N6



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Mar 22 16:43:09 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 22 Mar 2000 08:43:09 -0800 (PST)
Subject: [Rd] help system does not work (PR#499)
In-Reply-To: <200003221627.RAA13198@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0003220832480.28978-100000@mail.biostat.washington.edu>

On Wed, 22 Mar 2000 jgm@qed.econ.queensu.ca wrote:
> 
> Incidentally, is there some way I can change the command that R is
> issuing? That way, I could point it directly to a particular executable (I
> have several netscapes).  Also, I would like to experiment with having it
> fire up lynx in an xterm rather than netscape, if that is possible.

options(browser="browser")

However, to start in a xterm you need to be a bit clever. The browser is
invoked as
 
browser URL &

and you will probably need a script to set up lynx in a xterm in such a
way that it opens the file and stays open. The first four things I tried
didn't work.


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 22 17:17:00 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Mar 2000 18:17:00 +0100
Subject: [Rd] help system does not work (PR#499)
In-Reply-To: Thomas Lumley's message of "Wed, 22 Mar 2000 08:43:09 -0800 (PST)"
References: <Pine.GSO.4.21.0003220832480.28978-100000@mail.biostat.washington.edu>
Message-ID: <x2wvmux6ur.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:


> However, to start in a xterm you need to be a bit clever. The browser is
> invoked as
>  
> browser URL &
> 
> and you will probably need a script to set up lynx in a xterm in such a
> way that it opens the file and stays open. The first four things I tried
> didn't work.

Actually, the real problem is that it is getting passed

 -remote openURL(file:/long/and/winded/path/ls.html)

so you'd need to feed it to something (perl?) to extract the actual
URL. Then just use "xterm -e lynx $URL".
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Mar 22 18:25:41 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Wed, 22 Mar 2000 19:25:41 +0100 (MET)
Subject: [Rd] segmentation fault with 1D array (PR#500)
Message-ID: <200003221825.TAA14306@pubhealth.ku.dk>

Here's a nasty one.  The following has caused a segmentation
fault and possibly also a bus error.

fred <- 1:6
dim(fred) <- 6
dimnames(fred) <- list(LETTERS[1:6])
mm <- matrix(1:12, 2, 6)

mm %*% fred # segmentation fault here

In the case without the dimnames assignment the result is OK.

Cheers, Jonathan.


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Patched
 major = 0
 minor = 99.0
 year = 2000
 month = February
 day = 9
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Mar 22 18:43:27 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 22 Mar 2000 13:43:27 -0500 (EST)
Subject: [Rd] segmentation fault with 1D array (PR#500)
In-Reply-To: <200003221825.TAA14306@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.10003221342370.10699-100000@bolker.zoo.ufl.edu>

On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:

> Here's a nasty one.  The following has caused a segmentation
> fault and possibly also a bus error.
> 
> fred <- 1:6
> dim(fred) <- 6
> dimnames(fred) <- list(LETTERS[1:6])
> mm <- matrix(1:12, 2, 6)
> 
> mm %*% fred # segmentation fault here
> 
> In the case without the dimnames assignment the result is OK.

  Here (1.0.0 on RH 6.0) I get

Error: invalid type for dimname (must be a vector)

instead of a segmentation fault.

> 
> --please do not edit the information below--
> 
> Version:
>  platform = sparc-sun-solaris2.7
>  arch = sparc
>  os = solaris2.7
>  system = sparc, solaris2.7
>  status = Patched
>  major = 0
>  minor = 99.0
>  year = 2000
>  month = February
>  day = 9
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 22 18:59:23 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Mar 2000 19:59:23 +0100
Subject: [Rd] segmentation fault with 1D array (PR#500)
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Wed, 22 Mar 2000 19:25:41 +0100 (MET)"
References: <200003221825.TAA14306@pubhealth.ku.dk>
Message-ID: <x2zorqkf04.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> Here's a nasty one.  The following has caused a segmentation
> fault and possibly also a bus error.
> 
> fred <- 1:6
> dim(fred) <- 6
> dimnames(fred) <- list(LETTERS[1:6])
> mm <- matrix(1:12, 2, 6)
> 
> mm %*% fred # segmentation fault here
> 
> In the case without the dimnames assignment the result is OK.

Still present... Some pretty odd things appear to be going on there.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 22 19:06:57 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Mar 2000 20:06:57 +0100
Subject: [Rd] segmentation fault with 1D array (PR#500)
In-Reply-To: Ben Bolker's message of "Wed, 22 Mar 2000 13:43:27 -0500 (EST)"
References: <Pine.LNX.4.10.10003221342370.10699-100000@bolker.zoo.ufl.edu>
Message-ID: <x2wvmukeni.fsf@blueberry.kubism.ku.dk>

Ben Bolker <ben@zoo.ufl.edu> writes:

> On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:
> 
> > Here's a nasty one.  The following has caused a segmentation
> > fault and possibly also a bus error.
> > 
> > fred <- 1:6
> > dim(fred) <- 6
> > dimnames(fred) <- list(LETTERS[1:6])
> > mm <- matrix(1:12, 2, 6)
> > 
> > mm %*% fred # segmentation fault here
> > 
> > In the case without the dimnames assignment the result is OK.
> 
>   Here (1.0.0 on RH 6.0) I get
> 
> Error: invalid type for dimname (must be a vector)
> 
> instead of a segmentation fault.

Hm? 1.0.0 on RH 6.1 gives the segfault for me as does later patch
versions...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Mar 22 19:10:55 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 22 Mar 2000 14:10:55 -0500 (EST)
Subject: [Rd] segmentation fault with 1D array (PR#500)
In-Reply-To: <x2wvmukeni.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10003221408110.10733-100000@bolker.zoo.ufl.edu>


  Weird.  It does crash if I run it in a new session.  I tried the
commands out in a session that I'd already done a whole lot in, so maybe
it's just corrupting some little piece of my (large) environment rather
than segfaulting.

On 22 Mar 2000, Peter Dalgaard BSA wrote:

> Ben Bolker <ben@zoo.ufl.edu> writes:
> 
> > On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:
> > 
> > > Here's a nasty one.  The following has caused a segmentation
> > > fault and possibly also a bus error.
> > > 
> > > fred <- 1:6
> > > dim(fred) <- 6
> > > dimnames(fred) <- list(LETTERS[1:6])
> > > mm <- matrix(1:12, 2, 6)
> > > 
> > > mm %*% fred # segmentation fault here
> > > 
> > > In the case without the dimnames assignment the result is OK.
> > 
> >   Here (1.0.0 on RH 6.0) I get
> > 
> > Error: invalid type for dimname (must be a vector)
> > 
> > instead of a segmentation fault.
> 
> Hm? 1.0.0 on RH 6.1 gives the segfault for me as does later patch
> versions...
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Mar 22 19:14:11 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Wed, 22 Mar 2000 20:14:11 +0100 (MET)
Subject: [Rd] segmentation fault with 1D array (PR#500)
Message-ID: <200003221914.UAA14761@pubhealth.ku.dk>


  Weird.  It does crash if I run it in a new session.  I tried the
commands out in a session that I'd already done a whole lot in, so maybe
it's just corrupting some little piece of my (large) environment rather
than segfaulting.

On 22 Mar 2000, Peter Dalgaard BSA wrote:

> Ben Bolker <ben@zoo.ufl.edu> writes:
> 
> > On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:
> > 
> > > Here's a nasty one.  The following has caused a segmentation
> > > fault and possibly also a bus error.
> > > 
> > > fred <- 1:6
> > > dim(fred) <- 6
> > > dimnames(fred) <- list(LETTERS[1:6])
> > > mm <- matrix(1:12, 2, 6)
> > > 
> > > mm %*% fred # segmentation fault here
> > > 
> > > In the case without the dimnames assignment the result is OK.
> > 
> >   Here (1.0.0 on RH 6.0) I get
> > 
> > Error: invalid type for dimname (must be a vector)
> > 
> > instead of a segmentation fault.
> 
> Hm? 1.0.0 on RH 6.1 gives the segfault for me as does later patch
> versions...
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 22 20:10:28 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Mar 2000 21:10:28 +0100
Subject: [Rd] segmentation fault with 1D array (PR#500)
In-Reply-To: Peter Dalgaard BSA's message of "22 Mar 2000 20:06:57 +0100"
References: <Pine.LNX.4.10.10003221342370.10699-100000@bolker.zoo.ufl.edu> <x2wvmukeni.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2bt466a17.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Ben Bolker <ben@zoo.ufl.edu> writes:
> 
> > On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:
> > 
> > > Here's a nasty one.  The following has caused a segmentation
> > > fault and possibly also a bus error.
> > > 
> > > fred <- 1:6
> > > dim(fred) <- 6
> > > dimnames(fred) <- list(LETTERS[1:6])
> > > mm <- matrix(1:12, 2, 6)
> > > 
> > > mm %*% fred # segmentation fault here
> > > 
> > > In the case without the dimnames assignment the result is OK.
> > 
> >   Here (1.0.0 on RH 6.0) I get
> > 
> > Error: invalid type for dimname (must be a vector)
> > 
> > instead of a segmentation fault.
> 
> Hm? 1.0.0 on RH 6.1 gives the segfault for me as does later patch
> versions...

Squished... Will commit to release track in a moment (if it survives
"make check").

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Thu Mar 23 06:00:09 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 23 Mar 2000 01:00:09 -0500
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: Kurt Hornik's message of "Wed, 22 Mar 2000 16:02:15 +0100 (CET)"
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu> <871z561pcm.fsf@bavaria.ece.cmu.edu> <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at>
Message-ID: <8766uens46.fsf@bavaria.ece.cmu.edu>


Hi,

ok, the main binary builds, but not ctest.so.  Here is the head of the
linker output:

$ ld -bM:SRE -H512 -T512 -bnoentry -bexpall       -bI:../../../../etc/R.exp  -o ct
est.so ansari.o fexact.o kendall.o ks.o prho.o swilk.o  -L/usr/local/lib -L/afs/
ece/usr/tov/opt/arch -lblas  -lxlf90 -lxlf -lxlomp_ser -lm
ld: 0711-317 ERROR: Undefined symbol: .sprintf
ld: 0711-317 ERROR: Undefined symbol: .itrunc

... and so on.  It's dearly missing -lc.  I've tried adding -lc and
that allowed at least ctest.so to link.  But where should -lc be added
for shared libs to link with?

Thanks,
  -tom

(I used rsync to get r-devel (date-stamp is 2000/March/22).)


Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

[snip]
> Can you have a look at the current r-devel snapshot?  The way I think my
> code works is by adding to R_XTRA_LIBS, which should only be used when
> linking the main binary, but not when creating shared libraries.
> 
> -k

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Mar 23 13:44:36 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 23 Mar 2000 14:44:36 +0100 (CET)
Subject: [Rd] clipboard
Message-ID: <14554.8132.140193.424776@galadriel.ci.tuwien.ac.at>


Hi,

if we do something like that for windows (which might be useful) we
should do the same for X, i.e., use the X clipboard in the same way.

Not that I know how to access it but it shouldn't be too hard to find
out. Both would probably come down to having something like

	read.table(text=foo, ...)

along with

	foo <- getClipboard(...)

reading a text string from the X or Windows clipboard (assuming that
what you get from the windows clipboard is a string).

.f

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 23 13:59:19 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Mar 2000 14:59:19 +0100
Subject: [Rd] clipboard
In-Reply-To: Friedrich Leisch's message of "Thu, 23 Mar 2000 14:44:36 +0100 (CET)"
References: <14554.8132.140193.424776@galadriel.ci.tuwien.ac.at>
Message-ID: <x2vh2dss7c.fsf@blueberry.kubism.ku.dk>

Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

> if we do something like that for windows (which might be useful) we
> should do the same for X, i.e., use the X clipboard in the same way.
> 
> Not that I know how to access it but it shouldn't be too hard to find
> out. Both would probably come down to having something like
> 
> 	read.table(text=foo, ...)
> 
> along with
> 
> 	foo <- getClipboard(...)
> 
> reading a text string from the X or Windows clipboard (assuming that
> what you get from the windows clipboard is a string).

Wouldn't that require some sort of coordination with a similar feature
in e.g. gnumeric? If all we can do with the clipboard is to stick its
content into a text file, we might as well do so directly...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Thu Mar 23 14:50:02 2000
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 23 Mar 2000 06:50:02 -0800
Subject: [Rd] clipboard
In-Reply-To: Peter Dalgaard BSA's message of "23 Mar 2000 14:59:19 +0100"
References: <14554.8132.140193.424776@galadriel.ci.tuwien.ac.at> <x2vh2dss7c.fsf@blueberry.kubism.ku.dk>
Message-ID: <87itydzqp1.fsf@alpha.cfas.washington.edu>

>>>>> "PDB" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PDB> Wouldn't that require some sort of coordination with a
    PDB> similar feature in e.g. gnumeric? If all we can do with the
    PDB> clipboard is to stick its content into a text file, we might
    PDB> as well do so directly...

Check out the drag-n-drop discussions on the XEmacs/GNOME mailing
lists...  (or possibly the code -- you'd have to look at the various
DnD protocols, 4-5 currently in use to be fairly general across unices
and not just Linux-centric (which would still be 3) I believe...).

best,
-tony

-- 
A.J. Rossini		       Research Assistant Professor of Biostatistics 
Biostatistics/Univ. of Washington  (Th)	Box 357232   206-543-1044 (3286=fax)
Center for AIDS Research/HMC/UW	  (M/F)	Box 359931   206-731-3647 (3693=fax)
VTN/SCHARP/FHCRC		 (Tu/W)	Box 358080   206-667-7025 (4812=fax)
rossini@(biostat.washington.edu|u.washington.edu|hivnet.fhcrc.org)
http://www.biostat.washington.edu/~rossini

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Mar 23 15:15:35 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 23 Mar 2000 16:15:35 +0100 (CET)
Subject: [Rd] clipboard
In-Reply-To: <x2vh2dss7c.fsf@blueberry.kubism.ku.dk>
References: <14554.8132.140193.424776@galadriel.ci.tuwien.ac.at>
 <x2vh2dss7c.fsf@blueberry.kubism.ku.dk>
Message-ID: <14554.13591.966735.391021@galadriel.ci.tuwien.ac.at>

>>>>> On 23 Mar 2000 14:59:19 +0100,
>>>>> Peter Dalgaard BSA (PDB) wrote:

PDB> Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:
>> if we do something like that for windows (which might be useful) we
>> should do the same for X, i.e., use the X clipboard in the same way.
>> 
>> Not that I know how to access it but it shouldn't be too hard to find
>> out. Both would probably come down to having something like
>> 
>> read.table(text=foo, ...)
>> 
>> along with
>> 
>> foo <- getClipboard(...)
>> 
>> reading a text string from the X or Windows clipboard (assuming that
>> what you get from the windows clipboard is a string).

PDB> Wouldn't that require some sort of coordination with a similar feature
PDB> in e.g. gnumeric? If all we can do with the clipboard is to stick its
PDB> content into a text file, we might as well do so directly...

Well, sure ... I just meant the above as simple default method which
should work in cooperation with all applications. If I write the
string to a tmpfile and use the current read.table or enhance
read.table is probably not really important, just the latter should be
more efficient (and could be useful in other contexts, too).

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Mar 23 17:10:31 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 23 Mar 2000 18:10:31 +0100
Subject: [Rd] 3D-Scatterplot
Message-ID: <38DA5007.B0AB5186@statistik.uni-dortmund.de>

If someone is interested in 3D-scatterplots, have a look at
http://www.statistik.uni-dortmund.de/leute/ligges.htm

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Thu Mar 23 17:37:53 2000
From: kjetil.kjernsmo@astro.uio.no (Kjetil Kjernsmo)
Date: Thu, 23 Mar 2000 18:37:53 +0100 (MET)
Subject: [Rd] Some "new" stuff for hist.R
Message-ID: <Pine.OSF.4.05.10003231657240.7710-200000@alnair.uio.no>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--0-201145637-953833073=:7710
Content-Type: TEXT/PLAIN; charset=US-ASCII

Dear all,

I've been hacking on histograms the past couple of days. I wanted to do
two things, add histograms where the breaks of one histogram is a
subset sequence of the other, and get a histogram plot from a histogram
object. I found no function to do these things and got no response on
r-help, so I started doing it myself. I think I have solved it now, so
I have attached the code I've got, in case it would be something to
include in R in the future. 
I guess most of the file is your code, that is, it's just hist.default
with only two changes:
In the line
  stop("`probability' is an alias for `!freq', however they differ.")
--------------------^ closing ' was missing
and it returns an object with class="histogram". 

Then, I made hist.histogram, that plots an existing "histogram" object.
This is also just your code, I just did cut'n'paste on the parts that
seemed relevant. One might argue that the default method should be split
in two, since these two parts are almost identical. 

Then, there's adding. To find a subset sequence, I wrote a
sub.vector-function, admittedly very ugly, what I really wanted was a
function that would output the union of sequences and pad the rest with
zeros. Anyway, the function solves my problem... (I'm not usually a
pragmatist... :-)) Then, there's the add.histogram function that outputs a
histogram object. I tried to declare "+".histogram, "%+%".histogram and
things like that, in the hope of creating a binary operator for
histograms, but I couldn't get it to work. Anyway, this is what I've got,
I hope it can be used.

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no 


--0-201145637-953833073=:7710
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="hist.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.OSF.4.05.10003231837530.7710@alnair.uio.no>
Content-Description: Histogram R-code
Content-Disposition: attachment; filename="hist.R"

aGlzdCA8LSBmdW5jdGlvbih4LCAuLi4pIFVzZU1ldGhvZCgiaGlzdCIpDQoN
Cmhpc3QuZGVmYXVsdCA8LQ0KICAgIGZ1bmN0aW9uICh4LCBicmVha3MsIGZy
ZXE9IE5VTEwsIHByb2JhYmlsaXR5ID0gIWZyZXEsIGluY2x1ZGUubG93ZXN0
PSBUUlVFLA0KCSAgICAgIHJpZ2h0PVRSVUUsIGNvbCA9IE5VTEwsIGJvcmRl
ciA9IHBhcigiZmciKSwNCgkgICAgICBtYWluID0gcGFzdGUoIkhpc3RvZ3Jh
bSBvZiIgLCBkZXBhcnNlKHN1YnN0aXR1dGUoeCkpKSwNCgkgICAgICB4bGlt
ID0gcmFuZ2UoYnJlYWtzKSwgeWxpbSA9IHJhbmdlKHksIDApLA0KCSAgICAg
IHhsYWIgPSBkZXBhcnNlKHN1YnN0aXR1dGUoeCkpLCB5bGFiLA0KCSAgICAg
IGF4ZXMgPSBUUlVFLCBwbG90ID0gVFJVRSwgbGFiZWxzID0gRkFMU0UsIG5j
bGFzcyA9IE5VTEwsIC4uLikNCnsNCiAgICBpZiAoIWlzLm51bWVyaWMoeCkp
DQoJc3RvcCgiaGlzdDogeCBtdXN0IGJlIG51bWVyaWMiKQ0KICAgIG1haW4g
IyBldmFsKCkgbm93OiBkZWZlYXQgbGF6eSBldmFsDQogICAgeGxhYg0KICAg
IG4gPC0gbGVuZ3RoKHggPC0geFshaXMubmEoeCldKQ0KICAgIHVzZS5iciA8
LSAhbWlzc2luZyhicmVha3MpDQogICAgaWYodXNlLmJyKSB7DQoJaWYoIW1p
c3NpbmcobmNsYXNzKSkNCgkgICAgd2FybmluZygiYG5jbGFzcycgbm90IHVz
ZWQgd2hlbiBgYnJlYWtzJyBzcGVjaWZpZWQiKQ0KICAgIH0NCiAgICBlbHNl
IGlmKCFpcy5udWxsKG5jbGFzcykgJiYgbGVuZ3RoKG5jbGFzcykgPT0gMSkN
CglicmVha3MgPC0gbmNsYXNzDQogICAgdXNlLmJyIDwtIHVzZS5iciAmJiAo
bkIgPC0gbGVuZ3RoKGJyZWFrcykpID4gMQ0KICAgIGlmKHVzZS5icikNCgli
cmVha3MgPC0gc29ydChicmVha3MpDQogICAgZWxzZSB7ICMgY29uc3RydWN0
IHZlY3RvciBvZiBicmVha3MNCglyeCA8LSByYW5nZSh4KQ0KCW5uYiA8LQ0K
CSAgICBpZihtaXNzaW5nKGJyZWFrcykpIDEgKyBsb2cyKG4pDQoJICAgIGVs
c2UgeyAjIGJyZWFrcyA9IGBuY2xhc3MnDQoJCWlmIChpcy5uYShicmVha3Mp
IHwgYnJlYWtzIDwgMikNCgkJICAgIHN0b3AoImludmFsaWQgbnVtYmVyIG9m
IGJyZWFrcyIpDQoJCWJyZWFrcw0KCSAgICB9DQoJYnJlYWtzIDwtIHByZXR0
eSAocngsIG4gPSBubmIsIG1pbi5uPTEsIGVwcy5jb3JyID0gMikNCgluQiA8
LSBsZW5ndGgoYnJlYWtzKQ0KCWlmKG5CIDw9IDEpIHsgIyMtLSBJbXBvc3Np
YmxlICENCgkgICAgc3RvcChwYXN0ZSgiaGlzdC5kZWZhdWx0OiBwcmV0dHko
KSBlcnJvciwgYnJlYWtzPSIsZm9ybWF0KGJyZWFrcykpKQ0KCX0NCiAgICB9
DQogICAgc3RvcmFnZS5tb2RlKHgpIDwtICJkb3VibGUiDQogICAgc3RvcmFn
ZS5tb2RlKGJyZWFrcykgPC0gImRvdWJsZSINCiAgICBjb3VudHMgPC0gLkMo
ImJpbmNvdW50IiwNCgkJIHgsDQoJCSBuLA0KCQkgYnJlYWtzLA0KCQkgbkIs
DQoJCSBjb3VudHMgPSBpbnRlZ2VyKG5CIC0gMSksDQoJCSByaWdodAk9IGFz
LmxvZ2ljYWwocmlnaHQpLA0KCQkgaW5jbHVkZT0gYXMubG9naWNhbChpbmNs
dWRlLmxvd2VzdCksDQoJCSBOQU9LID0gRkFMU0UsIERVUCA9IEZBTFNFLCBQ
QUNLQUdFID0gImJhc2UiKSAkY291bnRzDQogICAgaWYgKGFueShjb3VudHMg
PCAwKSkNCglzdG9wKCJuZWdhdGl2ZSBgY291bnRzJy4gSW50ZXJuYWwgRXJy
b3IgaW4gQy1jb2RlIGZvciBcImJpbmNvdW50XCIiKQ0KICAgIGlmIChzdW0o
Y291bnRzKSA8IG4pDQoJc3RvcCgic29tZSBgeCcgbm90IGNvdW50ZWQ7IG1h
eWJlIGBicmVha3MnIGRvIG5vdCBzcGFuIHJhbmdlIG9mIGB4JyIpDQogICAg
aCA8LSBkaWZmKGJyZWFrcykNCiAgICBpZiAoIXVzZS5iciAmJiBhbnkoaCA8
PSAwKSkNCglzdG9wKCJub3Qgc3RyaWN0bHkgaW5jcmVhc2luZyBgYnJlYWtz
Jy4iKQ0KICAgIGlmIChpcy5udWxsKGZyZXEpKSB7DQoJZnJlcSA8LSBpZigh
bWlzc2luZyhwcm9iYWJpbGl0eSkpDQoJICAgICFhcy5sb2dpY2FsKHByb2Jh
YmlsaXR5KQ0KCWVsc2UgaWYodXNlLmJyKSB7DQoJICAgICMjLS0gRG8gZnJl
cXVlbmNpZXMgaWYgYnJlYWtzIGFyZSBldmVubHkgc3BhY2VkDQoJICAgIG1h
eChoKS1taW4oaCkgPCAxZS03ICogbWVhbihoKQ0KCX0gZWxzZSBUUlVFDQog
ICAgfSBlbHNlIGlmKCFtaXNzaW5nKHByb2JhYmlsaXR5KSAmJiBhbnkocHJv
YmFiaWxpdHkgPT0gZnJlcSkpDQoJc3RvcCgiYHByb2JhYmlsaXR5JyBpcyBh
biBhbGlhcyBmb3IgYCFmcmVxJywgaG93ZXZlciB0aGV5IGRpZmZlci4iKQ0K
ICAgIGludGVuc2l0aWVzIDwtIGNvdW50cy8obipoKQ0KICAgIG1pZHMgPC0g
MC41ICogKGJyZWFrc1stMV0gKyBicmVha3NbLW5CXSkNCiAgICB5IDwtIGlm
IChmcmVxKSBjb3VudHMgZWxzZSBpbnRlbnNpdGllcw0KICAgIHIgPC0gc3Ry
dWN0dXJlKGxpc3QoYnJlYWtzID0gYnJlYWtzLCBjb3VudHMgPSBjb3VudHMs
DQoJICAgICAgaW50ZW5zaXRpZXMgPSBpbnRlbnNpdGllcywgbWlkcyA9IG1p
ZHMpLCBjbGFzcz0iaGlzdG9ncmFtIikNCiAgICBpZiAocGxvdCkgew0KCXBs
b3QubmV3KCkNCglwbG90LndpbmRvdyh4bGltLCB5bGltLCAiIikgIy0+IHls
aW0ncyBkZWZhdWx0IGZyb20gJ3knDQoJaWYgKG1pc3NpbmcoeWxhYikpDQoJ
ICAgIHlsYWIgPC0gcGFzdGUoaWYoIWZyZXEpIlJlbGF0aXZlICIsICJGcmVx
dWVuY3kiLCBzZXA9IiIpDQoJaWYoZnJlcSAmJiB1c2UuYnIgJiYgbWF4KGgp
LW1pbihoKSA+IDFlLTcgKiBtZWFuKGgpKQ0KCSAgICB3YXJuaW5nKCJ0aGUg
QVJFQVMgaW4gdGhlIHBsb3QgYXJlIHdyb25nIC0tIG1heWJlIHVzZSBgZnJl
cT1GQUxTRSciKQ0KCXRpdGxlKG1haW4gPSBtYWluLCB4bGFiID0geGxhYiwg
eWxhYiA9IHlsYWIsIC4uLikNCglpZihheGVzKSB7DQoJICAgIGF4aXMoMSwg
Li4uKQ0KCSAgICBheGlzKDIsIC4uLikNCgl9DQoJcmVjdChicmVha3NbLW5C
XSwgMCwgYnJlYWtzWy0xXSwgeSwNCgkgICAgIGNvbCA9IGNvbCwgYm9yZGVy
ID0gYm9yZGVyKQ0KCWlmKGxhYmVscykNCgkgICAgdGV4dChtaWRzLCB5LA0K
CQkgbGFiZWxzID0gaWYoZnJlcSkgY291bnRzIGVsc2Ugcm91bmQoaW50ZW5z
aXRpZXMsMyksDQoJCSBhZGogPSBjKDAuNSwgLTAuNSkpDQoJaW52aXNpYmxl
KHIpDQogICAgfQ0KICAgIGVsc2Ugcg0KfQ0KDQoNCmhpc3QuaGlzdG9ncmFt
IDwtDQogIGZ1bmN0aW9uIChoLCBmcmVxPSBOVUxMLCBwcm9iYWJpbGl0eSA9
ICFmcmVxLCANCgkgICAgICBjb2wgPSBOVUxMLCBib3JkZXIgPSBwYXIoImZn
IiksDQoJICAgICAgbWFpbiA9IHBhc3RlKCJIaXN0b2dyYW0gb2YiICwgZGVw
YXJzZShzdWJzdGl0dXRlKGgpKSksDQoJICAgICAgeGxpbSA9IHJhbmdlKGgk
YnJlYWtzKSwgeWxpbSA9IHJhbmdlKHksIDApLA0KCSAgICAgIHhsYWIgPSBk
ZXBhcnNlKHN1YnN0aXR1dGUoaCkpLCB5bGFiLA0KCSAgICAgIGF4ZXMgPSBU
UlVFLCBsYWJlbHMgPSBGQUxTRSwgIC4uLikNCnsNCiAgaWYgKGlzLm51bGwo
ZnJlcSkpIHsNCiAgICBmcmVxIDwtIGlmKCFtaXNzaW5nKHByb2JhYmlsaXR5
KSkNCiAgICAgICFhcy5sb2dpY2FsKHByb2JhYmlsaXR5KSBlbHNlIFRSVUUN
CiAgfSBlbHNlIGlmKCFtaXNzaW5nKHByb2JhYmlsaXR5KSAmJiBhbnkocHJv
YmFiaWxpdHkgPT0gZnJlcSkpDQogICAgc3RvcCgiYHByb2JhYmlsaXR5JyBp
cyBhbiBhbGlhcyBmb3IgYCFmcmVxJywgaG93ZXZlciB0aGV5IGRpZmZlci4i
KQ0KICB5IDwtIGlmIChmcmVxKSBoJGNvdW50cyBlbHNlIGgkaW50ZW5zaXRp
ZXMNCiAgbkIgPC0gbGVuZ3RoKGgkYnJlYWtzKQ0KICBwbG90Lm5ldygpDQog
IHBsb3Qud2luZG93KHhsaW0sIHlsaW0sICIiKSAjLT4geWxpbSdzIGRlZmF1
bHQgZnJvbSAneScNCiAgaWYgKG1pc3NpbmcoeWxhYikpDQogICAgeWxhYiA8
LSBwYXN0ZShpZighZnJlcSkiUmVsYXRpdmUgIiwgIkZyZXF1ZW5jeSIsIHNl
cD0iIikNCiAgdGl0bGUobWFpbiA9IG1haW4sIHhsYWIgPSB4bGFiLCB5bGFi
ID0geWxhYiwgLi4uKQ0KICBpZihheGVzKSB7DQogICAgYXhpcygxLCAuLi4p
DQogICAgYXhpcygyLCAuLi4pDQogIH0NCiAgcmVjdChoJGJyZWFrc1stbkJd
LCAwLCBoJGJyZWFrc1stMV0sIHksDQogICAgICAgY29sID0gY29sLCBib3Jk
ZXIgPSBib3JkZXIpDQogIGlmKGxhYmVscykNCiAgICB0ZXh0KGgkbWlkcywg
eSwNCiAgICAgICAgIGxhYmVscyA9IGlmKGZyZXEpIGgkY291bnRzIGVsc2Ug
cm91bmQoaCRpbnRlbnNpdGllcywzKSwNCiAgICAgICAgIGFkaiA9IGMoMC41
LCAtMC41KSkNCiAgaW52aXNpYmxlKHkpDQp9DQpzdWIudmVjdG9yIDwtIGZ1
bmN0aW9uKGIxLCBiMikNCnsNCiAgaSA8LSAwDQogIHdoaWxlKCEgYWxsKGIy
WyhpKzEpOihsZW5ndGgoYjEpK2kpXSA9PSBiMSkpDQogIHsgICANCiAgICBp
PC1pKzENCiAgICBpZihpK2xlbmd0aChiMSkgPiBsZW5ndGgoYjIpKSByZXR1
cm4oTlVMTCkNCiAgfQ0KICByZXR1cm4oKGkrMSk6KGxlbmd0aChiMSkraSkp
DQp9DQoNCmFkZC5oaXN0b2dyYW0gPC0gZnVuY3Rpb24oaDEsIGgyKQ0Kew0K
ICBpZihsZW5ndGgoaDEkYnJlYWtzKSA+PSBsZW5ndGgoaDIkYnJlYWtzKSkN
CiAgew0KICAgIGJsIDwtIGgxJGJyZWFrcw0KICAgIGJzIDwtIGgyJGJyZWFr
cw0KICAgIGNsIDwtIGgxJGNvdW50cw0KICAgIGNzIDwtIGgyJGNvdW50cw0K
ICAgIG1pIDwtIGgxJG1pZHMNCiAgfSBlbHNlIHsNCiAgICBicyA8LSBoMSRi
cmVha3MNCiAgICBibCA8LSBoMiRicmVha3MNCiAgICBjcyA8LSBoMSRjb3Vu
dHMNCiAgICBjbCA8LSBoMiRjb3VudHMNCiAgICBtaSA8LSBoMiRtaWRzDQog
IH0NCiAgaW5kIDwtIHN1Yi52ZWN0b3IoYnMsIGJsKQ0KICBpZighIGlzLnZl
Y3RvcihpbmQpKSBzdG9wKCJJbmNvbXBhdGlibGUgYnJlYWtzIikNCiAgYzAg
PC0gcmVwKDAsIGxlbmd0aChjbCkpDQogIGMwW2luZFsxOmxlbmd0aChjcyld
XSA8LSBjcw0KICBjdCA8LSBjMCArIGNsDQogIGludCA8LSBjdC8oc3VtKGN0
KSpkaWZmKGJsKSkgIyBUaGlzIHdvcmtzIGZvciBub24tZXF1aWRpc3RhbnQg
YnJlYWtzPw0KICByZXR1cm4oc3RydWN0dXJlKGxpc3QoYnJlYWtzPWJsLA0K
ICAgICAgICAgICAgICAgICAgICAgICAgY291bnRzPWN0LA0KICAgICAgICAg
ICAgICAgICAgICAgICAgaW50ZW5zaXRpZXM9aW50LA0KICAgICAgICAgICAg
ICAgICAgICAgICAgbWlkcz1taSksDQogICAgICAgICAgICAgICAgICAgY2xh
c3M9Imhpc3RvZ3JhbSIpKQ0KfQ0K
--0-201145637-953833073=:7710--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Mar 23 18:27:35 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 23 Mar 2000 19:27:35 +0100 (CET)
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: <8766uens46.fsf@bavaria.ece.cmu.edu>
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu>
 <871z561pcm.fsf@bavaria.ece.cmu.edu>
 <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at>
 <8766uens46.fsf@bavaria.ece.cmu.edu>
Message-ID: <14554.25111.847983.270127@aragorn.ci.tuwien.ac.at>

>>>>> Thomas J Vogels writes:

> Hi,

> ok, the main binary builds, but not ctest.so.  Here is the head of the
> linker output:

> $ ld -bM:SRE -H512 -T512 -bnoentry -bexpall       -bI:../../../../etc/R.exp  -o ct
> est.so ansari.o fexact.o kendall.o ks.o prho.o swilk.o  -L/usr/local/lib -L/afs/
> ece/usr/tov/opt/arch -lblas  -lxlf90 -lxlf -lxlomp_ser -lm
> ld: 0711-317 ERROR: Undefined symbol: .sprintf
> ld: 0711-317 ERROR: Undefined symbol: .itrunc

> ... and so on.  It's dearly missing -lc.  I've tried adding -lc and
> that allowed at least ctest.so to link.  But where should -lc be added
> for shared libs to link with?

Tried adding to LIBS now.  Pls check.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From santini@dsi.unimi.it  Fri Mar 24 10:12:52 2000
From: santini@dsi.unimi.it (santini@dsi.unimi.it)
Date: Fri, 24 Mar 2000 11:12:52 +0100 (MET)
Subject: [Rd] kernel {ts}, kernel.dirichlet calling with one arg (PR#501)
Message-ID: <200003241012.LAA29932@pubhealth.ku.dk>

Full_Name: Massimo Santini
Version: 1.0.0
OS: Linux
Submission from: (NULL) (159.149.147.89)


At line 1269 of .../R/library/ts/R/ts there is the following call

	dirichlet = dirichlet.kernel(m), 

but since dirichlet.kernel is declared somewhre above to take two arguments, 
I suspect that that line should read as

	dirichlet = dirichlet.kernel(m, r), 

Without this correction the call
	
	kernel("dirichlet",m=10,r=1);
	
always returns the following error

	Error in dirichlet.kernel(m) : Argument "r" is missing, with no default

while after the proposed patch if correctly outputs the desider kernel.

I hope this helps,

			best regards, Massimo

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lbaring@stochastik.uni-hannover.de  Fri Mar 24 12:23:25 2000
From: lbaring@stochastik.uni-hannover.de (lbaring@stochastik.uni-hannover.de)
Date: Fri, 24 Mar 2000 13:23:25 +0100 (MET)
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
Message-ID: <200003241223.NAA02113@pubhealth.ku.dk>

Hello!

I use R-version 1.0.0
To get the 0.95 quantile of the hypergeometric
distribution with the parameters m=45000,n=5000 and
k=600 I use the R-command 

> qhyper(0.95,45000,5000,600).


The value obtained is 600. However, the true value
is 552. The latter can be obtained for example by
calling the corresponding distribution function 
with the R commands 

> x<-540:580
> phyper(x,45000,5000,600)   

The value 552 is obtained also by the usual normal
approximation.


Overall, it seems that R produces errors when calling
qhyper(p,m,n,k) for large values of the parametes 
m,n or k.

Sincerely
L. Baringhaus

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Fri Mar 24 13:40:13 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Fri, 24 Mar 2000 14:40:13 +0100 (CET)
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
In-Reply-To: <200003241223.NAA02113@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0003241433160.21466-100000@boromir.ci.tuwien.ac.at>


> Hello!
> 
> I use R-version 1.0.0
> To get the 0.95 quantile of the hypergeometric
> distribution with the parameters m=45000,n=5000 and
> k=600 I use the R-command 
> 
> > qhyper(0.95,45000,5000,600).
> 
> 
> The value obtained is 600. However, the true value
> is 552. 

Well, 

had a short look. The problem arises in qhyper.c at line 56:

 term = exp(lfastchoose(NR, xr) + lfastchoose(NB, xb) - lfastchoose(N, n));

The expression inside the exp() function gives -1415.411856 and exp()
returns 0. So term and sum in 

 while(sum < p && xr < xend) {
        xr++;
        NB++;
        term *= (NR / xr) * (xb / NB);
        sum += term;
        xb--;
        NR--;
    }

are 0 all the time and xend = 600 is returned. 

R-Core: How to fix this?

Torsten

*****************************************************************
*				                                *
* Torsten Hothorn, Statistician 		                *
* at the moment: Institut fuer Statistik, TU Wien	        *
* Tel: 0043 1 58801 10772                  			*
* Fax: 0043 1 58801 10798                                       *
*                                                               *
*****************************************************************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Fri Mar 24 13:58:25 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Fri, 24 Mar 2000 14:58:25 +0100 (CET)
Subject: [Rd] StatDataML & Gnumeric
Message-ID: <Pine.LNX.4.21.0003241452010.26446-100000@boromir.ci.tuwien.ac.at>


I just uploaded version 0.2-5 of the StatDataML package and a corrected
version of the proposal to http://www.ci.tuwien.ac.at/~leisch/R

Also available now is StatDataMLGnumeric, which implements writing of
"dataframe.dtd" conform StatDataML files from Gnumeric. 

Torsten

*****************************************************************
*								*
* Torsten Hothorn, Statistician					*
* at the moment: Institut fuer Statistik, TU Wien		*
* Tel: 0043 1 58801 10772					*
* Fax: 0043 1 58801 10798					*
*								*
*****************************************************************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 24 14:58:39 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Mar 2000 15:58:39 +0100
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
In-Reply-To: Torsten Hothorn's message of "Fri, 24 Mar 2000 14:40:13 +0100 (CET)"
References: <Pine.LNX.4.21.0003241433160.21466-100000@boromir.ci.tuwien.ac.at>
Message-ID: <x2wvmswh28.fsf@blueberry.kubism.ku.dk>

Torsten Hothorn <hothorn@ci.tuwien.ac.at> writes:

>  term = exp(lfastchoose(NR, xr) + lfastchoose(NB, xb) - lfastchoose(N, n));
> 
> The expression inside the exp() function gives -1415.411856 and exp()
> returns 0. So term and sum in 
> 
>  while(sum < p && xr < xend) {
>         xr++;
>         NB++;
>         term *= (NR / xr) * (xb / NB);
>         sum += term;
>         xb--;
>         NR--;
>     }
> 
> are 0 all the time and xend = 600 is returned. 
> 
> R-Core: How to fix this?

Ick! That is of course only to be expected with recurrence relations
like this applied to large numbers. Since the term formula (as far as
I remember!) applies to all the point probabilities, I suppose that
one could start the recurrence from a "known positive" value and work
both forwards and backwards from there. Since you still want to do the
sums from the low end (although that is perhaps not all that
important?) you might need an intermediate array to hold the values.
One idea could be to start from the normal approximation of the
desired quantile. Probably a bit more than an afternoons work, but
hardly several weeks...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar 24 16:10:38 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 24 Mar 2000 08:10:38 -0800 (PST)
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
In-Reply-To: <x2wvmswh28.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0003240807090.2323-100000@mail.biostat.washington.edu>

On 24 Mar 2000, Peter Dalgaard BSA wrote:

> Torsten Hothorn <hothorn@ci.tuwien.ac.at> writes:
> 
> >  term = exp(lfastchoose(NR, xr) + lfastchoose(NB, xb) - lfastchoose(N, n));
> > 
> > The expression inside the exp() function gives -1415.411856 and exp()
> > returns 0. So term and sum in 
> > 
> >  while(sum < p && xr < xend) {
> >         xr++;
> >         NB++;
> >         term *= (NR / xr) * (xb / NB);
> >         sum += term;
> >         xb--;
> >         NR--;
> >     }
> > 
> > are 0 all the time and xend = 600 is returned. 
> > 
> > R-Core: How to fix this?
> 
> Ick! That is of course only to be expected with recurrence relations
> like this applied to large numbers. Since the term formula (as far as
> I remember!) applies to all the point probabilities, I suppose that
> one could start the recurrence from a "known positive" value and work
> both forwards and backwards from there. Since you still want to do the
> sums from the low end (although that is perhaps not all that
> important?) you might need an intermediate array to hold the values.
> One idea could be to start from the normal approximation of the
> desired quantile. Probably a bit more than an afternoons work, but
> hardly several weeks...

As phyper seems to work we could just start at the Normal approximation to
qhyper and search for x such  that phyper(x)=p. Since it's a discrete
distribution this shouldn't take that long.

	-thomas





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar 24 16:10:35 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Fri, 24 Mar 2000 17:10:35 +0100 (MET)
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
Message-ID: <200003241610.RAA05583@pubhealth.ku.dk>

On 24 Mar 2000, Peter Dalgaard BSA wrote:

> Torsten Hothorn <hothorn@ci.tuwien.ac.at> writes:
> 
> >  term = exp(lfastchoose(NR, xr) + lfastchoose(NB, xb) - lfastchoose(N, n));
> > 
> > The expression inside the exp() function gives -1415.411856 and exp()
> > returns 0. So term and sum in 
> > 
> >  while(sum < p && xr < xend) {
> >         xr++;
> >         NB++;
> >         term *= (NR / xr) * (xb / NB);
> >         sum += term;
> >         xb--;
> >         NR--;
> >     }
> > 
> > are 0 all the time and xend = 600 is returned. 
> > 
> > R-Core: How to fix this?
> 
> Ick! That is of course only to be expected with recurrence relations
> like this applied to large numbers. Since the term formula (as far as
> I remember!) applies to all the point probabilities, I suppose that
> one could start the recurrence from a "known positive" value and work
> both forwards and backwards from there. Since you still want to do the
> sums from the low end (although that is perhaps not all that
> important?) you might need an intermediate array to hold the values.
> One idea could be to start from the normal approximation of the
> desired quantile. Probably a bit more than an afternoons work, but
> hardly several weeks...

As phyper seems to work we could just start at the Normal approximation to
qhyper and search for x such  that phyper(x)=p. Since it's a discrete
distribution this shouldn't take that long.

	-thomas






-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 24 16:29:06 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 24 Mar 2000 17:29:06 +0100 (MET)
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
Message-ID: <200003241629.RAA05692@pubhealth.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> As phyper seems to work we could just start at the Normal approximation to
> qhyper and search for x such  that phyper(x)=p. Since it's a discrete
> distribution this shouldn't take that long.

Or apply the same fixup:

        sum += (small_N ? term : exp(term));
        ...
        if(small_N) term *= (NR / xr) * (xb / NB);
        else    term += log((NR / xr) * (xb / NB));

which is pretty obviously not optimized for speed, but certainly
avoids the multiply-by-zero effect.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 24 16:32:37 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Mar 2000 17:32:37 +0100
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
In-Reply-To: Thomas Lumley's message of "Fri, 24 Mar 2000 08:10:38 -0800 (PST)"
References: <Pine.GSO.4.21.0003240807090.2323-100000@mail.biostat.washington.edu>
Message-ID: <x2r9d0wcpm.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> As phyper seems to work we could just start at the Normal approximation to
> qhyper and search for x such  that phyper(x)=p. Since it's a discrete
> distribution this shouldn't take that long.

Or apply the same fixup:

        sum += (small_N ? term : exp(term));
        ...
        if(small_N) term *= (NR / xr) * (xb / NB);
        else    term += log((NR / xr) * (xb / NB));

which is pretty obviously not optimized for speed, but certainly
avoids the multiply-by-zero effect.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Fri Mar 24 19:26:18 2000
From: warnes@biostat.washington.edu (warnes@biostat.washington.edu)
Date: Fri, 24 Mar 2000 20:26:18 +0100 (MET)
Subject: [Rd] dmvnorm() bug in e1071 (PR#503)
Message-ID: <200003241926.UAA06290@pubhealth.ku.dk>


When dmvnorm is applied to matrices it fails.  The offending lines are

  if (length(x) != ncol(sigma)) {
    stop("x and sigma have non-conforming size")
  }

which works fine if x is a dataframe, but not if x is a matrix.

Replacing this test with

  if (ncol(x) != ncol(sigma)) {
    stop("x and sigma have non-conforming size")
  }

Corrects the problem, and still works for data frames and
vectors.  (Vectors have already been converted to matrices).

-Gregory


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Mar 24 19:53:42 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Fri, 24 Mar 2000 14:53:42 -0500 (EST)
Subject: [Rd] Some "new" stuff for hist.R
In-Reply-To: <Pine.OSF.4.05.10003231657240.7710-200000@alnair.uio.no>
Message-ID: <Pine.LNX.4.10.10003241450500.824-100000@bolker.zoo.ufl.edu>

On Thu, 23 Mar 2000, Kjetil Kjernsmo wrote:

> Dear all,
> 
> I've been hacking on histograms the past couple of days. I wanted to do
> two things, add histograms where the breaks of one histogram is a
> subset sequence of the other, and get a histogram plot from a histogram
> object.

> Then, I made hist.histogram, that plots an existing "histogram" object.
> This is also just your code, I just did cut'n'paste on the parts that
> seemed relevant. One might argue that the default method should be split
> in two, since these two parts are almost identical. 

  Might it be more logical to make hist.histogram be plot.histogram
instead?  

  This is a nice idea; I had thought in the past that it would be nice to
make "histogram" into a class with print and plot methods (in particular,
it's sometimes nice to be able to overlay different histograms on each
other), but never got around to doing it.

  Ben

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Fri Mar 24 19:58:43 2000
From: kjetil.kjernsmo@astro.uio.no (Kjetil Kjernsmo)
Date: Fri, 24 Mar 2000 20:58:43 +0100 (MET)
Subject: [Rd] Some "new" stuff for hist.R
In-Reply-To: <Pine.LNX.4.10.10003241450500.824-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.OSF.4.05.10003242057440.2535-100000@alnair.uio.no>

On Fri, 24 Mar 2000, Ben Bolker wrote:

>  Might it be more logical to make hist.histogram be plot.histogram
>instead?  

Yep, Jens e-mailed me about it, and after thinking about, I think it would
be a good idea.

>  This is a nice idea; I had thought in the past that it would be nice to
>make "histogram" into a class with print and plot methods (in particular,
>it's sometimes nice to be able to overlay different histograms on each
>other), but never got around to doing it.

Yeah, that would have been a niec feature too! :-)

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Sat Mar 25 20:06:53 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Sat, 25 Mar 2000 21:06:53 +0100 (MET)
Subject: [Rd] new save code and DOTSXP (PR#504)
Message-ID: <200003252006.VAA08757@pubhealth.ku.dk>

The new save/load code cannot handle DOTSXP

 f<-function(x,...){ function(y) list(x=x,y=y,...)} 
 a<-f(1,2,3)
 save(list="a",file="a.rdata")

Error in save(list = "a", file = "a.rdata") :
        NewWriteItem: unknown type 17



R 1.0 on Solaris or Linux

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Sat Mar 25 20:16:40 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Sat, 25 Mar 2000 21:16:40 +0100 (MET)
Subject: [Rd] interrupted save (PR#505)
Message-ID: <200003252016.VAA08795@pubhealth.ku.dk>


If an error occurs during a save the file does not appear to be
closed and buffers flushed.  This can lead to corruption if the same
filename is used later and then the buffer is flushed on program exit.

For example, tn the context of PR #504

 f<-function(x,...){ function(y) list(x=x,y=y,...)}
 a<-f(1,2,3)
 save(list="a",file="a.rdata")  ## -- error --
 b<-1:10
 save(list="b",file="a.rdata")
 load("a.rdata")  ## works
 q("no")
 
 R

 load("a.rdata")  ## error



This is R1.0 on Linux

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Mar 26 09:06:55 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 26 Mar 2000 09:06:55 +0100 (BST)
Subject: [Rd] windows version
In-Reply-To: <38D4E936.EB941D1C@univie.ac.at>
Message-ID: <Pine.GSO.4.05.10003260906000.2875-100000@auk.stats>

On Sun, 19 Mar 2000, Erich Neuwirth wrote:

> for all of you using the windows version:
> i think having a look at the r-winedt
> interface by volker ligges is a good idea.
> it works quite nicely.

Is WinEdt not shareware?  That dampens my enthusiasm for using it with
an Open Source project.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Sun Mar 26 09:28:45 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Sun, 26 Mar 2000 10:28:45 +0200
Subject: [Rd] windows version
References: <Pine.GSO.4.05.10003260906000.2875-100000@auk.stats>
Message-ID: <38DDCA3D.DAF93DD8@univie.ac.at>

yes, you are right.
winedt is shareware.


Prof Brian D Ripley wrote:
> 
> On Sun, 19 Mar 2000, Erich Neuwirth wrote:
> 
> > for all of you using the windows version:
> > i think having a look at the r-winedt
> > interface by volker ligges is a good idea.
> > it works quite nicely.
> 
> Is WinEdt not shareware?  That dampens my enthusiasm for using it with
> an Open Source project.
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Mar 26 09:38:17 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 26 Mar 2000 09:38:17 +0100 (BST)
Subject: [Rd] Use of Rd2txt on .Rd files from rw-1.0.0 (PR#498)
In-Reply-To: <200003212215.XAA03296@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10003260936270.2875-100000@auk.stats>

How did you get the files from Windows to Solaris?  I suspect you have
CRLF line endings (which emacs tolerates).  Try converting to LF
(e.g. by MULE on emacs setting the coding).  It is a bit much to expext
Unix systems to accept Windows files.


On Tue, 21 Mar 2000 john.maindonald@anu.edu.au wrote:

> >From e980153 Tue Mar 21 18:50:55 2000
> To: bates@stat.wisc.edu
> Subject: Use of Rd2txt on .Rd files from rw-1.0.0
> 
> Files generated using prompt.data.frame() under rw-1.0.0 get
> scrambled (mildly) when I process them under Rd2txt on Solaris,
> (using R-devel 1.1.0).
> Files generated under R-devel 1.1 on Solaris are processed ok.
> 
> The .Rd files from the two sources look identical. The problem 
> is likely to be with Rd2txt, I guess.
> 
> Here is an example.  I give only the first part of the output,
> where the problem occurs.
> =========================================================
> Kiwifruit data
> 
> Description:
> 
>  Kiwifruitkiwishade' data frame has 48 rows and 3 columns.
>      shading trial
> 
> Format:
> 
>      This data frame contains the following columns:
> 
>       yield a numeric vector
> 
>  `west'  ck a factor with levels
> 
>  `Feb2May'  a factor with levels
>             `none' 
> 
> Details:
> 
> ............
> =========================================================
> 
> Here is what I expected to get, and do get when the .Rd file
> is generated under Solaris:
> 
> =========================================================
> Kiwifruit data
> 
> Description:
> 
>      The `kiwishade' data frame has 48 rows and 3 columns. Kiwifruit
>      shading trial
> 
> Format:
> 
>      This data frame contains the following columns:
> 
>       yield a numeric vector
> 
>       block a factor with levels `east'  `north'  `west' 
> 
>       shade a factor with levels `Aug2Dec'  `Dec2Feb'  `Feb2May' 
>             `none'
> ............
> =========================================================
> 
> Here is the .Rd file, from the PC, then editing using emacs
> under Solaris.  However the same scrambling occurs when the
> files is processed without editing.
> =========================================================
> \name{kiwishade}
> \alias{kiwishade}
> \non_function{}
> \title{Kiwifruit data}
> \description{
> The \code{kiwishade} data frame has 48 rows and 3 columns.
> Kiwifruit shading trial
> }
> \format{
> This data frame contains the following columns:
> \describe{
> \item{yield}{
> a numeric vector
> }
> \item{block}{
> a factor with levels
> \code{east} 
> \code{north} 
> \code{west} 
> }
> \item{shade}{
> a factor with levels
> \code{Aug2Dec} 
> \code{Dec2Feb} 
> \code{Feb2May} 
> \code{none} 
> }
> }
> }
> \details{
> 
> }
> \source{
> Snelgar at al.
> }
> \examples{
> data(kiwishade)
> }
> \keyword{datasets}
> =========================================================
> 
> John Maindonald               email : john.maindonald@anu.edu.au        
> Statistical Consulting Unit,  phone : (6249)3998        
> c/o CMA, SMS,                 fax   : (6249)5549  
> John Dedman Mathematical Sciences Building
> Australian National University
> Canberra ACT 0200
> Australia
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sun Mar 26 11:24:58 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Sun, 26 Mar 2000 12:24:58 +0200
Subject: [Rd] windows version
References: <Pine.GSO.4.05.10003260906000.2875-100000@auk.stats>
Message-ID: <38DDE57A.6FECED98@statistik.uni-dortmund.de>

> Is WinEdt not shareware?  That dampens my enthusiasm for using it with
> an Open Source project.

You are right.
I thought it would be nice for some Windows users, which are using
WinEdt already as a TeX-Editor and don't like emacs very well.

Best regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Sun Mar 26 21:49:24 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Sun, 26 Mar 2000 22:49:24 +0200 (MET DST)
Subject: [Rd] matlines, matpoints don't follow prototype (PR#506)
Message-ID: <200003262049.WAA11567@pubhealth.ku.dk>

The Blue Book allows the 'type' argument to be used in matpoints and
matlines.

	matlines(x, y, type="l", lty=1:5, pch=, col=1:4)

R-1.0.0 does not.

Thus, type="h", "b", must be invoked thru matplot( x, y, type = "h",
add=TRUE)

For the sake of consistency with S, it would be nice to have matlines
defined as:

"matlines" <-
  function(x, y, type = 'l', lty=1:5, lwd = 1, pch=NULL, col=1:6, ...)
  matplot(x=x, y=y, type=type, lty=lty, lwd=lwd, pch=pch, col=col,
          add=TRUE, ...)


and similarly for matpoints.

Chuck Berry
-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive
Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Mar 27 19:18:54 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 27 Mar 2000 12:18:54 -0600
Subject: [Rd] R port of acepack
Message-ID: <6rog80p981.fsf@franz.stat.wisc.edu>

To whom should bug reports of the R port of acepack be directed?

On a SPARC/Solaris 2.6 or 2.7 (SunOS 5.6 or 5.7) system running
R-1.0.0 the avas example fails
 > library(acepack)
 > example(avas)

 avas> TWOPI <- 8 * atan(1)

 avas> x <- runif(200, 0, TWOPI)

 avas> y <- exp(sin(x) + rnorm(200)/2)

 avas> a <- avas(x, y)

 Process R bus error (core dumped) at Mon Mar 27 11:59:54 2000

The bus error occurs inside the Fortran subroutine smth, which is
called by the subroutine rlsmo, which is called by the subroutine
avas.  The compilers would have been gcc 2.95.2 and g77 GNU Fortran
0.5.25 19991024 (release).

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Mar 27 19:33:27 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 27 Mar 2000 10:33:27 -0800 (PST)
Subject: [Rd] R port of acepack
In-Reply-To: <6rog80p981.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.GSO.4.21.0003271031110.15596-100000@mail.biostat.washington.edu>

On 27 Mar 2000, Douglas Bates wrote:

> To whom should bug reports of the R port of acepack be directed?

To me.   I'll see what I can do. I get a probably related error on Solaris
(probably with these compilers, but I didn't do the compilation).

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

> 
> On a SPARC/Solaris 2.6 or 2.7 (SunOS 5.6 or 5.7) system running
> R-1.0.0 the avas example fails
>  > library(acepack)
>  > example(avas)
> 
>  avas> TWOPI <- 8 * atan(1)
> 
>  avas> x <- runif(200, 0, TWOPI)
> 
>  avas> y <- exp(sin(x) + rnorm(200)/2)
> 
>  avas> a <- avas(x, y)
> 
>  Process R bus error (core dumped) at Mon Mar 27 11:59:54 2000
> 
> The bus error occurs inside the Fortran subroutine smth, which is
> called by the subroutine rlsmo, which is called by the subroutine
> avas.  The compilers would have been gcc 2.95.2 and g77 GNU Fortran
> 0.5.25 19991024 (release).
> 
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status = 
>  major = 1
>  minor = 0.0
>  year = 2000
>  month = February
>  day = 29
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Tue Mar 28 19:24:09 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 28 Mar 2000 13:24:09 -0500
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: Kurt Hornik's message of "Mon, 27 Mar 2000 08:57:27 +0200"
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu> <871z561pcm.fsf@bavaria.ece.cmu.edu> <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at> <8766uens46.fsf@bavaria.ece.cmu.edu> <14554.25111.847983.270127@aragorn.ci.tuwien.a
Message-ID: <87r9cvgdh2.fsf@bavaria.ece.cmu.edu>


Kurt,

thanks for your help.  Your suggestion to use "LDCMD=cc SHLIBLD=cc"
for configure worked, I've got a working R again :-)

Other roadblocks I've encountered (and the reason I cc: r-devel):

-- ld/cc doesn't automatically include /usr/local/lib while gcc does.
This comes from the sytem installation here and has nothing to do with
R.  But having to add LIBS=-L/usr/local/lib may come as a surprise to
people who don't do this regularly.  Does configure check for the
existence of e.g. libz.a with cc or gcc?

-- the installation fails when I try to build in a special
subdirectory.  install-sh can't be found.  I've edited the Makefile to
use "build/tools/../$(INSTALL_DATA)".  (I guess build/$(INSTALL_DATA)
would be enough.)  I believe this worked on a sun.  Is this a
consequence of overriding install-sh on AIX in configure?

-- demo.so is not installed and demo(dyn.load) fails.  This is a
trivial matter if detected before 'rm -rf build' ...

-- there used to be a memory glitch when exiting R on AIX (and I think
Alpha).  This was fixed, but I now get this weird xmalloc statement
before startup:

$ echo "x <- 1; q()" | R BATCH
$ cat .R.Rout 

R : Copyright 2000, The R Development Core Team
Version 1.1.0 Under development (unstable) (March 27, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

[Previously saved workspace restored]

xmalloc: out of virtual memory
R> invisible(options(echo = TRUE))
R> x <- 1; q()


Thanks again for getting R running on AIX again,
  -tom



-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Mar 28 19:43:37 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 28 Mar 2000 13:43:37 -0500
Subject: [Rd] scale
Message-ID: <38E0FD59.CC4D2D16@bank-banque-canada.ca>

I am cleaning up a few pieces of my DSE library and I realized I am still
overriding scale to make it generic with the base version as the default. I use
scale methods for data objects which are not simple matrices. Could scale in the
base be made generic?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 28 20:06:15 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Mar 2000 21:06:15 +0200
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: Thomas J Vogels's message of "28 Mar 2000 13:24:09 -0500"
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu> <871z561pcm.fsf@bavaria.ece.cmu.edu> <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at> <8766uens46.fsf@bavaria.ece.cmu.edu> <14554.25111.847983.270127@aragorn.ci.tuwien.a
Message-ID: <x2og7ysymw.fsf@blueberry.kubism.ku.dk>

Thomas J Vogels <tov@ece.cmu.edu> writes:

> Alpha).  This was fixed, but I now get this weird xmalloc statement
> before startup:
> 
> $ echo "x <- 1; q()" | R BATCH
> $ cat .R.Rout 
> 
> R : Copyright 2000, The R Development Core Team
> Version 1.1.0 Under development (unstable) (March 27, 2000)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type    "?license" or "?licence" for distribution details.
> 
> R is a collaborative project with many contributors.
> Type    "?contributors" for a list.
> 
> Type    "demo()" for some demos, "help()" for on-line help, or
>         "help.start()" for a HTML browser interface to help.
> Type    "q()" to quit R.
> 
> [Previously saved workspace restored]
> 
> xmalloc: out of virtual memory
> R> invisible(options(echo = TRUE))
> R> x <- 1; q()

Hmm. What's in that previously saved workspace?  Can you zoom in a
little closer on where that error comes from?

(And note that the save bug is not actually fixed in R-devel yet -
will happen as soon as I merge in from the "release" branch)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Mar 29 07:30:54 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 29 Mar 2000 08:30:54 +0200 (MEST)
Subject: [Rd] scale
In-Reply-To: <38E0FD59.CC4D2D16@bank-banque-canada.ca>
References: <38E0FD59.CC4D2D16@bank-banque-canada.ca>
Message-ID: <14561.41758.916698.438279@lynne.ethz.ch>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> I am cleaning up a few pieces of my DSE library and I realized I
    PaulG> am still overriding scale to make it generic with the base
    PaulG> version as the default. I use scale methods for data objects
    PaulG> which are not simple matrices. Could scale in the base be made
    PaulG> generic?
it could..

      scale (x, center = TRUE, scale = TRUE)  

Is it okay to require the center and scale argument for all methods?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gs@statlab.uni-heidelberg.de  Wed Mar 29 13:27:58 2000
From: gs@statlab.uni-heidelberg.de (G. Sawitzki)
Date: Wed, 29 Mar 2000 14:27:58 +0200
Subject: [Rd] Porting R
Message-ID: <v03110700b507a5de3db8@[129.206.113.239]>

I am trying to get R 1.0 running on the Mac.

The main target is MacX. Anyone else working on that?

For the recent Macintosh system, I am trying to compile R using MachTen.
The R core compiles and runs without any changes, using the Unix make files.

The libraries give some problems, presumably due to handling of shared
libraries. It seems I am missing something to link. Before I spend my time
hunting it down, maybe someone has an immediate idea.
  gs.

 ==
my output:

make[4]: Entering directory `//local.src/R-1.0.0/src/library/ctest/src'
gcc -shared -Xlsharedlibrary -Xlexpall  -o ctest.so alnorm.o ansari.o
fexact.o kendall.o
 ks.o prho.o swilk.o  -L/usr/lib/gcc-lib/powerpc-apple-machten4/2.8.1 -lg2c -lm
ansari.o: In function `errmsg':
ansari.c:13: undefined reference to `Rf_error'
ansari.o: In function `w_init':
ansari.c:21: undefined reference to `R_chk_calloc'
...
ansari.c:84: undefined reference to `Rf_choose'
ansari.o: In function `pansari':
ansari.c:110: undefined reference to `Rf_choose'
fexact.o: In function `fexact':
...
kendall.c:24: undefined reference to `Rf_sign'
kendall.o: In function `ckendall':
kendall.c:99: undefined reference to `Rf_gammafn'
swilk.o: In function `swilk':
swilk.c:92: undefined reference to `Rf_qnorm5'
swilk.c:166: undefined reference to `Rf_sign'
...


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 29 14:20:30 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 2000 15:20:30 +0200
Subject: [Rd] Porting R
In-Reply-To: "G. Sawitzki"'s message of "Wed, 29 Mar 2000 14:27:58 +0200"
References: <v03110700b507a5de3db8@[129.206.113.239]>
Message-ID: <x2n1nhq5ep.fsf@blueberry.kubism.ku.dk>

"G. Sawitzki" <gs@statlab.uni-heidelberg.de> writes:

> I am trying to get R 1.0 running on the Mac.
.......
> The libraries give some problems, presumably due to handling of shared
> libraries. It seems I am missing something to link. Before I spend my time
> hunting it down, maybe someone has an immediate idea.
......
> make[4]: Entering directory `//local.src/R-1.0.0/src/library/ctest/src'
> gcc -shared -Xlsharedlibrary -Xlexpall  -o ctest.so alnorm.o ansari.o
> fexact.o kendall.o
>  ks.o prho.o swilk.o  -L/usr/lib/gcc-lib/powerpc-apple-machten4/2.8.1 -lg2c -lm
> ansari.o: In function `errmsg':
> ansari.c:13: undefined reference to `Rf_error'
> ansari.o: In function `w_init':
> ansari.c:21: undefined reference to `R_chk_calloc'

Hi Gunther,

I don't know whether it helps, but those unresolved references are
supposed to be there (they point to items in the main R binary) and be
resolved at dyn.load time. That is usually allowed when using the
-shared switch to gcc, although some systems (notably AIX and Win32)
require you use an explicit import library generated from the R
binary.

	-p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mc7414@mclink.it  Wed Mar 29 14:51:28 2000
From: mc7414@mclink.it (Stefano Iacus)
Date: Wed, 29 Mar 2000 15:51:28 +0200
Subject: [Rd] Porting R
In-Reply-To: <v03110700b507a5de3db8@[129.206.113.239]>
Message-ID: <200003291351.PAA06901@mail1.mclink.it>

Dear Sawiztki,

I'm also working on the porting of R 1.0 to MacOS. I'm in contact Ross
Ihaka and he thinks (and I agree) that we should use a cross platform
interface like  wxWindows (http://wxwindows.org). 

Let us know what you think about it.

Stefano

>I am trying to get R 1.0 running on the Mac.
>
>The main target is MacX. Anyone else working on that?
>
>For the recent Macintosh system, I am trying to compile R using MachTen.
>The R core compiles and runs without any changes, using the Unix make files.
>
>The libraries give some problems, presumably due to handling of shared
>libraries. It seems I am missing something to link. Before I spend my time
>hunting it down, maybe someone has an immediate idea.
>  gs.
>
> ==
>my output:
>
>make[4]: Entering directory `//local.src/R-1.0.0/src/library/ctest/src'
>gcc -shared -Xlsharedlibrary -Xlexpall  -o ctest.so alnorm.o ansari.o
>fexact.o kendall.o
> ks.o prho.o swilk.o  -L/usr/lib/gcc-lib/powerpc-apple-machten4/2.8.1
-lg2c -lm
>ansari.o: In function `errmsg':
>ansari.c:13: undefined reference to `Rf_error'
>ansari.o: In function `w_init':
>ansari.c:21: undefined reference to `R_chk_calloc'
>...
>ansari.c:84: undefined reference to `Rf_choose'
>ansari.o: In function `pansari':
>ansari.c:110: undefined reference to `Rf_choose'
>fexact.o: In function `fexact':
>...
>kendall.c:24: undefined reference to `Rf_sign'
>kendall.o: In function `ckendall':
>kendall.c:99: undefined reference to `Rf_gammafn'
>swilk.o: In function `swilk':
>swilk.c:92: undefined reference to `Rf_qnorm5'
>swilk.c:166: undefined reference to `Rf_sign'
>...
>
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gs@statlab.uni-heidelberg.de  Wed Mar 29 15:09:58 2000
From: gs@statlab.uni-heidelberg.de (G. Sawitzki)
Date: Wed, 29 Mar 2000 16:09:58 +0200
Subject: [Rd] Porting R
In-Reply-To: <x2n1nhq5ep.fsf@blueberry.kubism.ku.dk>
References: "G. Sawitzki"'s message of "Wed, 29 Mar 2000 14:27:58 +0200"
 <v03110700b507a5de3db8@[129.206.113.239]>
Message-ID: <v03110701b507bed61c1a@[129.206.113.239]>


>Hi Gunther,
>
>I don't know whether it helps, but those unresolved references are
>supposed to be there (they point to items in the main R binary) and be
>resolved at dyn.load time. That is usually allowed when using the
>-shared switch to gcc, although some systems (notably AIX and Win32)
>require you use an explicit import library generated from the R
>binary.
>
>	-p

.. so there may be already a prepared rule and config flag somewhere to
create this library? Which flag/option do I need?

 g.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar 29 15:31:06 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 29 Mar 2000 09:31:06 -0500
Subject: [Rd] scale
References: <38E0FD59.CC4D2D16@bank-banque-canada.ca> <14561.41758.916698.438279@lynne.ethz.ch>
Message-ID: <38E213AA.71514DDE@bank-banque-canada.ca>

Martin> Is it okay to require the center and scale argument for all
methods?

Unfortunately, no, not the way I have used it. (One of the ways I use it
is for a structure called TSdata that has two data matrices. I
eventually call the default with a center and scale for each matrix, but
the original call is scale(x, scale), where scale is a list with a
center and scale value for each matrix.) My methods always use the
argument scale, but not center.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 29 15:49:36 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 2000 16:49:36 +0200
Subject: [Rd] Porting R
In-Reply-To: "G. Sawitzki"'s message of "Wed, 29 Mar 2000 16:09:58 +0200"
References: <v03110700b507a5de3db8@[129.206.113.239]> <v03110701b507bed61c1a@[129.206.113.239]>
Message-ID: <x2k8ilq1a7.fsf@blueberry.kubism.ku.dk>

"G. Sawitzki" <gs@statlab.uni-heidelberg.de> writes:

> >Hi Gunther,
> >
> >I don't know whether it helps, but those unresolved references are
> >supposed to be there (they point to items in the main R binary) and be
> >resolved at dyn.load time. That is usually allowed when using the
> >-shared switch to gcc, although some systems (notably AIX and Win32)
> >require you use an explicit import library generated from the R
> >binary.
> >
> >	-p
> 
> .. so there may be already a prepared rule and config flag somewhere to
> create this library? Which flag/option do I need?

Yes, that is the question, but you need to either find someone who
knows machTen, or go through the man pages. Hmm, the following post
from comp.unix.machten doesn't bode too well (Mac-style dynload is
also discussed in
http://www.stat.umn.edu/~luke/xls/projects/dlbasics/dlbasics.html )

-----
 > in article 3852EB96.7A957BAA@uswest.net, Rob & Nancy Wade at rnwade@uswest.net
 wrote on 12/11/99 6:26 PM:
  
 > Anyone had any luck getting Tk installed on Machten?  I'm working with
 > Perl 5.005 and I can't compile with dynamic loading.
  
 Dynamic loading (in the usual Unix sense) doesn't work under MachTen.
 The closest to this is to use the shared libraries Mac-side; see pp.
 219-220 in the manual.
  

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Wed Mar 29 16:44:59 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 29 Mar 2000 10:44:59 -0500
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: Peter Dalgaard BSA's message of "28 Mar 2000 21:06:15 +0200"
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu> <871z561pcm.fsf@bavaria.ece.cmu.edu> <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at> <8766uens46.fsf@bavaria.ece.cmu.edu> <14554.25111.847983.270127@aragorn.ci.tuwien.a
Message-ID: <87r9ctzsp0.fsf@bavaria.ece.cmu.edu>


Peter,

ah, stupid me.  I've put the braces "back" into system.c to guard
write_history(), et voila, it works.  I was simply confused by the
error message showing up before the R prompt instead of the very
end...
Regards,
  -tom


Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Thomas J Vogels <tov@ece.cmu.edu> writes:
[snip]
> > xmalloc: out of virtual memory
> > R> invisible(options(echo = TRUE))
> > R> x <- 1; q()
> 
> Hmm. What's in that previously saved workspace?  Can you zoom in a
> little closer on where that error comes from?
> 
> (And note that the save bug is not actually fixed in R-devel yet -
> will happen as soon as I merge in from the "release" branch)

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gs@statlab.uni-heidelberg.de  Wed Mar 29 16:51:30 2000
From: gs@statlab.uni-heidelberg.de (G. Sawitzki)
Date: Wed, 29 Mar 2000 17:51:30 +0200
Subject: [Rd] Porting R
In-Reply-To: <x2k8ilq1a7.fsf@blueberry.kubism.ku.dk>
References: "G. Sawitzki"'s message of "Wed, 29 Mar 2000 16:09:58 +0200"
 <v03110700b507a5de3db8@[129.206.113.239]>
 <v03110701b507bed61c1a@[129.206.113.239]>
Message-ID: <v03110702b507d6429d3e@[129.206.113.239]>

At 16:49 +0200 29.03.2000, Peter Dalgaard BSA wrote:
#
>Yes, that is the question, but you need to either find someone who
>knows machTen, or go through the man pages.
Oh. I think I did both.

Hmm, the following post
>from comp.unix.machten doesn't bode too well (Mac-style dynload is
>also discussed in
>http://www.stat.umn.edu/~luke/xls/projects/dlbasics/dlbasics.html )
The relevant lines seem to be:
The Mac does not seem to allow a shared library to have unresolved symbols,
but you can handle references into an executable by linking the library
against the
executable. You also need to take some action to export external symbols;
fortunately this is easy. I have not yet explored what happens when files
are moved
around, search pat issues, and the like ****.

As a work around, I included the standard dynamic library in the core.
Seems to work.

Anyway there should not go too much effort into this. For now, MachTen is
only an intermediate step to go to MachX, which is the really interesting
thing.
 g.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Mar 29 17:13:45 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 29 Mar 2000 10:13:45 -0600
Subject: [Rd] A "stack" function
Message-ID: <6rwvmlrbye.fsf@franz.stat.wisc.edu>

I am using R in my undergraduate engineering statistics courses, in
which I am currently discussing one-way analysis of variance.  Many of
the data sets for the exercises or examples give the data in the form
on one column per treatment level.  To use the aov or lm functions
such data should be converted to one column with all the response
observations and a companion column with indicators of the treatment
level.

In Minitab this operation is called "stacking" columns and the command
to perform the operation is "stack".  I have written a similar function
for R.  Before taking the time to make it elegant and to document it,
I thought I would check if I have overlooked an existing way of doing
this.

Here is an example

> library(Devore5)
> data(ex10.09)
> boxplot(ex10.09)
> str(ex10.09)             # show the structure
`data.frame':	6 obs. of  4 variables:
 $ Wheat : num  5.2 4.5 6 6.1 6.7 5.8
 $ Barley: num  6.5 8 6.1 7.5 5.9 5.6
 $ Maize : num  5.8 4.7 6.4 4.9 6 5.2
 $ Oats  : num  8.3 6.1 7.8 7 5.5 7.2
> stack <- function(data)
+  data.frame(values = unlist(data),
+             lev = factor(rep(names(data), lapply(data, length))))

> stack(ex10.09)   # try it on the example
        values    lev
Wheat1     5.2  Wheat
Wheat2     4.5  Wheat
Wheat3     6.0  Wheat
Wheat4     6.1  Wheat
Wheat5     6.7  Wheat
Wheat6     5.8  Wheat
Barley1    6.5 Barley
Barley2    8.0 Barley
Barley3    6.1 Barley
Barley4    7.5 Barley
Barley5    5.9 Barley
Barley6    5.6 Barley
Maize1     5.8  Maize
Maize2     4.7  Maize
Maize3     6.4  Maize
Maize4     4.9  Maize
Maize5     6.0  Maize
Maize6     5.2  Maize
Oats1      8.3   Oats
Oats2      6.1   Oats
Oats3      7.8   Oats
Oats4      7.0   Oats
Oats5      5.5   Oats
Oats6      7.2   Oats
> fm1 <- lm(values ~ lev, stack(ex10.09))
> anova(fm1)
Analysis of Variance Table

Response: values
          Df  Sum Sq Mean Sq F value  Pr(>F)  
lev        3  8.9833  2.9944  3.9565 0.02293 *
Residuals 20 15.1367  0.7568                  
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 


-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Mar 29 17:16:37 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 29 Mar 2000 08:16:37 -0800 (PST)
Subject: [Rd] A "stack" function
In-Reply-To: <6rwvmlrbye.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.GSO.4.21.0003290814400.3570-100000@mail.biostat.washington.edu>

On 29 Mar 2000, Douglas Bates wrote:

> I am using R in my undergraduate engineering statistics courses, in
> which I am currently discussing one-way analysis of variance.  Many of
> the data sets for the exercises or examples give the data in the form
> on one column per treatment level.  To use the aov or lm functions
> such data should be converted to one column with all the response
> observations and a companion column with indicators of the treatment
> level.
> 
> In Minitab this operation is called "stacking" columns and the command
> to perform the operation is "stack".  I have written a similar function
> for R.  Before taking the time to make it elegant and to document it,
> I thought I would check if I have overlooked an existing way of doing
> this.
> 

It would be really nice if you could also do the reverse: take repeated
measurements in 'long' form and convert them into 'wide' form.
  In Stata both of these are available in the -reshape- command.  I don't
know any really simple way of doing it in R.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 29 17:42:05 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 2000 18:42:05 +0200
Subject: [Rd] A "stack" function
In-Reply-To: Thomas Lumley's message of "Wed, 29 Mar 2000 08:16:37 -0800 (PST)"
References: <Pine.GSO.4.21.0003290814400.3570-100000@mail.biostat.washington.edu>
Message-ID: <x28zz1pw2q.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> On 29 Mar 2000, Douglas Bates wrote:
> 
...
> > In Minitab this operation is called "stacking" columns and the command
> > to perform the operation is "stack".  I have written a similar function
> > for R.  Before taking the time to make it elegant and to document it,
> > I thought I would check if I have overlooked an existing way of doing
> > this.
> > 
> 
> It would be really nice if you could also do the reverse: take repeated
> measurements in 'long' form and convert them into 'wide' form.
>   In Stata both of these are available in the -reshape- command.  I don't
> know any really simple way of doing it in R.

Not really simple, but wouldn't something like
as.data.frame(tapply(x,f,as.vector)) do it? Hmmm... This seems to work;

> tt<-data.frame(c(tapply(ss$values,ss$lev,as.vector)))
> tt
  Barley Maize Oats Wheat
1    6.5   5.8  8.3   5.2
2    8.0   4.7  6.1   4.5
3    6.1   6.4  7.8   6.0
4    7.5   4.9  7.0   6.1
5    5.9   6.0  5.5   6.7
6    5.6   5.2  7.2   5.8

Re. stack(), wouldn't you want to stack over only a subset of columns,
while replicating all the remaining columns? There's some code in
subset() which might be used for selecting the columns.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Mar 29 17:37:29 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 29 Mar 2000 18:37:29 +0200
Subject: [Rd] pre summary: mapping of colornames into hsv?
In-Reply-To: <14560.48243.200487.325190@lynne.ethz.ch>
Message-ID: <000801bf999d$13c36170$a9021aac@joelschlaegel>



Hi Martin,
Great that you follow this. My original intention was to be able to
translate colornames to hsv because this would allow using colornames to cut
out a certain part of the colorwheel for colorcoding (HSV component H, see
my code below)

I think internally we might have colors represented as

Colornames, ColorIntegers, ColorHexcodes, ColorRGBs, ColorHSVs (ColorCMYs?)

however the R-user probably shouldn't see the internal ColorIntegers of the
C-code, as this might lead to confusion with the colornumbers resulting from
the palette settings.

So the R-user should see functions translating

ColorName2ColorHexcode() ColorHexcode2ColorRGB() and ColorRGB2ColorHSV()
and backwards
ColorHSV2ColorRGB() ColorRGB2ColorHexcode(), rather not
ColorHexcode2Colorname() as not every possible color is granted to have a
name.

Regards


Jens


P.S. the folowing function colorcode() I think is more general than
rainbow() in three aspects:
1) works also with not-equidistant colorcodings
2) works around the 'borders' of the colorwheel
3) works both directions along the colorwheel
With the above mentioned translation functions one could specify start= and
end= as colornames, which would make code more readable. Feel free to
include into R.

# 0 = red
# 1/6 = yellow
# 2/6 = green
# 3/6 = cyan
# 4/6 = blue
# 5/6 = violet
# go from red via yellow to green: start=0, stop=2/6
# go from green via yellow to red: start=2/6, stop=0
# go from green via cyan-blue-violet to red: start=2/6, stop=1
# go from red via violet-blue-cyan to green: start=0, stop=-4/6
colorcode <- function (p, start=0, end=2/6, s=1, v=1, ...)
{
   # make p 0..1
   r <- range(p)
   p <- (p - r[1])/diff(r)
   # wrap hue
   up <- start <= end
   start <- start %% 1
   end <- end %% 1
   if (up)
     if (start < end){
       h <- (start + p*(end-start)) %% 1
     }else{
       h <- (start + p*(1+end-start)) %% 1
     }
   else
     if (end < start){
       h <- (start - p*(start-end)) %% 1
     }else{
       h <- (start - p*(1+start-end)) %% 1
     }
   # round against bug if start=1 end=4/3 with p=seq(0, 1, 0.05)
   hsv( round(h, 5), s, v, ...)
}






> -----Original Message-----
> From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> Sent: Tuesday, March 28, 2000 4:07 PM
> To: jens.oehlschlaegel-akiyoshi@mdfactory.de
> Cc: R-core@stat.math.ethz.ch
> Subject: Re: [Rd] pre summary: mapping of colornames into hsv?
>
>
> >>>>> <jens.oehlschlaegel-akiyoshi@mdfactory.de> writes on
> Feb.28, 2000 :
>
>     Jens> etc/colors.big doesn't do the job currently, as:
>
>     Jens> colors.big maps 455 names to rgb in S syntax
>     Jens> rgb.txt maps 657 names to rgb in C syntax, but
> unlike colors() it has
>     Jens> mixed upper and lower case
>
>     Jens> The C source has the information twice
>     Jens> rgb.c maps 657 names to rgb (mixed upper and lower case)
>     Jens> graphics.c maps 657 names tp colorstrings (lower case only)
>
>     Jens> internal name2col() and R colors() accesses those
> in graphics.c
>
>     Jens> I tend to create a R representation which copies
> the info from
>     Jens> graphics.c, unless someone plans to export internal
> name2col() to
>     Jens> become an official R function, which of course
> would be a less
>     Jens> redundant solution.
>
> and a day later, Jens provided
>
>   .ColorDataBase <-  matrix(c(
>       "white",		"#FFFFFF",
>       "aliceblue",	"#F0F8FF",
>       "antiquewhite",	"#FAEBD7",
>       "antiquewhite1",	"#FFEFDB",
>       "antiquewhite2",	"#EEDFCC",
>       "antiquewhite3",	"#CDC0B0",
>       .............
>   ))
>
> Now, we should stand back for a moment and
> think about what functionality we should provide on the R level.
>
> I think we should use the internal accessor functions to ColorDataBase
> (in graphics.c) in order ensure consistency not to further
> duplicate the
> information.
>
> {{Guido: Jens is right that src/gnuwin32/graphapp/rgb.c
> 	 kind of replicates the table already available in
> src/main/graphics.c
>   should we separate out this definition from graphics.c
>   into a global src/main/rgb.c or something else
>   after which (most of) graphapp/rgb.c wouldn't be needed anymore ?
>   -- or just declare the tables in Graphics.h and use them in
> graphapp as well?
> }}
>
>
> Potential useful functions {from graphics.c} to be made
> available on the R
> level are
>
> hsv2rgb()   (h,s,v) |-> (r,g,b)
>
> rgb2hsv() does *NOT* exist in graphics.c ;
> 	  is it possible at all (i.e. is hsv <--> rgb 1:1 ?)}
>
> rgb2col(rgb_ch) |-> uint { := unsigned int }
> name2col  (ch)  |-> uint
> number2col(ch)  |-> uint
> str2col   (ch)  |-> uint {calling one of the above 3 functions !}
>
> RGB2rgb(r,g,b)  |-> #RRGGBB string
> col2name(uint)  |-> name from colors() or #RRGGBB string
>
> -------
> I would tend to provide only
>
> * str2col()  returning an R integer() {instead of uint;  the
> R color model
> 				      only needs the low order 24 bits,
> 				      see beginning of Graphics.h }
> * col2name()
>
> at first, but one might also want
>
>     uint <-->  (r,g,b) <-->  (h,s,v)
>
> o Further ideas ?
> o Are 24bit colors okay?
>   gnuwin32's graphapp seems to use "transparency"
>   additionally to 3x8 bit RGB {didn't look closely}
>
>
> Martin
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar 29 19:26:27 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 29 Mar 2000 13:26:27 -0500
Subject: [Rd] R CMD build
Message-ID: <38E24AD3.3B592196@bank-banque-canada.ca>

I've been trying "R CMD build" to build my packages because of the
various nice checks it does. Here are some questions/comments/problems.

1/ I get a WARNING about RD files without alias for (what seems like)
all my Rd files. I'm not sure if this is related to the fact that all my
functions are in one .R file.

2/ I get a warning about undocumented objects for all the specific
methods of generic functions. In many cases only the generic is
documented, so the warning is correct, but there are so many of them
that it tends to obscure more important warnings.

3/ It doesn't work with bundles.

4/ Checking for undocumented objects fails with an ERROR when checking
an (undocumented) assignment object ( "input.series.names<-" ).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 29 19:47:37 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 29 Mar 2000 19:47:37 +0100 (BST)
Subject: [Rd] R CMD build
In-Reply-To: <38E24AD3.3B592196@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10003291935170.23270-100000@auk.stats>

On Wed, 29 Mar 2000, Paul Gilbert wrote:

> I've been trying "R CMD build" to build my packages because of the
> various nice checks it does. Here are some questions/comments/problems.
> 
> 1/ I get a WARNING about RD files without alias for (what seems like)
> all my Rd files. I'm not sure if this is related to the fact that all my
> functions are in one .R file.

Well, are there \alias entries in the Rd files?  (The layout of the .R file
is immaterial: in the installed code all R functions are always in one
file.) `build' expects a \alias as well as a \name.

If the \alias are there, we may be hitting again problems with the 
different dialects of egrep and sed.  AFAIK the current version
behaves itself on Solaris 2.6/7 and on POSIX platforms.

> 2/ I get a warning about undocumented objects for all the specific
> methods of generic functions. In many cases only the generic is
> documented, so the warning is correct, but there are so many of them
> that it tends to obscure more important warnings.

The convention is to put a \alias for the method in the help file for the
generic.  R-core are divided on this point!  At least now the indices
(e.g. in HTML help and the LaTeX manual) will try to omit the methods.

> 3/ It doesn't work with bundles.

True, but it will check every package in a bundle.  The only bundle
I know of is VR, and that is built by a highly specific script.  If
(as your comment suggests) there is a need to build other bundles, we
can look into extending `build'.

> 4/ Checking for undocumented objects fails with an ERROR when checking
> an (undocumented) assignment object ( "input.series.names<-" ).

I think it works if you document it, though, and the error is correct,
surely?  Do you mean it gives ERROR and then stops rather than warns?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar 29 21:07:21 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 29 Mar 2000 15:07:21 -0500
Subject: [Rd] R CMD build
References: <Pine.GSO.4.05.10003291935170.23270-100000@auk.stats>
Message-ID: <38E26279.BC2A6400@bank-banque-canada.ca>

>Well, are there \alias entries in the Rd files?
No. I guess that would be it. Should I have an empty \alias entry if the
object does not have an alias, or should should I just live with the
warnings?

>The convention is to put a \alias for the method in the help file for
the generic.
Ok, but I guess this won't work if the generic is the base and my method
is in my library?

>If (as your comment suggests) there is a need to build other bundles,
we
>can look into extending `build'.
No, I don't think it is a priority. I was just point it out in case it
was suppose to work with bundles and I was hitting a bug. I'll run it to
test the packages in the bundle and roll up the bundle after.

>> 4/ Checking for undocumented objects fails with an ERROR when
checking
>> an (undocumented) assignment object ( "input.series.names<-" ).
>I think it works if you document it, though, and the error is correct,
>surely?  Do you mean it gives ERROR and then stops rather than warns?

Yes, it should warn me about this, but it gives ERROR and stops. (If I
run it with my makefile it returns code 1.) The message is:
in eval(expr, envir, enclos) : couldn't find function
"input.series.names<-"

Thanks,
Paul




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Wed Mar 29 21:34:04 2000
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Thu, 30 Mar 2000 08:34:04 +1200
Subject: [Rd] home in Sept
In-Reply-To: <v03110700b507a5de3db8@[129.206.113.239]>; from G. Sawitzki on Wed, Mar 29, 2000 at 02:27:58PM +0200
References: <v03110700b507a5de3db8@[129.206.113.239]>
Message-ID: <20000330083404.W26661@stat1.stat.auckland.ac.nz>

Hi Guenther,
  Are you going to be home in Sept? Can I still come and visit?
 I finally have made some decision about where I am going (and withdrew
 from the crazy thing at ETH). I'm off to Harvard some time in the fall,

  regards to you and Heidi,
    robert

-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              phone : (64-9) 3737-599 ext 3946          | 
| Senior Lecturer               fax :   (64-9) 3737-018                   |
| Department of Statistics      office : Room 206 Maths/Physics           |
| University of Auckland	email : rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Wed Mar 29 21:47:30 2000
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Thu, 30 Mar 2000 08:47:30 +1200
Subject: [Rd] home in Sept
In-Reply-To: <20000330083404.W26661@stat1.stat.auckland.ac.nz>; from Robert Gentleman on Thu, Mar 30, 2000 at 08:34:04AM +1200
References: <v03110700b507a5de3db8@[129.206.113.239]> <20000330083404.W26661@stat1.stat.auckland.ac.nz>
Message-ID: <20000330084730.Y26661@stat1.stat.auckland.ac.nz>

Well, boy do I feel stupid; I was sure that I had set that to 
mail only to Guenther.
Please disregard my impertinent comments regarding ETH, I apologize
especially to Martin for making them.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              phone : (64-9) 3737-599 ext 3946          | 
| Senior Lecturer               fax :   (64-9) 3737-018                   |
| Department of Statistics      office : Room 206 Maths/Physics           |
| University of Auckland	email : rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 29 22:41:39 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 2000 23:41:39 +0200
Subject: [Rd] home in Sept
In-Reply-To: Robert Gentleman's message of "Thu, 30 Mar 2000 08:47:30 +1200"
References: <v03110700b507a5de3db8@[129.206.113.239]> <20000330083404.W26661@stat1.stat.auckland.ac.nz> <20000330084730.Y26661@stat1.stat.auckland.ac.nz>
Message-ID: <x2bt3x314c.fsf@blueberry.kubism.ku.dk>

Robert Gentleman <rgentlem@stat.auckland.ac.nz> writes:

>  I will not put both feet in my mouth.
>  I will not trust *&%^$& mailers.

<grin> Good thing you didn't put `!!!' after that or Martin would have
had to approve it manually....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 29 22:53:16 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 2000 23:53:16 +0200
Subject: [Rd] home in Sept
In-Reply-To: Peter Dalgaard BSA's message of "29 Mar 2000 23:41:39 +0200"
References: <v03110700b507a5de3db8@[129.206.113.239]> <20000330083404.W26661@stat1.stat.auckland.ac.nz> <20000330084730.Y26661@stat1.stat.auckland.ac.nz> <x2bt3x314c.fsf@blueberry.kubism.ku.dk>
Message-ID: <x28zz130kz.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

[Well, never mind]

Aargh! Another one bites the dust... Please disregard note intended
for Rob and intended to be humourous. Failed on both counts,
obviously. Talking about putting your feet, hands, arms, and legs in
your mouth...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar 30 07:14:18 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 30 Mar 2000 07:14:18 +0100 (BST)
Subject: [Rd] R CMD build
In-Reply-To: <38E26279.BC2A6400@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10003300709540.23994-100000@auk.stats>

On Wed, 29 Mar 2000, Paul Gilbert wrote:

> >Well, are there \alias entries in the Rd files?
> No. I guess that would be it. Should I have an empty \alias entry if the
> object does not have an alias, or should should I just live with the
> warnings?

You should have an alias for each function documented there, even
if there is only one. The object name is itself an alias.  The \name field
is the help file name, not the object name (although 90+% of them are the
same), and it is the \alias's that gives the object names,

> >The convention is to put a \alias for the method in the help file for
> the generic.
> Ok, but I guess this won't work if the generic is the base and my method
> is in my library?

Sure (and that is part of the debate). Either ignore them, or have
a .Rd with just a very brief description of these (e.g. just their
usages).

> >> 4/ Checking for undocumented objects fails with an ERROR when
> checking
> >> an (undocumented) assignment object ( "input.series.names<-" ).
> >I think it works if you document it, though, and the error is correct,
> >surely?  Do you mean it gives ERROR and then stops rather than warns?
> 
> Yes, it should warn me about this, but it gives ERROR and stops. (If I
> run it with my makefile it returns code 1.) The message is:
> in eval(expr, envir, enclos) : couldn't find function
> "input.series.names<-"

Looks like a bug, then.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Mar 30 10:31:56 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 30 Mar 2000 11:31:56 +0200 (CEST)
Subject: [Rd] forwarded message from Griffith Feeney
Message-ID: <14563.7948.655308.693311@galadriel.ci.tuwien.ac.at>


--8sD16rPb6u
Content-Type: text/plain; charset=us-ascii
Content-Description: message body text
Content-Transfer-Encoding: 7bit


Griffith,

I'm forwarding the mail to r-devel.

Best,
Fritz


--8sD16rPb6u
Content-Type: message/rfc822
Content-Description: forwarded message
Content-Transfer-Encoding: 7bit

Received: from isildur.ci.tuwien.ac.at (root@isildur.ci.tuwien.ac.at [128.131.51.43])
	by fangorn.ci.tuwien.ac.at (8.9.3/8.9.3/Debian/GNU) with ESMTP id VAA22421
	for <wwwadmin@cran.r-project.org>; Wed, 29 Mar 2000 21:35:20 +0200
Received: from hawaii.rr.com (hnlmail2.hawaii.rr.com [24.25.227.35])
	by isildur.ci.tuwien.ac.at (8.9.3/8.9.3/Debian/GNU) with ESMTP id VAA14801
	for <wwwadmin@cran.r-project.org>; Wed, 29 Mar 2000 21:35:12 +0200
Received: from homebrew.hawaii.rr.com ([24.31.70.87]) by hawaii.rr.com  with Microsoft SMTPSVC(5.5.1877.447.44);
	 Wed, 29 Mar 2000 09:35:46 -1000
Message-Id: <3.0.5.32.20000329093550.007be910@pop-server.hawaii.edu>
X-Sender: gfeeney@pop-server.hawaii.edu
X-Mailer: QUALCOMM Windows Eudora Light Version 3.0.5 (32)
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
From: Griffith Feeney <gfeeney@hawaii.edu>
To: wwwadmin@isildur.ci.tuwien.ac.at
Subject: problem posting to r-help list
Date: Wed, 29 Mar 2000 09:35:50 -1000

I've tried twice to post the following message to the R-help list, but it
doesn't seem to get through. I pick up my mail at pop-server.hawaii.edu
(University of Hawaii) but work at home with cable internet connection so
send mail via smtp-server.hawaii.rr.com (because smpt-server.hawaii.edu
won't let me send messages coming from hawaii.rr.com). I use
gfeeney@hawaii.edu as my email address and normally have this as the return
address. Posting to R-help, however, messages are bounced unless I change
the return to address to feeneyg001@hawaii.rr.com. With this change they
don't bounce, but they don't seem to get through.



Attempting to build R-1.0.0 from source I get the following.

F:\rw1000\src\gnuwin32>make BUILD=MINGW32
mkdir -p ../../bin
F:/GCC-29~1.2/BIN/MAKE.EXE -C ./fixed
MAKE.EXE[1]: Entering directory `F:/rw1000/src/gnuwin32/fixed'
MAKE.EXE[1]: Nothing to be done for `all'.
MAKE.EXE[1]: Leaving directory `F:/rw1000/src/gnuwin32/fixed'
cp -pr unzip ../..
rm -f ../../unzip/*.h
Syntax error: Unterminated quoted string
F:\GCC-29~1.2\BIN\MAKE.EXE: *** [console.d] Error 2

By way of background, I am running Windows 95 4.00.950 and had, following
rw1000\src\gnuwin32\install file: 

1 installed mingw32 gcc-2.95.2 (MSVCRT) and put gcc-2.95.2\bin in the path;
2 installed cygwin user tools and put cygwin-b20\h-i586-cygwin32\bin in the
path;
3 [Perl5 was already installed and in the path];
4 'set MAKE_MODE=UNIX';
5 untarred R-1.0.0.tgz in f:\ and changed directory name from R-1.0.0 to
rw1000;
6 left rw1000\src\gnuwin32\MkRules unchanged;
7 edited rw1000\src\gnuwin32\Makefile to put WINHELP=NO;
8 created rw1000\unzip\ and copied unzip32.dll from binary distribution
into it;
9 ran make BUILD=MINGW32 with the result shown above.

The result ("Syntax error: Unterminated quoted string ... MAKE.EXE: ***
[console.d] Error 2")is the same whether I use the DOS shell or the cygwin
bash shell.

I'm just learning how to build from source and am insufficiently familiar
with make and makefiles to diagnose what's wrong and how to proceed. The
Note 2 statement that "the Makefiles do not work unchanged on all the
possible combinations of tools, compilers and OSes" is noted. Suggestions
on what to try next would be greatly appreciated.


--8sD16rPb6u--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Mar 30 11:18:51 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 30 Mar 2000 11:18:51 +0100 (BST)
Subject: [Rd] Re: problem posting to r-help list
Message-ID: <200003301018.LAA14214@toucan.stats.ox.ac.uk>

You are using the wrong make.  Please read the instructions very carefully.
You _must_ use the cygwin make with the supplied Makefiles. As INSTALL says:

   You will also
   need suitable versions of at least make, sh, rm, sed, (g)awk, mkdir,
   echo, cp, cut, diff, grep, egrep, pwd, expr and cat; we use those from
   the cygwin distribution (http://sourceware.cygnus.com/cygwin and
   several mirrors).


> From: Griffith Feeney <gfeeney@hawaii.edu>
> To: wwwadmin@isildur.ci.tuwien.ac.at
> Subject: problem posting to r-help list
> Date: Wed, 29 Mar 2000 09:35:50 -1000
> 
> Attempting to build R-1.0.0 from source I get the following.
> 
> F:\rw1000\src\gnuwin32>make BUILD=MINGW32
> mkdir -p ../../bin
> F:/GCC-29~1.2/BIN/MAKE.EXE -C ./fixed

Note, this is the mingw32 make (which I did not think was in the 
base mingw32 distribution).

> MAKE.EXE[1]: Entering directory `F:/rw1000/src/gnuwin32/fixed'
> MAKE.EXE[1]: Nothing to be done for `all'.
> MAKE.EXE[1]: Leaving directory `F:/rw1000/src/gnuwin32/fixed'
> cp -pr unzip ../..
> rm -f ../../unzip/*.h
> Syntax error: Unterminated quoted string
> F:\GCC-29~1.2\BIN\MAKE.EXE: *** [console.d] Error 2
> 
> By way of background, I am running Windows 95 4.00.950 and had, following
> rw1000\src\gnuwin32\install file: 
> 
> 1 installed mingw32 gcc-2.95.2 (MSVCRT) and put gcc-2.95.2\bin in the path;
> 2 installed cygwin user tools and put cygwin-b20\h-i586-cygwin32\bin in the
> path;

Put that ahead of 1 in your path!


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Mar 30 11:31:48 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 30 Mar 2000 11:31:48 +0100 (BST)
Subject: [Rd] AIX fails on startup with R-1.0.0
Message-ID: <200003301031.LAA18620@toucan.stats.ox.ac.uk>


> To: Kurt.Hornik@ci.tuwien.ac.at
> Cc: R-devel <r-devel@stat.math.ethz.ch>
> Subject: Re: [Rd] AIX fails on startup with R-1.0.0
> X-URI: http://www.ece.cmu.edu/~tov
> From: Thomas J Vogels <tov@ece.cmu.edu>
> Date: 28 Mar 2000 13:24:09 -0500

> Other roadblocks I've encountered (and the reason I cc: r-devel):
> 
> -- ld/cc doesn't automatically include /usr/local/lib while gcc does.
> This comes from the sytem installation here and has nothing to do with
> R.  But having to add LIBS=-L/usr/local/lib may come as a surprise to
> people who don't do this regularly.  Does configure check for the
> existence of e.g. libz.a with cc or gcc?

This is a common problem, and if libz is shared, building may work but
running may not (as you need /usr/local/lib in the shared library path).

BTW, recent gcc's (e.g. 2.95.2) seem to include prefix/lib not
/usr/local/lib which may come as even more of a surprise.
On Solaris 2.6 I need 

CPPFLAGS=-I/usr/local/include
LIBS="-L/usr/local/lib -R/usr/local/lib"

when using gcc 2.95.2, installed in /ext/gcc-2.95.2, and I always need the
second to cope with /usr/local/lib/libz.so.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 31 18:21:21 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 31 Mar 2000 19:21:21 +0200 (CEST)
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: <87r9cvgdh2.fsf@bavaria.ece.cmu.edu>
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu>
 <871z561pcm.fsf@bavaria.ece.cmu.edu>
 <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at>
 <8766uens46.fsf@bavaria.ece.cmu.edu>
 <14554.25111.847983.270127@aragorn.ci.tuwien.ac.at>
 <87u2hxl28l.fsf@bavaria.ece.cmu.edu>
 <200003270657.IAA01178@aragorn.ci.tuwien.ac.at>
 <87r9cvgdh2.fsf@bavaria.ece.cmu.edu>
Message-ID: <14564.56977.803778.800788@aragorn.ci.tuwien.ac.at>

>>>>> Thomas J Vogels writes:

> Kurt,

> thanks for your help.  Your suggestion to use "LDCMD=cc SHLIBLD=cc"
> for configure worked, I've got a working R again :-)

And got me confused.

Ideally, I'd like to use the C compiler (rather than ld) for linking the
main binary as well as shared libs, so overriding should only occur if
there is a good reason.  I assume that there was one for aix, but from
the above maybe it is gone now?

Users of current r-devel snapshots on AIX, can you confirm that

	MAINLD=cc SHLIBLD=cc /path/to/configure
	make

works o.k.?  (Or actually, use your C compiler rather than `cc' ...)

> Other roadblocks I've encountered (and the reason I cc: r-devel):

> -- ld/cc doesn't automatically include /usr/local/lib while gcc does.
> This comes from the sytem installation here and has nothing to do with
> R.  But having to add LIBS=-L/usr/local/lib may come as a surprise to
> people who don't do this regularly.

> Does configure check for the existence of e.g. libz.a with cc or gcc?
It uses the C compiler specified.

Well, LIBS is needed when you have things in `non-standard' locations.
Of course your mileage may vary on the definition of non-standard :-)

Is there anything I/configure could do about this?  (Note that I don't
think that unconditionally adding /usr/local/lib to LIBS is a good
idea.) 

> -- the installation fails when I try to build in a special
> subdirectory.  install-sh can't be found.  I've edited the Makefile to
> use "build/tools/../$(INSTALL_DATA)".  (I guess build/$(INSTALL_DATA)
> would be enough.)  I believe this worked on a sun.  Is this a
> consequence of overriding install-sh on AIX in configure?

I need more info on that.  configure does two fixing steps after using
the standard autoconf code for determining a BSD compatible install: if
we end up with the script, then make sure its path is absolute.  I think
this is needed and should work.  Secondly, on platforms where the code
was known to give something that would not work, use the script in any
case.  Maybe the latter can be avoided with the most recent autoconf
code.

What exactly is the failure you observe?

> -- demo.so is not installed and demo(dyn.load) fails.  This is a
> trivial matter if detected before 'rm -rf build' ...

Why is that?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Mar  1 11:13:03 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Wed, 1 Mar 2000 12:13:03 +0100 (MET)
Subject: [Rd] "is.qr" definition (PR#465)
Message-ID: <200003011113.MAA25485@pubhealth.ku.dk>

Might it be possible to tighten the definition of "is.qr".  I
noticed that after I mistakenly typed

example(lm)  # make lm object named lm.D9
qr.Q(lm.D9)

which exhausted the heap memory and produced two warning
messages.  As an object of class "lm" has a "qr" component,
"is.qr" failed to detect that "lm.D9" was not a "qr" object.  The
obvious thing might be to tighten the definition of "is.qr",
perhaps

"is.qr" <-
function(x) all(c("qr", "rank", "qraux", "pivot") %in% names(x))

And may I add my congratulations to the core group.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Patched
 major = 0
 minor = 99.0
 year = 2000
 month = February
 day = 9
 language = R

Search Path:
 .GlobalEnv, package:mva, package:patches, Autoloads, package:base


Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Mar  1 14:43:18 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 1 Mar 2000 15:43:18 +0100 (MET)
Subject: [Rd] "is.qr" definition (PR#465)
In-Reply-To: <200003011113.MAA25485@pubhealth.ku.dk>
References: <200003011113.MAA25485@pubhealth.ku.dk>
Message-ID: <14525.11398.674344.77690@lynne.ethz.ch>

>>>>> "JonR" == J C Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> Might it be possible to tighten the definition of "is.qr".  I
    JonR> noticed that after I mistakenly typed

    JonR> example(lm) # make lm object named lm.D9
    JonR>  qr.Q(lm.D9)

    JonR> which exhausted the heap memory and produced two warning
    JonR> messages.  As an object of class "lm" has a "qr" component,
    JonR> "is.qr" failed to detect that "lm.D9" was not a "qr" object.
indeed.
yes, it should be tightened.

    JonR> The obvious thing might be to tighten the definition of "is.qr",

    JonR> perhaps

    JonR> "is.qr" <- function(x) all(c("qr", "rank", "qraux", "pivot") %in%
    JonR> names(x))

Just checked: 
 S-plus 5.1 checks for  qr and qraux only (but not just for the presence of
 the names, also !is.null(.) as we now do for $qr.

It makes sense to have this a FAST function since it's called quite a few
times in some calculations... maybe change current
    is.qr <- function(x) is.null(x$qr)
to
    is.qr <- function(x) is.null(x$qr) && !is.null(x$rank) && !is.null(x$qraux)

The current behavior is "according to documentation" so that would have to
be updated as well.

    JonR> And may I add my congratulations to the core group.

thank you 

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bhoel@server.python.net  Wed Mar  1 17:12:57 2000
From: bhoel@server.python.net (bhoel@server.python.net)
Date: Wed, 1 Mar 2000 18:12:57 +0100 (MET)
Subject: [Rd] Re: R-1.0.0 is released (PR#466)
Message-ID: <200003011712.SAA01327@pubhealth.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> I've rolled up R-1.0.0.tgz a short while ago. 
> 
I've build R-1.0.0 on my

>uname -a
Linux pchoel 2.2.14 #3 Mit Jan 5 08:57:39 MET 2000 i686 unknown

box. Calling "make check" fails with 

...
make[4]: Entering directory `/opt/src/devel/R-1.0.0/tests/Examples'
updating base-Ex.R ...
make[5]: Entering directory `/opt/src/devel/R-1.0.0/src/library'
 >>> Building/Updating help pages for package `base'
     Formats: text example 
make[5]: Leaving directory `/opt/src/devel/R-1.0.0/src/library'
running code in base-Ex.R ...
../../bin/R --vanilla < base-Ex.R > base-Ex.Rout
make[4]: *** [base-Ex.Rout] Error 1
...

and 

>tail tests/Examples/base-Ex.Rout
> 
> cut(rep(1,5),4)#-- dummy
[1] (0.9995,1] (0.9995,1] (0.9995,1] (0.9995,1] (0.9995,1]
Levels:  (0.999,0.9995] (0.9995,1] (1,1.0005] (1.0005,1.001] 
> tx0 <- c(9, 4, 6, 5, 3, 10, 5, 3, 5)
> x <- rep(0:8, tx0)
> tx <- table(x)
> all(tx == tx0)
Error in all(tx == tx0) : dim<- length of dims do not match the length of object
Execution halted

Don't shure what I should think about it. 

my compiler is:

>gcc --version
2.95.2

R is compiled using the

"-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro -march=pentiumpro -fschedule-insns2"

compiler switches. I used 

./configure --with-g77 --enable-blas_risc --enable-readline --with-x

for configuring.

Cheers

Berthold

-- 
bhoel@starship.python.net / http://starship.python.net/crew/bhoel/
        It is unlawful to use this email address for unsolicited ads
        (USC Title 47 Sec.227). I will assess a US$500 charge for
        reviewing and deleting each unsolicited ad.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar  1 19:27:43 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 1 Mar 2000 20:27:43 +0100 (MET)
Subject: [Rd] Re: [R] Re: R-1.0.0 is released (PR#467)
Message-ID: <200003011927.UAA01880@pubhealth.ku.dk>

bhoel@server.python.net (Berthold Höllmann) writes:

> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
> 
> > I've rolled up R-1.0.0.tgz a short while ago. 
> > 
> I've build R-1.0.0 on my
> 
> >uname -a
> Linux pchoel 2.2.14 #3 Mit Jan 5 08:57:39 MET 2000 i686 unknown
> 
> box. Calling "make check" fails with 
....
> > all(tx == tx0)
> Error in all(tx == tx0) : dim<- length of dims do not match the length of object
> Execution halted
> 
> Don't shure what I should think about it. 
> 
> my compiler is:
> 
> >gcc --version
> 2.95.2
> 
> R is compiled using the
> 
> "-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro -march=pentiumpro -fschedule-insns2"
> 
> compiler switches. I used 
> 
> ./configure --with-g77 --enable-blas_risc --enable-readline --with-x
> 
> for configuring.

That's a pretty heavy set of optimization options you're using there!

Basically, there are two possibilities:

1) You've triggered a compiler bug
2) You've triggered a bug in R

In either case, you'll have to dig deeper and see if you can catch the
exact spot where things go wrong. You might start R with the debugger,
run the base-Ex.R with it while having a breakpoint set at the error
message you are getting. But before that try running the example that
triggers the bug by itself and see if the bug is still tickled.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar  1 19:40:48 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Mar 2000 20:40:48 +0100
Subject: [Rd] Re: [R] Re: R-1.0.0 is released (PR#467)
In-Reply-To: p.dalgaard@biostat.ku.dk's message of "Wed, 1 Mar 2000 20:27:43 +0100 (MET)"
References: <200003011927.UAA01880@pubhealth.ku.dk>
Message-ID: <x266v6cwcf.fsf@blueberry.kubism.ku.dk>

p.dalgaard@biostat.ku.dk writes:

...and notice that it is a very bad idea to mail to both r-help and
r-bugs. Anyone who answers the one on r-help without resetting the
Cc's will generate a new PR# , like I just did!

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu Mar  2 10:07:39 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Thu, 02 Mar 2000 11:07:39 +0100 (CET)
Subject: [Rd] Re: R-1.0.0 is released (PR#466)
In-Reply-To: <200003011712.SAA01327@pubhealth.ku.dk>
Message-ID: <XFMail.000302110739.plummer@iarc.fr>

On 01-Mar-00 bhoel@server.python.net wrote:
> R is compiled using the
> 
> "-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro
> -march=pentiumpro -fschedule-insns2"
> 
> compiler switches. I used 
> 
> ./configure --with-g77 --enable-blas_risc --enable-readline --with-x
> 
> for configuring.

I can't help noticing that you are configuring for a RISC optimized BLAS
library on an Intel x86 processor.  I have no idea if this is serious,
but it seems a bit odd.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu Mar  2 10:41:12 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Thu, 02 Mar 2000 11:41:12 +0100 (CET)
Subject: [Rd] Mathlib
Message-ID: <XFMail.000302114112.plummer@iarc.fr>

First of all I would like to join the chorus of approval over the release
of R 1.0.0.  It really is an excellent piece of software. I'm sure you
will astonish us again with Omega.

I have a query about Mathlib.  It is such a nice collection of functions
that it would be nice to use it in other software, not necessarily related
to R.  Is it possible to build Mathlib separately, and/or install the
shared object and the header file in a more public place?

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Mar  2 11:04:39 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 2 Mar 2000 11:04:39 +0000 (GMT)
Subject: [Rd] Mathlib
Message-ID: <200003021104.LAA06377@toucan.stats.ox.ac.uk>


> X-Priority: 3 (Normal)
> Date: Thu, 02 Mar 2000 11:41:12 +0100 (CET)
> From: Martyn Plummer <plummer@iarc.fr>
> To: R-devel@stat.math.ethz.ch
> Subject: [Rd] Mathlib
> 
> First of all I would like to join the chorus of approval over the release
> of R 1.0.0.  It really is an excellent piece of software. I'm sure you
> will astonish us again with Omega.
> 
> I have a query about Mathlib.  It is such a nice collection of functions
> that it would be nice to use it in other software, not necessarily related
> to R.  Is it possible to build Mathlib separately, and/or install the
> shared object and the header file in a more public place?

It has been possible. Note that the header file has a switch 

/*-- Mathlib as part of R --  undefine this for standalone : */
#define MATHLIB_IN_R

which controls whether R error handling is used.

Now, I suspect that it may not be totally in a state where it can be
used separately in 1.0.0, as this may well not have been tested 
recently. It did work at some stage between 0.90.1 and 0.99.0, as
I tested it during the API changes, but there have been a lot
of changes since, and at least two of those (log1p and pnorm5) have
failed in the standalone case when I tried just now.

The other problem is that some careful configuring would be needed for
the settings of e.g. ISNAN.

Is it worth trying to set up a configure script and Makefile.in to build
a standalone libnmath.a?   I suspect Martyn is suggesting that it is?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Mar  2 11:39:02 2000
From: gb@stat.umu.se (gb@stat.umu.se)
Date: Thu, 2 Mar 2000 12:39:02 +0100 (CET)
Subject: [Rd] Optimized blas?
In-Reply-To: <XFMail.000302110739.plummer@iarc.fr>
Message-ID: <Pine.LNX.4.10.10003021232510.10772-100000@pc16.stat.umu.se>

On Thu, 2 Mar 2000, Martyn Plummer wrote:

> On 01-Mar-00 bhoel@server.python.net wrote:
> > R is compiled using the
> > 
> > "-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro
> > -march=pentiumpro -fschedule-insns2"
> > 
> > compiler switches. I used 
> > 
> > ./configure --with-g77 --enable-blas_risc --enable-readline --with-x
> > 
> > for configuring.
> 
> I can't help noticing that you are configuring for a RISC optimized BLAS
> library on an Intel x86 processor.  I have no idea if this is serious,
> but it seems a bit odd.

Talking about that, is there an x86 optimized (for Linux and/or NT)
BLAS around somewhere?

Göran
----------------------------------------------------------
 Göran Broström                      tel: +46 90 786-5223
 Department of Statistics            fax: +46 90 786-6614
 Umeå University                                         
 SE-90187 Umeå, Sweden              email: gb@stat.umu.se
                                                        
 http://www.stat.umu.se/egna/gb    ftp://capa.stat.umu.se
----------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Mar  2 13:52:01 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 02 Mar 2000 07:52:01 -0600
Subject: [Rd] Optimized blas?
In-Reply-To: gb@stat.umu.se's message of "Thu, 2 Mar 2000 12:39:02 +0100 (CET)"
References: <Pine.LNX.4.10.10003021232510.10772-100000@pc16.stat.umu.se>
Message-ID: <qxpzoshscn2.fsf@verdi.stat.wisc.edu>

>>>>> "gb" == gb  <gb@stat.umu.se> writes:

  >> I can't help noticing that you are configuring for a RISC
  >> optimized BLAS library on an Intel x86 processor.  I have no idea
  >> if this is serious, but it seems a bit odd.

  gb> Talking about that, is there an x86 optimized (for Linux and/or
  gb> NT) BLAS around somewhere?

You can try atlas (http://www.netlib.org/atlas/). You will have to
download the source and build it on your machine if you want it to
work optimally. The problem with that is that it does not build the
shared libraries by default and the whole build process is rather
complicated. Also, you will have to patch the R-1.0.0 configure.in file
(I am attaching the patch below) and then run autoconf to generate the
configure file.

Even after you do all these, the performance benefit is not great. R
currently uses only level 1 blas and the most significant atlas
optimizations are for level 3 (and level 2 to some extant). I do not
think that it is worth the effort.

Note that this patch for autoconf is a hack borrowed from a hack on
the octave configure.in and I have tested this only on a debian x86
system.

Saikat

========================================================================
--- configure.in	Thu Mar  2 07:27:13 2000
+++ configure.in	Thu Mar  2 07:34:18 2000
@@ -126,6 +126,11 @@
     fi],
   use_blas_risc=true)
 
+AC_ARG_WITH(fastblas,
+  [  --with-fastblas         use an optimized BLAS library (if available)],
+  [ use_fastblas=${withval} ],
+  use_fastblas=true)
+
 AC_ARG_WITH(dxml,
   [  --with-dxml             use DXML library (if available)],
   [ if test "${withval}" = no; then
@@ -352,7 +357,42 @@
 if ${use_dxml}; then
   AC_CHECK_LIB(dxml, main, FLIBS="-ldxml ${FLIBS}" BLAS="")
 fi
-if test -n "${BLAS}" && ${use_blas}; then
+
+# ----------------------------------------------------------------------
+# Checks for BLAS and LAPACK libraries:
+
+# name of Fortran dgemm function to check for (depends upon F77 compiler
+# name-mangling scheme):
+if test "$r_cv_prog_f77_append_underscore" = "yes"; then
+  dgemm_func=dgemm_
+else
+  dgemm_func=dgemm
+fi
+
+# remember current FLIBS, so we can check if any libs were found below.
+blas_save_FLIBS="${FLIBS}"
+if test ${use_fastblas} = no; then
+  blas_save_FLIBS="different from $LIBS so tests fail below"
+elif test ${use_fastblas} != "yes"; then
+  # user specified a BLAS library to try on the command line
+  AC_CHECK_LIB($use_fastblas, $dgemm_func, 
+    [ BLAS="" FLIBS="-l$use_fastblas $FLIBS"], , ${FLIBS})
+fi
+
+if test "${blas_save_FLIBS}" = "${FLIBS}"; then
+  # Checks for ATLAS BLAS library:
+  AC_CHECK_LIB(atlas, ATL_xerbla,
+      [ FLIBS="-latlas ${FLIBS}"], , $FLIBS)
+  if test "${blas_save_FLIBS}" != "${FLIBS}"; then
+    # check for other atlas libs:
+    AC_CHECK_LIB(cblas, cblas_dgemm,
+      [ FLIBS="-lcblas ${FLIBS}"
+	AC_CHECK_LIB(f77blas, $dgemm_func, 
+	  [ BLAS="" FLIBS="-lf77blas ${FLIBS}"],
+	  [ FLIBS="{blas_save_FLIBS}"], $FLIBS)],
+	[ FLIBS="{blas_save_FLIBS}"], $FLIBS)
+  fi
+elif test -n "${BLAS}" && ${use_blas}; then
   AC_CHECK_LIB(blas, main,
     [ FLIBS="-lblas ${FLIBS}" BLAS=""
       if ${use_blas_risc}; then

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Mar  2 14:43:50 2000
From: gb@stat.umu.se (gb@stat.umu.se)
Date: Thu, 2 Mar 2000 15:43:50 +0100 (CET)
Subject: [Rd] R and lapack/linpack
In-Reply-To: <qxpzoshscn2.fsf@verdi.stat.wisc.edu>
Message-ID: <Pine.LNX.4.10.10003021516240.11160-100000@pc16.stat.umu.se>

On 2 Mar 2000, Saikat DebRoy wrote:

> >>>>> "gb" == gb  <gb@stat.umu.se> writes:
> 
>   >> I can't help noticing that you are configuring for a RISC
>   >> optimized BLAS library on an Intel x86 processor.  I have no idea
>   >> if this is serious, but it seems a bit odd.
> 
>   gb> Talking about that, is there an x86 optimized (for Linux and/or
>   gb> NT) BLAS around somewhere?
> 
> You can try atlas (http://www.netlib.org/atlas/). You will have to
> download the source and build it on your machine if you want it to
> work optimally. The problem with that is that it does not build the
> shared libraries by default and the whole build process is rather
> complicated. Also, you will have to patch the R-1.0.0 configure.in file
> (I am attaching the patch below) and then run autoconf to generate the
> configure file.
> 
> Even after you do all these, the performance benefit is not great. R
> currently uses only level 1 blas and the most significant atlas
> optimizations are for level 3 (and level 2 to some extant). I do not
> think that it is worth the effort.
[snip]

Thank you for the information. It looks as if it is of no big concern.
However, I can report that I found BLAS and LAPACK rpms as contribs for
RedHat, which is my brand of Linux. Maybe they are optimized.

That leads to a follow-up question about LAPACK. I am maintaining 
a larger, standalone  C  program, which uses (C)LAPACK and (C)BLAS 
(for a Newton-Raphson algorithm). I am currently working with 
transforming the  C  program into an  R  package. As I understands it,
R uses LINPACK and not LAPACK (why? historical reasons?), and I have
two options: (1) throw out LAPACK and use LINPACK supplied with  R,
or (2) keep the clapack routines I need in the C code of the  R 
library. 

I have tried (2), and it works, of course, but I am somehow tempted
by (1). Any recommendations?

Göran
----------------------------------------------------------
 Göran Broström                      tel: +46 90 786-5223
 Department of Statistics            fax: +46 90 786-6614
 Umeå University                                         
 SE-90187 Umeå, Sweden              email: gb@stat.umu.se
                                                        
 http://www.stat.umu.se/egna/gb    ftp://capa.stat.umu.se
----------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bacon@aerodyne.com  Thu Mar  2 15:36:46 2000
From: bacon@aerodyne.com (bacon@aerodyne.com)
Date: Thu, 2 Mar 2000 10:36:46 -0500 (EST)
Subject: [Rd] Re: R-1.0.0 is released (PR#466)
In-Reply-To: <XFMail.000302110739.plummer@iarc.fr>
Message-ID: <200003021527.KAA01933@aerodyne.com>

On  2 Mar, Martyn Plummer wrote:
>  On 01-Mar-00 bhoel@server.python.net wrote:
> > R is compiled using the
> > 
> > "-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro
> > -march=pentiumpro -fschedule-insns2"
> > 
> > compiler switches. I used 
> > 
> > ./configure --with-g77 --enable-blas_risc --enable-readline --with-x
> > 
> > for configuring.
>  
>  I can't help noticing that you are configuring for a RISC optimized BLAS
>  library on an Intel x86 processor.  I have no idea if this is serious,
>  but it seems a bit odd.
>  

Since this feature was added for PowerPC Linux distributions at my
request, I'll comment on this.  I would say that it is very unlikely to
be of any help, but it probably won't hurt.  The configure script will
check to see if libblas_risc can be located.  If it can't be found, it
won't be used.  Configure won't even look for it unless you request it
with --enable-blas_risc.

Furthermore, I don't believe that configure will actually use
libblas_risc unless you also --enable-blas.  I could be wrong in that
regard.  Using --enable-blas_risc could implicitly --enable-blas as
well. It's been many months since I wrote that configure option.  I do
know that configure will test if linking -lblas works first.  If that
fails, it won't even bother with -lblas_risc.  

Hope this helps,

-- 
Fred Bacon

==============================================================================
Aerodyne Research, Inc.                        Phone:  (978) 663-9500 ext. 273
45 Manning Rd.                                   FAX:  (978) 663-4918
Billerica, MA 01821-3976                        http://www.aerodyne.com
==============================================================================
"Oh my God!  Space aliens!  Don't eat me, I have a wife and kids!  Eat them."
                                                             -- Homer Simpson


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bacon@aerodyne.com  Thu Mar  2 15:52:55 2000
From: bacon@aerodyne.com (bacon@aerodyne.com)
Date: Thu, 2 Mar 2000 10:52:55 -0500 (EST)
Subject: [Rd] Optimized blas?
In-Reply-To: <Pine.LNX.4.10.10003021232510.10772-100000@pc16.stat.umu.se>
Message-ID: <200003021543.KAA07526@aerodyne.com>

On  2 Mar, gb@stat.umu.se wrote:
>  On Thu, 2 Mar 2000, Martyn Plummer wrote:
>  
>  Talking about that, is there an x86 optimized (for Linux and/or NT)
>  BLAS around somewhere?

There is a superb package called ATLAS (Automatically Tuned Linear
Algebra Subroutines) which is available from 

http://www.netlib.org/atlas

A word of warning, building this runs an extensive series of tests on
your machine to configure ATLAS properly for your processor and and
cache.  The slower the machine, the longer the tests will take to
complete.  But the performance boost is incredible.  Large
matrix-matrix computations are 8-10 time faster than with the reference
blas from netlib.

Check it out.

-- 
Fred Bacon

==============================================================================
Aerodyne Research, Inc.                        Phone:  (978) 663-9500 ext. 273
45 Manning Rd.                                   FAX:  (978) 663-4918
Billerica, MA 01821-3976                        http://www.aerodyne.com
==============================================================================
"Oh my God!  Space aliens!  Don't eat me, I have a wife and kids!  Eat them."
                                                             -- Homer Simpson


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Mar  2 16:20:42 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 2 Mar 2000 08:20:42 -0800 (PST)
Subject: [Rd] Optimized blas?
In-Reply-To: <Pine.LNX.4.10.10003021232510.10772-100000@pc16.stat.umu.se>
Message-ID: <Pine.GSO.4.21.0003020816360.29932-100000@mail.biostat.washington.edu>

On Thu, 2 Mar 2000 gb@stat.umu.se wrote:

> 
> Talking about that, is there an x86 optimized (for Linux and/or NT)
> BLAS around somewhere?

There is a Pentium optimised BLAS around (from the ASCI project),see
http://www.beowulf.org/listarchives/beowulf/1998/03/0099.html
 Another poster has mentioned ATLAS. 

However, an optimised BLAS makes disappointing little difference to R,
partly because we don't spend that much time in BLAS and partly because we
only use the lowest-level routines.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Mar  2 20:59:40 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 02 Mar 2000 15:59:40 -0500
Subject: [Rd] congratulations and thanks
Message-ID: <38BED63C.C01199C5@bank-banque-canada.ca>

In the chorus, I would like to say congratulations and thanks to the core team.
As usual, I'm a bit out of sync.  After four year I especially like the part
about "the release of 1.0.0 marks that the base language and the API for
extension writers will remain stable" (even if I am already asking for changes).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Fri Mar  3 09:10:59 2000
From: hothorn@ci.tuwien.ac.at (hothorn@ci.tuwien.ac.at)
Date: Fri, 3 Mar 2000 10:10:59 +0100 (MET)
Subject: [Rd] using function names as parameters (PR#469)
Message-ID: <200003030910.KAA15280@pubhealth.ku.dk>

When using a function name as parameter, here date, the following happends: 

R> foo <- function(date=date()) cat(date, "\n")
R> foo()
Error in cat(date, "\n") : recursive default argument reference

R> foo("Good Morning!")
Good Morning!

works.

Torsten

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar  3 11:55:21 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Mar 2000 12:55:21 +0100
Subject: [Rd] using function names as parameters (PR#469)
In-Reply-To: hothorn@ci.tuwien.ac.at's message of "Fri, 3 Mar 2000 10:10:59 +0100 (MET)"
References: <200003030910.KAA15280@pubhealth.ku.dk>
Message-ID: <x2og8wi7yu.fsf@blueberry.kubism.ku.dk>

hothorn@ci.tuwien.ac.at writes:

> When using a function name as parameter, here date, the following happends: 
> 
> R> foo <- function(date=date()) cat(date, "\n")
> R> foo()
> Error in cat(date, "\n") : recursive default argument reference

This is not a bug. Default arguments are evaluated in the frame of the
called function, so when the date variable is requested and no actual
argument was supplied, R tries to evaluate the default expression, but
that involved the variable "date" again. If you pass an argument, the
default expression is never evaluated and the problem does not arise.

Similarly a definition like

function(x=y, y=x) x + y

is asking for trouble if both x and y are left unspecified on the call.

[This has nothing to do with passing functions as parameters, by the
way] 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Mar  3 12:10:19 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Fri, 3 Mar 2000 13:10:19 +0100 (MET)
Subject: [Rd] using function names as parameters (PR#469)
Message-ID: <200003031210.NAA18706@pubhealth.ku.dk>

>>>>> On 03 Mar 2000 12:55:21 +0100,
>>>>> Peter Dalgaard BSA (PDB) wrote:

PDB> hothorn@ci.tuwien.ac.at writes:
>> When using a function name as parameter, here date, the following happends: 
>> 
R> foo <- function(date=date()) cat(date, "\n")
R> foo()
>> Error in cat(date, "\n") : recursive default argument reference

PDB> This is not a bug. Default arguments are evaluated in the frame of the
PDB> called function, so when the date variable is requested and no actual
PDB> argument was supplied, R tries to evaluate the default expression, but
PDB> that involved the variable "date" again. If you pass an argument, the
PDB> default expression is never evaluated and the problem does not arise.

PDB> Similarly a definition like

PDB> function(x=y, y=x) x + y

PDB> is asking for trouble if both x and y are left unspecified on the call.

PDB> [This has nothing to do with passing functions as parameters, by the
PDB> way] 

[Taken to r-core]

Hmm, I asked Torsten to mail the bug report ... I first thought along
your lines and I would agree if I pass ``date'' as default, but we
have ``date()'' as default argument which is the return value of the
function, no?

IMO evaluating the default expression comes down to evaluating
``date <- date()'' which is perfectly legal ...

BTW, BB can do it:

S> foo <- function(date=date()) cat(date, "\n")
S> foo()
Fri Mar  3 09:49:20 MET 2000 
Warning messages:
  looking for function "date", ignored local non-function in: foo()


.f



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar  3 13:26:14 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 3 Mar 2000 14:26:14 +0100 (MET)
Subject: [Rd] using function names as parameters (PR#469)
Message-ID: <200003031326.OAA20028@pubhealth.ku.dk>

Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

> Hmm, I asked Torsten to mail the bug report ... I first thought along
> your lines and I would agree if I pass ``date'' as default, but we
> have ``date()'' as default argument which is the return value of the
> function, no?
> 
> IMO evaluating the default expression comes down to evaluating
> ``date <- date()'' which is perfectly legal ...
> 
> BTW, BB can do it:
> 
> S> foo <- function(date=date()) cat(date, "\n")
> S> foo()
> Fri Mar  3 09:49:20 MET 2000 
> Warning messages:
>   looking for function "date", ignored local non-function in: foo()

However,

> foo <- function(date=date) date             
> foo() 
Error in foo(): Recursive occurrence of default argument "date"
Dumped

So S-plus only works by assuming that the local variable is not a
function (*before* evaluating its default)! R is being cleaner and
more consistent..

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Mar  3 16:07:37 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 3 Mar 2000 17:07:37 +0100 (CET)
Subject: [Rd] StatDataML
Message-ID: <14527.58185.135296.986847@galadriel.ci.tuwien.ac.at>


Hi,

we have a first draft of R functions reading/writing data to XML files
including a rather general DTD ... which borrows heavily from the data
types of a certain programming language :-)

The basic idea is to create an XML standard for data exchange,
together with import/export functions for as many applications as
possible. We here will need R, Matlab & Octave for our research
program, but the idea is of course to create a general standard.

After looking in several other applications we think that all the data
types there can easily be represented using S constructs (i.e., arrays
and lists together with attributes) ... so why make life complicated
and invent something new.

Of course this only applies to the low-level representaion ... the
real thing will come next when one starts defining higher level
classes, this step we have avoided so far because one needs the
low-level things first to have something to play with.

A short description of the DTD and an R package with import/export
functions can be found at

	http://www.ci.tuwien.ac.at/~leisch/R

(Modulo some bugs) R data objects can be saved/restored without loss
of information. We don't intend to cover functions or models yet.

All comments and ideas are appreciated! This is just a proposal and
anything can still be changed ... 

Best,
Fritz

PS: Almost all the work has been done by Torsten Hothorn, I'm just
writing the email ;-)

-- 
-------------------------------------------------------------------
                        Friedrich  Leisch 
Institut für Statistik                     Tel: (+43 1) 58801 10715
Technische Universität Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstraße 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Fri Mar  3 16:15:46 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Fri, 3 Mar 2000 11:15:46 -0500 (EST)
Subject: [Rd] StatDataML
Message-ID: <200003031615.LAA12407@jessie.research.bell-labs.com>



Great. Will take a closer look.

Did you take a look at the DTDs in Omegahat - $OMEGA_HOME/XML/DTDs?
There are some things in there that might prove useful. Because
of its reference-oriented style, things like connected/linked observations,
etc. arise more naturally than in S-like languages. 

D.





-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar  3 16:34:29 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 3 Mar 2000 08:34:29 -0800 (PST)
Subject: [Rd] backup signal
In-Reply-To: <001501bf82a6$f1001640$b1eb92c1@unirioja.es>
Message-ID: <Pine.GSO.4.21.0003030833040.20733-100000@mail.biostat.washington.edu>

On Tue, 29 Feb 2000, Manuel Castejon Limas wrote:

> Hi all Is there any signal that one can send in UNIX to R so that it
> stops its execution in a safe way, (like save.image()  and q() ) so
> that the enviroment is not erased, instead of kill -9 somePID

This has been implemented in the current development version, so that
SIGUSR1 quits and saves, SIGUSR2 quits and saves without running
on.exit() or .Last().

However, the signals may get repossessed for exception handling at some
point in the future, so it would be unwise to plan for this feature
remaining.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From David James <dj@research.bell-labs.com>  Fri Mar  3 21:36:36 2000
From: David James <dj@research.bell-labs.com> (David James)
Date: Fri, 3 Mar 2000 16:36:36 -0500 (EST)
Subject: [Rd] Re: [Omega-devel] StatDataML
Message-ID: <200003032136.QAA20959@jessie.research.bell-labs.com>

Hi,

I just had a very quick look at the StatDataML proposal --- nice
work!   At the risk of showing my ignorance, I want to mention 
my first impressions.

My first impression is that defining datasets in terms of
arrays and list is a bit too high a level.  What about 
simpler vectors, scalars? (I know that R/S don't have scalars,
but other systems/applications do.)  Can we think of a core
set of "basic" data types (factors, strings, integers, etc.)
from which to build on other, possibly recursive types (perhaps
similar to corba's IDL basic data types or S's datadump?).  
Would it make sense to imagine, say xlispstat/python/java applications 
reading  and interpreting an StatDataML document without serious difficulties? 

My gut feeling (which is often wrong) is that the DTD should make
the data self-describing:  e.g., the factor "machineId" has 
levels (or defining set) "Stepper1", "Stepper2", ... "Stepper20", 
eventhough the particular dataset at hand has only a
subset of those.  Similarly, perhaps allowing  units and classes
to be included in the dataset (in the case of currency, it is certainly 
a number, perhaps single precision, perhaps not, with specific units 
dollars, euros, pesos, etc.)

More long-term, how about application-defined data?  Application may have
it's own set of data objects that fully exploits contextual 
information that could be extremely useful to capture and 
communicate.  Also, do the data have to be in ASCII format?  What about 
(possibly mime-encoded) images? sound?

As I mentioned, these are questions coming from my lack of experience
with XML, but may be worth raising now better than later :-)

David A. James
Statistics Research, Room 2C-253            Phone:  (908) 582-3082       
Bell Labs, Lucent Technologies              Fax:    (908) 582-3340
Murray Hill, NJ 09794-0636
-----------------------------------------------------------------------------

> From: Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
> MIME-Version: 1.0
> Content-Transfer-Encoding: 8bit
> Date: Fri, 3 Mar 2000 17:07:37 +0100 (CET)
> To: omega-devel@omegahat.org, r-devel@R-project.org, 
Erich.Neuwirth@univie.ac.at, hothorn@ci.tuwien.ac.at, baier@ci.tuwien.ac.at, 
Christian.Buchta@wu-wien.ac.at
> Subject: [Omega-devel] StatDataML
> X-Mailman-Version: 1.0rc2
> List-Id: Developers of Omega <omega-devel.www.omegahat.org>
> X-BeenThere: omega-devel@www.omegahat.org
> 
> 
> Hi,
> 
> we have a first draft of R functions reading/writing data to XML files
> including a rather general DTD ... which borrows heavily from the data
> types of a certain programming language :-)
> 
> The basic idea is to create an XML standard for data exchange,
> together with import/export functions for as many applications as
> possible. We here will need R, Matlab & Octave for our research
> program, but the idea is of course to create a general standard.
> 
> After looking in several other applications we think that all the data
> types there can easily be represented using S constructs (i.e., arrays
> and lists together with attributes) ... so why make life complicated
> and invent something new.
> 
> Of course this only applies to the low-level representaion ... the
> real thing will come next when one starts defining higher level
> classes, this step we have avoided so far because one needs the
> low-level things first to have something to play with.
> 
> A short description of the DTD and an R package with import/export
> functions can be found at
> 
> 	http://www.ci.tuwien.ac.at/~leisch/R
> 
> (Modulo some bugs) R data objects can be saved/restored without loss
> of information. We don't intend to cover functions or models yet.
> 
> All comments and ideas are appreciated! This is just a proposal and
> anything can still be changed ... 
> 
> Best,
> Fritz
> 
> PS: Almost all the work has been done by Torsten Hothorn, I'm just
> writing the email ;-)
> 
> -- 
> -------------------------------------------------------------------
>                         Friedrich  Leisch 
> Institut für Statistik                     Tel: (+43 1) 58801 10715
> Technische Universität Wien                Fax: (+43 1) 58801 10798
> Wiedner Hauptstraße 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
> A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
>      PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
> -------------------------------------------------------------------
> 
> 
> _______________________________________________
> Omega-devel maillist  -  Omega-devel@www.omegahat.org
> http://www.omegahat.org/mailman/listinfo/omega-devel


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Mar  3 22:01:31 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 03 Mar 2000 17:01:31 -0500
Subject: [Rd] StatDataML
References: <14527.58185.135296.986847@galadriel.ci.tuwien.ac.at>
Message-ID: <38C0363B.DDB2AEA6@bank-banque-canada.ca>

Fritz

Could you compare/contrast this a bit with NetCDF and  the UN/EDIFACT General
Statistical Message (GESMES ). I know almost nothing about NetCDF, but from the
little I know it seems to attempt to do a similar thing. I know a bit more about
Gesmes, and there seems to be a lot of overlap with what you are proposing.

Ten years ago, given the number of governments and organization involved, it
would have been easy to say go ahead and do something that we can use sooner (in
fact, we did). However, Gesmes is relatively advanced now, with several groups
working on implementations of a least parts of it, and governments committed to
exchanging data using it. A GNU implementation would be a real benefit to a lot
of tax payers around the world, not to mention the statistics community.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Sat Mar  4 10:55:58 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Sat, 4 Mar 2000 11:55:58 +0100 (CET)
Subject: [Rd] StatDataML
In-Reply-To: <38C0363B.DDB2AEA6@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.21.0003041145450.8684-100000@boromir.ci.tuwien.ac.at>


On Fri, 3 Mar 2000, Paul Gilbert wrote:

> Fritz
> 
> Could you compare/contrast this a bit with NetCDF and  the UN/EDIFACT General
> Statistical Message (GESMES ). I know almost nothing about NetCDF, but from the
> little I know it seems to attempt to do a similar thing. I know a bit more about
> Gesmes, and there seems to be a lot of overlap with what you are proposing.
> 

I just had a short (!) look at the description of the data model and the
user guide for GESMES at http://www.ecb.int/stats/gesmes/gesmes.htm

For me it looks biased to banking problems and very dataframe/array
centric.  

> Ten years ago, given the number of governments and organization involved, it
> would have been easy to say go ahead and do something that we can use sooner (in
> fact, we did). 

The problem I see is that GESMES would probably be to complicated, think
of exchanging data via CORBA, which is easy (and, in our opinion,
efficient) with XML structured strings. 

> However, Gesmes is relatively advanced now, with several groups
> working on implementations of a least parts of it, and governments committed to
> exchanging data using it. A GNU implementation would be a real benefit to a lot
> of tax payers around the world, not to mention the statistics community.
> 

agree, free software is always a benefit :-) 

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Sat Mar  4 13:41:51 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Sat, 4 Mar 2000 13:41:51 +0000 (GMT)
Subject: [Rd] StatDataML
In-Reply-To: <14527.58185.135296.986847@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.20.0003041325420.12572-100000@laplace>

Hi Fritz,

Interesting proposal!  If I may second your comment "Note: Move dimension
and/or dimnames to properties list?", which I think ties in with David
James's point.  My feeling is that it be better to operate at a slightly
lower level and represent array-type constructions as properties of simple
numeric or character vectors, ie very much the way that R does anyway.  
Presumably it would be possible to make a property a recursive structure,
such as a list of dimnames?  (I am not very XML-literate.)

If I might also comment on Paul Gilbert's point about existing alternative
standards.  Our experience with one of our commerical partners suggests
that parsers for R dput objects into XML will be written, if they do not
already exist.  Whatever its shortcomings, XML seems to be here to stay,
and I think the development of a set of R tools at this stage will allow
us to attempt some degree of standardisation.

Best wishes, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcneney@cs.sfu.ca  Sat Mar  4 18:23:52 2000
From: mcneney@cs.sfu.ca (Brad McNeney)
Date: Sat, 4 Mar 2000 10:23:52 -0800 (PST)
Subject: [Rd] problem with glm (PR#452)
In-Reply-To: <x2snyogipc.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.OSF.4.21.0003041022320.263210-100000@smahlt.math.sfu.ca>

I looked into the glm problem some more. Seems to be a memory problem that
occurs just after garbage collection. The easiest way for me to
reproduce  the error is in lapply. I take a list and ask lapply to provide
the descriptive stat summary. I do this several times with the same list.
Most often it gives the correct summary, but just after allocSExp calls
R_gc, one of the summaries for a list element will be NULL. 

E.g for a data frame dat with five columns I get the following (having added
print statements in summary.default and in allocSExp just after the test
for whether gc is necessary):

> lapply(as.list(dat), summary, maxsum = maxsum)
[1] "exiting summary.default"
R_FreeSEXP == NULL  
[1] "exiting summary.default"
[1] "exiting summary.default"
[1] "exiting summary.default"
[1] "exiting summary.default"
$Delta
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   0.00    1.00    1.00    1.19    2.00    2.00 

$D
NULL

$R
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   0.00    1.00    1.00    0.86    1.00    1.00 

$V
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
0.004552 0.740700 1.575000 1.754000 3.205000 3.390000 

$X
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    0.0     0.0     0.5     0.5     1.0     1.0 


I don't know if the following is relevant, but for some reason I've found 
I can avoid this particular problem if I make a small change in lapply in 
its main loop.  Around line 50 of apply.c:

    PROTECT(ans = allocVector(VECSXP, n));
    for(i = 0; i < n; i++) {
        INTEGER(ind)[0] = i + 1;
        VECTOR(ans)[i] = eval(R_fcall, rho);
    }

if I change it to make an assignment to a
temporary variable first everything seems to work fine:

    PROTECT(ans = allocVector(VECSXP, n));
    for(i = 0; i < n; i++) {
        INTEGER(ind)[0] = i + 1;
        tem = eval(R_fcall, rho);
        VECTOR(ans)[i] = tem;
    }

hasn't given me any NULLs yet. 



On 20 Feb 2000, Peter Dalgaard BSA wrote:

> Brad McNeney <mcneney@cs.sfu.ca> writes:
> 
> > I'll see what I can do about getting a more reproducible error. 
> > 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Mar  5 00:03:15 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Mar 2000 01:03:15 +0100
Subject: [Rd] problem with glm (PR#452)
In-Reply-To: Brad McNeney's message of "Sat, 4 Mar 2000 10:23:52 -0800 (PST)"
References: <Pine.OSF.4.21.0003041022320.263210-100000@smahlt.math.sfu.ca>
Message-ID: <x2putauvuk.fsf@blueberry.kubism.ku.dk>

Brad McNeney <mcneney@cs.sfu.ca> writes:

> I don't know if the following is relevant, but for some reason I've found 
> I can avoid this particular problem if I make a small change in lapply in 
> its main loop.  Around line 50 of apply.c:
> 
>     PROTECT(ans = allocVector(VECSXP, n));
>     for(i = 0; i < n; i++) {
>         INTEGER(ind)[0] = i + 1;
>         VECTOR(ans)[i] = eval(R_fcall, rho);
>     }
> 
> if I change it to make an assignment to a
> temporary variable first everything seems to work fine:
> 
>     PROTECT(ans = allocVector(VECSXP, n));
>     for(i = 0; i < n; i++) {
>         INTEGER(ind)[0] = i + 1;
>         tem = eval(R_fcall, rho);
>         VECTOR(ans)[i] = tem;
>     }
> 
> hasn't given me any NULLs yet. 

Now that is pretty darn odd... Looks quite a bit like a compiler bug.
Those two pieces of code should be equivalent as far as I can see.

One thing that you might do: objdump -dS apply.o allows you to see
what code the compiler generates for the two cases. Also, of course,
you can try reducing the level of optimization.


Alternatively, the mere addition of "tem" changes the local memory use
of that function so that something that got clobbered before doesn't
get clobbered now.

The effect doesn't seem to be present on Intels:

> dfr<-do.call("data.frame",lapply(1:100,function(i)rnorm(100)))
> any(sapply(lapply(dfr,summary),is.null))
[1] FALSE

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Mar  5 10:04:44 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 5 Mar 2000 11:04:44 +0100
Subject: [Rd] Mathlib
In-Reply-To: <200003021104.LAA06377@toucan.stats.ox.ac.uk>
References: <200003021104.LAA06377@toucan.stats.ox.ac.uk>
Message-ID: <200003051004.LAA25042@fangorn.ci.tuwien.ac.at>

>>>>> Prof Brian Ripley writes:

>> X-Priority: 3 (Normal)
>> Date: Thu, 02 Mar 2000 11:41:12 +0100 (CET)
>> From: Martyn Plummer <plummer@iarc.fr>
>> To: R-devel@stat.math.ethz.ch
>> Subject: [Rd] Mathlib
>> 
>> First of all I would like to join the chorus of approval over the release
>> of R 1.0.0.  It really is an excellent piece of software. I'm sure you
>> will astonish us again with Omega.
>> 
>> I have a query about Mathlib.  It is such a nice collection of functions
>> that it would be nice to use it in other software, not necessarily related
>> to R.  Is it possible to build Mathlib separately, and/or install the
>> shared object and the header file in a more public place?

> It has been possible. Note that the header file has a switch 

> /*-- Mathlib as part of R --  undefine this for standalone : */
> #define MATHLIB_IN_R

> which controls whether R error handling is used.

> Now, I suspect that it may not be totally in a state where it can be
> used separately in 1.0.0, as this may well not have been tested 
> recently. It did work at some stage between 0.90.1 and 0.99.0, as
> I tested it during the API changes, but there have been a lot
> of changes since, and at least two of those (log1p and pnorm5) have
> failed in the standalone case when I tried just now.

> The other problem is that some careful configuring would be needed for
> the settings of e.g. ISNAN.

> Is it worth trying to set up a configure script and Makefile.in to build
> a standalone libnmath.a?   I suspect Martyn is suggesting that it is?

In a way, this had always been the plan, so I would say yes it is worth
the trouble.

One issue is the naming issue.  I'd still recommend `Rmath'.  We should
also try to standardized the header file procedure.  (E.g., by declaring
#include <Rmath.h> as the official way ...)

Most likely, this would require setting up a second configure.in in the
Rmath (nmath) srcdir, but that shouldn't be to hard ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Mar  6 11:27:25 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 6 Mar 2000 12:27:25 +0100 (CET)
Subject: [Rd] Re: [Omega-devel] StatDataML
In-Reply-To: <200003032136.QAA20959@jessie.research.bell-labs.com>
References: <200003032136.QAA20959@jessie.research.bell-labs.com>
Message-ID: <14531.38429.238420.501197@galadriel.ci.tuwien.ac.at>


>>>>> On Fri, 3 Mar 2000 16:36:36 -0500 (EST),
>>>>> David James (DJ) wrote:

DJ> Hi,
DJ> I just had a very quick look at the StatDataML proposal --- nice
DJ> work!   At the risk of showing my ignorance, I want to mention 
DJ> my first impressions.

DJ> My first impression is that defining datasets in terms of
DJ> arrays and list is a bit too high a level.  What about 
DJ> simpler vectors, scalars? (I know that R/S don't have scalars,
DJ> but other systems/applications do.)  Can we think of a core
DJ> set of "basic" data types (factors, strings, integers, etc.)
DJ> from which to build on other, possibly recursive types (perhaps
DJ> similar to corba's IDL basic data types or S's datadump?).

Hmm, basically we have that ... just that I don't see why it's
necessary to differentiate between a vector (=1-dimensional array) and
higher dimensions, i.e., introduce different tags for it. But if many
others feel like this is necessary: I don't have s trong opinion about
it, we just wanted to keep the thing as simple as possible.

Regarding data types: Torsten and I just discussed that we want to
keep the mode of an array as abstract as possible such that
applications can use the internal representation that fits the data
best.

IMO the following modes will be necessary to represent statistical
data:

logical, nominal, ordinal, integer, real, complex



DJ> Would it make sense to imagine, say xlispstat/python/java applications 
DJ> reading  and interpreting an StatDataML document without serious difficulties? 

Sure! What's the difference?


DJ> My gut feeling (which is often wrong) is that the DTD should make
DJ> the data self-describing:  e.g., the factor "machineId" has 
DJ> levels (or defining set) "Stepper1", "Stepper2", ... "Stepper20", 
DJ> eventhough the particular dataset at hand has only a
DJ> subset of those.  Similarly, perhaps allowing  units and classes
DJ> to be included in the dataset (in the case of currency, it is certainly 
DJ> a number, perhaps single precision, perhaps not, with specific units 
DJ> dollars, euros, pesos, etc.)

DJ> More long-term, how about application-defined data?  Application may have
DJ> it's own set of data objects that fully exploits contextual 
DJ> information that could be extremely useful to capture and 
DJ> communicate.

We definitely need (and want) any user to be able to exctend
StatDataML, i.e., define new classes. There should be a set of
standard classes (like dataframe or time series), but also interfaces
for defining new classes.

The current idea (in R) is to have the following: If the SDML object
has a class and there exists a conversion function for that particular
class then use it, otherwise do the default thing.

The conversion function shouldn't do to much, probably mostly renaming
some slots and re-organizing the structure (as claases on different
systems will probably have different structures).



DJ> Also, do the data have to be in ASCII format?  What about 
DJ> (possibly mime-encoded) images? sound?

Hmm, haven't thought about that yet. 


DJ> As I mentioned, these are questions coming from my lack of experience
DJ> with XML, but may be worth raising now better than later :-)

YES!!! That's why we called it ``proposal'' rather than
``StatDataML version 1.0'' :-)

Best,
Fritz

PS: We are also no XML experts!

-- 
-------------------------------------------------------------------
                        Friedrich  Leisch 
Institut für Statistik                     Tel: (+43 1) 58801 10715
Technische Universität Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstraße 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Mar  6 11:35:11 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 6 Mar 2000 12:35:11 +0100 (CET)
Subject: [Rd] Re: [Omega-devel] StatDataML
In-Reply-To: <14531.38429.238420.501197@galadriel.ci.tuwien.ac.at>
References: <200003032136.QAA20959@jessie.research.bell-labs.com>
 <14531.38429.238420.501197@galadriel.ci.tuwien.ac.at>
Message-ID: <14531.38895.432529.339700@galadriel.ci.tuwien.ac.at>

>>>>> On Mon, 6 Mar 2000 12:27:25 +0100 (CET),
>>>>> Friedrich Leisch (FL) wrote:


FL> IMO the following modes will be necessary to represent statistical
FL> data:

FL> logical, nominal, ordinal, integer, real, complex

Sorry, forgot character.

.fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Mar  6 11:39:25 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 6 Mar 2000 12:39:25 +0100 (CET)
Subject: [Rd] StatDataML
In-Reply-To: <38C0363B.DDB2AEA6@bank-banque-canada.ca>
References: <14527.58185.135296.986847@galadriel.ci.tuwien.ac.at>
 <38C0363B.DDB2AEA6@bank-banque-canada.ca>
Message-ID: <14531.39149.147189.715132@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 03 Mar 2000 17:01:31 -0500,
>>>>> Paul Gilbert (PG) wrote:

PG> Fritz
PG> Could you compare/contrast this a bit with NetCDF and  the UN/EDIFACT General
PG> Statistical Message (GESMES ). I know almost nothing about NetCDF, but from the
PG> little I know it seems to attempt to do a similar thing. I know a bit more about
PG> Gesmes, and there seems to be a lot of overlap with what you are proposing.


I don't know anything about GESMES, and have only looked into NetCDF a
little bit. Of course there are several ``standards'' for exchanging
data, and XML is one of them which looks promising to us.

One nice thing about XML is that more and more applications start
supporting it, i.e., have parsers for XML.  And you don't need any
special software for writing XML, as it is plain text -> you can
create XML files without the need to link any shared libs etc.

That XML can be easily extended is already part of the name ...

Best,

-- 
-------------------------------------------------------------------
                        Friedrich  Leisch 
Institut für Statistik                     Tel: (+43 1) 58801 10715
Technische Universität Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstraße 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Mar  6 14:47:54 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 06 Mar 2000 08:47:54 -0600
Subject: [Rd] A new way for an Alpha to fail
Message-ID: <6rd7p8889x.fsf@franz.stat.wisc.edu>

Previously I had managed to get R-0.99.0 to compile and pass the tests
on a Debian Linux/Alpha 2.2 system by recompiling src/main/optim.c by
hand omitting the -O2 flag.

I just tried R-1.0.0 on a similarly configured machine, although not
the same machine as before, and it compiled ok but failed the tests.
This time it fails on
 bessel> x <- seq(0, 4, len = 501)

 bessel> plot(x, x, ylim = c(0, 6), ylab = "", type = "n", 
     main = "Bessel Functions  I_nu(x)")
 Error in axis(side, at, labels, ...) : no locations are finite

Doing some checking by hand shows that
 plot(x, x)
works and that range(x) is 0 to 4, as expected, but
 plot(x, x, ylim = c(0, 6))
fails with the above message.

The compilers are gcc 2.95.2 and g77 from 1999/10/xx

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Mon Mar  6 15:02:43 2000
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 06 Mar 2000 07:02:43 -0800
Subject: [Rd] Re: [Omega-devel] StatDataML
In-Reply-To: Friedrich Leisch's message of "Mon, 6 Mar 2000 12:27:25 +0100 (CET)"
References: <200003032136.QAA20959@jessie.research.bell-labs.com> <14531.38429.238420.501197@galadriel.ci.tuwien.ac.at>
Message-ID: <87bt4sgmzw.fsf@alpha.cfas.washington.edu>

>>>>> "FL" == Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

    DJ> Also, do the data have to be in ASCII format?  What about
    DJ> (possibly mime-encoded) images? sound?

You can insert _SOME_ base64 encoded binary files.  There are
problems, depending on the image encoding format used
(gif/tiff/png/xbm, I'm not sure which are problematic; see the xml-dev
archives for more info).   I think the solutions where simple.

There are XML-based proposals for images that are quite interesting (I
think SDL?  or SML?  Look under the XML computational chemistry
section) Basically, it's a flexible vector-graphics format, that
scales on the fly and has other nice features...

Have you looked at MathML integration for providing output?  Frank
Harrell pop'd up a quite interesting question regarding literate
programming, and this (the SDML) could be one aspect of it...).

Still havn't looked at it; maybe Friday I'll find some time...

best,
-tony

-- 
A.J. Rossini		       Research Assistant Professor of Biostatistics 
Biostatistics/Univ. of Washington  (Th)	Box 357232   206-543-1044 (3286=fax)
Center for AIDS Research/HMC/UW	  (M/F)	Box 359931   206-731-3647 (3693=fax)
VTN/SCHARP/FHCRC		 (Tu/W)	Box 358080   206-667-7025 (4812=fax)
rossini@(biostat.washington.edu|u.washington.edu|hivnet.fhcrc.org)
http://www.biostat.washington.edu/~rossini

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar  6 15:09:30 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Mar 2000 16:09:30 +0100
Subject: [Rd] A new way for an Alpha to fail
In-Reply-To: Douglas Bates's message of "06 Mar 2000 08:47:54 -0600"
References: <6rd7p8889x.fsf@franz.stat.wisc.edu>
Message-ID: <x2ln3w879x.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

>  bessel> x <- seq(0, 4, len = 501)
> 
>  bessel> plot(x, x, ylim = c(0, 6), ylab = "", type = "n", 
>      main = "Bessel Functions  I_nu(x)")
>  Error in axis(side, at, labels, ...) : no locations are finite
> 
> Doing some checking by hand shows that
>  plot(x, x)
> works and that range(x) is 0 to 4, as expected, but
>  plot(x, x, ylim = c(0, 6))
> fails with the above message.

Interesting... How about firing ub gdb with a breakpoint in do_axis?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Mon Mar  6 15:35:45 2000
From: dtrenkler@nts6.oec.uni-osnabrueck.de (dtrenkler@nts6.oec.uni-osnabrueck.de)
Date: Mon, 6 Mar 2000 16:35:45 +0100 (MET)
Subject: [Rd] anova-bug in R-version  1.0.0? (PR#470)
Message-ID: <200003061535.QAA07778@pubhealth.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@biostat.ku.dk
#
######################################################

Under R version 0.6.51  the following 

A_c(13,9,15,5,25,15,3,9,6,12)
B_c(42,24,41,19,27)
C_c(8,24,9,18,9,24,12,4)
D_c(9,12,7,18,2,18)
kaeufe_c(A,B,C,D)
region_factor(rep(1:4,c(10,5,8,6)),labels=LETTERS[1:4])
anova(lm(kaeufe~region))   

delivers

Analysis of Variance Table

Response: kaeufe
          Df  Sum Sq Mean Sq F value   Pr(>F)    
region     3 1474.65  491.55  8.7852 0.000376 ***
Residuals 25 1398.80   55.95                     
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1


This is what I expected. Under RW 1.0.0 I get

Analysis of Variance Table

Response: kaeufe
Error in print.coefmat(x, digits = digits, signif.stars = signif.stars,
: 
        binary operator applied to invalid types

Am I doing something wrong or is this a real bug?

Regards,

  *** D.Trenkler ***

====================================================================
Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
Statistik / Empirische Wirtschaftsforschung
Universitaet Osnabrueck
Rolandstrasse 8                           Phone: +49(0) 541-969-2753
D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
GERMANY
====================================================================



--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows NT 4.0 (build 1381) Service Pack 3

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar  6 15:51:10 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Mar 2000 16:51:10 +0100
Subject: [Rd] anova-bug in R-version  1.0.0? (PR#470)
In-Reply-To: dtrenkler@nts6.oec.uni-osnabrueck.de's message of "Mon, 6 Mar 2000 16:35:45 +0100 (MET)"
References: <200003061535.QAA07778@pubhealth.ku.dk>
Message-ID: <x2aekc85ch.fsf@blueberry.kubism.ku.dk>

dtrenkler@nts6.oec.uni-osnabrueck.de writes:

> Under R version 0.6.51  the following 
> 
> A_c(13,9,15,5,25,15,3,9,6,12)
> B_c(42,24,41,19,27)
> C_c(8,24,9,18,9,24,12,4)
> D_c(9,12,7,18,2,18)
> kaeufe_c(A,B,C,D)
> region_factor(rep(1:4,c(10,5,8,6)),labels=LETTERS[1:4])
> anova(lm(kaeufe~region))   
> 
> delivers
> 
> Analysis of Variance Table
> 
> Response: kaeufe
>           Df  Sum Sq Mean Sq F value   Pr(>F)    
> region     3 1474.65  491.55  8.7852 0.000376 ***
> Residuals 25 1398.80   55.95                     
> ---
> Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1
> 
> 
> This is what I expected. Under RW 1.0.0 I get
> 
> Analysis of Variance Table
> 
> Response: kaeufe
> Error in print.coefmat(x, digits = digits, signif.stars = signif.stars,
> : 
>         binary operator applied to invalid types
> 
> Am I doing something wrong or is this a real bug?

It's not happening on Unix... Does this happen when starting from a
blank workspace?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar  6 18:02:18 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 6 Mar 2000 18:02:18 +0000 (GMT Standard Time)
Subject: [Rd] anova-bug in R-version  1.0.0? (PR#470)
In-Reply-To: <x2aekc85ch.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.WNT.4.05.10003061800470.1821-100000@tern.stats>

On 6 Mar 2000, Peter Dalgaard BSA wrote:

> dtrenkler@nts6.oec.uni-osnabrueck.de writes:
> 
> > Under R version 0.6.51  the following 
> > 
> > A_c(13,9,15,5,25,15,3,9,6,12)
> > B_c(42,24,41,19,27)
> > C_c(8,24,9,18,9,24,12,4)
> > D_c(9,12,7,18,2,18)
> > kaeufe_c(A,B,C,D)
> > region_factor(rep(1:4,c(10,5,8,6)),labels=LETTERS[1:4])
> > anova(lm(kaeufe~region))   
> > 
> > delivers
> > 
> > Analysis of Variance Table
> > 
> > Response: kaeufe
> >           Df  Sum Sq Mean Sq F value   Pr(>F)    
> > region     3 1474.65  491.55  8.7852 0.000376 ***
> > Residuals 25 1398.80   55.95                     
> > ---
> > Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1
> > 
> > 
> > This is what I expected. Under RW 1.0.0 I get
> > 
> > Analysis of Variance Table
> > 
> > Response: kaeufe
> > Error in print.coefmat(x, digits = digits, signif.stars = signif.stars,
> > : 
> >         binary operator applied to invalid types
> > 
> > Am I doing something wrong or is this a real bug?
> 
> It's not happening on Unix... Does this happen when starting from a
> blank workspace?

It is also not happening on rw1000. Is your .Rprofile (if any) valid?
Try starting with --vanilla.

BDR

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar  6 18:47:15 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Mar 2000 19:47:15 +0100
Subject: [Rd] anova-bug in R-version  1.0.0? (PR#470)
In-Reply-To: Prof Brian D Ripley's message of "Mon, 6 Mar 2000 18:02:18 +0000 (GMT Standard Time)"
References: <Pine.WNT.4.05.10003061800470.1821-100000@tern.stats>
Message-ID: <x24sakylzg.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> > 
> > It's not happening on Unix... Does this happen when starting from a
> > blank workspace?
> 
> It is also not happening on rw1000. Is your .Rprofile (if any) valid?
> Try starting with --vanilla.

The submitter told me in private email that the problem disappeared
when starting with a blank workspace, so a critical function probably
had been overridden.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar  6 18:46:22 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Mon, 6 Mar 2000 19:46:22 +0100 (MET)
Subject: [Rd] anova-bug in R-version  1.0.0? (PR#470)
Message-ID: <200003061846.TAA09039@pubhealth.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> > 
> > It's not happening on Unix... Does this happen when starting from a
> > blank workspace?
> 
> It is also not happening on rw1000. Is your .Rprofile (if any) valid?
> Try starting with --vanilla.

The submitter told me in private email that the problem disappeared
when starting with a blank workspace, so a critical function probably
had been overridden.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Mon Mar  6 21:26:41 2000
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 06 Mar 2000 13:26:41 -0800
Subject: [Rd] StatDataML and graphics... I meant to say "SVG".
Message-ID: <878zzvn626.fsf@alpha.cfas.washington.edu>


See subject...

-- 
A.J. Rossini		       Research Assistant Professor of Biostatistics 
Biostatistics/Univ. of Washington  (Th)	Box 357232   206-543-1044 (3286=fax)
Center for AIDS Research/HMC/UW	  (M/F)	Box 359931   206-731-3647 (3693=fax)
VTN/SCHARP/FHCRC		 (Tu/W)	Box 358080   206-667-7025 (4812=fax)
rossini@(biostat.washington.edu|u.washington.edu|hivnet.fhcrc.org)
http://www.biostat.washington.edu/~rossini

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Mar  6 21:55:12 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Mon, 6 Mar 2000 16:55:12 -0500 (EST)
Subject: [Rd] nlm and optional arguments
Message-ID: <Pine.LNX.4.10.10003061650300.1417-100000@bolker.zoo.ufl.edu>


  It would be really nice if nlm took a set of "..." optional arguments
that were passed through to the objective function.  This level of hacking
is probably slightly beyond me: is there a reason it would be technically
difficult/inefficient?  (I have a vague memory that it used to work this
way either in S-PLUS or in some previous version of R, but I could easily
be wrong.)

  Here's a hack in R code that works for me (basically copying the R code
of nlm() but defining a temporary function that passes the optional
arguments to the objective function), but I presume this would be cleaner
and faster if implemented at a lower level ...

nlm2 <- function(f, p, hessian=FALSE, typsize=rep(1,length(p)),
                fscale=1, print.level=0, ndigit=12, gradtol=1e-6,
                stepmax=max(1000 * sqrt(sum((p/typsize)^2)), 1000),
                steptol=1e-6, iterlim=100, check.analyticals=TRUE, ...) {
  tmpf <- function(x) {
    f(x,...)
  }
  nlm(tmpf,p,hessian=hessian,typsize=typsize,fscale=fscale,print.level=print.level,
      ndigit=ndigit,gradtol=gradtol,stepmax=stepmax,steptol=steptol,iterlim=iterlim,
      check.analyticals=check.analyticals)
}

  As a matter of general principle, would the R-core folks prefer that
"wishlist" items like this get sent to R-bugs (so they can be kept better
track of) or not (so they don't clutter up the bugs database) ?

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Mar  6 22:10:28 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 06 Mar 2000 17:10:28 -0500
Subject: [Rd] StatDataML
Message-ID: <38C42CD4.FA989479@bank-banque-canada.ca>

PG> Could you compare/contrast this a bit with NetCDF and  the
UN/EDIFACT
PG> General Statistical Message (GESMES ).

Well, I guess I'll try to answer part of my own question. I'm groping a
bit to understand the various pieces, and to what extent they overlap or
are complementary, so I would especially invite anyone with more
knowledge to help clear things up. Having very little true
understanding, I think of XML as a language that allows one to define a
format for the data exchange, whereas Gesmes actually defines a format.
I believe they both result in ASCII files. I'm not sure if this means
that XML could be used to define the Gesmes message format or not. CORBA
on the other hand is a protocol for negotiating the exchange of a
formatted message between a client and a server, so it could be used to
exchange Gesmes or some other format defined by XML. CORBA is probably a
replacement for the PADI protocol, based on RPC, which we use here to
exchange time series data between our data servers (Fame) and R and
Splus. (PADI is publicly available but not widely used.)

Torsten>I just had a short (!) look at the description of the data model
and the
Torsten>user guide for GESMES at
http://www.ecb.int/stats/gesmes/gesmes.htm
Torsten>For me it looks biased to banking problems and very
dataframe/array
Torsten>centric.

Yes, I won't recommend it for being simple. That link seems to go to
Gesmes/CB (Central Bank subset of Gesmes) which is decidedly oriented
toward banking and time series data. Reference documents for other parts
of Gesmes are available at

<http://forum.europa.eu.int/Public/irc/dsis/eeg6/library?l=/reference_implementation/gesmes_statistical&vm=detailed&sb=Title>

After looking at this, one might be inclined to think that trying to be
too general is dangerous.  However, even if Gesmes is very complicated,
I'm not sure that trying to define a different general message is the
answer.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Tue Mar  7 06:15:02 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue, 7 Mar 2000 07:15:02 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200003070615.HAA01626@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

none

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 400 *
Subject: X11 troubles
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Jan 2000 14:31:42 +0100
--a) We don't handle multiple window closes well
--b) X11 errors should be caught by an error handler, not kill R
* PR# 414 *
Subject:  graphics bugs: steep slopes and large values beyond ylim 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 7 Feb 2000 18:28:04 -0500
--Followup on R-devel showed this was due to generating integer coordinates 
--outside +/- 2^15 in the X11 driver.

Directory:  In-Out

none

Directory:  Installation

none

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100

Directory:  Low-level

* PR# 391 *
Subject: Segfault in dataentry()
From: Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk>
Date: 29 Dec 1999 11:59:50 +0100
--dataentry(0,0) segfaults

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 462 *
Subject: pgamma
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Tue, 29 Feb 2000 09:50:00 +0100 (MET)
* PR# 463 *
Subject: Bug in read.table
From: "E. S. Venkatraman" <venkat@biosta.mskcc.org>
Date: Tue, 29 Feb 2000 17:47:54 -0500 (EST)
* PR# 465 *
Subject: "is.qr" definition
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Wed, 1 Mar 2000 11:12:37 +0000 (GMT)
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
* PR# 469 *
Subject:  using function names as parameters 
From: Torsten Hothorn <hothorn@ci.tuwien.ac.at>
Date: Fri, 3 Mar 2000 10:11:00 +0100
* PR# 470 *
Subject: anova-bug in R-version  1.0.0?
From: "Trenkler, Dietrich" <dtrenkler@nts6.oec.uni-osnabrueck.de>
Date: Mon, 6 Mar 2000 16:35:12 +0100 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  7 07:06:28 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 7 Mar 2000 07:06:28 +0000 (GMT)
Subject: [Rd] nlm and optional arguments
In-Reply-To: <Pine.LNX.4.10.10003061650300.1417-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.GSO.4.05.10003070701290.20391-100000@auk.stats>

On Mon, 6 Mar 2000, Ben Bolker wrote:

> 
>   It would be really nice if nlm took a set of "..." optional arguments
> that were passed through to the objective function.  This level of hacking
> is probably slightly beyond me: is there a reason it would be technically
> difficult/inefficient?  (I have a vague memory that it used to work this
> way either in S-PLUS or in some previous version of R, but I could easily
> be wrong.)

Well, ms and nlminb work that way in S-PLUS, and optimize and optim do in
R, so there is no real problem.

>   Here's a hack in R code that works for me (basically copying the R code
> of nlm() but defining a temporary function that passes the optional
> arguments to the objective function), but I presume this would be cleaner
> and faster if implemented at a lower level ...
> 
> nlm2 <- function(f, p, hessian=FALSE, typsize=rep(1,length(p)),
>                 fscale=1, print.level=0, ndigit=12, gradtol=1e-6,
>                 stepmax=max(1000 * sqrt(sum((p/typsize)^2)), 1000),
>                 steptol=1e-6, iterlim=100, check.analyticals=TRUE, ...) {
>   tmpf <- function(x) {
>     f(x,...)
>   }
>   nlm(tmpf,p,hessian=hessian,typsize=typsize,fscale=fscale,print.level=print.level,
>       ndigit=ndigit,gradtol=gradtol,stepmax=stepmax,steptol=steptol,iterlim=iterlim,
>       check.analyticals=check.analyticals)
> }

One can just put function(x) f(x, ...) as the first argumnet of the
.Internal call.  It can also fairly easily be done internally (but
why bother?)   I'll take a look at this, but why not try optim instead?


>   As a matter of general principle, would the R-core folks prefer that
> "wishlist" items like this get sent to R-bugs (so they can be kept better
> track of) or not (so they don't clutter up the bugs database) ?

I'll leave that for the R-bugs-master.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Tue Mar  7 07:27:59 2000
From: berwin@maths.uwa.edu.au (berwin@maths.uwa.edu.au)
Date: Tue, 7 Mar 2000 08:27:59 +0100 (MET)
Subject: [Rd] Problems with nlme (PR#471)
Message-ID: <200003070727.IAA11450@pubhealth.ku.dk>

Dear R developers,

first of all let me join the chorus of congratulations for the release
of R 1.0.0.  Well, done!

Unfortunately, I find it necessary to e-mail in a bug report regarding
the `nlme' package.  On my office machine I experience the following
trouble:

bossiaea:/opt/R$ R CMD check -c nlme 
Checking package `nlme' ...
 Massaging examples into `nlme-Ex.R' ...
 Running examples in package `nlme' ...
 ERROR

The end of nlme-Ex.Rout is:

> rm(list = ls(all = TRUE)); .Random.seed <- c(0,rep(7654,3))
> ###--- >>> `anova.gls' <<<----- Compare Likelihoods of Fitted Objects
> 
> 	## alias	 help(anova.gls)
> 
> ##___ Examples ___:
> 
> library(nlme)
> data(Ovary)
> # AR(1) errors within each Mare
> fm1 <- gls(follicles ~ sin(2*pi*Time) + cos(2*pi*Time), Ovary,
+            correlation = corAR1(form = ~ 1 | Mare))
Warning message: 
NA/Inf replaced by maximum positive value 
> anova(fm1)
Denom. DF: 305 
                   numDF  F-value p-value
(Intercept)            1 354.7375  <.0001
sin(2 * pi * Time)     1  18.5035  <.0001
cos(2 * pi * Time)     1   1.6633  0.1981
> # variance changes with a power of the absolute fitted values?
> fm2 <- update(fm1, weights = varPower())
Error in update.gls(fm1, weights = varPower()) : 
	subscript out of bounds
Execution halted


(R CMD check MASS is also failing on an example that uses update.gls.)

On my machine at home I run into troubles even faster when running `R
CMD check nlme'.  One of the early examples chokes on the line:
> data(Orthodont)

I had done a "clean install" on that machine, i.e., I first blew away
the older installation of R.  It seems that the datasets Orthodont and
Pixel have been distributed with the nls library in earlier R versions
but not so in R 1.0.0.  But they are not distributed with the current
version of nlme either.

Cheers,

        Berwin

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Tue Mar  7 08:26:16 2000
From: dtrenkler@nts6.oec.uni-osnabrueck.de (Trenkler, Dietrich)
Date: Tue, 7 Mar 2000 09:26:16 +0100
Subject: AW: [Rd] anova-bug in R-version  1.0.0? (PR#470)
Message-ID: <51615E1449A4D111AE9900008322A88025CD0E@nts6.oec.Uni-Osnabrueck.DE>

I think I've discovered what went wrong.

My workspace included a function wilcox.test formerly copied from
ctest. Now ctest ist part of the distribution and because of that I
always got the message:

[Previously saved workspace restored]

Error in autoload("wilcox.test", "ctest") :
        Object already exists

I didn't take care of this message. Now I removed wilcox.test, saved
the WS, restarted R without the vanilla-option and alas, anova
now works.

It seems that R stops initializing after encountering the error
mentioned above. Is this correct?   


> Regards,
> 
>   *** D.Trenkler ***
> 
> ====================================================================
> Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
> Statistik / Empirische Wirtschaftsforschung
> Universitaet Osnabrueck
> Rolandstrasse 8                           Phone: +49(0) 541-969-2753
> D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
> GERMANY
> ====================================================================
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Tue Mar  7 08:26:53 2000
From: dtrenkler@nts6.oec.uni-osnabrueck.de (dtrenkler@nts6.oec.uni-osnabrueck.de)
Date: Tue, 7 Mar 2000 09:26:53 +0100 (MET)
Subject: AW: [Rd] anova-bug in R-version  1.0.0? (PR#470)
Message-ID: <200003070826.JAA12238@pubhealth.ku.dk>

I think I've discovered what went wrong.

My workspace included a function wilcox.test formerly copied from
ctest. Now ctest ist part of the distribution and because of that I
always got the message:

[Previously saved workspace restored]

Error in autoload("wilcox.test", "ctest") :
        Object already exists

I didn't take care of this message. Now I removed wilcox.test, saved
the WS, restarted R without the vanilla-option and alas, anova
now works.

It seems that R stops initializing after encountering the error
mentioned above. Is this correct?   


> Regards,
> 
>   *** D.Trenkler ***
> 
> ====================================================================
> Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
> Statistik / Empirische Wirtschaftsforschung
> Universitaet Osnabrueck
> Rolandstrasse 8                           Phone: +49(0) 541-969-2753
> D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
> GERMANY
> ====================================================================
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  7 08:40:40 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 7 Mar 2000 08:40:40 +0000 (GMT)
Subject: AW: [Rd] anova-bug in R-version  1.0.0? (PR#470)
In-Reply-To: <51615E1449A4D111AE9900008322A88025CD0E@nts6.oec.Uni-Osnabrueck.DE>
Message-ID: <Pine.GSO.4.05.10003070836280.15700-100000@auk.stats>

On Tue, 7 Mar 2000, Trenkler, Dietrich wrote:

> I think I've discovered what went wrong.
> 
> My workspace included a function wilcox.test formerly copied from
> ctest. Now ctest ist part of the distribution and because of that I
> always got the message:
> 
> [Previously saved workspace restored]
> 
> Error in autoload("wilcox.test", "ctest") :
>         Object already exists
> 
> I didn't take care of this message. Now I removed wilcox.test, saved
> the WS, restarted R without the vanilla-option and alas, anova
> now works.
> 
> It seems that R stops initializing after encountering the error
> mentioned above. Is this correct?   

Yes, in that the rest of the system Rprofile file is skipped
and hence options show.signif.stars and show.coef.Pvalues are not set.

It looks to me as if a bit more protection is needed in print.coefmat,
at least.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar  7 08:53:43 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Mar 2000 09:53:43 +0100
Subject: [Rd] nlm and optional arguments
In-Reply-To: Prof Brian D Ripley's message of "Tue, 7 Mar 2000 07:06:28 +0000 (GMT)"
References: <Pine.GSO.4.05.10003070701290.20391-100000@auk.stats>
Message-ID: <x2ln3vf9ew.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> >   As a matter of general principle, would the R-core folks prefer that
> > "wishlist" items like this get sent to R-bugs (so they can be kept better
> > track of) or not (so they don't clutter up the bugs database) ?
> 
> I'll leave that for the R-bugs-master.

Probably better just to discuss things on the lists.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Tue Mar  7 10:00:34 2000
From: dtrenkler@nts6.oec.uni-osnabrueck.de (dtrenkler@nts6.oec.uni-osnabrueck.de)
Date: Tue, 7 Mar 2000 11:00:34 +0100 (MET)
Subject: [Rd] R-crash using cut-and-paste (PR#472)
Message-ID: <200003071000.LAA13965@pubhealth.ku.dk>

Dear R-Team,

sorry for bugging (:-)), it's me again. In the FAQ coming along with the
R distribution it reads:

If R executes an illegal instruction, or dies with an operating system
error message that indicates a problem in the program (as opposed to
something like "disk full"), then it is certainly a bug.

This encourages me to describe a crash I encountered a few minutes ago.

I had written a function in an  editor, copied it to the clip-board and
tried to establish it in my workspace (cut and paste). Suddenly I got
the following message form Windows NT (sorry it's german):


Die Anweisung "0x7762d4be" verweist auf Speicher in "0x0247c000".  Der
Vorgang "read" konnte nicht auf dem Speicher durchgeführt werden.
Klicken Sie auf "OK um die Anwendung zu beenden.

Rgui.exe-Fehler in Anwendung

There are very technical terms which I hope will be translated such
that it makes sense to you:

The instruction "0x7762d4be" points to memory in "0x0247c000".  "read"
could not be carried out in memory.  Click on "OK to stop the program.  

Clicking on OK caused R to close (and of course the most recent work was
lost)


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows NT 4.0 (build 1381) Service Pack 3

Search Path:
 .GlobalEnv, Autoloads, package:base


Regards,

  *** D.Trenkler ***

====================================================================
Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
Statistik / Empirische Wirtschaftsforschung
Universitaet Osnabrueck
Rolandstrasse 8                           Phone: +49(0) 541-969-2753
D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
GERMANY
====================================================================


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  7 10:30:26 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 7 Mar 2000 10:30:26 +0000 (GMT)
Subject: [Rd] R-crash using cut-and-paste (PR#472)
In-Reply-To: <200003071000.LAA13965@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10003071023280.20024-100000@auk.stats>

On Tue, 7 Mar 2000 dtrenkler@nts6.oec.uni-osnabrueck.de wrote:

> Dear R-Team,
> 
> sorry for bugging (:-)), it's me again. In the FAQ coming along with the
> R distribution it reads:
> 
> If R executes an illegal instruction, or dies with an operating system
> error message that indicates a problem in the program (as opposed to
> something like "disk full"), then it is certainly a bug.
> 
> This encourages me to describe a crash I encountered a few minutes ago.
> 
> I had written a function in an  editor, copied it to the clip-board and
> tried to establish it in my workspace (cut and paste). Suddenly I got
> the following message form Windows NT (sorry it's german):

[...]

How big was the function you were trying to paste in?  There are 
distinct limits to such cut-and-paste, not all of which are under 
our control. To quote more of the FAQ:

  Please include an example that reproduces the problem, preferably the
  simplest one you have found.

Without such an example, there is nothing we can do to help.

As a general work-around, you will find it much easier to use source() to
load in sizeable functions than cut-and-paste.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Mar  7 10:47:43 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 7 Mar 2000 11:47:43 +0100 (MET)
Subject: [Rd] autoload error in profile {was anova-bug in R-version  1.0.0?} (PR#470)
Message-ID: <200003071047.LAA14756@pubhealth.ku.dk>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Tue, 7 Mar 2000, Trenkler, Dietrich wrote:
    >> I think I've discovered what went wrong.
    >> 
    >> My workspace included a function wilcox.test formerly copied from
    >> ctest. Now ctest ist part of the distribution and because of that I
    >> always got the message:
    >> 
    >> [Previously saved workspace restored]
    >> 
    >> Error in autoload("wilcox.test", "ctest") :
    >> Object already exists
    >> 
    >> I didn't take care of this message. Now I removed wilcox.test, saved
    >> the WS, restarted R without the vanilla-option and alas, anova
    >> now works.
    >> 
    >> It seems that R stops initializing after encountering the error
    >> mentioned above. Is this correct?   

    BDR> Yes, in that the rest of the system Rprofile file is skipped
    BDR> and hence options show.signif.stars and show.coef.Pvalues are not set.
but other options as well..
I think this shouldn't happen and *is* a bug.

    BDR> It looks to me as if a bit more protection is needed in print.coefmat,
    BDR> at least.
In extrapolation, wouldn't all R functions using non-internal *)
options() {i.e. getOption() nowadays} need protection against these options
being wrong or non existent ?
I feel that this is exaggerated..

*) Currently, the following options are "internal"
   (i.e. changing them does some consistency checks in src/main/options.c):

   Option	       Requirements
   ------	       ------------
   width	       integer    MIN_WIDTH..MAX_WIDTH
   digits	       integer    MIN_DIGITS..MAX_DIGITS
   expressions	       integer    MIN_EXPRESSIONS..MAX_EXPRESSIONS
   editor	       character  {not NA nor character(0)}
   continue	       character  {not NA nor character(0)}
   prompt	       character  {not NA nor character(0)}
   contrasts	       character(2)
   warn		       numeric(1)
   warning.expression  expression or language
   error	       expression or language
   show.error.messages logical(1)
   echo		       logical(1)

------------

However, I wonder if we shouldn't do consistency checks on other options as
well,  e.g. na.action seems to be more important than the show.* ones ...

For the 1.0.x patches, at least, I'll move the autoload()'s to the end of
profile/Common.R

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Mar  7 11:03:33 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 07 Mar 2000 12:03:33 +0100
Subject: [Rd] R-crash using cut-and-paste (PR#472)
References: <Pine.GSO.4.05.10003071023280.20024-100000@auk.stats>
Message-ID: <38C4E205.9C9A5B72@statistik.uni-dortmund.de>

Hi!

Prof Brian D Ripley schrieb:
> 
> On Tue, 7 Mar 2000 dtrenkler@nts6.oec.uni-osnabrueck.de wrote:
> 
> > Dear R-Team,
> >
> > sorry for bugging (:-)), it's me again. In the FAQ coming along with the
> > R distribution it reads:
> >
> > If R executes an illegal instruction, or dies with an operating system
> > error message that indicates a problem in the program (as opposed to
> > something like "disk full"), then it is certainly a bug.
> >
> > This encourages me to describe a crash I encountered a few minutes ago.
> >
> > I had written a function in an  editor, copied it to the clip-board and
> > tried to establish it in my workspace (cut and paste). Suddenly I got
> > the following message form Windows NT (sorry it's german):
...

Happens here too (R 1.0.0, Windows NT 4.0, SP5).
Sometimes with Dr. Watson, sometimes as described above by D.Trenkler,
sometimes R terminates without any message.

> How big was the function you were trying to paste in?  There are
> distinct limits to such cut-and-paste, not all of which are under
> our control. To quote more of the FAQ:
> 
>   Please include an example that reproduces the problem, preferably the
>   simplest one you have found.
> 
> Without such an example, there is nothing we can do to help.


If you paste the following function about four times (makes no sense,
but reproduces the error without pasting a really big function), the
error occurs:
-------------

"scoredach" <-
  function (x) 
{
  v1 <- x[1]
  u11<- x[2]
  u12<- x[3]
  v2 <- x[4]
  u21<- x[5]
  u22<- x[6]
  v3 <- x[7]
  u31<- x[8]
  u32<- x[9]
  w1 <- x[10]
  w2 <- x[11]
  w3 <- x[12]
  z11<- x[13]
  z21<- x[14]
  z31<- x[15]
  z12<- x[16]
  z22<- x[17]
  z32<- x[18]
 scoredach <- v1/(1 + exp(-(u11 * xseq + u12 * yseq))) 
             + v2/(1 + exp(-(u21 * xseq + u22 * yseq))) 
             + v3/(1 + exp(-(u31 * xseq + u32 * yseq)))

return(scoredach)}

---------------------

> As a general work-around, you will find it much easier to use source() to
> load in sizeable functions than cut-and-paste.


Regards, 
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  7 11:03:41 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 7 Mar 2000 12:03:41 +0100 (MET)
Subject: [Rd] Re: autoload error in profile {was anova-bug in R-version  1.0.0?} (PR#473)
Message-ID: <200003071103.MAA15042@pubhealth.ku.dk>

On Tue, 7 Mar 2000, Martin Maechler wrote:

> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> 
>     BDR> On Tue, 7 Mar 2000, Trenkler, Dietrich wrote:
>     >> I think I've discovered what went wrong.
>     >> 
>     >> My workspace included a function wilcox.test formerly copied from
>     >> ctest. Now ctest ist part of the distribution and because of that I
>     >> always got the message:
>     >> 
>     >> [Previously saved workspace restored]
>     >> 
>     >> Error in autoload("wilcox.test", "ctest") :
>     >> Object already exists
>     >> 
>     >> I didn't take care of this message. Now I removed wilcox.test, saved
>     >> the WS, restarted R without the vanilla-option and alas, anova
>     >> now works.
>     >> 
>     >> It seems that R stops initializing after encountering the error
>     >> mentioned above. Is this correct?   
> 
>     BDR> Yes, in that the rest of the system Rprofile file is skipped
>     BDR> and hence options show.signif.stars and show.coef.Pvalues are not set.
> but other options as well..
> I think this shouldn't happen and *is* a bug.
> 
>     BDR> It looks to me as if a bit more protection is needed in print.coefmat,
>     BDR> at least.
> In extrapolation, wouldn't all R functions using non-internal *)
> options() {i.e. getOption() nowadays} need protection against these options
> being wrong or non existent ?
> I feel that this is exaggerated..

Yes, they should, and when I write them I do check for sensible values.

> *) Currently, the following options are "internal"
>    (i.e. changing them does some consistency checks in src/main/options.c):
> 
>    Option	       Requirements
>    ------	       ------------
>    width	       integer    MIN_WIDTH..MAX_WIDTH
>    digits	       integer    MIN_DIGITS..MAX_DIGITS
>    expressions	       integer    MIN_EXPRESSIONS..MAX_EXPRESSIONS
>    editor	       character  {not NA nor character(0)}
>    continue	       character  {not NA nor character(0)}
>    prompt	       character  {not NA nor character(0)}
>    contrasts	       character(2)
>    warn		       numeric(1)
>    warning.expression  expression or language
>    error	       expression or language
>    show.error.messages logical(1)
>    echo		       logical(1)
> 
> ------------
> 
> However, I wonder if we shouldn't do consistency checks on other options as
> well,  e.g. na.action seems to be more important than the show.* ones ...

We do have some consistency checks on na.action in model.frame.default.

> For the 1.0.x patches, at least, I'll move the autoload()'s to the end of
> profile/Common.R

I _think_ they should have try() around them, which is what S-PLUS 
now does with all startup code.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Tue Mar  7 11:06:34 2000
From: dtrenkler@nts6.oec.uni-osnabrueck.de (Trenkler, Dietrich)
Date: Tue, 7 Mar 2000 12:06:34 +0100
Subject: AW: [Rd] R-crash using cut-and-paste (PR#472)
Message-ID: <51615E1449A4D111AE9900008322A88025CD10@nts6.oec.Uni-Osnabrueck.DE>



> -----Ursprüngliche Nachricht-----
> Von:	Prof Brian D Ripley 
> Gesendet am:	Tuesday, March 07, 2000 11:30 AM
> An:	dtrenkler@nts6.oec.uni-osnabrueck.de
> Cc:	r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Betreff:	Re: [Rd] R-crash using cut-and-paste (PR#472)
> 
> On Tue, 7 Mar 2000 dtrenkler@nts6.oec.uni-osnabrueck.de wrote:
> 
> > Dear R-Team,
> > 
> > sorry for bugging (:-)), it's me again. In the FAQ coming along with
> the
> > R distribution it reads:
> > 
> > If R executes an illegal instruction, or dies with an operating
> system
> > error message that indicates a problem in the program (as opposed to
> > something like "disk full"), then it is certainly a bug.
> > 
> > This encourages me to describe a crash I encountered a few minutes
> ago.
> > 
> > I had written a function in an  editor, copied it to the clip-board
> and
> > tried to establish it in my workspace (cut and paste). Suddenly I
> got
> > the following message form Windows NT (sorry it's german):
> 
> [...]
> 
> How big was the function you were trying to paste in?  
	[Dietrich Trenkler]  About 36 lines. Here you are:

	
tefo_function(form,symb="%",dir="F:/DIDITEX/compstatr/ss00/r2latex/"){
	tf_paste(c(dir,form,".r2l"),collapse="")
	cat(c("Reading ",tf,".\n"),collapse="")
	ss_scan(file=tf,what="",sep="\n",quiet=TRUE)
	sss_ss
	a_(1:length(sss))[ss==as.vector("\\end{RFunction}")]
	sss_sss[1:a-1]
	b_(1:length(sss))[ss==as.vector("\\begin{RFunction}")]

	collect.expressions_function(ss){
	ss_ss[grep("%",ss)]
	ss_paste(ss,collapse="")
	ss_substring(ss,1:nchar(ss),1:nchar(ss))
	ss_as.vector(ss[!((ss=="%")|(ss==" "))])
	ss_paste(c("list(",ss[-1],")"),collapse="")
	ss
	}
	a_collect.expressions(ss[-(1:a)])
	a_paste(c("a0_",a),collapse="")
	sss_c(sss[-(1:b)],a)
	sss_c(sss,"a0_lapply(a0,signif,digits=digits)")
	a_paste(c("ss_paste(c('",tf,,"'),collapse='')"),collapse="")
	sss_c(sss,a)
	sss_c(sss,"ss_scan(file=ss,what='',sep='\\n',quiet=TRUE)")
	
sss_c(sss,"a_(1:length(ss))[ss==as.vector('\\\\end{RFunction}')]")
	sss_c(sss,"ss_ss[-(1:a)]")
	sss_c(sss,"ss_ss[-grep('%',ss)]")
	sss_c(sss,"ss_paste(ss,collapse='\\n',sep='\\n')")
	sss_c(sss,paste("for(i in
1:length(a0)){ss_sub('",symb,"',as.character(a0),ss);a0_a0[-1]}",sep="")
)
	sss_c(sss,"if(!file=='')")
	
sss_c(sss,"write(paste(ss,collapse='\\n',sep='\\n'),file=paste(c(dir,fil
e,'.tex'),collapse=''))")
	sss_c(sss,"else return(cat(ss,'\\n'))")
	sss_c(sss,"}")
	
eval(parse(text=paste(sss,collapse="\n",sep="\n")),envir=.GlobalEnv)
	cat("Function ",form," established.\n")
	}
	 


> There are 
> distinct limits to such cut-and-paste, not all of which are under 
> our control. 
	[Dietrich Trenkler]  This seems to be true. When I copied this
function to the clipboard R crashed several times (sometimes without any
messages). There seems to be some interferences with the clipboard...


> As a general work-around, you will find it much easier to use source()
> to
> load in sizeable functions than cut-and-paste.
	[Dietrich Trenkler]  Henceforth I will obey to your advice.


> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jfox@mcmaster.ca  Tue Mar  7 14:08:03 2000
From: jfox@mcmaster.ca (jfox@mcmaster.ca)
Date: Tue, 7 Mar 2000 15:08:03 +0100 (MET)
Subject: [Rd] update fails after specific sequence of steps (PR#474)
Message-ID: <200003071408.PAA18937@pubhealth.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@biostat.ku.dk
#
######################################################



I stumbled on this error while doing a classroom demonstration. The error is reproducible, 
but seems to require a specific sequence of operations: (1) fitting a linear model; (2) 
calling the summary function; (3) calling a function of mine, called test.terms; (4) making 
a typing error in a call to update -- typing "~.~" instead of ".~." . (5) After this, a 
correct call to update fails. If any of the steps 1-4 is omitted, everything proceeds 
normally.

I've attached the following: 

 o   several listings illustrating when the error occurs and when it does not; 

 o   a listing of the dataset; 

 o   a listing of the test.terms function and the functions that it uses. 

The dataset, though, seems unremarkable, and test.tests is a straightforward function 
without (intended) side effects. The library fox just contains some functions and datasets; 
I can, of course, supply it if that seems relevant.

I'm not sure that this is a bug in R, but it seemed worth reporting.

Thanks for your trouble,
 John

----------------- first listing, showing error ---------------------------

R : Copyright 2000, The R Development Core Team
Version 1.0.0  (February 29, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(fox)
> data(Moore)
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)

Call:
lm(formula = conform ~ status * fcategory)

Residuals:
    Min      1Q  Median      3Q     Max 
-8.6250 -2.9000 -0.2727  2.7273 11.3750 

Coefficients:
                          Estimate Std. Error t value Pr(>|t|)    
(Intercept)                11.8571     1.7307   6.851 3.44e-08 ***
statuslow                   0.7679     2.3699   0.324   0.7477    
fcategorylow                5.5429     2.6813   2.067   0.0454 *  
fcategorymedium             2.4156     2.2140   1.091   0.2819    
statuslow.fcategorylow     -9.2679     3.4507  -2.686   0.0106 *  
statuslow.fcategorymedium  -7.7906     3.5728  -2.181   0.0353 *  
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 

Residual standard error: 4.579 on 39 degrees of freedom
Multiple R-Squared: 0.3237,     Adjusted R-squared: 0.237 
F-statistic: 3.734 on 5 and 39 degrees of freedom,      p-value: 0.007397 

> test.terms(mod.full)
                 Sum Sq Df F value    Pr(>F)    
(Intercept)      984.14  1 46.9348 3.436e-08 ***
status             2.20  1  0.1050   0.74767    
fcategory         89.67  2  2.1383   0.13147    
status:fcategory 175.49  2  4.1846   0.02257 *  
Residuals        817.76 39                      
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 
> mod.m<-update(mod.full, ~.~-status:fcategory)
Error in model.frame.default(formula = ~conform ~ 1, drop.unused.levels = TRUE) : 
        object is not a matrix
> mod.m<-update(mod.full, .~.-status:fcategory)  # fails after summary, test.terms, & error
Error in parse(file, n, text, prompt) : parse error
> 

----------------- second listing, omitting error in call to update, everything works -------

R : Copyright 2000, The R Development Core Team
Version 1.0.0  (February 29, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(fox)
> data(Moore)
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)

Call:
lm(formula = conform ~ status * fcategory)

Residuals:
    Min      1Q  Median      3Q     Max 
-8.6250 -2.9000 -0.2727  2.7273 11.3750 

Coefficients:
                          Estimate Std. Error t value Pr(>|t|)    
(Intercept)                11.8571     1.7307   6.851 3.44e-08 ***
statuslow                   0.7679     2.3699   0.324   0.7477    
fcategorylow                5.5429     2.6813   2.067   0.0454 *  
fcategorymedium             2.4156     2.2140   1.091   0.2819    
statuslow.fcategorylow     -9.2679     3.4507  -2.686   0.0106 *  
statuslow.fcategorymedium  -7.7906     3.5728  -2.181   0.0353 *  
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 

Residual standard error: 4.579 on 39 degrees of freedom
Multiple R-Squared: 0.3237,     Adjusted R-squared: 0.237 
F-statistic: 3.734 on 5 and 39 degrees of freedom,      p-value: 0.007397 

> test.terms(mod.full)
                 Sum Sq Df F value    Pr(>F)    
(Intercept)      984.14  1 46.9348 3.436e-08 ***
status             2.20  1  0.1050   0.74767    
fcategory         89.67  2  2.1383   0.13147    
status:fcategory 175.49  2  4.1846   0.02257 *  
Residuals        817.76 39                      
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 
> mod.m<-update(mod.full, .~.-status:fcategory) # works following summary & test.terms
> mod.m

Call:
lm(formula = conform ~ status + fcategory)

Coefficients:
    (Intercept)        statuslow     fcategorylow  fcategorymedium  
       14.72356         -4.60667          0.08089         -1.09511  

> 

----- third listing, omitting call to test.terms, everything works --------------------

R : Copyright 2000, The R Development Core Team
Version 1.0.0  (February 29, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(fox)
> data(Moore)
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)

Call:
lm(formula = conform ~ status * fcategory)

Residuals:
    Min      1Q  Median      3Q     Max 
-8.6250 -2.9000 -0.2727  2.7273 11.3750 

Coefficients:
                          Estimate Std. Error t value Pr(>|t|)    
(Intercept)                11.8571     1.7307   6.851 3.44e-08 ***
statuslow                   0.7679     2.3699   0.324   0.7477    
fcategorylow                5.5429     2.6813   2.067   0.0454 *  
fcategorymedium             2.4156     2.2140   1.091   0.2819    
statuslow.fcategorylow     -9.2679     3.4507  -2.686   0.0106 *  
statuslow.fcategorymedium  -7.7906     3.5728  -2.181   0.0353 *  
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 

Residual standard error: 4.579 on 39 degrees of freedom
Multiple R-Squared: 0.3237,     Adjusted R-squared: 0.237 
F-statistic: 3.734 on 5 and 39 degrees of freedom,      p-value: 0.007397 

> mod.m<-update(mod.full, ~.~-status:fcategory)
Error in model.frame.default(formula = ~conform ~ 1, drop.unused.levels = TRUE) : 
        object is not a matrix
> mod.m<-update(mod.full, .~.-status:fcategory) # works following summary and error
> mod.m

Call:
lm(formula = conform ~ status + fcategory)

Coefficients:
    (Intercept)        statuslow     fcategorylow  fcategorymedium  
       14.72356         -4.60667          0.08089         -1.09511  

> 


----------- fourth listing, omitting call to summary, everything works ------------------

R : Copyright 2000, The R Development Core Team
Version 1.0.0  (February 29, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(fox)
> data(Moore)
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> test.terms(mod.full)
                 Sum Sq Df F value    Pr(>F)    
(Intercept)      984.14  1 46.9348 3.436e-08 ***
status             2.20  1  0.1050   0.74767    
fcategory         89.67  2  2.1383   0.13147    
status:fcategory 175.49  2  4.1846   0.02257 *  
Residuals        817.76 39                      
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 
> mod.m<-update(mod.full, ~.~-status:fcategory)
Error in model.frame.default(formula = ~conform ~ 1, drop.unused.levels = TRUE) : 
        object is not a matrix
> mod.m<-update(mod.full, .~.-status:fcategory) # works following test.terms and error
> mod.m

Call:
lm(formula = conform ~ status + fcategory)

Coefficients:
    (Intercept)        statuslow     fcategorylow  fcategorymedium  
       14.72356         -4.60667          0.08089         -1.09511  


------------------------ listing of dataset ----------------------------------------

> Moore
   subject status conform fcategory fscore
1        1    low       8       low     37
2        2    low       4      high     57
3        3    low       8      high     65
4        4    low       7       low     20
5        5    low      10       low     36
6        6    low       6       low     18
7        7    low      12    medium     51
8        8    low       4    medium     44
9        9    low      13       low     31
10      10    low      12       low     36
11      11    low       4    medium     42
12      12    low      13      high     56
13      13    low       7       low     28
14      14    low       9    medium     43
15      15    low       9      high     65
16      16    low      24      high     57
17      17    low       6       low     28
18      18    low       7      high     61
19      19    low      23      high     57
20      20    low      13      high     55
21      21    low       8       low     17
22      22    low      12       low     35
23      23   high      19      high     68
24      24   high      12    medium     41
25      25   high      21       low     16
26      26   high       9      high     63
27      27   high      23       low     15
28      28   high       7      high     54
29      29   high      17    medium     48
30      30   high      14    medium     42
31      31   high      11      high     59
32      32   high      16    medium     45
33      33   high      15       low     30
34      34   high      20    medium     44
35      35   high       8    medium     42
36      36   high      12       low     22
37      37   high      14      high     52
38      38   high      14    medium     42
39      39   high      17    medium     41
40      40   high       7    medium     50
41      41   high      17    medium     39
42      42   high      13      high     57
43      43   high      16       low     35
44      44   high      10      high     52
45      45   high      15    medium     44
> 

------------------ function test.terms and functions it calls ------------------------

> test.terms
function (object, ...) 
{
    UseMethod("test.terms")
}

> test.terms.lm
function (mod, error, ...) 
{
    if (!missing(error)) {
        sumry <- summary(error, corr = FALSE)
        s2 <- sumry$sigma^2
        error.df <- error$df.residual
        error.SS <- s2 * error.df
    }
    intercept <- has.intercept(mod)
    p <- length(coefficients(mod))
    I.p <- diag(p)
    Source <- term.names(mod)
    n.terms <- length(Source)
    SS <- rep(0, n.terms + 1)
    df <- rep(0, n.terms + 1)
    F <- rep(0, n.terms + 1)
    p <- rep(0, n.terms + 1)
    assign <- mod$assign
    for (term in 1:n.terms) {
        subs <- which(assign == term - intercept)
        hyp.matrix <- I.p[subs, ]
        test <- if (missing(error)) 
            linear.hypothesis(mod, hyp.matrix, ...)
        else linear.hypothesis(mod, hyp.matrix, error.SS = error.SS, 
            error.df = error.df, ...)
        SS[term] <- test$SS
        df[term] <- test$df[1]
        F[term] <- test$F
        p[term] <- test$p
    }
    Source[n.terms + 1] <- "Residuals"
    df.res <- if (missing(error)) 
        mod$df.residual
    else error.df
    sumry <- summary(mod, corr = FALSE)
    s2 <- sumry$sigma^2
    SS[n.terms + 1] <- if (missing(error)) 
        s2 * df.res
    else error.SS
    df[n.terms + 1] <- df.res
    F[n.terms + 1] <- NA
    p[n.terms + 1] <- NA
    result <- data.frame(SS, df, F, p)
    row.names(result) <- Source
    names(result) <- c("Sum Sq", "Df", "F value", "Pr(>F)")
    class(result) <- c("anova", "data.frame")
    result
}

> has.intercept
function (object, ...) 
{
    UseMethod("has.intercept")
}

> term.names
function (object, ...) 
{
    UseMethod("term.names")
}

> term.names.default
function (model) 
{
    term.names <- labels(terms(model))
    if (has.intercept(model)) 
        c("(Intercept)", term.names)
    else term.names
}

> linear.hypothesis
function (object, ...) 
{
    UseMethod("linear.hypothesis")
}

> linear.hypothesis.lm
function (mod, hypothesis.matrix, rhs = 0, white.adjust = F, 
    error.SS, error.df) 
{
    sumry <- summary(mod, corr = FALSE)
    s2 <- if (missing(error.SS)) 
        sumry$sigma^2
    else error.SS/error.df
    V <- if (white.adjust == FALSE) 
        sumry$cov.unscaled
    else hccm(mod, type = white.adjust)/s2
    b <- coefficients(mod)
    L <- if (is.null(dim(hypothesis.matrix))) 
        t(hypothesis.matrix)
    else hypothesis.matrix
    q <- nrow(L)
    SSH <- t(L %*% b - rhs) %*% inv(L %*% V %*% t(L)) %*% (L %*% 
        b - rhs)
    F <- SSH/(q * s2)
    df <- if (missing(error.df)) 
        mod$df.residual
    else error.df
    p <- 1 - pf(F, q, df)
    list(SS = SSH[1, 1], F = F[1, 1], df = c(q, df), p = p[1, 
        1])
}

> hccm
function (model, type = "hc3") 
{
    if (is.null(class(model)) || class(model) != "lm" || !is.null(weights(mod))) {
        stop("requires unweighted lm")
    }
    sumry <- summary(model, corr = FALSE)
    s2 <- sumry$sigma^2
    V <- sumry$cov.unscaled
    if (type == FALSE) 
        return(s2 * V)
    e <- residuals(model)
    X <- model.matrix(model)
    df.res <- df.residual(model)
    factor <- switch(type, hc0 = 1, hc1 = n/df.res, hc2 = 1/(1 - 
        hat(X)), hc3 = 1/(1 - hat(X))^2)
    V %*% t(X) %*% apply(X, 2, "*", (e^2)/factor) %*% V
}
> 

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows NT 4.0 (build 1381) Service Pack 3

Search Path:
 .GlobalEnv, Moore, package:fox, Autoloads, package:base


|----------------------------------------------------|
| John Fox                          jfox@McMaster.ca |
| Department of Sociology        McMaster University |
|----------------------------------------------------|

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Mar  7 14:43:35 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 07 Mar 2000 08:43:35 -0600
Subject: [Rd] Problems with nlme (PR#471)
In-Reply-To: berwin@maths.uwa.edu.au's message of "Tue, 7 Mar 2000 08:27:59 +0100 (MET)"
References: <200003070727.IAA11450@pubhealth.ku.dk>
Message-ID: <6rwvnelu20.fsf@franz.stat.wisc.edu>

berwin@maths.uwa.edu.au writes:

> bossiaea:/opt/R$ R CMD check -c nlme 
> Checking package `nlme' ...
>  Massaging examples into `nlme-Ex.R' ...
>  Running examples in package `nlme' ...
>  ERROR
> 
> The end of nlme-Ex.Rout is:
> 
> > rm(list = ls(all = TRUE)); .Random.seed <- c(0,rep(7654,3))
> > ###--- >>> `anova.gls' <<<----- Compare Likelihoods of Fitted Objects
> > 
> > 	## alias	 help(anova.gls)
> > 
> > ##___ Examples ___:
> > 
> > library(nlme)
> > data(Ovary)
> > # AR(1) errors within each Mare
> > fm1 <- gls(follicles ~ sin(2*pi*Time) + cos(2*pi*Time), Ovary,
> +            correlation = corAR1(form = ~ 1 | Mare))
> Warning message: 
> NA/Inf replaced by maximum positive value 
> > anova(fm1)
> Denom. DF: 305 
>                    numDF  F-value p-value
> (Intercept)            1 354.7375  <.0001
> sin(2 * pi * Time)     1  18.5035  <.0001
> cos(2 * pi * Time)     1   1.6633  0.1981
> > # variance changes with a power of the absolute fitted values?
> > fm2 <- update(fm1, weights = varPower())
> Error in update.gls(fm1, weights = varPower()) : 
> 	subscript out of bounds
> Execution halted
> 
> 
> (R CMD check MASS is also failing on an example that uses update.gls.)
> 
> On my machine at home I run into troubles even faster when running `R
> CMD check nlme'.  One of the early examples chokes on the line:
> > data(Orthodont)
> 
> I had done a "clean install" on that machine, i.e., I first blew away
> the older installation of R.  It seems that the datasets Orthodont and
> Pixel have been distributed with the nls library in earlier R versions
> but not so in R 1.0.0.  But they are not distributed with the current
> version of nlme either.

Ah, it appears that I need to update the nlme library.  I probably
won't be able to do that until tomorrow at the earliest.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar  7 14:43:39 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Mar 2000 15:43:39 +0100
Subject: [Rd] update fails after specific sequence of steps (PR#474)
In-Reply-To: jfox@mcmaster.ca's message of "Tue, 7 Mar 2000 15:08:03 +0100 (MET)"
References: <200003071408.PAA18937@pubhealth.ku.dk>
Message-ID: <x2wvnekfhg.fsf@blueberry.kubism.ku.dk>


Strange things happen on Unix too. 

> source('fox.R')
> Moore<-read.table('Moore.txt')
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)
...
> mod.m<-update(mod.full, ~.~-status:fcategory)
Error in model.frame.default(formula = ~conform ~ 1, drop.unused.levels = TRUE) : 
	object is not a matrix
> mod.m<-update(mod.full, .~.-status:fcategory) # works following summary and error
> mod.m

Call:
lm(formula = conform ~ status + fcategory)

Coefficients:
    (Intercept)        statuslow     fcategorylow  fcategorymedium  
       14.72356         -4.60667          0.08089         -1.09511  


#### Well you *thought* it worked, but watch: ####
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)

Call:
lm(formula = conform ~ L×@ * fcategory)
                       ^^^^^^^

...and the attached dataframe is corrupted. Must investigate further.

> ls("Moore")
[1] "conform"   "fcategory" "fscore"    "L×@"      "subject"  
                                         ^^^^^^^
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgutwin@us.ibm.com  Tue Mar  7 15:36:01 2000
From: pgutwin@us.ibm.com (pgutwin@us.ibm.com)
Date: Tue, 7 Mar 2000 16:36:01 +0100 (MET)
Subject: [Rd] Error compiling R on RS6000 (PR#475)
Message-ID: <200003071536.QAA20337@pubhealth.ku.dk>

Full_Name: Paul Gutwin
Version: R-1.0.0
OS: AIX 4.2.1
Submission from: (NULL) (198.133.22.67)


R-1.0.0 fails to compile. I'm using the config.cache file from a successful
compliation of R-0.65.0 (prob #290, fixed thanks to Thomas Vogels @ CMU). 
Compiling R-1.0.0 fails with the following error messages:

make
Target "R" is up to date.
	gcc -I. -I../include -I../../src/include -I../../src/include/R_ext 
-DHAVE_CONFIG_H -mno-fp-in-toc -g -O2 -c Rsock.c -o Rsock.o
In file included from Rsock.c:34:
/usr/include/unistd.h:162: parse error before `lseek64'
/usr/include/unistd.h:162: parse error before `off64_t'
/usr/include/unistd.h:162: warning: data definition has no type or storage
class
In file included from /usr/include/sys/lockf.h:41,
                 from /usr/include/unistd.h:382,
                 from Rsock.c:34:
/usr/include/sys/stat.h:127: parse error before `soff_t'
/usr/include/sys/stat.h:127: warning: no semicolon at end of struct or union
/usr/include/sys/stat.h:146: parse error before `st_size'
/usr/include/sys/stat.h:146: warning: data definition has no type or storage
class
In file included from /usr/include/unistd.h:382,
                 from Rsock.c:34:
/usr/include/sys/lockf.h:60: parse error before `off64_t'
In file included from Rsock.c:34:
/usr/include/unistd.h:417: parse error before `off64_t'
/usr/include/unistd.h:438: parse error before `off64_t'
/usr/include/unistd.h:440: parse error before `ualarm'
/usr/include/unistd.h:440: warning: parameter names (without types) in function
declaration
/usr/include/unistd.h:440: warning: data definition has no type or storage
class
/usr/include/unistd.h:441: warning: parameter names (without types) in function
declaration
/usr/include/unistd.h:474: parse error before `fclear64'
/usr/include/unistd.h:474: parse error before `off64_t'
/usr/include/unistd.h:474: warning: data definition has no type or storage
class
/usr/include/unistd.h:475: parse error before `off64_t'
make: 1254-004 The error code from the last command is 1.


Stop.
make: 1254-004 The error code from the last command is 2.


Stop.
make: 1254-004 The error code from the last command is 1.


Stop.
make: 1254-004 The error code from the last command is 1.


Stop.

Compilation exited abnormally with code 2 at Tue Mar  7 10:15:58


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Mar  7 15:45:29 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 7 Mar 2000 16:45:29 +0100 (CET)
Subject: [Rd] Error compiling R on RS6000 (PR#475)
In-Reply-To: <200003071536.QAA20337@pubhealth.ku.dk>
References: <200003071536.QAA20337@pubhealth.ku.dk>
Message-ID: <14533.9241.474692.985917@galadriel.ci.tuwien.ac.at>

>>>>> On Tue, 7 Mar 2000 16:36:01 +0100 (MET),
>>>>> pgutwin  (p) wrote:

p> Full_Name: Paul Gutwin
p> Version: R-1.0.0
p> OS: AIX 4.2.1
p> Submission from: (NULL) (198.133.22.67)


p> R-1.0.0 fails to compile. I'm using the config.cache file from a successful
p> compliation of R-0.65.0 

Uhm, why would you want to do that???

Have you tried building from a clean (fresh) source tree?

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar  7 15:47:47 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Mar 2000 16:47:47 +0100
Subject: [Rd] Error compiling R on RS6000 (PR#475)
In-Reply-To: pgutwin@us.ibm.com's message of "Tue, 7 Mar 2000 16:36:01 +0100 (MET)"
References: <200003071536.QAA20337@pubhealth.ku.dk>
Message-ID: <x2r9dmkcik.fsf@blueberry.kubism.ku.dk>

pgutwin@us.ibm.com writes:

> Full_Name: Paul Gutwin
> Version: R-1.0.0
> OS: AIX 4.2.1
> Submission from: (NULL) (198.133.22.67)
> 
> 
> R-1.0.0 fails to compile. I'm using the config.cache file from a successful
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> compliation of R-0.65.0 (prob #290, fixed thanks to Thomas Vogels @ CMU). 
  ^^^^^^^^^^^^^^^^^^^^^^^

What on earth gives you the idea that that might work?? The configure
scripts have changed many a time since 0.65.0. Or was config.cache a
typo?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Tue Mar  7 18:32:52 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Tue, 7 Mar 2000 19:32:52 +0100 (MET)
Subject: [Rd] lm(rnorm(1000)~rnorm(1000)) kills rw1000 (PR#476)
Message-ID: <200003071832.TAA21815@pubhealth.ku.dk>


First:

	R core: (Thank You!)^HUGE_VAL

Now, down to business:

In a loop or in repeated command lines:

system.time(lm(rnorm(1000)~rnorm(1000)))

( or lm(rnorm(1000)~rnorm(1000))$coef )

fails after several iterations with the Windows message 'This program
has performed an illegal operation and will be shut down. If the
problem persists, please contact the vendor'.

clicking on DETAILS reveals:

RGUI caused an invalid page fault in
module R.DLL at 0137:100e938a.
Registers:
EAX=02dd9918 CS=0137 EIP=100e938a EFLGS=00010283
EBX=02bb9b18 SS=013f ESP=0253d4c0 EBP=0253e578
ECX=02bb9b2c DS=013f ESI=02dd9848 FS=3ebf
EDX=00000001 ES=013f EDI=0010a1ba GS=0000
Bytes at CS:EIP:
89 14 b8 8b 8d e8 ef ff ff 8b 9d c0 ef ff ff 47 
Stack dump:
00000000 02bb9cbc 02559278 1002fb4f 51eb851f 02bbac20 02bbac20 1002fb77 00000001 00000001 72707865 69737365 00000001 0262d9c4 8038456c 17f70bef 


Likewise with Rterm.

This also happens on rw0990.

My office setup is a trifle unusual - it is a SUNPCi board (actually
an AMDK6) that fits in an Ultra 10. Some of the Windows drivers are
replaced by Sun versions that allow access to system services on the
UltraSparc. There are bugs in this setup, but on the whole it seems
fairly stable when using applications like SAS and Office.

It does not happen on rw0901 or rw0651 (? version number ?) on my HOME
PC. Nor on R 0.90.1 under Solaris

Enclosing EITHER 'rnorm(1000)' within I( ) seems to cure this
behavior. (It also produces the behavior I expected, viz. regressing
one set of random normal deviates on another. FWIW, neither Splus3.4
for Solaris nor R 0.90.1 produce the result I expected unless I() is
used.)

Chuck Berry

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows 9x 4.0 (build 1111)  B

Search Path:
 .GlobalEnv, Autoloads, package:base




-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  7 18:51:58 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 7 Mar 2000 18:51:58 +0000 (GMT Standard Time)
Subject: [Rd] lm(rnorm(1000)~rnorm(1000)) kills rw1000 (PR#476)
In-Reply-To: <200003071832.TAA21815@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.05.10003071851000.98-100000@tern.stats>

On Tue, 7 Mar 2000 cberry@tajo.ucsd.edu wrote:

> It does not happen on rw0901 or rw0651 (? version number ?) on my HOME
> PC. Nor on R 0.90.1 under Solaris

It does happen on R 1.0.0 on Solaris and on rw1000 on a real PC.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Mar  7 19:17:30 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 7 Mar 2000 11:17:30 -0800 (PST)
Subject: [Rd] lm(rnorm(1000)~rnorm(1000)) kills rw1000 (PR#476)
In-Reply-To: <Pine.WNT.4.05.10003071851000.98-100000@tern.stats>
Message-ID: <Pine.GSO.4.21.0003071108270.27319-100000@mail.biostat.washington.edu>

On Tue, 7 Mar 2000, Prof Brian D Ripley wrote:

> On Tue, 7 Mar 2000 cberry@tajo.ucsd.edu wrote:
> 
> > It does not happen on rw0901 or rw0651 (? version number ?) on my HOME
> > PC. Nor on R 0.90.1 under Solaris
> 
> It does happen on R 1.0.0 on Solaris and on rw1000 on a real PC.

Something strange is happening where we ensure that the response does not
appear on the rhs of the formula.  

At lines 1643ff of model.c we count how many columns of the design matrix
are needed for each model term.  This count is not done if the term is the
response, which leaves the count uninitialised.

We then use this uninitialised count at 1673ff to construct the assign
attribute.

	-thomas



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Mar  7 19:24:06 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 7 Mar 2000 11:24:06 -0800 (PST)
Subject: [Rd] lm(rnorm(1000)~rnorm(1000)) kills rw1000 (PR#476)
In-Reply-To: <Pine.GSO.4.21.0003071108270.27319-100000@mail.biostat.washington.edu>
Message-ID: <Pine.GSO.4.21.0003071120060.27319-100000@mail.biostat.washington.edu>

On Tue, 7 Mar 2000, Thomas Lumley wrote:

> On Tue, 7 Mar 2000, Prof Brian D Ripley wrote:
> 
> > On Tue, 7 Mar 2000 cberry@tajo.ucsd.edu wrote:
> > 
> > > It does not happen on rw0901 or rw0651 (? version number ?) on my HOME
> > > PC. Nor on R 0.90.1 under Solaris
> > 
> > It does happen on R 1.0.0 on Solaris and on rw1000 on a real PC.
> 
> Something strange is happening where we ensure that the response does not
> appear on the rhs of the formula.  
> 
> At lines 1643ff of model.c we count how many columns of the design matrix
> are needed for each model term.  This count is not done if the term is the
> response, which leaves the count uninitialised.
> 
> We then use this uninitialised count at 1673ff to construct the assign
> attribute.

Incidentally, this command doesn't do what the user probably thinks it
does:  lm thinks that the rnorm(1000) on the lhs is the same as the one on
the rhs and drops it from the model, fitting only an intercept.

I think this is unavoidable, since model.matrix can't be expected to know
whether an arbitrary function is deterministic or random.

The work-around is
	a<-rnorm(1000)
	b<-rnorm(1000)
	lm(a~b)


	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Mar  7 19:39:47 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 7 Mar 2000 11:39:47 -0800 (PST)
Subject: [Rd] lm(rnorm(1000)~rnorm(1000)) kills rw1000 (PR#476)
In-Reply-To: <Pine.GSO.4.21.0003071120060.27319-100000@mail.biostat.washington.edu>
Message-ID: <Pine.GSO.4.21.0003071134290.27319-100000@mail.biostat.washington.edu>


A patch is

1649,1652c1649
<       if (j == rhs_response) {
<           INTEGER(count)[j]=0;  /* need this initialised */
<           continue;
<       }
---
>       if (j == rhs_response) continue;



	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar  7 19:48:24 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Mar 2000 20:48:24 +0100
Subject: [Rd] lm(rnorm(1000)~rnorm(1000)) kills rw1000 (PR#476)
In-Reply-To: Thomas Lumley's message of "Tue, 7 Mar 2000 11:39:47 -0800 (PST)"
References: <Pine.GSO.4.21.0003071134290.27319-100000@mail.biostat.washington.edu>
Message-ID: <x2aekah88n.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> A patch is
> 
> 1649,1652c1649
> <       if (j == rhs_response) {
> <           INTEGER(count)[j]=0;  /* need this initialised */
> <           continue;
> <       }
> ---
> >       if (j == rhs_response) continue;

Hmm, this wouldn't happen to cure the update(.~.-whateveritwas) case
by jfox, would it? (darn nasty one that one...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From klittle@iecodesign.com  Tue Mar  7 20:22:09 2000
From: klittle@iecodesign.com (Kevin Little)
Date: Tue, 7 Mar 2000 14:22:09 -0600
Subject: [Rd] Re: [Omega-devel] StatDataML Description element
In-Reply-To: <87bt4sgmzw.fsf@alpha.cfas.washington.edu>
Message-ID: <LMBBIPCDANABKBDOOCEHKEFJEIAA.klittle@iecodesign.com>

This is a multi-part message in MIME format.

------=_NextPart_000_0033_01BF8840.85DCFC80
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

  [from your draft]
  The description element
  <!ELEMENT description (title?, source?, date?, version?, comment?)>

  <!ELEMENT title (#PCDATA) >
  <!ELEMENT source (#PCDATA) >
  <!ELEMENT date (#PCDATA) >
  <!ELEMENT version (#PCDATA) >
  <!ELEMENT comment (#PCDATA) >

  The description element itself consists of five elements (title, source,
date, comment, version) which are simple strings and include no other
elements. It is used to provide meta-information about a dataset that is
typically not needed for computations on the data itself.

One of the key issues I worry about is "data set provenance" and I encourage
my clients to be able to trace back to one or more sources to inform
themselves of the quality of the data set (how much reliance they can place
in what they are about to see or manipulate, etc).

1. easy links to an originator would be good e.g. is there any way to use
hypertext in any of the arguments for email or web site referrals?

2. what limits (any?) are there typically on the length of the strings in
the arguments of DESCRIPTION?

3. In S or R or Omega, a statistical dataset's description is always
available by command or menu item (I'm guessing).  Are the arguments
typically available now for any kind of search or filtering or action by my
statistical application (e.g. can I ask the statistical application to only
allow me to work on datasets from a certain source? I guess this is possible
and would be addressed by the application developers, not the developers of
the XML standard but maybe there is something required of the XML standard
to make it possible to hook to applications?)

4. is the list of arguments fixed at five? Or could one allow for multiple
comment1, comment2, ...

[If one can search or otherwise operate on the string in the "comment" field
then I guess you don't need to extend the list of arguments.  That leads to
another question:  how extensible or upgradeable is StatDataML envisioned to
be?  I can imagine a "Data Quality Stamp or Certification" being relevant
within certain communities and it would be nice to have that in the
meta-data description, perhaps as a separate argument.]

Thanks again for your draft proposal on StatDataML, this is a potentially
very important contribution.

Regards
Kevin Little, Ph.D.
Informing Ecological Design, LLC
2213 West Lawn Avenue
Madison, WI  53711
tel 608.251.4355 fax 608.251.0399
email klittle@iecodesign.com


------=_NextPart_000_0033_01BF8840.85DCFC80
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE></TITLE>
<META content=3D"text/html; charset=3Diso-8859-1" =
http-equiv=3DContent-Type>
<META content=3D"MSHTML 5.00.2614.3500" name=3DGENERATOR></HEAD>
<BODY>
<BLOCKQUOTE style=3D"MARGIN-RIGHT: 0px">
  <DIV style=3D"MARGIN-RIGHT: 0px"><FONT color=3D#0000ff face=3DArial =
size=3D2>[from=20
  your draft]</FONT></DIV>
  <DIV style=3D"MARGIN-RIGHT: 0px"><FONT color=3D#0000ff face=3DArial =
size=3D2>The=20
  description element<BR>&lt;!ELEMENT description (title?, source?, =
date?,=20
  version?, comment?)&gt;<BR><BR>&lt;!ELEMENT title (#PCDATA)=20
  &gt;<BR>&lt;!ELEMENT source (#PCDATA) &gt;<BR>&lt;!ELEMENT date =
(#PCDATA)=20
  &gt;<BR>&lt;!ELEMENT version (#PCDATA) &gt;<BR>&lt;!ELEMENT comment =
(#PCDATA)=20
  &gt;<BR><BR>The description element itself consists of five elements =
(title,=20
  source, date, comment, version) which are simple strings and include =
no other=20
  elements. It is used to provide meta-information about a dataset that =
is=20
  typically not needed for computations on the data=20
itself.<BR></DIV></BLOCKQUOTE></FONT>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2>One of the =
key issues I=20
worry about is "data set provenance" and I encourage my clients to be =
able to=20
trace back to one or more sources to&nbsp;inform themselves of the =
quality of=20
the data set (how much reliance they can place in what they are about to =
see or=20
manipulate, etc).&nbsp; </FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial =
size=3D2></FONT>&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2>1. easy =
links to an=20
originator would be good e.g. is <FONT face=3DArial size=3D2>there any =
way to use=20
hypertext in any of the arguments for email or web site=20
referrals?</FONT></FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2><FONT =
face=3DArial=20
size=3D2></FONT></FONT>&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2><FONT =
face=3DArial=20
size=3D2>2. what limits (any?) are there typically on the length of the =
strings in=20
the arguments of&nbsp;DESCRIPTION?</FONT></FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px">&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2>3. In S or =
R or Omega, a=20
statistical dataset's description is always available by command or menu =
item=20
(I'm guessing).&nbsp; Are the arguments typically available now for any =
kind of=20
search or filtering or action by my statistical application (e.g. can I =
ask the=20
statistical application to only allow me to work on datasets from a =
certain=20
source? I guess this is possible and would be addressed by the =
application=20
developers, not the developers of the XML standard but maybe there is =
something=20
required of the XML standard to make it possible to hook to=20
applications?)</FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px">&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2><FONT =
face=3DArial=20
size=3D2>4.&nbsp;is the list of arguments fixed at five? Or could one =
allow for=20
multiple comment1, comment2, ... </FONT></FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2><FONT =
face=3DArial=20
size=3D2></FONT></FONT>&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2><FONT =
face=3DArial=20
size=3D2>[If one can search or otherwise operate on the string in the =
"comment"=20
field then I guess you don't need to extend the list of arguments.&nbsp; =
That=20
leads to another question:&nbsp; how extensible or upgradeable is =
StatDataML=20
envisioned to be?&nbsp; I can imagine a "Data Quality=20
Stamp&nbsp;or&nbsp;Certification" being relevant within certain =
communities=20
and&nbsp;it would be nice to have that in&nbsp;the meta-data =
description,=20
perhaps as a separate argument.]&nbsp; </FONT></FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial =
size=3D2></FONT>&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2><FONT =
color=3D#0000ff=20
face=3DArial size=3D2><FONT color=3D#000000>Thanks again for your draft =
proposal on=20
StatDataML, this is a potentially very important=20
contribution.</FONT></FONT></FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial =
size=3D2></FONT>&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial =
size=3D2>Regards</FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2>
<P><FONT face=3DArial size=3D2>Kevin Little, Ph.D.</FONT> <BR><FONT =
face=3DArial=20
size=3D2>Informing Ecological Design, LLC</FONT> <BR><FONT face=3DArial =
size=3D2>2213=20
West Lawn Avenue</FONT> <BR><FONT face=3DArial size=3D2>Madison, =
WI&nbsp;=20
53711</FONT> <BR><FONT face=3DArial size=3D2>tel 608.251.4355 fax=20
608.251.0399</FONT> <BR><FONT face=3DArial size=3D2>email=20
klittle@iecodesign.com</FONT> </P></DIV></FONT></BODY></HTML>

------=_NextPart_000_0033_01BF8840.85DCFC80--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Tue Mar  7 22:31:43 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 07 Mar 2000 17:31:43 -0500
Subject: [Rd] Error compiling R on RS6000 (PR#475)
In-Reply-To: Peter Dalgaard BSA's message of "07 Mar 2000 16:47:47 +0100"
References: <200003071536.QAA20337@pubhealth.ku.dk> <x2r9dmkcik.fsf@blueberry.kubism.ku.dk>
Message-ID: <871z5m1kfk.fsf@bavaria.ece.cmu.edu>


Hi,

  I'll assume Paul meant config.site which contains all the extra
  compiler and linker flags and those flags are somewhat involved in
  his environment.  Triggered by Paul's email I tried to
  compile R-1.0.0.  It compiles cleanly but dies with "Illegal
  Instruction" upon start.  Sorry, I don't have any further insight
  into this problem at this time.

  I've been working on my Linux box instead of the my AIX workstation
  lately, so I didn't see this earlier.  Actually I've been so busy
  using R, that I've missed to congratulate on the release or 1.0.
  Thanks to all who work on R which has been a tremendous help for me!

  -tom


Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> pgutwin@us.ibm.com writes:
> 
> > Full_Name: Paul Gutwin
> > Version: R-1.0.0
> > OS: AIX 4.2.1
> > Submission from: (NULL) (198.133.22.67)
> > 
> > 
> > R-1.0.0 fails to compile. I'm using the config.cache file from a successful
>                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> > compliation of R-0.65.0 (prob #290, fixed thanks to Thomas Vogels @ CMU). 
>   ^^^^^^^^^^^^^^^^^^^^^^^
> 
> What on earth gives you the idea that that might work?? The configure
> scripts have changed many a time since 0.65.0. Or was config.cache a
> typo?

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Wed Mar  8 08:25:00 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Wed, 8 Mar 2000 09:25:00 +0100 (CET)
Subject: [Rd] Re: [Omega-devel] StatDataML Description element
In-Reply-To: <LMBBIPCDANABKBDOOCEHKEFJEIAA.klittle@iecodesign.com>
Message-ID: <Pine.LNX.4.21.0003080915400.30257-100000@boromir.ci.tuwien.ac.at>


> 
> 1. easy links to an originator would be good e.g. is there any way to use
> hypertext in any of the arguments for email or web site referrals?
> 

as long as all elements include strings, "source" would be the right place
to save a URL 

> 2. what limits (any?) are there typically on the length of the strings in
> the arguments of DESCRIPTION?
> 

interesting question, I think there is no limit.

> 3. In S or R or Omega, a statistical dataset's description is always
> available by command or menu item (I'm guessing).  Are the arguments
> typically available now for any kind of search or filtering or action by my
> statistical application (e.g. can I ask the statistical application to only
> allow me to work on datasets from a certain source? I guess this is possible
> and would be addressed by the application developers, not the developers of
> the XML standard but maybe there is something required of the XML standard
> to make it possible to hook to applications?)
> 

in our alpha implementation, readSDML returns the read object with an
additional "SDMLdescription" attribute. One can check, if e.g. the source
is valid in a special application.

> 4. is the list of arguments fixed at five? Or could one allow for multiple
> comment1, comment2, ...
> 

<!ELEMENT description (title?, source?, date?, version?, comment*)>

allows comments until the end of time (will be added in StatDataML.dtd,
thanks for the hint). 

> [If one can search or otherwise operate on the string in the "comment" field
> then I guess you don't need to extend the list of arguments.  That leads to
> another question:  how extensible or upgradeable is StatDataML envisioned to
> be?  I can imagine a "Data Quality Stamp or Certification" being relevant
> within certain communities and it would be nice to have that in the
> meta-data description, perhaps as a separate argument.]
> 

something like a RSA-key included in the description? will think about
this! 

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Mar  8 09:16:39 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 8 Mar 2000 10:16:39 +0100
Subject: [Rd] possible BUG with as.data.frame() and/or [.data.frame
Message-ID: <000501bf88df$039febc0$a9021aac@joelschlaegel>



Here is a possible BUG with as.data.frame() and/or [.data.frame which broke
Michael Lapsleys RODBC-Code.
Can anyone confirm it is a bug or a 'feature' of the prototype?


tablename <- "abc"
a <- as.data.frame(cbind("abc", 1:3))
b <- as.data.frame(cbind(tablename, 1:3))

# ok
> a
   V1 V2
1 abc  1
2 abc  2
3 abc  3

# missing column name
> b
  tablename
1       abc 1
2       abc 2
3       abc 3

# subsetting ok
> b[1,1]
[1] abc
Levels:  abc

# subsetting fails
> b[1,2]
Error in [.data.frame(b, 1, 2) : undefined columns selected


##by contrast
> data.frame(cbind(tablename, 1:3))
  tablename Var.2
1       abc     1
2       abc     2
3       abc     3

Regards


--
Dr. Jens Oehlschlägel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 München

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Mar  8 09:14:38 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 8 Mar 2000 10:14:38 +0100
Subject: [Rd] RODBC: follow up
Message-ID: <000401bf88de$bb153630$a9021aac@joelschlaegel>



Hi Michael,
Here is the result of my first testing:

(0) Dr. Watson
Sorry, I should have given a more precise description: by default in R
exists a function with the name 'table', if you use this name as in

  odbcPrimaryKeys(0, table)

a Dr. Watson occurs, because table does not give a table name.
However, it is always a good idea to prevent Dr. Watsons, even if it is
triggered by a stupid user, as in my case.


(1, may be Davids comment already solves this?)
There are still some problems with sqlTables() and sqlQuery() which should
return a data.frame, but only return one line.
I tried with MS Access and Oracle, and now odbcGetErrMsg() somewhat explains
the problem.

sqlTables(0)
  TABLE_QUALIFIER TABLE_OWNER TABLE_NAME   TABLE_TYPE REMARKS
1    C:\\TEMP\\db          NA   MSysACEs SYSTEM TABLE      NA
Browse[1]> odbcGetErrMsg(channel)
[1] "[RODBC]ERROR: Row count not supported"


Why is this? If it is generally possible, that some ODBC drivers do not
support Row count,
then we need to check odbcGetErrMsg() after each of those functions, which
are expected to return a data.frame.
Or better those functions have to check on their own and to build up the
COMPLETE data frame using odbcFetchRow()
until all rows are fetched. Of course this should not be R-code but C-code,
as looping in R is not a good idea.



(2)
in sqlSave()

  if (any(sqlTables(0)[3] == tablename)) {

probably should read

  if (any(sqlTables(channel)[3] == tablename)) {

furthermore if sqlTables() fails with "[RODBC]ERROR: Row count not
supported"
this check for existence is currently not reliable (sqlTables() silently
returns a one-line data.frame).



(3, see posting to r-devel)
in sqlSave()

  newname <- as.data.frame(cbind(NA, NA, tablename, as.matrix(names(dat)),
    12, "varchar", 255, 255, NA, NA, 1, NA))

creates a data.frame with "" as column names (except for "tablename" as
third column name)
I don't know whether this is a R bug or expected behaviour. However it
currently creates trouble as the later call of

  query <- sqltablecreate(tablename, newname, keys = 0)

fails at

Browse[1]>
debug: if (coldata[i, 11] == 1) {
    null <- "NULL"
} else {
    null <- "NOT NULL"
}
Browse[1]>
Error in [.data.frame(coldata, i, 11) : undefined columns selected


because newname/coldata misses colnames

  debug: print(coldata)
  Browse[1]>
          tablename
1 NA NA        dd V1 12 varchar 255 255 NA NA 1 NA
2 NA NA        dd V2 12 varchar 255 255 NA NA 1 NA


BTW: why use as.matrix(names(dat)) ?



(4) in sqltablecreate

  gsub("[^A-Za-z]+", "", as.character(coldata[i, 4]))

destroys numbers in column names, rather use

  gsub("[^A-Za-z0-9]+", "", as.character(coldata[i, 4]))


Furthermore think about substituting '_' in SQLNAMES to '.' in
RNAMEodbcColumns(channel, table)S and vice versa.
  gsub("[.]", "_", RNAME)
  gsub("[_]", ".", SQLNAME)


(5) in several functions you use

  if (!any(sqlTables(channel) == sqtable)) )

shouldn't that read

  if (!any(sqlTables(channel)[4] == sqtable))

?

The above mentioned one-line-only problem with sqlTables() of course breaks
this code


(6) Some more comments (perhaps due to my ignorance about ODBC, can ODBC
write data without sending sql statements?)

(6.1) looping
sqlwrite() sqlgetresults() uses for-loops for writing/reading data rowwise.
I expect this to be rather slow.
Is it possible to have this done in C instead of R?
If in R, might it be that the sequence of multiple rbind() leads to memory
segmentation (growing lists)??
May be one should ask  on R-Help, if it is better to first create an object
of approbriate size and then replacing single rows.

(6.2) block read/write
Reading all rows at a time with sqlgetresults() could run into memory
trouble.
Fetching single rows using odbcFetchRow() probably creates slow looping
problems in R.
I think the interface would become more suitable for big datasets if it had
functions for writing and reading BLOCKS of rows. E.g. sqlgetresults() could
get a parameter nmax= .

(6.3) sqlCopy()
Convert query results into a data.frame before sending them to another
channel could lead to memory trouble.
Better would be a lowlevel implementation in C, which copies rowwise.

Regards


Jens

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar  8 10:14:17 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Mar 2000 11:14:17 +0100
Subject: [Rd] possible BUG with as.data.frame() and/or [.data.frame
In-Reply-To: "Jens Oehlschl?gel-Akiyoshi"'s message of "Wed, 8 Mar 2000 10:16:39 +0100"
References: <000501bf88df$039febc0$a9021aac@joelschlaegel>
Message-ID: <x2g0u1wyyu.fsf@blueberry.kubism.ku.dk>

"Jens Oehlschlägel-Akiyoshi" <jens.oehlschlaegel-akiyoshi@mdfactory.de> writes:

> Here is a possible BUG with as.data.frame() and/or [.data.frame which broke
> Michael Lapsleys RODBC-Code.
> Can anyone confirm it is a bug or a 'feature' of the prototype?
> 
> 
> tablename <- "abc"
> a <- as.data.frame(cbind("abc", 1:3))
> b <- as.data.frame(cbind(tablename, 1:3))
> 
> # ok
> > a
>    V1 V2
> 1 abc  1
> 2 abc  2
> 3 abc  3
> 
> # missing column name
> > b
>   tablename
> 1       abc 1
> 2       abc 2
> 3       abc 3
> 
> # subsetting ok
> > b[1,1]
> [1] abc
> Levels:  abc
> 
> # subsetting fails
> > b[1,2]
> Error in [.data.frame(b, 1, 2) : undefined columns selected
> 
> 
> ##by contrast
> > data.frame(cbind(tablename, 1:3))
>   tablename Var.2
> 1       abc     1
> 2       abc     2
> 3       abc     3


It's a prototype "feature"...
...
Version 3.4 Release 1 for Sun SPARC, SunOS 5.3 : 1996 
...
>  tablename <- "abc"
>  b <- as.data.frame(cbind(tablename, 1:3))
> b
  tablename   
1       abc 1
2       abc 2
3       abc 3
> b[,2]
Error in "[.data.frame"(b,  , 2): undefined columns selected
Dumped


This is a conspiracy of three things: 

1) The deparse.level feature of cbind (which is unsettable, but the
   internals still behave as if deparse.level=1) which causes a
   deparsing of simple arguments (i.e. symbols) into colnames, leaving
   others blank.

2) as.data.frame.matrix expects that if colnames are present, they can
   just be copied to the names() of the result

3) "[.data.frame" explicitly checks whether a column name is blank
   after subsetting, and protests if it is. 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Mar  8 10:16:30 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 8 Mar 2000 10:16:30 +0000 (GMT)
Subject: [Rd] possible BUG with as.data.frame() and/or [.data.frame
Message-ID: <200003081016.KAA05882@toucan.stats.ox.ac.uk>

> From: "Jens Oehlschlägel-Akiyoshi" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
> Date: Wed, 8 Mar 2000 10:16:39 +0100
> 
> Here is a possible BUG with as.data.frame() and/or [.data.frame which broke
> Michael Lapsleys RODBC-Code.

> Can anyone confirm it is a bug or a 'feature' of the prototype?

It's the same in S-PLUS 3.4, but different in 2000 and 5.1. In short,
it seems a bug in Svr3 that have been fixed since in S-PLUS, but
one could argue that it is intentional.

> tablename <- "abc"
> a <- as.data.frame(cbind("abc", 1:3))
> b <- as.data.frame(cbind(tablename, 1:3))
> 
> # ok
> > a
>    V1 V2
> 1 abc  1
> 2 abc  2
> 3 abc  3
> 
> # missing column name
> > b
>   tablename
> 1       abc 1
> 2       abc 2
> 3       abc 3

It's empty not missing.
> names(b)
[1] "tablename" ""         

Here 2000 and 5.1 give

  tablename X.2 
1       abc   1
2       abc   2
3       abc   3


There's an easy fix here:

as.data.frame.matrix can fixed by adding the two lines after
collabs <- dn[[2]]

    if(any(empty <- nchar(collabs)==0)) 
        collabs[empty] <- paste("V", 1:ncols, sep = "")[empty]

I am inclined to regard this as a reported bug, and fix it in R-release.
I am not sure I know what the optional argument in as.data.frame.matrix is
supposed to do: it seems documented nowhere.  On the other hand, the
behaviour has been there for a long time undetected (in R).


> # subsetting ok
> > b[1,1]
> [1] abc
> Levels:  abc
> 
> # subsetting fails
> > b[1,2]
> Error in [.data.frame(b, 1, 2) : undefined columns selected

That appears to be deliberate: you cannot select unnamed columns.


As for the original code that triggers the problem:

   in sqlSave() in RODBC
   
     newname <- as.data.frame(cbind(NA, NA, tablename, as.matrix(names(dat)),
       12, "varchar", 255, 255, NA, NA, 1, NA))

it is almost always a good idea to name the arguments to cbind.



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Mar  8 10:34:25 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 8 Mar 2000 11:34:25 +0100
Subject: [Rd] RE: [R] RODBC
In-Reply-To: <200003081028.KAA05923@toucan.stats.ox.ac.uk>
Message-ID: <001501bf88e9$e0b32ea0$a9021aac@joelschlaegel>



Sorry,

I was commenting on the previous windows version (version file says 0.5a)
(the first one which ran under RW.1.0.0)

I have Win NT 4.0 Service pack 5
and R is

> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    0.0
year     2000
month    February
day      29
language R



> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk]
> Sent: Wednesday, March 08, 2000 11:29 AM
> To: dajm@deeq.demon.co.uk; mlapsley@ndirect.co.uk
> Cc: jens.oehlschlaegel-akiyoshi@mdfactory.de
> Subject: Re: [R] RODBC
>
>
>
> > Date: Wed, 8 Mar 2000 08:23:02 +0000
> > From: Michael Lapsley <mlapsley@ndirect.co.uk>
> > To: David Middleton <dajm@deeq.demon.co.uk>
> > Cc: Michael Lapsley <mlapsley@ndirect.co.uk>, Prof Brian Ripley
> <ripley@stats.ox.ac.uk>, jens.oehlschlaegel-akiyoshi@mdfactory.de
> > Subject: Re: [R] RODBC
> > X-Keywords:
> >
> > Dammit!  Sorry, folks, to make such stupid mistakes.
> > New version on my 'web page'.
> >
> > On Tue, Mar 07, 2000 at 08:37:14PM -0300, David Middleton wrote:
> > > i) a typo in sqlgetresults "odbcFetchrow" should be
> "odbcFetchRow" at
> > >    line 420 of RODBC/R/RODBC (binary dist. from Brian Ripley)
> > >    line 356 of RODBC/R/sql.R (your source dist)
> > >
> > > ii) the C source change to RODBCNumRows does not set num[0] in the
> > >     case where handles[channel].nRows == -1.  Thus where
> > >     odbcNumRows previously gave me $num=-1, $stat=1, I now
> > >     $num=1, $stat=-1, so it still just returns the first
> row of the query!
>
> I happen to have my laptop in my office of for a demo in 30 mins, so
> a new Windows version is now up at http://www.stats.ox.ac.uk/pub/bdr.
>
> I have no idea which version Jens has been commenting on this morning:
> Jens could you always tell us please?
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Mar  8 13:39:59 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 08 Mar 2000 07:39:59 -0600
Subject: [Rd] Error compiling R on RS6000 (PR#475)
In-Reply-To: Thomas J Vogels's message of "07 Mar 2000 17:31:43 -0500"
References: <200003071536.QAA20337@pubhealth.ku.dk> <x2r9dmkcik.fsf@blueberry.kubism.ku.dk> <871z5m1kfk.fsf@bavaria.ece.cmu.edu>
Message-ID: <6rwvndh974.fsf@franz.stat.wisc.edu>

Thomas J Vogels <tov@ece.cmu.edu> writes:

>   I'll assume Paul meant config.site which contains all the extra
>   compiler and linker flags and those flags are somewhat involved in
>   his environment.  Triggered by Paul's email I tried to
>   compile R-1.0.0.  It compiles cleanly but dies with "Illegal
>   Instruction" upon start.  Sorry, I don't have any further insight
>   into this problem at this time.

Do the compilers need special flags to control IEEE floating point
behavior?  One of the first things that R does on startup is to force
an evaluation of 1.0/0.0 and store the result as a global "Infinity".
On some architecture/compiler combinations this will generate an error
unless you instruct the compiler to insert special code for full IEEE
compliance.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar  8 15:31:06 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Mar 2000 16:31:06 +0100
Subject: [Rd] update fails after specific sequence of steps (PR#474)
In-Reply-To: Peter Dalgaard BSA's message of "07 Mar 2000 15:43:39 +0100"
References: <200003071408.PAA18937@pubhealth.ku.dk> <x2wvnekfhg.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2ya7tv5qd.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Strange things happen on Unix too. 
..
> > mod.m<-update(mod.full, ~.~-status:fcategory)
...
> ...and the attached dataframe is corrupted. Must investigate further.
> 
> > ls("Moore")
> [1] "conform"   "fcategory" "fscore"    "L×@"      "subject"  

I think this is fixed now. Apparently model formulas like the above
caused R to become confused as to the number of variables in the
model and overrun the array of names, subsequently confusing the
garbage collector.

(Temporary workaround: Just don't do that...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar  8 15:41:06 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 08 Mar 2000 10:41:06 -0500
Subject: [Rd] Re: [Omega-devel] StatDataML Description element
References: <Pine.LNX.4.21.0003080915400.30257-100000@boromir.ci.tuwien.ac.at>
Message-ID: <38C67491.13E2B99E@bank-banque-canada.ca>

>> be?  I can imagine a "Data Quality Stamp or Certification" being
relevant
> >within certain communities and it would be nice to have that in the
> >meta-data description, perhaps as a separate argument.]

>something like a RSA-key included in the description? will think about
>this!

I would think of any certification as being part of the "communication
protocol". I could see a place in the data format for indicating the
source, description, and possibly a special field for the the source's
assessment of the quality. If you really want  certification ( =
authentication)  you should have the whole thing encrypted so that it
needs to be unencrypted with the source's public key, but you have to do
that outside the format description (and you need PKI infastructure to
do it correctly).

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Wed Mar  8 15:50:37 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Wed, 8 Mar 2000 16:50:37 +0100 (CET)
Subject: [Rd] Re: [Omega-devel] StatDataML Description element
In-Reply-To: <38C67491.13E2B99E@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.21.0003081642440.25544-100000@boromir.ci.tuwien.ac.at>


> >> be?  I can imagine a "Data Quality Stamp or Certification" being
> relevant
> > >within certain communities and it would be nice to have that in the
> > >meta-data description, perhaps as a separate argument.]
> 
> >something like a RSA-key included in the description? will think about
> >this!
> 
> I would think of any certification as being part of the "communication
> protocol". I could see a place in the data format for indicating the
> source, description, and possibly a special field for the the source's
> assessment of the quality. If you really want  certification ( =
> authentication)  you should have the whole thing encrypted so that it
> needs to be unencrypted with the source's public key, but you have to do
> that outside the format description (and you need PKI infastructure to
> do it correctly).

The idea was not encryption but having something that we can be sure that
the dataset has not been manipulated. There is a w3 project about XML and
signatures at http://www.w3.org/Signature/, maybe one can use something
like this. 

Additionaly, Fritz and I discussed the helpful mail by Kevin and decided
to add a properties element to the description instead of more
comments. One can save "proprietary", that means application based
extentions as properties to the document (which is, in our opinion,
more closed to the framework and saves some lines of code)

We suggest to use the extention *.sdml for StatDataML files, any protests?

Torsten


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar  8 16:47:31 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 08 Mar 2000 11:47:31 -0500
Subject: [Rd] Re: [Omega-devel] StatDataML Description element
References: <Pine.LNX.4.21.0003081642440.25544-100000@boromir.ci.tuwien.ac.at>
Message-ID: <38C68422.BDF20B27@bank-banque-canada.ca>

Torsten

>The idea was not encryption but having something that we can be sure
that
>the dataset has not been manipulated.

This is called authentication. You can add a checksum to the data
format, or something like that, but that just helps stop accidental
manipulation. I think it is useful and may be the way to go, but don't
think of it as any kind of certification or authentication. If you
really want authentication, then the whole format (data, description and
all)  needs to be encrypted by the source with their private key, and it
can then be unencrypted by anyone with the source's public key. The
encryption does not prevent anyone from reading it, since anyone can get
the source's public key. It just prevents manipulation. To do this
properly you then need to be sure that you can get the true source's
public key (not some bogus key provided by whoever is providing you with
manipulated data). That is where Public Key Infrastructure (PKI) is
necessary.

Needless to say, this gets a bit messy, but there are some important
points. The key cannot be part of the message (data format), otherwise
you cannot unlock the key. That is, the authentication has to be part of
what I loosely call the "communications protocol."  I believe these
services are provided by CORBA. If you really want authentication then
you should be looking at the communications protocol, and that is
separate from the data format.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From P.J.Green@bristol.ac.uk  Wed Mar  8 17:23:34 2000
From: P.J.Green@bristol.ac.uk (P.J.Green@bristol.ac.uk)
Date: Wed, 8 Mar 2000 18:23:34 +0100 (MET)
Subject: [Rd] Printing graphs on W98 laptop (PR#477)
Message-ID: <200003081723.SAA04355@pubhealth.ku.dk>

Full_Name: Peter Green
Version: 1.0.0 and 0.99.0
OS: windows 98
Submission from: (NULL) (194.83.240.36)


Running R (either 1.0.0 or 0.99.0) under Windows 98 on
my Toshiba laptop (Satellite 4080), I get a problem
when I hit the print toolbar button with the graph window on top.
It declares an illegal operation, and produces the error
messages reproduced below (slightly different in each
version). It then terminates R and returns to the desktop.

The printer is an HP 6MP, directly connected to the laptop,
no network.

All is fine on my desktop with Windows NT4.0.

Is this a known problem?   

R 1.0.0

RGUI caused an exception 10H in module R.DLL at 015f:1002460b.
Registers:
EAX=00000006 CS=015f EIP=1002460b EFLGS=00010246
EBX=00000000 SS=0167 ESP=0253f220 EBP=0253f258
ECX=0045c8f0 DS=0167 ESI=02ee81c8 FS=0e47
EDX=00000001 ES=0167 EDI=0045c8f0 GS=0000
Bytes at CS:EIP:
dd 99 90 0a 00 00 89 81 90 0a 00 00 8b 81 34 24
Stack dump:     
0045c8f0 02ee81c8 0045c8f0 1007449a 00000002 0322a560
0253f258 1001b862 0045c8f0 00000000 0253f298 10023f7d
00455f70 1000e0fd 0253f298 100249a2

R 0.99.0

RGUI caused an exception 10H in module R.DLL at 015f:1002450b.
Registers:
EAX=00000006 CS=015f EIP=1002450b EFLGS=00010246
EBX=00000000 SS=0167 ESP=0253f220 EBP=0253f258
ECX=0045bad0 DS=0167 ESI=02e6c064 FS=3407
EDX=00000001 ES=0167 EDI=0045bad0 GS=0000
Bytes at CS:EIP:
dd 99 90 0a 00 00 89 81 90 0a 00 00 8b 81 34 24
Stack dump:
0045bad0 02e6c064 0045bad0 100737da 00000002 0318a260
0253f258 1001b822 0045bad0 00000000 0253f298 10023e7d
00455fa0 1000e0dd 0253f298 100248a2
                                                                                
                                                      

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar  8 18:58:20 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 08 Mar 2000 13:58:20 -0500
Subject: [Rd] Re: [Omega-devel] StatDataML Description element
References: <Pine.GSO.4.21.0003080823460.22094-100000@mail.biostat.washington.edu>
Message-ID: <38C6A2CC.405047D2@bank-banque-canada.ca>

Thomas

(I'm getting a bit confused about whether this discussion is taking
place on r-devel or omega-devel, and perhaps everyone is on both lists)

I just posted something on R-devel which I hope addresses many of the
points you mentioned, in particular pointing out that I meant encryption
for the purpose of authentication, not for the purpose of making
something secret, and I was using the term "communication protocol"
rather loosely. In particular, I meant it more broadly than something
like TCP/IP, which would handle accidental corruption during
transmission.

>For this purpose you would want a field that was a (cryptographically
>secure) hash of the data. This could be signed using a public key
system ...

I was rather brief on this point, but it turns out to be a problem to do
this in a way that can be authenticated. That's why encryption is
necessary and why authentication has to be done outside the data format.
It would be possible to build this level into R, for example, in the
same way that Netscape can handle the authentication of email messages,
but it seems to make much more sense to draw on the services from
something like CORBA (which I believe can provide this). In any case, it
has to be "outside" the data format in the same way that it is outside
an email message.

If you are just thinking of the hash for an occassional data set, then
providing a publicly available hash may be adequate. I don't think we
would consider that adequate authentication for data we provide to the
public on a regular basis, because of the problem that the hash can be
spoofed.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgutwin@us.ibm.com  Wed Mar  8 20:00:35 2000
From: pgutwin@us.ibm.com (pgutwin@us.ibm.com)
Date: Wed, 8 Mar 2000 15:00:35 -0500
Subject: [Rd] Error compiling R on RS6000 (PR#475)
Message-ID: <OF18295FA2.47E108A9-ON8525689C.006D91F2@pok.ibm.com>


(sorry - gcc changed underneath me and I was getting a bogus compile error)
I am now getting the same results: Illegal Instruction. I did a little
poking around and found (I think) that during a return following an
UNPROTECT the code is jumping to address #000000. Does this help any?

----------------------------------------------------------------------------------------------------------

Paul Gutwin
802-769-6433
 X86 Product Development
pgutwin@us.ibm.com


Thomas J Vogels <tov@ece.cmu.edu>@bavaria.ece.cmu.edu on 03/07/2000
05:31:43 PM

Please respond to Thomas Vogels <tov@ece.cmu.edu>

Sent by:  tov@bavaria.ece.cmu.edu


To:   Paul Gutwin/Burlington/IBM@IBMUS, r-devel@stat.math.ethz.ch,
      tov@ece.cmu.edu
cc:
Subject:  Re: [Rd] Error compiling R on RS6000 (PR#475)




Hi,

  I'll assume Paul meant config.site which contains all the extra
  compiler and linker flags and those flags are somewhat involved in
  his environment.  Triggered by Paul's email I tried to
  compile R-1.0.0.  It compiles cleanly but dies with "Illegal
  Instruction" upon start.  Sorry, I don't have any further insight
  into this problem at this time.

  I've been working on my Linux box instead of the my AIX workstation
  lately, so I didn't see this earlier.  Actually I've been so busy
  using R, that I've missed to congratulate on the release or 1.0.
  Thanks to all who work on R which has been a tremendous help for me!

  -tom


Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> pgutwin@us.ibm.com writes:
>
> > Full_Name: Paul Gutwin
> > Version: R-1.0.0
> > OS: AIX 4.2.1
> > Submission from: (NULL) (198.133.22.67)
> >
> >
> > R-1.0.0 fails to compile. I'm using the config.cache file from a
successful
>
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> > compliation of R-0.65.0 (prob #290, fixed thanks to Thomas Vogels @
CMU).
>   ^^^^^^^^^^^^^^^^^^^^^^^
>
> What on earth gives you the idea that that might work?? The configure
> scripts have changed many a time since 0.65.0. Or was config.cache a
> typo?

--
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgutwin@us.ibm.com  Wed Mar  8 20:04:02 2000
From: pgutwin@us.ibm.com (pgutwin@us.ibm.com)
Date: Wed, 8 Mar 2000 15:04:02 -0500
Subject: [Rd] Error compiling R on RS6000 (PR#475)
Message-ID: <OFE5F04C32.10597618-ON8525689C.006DFEC0@pok.ibm.com>


Oops - sorry. The aforementioned jump to #00000 is performed someplace deep
in R_LoadProfile, called at line 417 in main.c

----------------------------------------------------------------------------------------------------------

Paul Gutwin
802-769-6433
 X86 Product Development
pgutwin@us.ibm.com

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar  9 00:04:11 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Mar 2000 01:04:11 +0100
Subject: [Rd] Printing graphs on W98 laptop (PR#477)
In-Reply-To: P.J.Green@bristol.ac.uk's message of "Wed, 8 Mar 2000 18:23:34 +0100 (MET)"
References: <200003081723.SAA04355@pubhealth.ku.dk>
Message-ID: <x266ux6mbo.fsf@blueberry.kubism.ku.dk>

P.J.Green@bristol.ac.uk writes:

> Is this a known problem?   

It's been reported before, but been unreproduceable for any of the
developers... I'm fairly sure this is the exact same spot that tripped
Bendix & coworkers. On their systems it appears to depend on the day
of the week and go away when the system adinistrators are looking!
Yours seems to be the first "plain" system (i.e. non-networked
printers) with the problem. Hmm... Are you any good with a debugger?

> 
> R 1.0.0
> 
> RGUI caused an exception 10H in module R.DLL at 015f:1002460b.
> Registers:
> EAX=00000006 CS=015f EIP=1002460b EFLGS=00010246
> EBX=00000000 SS=0167 ESP=0253f220 EBP=0253f258
> ECX=0045c8f0 DS=0167 ESI=02ee81c8 FS=0e47
> EDX=00000001 ES=0167 EDI=0045c8f0 GS=0000
> Bytes at CS:EIP:
> dd 99 90 0a 00 00 89 81 90 0a 00 00 8b 81 34 24
> Stack dump:     
> 0045c8f0 02ee81c8 0045c8f0 1007449a 00000002 0322a560
> 0253f258 1001b862 0045c8f0 00000000 0253f298 10023f7d
> 00455f70 1000e0fd 0253f298 100249a2


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hoffmann@ehmgs2.et.tu-dresden.de  Thu Mar  9 08:43:03 2000
From: hoffmann@ehmgs2.et.tu-dresden.de (hoffmann@ehmgs2.et.tu-dresden.de)
Date: Thu, 9 Mar 2000 09:43:03 +0100 (MET)
Subject: [Rd] Conditional for XDR code left out in saveload.c (PR#478)
Message-ID: <200003090843.JAA07578@pubhealth.ku.dk>

Full_Name: Thomas Hoffmann
Version: 1.0.0
OS: OS/2 Warp 4.0 FP 11
Submission from: (NULL) (141.30.125.20)


I autoconfigured/configured the src'es w/o having XDR (#undef HAVE_RPC_XDR_H).

In saveload.c , at the beginning of the file the XDR code is enclosed by
matching #ifdefs.

But in the NEW_SAVE_FORMAT section, there are no #ifdefs around the XDR code.

Does this imply that using the new save format requires using XDR or is 
this simply an oversight?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar  9 09:10:51 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 9 Mar 2000 09:10:51 +0000 (GMT)
Subject: [Rd] Conditional for XDR code left out in saveload.c (PR#478)
In-Reply-To: <200003090843.JAA07578@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10003090908141.7342-100000@auk.stats>

On Thu, 9 Mar 2000 hoffmann@ehmgs2.et.tu-dresden.de wrote:

> Full_Name: Thomas Hoffmann
> Version: 1.0.0
> OS: OS/2 Warp 4.0 FP 11
> Submission from: (NULL) (141.30.125.20)
> 
> 
> I autoconfigured/configured the src'es w/o having XDR (#undef HAVE_RPC_XDR_H).
> 
> In saveload.c , at the beginning of the file the XDR code is enclosed by
> matching #ifdefs.
> 
> But in the NEW_SAVE_FORMAT section, there are no #ifdefs around the XDR code.
> 
> Does this imply that using the new save format requires using XDR or is 
> this simply an oversight?

The defines in R_SaveToFile and R_LoadFromFile determine what is 
actually used.  I think all that happens is that unused code is not
excluded from the compile (and that happens with the BinarySave code
if XDR is available).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Mar 10 10:09:02 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 10 Mar 2000 11:09:02 +0100
Subject: [Rd] Using WinEdt as editor for R
Message-ID: <38C8C9BE.DE9F7CD2@statistik.uni-dortmund.de>

I just uploaded the archive "R-WinEdt" to CRAN.
You will find it in "Contributed Extensions" - "Non-standard
Extensions".

Note: WinEdt is a Windows 32-bit editor (shareware). (Mik)TeX users may
know the editor.


Relevant part of Readme.txt:

==========================================================================
Using WinEdt as an editor and pager for R			09.03.2000
==========================================================================

Overview:
---------

  This package contains an example and macro file to configure WinEdt
  as an editor or pager for R.


Features:
---------

  - Syntax-Highlighting
  - Pasting selected code from WinEdt directly to R (i.e. from history)
  - Faster start than with standard configuration
  - features of WinEdt (i.e. Delimiter Check, ...)

[.....]
==========================================================================


Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Mar 10 10:34:01 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 10 Mar 2000 11:34:01 +0100 (CET)
Subject: [Rd] README & Apache
Message-ID: <14536.53145.633068.790805@galadriel.ci.tuwien.ac.at>



Due to recent config changes Apache does (by default) not list files
called ``README'' anymore but only prints the contents. This can be a
hassle if you want to download the file ...

As we have no control over all CRAN mirrors we can therefore only
rename the files such that they get listed again. Brian Ripley
suggested to use ReadMe instead which seems to be safe (at least
currently).

I have renamed all files on CRAN over which I have control (i.e., the
ones we do not mirror from some other place), Brian has done his
subtree.

**This applies only to people maintaining CRAN subtrees**: Please
rename all files called README that people might want to download to
ReadMe (or some other safe name). Attached you find a list of
candidates.

The reason why I'm writing this to r-devel is that we want to
discourage the use of name ``README'' for future submissions. I will
configure the CRAN master site in a minute such that it prints
ReadMe's, but also lists the file in the directory listing.

Best,
Fritz

**********************************************************

galadriel:R$ find -name README
./bin/windows/README
./bin/windows/windows-NT/base/README
./bin/windows/windows-NT/README
./bin/osf/osf4.0/tar/alpha_ev5/README
./bin/osf/osf4.0/RPMS/alpha_ev5/source/README
./bin/osf/osf4.0/RPMS/README
./bin/osf/osf4.0/RPMS/alpha_ev6/source/README
./bin/osf/osf4.0/README
./bin/linux/redhat/SRPMS/contrib/README
./bin/linux/redhat/6.x/sparc/README
./bin/linux/redhat/6.x/i386/README
./bin/linux/redhat/6.x/alpha/README
./bin/linux/linuxppc/5.0/README
./bin/linux/suse/5.3/RPMS/i386/source/README
./bin/linux/suse/5.3/RPMS/i386/README
./bin/linux/suse/6.0/RPMS/i386/source/README
./bin/linux/suse/6.0/RPMS/i386/README
./bin/linux/suse/6.2/RPMS/i386/source/README
./bin/linux/suse/6.2/RPMS/i386/README
./bin/linux/suse/README
/bin/linux/suse/6.3/RPMS/i386/README
./src/base/README
./src/base/Historic/Windows/README
./src/base/Historic/README

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Fri Mar 10 14:19:27 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Fri, 10 Mar 2000 15:19:27 +0100 (CET)
Subject: [Rd] StatDataML version 0.1-2
In-Reply-To: <38C6A2CC.405047D2@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.21.0003101514560.30227-100000@boromir.ci.tuwien.ac.at>


I just uploaded version 0.1-2 of the StatDataML proposal with the 
changes discussed this week to 

http://www.ci.tuwien.ac.at/~leisch/R/

Also available at this adress version 0.2-2 of the R implementation of
StatDataML and version 0.1-3 of the XML package. 

Torsten 

*****************************************************************
*								*
* Torsten Hothorn, Statistician					*
* at the moment: Institut fuer Statistik, TU Wien		*
* Tel: 0043 1 58801 10772					*
* Fax: 0043 1 58801 10798					*
*								*
*****************************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Mon Mar 13 01:23:45 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Mon, 13 Mar 2000 02:23:45 +0100 (MET)
Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
Message-ID: <200003130123.CAA03987@pubhealth.ku.dk>

plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))

  shows axis labels as:
  
      |    |    |    |    |     |
                                0
  rather than
      |    |    |    |    |    |
      5    4    3    2    1    0

as I believe it used to do in some earlier version.

Thank you for R.

Rashid Nassar

--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Shannon2, Autoloads, package:base





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Mar 13 12:44:10 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 13 Mar 2000 12:44:10 +0000 (GMT)
Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
Message-ID: <200003131244.MAA07249@toucan.stats.ox.ac.uk>


> From: rnassar@duke.edu
> Date: Mon, 13 Mar 2000 02:23:45 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
> 
>   shows axis labels as:
>   
>       |    |    |    |    |     |
>                                 0
>   rather than
>       |    |    |    |    |    |
>       5    4    3    2    1    0
> 
> as I believe it used to do in some earlier version.

Up to 0.64.2, not since 0.65.0.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Mar 13 13:08:11 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 13 Mar 2000 14:08:11 +0100 (MET)
Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
In-Reply-To: <200003131244.MAA07249@toucan.stats.ox.ac.uk>
References: <200003131244.MAA07249@toucan.stats.ox.ac.uk>
Message-ID: <14540.59451.128319.746184@lynne.ethz.ch>


>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    >> From: rnassar@duke.edu
    >> Date: Mon, 13 Mar 2000 02:23:45 +0100 (MET)
    >> To: r-devel@stat.math.ethz.ch
    >> Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
    >> CC: R-bugs@biostat.ku.dk
    >> X-Loop: R-bugs@biostat.ku.dk
    >> 
    >> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
    >> 
    >> shows axis labels as:
    >> 
    >> |    |    |    |    |     |
    >> 0
    >> rather than
    >> |    |    |    |    |    |
    >> 5    4    3    2    1    0
    >> 
    >> as I believe it used to do in some earlier version.

    BDR> Up to 0.64.2, not since 0.65.0.

No, unfortunately,  happens here with 1.0.0 (even patched; "R-release")

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 13 13:23:53 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Mar 2000 14:23:53 +0100
Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
In-Reply-To: Martin Maechler's message of "Mon, 13 Mar 2000 14:08:11 +0100 (MET)"
References: <200003131244.MAA07249@toucan.stats.ox.ac.uk> <14540.59451.128319.746184@lynne.ethz.ch>
Message-ID: <x2bt4jj95i.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> >>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

>     >> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
>     >> 
>     >> shows axis labels as:
>     >> 
>     >> |    |    |    |    |     |
>     >> 0
>     >> rather than
>     >> |    |    |    |    |    |
>     >> 5    4    3    2    1    0
>     >> 
>     >> as I believe it used to do in some earlier version.
> 
>     BDR> Up to 0.64.2, not since 0.65.0.
> 
> No, unfortunately,  happens here with 1.0.0 (even patched; "R-release")
> 

I think Brian meant that it hasn't done the  5 4 3 2 1 thing since
0.64.2...  

In general, it can be argued that the reversed xy limits are not safe
and shouldn't be, since things are likely not to work at the device
level with a mirrored coordinate system (I.e.: if we decide that it
should work, we may find ourselves fixing lots of small glitches in
devxxx.c). 

Plotting (5-x,5-y) and doing the axes with axis(n, at=0:5, labels=5:0)
will get the plot done in a cleaner, albeit more cumbersome fashion.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From neteler@geog.uni-hannover.de  Mon Mar 13 18:04:51 2000
From: neteler@geog.uni-hannover.de (neteler@geog.uni-hannover.de)
Date: Mon, 13 Mar 2000 19:04:51 +0100 (MET)
Subject: [Rd] check does not accept --vsize option (PR#481)
Message-ID: <200003131804.TAA12983@pubhealth.ku.dk>

Full_Name: Markus Neteler
Version: 1.0.0
OS: Linux 2.2.10/i686
Submission from: (NULL) (130.75.72.37)


Hi,

I wanted to "check" the R.GRASS GIS interface from Roger Bivand:
http://www.geog.uni-hannover.de/grass/statsgrasslist.html

using
R CMD check --vsize=10M GRASS

but:

[error message shortened]
> G <- gmeta()
Error: heap memory (6144 Kb) exhausted [needed 1024 Kb more]
       See "help(Memory)" on how to increase the heap size.
Execution halted

It seems that --vsize is ignored. I check R/bin/check, the
parameter is sent properly to R but ignored there. From the
buglist I have seen that this problem occured with --nsize, too.

Hoping for a bug fix!

Kind regards and many thanks for your work

 Markus Neteler
 GRASS GIS 5 coordinator




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Mar 13 19:02:37 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 13 Mar 2000 13:02:37 -0600
Subject: [Rd] check does not accept --vsize option (PR#481)
In-Reply-To: neteler@geog.uni-hannover.de's message of "Mon, 13 Mar 2000 19:04:51 +0100 (MET)"
References: <200003131804.TAA12983@pubhealth.ku.dk>
Message-ID: <6rya7msng2.fsf@franz.stat.wisc.edu>

neteler@geog.uni-hannover.de writes:

> I wanted to "check" the R.GRASS GIS interface from Roger Bivand:
> http://www.geog.uni-hannover.de/grass/statsgrasslist.html
> 
> using
> R CMD check --vsize=10M GRASS
> 
> but:
> 
> [error message shortened]
> > G <- gmeta()
> Error: heap memory (6144 Kb) exhausted [needed 1024 Kb more]
>        See "help(Memory)" on how to increase the heap size.
> Execution halted
> 
> It seems that --vsize is ignored. I check R/bin/check, the
> parameter is sent properly to R but ignored there. From the
> buglist I have seen that this problem occured with --nsize, too.

An R CMD check is designed to run in a protected environment, which is
the reason that some command line switches are ignored.  A workaround
is to specify the size as a shell or environment variable.  That is, use
 R_VSIZE=10M R CMD check GRASS
from a Bourne shell (or equivalent).  From the C-shell you may need to
use
 setenv R_VSIZE 10M
 R CMD check GRASS

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Mon Mar 13 19:11:21 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Mon, 13 Mar 2000 20:11:21 +0100 (MET)
Subject: [Rd] plot(1:10,c(1)$nothing)  yields index plot (PR#482)
Message-ID: <200003131911.UAA13262@pubhealth.ku.dk>

<<insert bug report here>>

IMHO, 

	plot(x,c(1)$nothing)

should fail or at least issue a warning.

Instead it produces an index plot of the first argument, i.e. plot(x)

Chuck Berry

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Patched
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive
Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Mar 13 19:27:42 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 13 Mar 2000 11:27:42 -0800 (PST)
Subject: [Rd] plot(1:10,c(1)$nothing)  yields index plot (PR#482)
In-Reply-To: <200003131911.UAA13262@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0003131116350.18281-100000@mail.biostat.washington.edu>

On Mon, 13 Mar 2000 cberry@tajo.ucsd.edu wrote:

> <<insert bug report here>>
> 
> IMHO, 
> 
> 	plot(x,c(1)$nothing)
> 
> should fail or at least issue a warning.
> 
> Instead it produces an index plot of the first argument, i.e. plot(x)

No, the alternative is worse.

The ability to do plot(x) with x a vector is important.  One might think
that in 
	plot(x,y=NULL)
we could test for missing(y) rather than is.null(y) and issue a warning if
y was NULL but not missing.  More-or-less equivalently we could use
substitute(y) to check whether y was a literal NULL or an expression
evaluating to NULL.

This turns out to be a bad idea, because we must be able to call plot(x)
from other functions (with arbitrarily deep nesting), and it becomes very
messy to trick plot() into handling the arguments correctly as they are
passed from one function to another. 

Since plot(x) can't tell whether the NULL argument is deliberate or
accidental, it shouldn't try to guess and give a warning.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 13 19:49:02 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Mar 2000 20:49:02 +0100
Subject: [Rd] plot(1:10,c(1)$nothing)  yields index plot (PR#482)
In-Reply-To: Thomas Lumley's message of "Mon, 13 Mar 2000 11:27:42 -0800 (PST)"
References: <Pine.GSO.4.21.0003131116350.18281-100000@mail.biostat.washington.edu>
Message-ID: <x23dpuabwx.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> This turns out to be a bad idea, because we must be able to call plot(x)
> from other functions (with arbitrarily deep nesting), and it becomes very
> messy to trick plot() into handling the arguments correctly as they are
> passed from one function to another. 

Actually, S-plus has that problem, not R:

> f<-function(x,y)g(x,y)
> g<-function(x,y)missing(y)
> f(2)
[1] F

where R propagates missings just fine:

> f<-function(x,y)g(x,y)
> g<-function(x,y)missing(y)
> f(2)
[1] TRUE

but given the amount of ported code we have to deal with, we probably
have to be able to deal with NULLs being passed to signify absent
arguments. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 13 20:28:41 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 13 Mar 2000 20:28:41 +0000 (GMT)
Subject: [Rd] check does not accept --vsize option (PR#481)
In-Reply-To: <6rya7msng2.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.GSO.4.05.10003132010540.26046-100000@auk.stats>

On 13 Mar 2000, Douglas Bates wrote:

> neteler@geog.uni-hannover.de writes:
> 
> > I wanted to "check" the R.GRASS GIS interface from Roger Bivand:
> > http://www.geog.uni-hannover.de/grass/statsgrasslist.html
> > 
> > using
> > R CMD check --vsize=10M GRASS
> > 
> > but:
> > 
> > [error message shortened]
> > > G <- gmeta()
> > Error: heap memory (6144 Kb) exhausted [needed 1024 Kb more]
> >        See "help(Memory)" on how to increase the heap size.
> > Execution halted
> > 
> > It seems that --vsize is ignored. I check R/bin/check, the
> > parameter is sent properly to R but ignored there. From the
> > buglist I have seen that this problem occured with --nsize, too.

What version of R were you using?  That bug report was from 0.99.0,
I think.

> An R CMD check is designed to run in a protected environment, which is
> the reason that some command line switches are ignored.  A workaround
> is to specify the size as a shell or environment variable.  That is, use
>  R_VSIZE=10M R CMD check GRASS
> from a Bourne shell (or equivalent).  From the C-shell you may need to
> use
>  setenv R_VSIZE 10M
>  R CMD check GRASS

I think CMD check _is_ now supposed to accept --vsize and --nsize:

auk%  R CMD check --help
Usage: R CMD check [options] pkgs
...
  --vsize=N             set R's vector heap size to N bytes
  --nsize=N             set R's number of cons cells to N


However, it seems not to work correctly

ARGUMENT '{R_opts}' __ignored__

appears in *.Rout on Solaris, and only one of them is accepted.

In the check script we need

    --nsize=*)
      R_opts="${R_opts} ${1}" ;;
    --vsize=*)
      R_opts="${R_opts} ${1}" ;;

adding a couple of `$'.


On (t)csh I use something like.

env R_VSIZE=10M R CMD check GRASS


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aim@uwo.ca  Mon Mar 13 21:02:44 2000
From: aim@uwo.ca (aim@uwo.ca)
Date: Mon, 13 Mar 2000 22:02:44 +0100 (MET)
Subject: [Rd] error in par option xaxt (PR#483)
Message-ID: <200003132102.WAA13861@pubhealth.ku.dk>

Full_Name: Ian McLeod
Version: 1
OS: WinNT
Submission from: (NULL) (129.100.45.131)


The plot optional argument xaxt does not work.  Setting xaxt="n" has no effect,
the axis is annotated. The R online documention provides an example. See
help(axis) and try to execute the illustrative script. The annotated labels are
overwritten.

For convenience, I have extracted the following from the help(axis) page:

plot(1:4, rnorm(4), axes=FALSE)
axis(1, 1:4, LETTERS[1:4])
axis(2)
box() #- to make it look "as usual"

plot(1:7, rnorm(7), type = 's', xaxt='n', col = 'red')
axis(1, 1:7, LETTERS[1:7], col.axis = 'blue')




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aim@uwo.ca  Mon Mar 13 21:03:02 2000
From: aim@uwo.ca (aim@uwo.ca)
Date: Mon, 13 Mar 2000 22:03:02 +0100 (MET)
Subject: [Rd] error in par option xaxt (PR#484)
Message-ID: <200003132103.WAA13875@pubhealth.ku.dk>

Full_Name: Ian McLeod
Version: 1
OS: WinNT
Submission from: (NULL) (129.100.45.131)


The plot optional argument xaxt does not work.  Setting xaxt="n" has no effect,
the axis is annotated. The R online documention provides an example. See
help(axis) and try to execute the illustrative script. The annotated labels are
overwritten.

For convenience, I have extracted the following from the help(axis) page:

plot(1:4, rnorm(4), axes=FALSE)
axis(1, 1:4, LETTERS[1:4])
axis(2)
box() #- to make it look "as usual"

plot(1:7, rnorm(7), type = 's', xaxt='n', col = 'red')
axis(1, 1:7, LETTERS[1:7], col.axis = 'blue')




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyzhang@umich.edu  Mon Mar 13 21:13:29 2000
From: lyzhang@umich.edu (lyzhang@umich.edu)
Date: Mon, 13 Mar 2000 22:13:29 +0100 (MET)
Subject: [Rd] Install R1.0.0 (PR#485)
Message-ID: <200003132113.WAA13935@pubhealth.ku.dk>


Hello,

I tried to compile and install R. After I ran
make 2>&1 | tee log
., I got the following error:

making system.d from system.c
system.c:37: readline/readline.h: No such file or directory
make[3]: *** [system.d] Error 1
make[3]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
0.0/src/unix'
make[2]: *** [R] Error 2
make[2]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
0.0/src/unix'
make[1]: *** [R] Error 1
make[1]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
0.0/src'
make: *** [R] Error 1



Please help.

Lots aof thanks!

*=======================================* 
*	Lynn Zhang             	        *
*	LS&A System Services Team       *
*	lyzhang@umich.edu               *
*=======================================*


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Mar 13 21:24:59 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 13 Mar 2000 13:24:59 -0800 (PST)
Subject: [Rd] Install R1.0.0 (PR#485)
In-Reply-To: <200003132113.WAA13935@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0003131315460.18281-100000@mail.biostat.washington.edu>

On Mon, 13 Mar 2000 lyzhang@umich.edu wrote:

> 
> Hello,
> 
> I tried to compile and install R. After I ran
> make 2>&1 | tee log
> ., I got the following error:
> 
> making system.d from system.c
> system.c:37: readline/readline.h: No such file or directory

It looks as though you are trying to use GNU readline without it being
present.  This shouldn't be allowed by configure.

Try 
     make distclean
     ./configure
     make

again, to see if the problem goes away. If it doesn't then
look at src/include/config.h to see if you have something like
/* GNU Readline Library */
#define HAVE_LIBREADLINE 1
#define HAVE_READLINE_HISTORY_H 1
#define HAVE_READLINE_READLINE_H 1
indicating that configure thinks you have readline or like
/* GNU Readline Library */
/* #undef HAVE_LIBREADLINE */
/* #undef HAVE_READLINE_HISTORY_H */
/* #undef HAVE_READLINE_READLINE_H */
indicating that it doesn't.

In either case there would be a problem with configure, but a different
one. It's possible, for example, that configure is finding the readline
headers but that the compiler isn't looking in the same place.

Of course this is assuming you do have the GNU readline library and
headers. If you don't, then
	./configure --without-readline
is a workaround, though we would still like to know why configure thinks
you have it.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle




> make[3]: *** [system.d] Error 1
> make[3]: Leaving directory
> `/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
> 0.0/src/unix'
> make[2]: *** [R] Error 2
> make[2]: Leaving directory
> `/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
> 0.0/src/unix'
> make[1]: *** [R] Error 1
> make[1]: Leaving directory
> `/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
> 0.0/src'
> make: *** [R] Error 1
> 
> 
> 
> Please help.
> 
> Lots aof thanks!
> 
> *=======================================* 
> *	Lynn Zhang             	        *
> *	LS&A System Services Team       *
> *	lyzhang@umich.edu               *
> *=======================================*
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 13 21:46:59 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 13 Mar 2000 21:46:59 +0000 (GMT)
Subject: [Rd] error in par option xaxt (PR#483)
In-Reply-To: <200003132102.WAA13861@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10003132143060.27721-100000@auk.stats>

On Mon, 13 Mar 2000 aim@uwo.ca wrote:

> Full_Name: Ian McLeod
> Version: 1
> OS: WinNT
> Submission from: (NULL) (129.100.45.131)
> 
> 
> The plot optional argument xaxt does not work.  Setting xaxt="n" has no effect,
> the axis is annotated. The R online documention provides an example. See
> help(axis) and try to execute the illustrative script. The annotated labels are
> overwritten.

You mean 1.0.0, I think. That bug is already fixed for R-release: as you
are on Windows you will just need to compile it up from source

As a workaround, 

par(xaxt='n')
plot(1:7, rnorm(7), type = 's', col = 'red')

_does_ work: it is only the inline setting that is broken, and only in that
version.

[I don't understand why this was sent out twice with different PR# numbers?
Did you submit it twice?]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Mar 14 09:32:37 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 14 Mar 2000 10:32:37 +0100 (MET)
Subject: [Rd] Re: autoload error in profile {was anova-bug in R-version  1.0.0?} (PR#486)
Message-ID: <200003140932.KAA17259@pubhealth.ku.dk>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Tue, 7 Mar 2000, Martin Maechler wrote:
    >> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
    >> 
    BDR> On Tue, 7 Mar 2000, Trenkler, Dietrich wrote:
    >> >> I think I've discovered what went wrong.
    >> >> 
    >> >> My workspace included a function wilcox.test formerly copied from
    >> >> ctest. Now ctest ist part of the distribution and because of that I
    >> >> always got the message:
    >> >> 
    >> >> [Previously saved workspace restored]
    >> >> 
    >> >> Error in autoload("wilcox.test", "ctest") :
    >> >> Object already exists
    >> >> 
    >> >> I didn't take care of this message. Now I removed wilcox.test, saved
    >> >> the WS, restarted R without the vanilla-option and alas, anova
    >> >> now works.
    >> >> 
    >> >> It seems that R stops initializing after encountering the error
    >> >> mentioned above. Is this correct?   
    >> 
    BDR> Yes, in that the rest of the system Rprofile file is skipped
    BDR> and hence options show.signif.stars and show.coef.Pvalues are not set.
    >> but other options as well..
    >> I think this shouldn't happen and *is* a bug.

    BDR> It looks to me as if a bit more protection is needed in print.coefmat,
    BDR> at least.

	 which Brian has implemented in the mean time.

	 ....

    >> For the 1.0.x patches, at least, I'll move the autoload()'s to the end of
    >> profile/Common.R

    BDR> I _think_ they should have try() around them, which is what S-PLUS 
    BDR> now does with all startup code.

I tried this, but it does not work :

try(autoload(..)) works okay when used after startup, but not *during*
startup.  However, I'll put a workaround into Common.R

Should this {try(.) not working during startup} be another bug report ?

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Tue Mar 14 11:16:27 2000
From: dtrenkler@nts6.oec.uni-osnabrueck.de (dtrenkler@nts6.oec.uni-osnabrueck.de)
Date: Tue, 14 Mar 2000 12:16:27 +0100 (MET)
Subject: [Rd] Bug in sub? (PR#487)
Message-ID: <200003141116.MAA19358@pubhealth.ku.dk>

I suspect that there is bug in sub when using "?":

> string_"This is a bug!"
>  sub("!", ", or isn't it?", string)
[1] "This is a bug, or isn't it?"
> string_"This is a bug?"
>  sub("?", ", or isn't it?", string)
[1] "This is a bug?"


Regards,

  *** D.Trenkler ***

====================================================================
Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
Statistik / Empirische Wirtschaftsforschung
Universitaet Osnabrueck
Rolandstrasse 8                           Phone: +49(0) 541-969-2753
D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
GERMANY
====================================================================


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows NT 4.0 (build 1381) Service Pack 3

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Tue Mar 14 11:22:54 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Tue, 14 Mar 2000 12:22:54 +0100 (CET)
Subject: [Rd] Bug in sub? (PR#487)
In-Reply-To: <200003141116.MAA19358@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0003141221520.18407-100000@boromir.ci.tuwien.ac.at>


> I suspect that there is bug in sub when using "?":
> 
> > string_"This is a bug!"
> >  sub("!", ", or isn't it?", string)
> [1] "This is a bug, or isn't it?"
> > string_"This is a bug?"
> >  sub("?", ", or isn't it?", string)
> [1] "This is a bug?"


R> string_"This is a bug?"
R> sub("[?]", ", or isn't it?", string)
[1] "This is a bug, or isn't it?"

works, has "?" a special meaning in regexp?

Torsten


> 
> 
> Regards,
> 
>   *** D.Trenkler ***
> 
> ====================================================================
> Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
> Statistik / Empirische Wirtschaftsforschung
> Universitaet Osnabrueck
> Rolandstrasse 8                           Phone: +49(0) 541-969-2753
> D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
> GERMANY
> ====================================================================
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 0.0
>  year = 2000
>  month = February
>  day = 29
>  language = R
> 
> Windows NT 4.0 (build 1381) Service Pack 3
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 14 11:33:38 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 2000 12:33:38 +0100
Subject: [Rd] Bug in sub? (PR#487)
In-Reply-To: dtrenkler@nts6.oec.uni-osnabrueck.de's message of "Tue, 14 Mar 2000 12:16:27 +0100 (MET)"
References: <200003141116.MAA19358@pubhealth.ku.dk>
Message-ID: <x266up4wh9.fsf@blueberry.kubism.ku.dk>

dtrenkler@nts6.oec.uni-osnabrueck.de writes:

> I suspect that there is bug in sub when using "?":
> 
> > string_"This is a bug!"
> >  sub("!", ", or isn't it?", string)
> [1] "This is a bug, or isn't it?"
> > string_"This is a bug?"
> >  sub("?", ", or isn't it?", string)
> [1] "This is a bug?"

Hmm. If there is a bug it may not where you think...

'?' is an operator of extended regular expressions, so you're not
looking for a question mark there: 

>  sub("\\?", ", or isn't it?", string)
[1] "This is a bug, or isn't it?"

>  sub("?", ", or isn't it?", ext=F, string)
[1] "This is a bug, or isn't it?"

One might expect that a null RE would always match the beginning of a
string, but it doesn't...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From simon.frost@ed.ac.uk  Tue Mar 14 13:15:54 2000
From: simon.frost@ed.ac.uk (simon.frost@ed.ac.uk)
Date: Tue, 14 Mar 2000 14:15:54 +0100 (MET)
Subject: [Rd] Error in lme? (PR#488)
Message-ID: <200003141315.OAA21607@pubhealth.ku.dk>

Full_Name: Simon Frost
Version: 1.0.0
OS: Windows
Submission from: (NULL) (129.215.60.79)


Hi everyone,

I've just installed R for Windows - I've previously been using it on Linux -
and I've run into a problem when using lme.

The lme routine throws up an error in the getGroups.data.frame command,
complaining about an error in the formula:

Error in getGroups.data.frame(dataMix, groups) : 
        Invalid formula for groups

getGroups works just fine, and I haven't run into this problem previously.

Any ideas?

Best wishes
Simon

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Mar 14 13:44:56 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 14 Mar 2000 07:44:56 -0600
Subject: [Rd] Error in lme? (PR#488)
In-Reply-To: simon.frost@ed.ac.uk's message of "Tue, 14 Mar 2000 14:15:54 +0100 (MET)"
References: <200003141315.OAA21607@pubhealth.ku.dk>
Message-ID: <6rg0ttll7r.fsf@franz.stat.wisc.edu>

simon.frost@ed.ac.uk writes:

> I've just installed R for Windows - I've previously been using it on Linux -
> and I've run into a problem when using lme.
> 
> The lme routine throws up an error in the getGroups.data.frame command,
> complaining about an error in the formula:
> 
> Error in getGroups.data.frame(dataMix, groups) : 
>         Invalid formula for groups
> 
> getGroups works just fine, and I haven't run into this problem previously.

Could you send us an example call that generates this error
(preferably using one of the data sets that comes with R)?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyzhang@umich.edu  Tue Mar 14 21:33:30 2000
From: lyzhang@umich.edu (Lynn Zhang)
Date: Tue, 14 Mar 2000 16:33:30 -0500 (EST)
Subject: [Rd] Install R1.0.0 (PR#485)
In-Reply-To: <Pine.GSO.4.21.0003131315460.18281-100000@mail.biostat.washington.edu>
Message-ID: <Pine.SOL.3.95.1000314163154.17926J-100000@kongzi.admin.lsa.umich.edu>


Hello,

After I run make, I got the following error,

__d_sign                            /usr/lsa/lib/libblas.a(drotg.o)
ld: fatal: Symbol referencing errors. No output written to ../../bin/R.X11
make[3]: *** [../../bin/R.X11] Error 1
make[3]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.0.0/src/main'
make[2]: *** [R] Error 2
make[2]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.0.0/src/main'
make[1]: *** [R] Error 1
make[1]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.0.0/src'
make: *** [R] Error 1


Would you please help me on that?

Lots of thanks!




*=======================================* 
*	Lynn Zhang             	        *
*	LS&A System Services Team       *
*	lyzhang@umich.edu               *
*=======================================*

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Wed Mar 15 11:03:03 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Wed, 15 Mar 2000 12:03:03 +0100
Subject: [Rd] solaris without x
Message-ID: <38CF6DE7.896575F0@univie.ac.at>

i am trying to compile the current release on solaris 8.
i do not have a complete x installation on my server.
so i tried
./configure --without-x
this is what i get

making dataentry.d from dataentry.c
In file included from dataentry.c:28:
dataentry.h:22: X11/X.h: No such file or directory
dataentry.h:23: X11/Xlib.h: No such file or directory
dataentry.h:24: X11/Xutil.h: No such file or directory
dataentry.h:25: X11/keysym.h: No such file or directory
dataentry.h:26: X11/cursorfont.h: No such file or directory
make[3]: *** [dataentry.d] Error 1

./configure --without-x --without-dataentry --disable-dataentry

this is what i get

make[3]: Entering directory `/servers/space/neuwirth/R/R-release/src/unix'
gcc -I. -I../include -I../../src/include -I../../src/include/R_ext   -DHAVE_CONF
IG_H  -g -O2 -c dataentry.c -o dataentry.o
In file included from dataentry.c:28:
dataentry.h:22: X11/X.h: No such file or directory
dataentry.h:23: X11/Xlib.h: No such file or directory
dataentry.h:24: X11/Xutil.h: No such file or directory
dataentry.h:25: X11/keysym.h: No such file or directory
dataentry.h:26: X11/cursorfont.h: No such file or directory
make[3]: *** [dataentry.o] Error 1

can anybody help me?



--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Mar 15 11:17:14 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 15 Mar 2000 12:17:14 +0100 (CET)
Subject: [Rd] solaris without x
In-Reply-To: <38CF6DE7.896575F0@univie.ac.at>
References: <38CF6DE7.896575F0@univie.ac.at>
Message-ID: <14543.28986.899408.308721@aragorn.ci.tuwien.ac.at>

>>>>> Erich Neuwirth writes:

> i am trying to compile the current release on solaris 8.
> i do not have a complete x installation on my server.
> so i tried
> ./configure --without-x
> this is what i get

> making dataentry.d from dataentry.c
> In file included from dataentry.c:28:
> dataentry.h:22: X11/X.h: No such file or directory
> dataentry.h:23: X11/Xlib.h: No such file or directory
> dataentry.h:24: X11/Xutil.h: No such file or directory
> dataentry.h:25: X11/keysym.h: No such file or directory
> dataentry.h:26: X11/cursorfont.h: No such file or directory
> make[3]: *** [dataentry.d] Error 1

> ./configure --without-x --without-dataentry --disable-dataentry

> this is what i get

> make[3]: Entering directory `/servers/space/neuwirth/R/R-release/src/unix'
> gcc -I. -I../include -I../../src/include -I../../src/include/R_ext   -DHAVE_CONF
> IG_H  -g -O2 -c dataentry.c -o dataentry.o
> In file included from dataentry.c:28:
> dataentry.h:22: X11/X.h: No such file or directory
> dataentry.h:23: X11/Xlib.h: No such file or directory
> dataentry.h:24: X11/Xutil.h: No such file or directory
> dataentry.h:25: X11/keysym.h: No such file or directory
> dataentry.h:26: X11/cursorfont.h: No such file or directory
> make[3]: *** [dataentry.o] Error 1

> can anybody help me?

Simply speaking, --without-x is not supported (yet).  We are planning to
package GUIs (X11, GNOME) in the near future, and along with that we
should also make it possible to build without X.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 15 11:34:20 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Mar 2000 12:34:20 +0100
Subject: [Rd] solaris without x
In-Reply-To: Kurt Hornik's message of "Wed, 15 Mar 2000 12:17:14 +0100 (CET)"
References: <38CF6DE7.896575F0@univie.ac.at> <14543.28986.899408.308721@aragorn.ci.tuwien.ac.at>
Message-ID: <x2r9dco4ar.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> Simply speaking, --without-x is not supported (yet).  We are planning to
> package GUIs (X11, GNOME) in the near future, and along with that we
> should also make it possible to build without X.

However, last I tried (a couple of years back, admittedly...) it
wasn't terribly difficult to force the sources to compile without X.
Basically, place R on the operating table and rip out the relevant
internal organs... I.e. you need to remove the entire dataentry.c and
devX11.c and all references to X include files and functions in other
places. 

If you figure out how to do this with proper #ifdef'ing I think we'd
like to have the patches (it is much easier to get right on a system
that doesn't actuallly have X11, and gives an error if one forget to
remove something...).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Wed Mar 15 13:31:00 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Wed, 15 Mar 2000 14:31:00 +0100
Subject: [Rd] headers needed in gcc
Message-ID: <38CF9094.EEE7BEEC@univie.ac.at>

i am working my way to create a stdin-stdout version of R

i am not a gcc configuration expert.
currently, i am missing

#include <sys/types.h>
#  include <sys/socket.h>
#  include <netinet/in.h>
#  include <netinet/tcp.h>
#include "sock.h"

as far as i understand my system,
these header files shpuld be in
/usr/local/lib/gcc-lib/sparc-sun-solaris2.7/2.95.1/include

what library do i have to create in gcc
to get these goodies?



--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Mar 15 14:08:41 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 15 Mar 2000 15:08:41 +0100 (MET)
Subject: [Rd] headers needed in gcc
In-Reply-To: <38CF9094.EEE7BEEC@univie.ac.at>
References: <38CF9094.EEE7BEEC@univie.ac.at>
Message-ID: <14543.39273.545539.516566@lynne.ethz.ch>

>>>>> "Erich" == Erich Neuwirth <erich.neuwirth@univie.ac.at> writes:

    Erich> i am working my way to create a stdin-stdout version of R
    Erich> i am not a gcc configuration expert.
    Erich> currently, i am missing

    Erich> #include <sys/types.h>
    Erich> #  include <sys/socket.h>
    Erich> #  include <netinet/in.h>
    Erich> #  include <netinet/tcp.h>

    Erich> #include "sock.h"
well, "sock.h"  (as the `"' suggests) is a local file, 
in this case, it's in the same directory as the *.c file which includes it.
 
    Erich> as far as i understand my system,
    Erich> these header files shpuld be in
    Erich> /usr/local/lib/gcc-lib/sparc-sun-solaris2.7/2.95.1/include

Well, I think to remember that for gcc under Solaris,
it looks *BOTH* in
   /usr/local/lib/gcc-lib/sparc..../<version>/include
AND
   /usr/include/

i.e. /usr/include/sys/  and /usr/include/netinet/  may contain your
headers..
Otherwise, try

    cd /usr/include
    find . -name types.h
    find . -name tcp.h

etc.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Wed Mar 15 15:20:26 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Wed, 15 Mar 2000 16:20:26 +0100
Subject: [Rd] question
Message-ID: <38CFAA3A.1108F0CC@univie.ac.at>

here is another question (kurt already knows about it).
i would like to do a client server version
of R where the server can run on a unix box and the client
is excel ond a win machine.
the easiest solution would be running a stdin-stdout version
of the server through inetd.
but this is vulnerable.
so what is needed is a sandbox version of the server,
where no acrtive access to the file system is open
and where spawning processes is disabled.
are there any plans for doing such a version?


--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Wed Mar 15 15:52:29 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Wed, 15 Mar 2000 16:52:29 +0100 (MET)
Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
Message-ID: <200003151552.QAA07465@pubhealth.ku.dk>

Dear Sirs,

Thank you very much for your replies.  If I may, and assuming this makes
sense, I would like to suggest as a low-priority wish-list item for a
future version that perhaps the plot function could take an additional
optional argument (e.g. reverse, which can have values "x", "y" or "xy")
which would make the plot function do the calculations suggested by Dr
Dalgaard below to allow easy plotting with reversed axis values, and even
prehaps issue a warning message for xlim=c(5:2) to make it clear that this
is not supposed to work that way?  Just some thoughts. 

Thank you again!

Rashid Nassar


On 13 Mar 2000, Peter Dalgaard BSA wrote:

> Date: 13 Mar 2000 14:23:53 +0100
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> To: Martin Maechler <maechler@stat.math.ethz.ch>
> Cc: Prof Brian Ripley <ripley@stats.ox.ac.uk>, r-devel@stat.math.ethz.ch,
>     rnassar@duke.edu, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
> 
> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > >>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> >     >> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
> >     >> 
> >     >> shows axis labels as:
> >     >> 
> >     >> |    |    |    |    |     |
> >     >> 0
> >     >> rather than
> >     >> |    |    |    |    |    |
> >     >> 5    4    3    2    1    0
> >     >> 
> >     >> as I believe it used to do in some earlier version.
> > 
> >     BDR> Up to 0.64.2, not since 0.65.0.
> > 
> > No, unfortunately,  happens here with 1.0.0 (even patched; "R-release")
> > 
> 
> I think Brian meant that it hasn't done the  5 4 3 2 1 thing since
> 0.64.2...  
> 
> In general, it can be argued that the reversed xy limits are not safe
> and shouldn't be, since things are likely not to work at the device
> level with a mirrored coordinate system (I.e.: if we decide that it
> should work, we may find ourselves fixing lots of small glitches in
> devxxx.c). 
> 
> Plotting (5-x,5-y) and doing the axes with axis(n, at=0:5, labels=5:0)
> will get the plot done in a cleaner, albeit more cumbersome fashion.
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> 
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Wed Mar 15 15:44:23 2000
From: rnassar@duke.edu (Rashid Nassar)
Date: Wed, 15 Mar 2000 10:44:23 -0500 (EST)
Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
In-Reply-To: <x2bt4jj95i.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SOL.3.91.1000315103144.28375A-100000@bio3.acpub.duke.edu>

Dear Sirs,

Thank you very much for your replies.  If I may, and assuming this makes
sense, I would like to suggest as a low-priority wish-list item for a
future version that perhaps the plot function could take an additional
optional argument (e.g. reverse, which can have values "x", "y" or "xy")
which would make the plot function do the calculations suggested by Dr
Dalgaard below to allow easy plotting with reversed axis values, and even
prehaps issue a warning message for xlim=c(5:2) to make it clear that this
is not supposed to work that way?  Just some thoughts. 

Thank you again!

Rashid Nassar


On 13 Mar 2000, Peter Dalgaard BSA wrote:

> Date: 13 Mar 2000 14:23:53 +0100
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> To: Martin Maechler <maechler@stat.math.ethz.ch>
> Cc: Prof Brian Ripley <ripley@stats.ox.ac.uk>, r-devel@stat.math.ethz.ch,
>     rnassar@duke.edu, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
> 
> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > >>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> >     >> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
> >     >> 
> >     >> shows axis labels as:
> >     >> 
> >     >> |    |    |    |    |     |
> >     >> 0
> >     >> rather than
> >     >> |    |    |    |    |    |
> >     >> 5    4    3    2    1    0
> >     >> 
> >     >> as I believe it used to do in some earlier version.
> > 
> >     BDR> Up to 0.64.2, not since 0.65.0.
> > 
> > No, unfortunately,  happens here with 1.0.0 (even patched; "R-release")
> > 
> 
> I think Brian meant that it hasn't done the  5 4 3 2 1 thing since
> 0.64.2...  
> 
> In general, it can be argued that the reversed xy limits are not safe
> and shouldn't be, since things are likely not to work at the device
> level with a mirrored coordinate system (I.e.: if we decide that it
> should work, we may find ourselves fixing lots of small glitches in
> devxxx.c). 
> 
> Plotting (5-x,5-y) and doing the axes with axis(n, at=0:5, labels=5:0)
> will get the plot done in a cleaner, albeit more cumbersome fashion.
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 15 16:33:17 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Mar 2000 17:33:17 +0100
Subject: [Rd] question
In-Reply-To: Erich Neuwirth's message of "Wed, 15 Mar 2000 16:20:26 +0100"
References: <38CFAA3A.1108F0CC@univie.ac.at>
Message-ID: <x2em9cnqgi.fsf@blueberry.kubism.ku.dk>

Erich Neuwirth <erich.neuwirth@univie.ac.at> writes:

> here is another question (kurt already knows about it). i would like
> to do a client server version of R where the server can run on a
> unix box and the client is excel ond a win machine. the easiest
> solution would be running a stdin-stdout version of the server
> through inetd. but this is vulnerable. so what is needed is a
> sandbox version of the server, where no acrtive access to the file
> system is open and where spawning processes is disabled. are there
> any plans for doing such a version?

No immediate plans no.

It sounds a bit dangerous with dyn.load and whatnot floating around.
What would be more likely to work would be to have a version of R that
would immediately chroot() to a directory specified on the command
line and an inetd.conf entry like

auth stream  tcp nowait  nobody  \
   /usr/sbin/tcpd in.Rdaemon --chroot=/usr/lib/Rdaemon 

and setup /usr/lib/Rdaemon as a "chroot jail" with no write
permissions and /bin and /lib subdirectories with only the few system
commands and .so files needed to run (if there are any), and with an
/RHOME tree with packages and soforth. That way, it could do little
damage apart from eating CPU cycles. (Much like the way in which
anonymous FTP is set up).
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Mar 15 16:35:12 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 15 Mar 2000 08:35:12 -0800 (PST)
Subject: [Rd] question
In-Reply-To: <38CFAA3A.1108F0CC@univie.ac.at>
Message-ID: <Pine.GSO.4.21.0003150821350.22376-100000@mail.biostat.washington.edu>

On Wed, 15 Mar 2000, Erich Neuwirth wrote:

> here is another question (kurt already knows about it).
> i would like to do a client server version
> of R where the server can run on a unix box and the client
> is excel ond a win machine.
> the easiest solution would be running a stdin-stdout version
> of the server through inetd.
> but this is vulnerable.
> so what is needed is a sandbox version of the server,
> where no acrtive access to the file system is open
> and where spawning processes is disabled.
> are there any plans for doing such a version?


This would be very hard to do properly.  It's certainly possible to
disable the interpreted commands that access the file system, and even to
remove them from the symbol table so that .C and .Internal can't get to
them. This would stop accidental damage or casual attacks.

However I don't think we can disable .C/.Fortran completely.  By passing
data of the wrong types to .C a sufficiently malicious program can
overwrite the stack and get with very little effort the sort of effect
that usually takes buffer overflows. 

I think a secure version of R would require rewriting all the important .C
and .Fortran code to use Internal or .Call and then disabling .C and
.Fortran as well as system() and all the file access commands (or perhaps 
restricting the file access to a specific tree as http servers do).

In the foreseeable future I think the solution is to assume that R can
execute arbitrary code and either run in a safe account or authenticate
the connection somehow. 


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Wed Mar 15 18:02:22 2000
From: luke@stat.umn.edu (Luke Tierney)
Date: Wed, 15 Mar 2000 12:02:22 -0600 (CST)
Subject: [Rd] question
In-Reply-To: <38CFAA3A.1108F0CC@univie.ac.at> from Erich Neuwirth at "Mar 15, 2000 04:20:26 pm"
Message-ID: <200003151802.MAA23423@nokomis.stat.umn.edu>

Erich Neuwirth wrote:
> here is another question (kurt already knows about it).
> i would like to do a client server version
> of R where the server can run on a unix box and the client
> is excel ond a win machine.
> the easiest solution would be running a stdin-stdout version
> of the server through inetd.
> but this is vulnerable.
> so what is needed is a sandbox version of the server,
> where no acrtive access to the file system is open
> and where spawning processes is disabled.
> are there any plans for doing such a version?
> 

You could have a look at some of the things Jeff Banfield did for Rweb
(http://www.math.montana.edu/Rweb).  He disabled some things to get a
moderate increase in security, but as Thomas and Peter said, you
really can't drop dyn.load and .C and with those more or less anything
is open to someone who knows what they are doing.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Wed Mar 15 18:52:41 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Wed, 15 Mar 2000 19:52:41 +0100
Subject: [Rd] compiling
Message-ID: <38CFDBF9.C8B9D227@univie.ac.at>

here i am again.
it turns out that
the link step does not automatically include
the lnsl library, which contains the tcp stuff.
how can i tell configure it should use the relevant library
in the link step?
i cannot find a way of doing this.


--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Mar 15 18:55:58 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 15 Mar 2000 10:55:58 -0800 (PST)
Subject: [Rd] compiling
In-Reply-To: <38CFDBF9.C8B9D227@univie.ac.at>
Message-ID: <Pine.GSO.4.21.0003151055380.22376-100000@mail.biostat.washington.edu>

On Wed, 15 Mar 2000, Erich Neuwirth wrote:

> here i am again.
> it turns out that
> the link step does not automatically include
> the lnsl library, which contains the tcp stuff.
> how can i tell configure it should use the relevant library
> in the link step?
> i cannot find a way of doing this.

Add it to the LIBS variable in config.site

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Wed Mar 15 20:42:17 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Wed, 15 Mar 2000 21:42:17 +0100
Subject: [Rd] solaris without x
References: <38CF6DE7.896575F0@univie.ac.at> <14543.28986.899408.308721@aragorn.ci.tuwien.ac.at> <x2r9dco4ar.fsf@blueberry.kubism.ku.dk>
Message-ID: <38CFF5A9.2634CAAA@univie.ac.at>

ok,
i managed to create a non x-rated version of R

i am not an expert in writing configurations,
so i just give the changes.
perhaps some kind soul can integrate them into configure and
the different Makefile.in
or wheerever chanegs are needed.

-=-=-=-=-=-=

the following changes are needed:

necessary changes in 
src/unix/Makefile

old
SOURCES = dataentry.c devX11.c dynload.c edit.c rotated.c \
         system.c sys-unix.c sys-common.c
--->
new
SOURCES = dynload.c edit.c  \
          system.c sys-unix.c sys-common.c

probably sensible changes:
remove
HEADERS = dataentry.h devX11.h rotated.h

-=-=-=-=-=-=-=-=-=-=-

necessary changes in 
src/main/devices.c

#ifdef Unix

has to be changed to
Unix AND X11
(or whatever the syntax needed is)

-=-=-=-=-=-=-=-=-=-=-

necessary changes in 
src/main/names.c
remove the entry
{"dataentry",   do_dataentry,   0,      11,     1,      PP_FUNCALL},

-=-=-=-=-=-=-=-=-=-=-

necessary changes in 
src/unix/system.c

1. remove

            case XActivity:
                R_ProcessEvents();
                break;

2. remove 

#include "devX11.h"
#define XActivity 1
    int connectionfd = X11ConnectionNumber();


3. remove 
    if (connectionfd > 0) {
        FD_SET(connectionfd, &readMask);
        if (connectionfd > stdinfd)
            maxfd = connectionfd;

4. remove 
   if (connectionfd > 0)
        if (FD_ISSET(connectionfd, &readMask))
            return XActivity;



-=-=-=-=-=-=-=-=-=-=-


> However, last I tried (a couple of years back, admittedly...) it
> wasn't terribly difficult to force the sources to compile without X.
> Basically, place R on the operating table and rip out the relevant
> internal organs... I.e. you need to remove the entire dataentry.c and
> devX11.c and all references to X include files and functions in other
> places.
> 
> If you figure out how to do this with proper #ifdef'ing I think we'd
> like to have the patches (it is much easier to get right on a system
> that doesn't actuallly have X11, and gives an error if one forget to
> remove something...).
> 
--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Wed Mar 15 23:27:33 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Thu, 16 Mar 2000 10:27:33 +1100
Subject: [Rd] question
In-Reply-To: <38CFAA3A.1108F0CC@univie.ac.at>; from erich.neuwirth@univie.ac.at on Wed, Mar 15, 2000 at 04:20:26PM +0100
References: <38CFAA3A.1108F0CC@univie.ac.at>
Message-ID: <20000316102733.A9676@ftoomsh.progsoc.uts.edu.au>

On Wed, Mar 15, 2000 at 04:20:26PM +0100, Erich Neuwirth wrote:
> here is another question (kurt already knows about it).
> i would like to do a client server version
> of R where the server can run on a unix box and the client
> is excel ond a win machine.
> the easiest solution would be running a stdin-stdout version
> of the server through inetd.
> but this is vulnerable.

It isn't too bad if you feed it through the /usr/sbin/tcpd
service which can screen incoming connections (various
filtering rules go into /etc/hosts.allow and /etc/hosts.deny,
see the man page for tcpd). If your local network keeps
static IP numbers then add all the acceptable machines into
your /etc/hosts file so you have a local copy of their IP numbers
and no one can use the DNS to confuse your machine, also make
sure nothing nearby has source-routing switched on.

That is reasonably secure if you can trust the machines which
you are allowing connections from and your routers are set up
in a way that they cannot get confused. It is still possible
for someone to clip their laptop to the local network, use a
false IP number and maybe make a connection but this is pretty
unlikely and you probably will see the person doing it (unless
your local network is completely insecure like ours).

Naturally, using a chroot is a good idea and creating a local
unix user that does only this and owns no files except its
own tree is also a good idea.

	- Tel
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Mar 16 08:02:03 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 16 Mar 2000 09:02:03 +0100 (MET)
Subject: [Rd] Attachments with bug reports: PLEASE don't
In-Reply-To: <200003160435.FAA26315@stat.math.ethz.ch>
References: <200003160435.FAA26315@stat.math.ethz.ch>
Message-ID: <14544.38139.84527.599335@lynne.ethz.ch>

Dear Gregory,
you'v sent a bug report (PR#489) to R-bugs
with the subject
  "r-base_1.0.0-1_i386.deb install problem (PR#489)"

you end saying

>> I've attached both the modified control file, and a complete debian
>> package which is identical to the original except for this change.
>> 
>> -Gregory 
 
and then you have a 5 MB attachment, filename "r-base_1.0.0-2_i386.deb"
base64 encoded.
{and hence (size!) the automatic forwarding of the bug report to R-devel
 is bounced --- that's how I got it}.

Now, please  (everyone!)

     >>>> --------------------------------------- <<<<
     >>>> stop using attachments in R bug reports <<<<
     >>>> --------------------------------------- <<<<

1) the attachments become practically unusable once the bug report is 
   put in the jitterbug archive,
      http://bugs.r-project.org
      ~~~~~~~~~~~~~~~~~~~~~~~~~
2) Bug reports should usually be short (up to at most a few hundred lines, IMO)
   
3) If you (really) need to provide long files for data or such,
   make them available via FTP or HTTP from your site..

---

However, thank you for sending useful bug reports!
	 ---------
This way you are becoming part of the ``R culture''
which as most Open Source / Free Software projects
relies on wide collaboration.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Thu Mar 16 22:25:29 2000
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Thu, 16 Mar 2000 23:25:29 +0100 (MET)
Subject: [Rd] R-1.0.0 on alpha/osf1 memory glitch (PR#490)
Message-ID: <200003162225.XAA21838@pubhealth.ku.dk>

Digital Alpha (various), Digital UNIX V4.0[EF], R-1.0.0, gcc, f77

When using batch mode with the save option, an error message is issued.
However [I have just discovered that] it appears that the operation
does complete, i.e. the .RData file is saved successfully.  The main
problem is that the return code is non-zero (and so it is impossible to
distinguish this "non-error" from some other error in a script).

Reproduce by:

    bats>  echo 'x <- 1' | R --save
    
    R : Copyright 2000, The R Development Core Team
    Version 1.0.0  (February 29, 2000)
    
    R is free software and comes with ABSOLUTELY NO WARRANTY.
    You are welcome to redistribute it under certain conditions.
    Type    "?license" or "?licence" for distribution details.
    
    R is a collaborative project with many contributors.
    Type    "?contributors" for a list.
    
    Type    "demo()" for some demos, "help()" for on-line help, or
            "help.start()" for a HTML browser interface to help.
    Type    "q()" to quit R.
    
    > x <- 1
    >
    xmalloc: out of virtual memory
    bats> 

Note that an alternate form that achieves the same desired effect does
not issue any error messages:

    echo 'x <- 1; save(list = ls(), file = ".RData")' | R --no-save

I can't find any record of the configure summary output (is it saved
anywhere, or does it only appear on the screen?) but I could reproduce
this if necessary.

Ray Brownrigg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 17 07:32:00 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 17 Mar 2000 08:32:00 +0100
Subject: [Rd] solaris without x
In-Reply-To: <38CFF5A9.2634CAAA@univie.ac.at>
References: <38CF6DE7.896575F0@univie.ac.at>
 <14543.28986.899408.308721@aragorn.ci.tuwien.ac.at>
 <x2r9dco4ar.fsf@blueberry.kubism.ku.dk>
 <38CFF5A9.2634CAAA@univie.ac.at>
Message-ID: <200003170732.IAA01479@aragorn.ci.tuwien.ac.at>

>>>>> Erich Neuwirth writes:

> ok,
> i managed to create a non x-rated version of R

> i am not an expert in writing configurations, so i just give the
> changes.  perhaps some kind soul can integrate them into configure and
> the different Makefile.in or wheerever chanegs are needed.

I'll try to merge the changes into R, but it may take a few days ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 17 07:32:00 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 17 Mar 2000 08:32:00 +0100
Subject: [Rd] compiling
In-Reply-To: <Pine.GSO.4.21.0003151055380.22376-100000@mail.biostat.washington.edu>
References: <38CFDBF9.C8B9D227@univie.ac.at>
 <Pine.GSO.4.21.0003151055380.22376-100000@mail.biostat.washington.edu>
Message-ID: <200003170732.IAA01482@aragorn.ci.tuwien.ac.at>

>>>>> Thomas Lumley writes:

> On Wed, 15 Mar 2000, Erich Neuwirth wrote:
>> here i am again.
>> it turns out that
>> the link step does not automatically include
>> the lnsl library, which contains the tcp stuff.
>> how can i tell configure it should use the relevant library
>> in the link step?
>> i cannot find a way of doing this.

> Add it to the LIBS variable in config.site

> 	-thomas

Or, do

	LIBS=-lnsl /path/to/configure

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 17 07:32:01 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 17 Mar 2000 08:32:01 +0100
Subject: [Rd] headers needed in gcc
In-Reply-To: <38CF9094.EEE7BEEC@univie.ac.at>
References: <38CF9094.EEE7BEEC@univie.ac.at>
Message-ID: <200003170732.IAA01487@aragorn.ci.tuwien.ac.at>

>>>>> Erich Neuwirth writes:

> i am working my way to create a stdin-stdout version of R
> i am not a gcc configuration expert.
> currently, i am missing

> #include <sys/types.h>
> #  include <sys/socket.h>
> #  include <netinet/in.h>
> #  include <netinet/tcp.h>
> #include "sock.h"

> as far as i understand my system, these header files shpuld be in
> /usr/local/lib/gcc-lib/sparc-sun-solaris2.7/2.95.1/include

> what library do i have to create in gcc to get these goodies?

I don't know whether the header files ``should'' be in gcc-lib (in which
case gcc should also find them), but the code definitely needs some
help.  I don't think that sys/socket.h or netinet/*.h are ANSI C, and
this is all we assume.  We should have AC_CONFIG_HEADER tests for each
of these, and not have sockets if the headers cannot be found.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kthaka@uta.fi  Fri Mar 17 09:16:11 2000
From: kthaka@uta.fi (kthaka@uta.fi)
Date: Fri, 17 Mar 2000 10:16:11 +0100 (MET)
Subject: [Rd] lag (PR#491)
Message-ID: <200003170916.KAA24535@pubhealth.ku.dk>

Full_Name: Hannu Kahra
Version: 1.0.0
OS: Windows
Submission from: (NULL) (153.1.50.127)


x1 <- lag(x, k=1) returns the original series x. The time series is not
shiftet at all. Only the time is shiftet: for x1 new start = old start -1 
and new end = old end -1. When I run, e.g. lm(x~x1) the result is not what
I expect. Both x and x1 are time series. Is this a bug or am I forgetting
something?

Regards
Hannu Kahra 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 17 09:38:18 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 17 Mar 2000 09:38:18 +0000 (GMT)
Subject: [Rd] lag (PR#491)
In-Reply-To: <200003170916.KAA24535@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10003170931560.26211-100000@auk.stats>

On Fri, 17 Mar 2000 kthaka@uta.fi wrote:

> Full_Name: Hannu Kahra
> Version: 1.0.0
> OS: Windows
> Submission from: (NULL) (153.1.50.127)
> 
> 
> x1 <- lag(x, k=1) returns the original series x. The time series is not
> shiftet at all. Only the time is shiftet: for x1 new start = old start -1 
> and new end = old end -1. When I run, e.g. lm(x~x1) the result is not what

So that is _not_ the original series!

> I expect. Both x and x1 are time series. Is this a bug or am I forgetting
> something?

Your description is exactly as documented:

Lag a Time Series

Description:

     Computed a lagged version of a time series, shifting the time base
     back by `k' observations.

[Please read the documentation before submitting a bug report. The FAQ
tells you what a bug is.]

Don't apply regression (a non-time-series technique) to time series, and
expect the implicit conversion to vectors to preserve the time alignment.
Do something like

library(ts)
data(lh)
df <- cbind(x=lh, x1 =lag(lh, 1))
lm(x ~ x1, data=df)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From robertasg@takas.lt  Fri Mar 17 15:35:38 2000
From: robertasg@takas.lt (robertasg@takas.lt)
Date: Fri, 17 Mar 2000 16:35:38 +0100 (MET)
Subject: [Rd] the R bug (PR#492)
Message-ID: <200003171535.QAA01208@pubhealth.ku.dk>

This is a multi-part message in MIME format.

------=_NextPart_000_0005_01BF9034.A9183BA0
Content-Type: text/plain;
	charset="iso-8859-4"
Content-Transfer-Encoding: quoted-printable

Hello, i am from Lithuania=20
I am workink with program R. But i have problem, if i need work with =
more als 220Mb disk space. Free disk space i have 2Gb.=20
Can you help me??

Sincerly Robertas Geistoraitis form Lithuania from Genetic Laboratory=20
University of Veterinary



------=_NextPart_000_0005_01BF9034.A9183BA0
Content-Type: text/html;
	charset="iso-8859-4"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META content=3D"text/html; charset=3Diso-8859-4" =
http-equiv=3DContent-Type>
<META content=3D"MSHTML 5.00.2614.3500" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT face=3DArial size=3D2>Hello, i am from Lithuania =
</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>I am workink with program R. But i have =
problem, if=20
i need work with more als 220Mb disk space. Free disk space i have 2Gb.=20
</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Can you help me??</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>Sincerly Robertas Geistoraitis form =
Lithuania from=20
Genetic Laboratory </FONT></DIV>
<DIV><FONT face=3DArial size=3D2>University of Veterinary</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV></BODY></HTML>

------=_NextPart_000_0005_01BF9034.A9183BA0--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Fri Mar 17 15:35:30 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Fri, 17 Mar 2000 16:35:30 +0100
Subject: [Rd] lag (PR#491)
References: <Pine.GSO.4.05.10003170931560.26211-100000@auk.stats>
Message-ID: <38D250C1.5D6EBE49@univie.ac.at>

here is another thing

on my relatively standard solaris 7 configuration i had to put
LIB="-lnsl -lsocket"
in config.site

perhaps this can be done by configure automatically,
if gcc is found?


--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar 17 16:30:34 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 17 Mar 2000 08:30:34 -0800 (PST)
Subject: [Rd] -nsl
In-Reply-To: <38D250C1.5D6EBE49@univie.ac.at>
Message-ID: <Pine.GSO.4.21.0003170826340.29031-100000@mail.biostat.washington.edu>

On Fri, 17 Mar 2000, Erich Neuwirth wrote:

> here is another thing
> 
> on my relatively standard solaris 7 configuration i had to put
> LIB="-lnsl -lsocket"
> in config.site
> 
> perhaps this can be done by configure automatically,
> if gcc is found?

On my Solaris 7 configuration it is looked for automatically with either
cc or gcc. The check is part of X_EXTRA_LIBS

If we are going to configure --without-x it would need to be
checked for.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dirk@surfer.sbm.temple.edu  Fri Mar 17 17:02:48 2000
From: dirk@surfer.sbm.temple.edu (dirk@surfer.sbm.temple.edu)
Date: Fri, 17 Mar 2000 18:02:48 +0100 (MET)
Subject: [Rd] optim: problem with additional arguments (PR#493)
Message-ID: <200003171702.SAA01912@pubhealth.ku.dk>

The R function "optim" fails when a function requires additional
arguments, if the option "hessian=T" is specified.  I am using R Version
1.0.0 on Windows 98.

Here is an example of the Rosenbrock Banana function from the optim help
example, with the function and gradient modified to take an additonal
argument.  Note that the call to optim works fine unless a hessian is
requested.


     ## Rosenbrock Banana function, modified to take an additional
argument
     fra <- function(x,a) {
         x1 <- x[1]
         x2 <- x[2]
         a * (x2 - x1 * x1)^2 + (1 - x1)^2
     }

     grra <- function(x,a) {
         x1 <- x[1]
         x2 <- x[2]
         c(-4*a * x1 * (x2 - x1 * x1) - 2 * (1 - x1), 2*a * (x2 - x1 *
x1))
     }
a <- 100
xx <- c(-2.1,1)
optim(c(-1.2,1), fra, grra, method = "BFGS",a=100)             # this
works
optim(c(-1.2,1), fra, grra, method = "BFGS",hessian=T,a=100)   # this
doesn't



Dirk Moore
Dept. of Statistics
Temple University
dirk@sbm.temple.edu




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 17 17:28:28 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 17 Mar 2000 18:28:28 +0100 (CET)
Subject: [Rd] -nsl
In-Reply-To: <Pine.GSO.4.21.0003170826340.29031-100000@mail.biostat.washington.edu>
References: <38D250C1.5D6EBE49@univie.ac.at>
 <Pine.GSO.4.21.0003170826340.29031-100000@mail.biostat.washington.edu>
Message-ID: <14546.27452.734481.937821@aragorn.ci.tuwien.ac.at>

>>>>> Thomas Lumley writes:

> On Fri, 17 Mar 2000, Erich Neuwirth wrote:
>> here is another thing
>> 
>> on my relatively standard solaris 7 configuration i had to put
>> LIB="-lnsl -lsocket"
>> in config.site
>> 
>> perhaps this can be done by configure automatically,
>> if gcc is found?

> On my Solaris 7 configuration it is looked for automatically with
> either cc or gcc. The check is part of X_EXTRA_LIBS

> If we are going to configure --without-x it would need to be checked
> for.

I think we need to test for socket functionality, both for header files
and libraries.  Let me see if I can come up with such a test ...

Where did sock.c && friends come from?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar 17 17:43:20 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 17 Mar 2000 09:43:20 -0800 (PST)
Subject: [Rd] -nsl
In-Reply-To: <14546.27452.734481.937821@aragorn.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.21.0003170942240.29432-100000@mail.biostat.washington.edu>

On Fri, 17 Mar 2000, Kurt Hornik wrote:

> >>>>> Thomas Lumley writes:
> 
> > On Fri, 17 Mar 2000, Erich Neuwirth wrote:
> >> here is another thing
> >> 
> >> on my relatively standard solaris 7 configuration i had to put
> >> LIB="-lnsl -lsocket"
> >> in config.site
> >> 
> >> perhaps this can be done by configure automatically,
> >> if gcc is found?
> 
> > On my Solaris 7 configuration it is looked for automatically with
> > either cc or gcc. The check is part of X_EXTRA_LIBS
> 
> > If we are going to configure --without-x it would need to be checked
> > for.
> 
> I think we need to test for socket functionality, both for header files
> and libraries.  Let me see if I can come up with such a test ...
> 
> Where did sock.c && friends come from?

They're based on Luke's socket code for xlispstat.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 17 18:43:42 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Mar 2000 19:43:42 +0100
Subject: [Rd] optim: problem with additional arguments (PR#493)
In-Reply-To: dirk@surfer.sbm.temple.edu's message of "Fri, 17 Mar 2000 18:02:48 +0100 (MET)"
References: <200003171702.SAA01912@pubhealth.ku.dk>
Message-ID: <x2zorxfndt.fsf@blueberry.kubism.ku.dk>

dirk@surfer.sbm.temple.edu writes:

> The R function "optim" fails when a function requires additional
> arguments, if the option "hessian=T" is specified.  I am using R Version
> 1.0.0 on Windows 98.
....
> optim(c(-1.2,1), fra, grra, method = "BFGS",a=100)             # this
> works
> optim(c(-1.2,1), fra, grra, method = "BFGS",hessian=T,a=100)   # this
> doesn't

Yes. However, you can easily fix it for yourself. In optim(), the line

    hess <- .Internal(optimhess(res$par, fn, gr, con))

needs to be modified along the lines of

    res <- .Internal(optim(par, function(par) fn(par, ...),
                           function(par) gr(par, ...),
                           method, con, lower, upper))

(although that might get you in trouble if gr is NULL, so a permanent
fix would be slightly different.)


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Hoffmann" <thoffman@zappa.sax.de  Fri Mar 17 23:04:10 2000
From: Thomas Hoffmann" <thoffman@zappa.sax.de (Thomas Hoffmann)
Date: Sat, 18 Mar 00 00:04:10 +0100
Subject: [Rd] d-p-q-r-tests: why is plnorm(exp(Inf)) equal pnorm(Inf)?
Message-ID: <38d2b9ec.thoffman.zappa@zappa.sax.de>

I stumbled across a result of d-p-q-r-tests:

d-p-q-r-tests expects pnorm(Inf) and pnorm(-Inf)  to give the same results as  plnorm(exp(Inf)) 
and plnorm(exp(-Inf)), respectively.

Does this mean that all expressions result in NaN (which I expect for the 3rd and 4th expression only) or 
does it mean that R can prevent the exp(Inf) to be evaluated before being parsed in the context of plnorm?

Thomas Hoffmann.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar 17 23:38:48 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 17 Mar 2000 15:38:48 -0800 (PST)
Subject: [Rd] d-p-q-r-tests: why is plnorm(exp(Inf)) equal pnorm(Inf)?
In-Reply-To: <38d2b9ec.thoffman.zappa@zappa.sax.de>
Message-ID: <Pine.GSO.4.21.0003171536410.29432-100000@mail.biostat.washington.edu>

On Sat, 18 Mar 2000, Thomas Hoffmann wrote:

> I stumbled across a result of d-p-q-r-tests:
> 
> d-p-q-r-tests expects pnorm(Inf) and pnorm(-Inf)  to give the same results as  plnorm(exp(Inf)) 
> and plnorm(exp(-Inf)), respectively.
> 
> Does this mean that all expressions result in NaN (which I expect for
> the 3rd and 4th expression only) or does it mean that R can prevent
> the exp(Inf) to be evaluated before being parsed in the context of
> plnorm?

No, it means that exp(Inf) and exp(-Inf) are evaluated correctly (Inf and
0 respectively) and the lognormal cdf is then evaluated as 1 and 0
respectively. 

If the result were NaN then equality would not hold. Nothing is equal to
NaN, not even itself.



	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Sat Mar 18 05:14:17 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 18 Mar 2000 00:14:17 -0500
Subject: [Rd] AIX fails on startup with R-1.0.0
Message-ID: <87ln3g97x2.fsf@bavaria.ece.cmu.edu>


Hi,

this is not a bug report since this may not be a problem with R per se. 

The current release of R (1.1.0) will compile cleanly on an AIX box
(I have 4.3.2) but it will fail upon startup with an Illegal
Instruction.  I've located the problem to be in do_strsplit when R
calls regcomp.

This function is defined in regex.c.  However, the text from regex.o
doesn't find its way into the executable, R.X11, since there's also a
regcomp in /usr/lib/libc.a  Apparently, this confuses the system
enough to completely lose its mind.  When regcomp in libc.a gets
called, the stack is trashed which made this hard to debug.

A temporary fix is to remove the _first_ use of -lc from the linker
command line.  This will affect the way the export symbols are
defined.  Not sure yet whether this matters.

Why does this bug only show up on AIX?  Is this some weird posix trap?

Thanks,
  -tom  

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Mar 18 10:58:00 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Mar 2000 11:58:00 +0100
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: Thomas J Vogels's message of "18 Mar 2000 00:14:17 -0500"
References: <87ln3g97x2.fsf@bavaria.ece.cmu.edu>
Message-ID: <x2hfe4czpj.fsf@blueberry.kubism.ku.dk>

Thomas J Vogels <tov@ece.cmu.edu> writes:

> Hi,
> 
> this is not a bug report since this may not be a problem with R per se. 
> 
> The current release of R (1.1.0) will compile cleanly on an AIX box
> (I have 4.3.2) but it will fail upon startup with an Illegal
> Instruction.  I've located the problem to be in do_strsplit when R
> calls regcomp.
> 
> This function is defined in regex.c.  However, the text from regex.o
> doesn't find its way into the executable, R.X11, since there's also a
> regcomp in /usr/lib/libc.a  Apparently, this confuses the system
> enough to completely lose its mind.  When regcomp in libc.a gets
> called, the stack is trashed which made this hard to debug.
> 
> A temporary fix is to remove the _first_ use of -lc from the linker
> command line.  This will affect the way the export symbols are
> defined.  Not sure yet whether this matters.
> 
> Why does this bug only show up on AIX?  Is this some weird posix trap?

We've discussed this recently (others know better than me). I think
you have it spot on, and the problem is that almost all other systems
than AIX will have the linker implicitly move -lc *after* the .o
files... AFAIR the permanent fix is equivalent to your temporary one.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Sat Mar 18 19:18:20 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Sat, 18 Mar 2000 11:18:20 -0800 (PST)
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: <x2hfe4czpj.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu>

On 18 Mar 2000, Peter Dalgaard BSA wrote:

> Thomas J Vogels <tov@ece.cmu.edu> writes:
> 
> > Hi,
> > 
> > this is not a bug report since this may not be a problem with R per se. 
> > 
> > The current release of R (1.1.0) will compile cleanly on an AIX box
> > (I have 4.3.2) but it will fail upon startup with an Illegal
> > Instruction.  I've located the problem to be in do_strsplit when R
> > calls regcomp.
> > 
> > This function is defined in regex.c.  However, the text from regex.o
> > doesn't find its way into the executable, R.X11, since there's also a
> > regcomp in /usr/lib/libc.a  Apparently, this confuses the system
> > enough to completely lose its mind.  When regcomp in libc.a gets
> > called, the stack is trashed which made this hard to debug.
> > 
> > A temporary fix is to remove the _first_ use of -lc from the linker
> > command line.  This will affect the way the export symbols are
> > defined.  Not sure yet whether this matters.
> > 
> > Why does this bug only show up on AIX?  Is this some weird posix trap?
> 
> We've discussed this recently (others know better than me). I think
> you have it spot on, and the problem is that almost all other systems
> than AIX will have the linker implicitly move -lc *after* the .o
> files... AFAIR the permanent fix is equivalent to your temporary one.


It's actually a combination of a number of factors.  On most systems we
link with the C compiler, which knows what to do with libc automatically.  
In any case, many linkers can handle the problem as Peter points out.

On AIX we were using ld rather than CC to link, and ld doesn't move -lc to
the end, and we were using a hardcoded set of linker options that some
helpful user had sent in a long time ago (no-one in R-core has very
convenient access to AIX). It worked fine until we added GNU regex to R.

The fix was what you suggest.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Sun Mar 19 14:50:30 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Sun, 19 Mar 2000 15:50:30 +0100
Subject: [Rd] windows version
References: <87ln3g97x2.fsf@bavaria.ece.cmu.edu> <x2hfe4czpj.fsf@blueberry.kubism.ku.dk>
Message-ID: <38D4E936.EB941D1C@univie.ac.at>

for all of you using the windows version:
i think having a look at the r-winedt
interface by volker ligges is a good idea.
it works quite nicely.

i talked to volker,
and at the moment,
there is something which could be improved,
anmley it would be nice if one could get access to the current
history buffer.

is there a way of getting it
(i.e. exactly what would be saved in .Rhistory if one were to exit right
now)?

then one could interactively edit the current session
in winedt.







Peter Dalgaard BSA wrote:
> 
> Thomas J Vogels <tov@ece.cmu.edu> writes:
> 
> > Hi,
> >
> > this is not a bug report since this may not be a problem with R per se.
> >
> > The current release of R (1.1.0) will compile cleanly on an AIX box
> > (I have 4.3.2) but it will fail upon startup with an Illegal
> > Instruction.  I've located the problem to be in do_strsplit when R
> > calls regcomp.
> >
> > This function is defined in regex.c.  However, the text from regex.o
> > doesn't find its way into the executable, R.X11, since there's also a
> > regcomp in /usr/lib/libc.a  Apparently, this confuses the system
> > enough to completely lose its mind.  When regcomp in libc.a gets
> > called, the stack is trashed which made this hard to debug.
> >
> > A temporary fix is to remove the _first_ use of -lc from the linker
> > command line.  This will affect the way the export symbols are
> > defined.  Not sure yet whether this matters.
> >
> > Why does this bug only show up on AIX?  Is this some weird posix trap?
> 
> We've discussed this recently (others know better than me). I think
> you have it spot on, and the problem is that almost all other systems
> than AIX will have the linker implicitly move -lc *after* the .o
> files... AFAIR the permanent fix is equivalent to your temporary one.
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Sun Mar 19 23:00:48 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 19 Mar 2000 18:00:48 -0500
Subject: [Rd] R-1.0.0 on alpha/osf1 memory glitch (PR#490)
References: <200003162225.XAA21838@pubhealth.ku.dk>
Message-ID: <87hfe21s67.fsf@bavaria.ece.cmu.edu>


Hi,

I just tried this on an AIX computer (4.3.2, also gcc + f77, R-1.0.0).
The same "error" comes up -- xmalloc complains.  This is somewhat
cosmetic as the data is fine so it may not be very high on the
priority list.
Anyways, let me know if I can help debug this--I don't know whether
you have easy access to DEC or AIX boxes.  But with a dysfunctional
gdb I'd need a hint about where this might happen.
Regards,
  -tom


Ray.Brownrigg@mcs.vuw.ac.nz writes:

> Digital Alpha (various), Digital UNIX V4.0[EF], R-1.0.0, gcc, f77
> 
> When using batch mode with the save option, an error message is issued.
> However [I have just discovered that] it appears that the operation
> does complete, i.e. the .RData file is saved successfully.  The main
> problem is that the return code is non-zero (and so it is impossible to
> distinguish this "non-error" from some other error in a script).

[snip]
>     xmalloc: out of virtual memory

[snip]

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Mar 19 23:49:00 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Mar 2000 00:49:00 +0100
Subject: [Rd] R-1.0.0 on alpha/osf1 memory glitch (PR#490)
In-Reply-To: Thomas J Vogels's message of "19 Mar 2000 18:00:48 -0500"
References: <200003162225.XAA21838@pubhealth.ku.dk> <87hfe21s67.fsf@bavaria.ece.cmu.edu>
Message-ID: <x266ui4j2r.fsf@blueberry.kubism.ku.dk>

Thomas J Vogels <tov@ece.cmu.edu> writes:

> Hi,
> 
> I just tried this on an AIX computer (4.3.2, also gcc + f77, R-1.0.0).
> The same "error" comes up -- xmalloc complains.  This is somewhat
> cosmetic as the data is fine so it may not be very high on the
> priority list.
> Anyways, let me know if I can help debug this--I don't know whether
> you have easy access to DEC or AIX boxes.  But with a dysfunctional
> gdb I'd need a hint about where this might happen.
> Regards,
>   -tom
...
> [snip]
> >     xmalloc: out of virtual memory
> 
> [snip]

Hmm. In system.c we have

    case SA_SAVE:
	if(runLast) R_dot_Last();
	if(R_DirtyImage) R_SaveGlobalEnv();
#ifdef HAVE_LIBREADLINE
#ifdef HAVE_READLINE_HISTORY_H
	if(R_Interactive && UsingReadline)
	    stifle_history(R_HistorySize);
	write_history(R_HistoryFile);
#endif
#endif
	break;


This looks wrong to me since write_history is getting called even if
!R_Interactive and !UsingReadline, in which case I don't think there
*is* a history to write and I'd suspect that anything could happen...
Could you try making that

        if(R_Interactive && UsingReadline) {
            stifle_history(R_HistorySize);
            write_history(R_HistoryFile);
	}

 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Mar 20 00:01:45 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 19 Mar 2000 19:01:45 -0500
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: Thomas Lumley's message of "Sat, 18 Mar 2000 11:18:20 -0800 (PST)"
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu>
Message-ID: <871z561pcm.fsf@bavaria.ece.cmu.edu>



Thomas Lumley <thomas@biostat.washington.edu> writes:

[snip]
> It's actually a combination of a number of factors.  On most systems we
> link with the C compiler, which knows what to do with libc automatically.  
> In any case, many linkers can handle the problem as Peter points out.

On AIX you have to build the export file, R.exp, which was the reason
to force the use of ld, I believe.  Also, the libs must be on the
command line for ldAIX to include exported symbols from libc.a in
R.exp (which reduces the size of shared libs).

> On AIX we were using ld rather than CC to link, and ld doesn't move -lc to
> the end, and we were using a hardcoded set of linker options that some
> helpful user had sent in a long time ago (no-one in R-core has very
> convenient access to AIX). It worked fine until we added GNU regex to R.

ok, now I understand why this problem didn't occur until 1.0.  I
glanced at Makeconf.  There is the '-lc' (along with '-lm') in the
DLLFLAGS but also in SHLIBLDFLAGS -- do you plan to export regexec and
friends?  Because the creation of shared libs with an early -lc will
create the same Illegal Instructions...

Thanks,
  -tom


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Mon Mar 20 00:57:23 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Mon, 20 Mar 2000 12:57:23 +1200
Subject: [Rd] followup to graphics bug #414
References: <Pine.LNX.4.10.10002110817290.953-100000@bolker.zoo.ufl.edu> <001301bf7696$9cde2780$175dd882@stat.auckland.ac.nz> <x2bt5k8a52.fsf@blueberry.kubism.ku.dk>
Message-ID: <016201bf9207$40fd6d40$175dd882@stat.auckland.ac.nz>

hi

i have committed a fix for this bug into the development version.

The idea is that, for devices which canClip, R still does some preclipping
to the device
extent.  This stops stupidly large numbers being sent to the device, but
there is a penalty in that two sets of clipping occurs.  Note that this
preclipping occurs in the graphics engine to  avoid the need for per-device
checks.  For more information, see the latex file included below.

paul


---snip---


\documentclass{article}
\title{Changes to Clipping in R}
\author{Paul Murrell}
\begin{document}
\maketitle

All devices have a {\tt canClip} field which indicates whether they
have clipping facilities.  Previously,
if this field was {\tt true} then R used to
delegate all clipping to the device.  R has its own clipping code (in
{\tt graphics.c}) for devices which cannot do the clipping themselves.

Note that R's clipping is inferior to a device's clipping (which is why we
let the device do the clipping if it can).  For example, R's text
clipping completely clips text if the text intersects the boundary of
the clipping region at all (i.e., text is only drawn if it lies wholly
within the clipping region).

\section*{The Problem}

Devices which can clip still have problems with (for example) very large
numbers.  For example, if you try to draw a line which is several feet
off the edge of an X11 window or a Postscript page, the device will fall
over.

\section*{The Solution}

For devices which {\tt canClip}, R does some ``preclipping'' to the device
extent.  This removes the possibility of ridiculously large numbers being
sent to a device.  The device is still responsible for any further clipping.
For devices which cannot clip, R does all of the clipping (as before).

This preclipping occurs at the level of graphical primitives (i.e.,
{\tt GLine}, {\tt GPolyline}, {\tt GPolygon}, {\tt GRect}, {\tt GCircle},
and {\tt GText}).
Only text is a special case.  In general, any part of the graphical
primitive which lies outside of the device extent gets clipped.  This means
that the device only gets sent graphical primitives which lie entirely
within the device extent.  Because R's text clipping is pretty crude,
this policy is a bit of overkill, so
if the device {\tt canClip} and the text intersects the device boundary,
the text is sent unaltered to the device.  It is assumed that, if a
piece of text intersects the boundary of the device then it cannot extend
a ridiculous distance outside of the device (unless it is a VERY long
piece of text, or a VERY large font is being used).

There will be a speed penalty for devices which {\tt canClip} because there
will now be two sets of clipping occurring (R clips to the device, then
the device clips to the current setting of {\tt par("xpd")}).  This may
affect X11 and Windows devices - don't know by how much.

\section*{Addendum}

The Postscript device was not doing any clipping, despite the fact that
Postscript has full clipping capabilities.  This has been changed so that
Postscript devices now {\tt canClip}.  This should improve the text
clipping on Postscript output (which used to use R's crude text clipping).

\end{document}



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Mon Mar 20 11:21:20 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 20 Mar 2000 12:21:20 +0100
Subject: [Rd] windows version
References: <87ln3g97x2.fsf@bavaria.ece.cmu.edu> <x2hfe4czpj.fsf@blueberry.kubism.ku.dk> <38D4E936.EB941D1C@univie.ac.at>
Message-ID: <38D609B0.5F652E67@statistik.uni-dortmund.de>

Erich Neuwirth schrieb:
> 
> for all of you using the windows version:
> i think having a look at the r-winedt
> interface by volker ligges is a good idea.
> it works quite nicely.
> 
> i talked to volker,
> and at the moment,
> there is something which could be improved,
> anmley it would be nice if one could get access to the current
> history buffer.
> 
> is there a way of getting it
> (i.e. exactly what would be saved in .Rhistory if one were to exit right
> now)?
> 
> then one could interactively edit the current session
> in winedt.

I just uploaded a new "version" of R-WinEdt with some improvements /
bugfixes and enhanced ReadMe to CRAN (Erich Neuwirth already has got
it).

The latest release is also available at 
http://www.statistik.uni-dortmund.de/leute/ligges.htm


Thanks for all comments!

Uwe Ligges
^^^  ;-)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Mon Mar 20 21:12:59 2000
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray Brownrigg)
Date: Tue, 21 Mar 2000 09:12:59 +1200 (NZST)
Subject: [Rd] R-1.0.0 on alpha/osf1 memory glitch (PR#490)
Message-ID: <200003202112.JAA07598@aqua.mcs.vuw.ac.nz>

> Hmm. In system.c we have
> 
>     case SA_SAVE:
> 	if(runLast) R_dot_Last();
> 	if(R_DirtyImage) R_SaveGlobalEnv();
> #ifdef HAVE_LIBREADLINE
> #ifdef HAVE_READLINE_HISTORY_H
> 	if(R_Interactive && UsingReadline)
> 	    stifle_history(R_HistorySize);
> 	write_history(R_HistoryFile);
> #endif
> #endif
> 	break;
> 
> Could you try making that
> 
>         if(R_Interactive && UsingReadline) {
>             stifle_history(R_HistorySize);
>             write_history(R_HistoryFile);
> 	}
> 
I can confirm that this change works in my situation.

Thanks,
Ray Brownrigg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Mar 20 22:20:15 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Mon, 20 Mar 2000 17:20:15 -0500 (EST)
Subject: [Rd] followup to graphics bug #414
In-Reply-To: <016201bf9207$40fd6d40$175dd882@stat.auckland.ac.nz>
Message-ID: <Pine.LNX.4.10.10003201645220.8643-100000@bolker.zoo.ufl.edu>


  I haven't been able to compile the development version on my machine yet
(problems with BLAS includes, I don't have time to dig into it right now),
so I'm curious: does this fix also solve the problem recently reported by
Robert Sandefur recently on R-help, where he got different results from
abline() on the X11 and Postscript drivers?  I can replicate his problem
(and perhaps shed some light on it) with the following code--

==========================

tmpf0 <- function(col=1:3,...) {
  p <- matrix(c(3.9,0.2,3.9,0.25,3.9,1.0),byrow=TRUE,ncol=2)
  abline(coef=p[1,],col=col[1],...)
  abline(coef=p[2,],col=col[2],...)
  abline(coef=p[3,],col=col[3],...)
}

tmpf0(3:4)
tmpf0(1:2,p1=c(3.9,0.2),p2=c(3.9,0.25))
tmpf0(1:2,p1=c(3.9,0.2),p2=c(3.9,0.25))

tmpf <- function() {
  plot(1:10,1:10,xlim=c(-3,3),ylim=c(2000,1000000),log="y")
  par(xpd=TRUE)
  tmpf0(lty=1)
  par(xpd=FALSE)
  tmpf0(lty=2)
  par(xpd=NA)
  tmpf0(lty=3)
}

x11()
tmpf()
postscript(file="tmp.ps")
tmpf()
dev.off()
========================

I set this up so that one line (red) would clip at the bottom only, one
line (green) would clip at the bottom and the top, and one line (black)
wouldn't need clipping at all. In R 1.0.0 everything works fine under the
X11 driver but under the Postscript driver, both of the clipped lines are
wrong, but are different depending on how the clipping parameter is set.

  I haven't yet been able to track the source of this down, but I hope
that this information helps if someone gets to it before I do.  If the
recent fix also fixes this bug, that would be very nice.

  Ben Bolker

On Mon, 20 Mar 2000, Paul Murrell wrote:

> hi
> 
> i have committed a fix for this bug into the development version.
> 
> The idea is that, for devices which canClip, R still does some preclipping
> to the device
> extent.  This stops stupidly large numbers being sent to the device, but
> there is a penalty in that two sets of clipping occurs.  Note that this
> preclipping occurs in the graphics engine to  avoid the need for per-device
> checks.  For more information, see the latex file included below.
> 
> paul
> 
> 


-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Mar 20 22:34:49 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Mon, 20 Mar 2000 23:34:49 +0100 (MET)
Subject: [Rd] minor problem in barplot legend (PR#494)
Message-ID: <200003202234.XAA19634@pubhealth.ku.dk>


  If length(col)<length(legend.txt) in barplot, then the reversal of
the legend leads to funny results.  For example:

x <- matrix(runif(25),nrow=5)
barplot(x,col=c("red","green","black"),legend=as.character(1:5),ylim=c(0,5))

The (easy) fix is to replace

       legend.col <- col

with

         legend.col <- rep(col,length=length(legend.text))

on line 94 of barplot.default.

  Trivia, but hey, it confused me for a little while, it might as well
be fixed.

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Mar 20 22:49:50 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 20 Mar 2000 17:49:50 -0500
Subject: [Rd] R-1.0.0 on alpha/osf1 memory glitch (PR#490)
In-Reply-To: Peter Dalgaard BSA's message of "20 Mar 2000 00:49:00 +0100"
References: <200003162225.XAA21838@pubhealth.ku.dk> <87hfe21s67.fsf@bavaria.ece.cmu.edu> <x266ui4j2r.fsf@blueberry.kubism.ku.dk>
Message-ID: <87bt49i7e9.fsf@bavaria.ece.cmu.edu>



Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

[snip]
>         if(R_Interactive && UsingReadline) {
>             stifle_history(R_HistorySize);
>             write_history(R_HistoryFile);
> 	}

That takes care of the xmalloc complaints on an AIX box as well.
(Also, recompiling R with -lc in LIBS instead of DLLFLAGS works for AIX...)

Thanks!
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 20 23:34:29 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Mar 2000 00:34:29 +0100
Subject: [Rd] followup to graphics bug #414
In-Reply-To: Ben Bolker's message of "Mon, 20 Mar 2000 17:20:15 -0500 (EST)"
References: <Pine.LNX.4.10.10003201645220.8643-100000@bolker.zoo.ufl.edu>
Message-ID: <x2k8ixp662.fsf@blueberry.kubism.ku.dk>

Ben Bolker <ben@zoo.ufl.edu> writes:

> I set this up so that one line (red) would clip at the bottom only, one
> line (green) would clip at the bottom and the top, and one line (black)
> wouldn't need clipping at all. In R 1.0.0 everything works fine under the
> X11 driver but under the Postscript driver, both of the clipped lines are
> wrong, but are different depending on how the clipping parameter is set.
> 
>   I haven't yet been able to track the source of this down, but I hope
> that this information helps if someone gets to it before I do.  If the
> recent fix also fixes this bug, that would be very nice.

I suspect it will. The clipping functions are broken with logged axes
on all devices which cannot do their own clipping, and since Paul made
devPS capable of clipping... 

We still need a fix for clipping for 1.0.1. I assume that the new
devPS has been changed too much to qualify as a bugfix (?) and
anyways, it is still a bug for any other device without clipping
capabilities. 

(As you may have gathered, the bug is that clipping is calculated by
linear interpolations on the original scale, which isn't going to
work...) 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Tue Mar 21 00:00:58 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Tue, 21 Mar 2000 12:00:58 +1200
Subject: [Rd] followup to graphics bug #414
References: <Pine.LNX.4.10.10003201645220.8643-100000@bolker.zoo.ufl.edu> <x2k8ixp662.fsf@blueberry.kubism.ku.dk>
Message-ID: <012101bf92c8$89c92ac0$175dd882@stat.auckland.ac.nz>

hi


> > I set this up so that one line (red) would clip at the bottom only, one
> > line (green) would clip at the bottom and the top, and one line (black)
> > wouldn't need clipping at all. In R 1.0.0 everything works fine under
the
> > X11 driver but under the Postscript driver, both of the clipped lines
are
> > wrong, but are different depending on how the clipping parameter is set.
> >
> >   I haven't yet been able to track the source of this down, but I hope
> > that this information helps if someone gets to it before I do.  If the
> > recent fix also fixes this bug, that would be very nice.
>
> I suspect it will. The clipping functions are broken with logged axes
> on all devices which cannot do their own clipping, and since Paul made
> devPS capable of clipping...


or it may have just made it a little more sinister.  devices which can do
their own clipping still use the R clipping to preclip to the device extent.
so if you specify a line which extends outside of the device extent (and you
have log axes) it will be (incorrectly) clipped by R before sending on to
the device.

also, Ross has pointed out that R's polygon clipping probably suffers from
the same problem (has anyone tried drawing polygons with log axes ?).  He
may take a look at this soon because he's mucking about with polygon
clipping for his maps stuff.


> We still need a fix for clipping for 1.0.1. I assume that the new
> devPS has been changed too much to qualify as a bugfix (?) and
> anyways, it is still a bug for any other device without clipping
> capabilities.


devPS has not changed that much, but graphics.c has.

paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 21 00:28:56 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Mar 2000 01:28:56 +0100
Subject: [Rd] followup to graphics bug #414
In-Reply-To: "Paul Murrell"'s message of "Tue, 21 Mar 2000 12:00:58 +1200"
References: <Pine.LNX.4.10.10003201645220.8643-100000@bolker.zoo.ufl.edu> <x2k8ixp662.fsf@blueberry.kubism.ku.dk> <012101bf92c8$89c92ac0$175dd882@stat.auckland.ac.nz>
Message-ID: <x266uhupx3.fsf@blueberry.kubism.ku.dk>

"Paul Murrell" <paul@stat.auckland.ac.nz> writes:

> > I suspect it will. The clipping functions are broken with logged axes
> > on all devices which cannot do their own clipping, and since Paul made
> > devPS capable of clipping...
> 
> 
> or it may have just made it a little more sinister.  devices which can do
> their own clipping still use the R clipping to preclip to the device extent.
> so if you specify a line which extends outside of the device extent (and you
> have log axes) it will be (incorrectly) clipped by R before sending on to
> the device.

Hmmno.. (well maybe now in the development version.) In R-release, we have

    if (dd->dp.canClip) {
        GClip(dd);
        dd->dp.polyline(n, x, y, coords, dd);
    }
    else
        CScliplines(n, x, y, coords, dd);

and CScliplines has the problem. GClip just sets the clip boundary for
the device.

> also, Ross has pointed out that R's polygon clipping probably suffers from
> the same problem (has anyone tried drawing polygons with log axes ?).  He
> may take a look at this soon because he's mucking about with polygon
> clipping for his maps stuff.

Yes. Same problem. Silly thing is that the only (simple) way to fix it
seems to be to take logs, do the clipping, take antilogs, and then
have the device function take logs once again...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Tue Mar 21 04:11:00 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Tue, 21 Mar 2000 16:11:00 +1200
Subject: [Rd] followup to graphics bug #414
References: <Pine.LNX.4.10.10003201645220.8643-100000@bolker.zoo.ufl.edu> <x2k8ixp662.fsf@blueberry.kubism.ku.dk> <012101bf92c8$89c92ac0$175dd882@stat.auckland.ac.nz> <x266uhupx3.fsf@blueberry.kubism.ku.dk>
Message-ID: <015f01bf92eb$7c17af00$175dd882@stat.auckland.ac.nz>

hi


> > > I suspect it will. The clipping functions are broken with logged axes
> > > on all devices which cannot do their own clipping, and since Paul made
> > > devPS capable of clipping...
> >
> >
> > or it may have just made it a little more sinister.  devices which can
do
> > their own clipping still use the R clipping to preclip to the device
extent.
> > so if you specify a line which extends outside of the device extent (and
you
> > have log axes) it will be (incorrectly) clipped by R before sending on
to
> > the device.
>
> Hmmno.. (well maybe now in the development version.) In R-release, we have
>
>     if (dd->dp.canClip) {
>         GClip(dd);
>         dd->dp.polyline(n, x, y, coords, dd);
>     }
>     else
>         CScliplines(n, x, y, coords, dd);
>
> and CScliplines has the problem. GClip just sets the clip boundary for
> the device.


yes, but in R-release postscript can't clip right ?  if, in r-release we
just changed devPS so that it would clip, then r-release would be ok.
r-devel is broken though because the above code segment has changed.

paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Tue Mar 21 06:15:08 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue, 21 Mar 2000 07:15:08 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200003210615.HAA13190@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 471 *
Subject:  Problems with nlme 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 7 Mar 2000 15:28:00 +0800
--Problem 1) was a subscripting bug introduced in 1.0.0 and fixed for 1.0.1
--Problem 2) (mssing datasets) needs a revised nlme

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 400 *
Subject: X11 troubles
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Jan 2000 14:31:42 +0100
--a) We don't handle multiple window closes well
--b) X11 errors should be caught by an error handler, not kill R
* PR# 414 *
Subject:  graphics bugs: steep slopes and large values beyond ylim 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 7 Feb 2000 18:28:04 -0500
--Followup on R-devel showed this was due to generating integer coordinates 
--outside +/- 2^15 in the X11 driver.

Directory:  In-Out

none

Directory:  Installation

* PR# 478 *
Subject: Conditional for XDR code left out in saveload.c
From: hoffmann@ehmgs2.et.tu-dresden.de
Date: Thu, 9 Mar 2000 09:43:01 +0100 (MET)
--This seems to be a harmless warning, not an error.

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100

Directory:  Low-level

* PR# 391 *
Subject: Segfault in dataentry()
From: Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk>
Date: 29 Dec 1999 11:59:50 +0100
--dataentry(0,0) segfaults

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 463 *
Subject: Bug in read.table
From: "E. S. Venkatraman" <venkat@biosta.mskcc.org>
Date: Tue, 29 Feb 2000 17:47:54 -0500 (EST)
* PR# 465 *
Subject: "is.qr" definition
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Wed, 1 Mar 2000 11:12:37 +0000 (GMT)
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
* PR# 474 *
Subject: update fails after specific sequence of steps
From: John Fox <jfox@mcmaster.ca>
Date: Tue, 07 Mar 2000 09:06:21 -0500
* PR# 475 *
Subject: Error compiling R on RS6000
From: pgutwin@us.ibm.com
Date: Tue, 7 Mar 2000 16:35:59 +0100 (MET)
* PR# 477 *
Subject: Printing graphs on W98 laptop
From: P.J.Green@bristol.ac.uk
Date: Wed, 8 Mar 2000 18:23:33 +0100 (MET)
* PR# 480 *
Subject: problem with plot(...., xlim=c(5,0))
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 12 Mar 2000 20:19:16 -0500 (EST)
* PR# 481 *
Subject: check does not accept --vsize option
From: neteler@geog.uni-hannover.de
Date: Mon, 13 Mar 2000 19:04:50 +0100 (MET)
* PR# 482 *
Subject: plot(1:10,c(1)$nothing)  yields index plot
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 13 Mar 2000 11:13:18 -0800
* PR# 483 *
Subject: error in par option xaxt
From: aim@uwo.ca
Date: Mon, 13 Mar 2000 22:02:42 +0100 (MET)
* PR# 484 *
Subject: error in par option xaxt
From: aim@uwo.ca
Date: Mon, 13 Mar 2000 22:03:00 +0100 (MET)
* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
* PR# 487 *
Subject: Bug in sub?
From: "Trenkler, Dietrich" <dtrenkler@nts6.oec.uni-osnabrueck.de>
Date: Tue, 14 Mar 2000 12:15:54 +0100
* PR# 488 *
Subject: Error in lme?
From: simon.frost@ed.ac.uk
Date: Tue, 14 Mar 2000 14:15:52 +0100 (MET)
* PR# 489 *
Subject: r-base_1.0.0-1_i386.deb install problem
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Thu, 16 Mar 2000 04:02:26 +0000 (GMT)
* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
* PR# 491 *
Subject: lag
From: kthaka@uta.fi
Date: Fri, 17 Mar 2000 10:16:09 +0100 (MET)
* PR# 492 *
Subject: the R bug
From: "Robertas Geistoraitis" <robertasg@takas.lt>
Date: Fri, 17 Mar 2000 17:17:23 +0100
* PR# 493 *
Subject: optim: problem with additional arguments
From: "Dirk F. Moore" <dirk@surfer.sbm.temple.edu>
Date: Fri, 17 Mar 2000 12:05:32 -0500
* PR# 494 *
Subject:  minor problem in barplot legend 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 20 Mar 2000 17:31:36 -0500
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From skala@incoma.cz  Tue Mar 21 08:20:35 2000
From: skala@incoma.cz (skala@incoma.cz)
Date: Tue, 21 Mar 2000 09:20:35 +0100 (MET)
Subject: [Rd] barplot (PR#495)
Message-ID: <200003210820.JAA22364@pubhealth.ku.dk>

Full_Name: Zdenek Skala
Version: 1.0.0
OS: MS Windows 95
Submission from: (NULL) (194.108.127.14)


Dear all,
a problem with barplot() was already discussed on R-help for R 0.90.0 - sorry,
if this is a known bug, but I was unable to find it in the bugs database.
In:
> barplot(c(.1,.5,1), ylim=(0:1))
or
> barplot(c(.1,.5,1), ylim=c(0,1))
the y axis is drawn from 0.2 to 0.8, in:
> barplot(c(.1,.5,1))
the y axis is drawn from 0.0 to 0.8.
As I was notified earlier by Peter Dalgaard, "the axis settings use yaxs='i' 
(or xaxs if horizontal) which sets the plot boundaries equal to the ylim 
(stated or computed) and marks the axes "internally". The endpoints of the 
axes are not considered to be internal."
Sorry again if this is already reported.
With regards
Zdenek Skala

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 21 08:56:30 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Mar 2000 09:56:30 +0100
Subject: [Rd] barplot (PR#495)
In-Reply-To: skala@incoma.cz's message of "Tue, 21 Mar 2000 09:20:35 +0100 (MET)"
References: <200003210820.JAA22364@pubhealth.ku.dk>
Message-ID: <x2aejs66rl.fsf@blueberry.kubism.ku.dk>

skala@incoma.cz writes:

> > barplot(c(.1,.5,1), ylim=c(0,1))
> the y axis is drawn from 0.2 to 0.8, in:

> As I was notified earlier by Peter Dalgaard, "the axis settings use yaxs='i' 
> (or xaxs if horizontal) which sets the plot boundaries equal to the ylim 
> (stated or computed) and marks the axes "internally". The endpoints of the 
> axes are not considered to be internal."
> Sorry again if this is already reported.

I actually thought we had that one fixed, but obviously not ...
As usual, the workaround is to extend the ylim a tiny bit:

barplot(c(.1,.5,1), ylim=c(-.001,1.001))

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Tue Mar 21 13:57:59 2000
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Tue, 21 Mar 2000 14:57:59 +0100 (MET)
Subject: [Rd] par help wrong: xlog & ylog (PR#497)
Message-ID: <200003211357.OAA29225@pubhealth.ku.dk>

Full_Name: 
Version: 1.0.0
OS: linux
Submission from: (NULL) (193.62.250.209)


    

?par lists and describes xlog and ylog, though these are obsolete. It does not
list
log. I found out about log from ?plot.defaults--so that help is OK.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Tue Mar 21 14:11:06 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Tue, 21 Mar 2000 15:11:06 +0100 (CET)
Subject: [Rd] is.null(list()) is FALSE ?
In-Reply-To: <200003211357.OAA29225@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0003211507220.16848-100000@boromir.ci.tuwien.ac.at>


On R-1.0.0, debian GNU/Linux, 

R> is.null(list())
FALSE

conflicts with the help for ?is.null:

Examples:

     is.null(list())    # TRUE (not so in S)
     is.null(integer(0))# F
     is.null(logical(0))# F
     as.null(list(a=1,b='c'))

and, I would like is.null(list()) to be TRUE :-)

Torsten

*****************************************************************
*								*
* Torsten Hothorn, Statistician					*
* at the moment: Institut fuer Statistik, TU Wien		*
* Tel: 0043 1 58801 10772					*
* Fax: 0043 1 58801 10798					*
*								*
*****************************************************************



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 21 14:18:04 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Mar 2000 15:18:04 +0100
Subject: [Rd] par help wrong: xlog & ylog (PR#497)
In-Reply-To: wsi@gcal.ac.uk's message of "Tue, 21 Mar 2000 14:57:59 +0100 (MET)"
References: <200003211357.OAA29225@pubhealth.ku.dk>
Message-ID: <x266ugs8yr.fsf@blueberry.kubism.ku.dk>

wsi@gcal.ac.uk writes:

> Full_Name: 
> Version: 1.0.0
> OS: linux
> Submission from: (NULL) (193.62.250.209)
> 
> 
>     
> 
> ?par lists and describes xlog and ylog, though these are obsolete. It does not
> list
> log. I found out about log from ?plot.defaults--so that help is OK.

Not a bug, not obsolete, and works as documented:

> plot(1,log="y")
> par("ylog")    
[1] TRUE


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Tue Mar 21 15:27:25 2000
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Tue, 21 Mar 2000 15:27:25 +0000 (GMT)
Subject: [Rd] par help wrong: xlog & ylog (PR#497)
In-Reply-To: <200003211357.OAA29225@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.10003211522090.9897-100000@localhost.localdomain>


> Full_Name: 
> Version: 1.0.0
> OS: linux
> Submission from: (NULL) (193.62.250.209)
> 
> ?par lists and describes xlog and ylog, though these are obsolete. It does not
> list
> log. I found out about log from ?plot.defaults--so that help is OK.
Reading through ?par again, I see that xlog and ylog are "read only". (I
initially thought xlog and ylog were obsolete because I could set them) I
don't find the help to be very clear:

ylog: R.O..  A logical value (see `log' in `plot.default').  See
          `xlog' above.

Instead of (see `log' in `plot.default'), why not have log listed here in
the par help? Or is it an argument to plot()? In which case, why not list
it in the help for plot()? I find it hard to find info for plots because
this info seems to be spread out in several places

Bill


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Tue Mar 21 15:30:31 2000
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Tue, 21 Mar 2000 15:30:31 +0000 (GMT)
Subject: [Rd] par help wrong: xlog & ylog (PR#497)
In-Reply-To: <x266ugs8yr.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10003211528091.9897-100000@localhost.localdomain>



On 21 Mar 2000, Peter Dalgaard BSA wrote:

> wsi@gcal.ac.uk writes:
> 
> > Full_Name: 
> > Version: 1.0.0
> > OS: linux
> > Submission from: (NULL) (193.62.250.209)
> > 
> > 
> >     
> > 
> > ?par lists and describes xlog and ylog, though these are obsolete. It does not
> > list
> > log. I found out about log from ?plot.defaults--so that help is OK.
> 
> Not a bug, not obsolete, and works as documented:
True. True. Not documented in plot help. It is documented in plot.default.
Why not in par, where xlog and ylog are? I find it confusing.

> 
> > plot(1,log="y")
> > par("ylog")    
> [1] TRUE

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Mar 21 16:05:42 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 21 Mar 2000 17:05:42 +0100 (MET)
Subject: [Rd] par help wrong: xlog & ylog (PR#497)
Message-ID: <200003211605.RAA00840@pubhealth.ku.dk>


>>>>> "Bill" == Bill Simpson <wsi@gcal.ac.uk> writes:

    Bill> On 21 Mar 2000, Peter Dalgaard BSA wrote:

    >> wsi@gcal.ac.uk writes:
    >> 
    >> > Full_Name: 
    >> > Version: 1.0.0
    >> > OS: linux
    >> > Submission from: (NULL) (193.62.250.209)
    >> > 
    >> > 
    >> >     
    >> > 
    >> > ?par lists and describes xlog and ylog, though these are
    >> > obsolete. It does not list log. I found out about log from
    >> > ?plot.defaults--so that help is OK.
    >> 
    >> Not a bug, not obsolete, and works as documented:
    Bill> True. True. Not documented in plot help. It is documented in plot.default.
    Bill> Why not in par, where xlog and ylog are? I find it confusing.

    >> 
    >> > plot(1,log="y")
    >> > par("ylog")    
    >> [1] TRUE

log is *not* a valid  par(.) argument, what makes you think it should be
documented there ?

  > par(log = "x")
  Warning message: 
  parameter "log" can't be set in: par(args) 


It *is* a valid argument to most(?) plot methods;
plot is the generic function, and the idea is that it only documents what
*ALL* plot methods have in common.  This is the reason that "log = .." is
documented with the default  plot method, plot.default.

You might have a point:  We could (should we?) consider requiring a 
"log =" argument for *ALL* plot methods, and then have it 
documented and possibly even among the listed arguements (the "non ..." ones)
of the generic  plot.

Opinions?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Mar 21 16:33:51 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 21 Mar 2000 08:33:51 -0800 (PST)
Subject: [Rd] par help wrong: xlog & ylog (PR#497)
In-Reply-To: <200003211605.RAA00840@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0003210829030.14323-100000@mail.biostat.washington.edu>

On Tue, 21 Mar 2000 maechler@stat.math.ethz.ch wrote:

> You might have a point:  We could (should we?) consider requiring a 
> "log =" argument for *ALL* plot methods, and then have it 
> documented and possibly even among the listed arguements (the "non ..." ones)
> of the generic  plot.
> 
> Opinions?
> 

Aaagh! No!  What about plots that intrinsically contain zero x or y
values, such as mortality plots (ie upside-down survival plots) or
Receiver Operating Characteristic curves?

Going further, some plot methods have a ... option but don't pass it to
plot. If the method uses plot to set up axes and then calls points() or
lines() to handle the actual drawing it may make sense to pass ... to
points() or lines().  These functions don't understand log=, so it would
be necessary to have an explicit log= option for the method, even if it
was completely inappropriate.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Mar 21 16:40:14 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 21 Mar 2000 08:40:14 -0800 (PST)
Subject: [Rd] is.null(list()) is FALSE ?
In-Reply-To: <Pine.LNX.4.21.0003211507220.16848-100000@boromir.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.21.0003210834560.14323-100000@mail.biostat.washington.edu>

On Tue, 21 Mar 2000, Torsten Hothorn wrote:

> 
> On R-1.0.0, debian GNU/Linux, 
> 
> R> is.null(list())
> FALSE
> 
> conflicts with the help for ?is.null:
> 
> Examples:
> 
>      is.null(list())    # TRUE (not so in S)
>      is.null(integer(0))# F
>      is.null(logical(0))# F
>      as.null(list(a=1,b='c'))
> 
> and, I would like is.null(list()) to be TRUE :-)

My guess is that this dates from old-style pairlists, where list() could
easily be NULL. Now a list is internally a vector, so list() is a vector
of length zero and so is stored as a VECTOR node.

Also, a difficulty with storing list() as NULL is that you can't set
attributes on NULL:
R> a<-NULL
R> attr(a,"foo")<-"bar"
Error: attempt to set an attribute on NULL
R> a<-list()
R> attr(a,"foo")<-"bar"
R> a
list()
attr(,"foo")
[1] "bar"


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Mar 21 16:57:55 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 21 Mar 2000 17:57:55 +0100 (MET)
Subject: [Rd] is.null(list()) is FALSE ?
In-Reply-To: <Pine.GSO.4.21.0003210834560.14323-100000@mail.biostat.washington.edu>
References: <Pine.LNX.4.21.0003211507220.16848-100000@boromir.ci.tuwien.ac.at>
 <Pine.GSO.4.21.0003210834560.14323-100000@mail.biostat.washington.edu>
Message-ID: <14551.43539.660392.388561@lynne.ethz.ch>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> On Tue, 21 Mar 2000, Torsten Hothorn wrote:
    >> 
    >> On R-1.0.0, debian GNU/Linux, 
    >> 
    R> is.null(list())
    >> FALSE
    >> 
    >> conflicts with the help for ?is.null:
    >> 
    >> Examples:
    >> 
    >> is.null(list())    # TRUE (not so in S)
    >> is.null(integer(0))# F
    >> is.null(logical(0))# F
    >> as.null(list(a=1,b='c'))
    >> 
    >> and, I would like is.null(list()) to be TRUE :-)

    TL> My guess is that this dates from old-style pairlists, where list() could
    TL> easily be NULL.
well guessed!
    TL> Now a list is internally a vector, so list() is a vector
    TL> of length zero and so is stored as a VECTOR node.

and we had decision quite a while ago that  is.null(list()) should give
FALSE {and this is S compatible}.

I've already committed fix for  the wrong comment above :

  cvs diff -r 1.3 src/library/base/man/NULL.Rd

  ...

  diff -r1.3 -r1.3.22.1
  24c24
  < is.null(list())    # TRUE (not so in S)
  ---
  > is.null(list())    # FALSE (on purpose!)


    TL> Also, a difficulty with storing list() as NULL is that you can't set
    TL> attributes on NULL:
    R> a<-NULL
    R> attr(a,"foo")<-"bar"
    TL> Error: attempt to set an attribute on NULL
    R> a<-list()
    R> attr(a,"foo")<-"bar"
    R> a
    TL> list()
    TL> attr(,"foo")
    TL> [1] "bar"

    TL> -thomas

    TL> Thomas Lumley
    TL> Assistant Professor, Biostatistics
    TL> University of Washington, Seattle

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Tue Mar 21 22:15:12 2000
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Tue, 21 Mar 2000 23:15:12 +0100 (MET)
Subject: [Rd] Use of Rd2txt on .Rd files from rw-1.0.0 (PR#498)
Message-ID: <200003212215.XAA03296@pubhealth.ku.dk>

>From e980153 Tue Mar 21 18:50:55 2000
To: bates@stat.wisc.edu
Subject: Use of Rd2txt on .Rd files from rw-1.0.0

Files generated using prompt.data.frame() under rw-1.0.0 get
scrambled (mildly) when I process them under Rd2txt on Solaris,
(using R-devel 1.1.0).
Files generated under R-devel 1.1 on Solaris are processed ok.

The .Rd files from the two sources look identical. The problem 
is likely to be with Rd2txt, I guess.

Here is an example.  I give only the first part of the output,
where the problem occurs.
=========================================================
Kiwifruit data

Description:

 Kiwifruitkiwishade' data frame has 48 rows and 3 columns.
     shading trial

Format:

     This data frame contains the following columns:

      yield a numeric vector

 `west'  ck a factor with levels

 `Feb2May'  a factor with levels
            `none' 

Details:

............
=========================================================

Here is what I expected to get, and do get when the .Rd file
is generated under Solaris:

=========================================================
Kiwifruit data

Description:

     The `kiwishade' data frame has 48 rows and 3 columns. Kiwifruit
     shading trial

Format:

     This data frame contains the following columns:

      yield a numeric vector

      block a factor with levels `east'  `north'  `west' 

      shade a factor with levels `Aug2Dec'  `Dec2Feb'  `Feb2May' 
            `none'
............
=========================================================

Here is the .Rd file, from the PC, then editing using emacs
under Solaris.  However the same scrambling occurs when the
files is processed without editing.
=========================================================
\name{kiwishade}
\alias{kiwishade}
\non_function{}
\title{Kiwifruit data}
\description{
The \code{kiwishade} data frame has 48 rows and 3 columns.
Kiwifruit shading trial
}
\format{
This data frame contains the following columns:
\describe{
\item{yield}{
a numeric vector
}
\item{block}{
a factor with levels
\code{east} 
\code{north} 
\code{west} 
}
\item{shade}{
a factor with levels
\code{Aug2Dec} 
\code{Dec2Feb} 
\code{Feb2May} 
\code{none} 
}
}
}
\details{

}
\source{
Snelgar at al.
}
\examples{
data(kiwishade)
}
\keyword{datasets}
=========================================================

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jgm@qed.econ.queensu.ca  Wed Mar 22 04:40:08 2000
From: jgm@qed.econ.queensu.ca (jgm@qed.econ.queensu.ca)
Date: Wed, 22 Mar 2000 05:40:08 +0100 (MET)
Subject: [Rd] help system does not work (PR#499)
Message-ID: <200003220440.FAA04346@pubhealth.ku.dk>

Full_Name: James MacKinnon
Version: Version 1.0.0
OS: Debian 2.1
Submission from: (NULL) (24.141.113.138)


I am a novice at R, so I am not totally sure that this is a bug, but I think it
must
be. When I type help.start() or ?help, Netscape starts up, as it should, but it
displays my normal home page, not any help for R. The relevant documents exist
in
/usr/lib/R/doc/html, but Netscape does not seem to know about them when it is
started
from within R. I cannot figure out how to tell Netscape about them.

I simply installed the Debian package from one of the R websites. The file I
used
is r-base_1.0.0-1_i386.deb.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Mar 22 10:40:47 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 22 Mar 2000 11:40:47 +0100 (MET)
Subject: [Rd] minor problem in barplot legend (PR#494)
Message-ID: <200003221040.LAA07976@pubhealth.ku.dk>

>>>>> "Ben" == Ben Bolker <bolker@zoo.ufl.edu> writes:

    Ben> If length(col)<length(legend.txt) in barplot, then the reversal of
    Ben> the legend leads to funny results.  For example:

    Ben> x <- matrix(runif(25),nrow=5)
    Ben> barplot(x,col=c("red","green","black"),legend=as.character(1:5),ylim=c(0,5))

    Ben> The (easy) fix is to replace

    Ben>     legend.col <- col

    Ben> with

    Ben>	legend.col <- rep(col,length=length(legend.text))

    Ben> on line 94 of barplot.default.

    Ben> Trivia, but hey, it confused me for a little while, it might as well
    Ben> be fixed.

Now done for "R-release", i.e. the (unreleased) future R 1.0.1

Thank you, Ben!
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Mar 22 15:02:15 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 22 Mar 2000 16:02:15 +0100 (CET)
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: <871z561pcm.fsf@bavaria.ece.cmu.edu>
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu>
 <871z561pcm.fsf@bavaria.ece.cmu.edu>
Message-ID: <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at>

>>>>> Thomas J Vogels writes:

> Thomas Lumley <thomas@biostat.washington.edu> writes:

> [snip]
>> It's actually a combination of a number of factors.  On most systems we
>> link with the C compiler, which knows what to do with libc automatically.  
>> In any case, many linkers can handle the problem as Peter points out.

> On AIX you have to build the export file, R.exp, which was the reason
> to force the use of ld, I believe.  Also, the libs must be on the
> command line for ldAIX to include exported symbols from libc.a in
> R.exp (which reduces the size of shared libs).

>> On AIX we were using ld rather than CC to link, and ld doesn't move -lc to
>> the end, and we were using a hardcoded set of linker options that some
>> helpful user had sent in a long time ago (no-one in R-core has very
>> convenient access to AIX). It worked fine until we added GNU regex to R.

> ok, now I understand why this problem didn't occur until 1.0.  I
> glanced at Makeconf.  There is the '-lc' (along with '-lm') in the
> DLLFLAGS but also in SHLIBLDFLAGS -- do you plan to export regexec and
> friends?  Because the creation of shared libs with an early -lc will
> create the same Illegal Instructions...

Can you have a look at the current r-devel snapshot?  The way I think my
code works is by adding to R_XTRA_LIBS, which should only be used when
linking the main binary, but not when creating shared libraries.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Mar 22 15:12:46 2000
From: bates@stat.wisc.edu (bates@stat.wisc.edu)
Date: Wed, 22 Mar 2000 16:12:46 +0100 (MET)
Subject: [Rd] help system does not work (PR#499)
Message-ID: <200003221512.QAA12449@pubhealth.ku.dk>

jgm@qed.econ.queensu.ca writes:

> Full_Name: James MacKinnon
> Version: Version 1.0.0
> OS: Debian 2.1
> Submission from: (NULL) (24.141.113.138)
> 
> 
> I am a novice at R, so I am not totally sure that this is a bug, but
> I think it must be. When I type help.start() or ?help, Netscape
> starts up, as it should, but it displays my normal home page, not
> any help for R. The relevant documents exist in /usr/lib/R/doc/html,
> but Netscape does not seem to know about them when it is started
> from within R. I cannot figure out how to tell Netscape about them.
> 
> I simply installed the Debian package from one of the R
> websites. The file I used is r-base_1.0.0-1_i386.deb.

Hello James,

When you use help.start it is supposed to create and populate a
directory ~/.R.  Within there there should be an html directory and
links to several of the html files in /usr/lib/R/doc/html.

Could you check that this directory exists?  My version (under Debian
2.2 and using an experimental r-base_1.0.1-0) looks like

  /u9/bates/.R/doc/html:
  total 19
  drwxrwxr-x    3 bates    bates        1024 Mar 22 09:05 .
  drwxrwxr-x    3 bates    bates        1024 Mar 22 09:05 ..
  lrwxrwxrwx    1 bates    bates          25 Mar 22 09:05 R.css -> /usr/lib/R/doc/html/R.css
  lrwxrwxrwx    1 bates    bates          30 Mar 22 09:05 about.html -> /usr/lib/R/doc/html/about.html
  lrwxrwxrwx    1 bates    bates          28 Mar 22 09:05 faq.html -> /usr/lib/R/doc/html/faq.html
  lrwxrwxrwx    1 bates    bates          33 Mar 22 09:05 function.html -> /usr/lib/R/doc/html/function.html
  lrwxrwxrwx    1 bates    bates          30 Mar 22 09:05 index.html -> /usr/lib/R/doc/html/index.html
  lrwxrwxrwx    1 bates    bates          28 Mar 22 09:05 left.jpg -> /usr/lib/R/doc/html/left.jpg
  lrwxrwxrwx    1 bates    bates          28 Mar 22 09:05 logo.jpg -> /usr/lib/R/doc/html/logo.jpg
  lrwxrwxrwx    1 bates    bates          30 Mar 22 09:05 logosm.jpg -> /usr/lib/R/doc/html/logosm.jpg
  lrwxrwxrwx    1 bates    bates          38 Mar 22 09:05 packages-foot.html -> /usr/lib/R/doc/html/packages-foot.html
  lrwxrwxrwx    1 bates    bates          38 Mar 22 09:05 packages-head.html -> /usr/lib/R/doc/html/packages-head.html
  -rw-r--r--    1 bates    bates       14580 Mar 22 09:05 packages.html
  lrwxrwxrwx    1 bates    bates          33 Mar 22 09:05 resource.html -> /usr/lib/R/doc/html/resource.html
  lrwxrwxrwx    1 bates    bates          29 Mar 22 09:05 right.jpg -> /usr/lib/R/doc/html/right.jpg
  drwxrwxr-x    2 bates    bates        1024 Mar 22 09:05 search
  lrwxrwxrwx    1 bates    bates          33 Mar 22 09:05 template.html -> /usr/lib/R/doc/html/template.html
  lrwxrwxrwx    1 bates    bates          31 Mar 22 09:05 thanks.html -> /usr/lib/R/doc/html/thanks.html
  lrwxrwxrwx    1 bates    bates          26 Mar 22 09:05 up.jpg -> /usr/lib/R/doc/html/up.jpg

BTW, my daughter, who is a student at Queen's, tells me that you are
having wonderful weather right now.  She was down to the lakefront to
do some reading yesterday.

--
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jgm@qed.econ.queensu.ca  Wed Mar 22 16:27:38 2000
From: jgm@qed.econ.queensu.ca (jgm@qed.econ.queensu.ca)
Date: Wed, 22 Mar 2000 17:27:38 +0100 (MET)
Subject: [Rd] help system does not work (PR#499)
Message-ID: <200003221627.RAA13198@pubhealth.ku.dk>

Thanks for the very speedy response.

I just tried again, but this time on my office machine, and I am extremely
embarrassed to report that everything seems to work fine! The only problem
is that the headings under "Data Analysis with R" are not actually links,
but no doubt that is because they are not (yet) supposed to be. 

It seems to be only on my home machine, where I was trying to experiment
with R last night, that there is a problem. I think the problem must have
something to do with the way in which netscape is installed on the two
machines. "which netscape" yields different results on the two of them.

I am pretty sure I can solve the problem now. I presume that R is passing
a command like "netscape URL" to the operating system, and I am pretty
sure that "URL" is not getting through on my home machine because it is
finding a script instead of the real executable. I think I just need to
change the script to pass its arguments to netscape. Unfortunately, I
cannot check the fix while I am at the office.

Incidentally, is there some way I can change the command that R is
issuing? That way, I could point it directly to a particular executable (I
have several netscapes).  Also, I would like to experiment with having it
fire up lynx in an xterm rather than netscape, if that is possible.

On 22 Mar 2000, Douglas Bates wrote:

> When you use help.start it is supposed to create and populate a
> directory ~/.R.  Within there there should be an html directory and
> links to several of the html files in /usr/lib/R/doc/html.

Yes, these directories are present on both machines, and the contents seem
to be fine. I think R itself is working fine.
 
> BTW, my daughter, who is a student at Queen's, tells me that you are
> having wonderful weather right now.  She was down to the lakefront to
> do some reading yesterday.

Incredible weather, actually. It is bright and sunny and warm enough that
a jacket really isn't needed.

I am very sorry to have bothered you. Should I do something to close the
bug report?

Cheers, James.

James G. MacKinnon                       Department of Economics
    phone: 613 533-2293                  Queen's University
      Fax: 613 533-2257                  Kingston, Ontario, Canada
    Email: jgm@qed.econ.queensu.ca       K7L 3N6



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Mar 22 16:43:09 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 22 Mar 2000 08:43:09 -0800 (PST)
Subject: [Rd] help system does not work (PR#499)
In-Reply-To: <200003221627.RAA13198@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0003220832480.28978-100000@mail.biostat.washington.edu>

On Wed, 22 Mar 2000 jgm@qed.econ.queensu.ca wrote:
> 
> Incidentally, is there some way I can change the command that R is
> issuing? That way, I could point it directly to a particular executable (I
> have several netscapes).  Also, I would like to experiment with having it
> fire up lynx in an xterm rather than netscape, if that is possible.

options(browser="browser")

However, to start in a xterm you need to be a bit clever. The browser is
invoked as
 
browser URL &

and you will probably need a script to set up lynx in a xterm in such a
way that it opens the file and stays open. The first four things I tried
didn't work.


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 22 17:17:00 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Mar 2000 18:17:00 +0100
Subject: [Rd] help system does not work (PR#499)
In-Reply-To: Thomas Lumley's message of "Wed, 22 Mar 2000 08:43:09 -0800 (PST)"
References: <Pine.GSO.4.21.0003220832480.28978-100000@mail.biostat.washington.edu>
Message-ID: <x2wvmux6ur.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:


> However, to start in a xterm you need to be a bit clever. The browser is
> invoked as
>  
> browser URL &
> 
> and you will probably need a script to set up lynx in a xterm in such a
> way that it opens the file and stays open. The first four things I tried
> didn't work.

Actually, the real problem is that it is getting passed

 -remote openURL(file:/long/and/winded/path/ls.html)

so you'd need to feed it to something (perl?) to extract the actual
URL. Then just use "xterm -e lynx $URL".
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Mar 22 18:25:41 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Wed, 22 Mar 2000 19:25:41 +0100 (MET)
Subject: [Rd] segmentation fault with 1D array (PR#500)
Message-ID: <200003221825.TAA14306@pubhealth.ku.dk>

Here's a nasty one.  The following has caused a segmentation
fault and possibly also a bus error.

fred <- 1:6
dim(fred) <- 6
dimnames(fred) <- list(LETTERS[1:6])
mm <- matrix(1:12, 2, 6)

mm %*% fred # segmentation fault here

In the case without the dimnames assignment the result is OK.

Cheers, Jonathan.


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Patched
 major = 0
 minor = 99.0
 year = 2000
 month = February
 day = 9
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Mar 22 18:43:27 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 22 Mar 2000 13:43:27 -0500 (EST)
Subject: [Rd] segmentation fault with 1D array (PR#500)
In-Reply-To: <200003221825.TAA14306@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.10003221342370.10699-100000@bolker.zoo.ufl.edu>

On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:

> Here's a nasty one.  The following has caused a segmentation
> fault and possibly also a bus error.
> 
> fred <- 1:6
> dim(fred) <- 6
> dimnames(fred) <- list(LETTERS[1:6])
> mm <- matrix(1:12, 2, 6)
> 
> mm %*% fred # segmentation fault here
> 
> In the case without the dimnames assignment the result is OK.

  Here (1.0.0 on RH 6.0) I get

Error: invalid type for dimname (must be a vector)

instead of a segmentation fault.

> 
> --please do not edit the information below--
> 
> Version:
>  platform = sparc-sun-solaris2.7
>  arch = sparc
>  os = solaris2.7
>  system = sparc, solaris2.7
>  status = Patched
>  major = 0
>  minor = 99.0
>  year = 2000
>  month = February
>  day = 9
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 22 18:59:23 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Mar 2000 19:59:23 +0100
Subject: [Rd] segmentation fault with 1D array (PR#500)
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Wed, 22 Mar 2000 19:25:41 +0100 (MET)"
References: <200003221825.TAA14306@pubhealth.ku.dk>
Message-ID: <x2zorqkf04.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> Here's a nasty one.  The following has caused a segmentation
> fault and possibly also a bus error.
> 
> fred <- 1:6
> dim(fred) <- 6
> dimnames(fred) <- list(LETTERS[1:6])
> mm <- matrix(1:12, 2, 6)
> 
> mm %*% fred # segmentation fault here
> 
> In the case without the dimnames assignment the result is OK.

Still present... Some pretty odd things appear to be going on there.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 22 19:06:57 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Mar 2000 20:06:57 +0100
Subject: [Rd] segmentation fault with 1D array (PR#500)
In-Reply-To: Ben Bolker's message of "Wed, 22 Mar 2000 13:43:27 -0500 (EST)"
References: <Pine.LNX.4.10.10003221342370.10699-100000@bolker.zoo.ufl.edu>
Message-ID: <x2wvmukeni.fsf@blueberry.kubism.ku.dk>

Ben Bolker <ben@zoo.ufl.edu> writes:

> On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:
> 
> > Here's a nasty one.  The following has caused a segmentation
> > fault and possibly also a bus error.
> > 
> > fred <- 1:6
> > dim(fred) <- 6
> > dimnames(fred) <- list(LETTERS[1:6])
> > mm <- matrix(1:12, 2, 6)
> > 
> > mm %*% fred # segmentation fault here
> > 
> > In the case without the dimnames assignment the result is OK.
> 
>   Here (1.0.0 on RH 6.0) I get
> 
> Error: invalid type for dimname (must be a vector)
> 
> instead of a segmentation fault.

Hm? 1.0.0 on RH 6.1 gives the segfault for me as does later patch
versions...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Mar 22 19:10:55 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 22 Mar 2000 14:10:55 -0500 (EST)
Subject: [Rd] segmentation fault with 1D array (PR#500)
In-Reply-To: <x2wvmukeni.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10003221408110.10733-100000@bolker.zoo.ufl.edu>


  Weird.  It does crash if I run it in a new session.  I tried the
commands out in a session that I'd already done a whole lot in, so maybe
it's just corrupting some little piece of my (large) environment rather
than segfaulting.

On 22 Mar 2000, Peter Dalgaard BSA wrote:

> Ben Bolker <ben@zoo.ufl.edu> writes:
> 
> > On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:
> > 
> > > Here's a nasty one.  The following has caused a segmentation
> > > fault and possibly also a bus error.
> > > 
> > > fred <- 1:6
> > > dim(fred) <- 6
> > > dimnames(fred) <- list(LETTERS[1:6])
> > > mm <- matrix(1:12, 2, 6)
> > > 
> > > mm %*% fred # segmentation fault here
> > > 
> > > In the case without the dimnames assignment the result is OK.
> > 
> >   Here (1.0.0 on RH 6.0) I get
> > 
> > Error: invalid type for dimname (must be a vector)
> > 
> > instead of a segmentation fault.
> 
> Hm? 1.0.0 on RH 6.1 gives the segfault for me as does later patch
> versions...
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Mar 22 19:14:11 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Wed, 22 Mar 2000 20:14:11 +0100 (MET)
Subject: [Rd] segmentation fault with 1D array (PR#500)
Message-ID: <200003221914.UAA14761@pubhealth.ku.dk>


  Weird.  It does crash if I run it in a new session.  I tried the
commands out in a session that I'd already done a whole lot in, so maybe
it's just corrupting some little piece of my (large) environment rather
than segfaulting.

On 22 Mar 2000, Peter Dalgaard BSA wrote:

> Ben Bolker <ben@zoo.ufl.edu> writes:
> 
> > On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:
> > 
> > > Here's a nasty one.  The following has caused a segmentation
> > > fault and possibly also a bus error.
> > > 
> > > fred <- 1:6
> > > dim(fred) <- 6
> > > dimnames(fred) <- list(LETTERS[1:6])
> > > mm <- matrix(1:12, 2, 6)
> > > 
> > > mm %*% fred # segmentation fault here
> > > 
> > > In the case without the dimnames assignment the result is OK.
> > 
> >   Here (1.0.0 on RH 6.0) I get
> > 
> > Error: invalid type for dimname (must be a vector)
> > 
> > instead of a segmentation fault.
> 
> Hm? 1.0.0 on RH 6.1 gives the segfault for me as does later patch
> versions...
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 22 20:10:28 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Mar 2000 21:10:28 +0100
Subject: [Rd] segmentation fault with 1D array (PR#500)
In-Reply-To: Peter Dalgaard BSA's message of "22 Mar 2000 20:06:57 +0100"
References: <Pine.LNX.4.10.10003221342370.10699-100000@bolker.zoo.ufl.edu> <x2wvmukeni.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2bt466a17.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Ben Bolker <ben@zoo.ufl.edu> writes:
> 
> > On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:
> > 
> > > Here's a nasty one.  The following has caused a segmentation
> > > fault and possibly also a bus error.
> > > 
> > > fred <- 1:6
> > > dim(fred) <- 6
> > > dimnames(fred) <- list(LETTERS[1:6])
> > > mm <- matrix(1:12, 2, 6)
> > > 
> > > mm %*% fred # segmentation fault here
> > > 
> > > In the case without the dimnames assignment the result is OK.
> > 
> >   Here (1.0.0 on RH 6.0) I get
> > 
> > Error: invalid type for dimname (must be a vector)
> > 
> > instead of a segmentation fault.
> 
> Hm? 1.0.0 on RH 6.1 gives the segfault for me as does later patch
> versions...

Squished... Will commit to release track in a moment (if it survives
"make check").

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Thu Mar 23 06:00:09 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 23 Mar 2000 01:00:09 -0500
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: Kurt Hornik's message of "Wed, 22 Mar 2000 16:02:15 +0100 (CET)"
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu> <871z561pcm.fsf@bavaria.ece.cmu.edu> <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at>
Message-ID: <8766uens46.fsf@bavaria.ece.cmu.edu>


Hi,

ok, the main binary builds, but not ctest.so.  Here is the head of the
linker output:

$ ld -bM:SRE -H512 -T512 -bnoentry -bexpall       -bI:../../../../etc/R.exp  -o ct
est.so ansari.o fexact.o kendall.o ks.o prho.o swilk.o  -L/usr/local/lib -L/afs/
ece/usr/tov/opt/arch -lblas  -lxlf90 -lxlf -lxlomp_ser -lm
ld: 0711-317 ERROR: Undefined symbol: .sprintf
ld: 0711-317 ERROR: Undefined symbol: .itrunc

... and so on.  It's dearly missing -lc.  I've tried adding -lc and
that allowed at least ctest.so to link.  But where should -lc be added
for shared libs to link with?

Thanks,
  -tom

(I used rsync to get r-devel (date-stamp is 2000/March/22).)


Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

[snip]
> Can you have a look at the current r-devel snapshot?  The way I think my
> code works is by adding to R_XTRA_LIBS, which should only be used when
> linking the main binary, but not when creating shared libraries.
> 
> -k

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Mar 23 13:44:36 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 23 Mar 2000 14:44:36 +0100 (CET)
Subject: [Rd] clipboard
Message-ID: <14554.8132.140193.424776@galadriel.ci.tuwien.ac.at>


Hi,

if we do something like that for windows (which might be useful) we
should do the same for X, i.e., use the X clipboard in the same way.

Not that I know how to access it but it shouldn't be too hard to find
out. Both would probably come down to having something like

	read.table(text=foo, ...)

along with

	foo <- getClipboard(...)

reading a text string from the X or Windows clipboard (assuming that
what you get from the windows clipboard is a string).

.f

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 23 13:59:19 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Mar 2000 14:59:19 +0100
Subject: [Rd] clipboard
In-Reply-To: Friedrich Leisch's message of "Thu, 23 Mar 2000 14:44:36 +0100 (CET)"
References: <14554.8132.140193.424776@galadriel.ci.tuwien.ac.at>
Message-ID: <x2vh2dss7c.fsf@blueberry.kubism.ku.dk>

Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

> if we do something like that for windows (which might be useful) we
> should do the same for X, i.e., use the X clipboard in the same way.
> 
> Not that I know how to access it but it shouldn't be too hard to find
> out. Both would probably come down to having something like
> 
> 	read.table(text=foo, ...)
> 
> along with
> 
> 	foo <- getClipboard(...)
> 
> reading a text string from the X or Windows clipboard (assuming that
> what you get from the windows clipboard is a string).

Wouldn't that require some sort of coordination with a similar feature
in e.g. gnumeric? If all we can do with the clipboard is to stick its
content into a text file, we might as well do so directly...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Thu Mar 23 14:50:02 2000
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 23 Mar 2000 06:50:02 -0800
Subject: [Rd] clipboard
In-Reply-To: Peter Dalgaard BSA's message of "23 Mar 2000 14:59:19 +0100"
References: <14554.8132.140193.424776@galadriel.ci.tuwien.ac.at> <x2vh2dss7c.fsf@blueberry.kubism.ku.dk>
Message-ID: <87itydzqp1.fsf@alpha.cfas.washington.edu>

>>>>> "PDB" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PDB> Wouldn't that require some sort of coordination with a
    PDB> similar feature in e.g. gnumeric? If all we can do with the
    PDB> clipboard is to stick its content into a text file, we might
    PDB> as well do so directly...

Check out the drag-n-drop discussions on the XEmacs/GNOME mailing
lists...  (or possibly the code -- you'd have to look at the various
DnD protocols, 4-5 currently in use to be fairly general across unices
and not just Linux-centric (which would still be 3) I believe...).

best,
-tony

-- 
A.J. Rossini		       Research Assistant Professor of Biostatistics 
Biostatistics/Univ. of Washington  (Th)	Box 357232   206-543-1044 (3286=fax)
Center for AIDS Research/HMC/UW	  (M/F)	Box 359931   206-731-3647 (3693=fax)
VTN/SCHARP/FHCRC		 (Tu/W)	Box 358080   206-667-7025 (4812=fax)
rossini@(biostat.washington.edu|u.washington.edu|hivnet.fhcrc.org)
http://www.biostat.washington.edu/~rossini

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Mar 23 15:15:35 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 23 Mar 2000 16:15:35 +0100 (CET)
Subject: [Rd] clipboard
In-Reply-To: <x2vh2dss7c.fsf@blueberry.kubism.ku.dk>
References: <14554.8132.140193.424776@galadriel.ci.tuwien.ac.at>
 <x2vh2dss7c.fsf@blueberry.kubism.ku.dk>
Message-ID: <14554.13591.966735.391021@galadriel.ci.tuwien.ac.at>

>>>>> On 23 Mar 2000 14:59:19 +0100,
>>>>> Peter Dalgaard BSA (PDB) wrote:

PDB> Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:
>> if we do something like that for windows (which might be useful) we
>> should do the same for X, i.e., use the X clipboard in the same way.
>> 
>> Not that I know how to access it but it shouldn't be too hard to find
>> out. Both would probably come down to having something like
>> 
>> read.table(text=foo, ...)
>> 
>> along with
>> 
>> foo <- getClipboard(...)
>> 
>> reading a text string from the X or Windows clipboard (assuming that
>> what you get from the windows clipboard is a string).

PDB> Wouldn't that require some sort of coordination with a similar feature
PDB> in e.g. gnumeric? If all we can do with the clipboard is to stick its
PDB> content into a text file, we might as well do so directly...

Well, sure ... I just meant the above as simple default method which
should work in cooperation with all applications. If I write the
string to a tmpfile and use the current read.table or enhance
read.table is probably not really important, just the latter should be
more efficient (and could be useful in other contexts, too).

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Mar 23 17:10:31 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 23 Mar 2000 18:10:31 +0100
Subject: [Rd] 3D-Scatterplot
Message-ID: <38DA5007.B0AB5186@statistik.uni-dortmund.de>

If someone is interested in 3D-scatterplots, have a look at
http://www.statistik.uni-dortmund.de/leute/ligges.htm

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Thu Mar 23 17:37:53 2000
From: kjetil.kjernsmo@astro.uio.no (Kjetil Kjernsmo)
Date: Thu, 23 Mar 2000 18:37:53 +0100 (MET)
Subject: [Rd] Some "new" stuff for hist.R
Message-ID: <Pine.OSF.4.05.10003231657240.7710-200000@alnair.uio.no>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--0-201145637-953833073=:7710
Content-Type: TEXT/PLAIN; charset=US-ASCII

Dear all,

I've been hacking on histograms the past couple of days. I wanted to do
two things, add histograms where the breaks of one histogram is a
subset sequence of the other, and get a histogram plot from a histogram
object. I found no function to do these things and got no response on
r-help, so I started doing it myself. I think I have solved it now, so
I have attached the code I've got, in case it would be something to
include in R in the future. 
I guess most of the file is your code, that is, it's just hist.default
with only two changes:
In the line
  stop("`probability' is an alias for `!freq', however they differ.")
--------------------^ closing ' was missing
and it returns an object with class="histogram". 

Then, I made hist.histogram, that plots an existing "histogram" object.
This is also just your code, I just did cut'n'paste on the parts that
seemed relevant. One might argue that the default method should be split
in two, since these two parts are almost identical. 

Then, there's adding. To find a subset sequence, I wrote a
sub.vector-function, admittedly very ugly, what I really wanted was a
function that would output the union of sequences and pad the rest with
zeros. Anyway, the function solves my problem... (I'm not usually a
pragmatist... :-)) Then, there's the add.histogram function that outputs a
histogram object. I tried to declare "+".histogram, "%+%".histogram and
things like that, in the hope of creating a binary operator for
histograms, but I couldn't get it to work. Anyway, this is what I've got,
I hope it can be used.

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no 


--0-201145637-953833073=:7710
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="hist.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.OSF.4.05.10003231837530.7710@alnair.uio.no>
Content-Description: Histogram R-code
Content-Disposition: attachment; filename="hist.R"

aGlzdCA8LSBmdW5jdGlvbih4LCAuLi4pIFVzZU1ldGhvZCgiaGlzdCIpDQoN
Cmhpc3QuZGVmYXVsdCA8LQ0KICAgIGZ1bmN0aW9uICh4LCBicmVha3MsIGZy
ZXE9IE5VTEwsIHByb2JhYmlsaXR5ID0gIWZyZXEsIGluY2x1ZGUubG93ZXN0
PSBUUlVFLA0KCSAgICAgIHJpZ2h0PVRSVUUsIGNvbCA9IE5VTEwsIGJvcmRl
ciA9IHBhcigiZmciKSwNCgkgICAgICBtYWluID0gcGFzdGUoIkhpc3RvZ3Jh
bSBvZiIgLCBkZXBhcnNlKHN1YnN0aXR1dGUoeCkpKSwNCgkgICAgICB4bGlt
ID0gcmFuZ2UoYnJlYWtzKSwgeWxpbSA9IHJhbmdlKHksIDApLA0KCSAgICAg
IHhsYWIgPSBkZXBhcnNlKHN1YnN0aXR1dGUoeCkpLCB5bGFiLA0KCSAgICAg
IGF4ZXMgPSBUUlVFLCBwbG90ID0gVFJVRSwgbGFiZWxzID0gRkFMU0UsIG5j
bGFzcyA9IE5VTEwsIC4uLikNCnsNCiAgICBpZiAoIWlzLm51bWVyaWMoeCkp
DQoJc3RvcCgiaGlzdDogeCBtdXN0IGJlIG51bWVyaWMiKQ0KICAgIG1haW4g
IyBldmFsKCkgbm93OiBkZWZlYXQgbGF6eSBldmFsDQogICAgeGxhYg0KICAg
IG4gPC0gbGVuZ3RoKHggPC0geFshaXMubmEoeCldKQ0KICAgIHVzZS5iciA8
LSAhbWlzc2luZyhicmVha3MpDQogICAgaWYodXNlLmJyKSB7DQoJaWYoIW1p
c3NpbmcobmNsYXNzKSkNCgkgICAgd2FybmluZygiYG5jbGFzcycgbm90IHVz
ZWQgd2hlbiBgYnJlYWtzJyBzcGVjaWZpZWQiKQ0KICAgIH0NCiAgICBlbHNl
IGlmKCFpcy5udWxsKG5jbGFzcykgJiYgbGVuZ3RoKG5jbGFzcykgPT0gMSkN
CglicmVha3MgPC0gbmNsYXNzDQogICAgdXNlLmJyIDwtIHVzZS5iciAmJiAo
bkIgPC0gbGVuZ3RoKGJyZWFrcykpID4gMQ0KICAgIGlmKHVzZS5icikNCgli
cmVha3MgPC0gc29ydChicmVha3MpDQogICAgZWxzZSB7ICMgY29uc3RydWN0
IHZlY3RvciBvZiBicmVha3MNCglyeCA8LSByYW5nZSh4KQ0KCW5uYiA8LQ0K
CSAgICBpZihtaXNzaW5nKGJyZWFrcykpIDEgKyBsb2cyKG4pDQoJICAgIGVs
c2UgeyAjIGJyZWFrcyA9IGBuY2xhc3MnDQoJCWlmIChpcy5uYShicmVha3Mp
IHwgYnJlYWtzIDwgMikNCgkJICAgIHN0b3AoImludmFsaWQgbnVtYmVyIG9m
IGJyZWFrcyIpDQoJCWJyZWFrcw0KCSAgICB9DQoJYnJlYWtzIDwtIHByZXR0
eSAocngsIG4gPSBubmIsIG1pbi5uPTEsIGVwcy5jb3JyID0gMikNCgluQiA8
LSBsZW5ndGgoYnJlYWtzKQ0KCWlmKG5CIDw9IDEpIHsgIyMtLSBJbXBvc3Np
YmxlICENCgkgICAgc3RvcChwYXN0ZSgiaGlzdC5kZWZhdWx0OiBwcmV0dHko
KSBlcnJvciwgYnJlYWtzPSIsZm9ybWF0KGJyZWFrcykpKQ0KCX0NCiAgICB9
DQogICAgc3RvcmFnZS5tb2RlKHgpIDwtICJkb3VibGUiDQogICAgc3RvcmFn
ZS5tb2RlKGJyZWFrcykgPC0gImRvdWJsZSINCiAgICBjb3VudHMgPC0gLkMo
ImJpbmNvdW50IiwNCgkJIHgsDQoJCSBuLA0KCQkgYnJlYWtzLA0KCQkgbkIs
DQoJCSBjb3VudHMgPSBpbnRlZ2VyKG5CIC0gMSksDQoJCSByaWdodAk9IGFz
LmxvZ2ljYWwocmlnaHQpLA0KCQkgaW5jbHVkZT0gYXMubG9naWNhbChpbmNs
dWRlLmxvd2VzdCksDQoJCSBOQU9LID0gRkFMU0UsIERVUCA9IEZBTFNFLCBQ
QUNLQUdFID0gImJhc2UiKSAkY291bnRzDQogICAgaWYgKGFueShjb3VudHMg
PCAwKSkNCglzdG9wKCJuZWdhdGl2ZSBgY291bnRzJy4gSW50ZXJuYWwgRXJy
b3IgaW4gQy1jb2RlIGZvciBcImJpbmNvdW50XCIiKQ0KICAgIGlmIChzdW0o
Y291bnRzKSA8IG4pDQoJc3RvcCgic29tZSBgeCcgbm90IGNvdW50ZWQ7IG1h
eWJlIGBicmVha3MnIGRvIG5vdCBzcGFuIHJhbmdlIG9mIGB4JyIpDQogICAg
aCA8LSBkaWZmKGJyZWFrcykNCiAgICBpZiAoIXVzZS5iciAmJiBhbnkoaCA8
PSAwKSkNCglzdG9wKCJub3Qgc3RyaWN0bHkgaW5jcmVhc2luZyBgYnJlYWtz
Jy4iKQ0KICAgIGlmIChpcy5udWxsKGZyZXEpKSB7DQoJZnJlcSA8LSBpZigh
bWlzc2luZyhwcm9iYWJpbGl0eSkpDQoJICAgICFhcy5sb2dpY2FsKHByb2Jh
YmlsaXR5KQ0KCWVsc2UgaWYodXNlLmJyKSB7DQoJICAgICMjLS0gRG8gZnJl
cXVlbmNpZXMgaWYgYnJlYWtzIGFyZSBldmVubHkgc3BhY2VkDQoJICAgIG1h
eChoKS1taW4oaCkgPCAxZS03ICogbWVhbihoKQ0KCX0gZWxzZSBUUlVFDQog
ICAgfSBlbHNlIGlmKCFtaXNzaW5nKHByb2JhYmlsaXR5KSAmJiBhbnkocHJv
YmFiaWxpdHkgPT0gZnJlcSkpDQoJc3RvcCgiYHByb2JhYmlsaXR5JyBpcyBh
biBhbGlhcyBmb3IgYCFmcmVxJywgaG93ZXZlciB0aGV5IGRpZmZlci4iKQ0K
ICAgIGludGVuc2l0aWVzIDwtIGNvdW50cy8obipoKQ0KICAgIG1pZHMgPC0g
MC41ICogKGJyZWFrc1stMV0gKyBicmVha3NbLW5CXSkNCiAgICB5IDwtIGlm
IChmcmVxKSBjb3VudHMgZWxzZSBpbnRlbnNpdGllcw0KICAgIHIgPC0gc3Ry
dWN0dXJlKGxpc3QoYnJlYWtzID0gYnJlYWtzLCBjb3VudHMgPSBjb3VudHMs
DQoJICAgICAgaW50ZW5zaXRpZXMgPSBpbnRlbnNpdGllcywgbWlkcyA9IG1p
ZHMpLCBjbGFzcz0iaGlzdG9ncmFtIikNCiAgICBpZiAocGxvdCkgew0KCXBs
b3QubmV3KCkNCglwbG90LndpbmRvdyh4bGltLCB5bGltLCAiIikgIy0+IHls
aW0ncyBkZWZhdWx0IGZyb20gJ3knDQoJaWYgKG1pc3NpbmcoeWxhYikpDQoJ
ICAgIHlsYWIgPC0gcGFzdGUoaWYoIWZyZXEpIlJlbGF0aXZlICIsICJGcmVx
dWVuY3kiLCBzZXA9IiIpDQoJaWYoZnJlcSAmJiB1c2UuYnIgJiYgbWF4KGgp
LW1pbihoKSA+IDFlLTcgKiBtZWFuKGgpKQ0KCSAgICB3YXJuaW5nKCJ0aGUg
QVJFQVMgaW4gdGhlIHBsb3QgYXJlIHdyb25nIC0tIG1heWJlIHVzZSBgZnJl
cT1GQUxTRSciKQ0KCXRpdGxlKG1haW4gPSBtYWluLCB4bGFiID0geGxhYiwg
eWxhYiA9IHlsYWIsIC4uLikNCglpZihheGVzKSB7DQoJICAgIGF4aXMoMSwg
Li4uKQ0KCSAgICBheGlzKDIsIC4uLikNCgl9DQoJcmVjdChicmVha3NbLW5C
XSwgMCwgYnJlYWtzWy0xXSwgeSwNCgkgICAgIGNvbCA9IGNvbCwgYm9yZGVy
ID0gYm9yZGVyKQ0KCWlmKGxhYmVscykNCgkgICAgdGV4dChtaWRzLCB5LA0K
CQkgbGFiZWxzID0gaWYoZnJlcSkgY291bnRzIGVsc2Ugcm91bmQoaW50ZW5z
aXRpZXMsMyksDQoJCSBhZGogPSBjKDAuNSwgLTAuNSkpDQoJaW52aXNpYmxl
KHIpDQogICAgfQ0KICAgIGVsc2Ugcg0KfQ0KDQoNCmhpc3QuaGlzdG9ncmFt
IDwtDQogIGZ1bmN0aW9uIChoLCBmcmVxPSBOVUxMLCBwcm9iYWJpbGl0eSA9
ICFmcmVxLCANCgkgICAgICBjb2wgPSBOVUxMLCBib3JkZXIgPSBwYXIoImZn
IiksDQoJICAgICAgbWFpbiA9IHBhc3RlKCJIaXN0b2dyYW0gb2YiICwgZGVw
YXJzZShzdWJzdGl0dXRlKGgpKSksDQoJICAgICAgeGxpbSA9IHJhbmdlKGgk
YnJlYWtzKSwgeWxpbSA9IHJhbmdlKHksIDApLA0KCSAgICAgIHhsYWIgPSBk
ZXBhcnNlKHN1YnN0aXR1dGUoaCkpLCB5bGFiLA0KCSAgICAgIGF4ZXMgPSBU
UlVFLCBsYWJlbHMgPSBGQUxTRSwgIC4uLikNCnsNCiAgaWYgKGlzLm51bGwo
ZnJlcSkpIHsNCiAgICBmcmVxIDwtIGlmKCFtaXNzaW5nKHByb2JhYmlsaXR5
KSkNCiAgICAgICFhcy5sb2dpY2FsKHByb2JhYmlsaXR5KSBlbHNlIFRSVUUN
CiAgfSBlbHNlIGlmKCFtaXNzaW5nKHByb2JhYmlsaXR5KSAmJiBhbnkocHJv
YmFiaWxpdHkgPT0gZnJlcSkpDQogICAgc3RvcCgiYHByb2JhYmlsaXR5JyBp
cyBhbiBhbGlhcyBmb3IgYCFmcmVxJywgaG93ZXZlciB0aGV5IGRpZmZlci4i
KQ0KICB5IDwtIGlmIChmcmVxKSBoJGNvdW50cyBlbHNlIGgkaW50ZW5zaXRp
ZXMNCiAgbkIgPC0gbGVuZ3RoKGgkYnJlYWtzKQ0KICBwbG90Lm5ldygpDQog
IHBsb3Qud2luZG93KHhsaW0sIHlsaW0sICIiKSAjLT4geWxpbSdzIGRlZmF1
bHQgZnJvbSAneScNCiAgaWYgKG1pc3NpbmcoeWxhYikpDQogICAgeWxhYiA8
LSBwYXN0ZShpZighZnJlcSkiUmVsYXRpdmUgIiwgIkZyZXF1ZW5jeSIsIHNl
cD0iIikNCiAgdGl0bGUobWFpbiA9IG1haW4sIHhsYWIgPSB4bGFiLCB5bGFi
ID0geWxhYiwgLi4uKQ0KICBpZihheGVzKSB7DQogICAgYXhpcygxLCAuLi4p
DQogICAgYXhpcygyLCAuLi4pDQogIH0NCiAgcmVjdChoJGJyZWFrc1stbkJd
LCAwLCBoJGJyZWFrc1stMV0sIHksDQogICAgICAgY29sID0gY29sLCBib3Jk
ZXIgPSBib3JkZXIpDQogIGlmKGxhYmVscykNCiAgICB0ZXh0KGgkbWlkcywg
eSwNCiAgICAgICAgIGxhYmVscyA9IGlmKGZyZXEpIGgkY291bnRzIGVsc2Ug
cm91bmQoaCRpbnRlbnNpdGllcywzKSwNCiAgICAgICAgIGFkaiA9IGMoMC41
LCAtMC41KSkNCiAgaW52aXNpYmxlKHkpDQp9DQpzdWIudmVjdG9yIDwtIGZ1
bmN0aW9uKGIxLCBiMikNCnsNCiAgaSA8LSAwDQogIHdoaWxlKCEgYWxsKGIy
WyhpKzEpOihsZW5ndGgoYjEpK2kpXSA9PSBiMSkpDQogIHsgICANCiAgICBp
PC1pKzENCiAgICBpZihpK2xlbmd0aChiMSkgPiBsZW5ndGgoYjIpKSByZXR1
cm4oTlVMTCkNCiAgfQ0KICByZXR1cm4oKGkrMSk6KGxlbmd0aChiMSkraSkp
DQp9DQoNCmFkZC5oaXN0b2dyYW0gPC0gZnVuY3Rpb24oaDEsIGgyKQ0Kew0K
ICBpZihsZW5ndGgoaDEkYnJlYWtzKSA+PSBsZW5ndGgoaDIkYnJlYWtzKSkN
CiAgew0KICAgIGJsIDwtIGgxJGJyZWFrcw0KICAgIGJzIDwtIGgyJGJyZWFr
cw0KICAgIGNsIDwtIGgxJGNvdW50cw0KICAgIGNzIDwtIGgyJGNvdW50cw0K
ICAgIG1pIDwtIGgxJG1pZHMNCiAgfSBlbHNlIHsNCiAgICBicyA8LSBoMSRi
cmVha3MNCiAgICBibCA8LSBoMiRicmVha3MNCiAgICBjcyA8LSBoMSRjb3Vu
dHMNCiAgICBjbCA8LSBoMiRjb3VudHMNCiAgICBtaSA8LSBoMiRtaWRzDQog
IH0NCiAgaW5kIDwtIHN1Yi52ZWN0b3IoYnMsIGJsKQ0KICBpZighIGlzLnZl
Y3RvcihpbmQpKSBzdG9wKCJJbmNvbXBhdGlibGUgYnJlYWtzIikNCiAgYzAg
PC0gcmVwKDAsIGxlbmd0aChjbCkpDQogIGMwW2luZFsxOmxlbmd0aChjcyld
XSA8LSBjcw0KICBjdCA8LSBjMCArIGNsDQogIGludCA8LSBjdC8oc3VtKGN0
KSpkaWZmKGJsKSkgIyBUaGlzIHdvcmtzIGZvciBub24tZXF1aWRpc3RhbnQg
YnJlYWtzPw0KICByZXR1cm4oc3RydWN0dXJlKGxpc3QoYnJlYWtzPWJsLA0K
ICAgICAgICAgICAgICAgICAgICAgICAgY291bnRzPWN0LA0KICAgICAgICAg
ICAgICAgICAgICAgICAgaW50ZW5zaXRpZXM9aW50LA0KICAgICAgICAgICAg
ICAgICAgICAgICAgbWlkcz1taSksDQogICAgICAgICAgICAgICAgICAgY2xh
c3M9Imhpc3RvZ3JhbSIpKQ0KfQ0K
--0-201145637-953833073=:7710--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Mar 23 18:27:35 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 23 Mar 2000 19:27:35 +0100 (CET)
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: <8766uens46.fsf@bavaria.ece.cmu.edu>
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu>
 <871z561pcm.fsf@bavaria.ece.cmu.edu>
 <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at>
 <8766uens46.fsf@bavaria.ece.cmu.edu>
Message-ID: <14554.25111.847983.270127@aragorn.ci.tuwien.ac.at>

>>>>> Thomas J Vogels writes:

> Hi,

> ok, the main binary builds, but not ctest.so.  Here is the head of the
> linker output:

> $ ld -bM:SRE -H512 -T512 -bnoentry -bexpall       -bI:../../../../etc/R.exp  -o ct
> est.so ansari.o fexact.o kendall.o ks.o prho.o swilk.o  -L/usr/local/lib -L/afs/
> ece/usr/tov/opt/arch -lblas  -lxlf90 -lxlf -lxlomp_ser -lm
> ld: 0711-317 ERROR: Undefined symbol: .sprintf
> ld: 0711-317 ERROR: Undefined symbol: .itrunc

> ... and so on.  It's dearly missing -lc.  I've tried adding -lc and
> that allowed at least ctest.so to link.  But where should -lc be added
> for shared libs to link with?

Tried adding to LIBS now.  Pls check.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From santini@dsi.unimi.it  Fri Mar 24 10:12:52 2000
From: santini@dsi.unimi.it (santini@dsi.unimi.it)
Date: Fri, 24 Mar 2000 11:12:52 +0100 (MET)
Subject: [Rd] kernel {ts}, kernel.dirichlet calling with one arg (PR#501)
Message-ID: <200003241012.LAA29932@pubhealth.ku.dk>

Full_Name: Massimo Santini
Version: 1.0.0
OS: Linux
Submission from: (NULL) (159.149.147.89)


At line 1269 of .../R/library/ts/R/ts there is the following call

	dirichlet = dirichlet.kernel(m), 

but since dirichlet.kernel is declared somewhre above to take two arguments, 
I suspect that that line should read as

	dirichlet = dirichlet.kernel(m, r), 

Without this correction the call
	
	kernel("dirichlet",m=10,r=1);
	
always returns the following error

	Error in dirichlet.kernel(m) : Argument "r" is missing, with no default

while after the proposed patch if correctly outputs the desider kernel.

I hope this helps,

			best regards, Massimo

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lbaring@stochastik.uni-hannover.de  Fri Mar 24 12:23:25 2000
From: lbaring@stochastik.uni-hannover.de (lbaring@stochastik.uni-hannover.de)
Date: Fri, 24 Mar 2000 13:23:25 +0100 (MET)
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
Message-ID: <200003241223.NAA02113@pubhealth.ku.dk>

Hello!

I use R-version 1.0.0
To get the 0.95 quantile of the hypergeometric
distribution with the parameters m=45000,n=5000 and
k=600 I use the R-command 

> qhyper(0.95,45000,5000,600).


The value obtained is 600. However, the true value
is 552. The latter can be obtained for example by
calling the corresponding distribution function 
with the R commands 

> x<-540:580
> phyper(x,45000,5000,600)   

The value 552 is obtained also by the usual normal
approximation.


Overall, it seems that R produces errors when calling
qhyper(p,m,n,k) for large values of the parametes 
m,n or k.

Sincerely
L. Baringhaus

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Fri Mar 24 13:40:13 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Fri, 24 Mar 2000 14:40:13 +0100 (CET)
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
In-Reply-To: <200003241223.NAA02113@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0003241433160.21466-100000@boromir.ci.tuwien.ac.at>


> Hello!
> 
> I use R-version 1.0.0
> To get the 0.95 quantile of the hypergeometric
> distribution with the parameters m=45000,n=5000 and
> k=600 I use the R-command 
> 
> > qhyper(0.95,45000,5000,600).
> 
> 
> The value obtained is 600. However, the true value
> is 552. 

Well, 

had a short look. The problem arises in qhyper.c at line 56:

 term = exp(lfastchoose(NR, xr) + lfastchoose(NB, xb) - lfastchoose(N, n));

The expression inside the exp() function gives -1415.411856 and exp()
returns 0. So term and sum in 

 while(sum < p && xr < xend) {
        xr++;
        NB++;
        term *= (NR / xr) * (xb / NB);
        sum += term;
        xb--;
        NR--;
    }

are 0 all the time and xend = 600 is returned. 

R-Core: How to fix this?

Torsten

*****************************************************************
*				                                *
* Torsten Hothorn, Statistician 		                *
* at the moment: Institut fuer Statistik, TU Wien	        *
* Tel: 0043 1 58801 10772                  			*
* Fax: 0043 1 58801 10798                                       *
*                                                               *
*****************************************************************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Fri Mar 24 13:58:25 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Fri, 24 Mar 2000 14:58:25 +0100 (CET)
Subject: [Rd] StatDataML & Gnumeric
Message-ID: <Pine.LNX.4.21.0003241452010.26446-100000@boromir.ci.tuwien.ac.at>


I just uploaded version 0.2-5 of the StatDataML package and a corrected
version of the proposal to http://www.ci.tuwien.ac.at/~leisch/R

Also available now is StatDataMLGnumeric, which implements writing of
"dataframe.dtd" conform StatDataML files from Gnumeric. 

Torsten

*****************************************************************
*								*
* Torsten Hothorn, Statistician					*
* at the moment: Institut fuer Statistik, TU Wien		*
* Tel: 0043 1 58801 10772					*
* Fax: 0043 1 58801 10798					*
*								*
*****************************************************************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 24 14:58:39 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Mar 2000 15:58:39 +0100
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
In-Reply-To: Torsten Hothorn's message of "Fri, 24 Mar 2000 14:40:13 +0100 (CET)"
References: <Pine.LNX.4.21.0003241433160.21466-100000@boromir.ci.tuwien.ac.at>
Message-ID: <x2wvmswh28.fsf@blueberry.kubism.ku.dk>

Torsten Hothorn <hothorn@ci.tuwien.ac.at> writes:

>  term = exp(lfastchoose(NR, xr) + lfastchoose(NB, xb) - lfastchoose(N, n));
> 
> The expression inside the exp() function gives -1415.411856 and exp()
> returns 0. So term and sum in 
> 
>  while(sum < p && xr < xend) {
>         xr++;
>         NB++;
>         term *= (NR / xr) * (xb / NB);
>         sum += term;
>         xb--;
>         NR--;
>     }
> 
> are 0 all the time and xend = 600 is returned. 
> 
> R-Core: How to fix this?

Ick! That is of course only to be expected with recurrence relations
like this applied to large numbers. Since the term formula (as far as
I remember!) applies to all the point probabilities, I suppose that
one could start the recurrence from a "known positive" value and work
both forwards and backwards from there. Since you still want to do the
sums from the low end (although that is perhaps not all that
important?) you might need an intermediate array to hold the values.
One idea could be to start from the normal approximation of the
desired quantile. Probably a bit more than an afternoons work, but
hardly several weeks...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar 24 16:10:38 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 24 Mar 2000 08:10:38 -0800 (PST)
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
In-Reply-To: <x2wvmswh28.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0003240807090.2323-100000@mail.biostat.washington.edu>

On 24 Mar 2000, Peter Dalgaard BSA wrote:

> Torsten Hothorn <hothorn@ci.tuwien.ac.at> writes:
> 
> >  term = exp(lfastchoose(NR, xr) + lfastchoose(NB, xb) - lfastchoose(N, n));
> > 
> > The expression inside the exp() function gives -1415.411856 and exp()
> > returns 0. So term and sum in 
> > 
> >  while(sum < p && xr < xend) {
> >         xr++;
> >         NB++;
> >         term *= (NR / xr) * (xb / NB);
> >         sum += term;
> >         xb--;
> >         NR--;
> >     }
> > 
> > are 0 all the time and xend = 600 is returned. 
> > 
> > R-Core: How to fix this?
> 
> Ick! That is of course only to be expected with recurrence relations
> like this applied to large numbers. Since the term formula (as far as
> I remember!) applies to all the point probabilities, I suppose that
> one could start the recurrence from a "known positive" value and work
> both forwards and backwards from there. Since you still want to do the
> sums from the low end (although that is perhaps not all that
> important?) you might need an intermediate array to hold the values.
> One idea could be to start from the normal approximation of the
> desired quantile. Probably a bit more than an afternoons work, but
> hardly several weeks...

As phyper seems to work we could just start at the Normal approximation to
qhyper and search for x such  that phyper(x)=p. Since it's a discrete
distribution this shouldn't take that long.

	-thomas





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar 24 16:10:35 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Fri, 24 Mar 2000 17:10:35 +0100 (MET)
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
Message-ID: <200003241610.RAA05583@pubhealth.ku.dk>

On 24 Mar 2000, Peter Dalgaard BSA wrote:

> Torsten Hothorn <hothorn@ci.tuwien.ac.at> writes:
> 
> >  term = exp(lfastchoose(NR, xr) + lfastchoose(NB, xb) - lfastchoose(N, n));
> > 
> > The expression inside the exp() function gives -1415.411856 and exp()
> > returns 0. So term and sum in 
> > 
> >  while(sum < p && xr < xend) {
> >         xr++;
> >         NB++;
> >         term *= (NR / xr) * (xb / NB);
> >         sum += term;
> >         xb--;
> >         NR--;
> >     }
> > 
> > are 0 all the time and xend = 600 is returned. 
> > 
> > R-Core: How to fix this?
> 
> Ick! That is of course only to be expected with recurrence relations
> like this applied to large numbers. Since the term formula (as far as
> I remember!) applies to all the point probabilities, I suppose that
> one could start the recurrence from a "known positive" value and work
> both forwards and backwards from there. Since you still want to do the
> sums from the low end (although that is perhaps not all that
> important?) you might need an intermediate array to hold the values.
> One idea could be to start from the normal approximation of the
> desired quantile. Probably a bit more than an afternoons work, but
> hardly several weeks...

As phyper seems to work we could just start at the Normal approximation to
qhyper and search for x such  that phyper(x)=p. Since it's a discrete
distribution this shouldn't take that long.

	-thomas






-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 24 16:29:06 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 24 Mar 2000 17:29:06 +0100 (MET)
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
Message-ID: <200003241629.RAA05692@pubhealth.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> As phyper seems to work we could just start at the Normal approximation to
> qhyper and search for x such  that phyper(x)=p. Since it's a discrete
> distribution this shouldn't take that long.

Or apply the same fixup:

        sum += (small_N ? term : exp(term));
        ...
        if(small_N) term *= (NR / xr) * (xb / NB);
        else    term += log((NR / xr) * (xb / NB));

which is pretty obviously not optimized for speed, but certainly
avoids the multiply-by-zero effect.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 24 16:32:37 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Mar 2000 17:32:37 +0100
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
In-Reply-To: Thomas Lumley's message of "Fri, 24 Mar 2000 08:10:38 -0800 (PST)"
References: <Pine.GSO.4.21.0003240807090.2323-100000@mail.biostat.washington.edu>
Message-ID: <x2r9d0wcpm.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> As phyper seems to work we could just start at the Normal approximation to
> qhyper and search for x such  that phyper(x)=p. Since it's a discrete
> distribution this shouldn't take that long.

Or apply the same fixup:

        sum += (small_N ? term : exp(term));
        ...
        if(small_N) term *= (NR / xr) * (xb / NB);
        else    term += log((NR / xr) * (xb / NB));

which is pretty obviously not optimized for speed, but certainly
avoids the multiply-by-zero effect.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Fri Mar 24 19:26:18 2000
From: warnes@biostat.washington.edu (warnes@biostat.washington.edu)
Date: Fri, 24 Mar 2000 20:26:18 +0100 (MET)
Subject: [Rd] dmvnorm() bug in e1071 (PR#503)
Message-ID: <200003241926.UAA06290@pubhealth.ku.dk>


When dmvnorm is applied to matrices it fails.  The offending lines are

  if (length(x) != ncol(sigma)) {
    stop("x and sigma have non-conforming size")
  }

which works fine if x is a dataframe, but not if x is a matrix.

Replacing this test with

  if (ncol(x) != ncol(sigma)) {
    stop("x and sigma have non-conforming size")
  }

Corrects the problem, and still works for data frames and
vectors.  (Vectors have already been converted to matrices).

-Gregory


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Mar 24 19:53:42 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Fri, 24 Mar 2000 14:53:42 -0500 (EST)
Subject: [Rd] Some "new" stuff for hist.R
In-Reply-To: <Pine.OSF.4.05.10003231657240.7710-200000@alnair.uio.no>
Message-ID: <Pine.LNX.4.10.10003241450500.824-100000@bolker.zoo.ufl.edu>

On Thu, 23 Mar 2000, Kjetil Kjernsmo wrote:

> Dear all,
> 
> I've been hacking on histograms the past couple of days. I wanted to do
> two things, add histograms where the breaks of one histogram is a
> subset sequence of the other, and get a histogram plot from a histogram
> object.

> Then, I made hist.histogram, that plots an existing "histogram" object.
> This is also just your code, I just did cut'n'paste on the parts that
> seemed relevant. One might argue that the default method should be split
> in two, since these two parts are almost identical. 

  Might it be more logical to make hist.histogram be plot.histogram
instead?  

  This is a nice idea; I had thought in the past that it would be nice to
make "histogram" into a class with print and plot methods (in particular,
it's sometimes nice to be able to overlay different histograms on each
other), but never got around to doing it.

  Ben

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Fri Mar 24 19:58:43 2000
From: kjetil.kjernsmo@astro.uio.no (Kjetil Kjernsmo)
Date: Fri, 24 Mar 2000 20:58:43 +0100 (MET)
Subject: [Rd] Some "new" stuff for hist.R
In-Reply-To: <Pine.LNX.4.10.10003241450500.824-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.OSF.4.05.10003242057440.2535-100000@alnair.uio.no>

On Fri, 24 Mar 2000, Ben Bolker wrote:

>  Might it be more logical to make hist.histogram be plot.histogram
>instead?  

Yep, Jens e-mailed me about it, and after thinking about, I think it would
be a good idea.

>  This is a nice idea; I had thought in the past that it would be nice to
>make "histogram" into a class with print and plot methods (in particular,
>it's sometimes nice to be able to overlay different histograms on each
>other), but never got around to doing it.

Yeah, that would have been a niec feature too! :-)

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Sat Mar 25 20:06:53 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Sat, 25 Mar 2000 21:06:53 +0100 (MET)
Subject: [Rd] new save code and DOTSXP (PR#504)
Message-ID: <200003252006.VAA08757@pubhealth.ku.dk>

The new save/load code cannot handle DOTSXP

 f<-function(x,...){ function(y) list(x=x,y=y,...)} 
 a<-f(1,2,3)
 save(list="a",file="a.rdata")

Error in save(list = "a", file = "a.rdata") :
        NewWriteItem: unknown type 17



R 1.0 on Solaris or Linux

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Sat Mar 25 20:16:40 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Sat, 25 Mar 2000 21:16:40 +0100 (MET)
Subject: [Rd] interrupted save (PR#505)
Message-ID: <200003252016.VAA08795@pubhealth.ku.dk>


If an error occurs during a save the file does not appear to be
closed and buffers flushed.  This can lead to corruption if the same
filename is used later and then the buffer is flushed on program exit.

For example, tn the context of PR #504

 f<-function(x,...){ function(y) list(x=x,y=y,...)}
 a<-f(1,2,3)
 save(list="a",file="a.rdata")  ## -- error --
 b<-1:10
 save(list="b",file="a.rdata")
 load("a.rdata")  ## works
 q("no")
 
 R

 load("a.rdata")  ## error



This is R1.0 on Linux

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Mar 26 09:06:55 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 26 Mar 2000 09:06:55 +0100 (BST)
Subject: [Rd] windows version
In-Reply-To: <38D4E936.EB941D1C@univie.ac.at>
Message-ID: <Pine.GSO.4.05.10003260906000.2875-100000@auk.stats>

On Sun, 19 Mar 2000, Erich Neuwirth wrote:

> for all of you using the windows version:
> i think having a look at the r-winedt
> interface by volker ligges is a good idea.
> it works quite nicely.

Is WinEdt not shareware?  That dampens my enthusiasm for using it with
an Open Source project.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Sun Mar 26 09:28:45 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Sun, 26 Mar 2000 10:28:45 +0200
Subject: [Rd] windows version
References: <Pine.GSO.4.05.10003260906000.2875-100000@auk.stats>
Message-ID: <38DDCA3D.DAF93DD8@univie.ac.at>

yes, you are right.
winedt is shareware.


Prof Brian D Ripley wrote:
> 
> On Sun, 19 Mar 2000, Erich Neuwirth wrote:
> 
> > for all of you using the windows version:
> > i think having a look at the r-winedt
> > interface by volker ligges is a good idea.
> > it works quite nicely.
> 
> Is WinEdt not shareware?  That dampens my enthusiasm for using it with
> an Open Source project.
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Mar 26 09:38:17 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 26 Mar 2000 09:38:17 +0100 (BST)
Subject: [Rd] Use of Rd2txt on .Rd files from rw-1.0.0 (PR#498)
In-Reply-To: <200003212215.XAA03296@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10003260936270.2875-100000@auk.stats>

How did you get the files from Windows to Solaris?  I suspect you have
CRLF line endings (which emacs tolerates).  Try converting to LF
(e.g. by MULE on emacs setting the coding).  It is a bit much to expext
Unix systems to accept Windows files.


On Tue, 21 Mar 2000 john.maindonald@anu.edu.au wrote:

> >From e980153 Tue Mar 21 18:50:55 2000
> To: bates@stat.wisc.edu
> Subject: Use of Rd2txt on .Rd files from rw-1.0.0
> 
> Files generated using prompt.data.frame() under rw-1.0.0 get
> scrambled (mildly) when I process them under Rd2txt on Solaris,
> (using R-devel 1.1.0).
> Files generated under R-devel 1.1 on Solaris are processed ok.
> 
> The .Rd files from the two sources look identical. The problem 
> is likely to be with Rd2txt, I guess.
> 
> Here is an example.  I give only the first part of the output,
> where the problem occurs.
> =========================================================
> Kiwifruit data
> 
> Description:
> 
>  Kiwifruitkiwishade' data frame has 48 rows and 3 columns.
>      shading trial
> 
> Format:
> 
>      This data frame contains the following columns:
> 
>       yield a numeric vector
> 
>  `west'  ck a factor with levels
> 
>  `Feb2May'  a factor with levels
>             `none' 
> 
> Details:
> 
> ............
> =========================================================
> 
> Here is what I expected to get, and do get when the .Rd file
> is generated under Solaris:
> 
> =========================================================
> Kiwifruit data
> 
> Description:
> 
>      The `kiwishade' data frame has 48 rows and 3 columns. Kiwifruit
>      shading trial
> 
> Format:
> 
>      This data frame contains the following columns:
> 
>       yield a numeric vector
> 
>       block a factor with levels `east'  `north'  `west' 
> 
>       shade a factor with levels `Aug2Dec'  `Dec2Feb'  `Feb2May' 
>             `none'
> ............
> =========================================================
> 
> Here is the .Rd file, from the PC, then editing using emacs
> under Solaris.  However the same scrambling occurs when the
> files is processed without editing.
> =========================================================
> \name{kiwishade}
> \alias{kiwishade}
> \non_function{}
> \title{Kiwifruit data}
> \description{
> The \code{kiwishade} data frame has 48 rows and 3 columns.
> Kiwifruit shading trial
> }
> \format{
> This data frame contains the following columns:
> \describe{
> \item{yield}{
> a numeric vector
> }
> \item{block}{
> a factor with levels
> \code{east} 
> \code{north} 
> \code{west} 
> }
> \item{shade}{
> a factor with levels
> \code{Aug2Dec} 
> \code{Dec2Feb} 
> \code{Feb2May} 
> \code{none} 
> }
> }
> }
> \details{
> 
> }
> \source{
> Snelgar at al.
> }
> \examples{
> data(kiwishade)
> }
> \keyword{datasets}
> =========================================================
> 
> John Maindonald               email : john.maindonald@anu.edu.au        
> Statistical Consulting Unit,  phone : (6249)3998        
> c/o CMA, SMS,                 fax   : (6249)5549  
> John Dedman Mathematical Sciences Building
> Australian National University
> Canberra ACT 0200
> Australia
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sun Mar 26 11:24:58 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Sun, 26 Mar 2000 12:24:58 +0200
Subject: [Rd] windows version
References: <Pine.GSO.4.05.10003260906000.2875-100000@auk.stats>
Message-ID: <38DDE57A.6FECED98@statistik.uni-dortmund.de>

> Is WinEdt not shareware?  That dampens my enthusiasm for using it with
> an Open Source project.

You are right.
I thought it would be nice for some Windows users, which are using
WinEdt already as a TeX-Editor and don't like emacs very well.

Best regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Sun Mar 26 21:49:24 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Sun, 26 Mar 2000 22:49:24 +0200 (MET DST)
Subject: [Rd] matlines, matpoints don't follow prototype (PR#506)
Message-ID: <200003262049.WAA11567@pubhealth.ku.dk>

The Blue Book allows the 'type' argument to be used in matpoints and
matlines.

	matlines(x, y, type="l", lty=1:5, pch=, col=1:4)

R-1.0.0 does not.

Thus, type="h", "b", must be invoked thru matplot( x, y, type = "h",
add=TRUE)

For the sake of consistency with S, it would be nice to have matlines
defined as:

"matlines" <-
  function(x, y, type = 'l', lty=1:5, lwd = 1, pch=NULL, col=1:6, ...)
  matplot(x=x, y=y, type=type, lty=lty, lwd=lwd, pch=pch, col=col,
          add=TRUE, ...)


and similarly for matpoints.

Chuck Berry
-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive
Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Mar 27 19:18:54 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 27 Mar 2000 12:18:54 -0600
Subject: [Rd] R port of acepack
Message-ID: <6rog80p981.fsf@franz.stat.wisc.edu>

To whom should bug reports of the R port of acepack be directed?

On a SPARC/Solaris 2.6 or 2.7 (SunOS 5.6 or 5.7) system running
R-1.0.0 the avas example fails
 > library(acepack)
 > example(avas)

 avas> TWOPI <- 8 * atan(1)

 avas> x <- runif(200, 0, TWOPI)

 avas> y <- exp(sin(x) + rnorm(200)/2)

 avas> a <- avas(x, y)

 Process R bus error (core dumped) at Mon Mar 27 11:59:54 2000

The bus error occurs inside the Fortran subroutine smth, which is
called by the subroutine rlsmo, which is called by the subroutine
avas.  The compilers would have been gcc 2.95.2 and g77 GNU Fortran
0.5.25 19991024 (release).

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Mar 27 19:33:27 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 27 Mar 2000 10:33:27 -0800 (PST)
Subject: [Rd] R port of acepack
In-Reply-To: <6rog80p981.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.GSO.4.21.0003271031110.15596-100000@mail.biostat.washington.edu>

On 27 Mar 2000, Douglas Bates wrote:

> To whom should bug reports of the R port of acepack be directed?

To me.   I'll see what I can do. I get a probably related error on Solaris
(probably with these compilers, but I didn't do the compilation).

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

> 
> On a SPARC/Solaris 2.6 or 2.7 (SunOS 5.6 or 5.7) system running
> R-1.0.0 the avas example fails
>  > library(acepack)
>  > example(avas)
> 
>  avas> TWOPI <- 8 * atan(1)
> 
>  avas> x <- runif(200, 0, TWOPI)
> 
>  avas> y <- exp(sin(x) + rnorm(200)/2)
> 
>  avas> a <- avas(x, y)
> 
>  Process R bus error (core dumped) at Mon Mar 27 11:59:54 2000
> 
> The bus error occurs inside the Fortran subroutine smth, which is
> called by the subroutine rlsmo, which is called by the subroutine
> avas.  The compilers would have been gcc 2.95.2 and g77 GNU Fortran
> 0.5.25 19991024 (release).
> 
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status = 
>  major = 1
>  minor = 0.0
>  year = 2000
>  month = February
>  day = 29
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Tue Mar 28 19:24:09 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 28 Mar 2000 13:24:09 -0500
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: Kurt Hornik's message of "Mon, 27 Mar 2000 08:57:27 +0200"
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu> <871z561pcm.fsf@bavaria.ece.cmu.edu> <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at> <8766uens46.fsf@bavaria.ece.cmu.edu> <14554.25111.847983.270127@aragorn.ci.tuwien.a
Message-ID: <87r9cvgdh2.fsf@bavaria.ece.cmu.edu>


Kurt,

thanks for your help.  Your suggestion to use "LDCMD=cc SHLIBLD=cc"
for configure worked, I've got a working R again :-)

Other roadblocks I've encountered (and the reason I cc: r-devel):

-- ld/cc doesn't automatically include /usr/local/lib while gcc does.
This comes from the sytem installation here and has nothing to do with
R.  But having to add LIBS=-L/usr/local/lib may come as a surprise to
people who don't do this regularly.  Does configure check for the
existence of e.g. libz.a with cc or gcc?

-- the installation fails when I try to build in a special
subdirectory.  install-sh can't be found.  I've edited the Makefile to
use "build/tools/../$(INSTALL_DATA)".  (I guess build/$(INSTALL_DATA)
would be enough.)  I believe this worked on a sun.  Is this a
consequence of overriding install-sh on AIX in configure?

-- demo.so is not installed and demo(dyn.load) fails.  This is a
trivial matter if detected before 'rm -rf build' ...

-- there used to be a memory glitch when exiting R on AIX (and I think
Alpha).  This was fixed, but I now get this weird xmalloc statement
before startup:

$ echo "x <- 1; q()" | R BATCH
$ cat .R.Rout 

R : Copyright 2000, The R Development Core Team
Version 1.1.0 Under development (unstable) (March 27, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

[Previously saved workspace restored]

xmalloc: out of virtual memory
R> invisible(options(echo = TRUE))
R> x <- 1; q()


Thanks again for getting R running on AIX again,
  -tom



-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Mar 28 19:43:37 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 28 Mar 2000 13:43:37 -0500
Subject: [Rd] scale
Message-ID: <38E0FD59.CC4D2D16@bank-banque-canada.ca>

I am cleaning up a few pieces of my DSE library and I realized I am still
overriding scale to make it generic with the base version as the default. I use
scale methods for data objects which are not simple matrices. Could scale in the
base be made generic?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 28 20:06:15 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Mar 2000 21:06:15 +0200
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: Thomas J Vogels's message of "28 Mar 2000 13:24:09 -0500"
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu> <871z561pcm.fsf@bavaria.ece.cmu.edu> <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at> <8766uens46.fsf@bavaria.ece.cmu.edu> <14554.25111.847983.270127@aragorn.ci.tuwien.a
Message-ID: <x2og7ysymw.fsf@blueberry.kubism.ku.dk>

Thomas J Vogels <tov@ece.cmu.edu> writes:

> Alpha).  This was fixed, but I now get this weird xmalloc statement
> before startup:
> 
> $ echo "x <- 1; q()" | R BATCH
> $ cat .R.Rout 
> 
> R : Copyright 2000, The R Development Core Team
> Version 1.1.0 Under development (unstable) (March 27, 2000)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type    "?license" or "?licence" for distribution details.
> 
> R is a collaborative project with many contributors.
> Type    "?contributors" for a list.
> 
> Type    "demo()" for some demos, "help()" for on-line help, or
>         "help.start()" for a HTML browser interface to help.
> Type    "q()" to quit R.
> 
> [Previously saved workspace restored]
> 
> xmalloc: out of virtual memory
> R> invisible(options(echo = TRUE))
> R> x <- 1; q()

Hmm. What's in that previously saved workspace?  Can you zoom in a
little closer on where that error comes from?

(And note that the save bug is not actually fixed in R-devel yet -
will happen as soon as I merge in from the "release" branch)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Mar 29 07:30:54 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 29 Mar 2000 08:30:54 +0200 (MEST)
Subject: [Rd] scale
In-Reply-To: <38E0FD59.CC4D2D16@bank-banque-canada.ca>
References: <38E0FD59.CC4D2D16@bank-banque-canada.ca>
Message-ID: <14561.41758.916698.438279@lynne.ethz.ch>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> I am cleaning up a few pieces of my DSE library and I realized I
    PaulG> am still overriding scale to make it generic with the base
    PaulG> version as the default. I use scale methods for data objects
    PaulG> which are not simple matrices. Could scale in the base be made
    PaulG> generic?
it could..

      scale (x, center = TRUE, scale = TRUE)  

Is it okay to require the center and scale argument for all methods?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gs@statlab.uni-heidelberg.de  Wed Mar 29 13:27:58 2000
From: gs@statlab.uni-heidelberg.de (G. Sawitzki)
Date: Wed, 29 Mar 2000 14:27:58 +0200
Subject: [Rd] Porting R
Message-ID: <v03110700b507a5de3db8@[129.206.113.239]>

I am trying to get R 1.0 running on the Mac.

The main target is MacX. Anyone else working on that?

For the recent Macintosh system, I am trying to compile R using MachTen.
The R core compiles and runs without any changes, using the Unix make files.

The libraries give some problems, presumably due to handling of shared
libraries. It seems I am missing something to link. Before I spend my time
hunting it down, maybe someone has an immediate idea.
  gs.

 ==
my output:

make[4]: Entering directory `//local.src/R-1.0.0/src/library/ctest/src'
gcc -shared -Xlsharedlibrary -Xlexpall  -o ctest.so alnorm.o ansari.o
fexact.o kendall.o
 ks.o prho.o swilk.o  -L/usr/lib/gcc-lib/powerpc-apple-machten4/2.8.1 -lg2c -lm
ansari.o: In function `errmsg':
ansari.c:13: undefined reference to `Rf_error'
ansari.o: In function `w_init':
ansari.c:21: undefined reference to `R_chk_calloc'
...
ansari.c:84: undefined reference to `Rf_choose'
ansari.o: In function `pansari':
ansari.c:110: undefined reference to `Rf_choose'
fexact.o: In function `fexact':
...
kendall.c:24: undefined reference to `Rf_sign'
kendall.o: In function `ckendall':
kendall.c:99: undefined reference to `Rf_gammafn'
swilk.o: In function `swilk':
swilk.c:92: undefined reference to `Rf_qnorm5'
swilk.c:166: undefined reference to `Rf_sign'
...


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 29 14:20:30 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 2000 15:20:30 +0200
Subject: [Rd] Porting R
In-Reply-To: "G. Sawitzki"'s message of "Wed, 29 Mar 2000 14:27:58 +0200"
References: <v03110700b507a5de3db8@[129.206.113.239]>
Message-ID: <x2n1nhq5ep.fsf@blueberry.kubism.ku.dk>

"G. Sawitzki" <gs@statlab.uni-heidelberg.de> writes:

> I am trying to get R 1.0 running on the Mac.
.......
> The libraries give some problems, presumably due to handling of shared
> libraries. It seems I am missing something to link. Before I spend my time
> hunting it down, maybe someone has an immediate idea.
......
> make[4]: Entering directory `//local.src/R-1.0.0/src/library/ctest/src'
> gcc -shared -Xlsharedlibrary -Xlexpall  -o ctest.so alnorm.o ansari.o
> fexact.o kendall.o
>  ks.o prho.o swilk.o  -L/usr/lib/gcc-lib/powerpc-apple-machten4/2.8.1 -lg2c -lm
> ansari.o: In function `errmsg':
> ansari.c:13: undefined reference to `Rf_error'
> ansari.o: In function `w_init':
> ansari.c:21: undefined reference to `R_chk_calloc'

Hi Gunther,

I don't know whether it helps, but those unresolved references are
supposed to be there (they point to items in the main R binary) and be
resolved at dyn.load time. That is usually allowed when using the
-shared switch to gcc, although some systems (notably AIX and Win32)
require you use an explicit import library generated from the R
binary.

	-p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mc7414@mclink.it  Wed Mar 29 14:51:28 2000
From: mc7414@mclink.it (Stefano Iacus)
Date: Wed, 29 Mar 2000 15:51:28 +0200
Subject: [Rd] Porting R
In-Reply-To: <v03110700b507a5de3db8@[129.206.113.239]>
Message-ID: <200003291351.PAA06901@mail1.mclink.it>

Dear Sawiztki,

I'm also working on the porting of R 1.0 to MacOS. I'm in contact Ross
Ihaka and he thinks (and I agree) that we should use a cross platform
interface like  wxWindows (http://wxwindows.org). 

Let us know what you think about it.

Stefano

>I am trying to get R 1.0 running on the Mac.
>
>The main target is MacX. Anyone else working on that?
>
>For the recent Macintosh system, I am trying to compile R using MachTen.
>The R core compiles and runs without any changes, using the Unix make files.
>
>The libraries give some problems, presumably due to handling of shared
>libraries. It seems I am missing something to link. Before I spend my time
>hunting it down, maybe someone has an immediate idea.
>  gs.
>
> ==
>my output:
>
>make[4]: Entering directory `//local.src/R-1.0.0/src/library/ctest/src'
>gcc -shared -Xlsharedlibrary -Xlexpall  -o ctest.so alnorm.o ansari.o
>fexact.o kendall.o
> ks.o prho.o swilk.o  -L/usr/lib/gcc-lib/powerpc-apple-machten4/2.8.1
-lg2c -lm
>ansari.o: In function `errmsg':
>ansari.c:13: undefined reference to `Rf_error'
>ansari.o: In function `w_init':
>ansari.c:21: undefined reference to `R_chk_calloc'
>...
>ansari.c:84: undefined reference to `Rf_choose'
>ansari.o: In function `pansari':
>ansari.c:110: undefined reference to `Rf_choose'
>fexact.o: In function `fexact':
>...
>kendall.c:24: undefined reference to `Rf_sign'
>kendall.o: In function `ckendall':
>kendall.c:99: undefined reference to `Rf_gammafn'
>swilk.o: In function `swilk':
>swilk.c:92: undefined reference to `Rf_qnorm5'
>swilk.c:166: undefined reference to `Rf_sign'
>...
>
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gs@statlab.uni-heidelberg.de  Wed Mar 29 15:09:58 2000
From: gs@statlab.uni-heidelberg.de (G. Sawitzki)
Date: Wed, 29 Mar 2000 16:09:58 +0200
Subject: [Rd] Porting R
In-Reply-To: <x2n1nhq5ep.fsf@blueberry.kubism.ku.dk>
References: "G. Sawitzki"'s message of "Wed, 29 Mar 2000 14:27:58 +0200"
 <v03110700b507a5de3db8@[129.206.113.239]>
Message-ID: <v03110701b507bed61c1a@[129.206.113.239]>


>Hi Gunther,
>
>I don't know whether it helps, but those unresolved references are
>supposed to be there (they point to items in the main R binary) and be
>resolved at dyn.load time. That is usually allowed when using the
>-shared switch to gcc, although some systems (notably AIX and Win32)
>require you use an explicit import library generated from the R
>binary.
>
>	-p

.. so there may be already a prepared rule and config flag somewhere to
create this library? Which flag/option do I need?

 g.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar 29 15:31:06 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 29 Mar 2000 09:31:06 -0500
Subject: [Rd] scale
References: <38E0FD59.CC4D2D16@bank-banque-canada.ca> <14561.41758.916698.438279@lynne.ethz.ch>
Message-ID: <38E213AA.71514DDE@bank-banque-canada.ca>

Martin> Is it okay to require the center and scale argument for all
methods?

Unfortunately, no, not the way I have used it. (One of the ways I use it
is for a structure called TSdata that has two data matrices. I
eventually call the default with a center and scale for each matrix, but
the original call is scale(x, scale), where scale is a list with a
center and scale value for each matrix.) My methods always use the
argument scale, but not center.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 29 15:49:36 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 2000 16:49:36 +0200
Subject: [Rd] Porting R
In-Reply-To: "G. Sawitzki"'s message of "Wed, 29 Mar 2000 16:09:58 +0200"
References: <v03110700b507a5de3db8@[129.206.113.239]> <v03110701b507bed61c1a@[129.206.113.239]>
Message-ID: <x2k8ilq1a7.fsf@blueberry.kubism.ku.dk>

"G. Sawitzki" <gs@statlab.uni-heidelberg.de> writes:

> >Hi Gunther,
> >
> >I don't know whether it helps, but those unresolved references are
> >supposed to be there (they point to items in the main R binary) and be
> >resolved at dyn.load time. That is usually allowed when using the
> >-shared switch to gcc, although some systems (notably AIX and Win32)
> >require you use an explicit import library generated from the R
> >binary.
> >
> >	-p
> 
> .. so there may be already a prepared rule and config flag somewhere to
> create this library? Which flag/option do I need?

Yes, that is the question, but you need to either find someone who
knows machTen, or go through the man pages. Hmm, the following post
from comp.unix.machten doesn't bode too well (Mac-style dynload is
also discussed in
http://www.stat.umn.edu/~luke/xls/projects/dlbasics/dlbasics.html )

-----
 > in article 3852EB96.7A957BAA@uswest.net, Rob & Nancy Wade at rnwade@uswest.net
 wrote on 12/11/99 6:26 PM:
  
 > Anyone had any luck getting Tk installed on Machten?  I'm working with
 > Perl 5.005 and I can't compile with dynamic loading.
  
 Dynamic loading (in the usual Unix sense) doesn't work under MachTen.
 The closest to this is to use the shared libraries Mac-side; see pp.
 219-220 in the manual.
  

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Wed Mar 29 16:44:59 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 29 Mar 2000 10:44:59 -0500
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: Peter Dalgaard BSA's message of "28 Mar 2000 21:06:15 +0200"
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu> <871z561pcm.fsf@bavaria.ece.cmu.edu> <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at> <8766uens46.fsf@bavaria.ece.cmu.edu> <14554.25111.847983.270127@aragorn.ci.tuwien.a
Message-ID: <87r9ctzsp0.fsf@bavaria.ece.cmu.edu>


Peter,

ah, stupid me.  I've put the braces "back" into system.c to guard
write_history(), et voila, it works.  I was simply confused by the
error message showing up before the R prompt instead of the very
end...
Regards,
  -tom


Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Thomas J Vogels <tov@ece.cmu.edu> writes:
[snip]
> > xmalloc: out of virtual memory
> > R> invisible(options(echo = TRUE))
> > R> x <- 1; q()
> 
> Hmm. What's in that previously saved workspace?  Can you zoom in a
> little closer on where that error comes from?
> 
> (And note that the save bug is not actually fixed in R-devel yet -
> will happen as soon as I merge in from the "release" branch)

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gs@statlab.uni-heidelberg.de  Wed Mar 29 16:51:30 2000
From: gs@statlab.uni-heidelberg.de (G. Sawitzki)
Date: Wed, 29 Mar 2000 17:51:30 +0200
Subject: [Rd] Porting R
In-Reply-To: <x2k8ilq1a7.fsf@blueberry.kubism.ku.dk>
References: "G. Sawitzki"'s message of "Wed, 29 Mar 2000 16:09:58 +0200"
 <v03110700b507a5de3db8@[129.206.113.239]>
 <v03110701b507bed61c1a@[129.206.113.239]>
Message-ID: <v03110702b507d6429d3e@[129.206.113.239]>

At 16:49 +0200 29.03.2000, Peter Dalgaard BSA wrote:
#
>Yes, that is the question, but you need to either find someone who
>knows machTen, or go through the man pages.
Oh. I think I did both.

Hmm, the following post
>from comp.unix.machten doesn't bode too well (Mac-style dynload is
>also discussed in
>http://www.stat.umn.edu/~luke/xls/projects/dlbasics/dlbasics.html )
The relevant lines seem to be:
The Mac does not seem to allow a shared library to have unresolved symbols,
but you can handle references into an executable by linking the library
against the
executable. You also need to take some action to export external symbols;
fortunately this is easy. I have not yet explored what happens when files
are moved
around, search pat issues, and the like ****.

As a work around, I included the standard dynamic library in the core.
Seems to work.

Anyway there should not go too much effort into this. For now, MachTen is
only an intermediate step to go to MachX, which is the really interesting
thing.
 g.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Mar 29 17:13:45 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 29 Mar 2000 10:13:45 -0600
Subject: [Rd] A "stack" function
Message-ID: <6rwvmlrbye.fsf@franz.stat.wisc.edu>

I am using R in my undergraduate engineering statistics courses, in
which I am currently discussing one-way analysis of variance.  Many of
the data sets for the exercises or examples give the data in the form
on one column per treatment level.  To use the aov or lm functions
such data should be converted to one column with all the response
observations and a companion column with indicators of the treatment
level.

In Minitab this operation is called "stacking" columns and the command
to perform the operation is "stack".  I have written a similar function
for R.  Before taking the time to make it elegant and to document it,
I thought I would check if I have overlooked an existing way of doing
this.

Here is an example

> library(Devore5)
> data(ex10.09)
> boxplot(ex10.09)
> str(ex10.09)             # show the structure
`data.frame':	6 obs. of  4 variables:
 $ Wheat : num  5.2 4.5 6 6.1 6.7 5.8
 $ Barley: num  6.5 8 6.1 7.5 5.9 5.6
 $ Maize : num  5.8 4.7 6.4 4.9 6 5.2
 $ Oats  : num  8.3 6.1 7.8 7 5.5 7.2
> stack <- function(data)
+  data.frame(values = unlist(data),
+             lev = factor(rep(names(data), lapply(data, length))))

> stack(ex10.09)   # try it on the example
        values    lev
Wheat1     5.2  Wheat
Wheat2     4.5  Wheat
Wheat3     6.0  Wheat
Wheat4     6.1  Wheat
Wheat5     6.7  Wheat
Wheat6     5.8  Wheat
Barley1    6.5 Barley
Barley2    8.0 Barley
Barley3    6.1 Barley
Barley4    7.5 Barley
Barley5    5.9 Barley
Barley6    5.6 Barley
Maize1     5.8  Maize
Maize2     4.7  Maize
Maize3     6.4  Maize
Maize4     4.9  Maize
Maize5     6.0  Maize
Maize6     5.2  Maize
Oats1      8.3   Oats
Oats2      6.1   Oats
Oats3      7.8   Oats
Oats4      7.0   Oats
Oats5      5.5   Oats
Oats6      7.2   Oats
> fm1 <- lm(values ~ lev, stack(ex10.09))
> anova(fm1)
Analysis of Variance Table

Response: values
          Df  Sum Sq Mean Sq F value  Pr(>F)  
lev        3  8.9833  2.9944  3.9565 0.02293 *
Residuals 20 15.1367  0.7568                  
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 


-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Mar 29 17:16:37 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 29 Mar 2000 08:16:37 -0800 (PST)
Subject: [Rd] A "stack" function
In-Reply-To: <6rwvmlrbye.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.GSO.4.21.0003290814400.3570-100000@mail.biostat.washington.edu>

On 29 Mar 2000, Douglas Bates wrote:

> I am using R in my undergraduate engineering statistics courses, in
> which I am currently discussing one-way analysis of variance.  Many of
> the data sets for the exercises or examples give the data in the form
> on one column per treatment level.  To use the aov or lm functions
> such data should be converted to one column with all the response
> observations and a companion column with indicators of the treatment
> level.
> 
> In Minitab this operation is called "stacking" columns and the command
> to perform the operation is "stack".  I have written a similar function
> for R.  Before taking the time to make it elegant and to document it,
> I thought I would check if I have overlooked an existing way of doing
> this.
> 

It would be really nice if you could also do the reverse: take repeated
measurements in 'long' form and convert them into 'wide' form.
  In Stata both of these are available in the -reshape- command.  I don't
know any really simple way of doing it in R.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 29 17:42:05 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 2000 18:42:05 +0200
Subject: [Rd] A "stack" function
In-Reply-To: Thomas Lumley's message of "Wed, 29 Mar 2000 08:16:37 -0800 (PST)"
References: <Pine.GSO.4.21.0003290814400.3570-100000@mail.biostat.washington.edu>
Message-ID: <x28zz1pw2q.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> On 29 Mar 2000, Douglas Bates wrote:
> 
...
> > In Minitab this operation is called "stacking" columns and the command
> > to perform the operation is "stack".  I have written a similar function
> > for R.  Before taking the time to make it elegant and to document it,
> > I thought I would check if I have overlooked an existing way of doing
> > this.
> > 
> 
> It would be really nice if you could also do the reverse: take repeated
> measurements in 'long' form and convert them into 'wide' form.
>   In Stata both of these are available in the -reshape- command.  I don't
> know any really simple way of doing it in R.

Not really simple, but wouldn't something like
as.data.frame(tapply(x,f,as.vector)) do it? Hmmm... This seems to work;

> tt<-data.frame(c(tapply(ss$values,ss$lev,as.vector)))
> tt
  Barley Maize Oats Wheat
1    6.5   5.8  8.3   5.2
2    8.0   4.7  6.1   4.5
3    6.1   6.4  7.8   6.0
4    7.5   4.9  7.0   6.1
5    5.9   6.0  5.5   6.7
6    5.6   5.2  7.2   5.8

Re. stack(), wouldn't you want to stack over only a subset of columns,
while replicating all the remaining columns? There's some code in
subset() which might be used for selecting the columns.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Mar 29 17:37:29 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 29 Mar 2000 18:37:29 +0200
Subject: [Rd] pre summary: mapping of colornames into hsv?
In-Reply-To: <14560.48243.200487.325190@lynne.ethz.ch>
Message-ID: <000801bf999d$13c36170$a9021aac@joelschlaegel>



Hi Martin,
Great that you follow this. My original intention was to be able to
translate colornames to hsv because this would allow using colornames to cut
out a certain part of the colorwheel for colorcoding (HSV component H, see
my code below)

I think internally we might have colors represented as

Colornames, ColorIntegers, ColorHexcodes, ColorRGBs, ColorHSVs (ColorCMYs?)

however the R-user probably shouldn't see the internal ColorIntegers of the
C-code, as this might lead to confusion with the colornumbers resulting from
the palette settings.

So the R-user should see functions translating

ColorName2ColorHexcode() ColorHexcode2ColorRGB() and ColorRGB2ColorHSV()
and backwards
ColorHSV2ColorRGB() ColorRGB2ColorHexcode(), rather not
ColorHexcode2Colorname() as not every possible color is granted to have a
name.

Regards


Jens


P.S. the folowing function colorcode() I think is more general than
rainbow() in three aspects:
1) works also with not-equidistant colorcodings
2) works around the 'borders' of the colorwheel
3) works both directions along the colorwheel
With the above mentioned translation functions one could specify start= and
end= as colornames, which would make code more readable. Feel free to
include into R.

# 0 = red
# 1/6 = yellow
# 2/6 = green
# 3/6 = cyan
# 4/6 = blue
# 5/6 = violet
# go from red via yellow to green: start=0, stop=2/6
# go from green via yellow to red: start=2/6, stop=0
# go from green via cyan-blue-violet to red: start=2/6, stop=1
# go from red via violet-blue-cyan to green: start=0, stop=-4/6
colorcode <- function (p, start=0, end=2/6, s=1, v=1, ...)
{
   # make p 0..1
   r <- range(p)
   p <- (p - r[1])/diff(r)
   # wrap hue
   up <- start <= end
   start <- start %% 1
   end <- end %% 1
   if (up)
     if (start < end){
       h <- (start + p*(end-start)) %% 1
     }else{
       h <- (start + p*(1+end-start)) %% 1
     }
   else
     if (end < start){
       h <- (start - p*(start-end)) %% 1
     }else{
       h <- (start - p*(1+start-end)) %% 1
     }
   # round against bug if start=1 end=4/3 with p=seq(0, 1, 0.05)
   hsv( round(h, 5), s, v, ...)
}






> -----Original Message-----
> From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> Sent: Tuesday, March 28, 2000 4:07 PM
> To: jens.oehlschlaegel-akiyoshi@mdfactory.de
> Cc: R-core@stat.math.ethz.ch
> Subject: Re: [Rd] pre summary: mapping of colornames into hsv?
>
>
> >>>>> <jens.oehlschlaegel-akiyoshi@mdfactory.de> writes on
> Feb.28, 2000 :
>
>     Jens> etc/colors.big doesn't do the job currently, as:
>
>     Jens> colors.big maps 455 names to rgb in S syntax
>     Jens> rgb.txt maps 657 names to rgb in C syntax, but
> unlike colors() it has
>     Jens> mixed upper and lower case
>
>     Jens> The C source has the information twice
>     Jens> rgb.c maps 657 names to rgb (mixed upper and lower case)
>     Jens> graphics.c maps 657 names tp colorstrings (lower case only)
>
>     Jens> internal name2col() and R colors() accesses those
> in graphics.c
>
>     Jens> I tend to create a R representation which copies
> the info from
>     Jens> graphics.c, unless someone plans to export internal
> name2col() to
>     Jens> become an official R function, which of course
> would be a less
>     Jens> redundant solution.
>
> and a day later, Jens provided
>
>   .ColorDataBase <-  matrix(c(
>       "white",		"#FFFFFF",
>       "aliceblue",	"#F0F8FF",
>       "antiquewhite",	"#FAEBD7",
>       "antiquewhite1",	"#FFEFDB",
>       "antiquewhite2",	"#EEDFCC",
>       "antiquewhite3",	"#CDC0B0",
>       .............
>   ))
>
> Now, we should stand back for a moment and
> think about what functionality we should provide on the R level.
>
> I think we should use the internal accessor functions to ColorDataBase
> (in graphics.c) in order ensure consistency not to further
> duplicate the
> information.
>
> {{Guido: Jens is right that src/gnuwin32/graphapp/rgb.c
> 	 kind of replicates the table already available in
> src/main/graphics.c
>   should we separate out this definition from graphics.c
>   into a global src/main/rgb.c or something else
>   after which (most of) graphapp/rgb.c wouldn't be needed anymore ?
>   -- or just declare the tables in Graphics.h and use them in
> graphapp as well?
> }}
>
>
> Potential useful functions {from graphics.c} to be made
> available on the R
> level are
>
> hsv2rgb()   (h,s,v) |-> (r,g,b)
>
> rgb2hsv() does *NOT* exist in graphics.c ;
> 	  is it possible at all (i.e. is hsv <--> rgb 1:1 ?)}
>
> rgb2col(rgb_ch) |-> uint { := unsigned int }
> name2col  (ch)  |-> uint
> number2col(ch)  |-> uint
> str2col   (ch)  |-> uint {calling one of the above 3 functions !}
>
> RGB2rgb(r,g,b)  |-> #RRGGBB string
> col2name(uint)  |-> name from colors() or #RRGGBB string
>
> -------
> I would tend to provide only
>
> * str2col()  returning an R integer() {instead of uint;  the
> R color model
> 				      only needs the low order 24 bits,
> 				      see beginning of Graphics.h }
> * col2name()
>
> at first, but one might also want
>
>     uint <-->  (r,g,b) <-->  (h,s,v)
>
> o Further ideas ?
> o Are 24bit colors okay?
>   gnuwin32's graphapp seems to use "transparency"
>   additionally to 3x8 bit RGB {didn't look closely}
>
>
> Martin
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar 29 19:26:27 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 29 Mar 2000 13:26:27 -0500
Subject: [Rd] R CMD build
Message-ID: <38E24AD3.3B592196@bank-banque-canada.ca>

I've been trying "R CMD build" to build my packages because of the
various nice checks it does. Here are some questions/comments/problems.

1/ I get a WARNING about RD files without alias for (what seems like)
all my Rd files. I'm not sure if this is related to the fact that all my
functions are in one .R file.

2/ I get a warning about undocumented objects for all the specific
methods of generic functions. In many cases only the generic is
documented, so the warning is correct, but there are so many of them
that it tends to obscure more important warnings.

3/ It doesn't work with bundles.

4/ Checking for undocumented objects fails with an ERROR when checking
an (undocumented) assignment object ( "input.series.names<-" ).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 29 19:47:37 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 29 Mar 2000 19:47:37 +0100 (BST)
Subject: [Rd] R CMD build
In-Reply-To: <38E24AD3.3B592196@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10003291935170.23270-100000@auk.stats>

On Wed, 29 Mar 2000, Paul Gilbert wrote:

> I've been trying "R CMD build" to build my packages because of the
> various nice checks it does. Here are some questions/comments/problems.
> 
> 1/ I get a WARNING about RD files without alias for (what seems like)
> all my Rd files. I'm not sure if this is related to the fact that all my
> functions are in one .R file.

Well, are there \alias entries in the Rd files?  (The layout of the .R file
is immaterial: in the installed code all R functions are always in one
file.) `build' expects a \alias as well as a \name.

If the \alias are there, we may be hitting again problems with the 
different dialects of egrep and sed.  AFAIK the current version
behaves itself on Solaris 2.6/7 and on POSIX platforms.

> 2/ I get a warning about undocumented objects for all the specific
> methods of generic functions. In many cases only the generic is
> documented, so the warning is correct, but there are so many of them
> that it tends to obscure more important warnings.

The convention is to put a \alias for the method in the help file for the
generic.  R-core are divided on this point!  At least now the indices
(e.g. in HTML help and the LaTeX manual) will try to omit the methods.

> 3/ It doesn't work with bundles.

True, but it will check every package in a bundle.  The only bundle
I know of is VR, and that is built by a highly specific script.  If
(as your comment suggests) there is a need to build other bundles, we
can look into extending `build'.

> 4/ Checking for undocumented objects fails with an ERROR when checking
> an (undocumented) assignment object ( "input.series.names<-" ).

I think it works if you document it, though, and the error is correct,
surely?  Do you mean it gives ERROR and then stops rather than warns?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar 29 21:07:21 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 29 Mar 2000 15:07:21 -0500
Subject: [Rd] R CMD build
References: <Pine.GSO.4.05.10003291935170.23270-100000@auk.stats>
Message-ID: <38E26279.BC2A6400@bank-banque-canada.ca>

>Well, are there \alias entries in the Rd files?
No. I guess that would be it. Should I have an empty \alias entry if the
object does not have an alias, or should should I just live with the
warnings?

>The convention is to put a \alias for the method in the help file for
the generic.
Ok, but I guess this won't work if the generic is the base and my method
is in my library?

>If (as your comment suggests) there is a need to build other bundles,
we
>can look into extending `build'.
No, I don't think it is a priority. I was just point it out in case it
was suppose to work with bundles and I was hitting a bug. I'll run it to
test the packages in the bundle and roll up the bundle after.

>> 4/ Checking for undocumented objects fails with an ERROR when
checking
>> an (undocumented) assignment object ( "input.series.names<-" ).
>I think it works if you document it, though, and the error is correct,
>surely?  Do you mean it gives ERROR and then stops rather than warns?

Yes, it should warn me about this, but it gives ERROR and stops. (If I
run it with my makefile it returns code 1.) The message is:
in eval(expr, envir, enclos) : couldn't find function
"input.series.names<-"

Thanks,
Paul




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Wed Mar 29 21:34:04 2000
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Thu, 30 Mar 2000 08:34:04 +1200
Subject: [Rd] home in Sept
In-Reply-To: <v03110700b507a5de3db8@[129.206.113.239]>; from G. Sawitzki on Wed, Mar 29, 2000 at 02:27:58PM +0200
References: <v03110700b507a5de3db8@[129.206.113.239]>
Message-ID: <20000330083404.W26661@stat1.stat.auckland.ac.nz>

Hi Guenther,
  Are you going to be home in Sept? Can I still come and visit?
 I finally have made some decision about where I am going (and withdrew
 from the crazy thing at ETH). I'm off to Harvard some time in the fall,

  regards to you and Heidi,
    robert

-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              phone : (64-9) 3737-599 ext 3946          | 
| Senior Lecturer               fax :   (64-9) 3737-018                   |
| Department of Statistics      office : Room 206 Maths/Physics           |
| University of Auckland	email : rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Wed Mar 29 21:47:30 2000
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Thu, 30 Mar 2000 08:47:30 +1200
Subject: [Rd] home in Sept
In-Reply-To: <20000330083404.W26661@stat1.stat.auckland.ac.nz>; from Robert Gentleman on Thu, Mar 30, 2000 at 08:34:04AM +1200
References: <v03110700b507a5de3db8@[129.206.113.239]> <20000330083404.W26661@stat1.stat.auckland.ac.nz>
Message-ID: <20000330084730.Y26661@stat1.stat.auckland.ac.nz>

Well, boy do I feel stupid; I was sure that I had set that to 
mail only to Guenther.
Please disregard my impertinent comments regarding ETH, I apologize
especially to Martin for making them.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              phone : (64-9) 3737-599 ext 3946          | 
| Senior Lecturer               fax :   (64-9) 3737-018                   |
| Department of Statistics      office : Room 206 Maths/Physics           |
| University of Auckland	email : rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 29 22:41:39 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 2000 23:41:39 +0200
Subject: [Rd] home in Sept
In-Reply-To: Robert Gentleman's message of "Thu, 30 Mar 2000 08:47:30 +1200"
References: <v03110700b507a5de3db8@[129.206.113.239]> <20000330083404.W26661@stat1.stat.auckland.ac.nz> <20000330084730.Y26661@stat1.stat.auckland.ac.nz>
Message-ID: <x2bt3x314c.fsf@blueberry.kubism.ku.dk>

Robert Gentleman <rgentlem@stat.auckland.ac.nz> writes:

>  I will not put both feet in my mouth.
>  I will not trust *&%^$& mailers.

<grin> Good thing you didn't put `!!!' after that or Martin would have
had to approve it manually....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 29 22:53:16 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 2000 23:53:16 +0200
Subject: [Rd] home in Sept
In-Reply-To: Peter Dalgaard BSA's message of "29 Mar 2000 23:41:39 +0200"
References: <v03110700b507a5de3db8@[129.206.113.239]> <20000330083404.W26661@stat1.stat.auckland.ac.nz> <20000330084730.Y26661@stat1.stat.auckland.ac.nz> <x2bt3x314c.fsf@blueberry.kubism.ku.dk>
Message-ID: <x28zz130kz.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

[Well, never mind]

Aargh! Another one bites the dust... Please disregard note intended
for Rob and intended to be humourous. Failed on both counts,
obviously. Talking about putting your feet, hands, arms, and legs in
your mouth...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar 30 07:14:18 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 30 Mar 2000 07:14:18 +0100 (BST)
Subject: [Rd] R CMD build
In-Reply-To: <38E26279.BC2A6400@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10003300709540.23994-100000@auk.stats>

On Wed, 29 Mar 2000, Paul Gilbert wrote:

> >Well, are there \alias entries in the Rd files?
> No. I guess that would be it. Should I have an empty \alias entry if the
> object does not have an alias, or should should I just live with the
> warnings?

You should have an alias for each function documented there, even
if there is only one. The object name is itself an alias.  The \name field
is the help file name, not the object name (although 90+% of them are the
same), and it is the \alias's that gives the object names,

> >The convention is to put a \alias for the method in the help file for
> the generic.
> Ok, but I guess this won't work if the generic is the base and my method
> is in my library?

Sure (and that is part of the debate). Either ignore them, or have
a .Rd with just a very brief description of these (e.g. just their
usages).

> >> 4/ Checking for undocumented objects fails with an ERROR when
> checking
> >> an (undocumented) assignment object ( "input.series.names<-" ).
> >I think it works if you document it, though, and the error is correct,
> >surely?  Do you mean it gives ERROR and then stops rather than warns?
> 
> Yes, it should warn me about this, but it gives ERROR and stops. (If I
> run it with my makefile it returns code 1.) The message is:
> in eval(expr, envir, enclos) : couldn't find function
> "input.series.names<-"

Looks like a bug, then.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Mar 30 10:31:56 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 30 Mar 2000 11:31:56 +0200 (CEST)
Subject: [Rd] forwarded message from Griffith Feeney
Message-ID: <14563.7948.655308.693311@galadriel.ci.tuwien.ac.at>


--8sD16rPb6u
Content-Type: text/plain; charset=us-ascii
Content-Description: message body text
Content-Transfer-Encoding: 7bit


Griffith,

I'm forwarding the mail to r-devel.

Best,
Fritz


--8sD16rPb6u
Content-Type: message/rfc822
Content-Description: forwarded message
Content-Transfer-Encoding: 7bit

Received: from isildur.ci.tuwien.ac.at (root@isildur.ci.tuwien.ac.at [128.131.51.43])
	by fangorn.ci.tuwien.ac.at (8.9.3/8.9.3/Debian/GNU) with ESMTP id VAA22421
	for <wwwadmin@cran.r-project.org>; Wed, 29 Mar 2000 21:35:20 +0200
Received: from hawaii.rr.com (hnlmail2.hawaii.rr.com [24.25.227.35])
	by isildur.ci.tuwien.ac.at (8.9.3/8.9.3/Debian/GNU) with ESMTP id VAA14801
	for <wwwadmin@cran.r-project.org>; Wed, 29 Mar 2000 21:35:12 +0200
Received: from homebrew.hawaii.rr.com ([24.31.70.87]) by hawaii.rr.com  with Microsoft SMTPSVC(5.5.1877.447.44);
	 Wed, 29 Mar 2000 09:35:46 -1000
Message-Id: <3.0.5.32.20000329093550.007be910@pop-server.hawaii.edu>
X-Sender: gfeeney@pop-server.hawaii.edu
X-Mailer: QUALCOMM Windows Eudora Light Version 3.0.5 (32)
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
From: Griffith Feeney <gfeeney@hawaii.edu>
To: wwwadmin@isildur.ci.tuwien.ac.at
Subject: problem posting to r-help list
Date: Wed, 29 Mar 2000 09:35:50 -1000

I've tried twice to post the following message to the R-help list, but it
doesn't seem to get through. I pick up my mail at pop-server.hawaii.edu
(University of Hawaii) but work at home with cable internet connection so
send mail via smtp-server.hawaii.rr.com (because smpt-server.hawaii.edu
won't let me send messages coming from hawaii.rr.com). I use
gfeeney@hawaii.edu as my email address and normally have this as the return
address. Posting to R-help, however, messages are bounced unless I change
the return to address to feeneyg001@hawaii.rr.com. With this change they
don't bounce, but they don't seem to get through.



Attempting to build R-1.0.0 from source I get the following.

F:\rw1000\src\gnuwin32>make BUILD=MINGW32
mkdir -p ../../bin
F:/GCC-29~1.2/BIN/MAKE.EXE -C ./fixed
MAKE.EXE[1]: Entering directory `F:/rw1000/src/gnuwin32/fixed'
MAKE.EXE[1]: Nothing to be done for `all'.
MAKE.EXE[1]: Leaving directory `F:/rw1000/src/gnuwin32/fixed'
cp -pr unzip ../..
rm -f ../../unzip/*.h
Syntax error: Unterminated quoted string
F:\GCC-29~1.2\BIN\MAKE.EXE: *** [console.d] Error 2

By way of background, I am running Windows 95 4.00.950 and had, following
rw1000\src\gnuwin32\install file: 

1 installed mingw32 gcc-2.95.2 (MSVCRT) and put gcc-2.95.2\bin in the path;
2 installed cygwin user tools and put cygwin-b20\h-i586-cygwin32\bin in the
path;
3 [Perl5 was already installed and in the path];
4 'set MAKE_MODE=UNIX';
5 untarred R-1.0.0.tgz in f:\ and changed directory name from R-1.0.0 to
rw1000;
6 left rw1000\src\gnuwin32\MkRules unchanged;
7 edited rw1000\src\gnuwin32\Makefile to put WINHELP=NO;
8 created rw1000\unzip\ and copied unzip32.dll from binary distribution
into it;
9 ran make BUILD=MINGW32 with the result shown above.

The result ("Syntax error: Unterminated quoted string ... MAKE.EXE: ***
[console.d] Error 2")is the same whether I use the DOS shell or the cygwin
bash shell.

I'm just learning how to build from source and am insufficiently familiar
with make and makefiles to diagnose what's wrong and how to proceed. The
Note 2 statement that "the Makefiles do not work unchanged on all the
possible combinations of tools, compilers and OSes" is noted. Suggestions
on what to try next would be greatly appreciated.


--8sD16rPb6u--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Mar 30 11:18:51 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 30 Mar 2000 11:18:51 +0100 (BST)
Subject: [Rd] Re: problem posting to r-help list
Message-ID: <200003301018.LAA14214@toucan.stats.ox.ac.uk>

You are using the wrong make.  Please read the instructions very carefully.
You _must_ use the cygwin make with the supplied Makefiles. As INSTALL says:

   You will also
   need suitable versions of at least make, sh, rm, sed, (g)awk, mkdir,
   echo, cp, cut, diff, grep, egrep, pwd, expr and cat; we use those from
   the cygwin distribution (http://sourceware.cygnus.com/cygwin and
   several mirrors).


> From: Griffith Feeney <gfeeney@hawaii.edu>
> To: wwwadmin@isildur.ci.tuwien.ac.at
> Subject: problem posting to r-help list
> Date: Wed, 29 Mar 2000 09:35:50 -1000
> 
> Attempting to build R-1.0.0 from source I get the following.
> 
> F:\rw1000\src\gnuwin32>make BUILD=MINGW32
> mkdir -p ../../bin
> F:/GCC-29~1.2/BIN/MAKE.EXE -C ./fixed

Note, this is the mingw32 make (which I did not think was in the 
base mingw32 distribution).

> MAKE.EXE[1]: Entering directory `F:/rw1000/src/gnuwin32/fixed'
> MAKE.EXE[1]: Nothing to be done for `all'.
> MAKE.EXE[1]: Leaving directory `F:/rw1000/src/gnuwin32/fixed'
> cp -pr unzip ../..
> rm -f ../../unzip/*.h
> Syntax error: Unterminated quoted string
> F:\GCC-29~1.2\BIN\MAKE.EXE: *** [console.d] Error 2
> 
> By way of background, I am running Windows 95 4.00.950 and had, following
> rw1000\src\gnuwin32\install file: 
> 
> 1 installed mingw32 gcc-2.95.2 (MSVCRT) and put gcc-2.95.2\bin in the path;
> 2 installed cygwin user tools and put cygwin-b20\h-i586-cygwin32\bin in the
> path;

Put that ahead of 1 in your path!


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Mar 30 11:31:48 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 30 Mar 2000 11:31:48 +0100 (BST)
Subject: [Rd] AIX fails on startup with R-1.0.0
Message-ID: <200003301031.LAA18620@toucan.stats.ox.ac.uk>


> To: Kurt.Hornik@ci.tuwien.ac.at
> Cc: R-devel <r-devel@stat.math.ethz.ch>
> Subject: Re: [Rd] AIX fails on startup with R-1.0.0
> X-URI: http://www.ece.cmu.edu/~tov
> From: Thomas J Vogels <tov@ece.cmu.edu>
> Date: 28 Mar 2000 13:24:09 -0500

> Other roadblocks I've encountered (and the reason I cc: r-devel):
> 
> -- ld/cc doesn't automatically include /usr/local/lib while gcc does.
> This comes from the sytem installation here and has nothing to do with
> R.  But having to add LIBS=-L/usr/local/lib may come as a surprise to
> people who don't do this regularly.  Does configure check for the
> existence of e.g. libz.a with cc or gcc?

This is a common problem, and if libz is shared, building may work but
running may not (as you need /usr/local/lib in the shared library path).

BTW, recent gcc's (e.g. 2.95.2) seem to include prefix/lib not
/usr/local/lib which may come as even more of a surprise.
On Solaris 2.6 I need 

CPPFLAGS=-I/usr/local/include
LIBS="-L/usr/local/lib -R/usr/local/lib"

when using gcc 2.95.2, installed in /ext/gcc-2.95.2, and I always need the
second to cope with /usr/local/lib/libz.so.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 31 18:21:21 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 31 Mar 2000 19:21:21 +0200 (CEST)
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: <87r9cvgdh2.fsf@bavaria.ece.cmu.edu>
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu>
 <871z561pcm.fsf@bavaria.ece.cmu.edu>
 <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at>
 <8766uens46.fsf@bavaria.ece.cmu.edu>
 <14554.25111.847983.270127@aragorn.ci.tuwien.ac.at>
 <87u2hxl28l.fsf@bavaria.ece.cmu.edu>
 <200003270657.IAA01178@aragorn.ci.tuwien.ac.at>
 <87r9cvgdh2.fsf@bavaria.ece.cmu.edu>
Message-ID: <14564.56977.803778.800788@aragorn.ci.tuwien.ac.at>

>>>>> Thomas J Vogels writes:

> Kurt,

> thanks for your help.  Your suggestion to use "LDCMD=cc SHLIBLD=cc"
> for configure worked, I've got a working R again :-)

And got me confused.

Ideally, I'd like to use the C compiler (rather than ld) for linking the
main binary as well as shared libs, so overriding should only occur if
there is a good reason.  I assume that there was one for aix, but from
the above maybe it is gone now?

Users of current r-devel snapshots on AIX, can you confirm that

	MAINLD=cc SHLIBLD=cc /path/to/configure
	make

works o.k.?  (Or actually, use your C compiler rather than `cc' ...)

> Other roadblocks I've encountered (and the reason I cc: r-devel):

> -- ld/cc doesn't automatically include /usr/local/lib while gcc does.
> This comes from the sytem installation here and has nothing to do with
> R.  But having to add LIBS=-L/usr/local/lib may come as a surprise to
> people who don't do this regularly.

> Does configure check for the existence of e.g. libz.a with cc or gcc?
It uses the C compiler specified.

Well, LIBS is needed when you have things in `non-standard' locations.
Of course your mileage may vary on the definition of non-standard :-)

Is there anything I/configure could do about this?  (Note that I don't
think that unconditionally adding /usr/local/lib to LIBS is a good
idea.) 

> -- the installation fails when I try to build in a special
> subdirectory.  install-sh can't be found.  I've edited the Makefile to
> use "build/tools/../$(INSTALL_DATA)".  (I guess build/$(INSTALL_DATA)
> would be enough.)  I believe this worked on a sun.  Is this a
> consequence of overriding install-sh on AIX in configure?

I need more info on that.  configure does two fixing steps after using
the standard autoconf code for determining a BSD compatible install: if
we end up with the script, then make sure its path is absolute.  I think
this is needed and should work.  Secondly, on platforms where the code
was known to give something that would not work, use the script in any
case.  Maybe the latter can be avoided with the most recent autoconf
code.

What exactly is the failure you observe?

> -- demo.so is not installed and demo(dyn.load) fails.  This is a
> trivial matter if detected before 'rm -rf build' ...

Why is that?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Mar  1 11:13:03 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Wed, 1 Mar 2000 12:13:03 +0100 (MET)
Subject: [Rd] "is.qr" definition (PR#465)
Message-ID: <200003011113.MAA25485@pubhealth.ku.dk>

Might it be possible to tighten the definition of "is.qr".  I
noticed that after I mistakenly typed

example(lm)  # make lm object named lm.D9
qr.Q(lm.D9)

which exhausted the heap memory and produced two warning
messages.  As an object of class "lm" has a "qr" component,
"is.qr" failed to detect that "lm.D9" was not a "qr" object.  The
obvious thing might be to tighten the definition of "is.qr",
perhaps

"is.qr" <-
function(x) all(c("qr", "rank", "qraux", "pivot") %in% names(x))

And may I add my congratulations to the core group.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Patched
 major = 0
 minor = 99.0
 year = 2000
 month = February
 day = 9
 language = R

Search Path:
 .GlobalEnv, package:mva, package:patches, Autoloads, package:base


Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Mar  1 14:43:18 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 1 Mar 2000 15:43:18 +0100 (MET)
Subject: [Rd] "is.qr" definition (PR#465)
In-Reply-To: <200003011113.MAA25485@pubhealth.ku.dk>
References: <200003011113.MAA25485@pubhealth.ku.dk>
Message-ID: <14525.11398.674344.77690@lynne.ethz.ch>

>>>>> "JonR" == J C Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> Might it be possible to tighten the definition of "is.qr".  I
    JonR> noticed that after I mistakenly typed

    JonR> example(lm) # make lm object named lm.D9
    JonR>  qr.Q(lm.D9)

    JonR> which exhausted the heap memory and produced two warning
    JonR> messages.  As an object of class "lm" has a "qr" component,
    JonR> "is.qr" failed to detect that "lm.D9" was not a "qr" object.
indeed.
yes, it should be tightened.

    JonR> The obvious thing might be to tighten the definition of "is.qr",

    JonR> perhaps

    JonR> "is.qr" <- function(x) all(c("qr", "rank", "qraux", "pivot") %in%
    JonR> names(x))

Just checked: 
 S-plus 5.1 checks for  qr and qraux only (but not just for the presence of
 the names, also !is.null(.) as we now do for $qr.

It makes sense to have this a FAST function since it's called quite a few
times in some calculations... maybe change current
    is.qr <- function(x) is.null(x$qr)
to
    is.qr <- function(x) is.null(x$qr) && !is.null(x$rank) && !is.null(x$qraux)

The current behavior is "according to documentation" so that would have to
be updated as well.

    JonR> And may I add my congratulations to the core group.

thank you 

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bhoel@server.python.net  Wed Mar  1 17:12:57 2000
From: bhoel@server.python.net (bhoel@server.python.net)
Date: Wed, 1 Mar 2000 18:12:57 +0100 (MET)
Subject: [Rd] Re: R-1.0.0 is released (PR#466)
Message-ID: <200003011712.SAA01327@pubhealth.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> I've rolled up R-1.0.0.tgz a short while ago. 
> 
I've build R-1.0.0 on my

>uname -a
Linux pchoel 2.2.14 #3 Mit Jan 5 08:57:39 MET 2000 i686 unknown

box. Calling "make check" fails with 

...
make[4]: Entering directory `/opt/src/devel/R-1.0.0/tests/Examples'
updating base-Ex.R ...
make[5]: Entering directory `/opt/src/devel/R-1.0.0/src/library'
 >>> Building/Updating help pages for package `base'
     Formats: text example 
make[5]: Leaving directory `/opt/src/devel/R-1.0.0/src/library'
running code in base-Ex.R ...
../../bin/R --vanilla < base-Ex.R > base-Ex.Rout
make[4]: *** [base-Ex.Rout] Error 1
...

and 

>tail tests/Examples/base-Ex.Rout
> 
> cut(rep(1,5),4)#-- dummy
[1] (0.9995,1] (0.9995,1] (0.9995,1] (0.9995,1] (0.9995,1]
Levels:  (0.999,0.9995] (0.9995,1] (1,1.0005] (1.0005,1.001] 
> tx0 <- c(9, 4, 6, 5, 3, 10, 5, 3, 5)
> x <- rep(0:8, tx0)
> tx <- table(x)
> all(tx == tx0)
Error in all(tx == tx0) : dim<- length of dims do not match the length of object
Execution halted

Don't shure what I should think about it. 

my compiler is:

>gcc --version
2.95.2

R is compiled using the

"-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro -march=pentiumpro -fschedule-insns2"

compiler switches. I used 

./configure --with-g77 --enable-blas_risc --enable-readline --with-x

for configuring.

Cheers

Berthold

-- 
bhoel@starship.python.net / http://starship.python.net/crew/bhoel/
        It is unlawful to use this email address for unsolicited ads
        (USC Title 47 Sec.227). I will assess a US$500 charge for
        reviewing and deleting each unsolicited ad.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar  1 19:27:43 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 1 Mar 2000 20:27:43 +0100 (MET)
Subject: [Rd] Re: [R] Re: R-1.0.0 is released (PR#467)
Message-ID: <200003011927.UAA01880@pubhealth.ku.dk>

bhoel@server.python.net (Berthold Höllmann) writes:

> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
> 
> > I've rolled up R-1.0.0.tgz a short while ago. 
> > 
> I've build R-1.0.0 on my
> 
> >uname -a
> Linux pchoel 2.2.14 #3 Mit Jan 5 08:57:39 MET 2000 i686 unknown
> 
> box. Calling "make check" fails with 
....
> > all(tx == tx0)
> Error in all(tx == tx0) : dim<- length of dims do not match the length of object
> Execution halted
> 
> Don't shure what I should think about it. 
> 
> my compiler is:
> 
> >gcc --version
> 2.95.2
> 
> R is compiled using the
> 
> "-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro -march=pentiumpro -fschedule-insns2"
> 
> compiler switches. I used 
> 
> ./configure --with-g77 --enable-blas_risc --enable-readline --with-x
> 
> for configuring.

That's a pretty heavy set of optimization options you're using there!

Basically, there are two possibilities:

1) You've triggered a compiler bug
2) You've triggered a bug in R

In either case, you'll have to dig deeper and see if you can catch the
exact spot where things go wrong. You might start R with the debugger,
run the base-Ex.R with it while having a breakpoint set at the error
message you are getting. But before that try running the example that
triggers the bug by itself and see if the bug is still tickled.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar  1 19:40:48 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Mar 2000 20:40:48 +0100
Subject: [Rd] Re: [R] Re: R-1.0.0 is released (PR#467)
In-Reply-To: p.dalgaard@biostat.ku.dk's message of "Wed, 1 Mar 2000 20:27:43 +0100 (MET)"
References: <200003011927.UAA01880@pubhealth.ku.dk>
Message-ID: <x266v6cwcf.fsf@blueberry.kubism.ku.dk>

p.dalgaard@biostat.ku.dk writes:

...and notice that it is a very bad idea to mail to both r-help and
r-bugs. Anyone who answers the one on r-help without resetting the
Cc's will generate a new PR# , like I just did!

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu Mar  2 10:07:39 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Thu, 02 Mar 2000 11:07:39 +0100 (CET)
Subject: [Rd] Re: R-1.0.0 is released (PR#466)
In-Reply-To: <200003011712.SAA01327@pubhealth.ku.dk>
Message-ID: <XFMail.000302110739.plummer@iarc.fr>

On 01-Mar-00 bhoel@server.python.net wrote:
> R is compiled using the
> 
> "-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro
> -march=pentiumpro -fschedule-insns2"
> 
> compiler switches. I used 
> 
> ./configure --with-g77 --enable-blas_risc --enable-readline --with-x
> 
> for configuring.

I can't help noticing that you are configuring for a RISC optimized BLAS
library on an Intel x86 processor.  I have no idea if this is serious,
but it seems a bit odd.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu Mar  2 10:41:12 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Thu, 02 Mar 2000 11:41:12 +0100 (CET)
Subject: [Rd] Mathlib
Message-ID: <XFMail.000302114112.plummer@iarc.fr>

First of all I would like to join the chorus of approval over the release
of R 1.0.0.  It really is an excellent piece of software. I'm sure you
will astonish us again with Omega.

I have a query about Mathlib.  It is such a nice collection of functions
that it would be nice to use it in other software, not necessarily related
to R.  Is it possible to build Mathlib separately, and/or install the
shared object and the header file in a more public place?

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Mar  2 11:04:39 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 2 Mar 2000 11:04:39 +0000 (GMT)
Subject: [Rd] Mathlib
Message-ID: <200003021104.LAA06377@toucan.stats.ox.ac.uk>


> X-Priority: 3 (Normal)
> Date: Thu, 02 Mar 2000 11:41:12 +0100 (CET)
> From: Martyn Plummer <plummer@iarc.fr>
> To: R-devel@stat.math.ethz.ch
> Subject: [Rd] Mathlib
> 
> First of all I would like to join the chorus of approval over the release
> of R 1.0.0.  It really is an excellent piece of software. I'm sure you
> will astonish us again with Omega.
> 
> I have a query about Mathlib.  It is such a nice collection of functions
> that it would be nice to use it in other software, not necessarily related
> to R.  Is it possible to build Mathlib separately, and/or install the
> shared object and the header file in a more public place?

It has been possible. Note that the header file has a switch 

/*-- Mathlib as part of R --  undefine this for standalone : */
#define MATHLIB_IN_R

which controls whether R error handling is used.

Now, I suspect that it may not be totally in a state where it can be
used separately in 1.0.0, as this may well not have been tested 
recently. It did work at some stage between 0.90.1 and 0.99.0, as
I tested it during the API changes, but there have been a lot
of changes since, and at least two of those (log1p and pnorm5) have
failed in the standalone case when I tried just now.

The other problem is that some careful configuring would be needed for
the settings of e.g. ISNAN.

Is it worth trying to set up a configure script and Makefile.in to build
a standalone libnmath.a?   I suspect Martyn is suggesting that it is?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Mar  2 11:39:02 2000
From: gb@stat.umu.se (gb@stat.umu.se)
Date: Thu, 2 Mar 2000 12:39:02 +0100 (CET)
Subject: [Rd] Optimized blas?
In-Reply-To: <XFMail.000302110739.plummer@iarc.fr>
Message-ID: <Pine.LNX.4.10.10003021232510.10772-100000@pc16.stat.umu.se>

On Thu, 2 Mar 2000, Martyn Plummer wrote:

> On 01-Mar-00 bhoel@server.python.net wrote:
> > R is compiled using the
> > 
> > "-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro
> > -march=pentiumpro -fschedule-insns2"
> > 
> > compiler switches. I used 
> > 
> > ./configure --with-g77 --enable-blas_risc --enable-readline --with-x
> > 
> > for configuring.
> 
> I can't help noticing that you are configuring for a RISC optimized BLAS
> library on an Intel x86 processor.  I have no idea if this is serious,
> but it seems a bit odd.

Talking about that, is there an x86 optimized (for Linux and/or NT)
BLAS around somewhere?

Göran
----------------------------------------------------------
 Göran Broström                      tel: +46 90 786-5223
 Department of Statistics            fax: +46 90 786-6614
 Umeå University                                         
 SE-90187 Umeå, Sweden              email: gb@stat.umu.se
                                                        
 http://www.stat.umu.se/egna/gb    ftp://capa.stat.umu.se
----------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Mar  2 13:52:01 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 02 Mar 2000 07:52:01 -0600
Subject: [Rd] Optimized blas?
In-Reply-To: gb@stat.umu.se's message of "Thu, 2 Mar 2000 12:39:02 +0100 (CET)"
References: <Pine.LNX.4.10.10003021232510.10772-100000@pc16.stat.umu.se>
Message-ID: <qxpzoshscn2.fsf@verdi.stat.wisc.edu>

>>>>> "gb" == gb  <gb@stat.umu.se> writes:

  >> I can't help noticing that you are configuring for a RISC
  >> optimized BLAS library on an Intel x86 processor.  I have no idea
  >> if this is serious, but it seems a bit odd.

  gb> Talking about that, is there an x86 optimized (for Linux and/or
  gb> NT) BLAS around somewhere?

You can try atlas (http://www.netlib.org/atlas/). You will have to
download the source and build it on your machine if you want it to
work optimally. The problem with that is that it does not build the
shared libraries by default and the whole build process is rather
complicated. Also, you will have to patch the R-1.0.0 configure.in file
(I am attaching the patch below) and then run autoconf to generate the
configure file.

Even after you do all these, the performance benefit is not great. R
currently uses only level 1 blas and the most significant atlas
optimizations are for level 3 (and level 2 to some extant). I do not
think that it is worth the effort.

Note that this patch for autoconf is a hack borrowed from a hack on
the octave configure.in and I have tested this only on a debian x86
system.

Saikat

========================================================================
--- configure.in	Thu Mar  2 07:27:13 2000
+++ configure.in	Thu Mar  2 07:34:18 2000
@@ -126,6 +126,11 @@
     fi],
   use_blas_risc=true)
 
+AC_ARG_WITH(fastblas,
+  [  --with-fastblas         use an optimized BLAS library (if available)],
+  [ use_fastblas=${withval} ],
+  use_fastblas=true)
+
 AC_ARG_WITH(dxml,
   [  --with-dxml             use DXML library (if available)],
   [ if test "${withval}" = no; then
@@ -352,7 +357,42 @@
 if ${use_dxml}; then
   AC_CHECK_LIB(dxml, main, FLIBS="-ldxml ${FLIBS}" BLAS="")
 fi
-if test -n "${BLAS}" && ${use_blas}; then
+
+# ----------------------------------------------------------------------
+# Checks for BLAS and LAPACK libraries:
+
+# name of Fortran dgemm function to check for (depends upon F77 compiler
+# name-mangling scheme):
+if test "$r_cv_prog_f77_append_underscore" = "yes"; then
+  dgemm_func=dgemm_
+else
+  dgemm_func=dgemm
+fi
+
+# remember current FLIBS, so we can check if any libs were found below.
+blas_save_FLIBS="${FLIBS}"
+if test ${use_fastblas} = no; then
+  blas_save_FLIBS="different from $LIBS so tests fail below"
+elif test ${use_fastblas} != "yes"; then
+  # user specified a BLAS library to try on the command line
+  AC_CHECK_LIB($use_fastblas, $dgemm_func, 
+    [ BLAS="" FLIBS="-l$use_fastblas $FLIBS"], , ${FLIBS})
+fi
+
+if test "${blas_save_FLIBS}" = "${FLIBS}"; then
+  # Checks for ATLAS BLAS library:
+  AC_CHECK_LIB(atlas, ATL_xerbla,
+      [ FLIBS="-latlas ${FLIBS}"], , $FLIBS)
+  if test "${blas_save_FLIBS}" != "${FLIBS}"; then
+    # check for other atlas libs:
+    AC_CHECK_LIB(cblas, cblas_dgemm,
+      [ FLIBS="-lcblas ${FLIBS}"
+	AC_CHECK_LIB(f77blas, $dgemm_func, 
+	  [ BLAS="" FLIBS="-lf77blas ${FLIBS}"],
+	  [ FLIBS="{blas_save_FLIBS}"], $FLIBS)],
+	[ FLIBS="{blas_save_FLIBS}"], $FLIBS)
+  fi
+elif test -n "${BLAS}" && ${use_blas}; then
   AC_CHECK_LIB(blas, main,
     [ FLIBS="-lblas ${FLIBS}" BLAS=""
       if ${use_blas_risc}; then

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Mar  2 14:43:50 2000
From: gb@stat.umu.se (gb@stat.umu.se)
Date: Thu, 2 Mar 2000 15:43:50 +0100 (CET)
Subject: [Rd] R and lapack/linpack
In-Reply-To: <qxpzoshscn2.fsf@verdi.stat.wisc.edu>
Message-ID: <Pine.LNX.4.10.10003021516240.11160-100000@pc16.stat.umu.se>

On 2 Mar 2000, Saikat DebRoy wrote:

> >>>>> "gb" == gb  <gb@stat.umu.se> writes:
> 
>   >> I can't help noticing that you are configuring for a RISC
>   >> optimized BLAS library on an Intel x86 processor.  I have no idea
>   >> if this is serious, but it seems a bit odd.
> 
>   gb> Talking about that, is there an x86 optimized (for Linux and/or
>   gb> NT) BLAS around somewhere?
> 
> You can try atlas (http://www.netlib.org/atlas/). You will have to
> download the source and build it on your machine if you want it to
> work optimally. The problem with that is that it does not build the
> shared libraries by default and the whole build process is rather
> complicated. Also, you will have to patch the R-1.0.0 configure.in file
> (I am attaching the patch below) and then run autoconf to generate the
> configure file.
> 
> Even after you do all these, the performance benefit is not great. R
> currently uses only level 1 blas and the most significant atlas
> optimizations are for level 3 (and level 2 to some extant). I do not
> think that it is worth the effort.
[snip]

Thank you for the information. It looks as if it is of no big concern.
However, I can report that I found BLAS and LAPACK rpms as contribs for
RedHat, which is my brand of Linux. Maybe they are optimized.

That leads to a follow-up question about LAPACK. I am maintaining 
a larger, standalone  C  program, which uses (C)LAPACK and (C)BLAS 
(for a Newton-Raphson algorithm). I am currently working with 
transforming the  C  program into an  R  package. As I understands it,
R uses LINPACK and not LAPACK (why? historical reasons?), and I have
two options: (1) throw out LAPACK and use LINPACK supplied with  R,
or (2) keep the clapack routines I need in the C code of the  R 
library. 

I have tried (2), and it works, of course, but I am somehow tempted
by (1). Any recommendations?

Göran
----------------------------------------------------------
 Göran Broström                      tel: +46 90 786-5223
 Department of Statistics            fax: +46 90 786-6614
 Umeå University                                         
 SE-90187 Umeå, Sweden              email: gb@stat.umu.se
                                                        
 http://www.stat.umu.se/egna/gb    ftp://capa.stat.umu.se
----------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bacon@aerodyne.com  Thu Mar  2 15:36:46 2000
From: bacon@aerodyne.com (bacon@aerodyne.com)
Date: Thu, 2 Mar 2000 10:36:46 -0500 (EST)
Subject: [Rd] Re: R-1.0.0 is released (PR#466)
In-Reply-To: <XFMail.000302110739.plummer@iarc.fr>
Message-ID: <200003021527.KAA01933@aerodyne.com>

On  2 Mar, Martyn Plummer wrote:
>  On 01-Mar-00 bhoel@server.python.net wrote:
> > R is compiled using the
> > 
> > "-fPIC -O3 -fstrict-aliasing -ffast-math -funroll-loops -mpentiumpro
> > -march=pentiumpro -fschedule-insns2"
> > 
> > compiler switches. I used 
> > 
> > ./configure --with-g77 --enable-blas_risc --enable-readline --with-x
> > 
> > for configuring.
>  
>  I can't help noticing that you are configuring for a RISC optimized BLAS
>  library on an Intel x86 processor.  I have no idea if this is serious,
>  but it seems a bit odd.
>  

Since this feature was added for PowerPC Linux distributions at my
request, I'll comment on this.  I would say that it is very unlikely to
be of any help, but it probably won't hurt.  The configure script will
check to see if libblas_risc can be located.  If it can't be found, it
won't be used.  Configure won't even look for it unless you request it
with --enable-blas_risc.

Furthermore, I don't believe that configure will actually use
libblas_risc unless you also --enable-blas.  I could be wrong in that
regard.  Using --enable-blas_risc could implicitly --enable-blas as
well. It's been many months since I wrote that configure option.  I do
know that configure will test if linking -lblas works first.  If that
fails, it won't even bother with -lblas_risc.  

Hope this helps,

-- 
Fred Bacon

==============================================================================
Aerodyne Research, Inc.                        Phone:  (978) 663-9500 ext. 273
45 Manning Rd.                                   FAX:  (978) 663-4918
Billerica, MA 01821-3976                        http://www.aerodyne.com
==============================================================================
"Oh my God!  Space aliens!  Don't eat me, I have a wife and kids!  Eat them."
                                                             -- Homer Simpson


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bacon@aerodyne.com  Thu Mar  2 15:52:55 2000
From: bacon@aerodyne.com (bacon@aerodyne.com)
Date: Thu, 2 Mar 2000 10:52:55 -0500 (EST)
Subject: [Rd] Optimized blas?
In-Reply-To: <Pine.LNX.4.10.10003021232510.10772-100000@pc16.stat.umu.se>
Message-ID: <200003021543.KAA07526@aerodyne.com>

On  2 Mar, gb@stat.umu.se wrote:
>  On Thu, 2 Mar 2000, Martyn Plummer wrote:
>  
>  Talking about that, is there an x86 optimized (for Linux and/or NT)
>  BLAS around somewhere?

There is a superb package called ATLAS (Automatically Tuned Linear
Algebra Subroutines) which is available from 

http://www.netlib.org/atlas

A word of warning, building this runs an extensive series of tests on
your machine to configure ATLAS properly for your processor and and
cache.  The slower the machine, the longer the tests will take to
complete.  But the performance boost is incredible.  Large
matrix-matrix computations are 8-10 time faster than with the reference
blas from netlib.

Check it out.

-- 
Fred Bacon

==============================================================================
Aerodyne Research, Inc.                        Phone:  (978) 663-9500 ext. 273
45 Manning Rd.                                   FAX:  (978) 663-4918
Billerica, MA 01821-3976                        http://www.aerodyne.com
==============================================================================
"Oh my God!  Space aliens!  Don't eat me, I have a wife and kids!  Eat them."
                                                             -- Homer Simpson


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Mar  2 16:20:42 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 2 Mar 2000 08:20:42 -0800 (PST)
Subject: [Rd] Optimized blas?
In-Reply-To: <Pine.LNX.4.10.10003021232510.10772-100000@pc16.stat.umu.se>
Message-ID: <Pine.GSO.4.21.0003020816360.29932-100000@mail.biostat.washington.edu>

On Thu, 2 Mar 2000 gb@stat.umu.se wrote:

> 
> Talking about that, is there an x86 optimized (for Linux and/or NT)
> BLAS around somewhere?

There is a Pentium optimised BLAS around (from the ASCI project),see
http://www.beowulf.org/listarchives/beowulf/1998/03/0099.html
 Another poster has mentioned ATLAS. 

However, an optimised BLAS makes disappointing little difference to R,
partly because we don't spend that much time in BLAS and partly because we
only use the lowest-level routines.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Mar  2 20:59:40 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 02 Mar 2000 15:59:40 -0500
Subject: [Rd] congratulations and thanks
Message-ID: <38BED63C.C01199C5@bank-banque-canada.ca>

In the chorus, I would like to say congratulations and thanks to the core team.
As usual, I'm a bit out of sync.  After four year I especially like the part
about "the release of 1.0.0 marks that the base language and the API for
extension writers will remain stable" (even if I am already asking for changes).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Fri Mar  3 09:10:59 2000
From: hothorn@ci.tuwien.ac.at (hothorn@ci.tuwien.ac.at)
Date: Fri, 3 Mar 2000 10:10:59 +0100 (MET)
Subject: [Rd] using function names as parameters (PR#469)
Message-ID: <200003030910.KAA15280@pubhealth.ku.dk>

When using a function name as parameter, here date, the following happends: 

R> foo <- function(date=date()) cat(date, "\n")
R> foo()
Error in cat(date, "\n") : recursive default argument reference

R> foo("Good Morning!")
Good Morning!

works.

Torsten

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar  3 11:55:21 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Mar 2000 12:55:21 +0100
Subject: [Rd] using function names as parameters (PR#469)
In-Reply-To: hothorn@ci.tuwien.ac.at's message of "Fri, 3 Mar 2000 10:10:59 +0100 (MET)"
References: <200003030910.KAA15280@pubhealth.ku.dk>
Message-ID: <x2og8wi7yu.fsf@blueberry.kubism.ku.dk>

hothorn@ci.tuwien.ac.at writes:

> When using a function name as parameter, here date, the following happends: 
> 
> R> foo <- function(date=date()) cat(date, "\n")
> R> foo()
> Error in cat(date, "\n") : recursive default argument reference

This is not a bug. Default arguments are evaluated in the frame of the
called function, so when the date variable is requested and no actual
argument was supplied, R tries to evaluate the default expression, but
that involved the variable "date" again. If you pass an argument, the
default expression is never evaluated and the problem does not arise.

Similarly a definition like

function(x=y, y=x) x + y

is asking for trouble if both x and y are left unspecified on the call.

[This has nothing to do with passing functions as parameters, by the
way] 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Mar  3 12:10:19 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Fri, 3 Mar 2000 13:10:19 +0100 (MET)
Subject: [Rd] using function names as parameters (PR#469)
Message-ID: <200003031210.NAA18706@pubhealth.ku.dk>

>>>>> On 03 Mar 2000 12:55:21 +0100,
>>>>> Peter Dalgaard BSA (PDB) wrote:

PDB> hothorn@ci.tuwien.ac.at writes:
>> When using a function name as parameter, here date, the following happends: 
>> 
R> foo <- function(date=date()) cat(date, "\n")
R> foo()
>> Error in cat(date, "\n") : recursive default argument reference

PDB> This is not a bug. Default arguments are evaluated in the frame of the
PDB> called function, so when the date variable is requested and no actual
PDB> argument was supplied, R tries to evaluate the default expression, but
PDB> that involved the variable "date" again. If you pass an argument, the
PDB> default expression is never evaluated and the problem does not arise.

PDB> Similarly a definition like

PDB> function(x=y, y=x) x + y

PDB> is asking for trouble if both x and y are left unspecified on the call.

PDB> [This has nothing to do with passing functions as parameters, by the
PDB> way] 

[Taken to r-core]

Hmm, I asked Torsten to mail the bug report ... I first thought along
your lines and I would agree if I pass ``date'' as default, but we
have ``date()'' as default argument which is the return value of the
function, no?

IMO evaluating the default expression comes down to evaluating
``date <- date()'' which is perfectly legal ...

BTW, BB can do it:

S> foo <- function(date=date()) cat(date, "\n")
S> foo()
Fri Mar  3 09:49:20 MET 2000 
Warning messages:
  looking for function "date", ignored local non-function in: foo()


.f



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar  3 13:26:14 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 3 Mar 2000 14:26:14 +0100 (MET)
Subject: [Rd] using function names as parameters (PR#469)
Message-ID: <200003031326.OAA20028@pubhealth.ku.dk>

Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

> Hmm, I asked Torsten to mail the bug report ... I first thought along
> your lines and I would agree if I pass ``date'' as default, but we
> have ``date()'' as default argument which is the return value of the
> function, no?
> 
> IMO evaluating the default expression comes down to evaluating
> ``date <- date()'' which is perfectly legal ...
> 
> BTW, BB can do it:
> 
> S> foo <- function(date=date()) cat(date, "\n")
> S> foo()
> Fri Mar  3 09:49:20 MET 2000 
> Warning messages:
>   looking for function "date", ignored local non-function in: foo()

However,

> foo <- function(date=date) date             
> foo() 
Error in foo(): Recursive occurrence of default argument "date"
Dumped

So S-plus only works by assuming that the local variable is not a
function (*before* evaluating its default)! R is being cleaner and
more consistent..

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Mar  3 16:07:37 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 3 Mar 2000 17:07:37 +0100 (CET)
Subject: [Rd] StatDataML
Message-ID: <14527.58185.135296.986847@galadriel.ci.tuwien.ac.at>


Hi,

we have a first draft of R functions reading/writing data to XML files
including a rather general DTD ... which borrows heavily from the data
types of a certain programming language :-)

The basic idea is to create an XML standard for data exchange,
together with import/export functions for as many applications as
possible. We here will need R, Matlab & Octave for our research
program, but the idea is of course to create a general standard.

After looking in several other applications we think that all the data
types there can easily be represented using S constructs (i.e., arrays
and lists together with attributes) ... so why make life complicated
and invent something new.

Of course this only applies to the low-level representaion ... the
real thing will come next when one starts defining higher level
classes, this step we have avoided so far because one needs the
low-level things first to have something to play with.

A short description of the DTD and an R package with import/export
functions can be found at

	http://www.ci.tuwien.ac.at/~leisch/R

(Modulo some bugs) R data objects can be saved/restored without loss
of information. We don't intend to cover functions or models yet.

All comments and ideas are appreciated! This is just a proposal and
anything can still be changed ... 

Best,
Fritz

PS: Almost all the work has been done by Torsten Hothorn, I'm just
writing the email ;-)

-- 
-------------------------------------------------------------------
                        Friedrich  Leisch 
Institut für Statistik                     Tel: (+43 1) 58801 10715
Technische Universität Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstraße 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Fri Mar  3 16:15:46 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Fri, 3 Mar 2000 11:15:46 -0500 (EST)
Subject: [Rd] StatDataML
Message-ID: <200003031615.LAA12407@jessie.research.bell-labs.com>



Great. Will take a closer look.

Did you take a look at the DTDs in Omegahat - $OMEGA_HOME/XML/DTDs?
There are some things in there that might prove useful. Because
of its reference-oriented style, things like connected/linked observations,
etc. arise more naturally than in S-like languages. 

D.





-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar  3 16:34:29 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 3 Mar 2000 08:34:29 -0800 (PST)
Subject: [Rd] backup signal
In-Reply-To: <001501bf82a6$f1001640$b1eb92c1@unirioja.es>
Message-ID: <Pine.GSO.4.21.0003030833040.20733-100000@mail.biostat.washington.edu>

On Tue, 29 Feb 2000, Manuel Castejon Limas wrote:

> Hi all Is there any signal that one can send in UNIX to R so that it
> stops its execution in a safe way, (like save.image()  and q() ) so
> that the enviroment is not erased, instead of kill -9 somePID

This has been implemented in the current development version, so that
SIGUSR1 quits and saves, SIGUSR2 quits and saves without running
on.exit() or .Last().

However, the signals may get repossessed for exception handling at some
point in the future, so it would be unwise to plan for this feature
remaining.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From David James <dj@research.bell-labs.com>  Fri Mar  3 21:36:36 2000
From: David James <dj@research.bell-labs.com> (David James)
Date: Fri, 3 Mar 2000 16:36:36 -0500 (EST)
Subject: [Rd] Re: [Omega-devel] StatDataML
Message-ID: <200003032136.QAA20959@jessie.research.bell-labs.com>

Hi,

I just had a very quick look at the StatDataML proposal --- nice
work!   At the risk of showing my ignorance, I want to mention 
my first impressions.

My first impression is that defining datasets in terms of
arrays and list is a bit too high a level.  What about 
simpler vectors, scalars? (I know that R/S don't have scalars,
but other systems/applications do.)  Can we think of a core
set of "basic" data types (factors, strings, integers, etc.)
from which to build on other, possibly recursive types (perhaps
similar to corba's IDL basic data types or S's datadump?).  
Would it make sense to imagine, say xlispstat/python/java applications 
reading  and interpreting an StatDataML document without serious difficulties? 

My gut feeling (which is often wrong) is that the DTD should make
the data self-describing:  e.g., the factor "machineId" has 
levels (or defining set) "Stepper1", "Stepper2", ... "Stepper20", 
eventhough the particular dataset at hand has only a
subset of those.  Similarly, perhaps allowing  units and classes
to be included in the dataset (in the case of currency, it is certainly 
a number, perhaps single precision, perhaps not, with specific units 
dollars, euros, pesos, etc.)

More long-term, how about application-defined data?  Application may have
it's own set of data objects that fully exploits contextual 
information that could be extremely useful to capture and 
communicate.  Also, do the data have to be in ASCII format?  What about 
(possibly mime-encoded) images? sound?

As I mentioned, these are questions coming from my lack of experience
with XML, but may be worth raising now better than later :-)

David A. James
Statistics Research, Room 2C-253            Phone:  (908) 582-3082       
Bell Labs, Lucent Technologies              Fax:    (908) 582-3340
Murray Hill, NJ 09794-0636
-----------------------------------------------------------------------------

> From: Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
> MIME-Version: 1.0
> Content-Transfer-Encoding: 8bit
> Date: Fri, 3 Mar 2000 17:07:37 +0100 (CET)
> To: omega-devel@omegahat.org, r-devel@R-project.org, 
Erich.Neuwirth@univie.ac.at, hothorn@ci.tuwien.ac.at, baier@ci.tuwien.ac.at, 
Christian.Buchta@wu-wien.ac.at
> Subject: [Omega-devel] StatDataML
> X-Mailman-Version: 1.0rc2
> List-Id: Developers of Omega <omega-devel.www.omegahat.org>
> X-BeenThere: omega-devel@www.omegahat.org
> 
> 
> Hi,
> 
> we have a first draft of R functions reading/writing data to XML files
> including a rather general DTD ... which borrows heavily from the data
> types of a certain programming language :-)
> 
> The basic idea is to create an XML standard for data exchange,
> together with import/export functions for as many applications as
> possible. We here will need R, Matlab & Octave for our research
> program, but the idea is of course to create a general standard.
> 
> After looking in several other applications we think that all the data
> types there can easily be represented using S constructs (i.e., arrays
> and lists together with attributes) ... so why make life complicated
> and invent something new.
> 
> Of course this only applies to the low-level representaion ... the
> real thing will come next when one starts defining higher level
> classes, this step we have avoided so far because one needs the
> low-level things first to have something to play with.
> 
> A short description of the DTD and an R package with import/export
> functions can be found at
> 
> 	http://www.ci.tuwien.ac.at/~leisch/R
> 
> (Modulo some bugs) R data objects can be saved/restored without loss
> of information. We don't intend to cover functions or models yet.
> 
> All comments and ideas are appreciated! This is just a proposal and
> anything can still be changed ... 
> 
> Best,
> Fritz
> 
> PS: Almost all the work has been done by Torsten Hothorn, I'm just
> writing the email ;-)
> 
> -- 
> -------------------------------------------------------------------
>                         Friedrich  Leisch 
> Institut für Statistik                     Tel: (+43 1) 58801 10715
> Technische Universität Wien                Fax: (+43 1) 58801 10798
> Wiedner Hauptstraße 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
> A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
>      PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
> -------------------------------------------------------------------
> 
> 
> _______________________________________________
> Omega-devel maillist  -  Omega-devel@www.omegahat.org
> http://www.omegahat.org/mailman/listinfo/omega-devel


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Mar  3 22:01:31 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 03 Mar 2000 17:01:31 -0500
Subject: [Rd] StatDataML
References: <14527.58185.135296.986847@galadriel.ci.tuwien.ac.at>
Message-ID: <38C0363B.DDB2AEA6@bank-banque-canada.ca>

Fritz

Could you compare/contrast this a bit with NetCDF and  the UN/EDIFACT General
Statistical Message (GESMES ). I know almost nothing about NetCDF, but from the
little I know it seems to attempt to do a similar thing. I know a bit more about
Gesmes, and there seems to be a lot of overlap with what you are proposing.

Ten years ago, given the number of governments and organization involved, it
would have been easy to say go ahead and do something that we can use sooner (in
fact, we did). However, Gesmes is relatively advanced now, with several groups
working on implementations of a least parts of it, and governments committed to
exchanging data using it. A GNU implementation would be a real benefit to a lot
of tax payers around the world, not to mention the statistics community.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Sat Mar  4 10:55:58 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Sat, 4 Mar 2000 11:55:58 +0100 (CET)
Subject: [Rd] StatDataML
In-Reply-To: <38C0363B.DDB2AEA6@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.21.0003041145450.8684-100000@boromir.ci.tuwien.ac.at>


On Fri, 3 Mar 2000, Paul Gilbert wrote:

> Fritz
> 
> Could you compare/contrast this a bit with NetCDF and  the UN/EDIFACT General
> Statistical Message (GESMES ). I know almost nothing about NetCDF, but from the
> little I know it seems to attempt to do a similar thing. I know a bit more about
> Gesmes, and there seems to be a lot of overlap with what you are proposing.
> 

I just had a short (!) look at the description of the data model and the
user guide for GESMES at http://www.ecb.int/stats/gesmes/gesmes.htm

For me it looks biased to banking problems and very dataframe/array
centric.  

> Ten years ago, given the number of governments and organization involved, it
> would have been easy to say go ahead and do something that we can use sooner (in
> fact, we did). 

The problem I see is that GESMES would probably be to complicated, think
of exchanging data via CORBA, which is easy (and, in our opinion,
efficient) with XML structured strings. 

> However, Gesmes is relatively advanced now, with several groups
> working on implementations of a least parts of it, and governments committed to
> exchanging data using it. A GNU implementation would be a real benefit to a lot
> of tax payers around the world, not to mention the statistics community.
> 

agree, free software is always a benefit :-) 

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Sat Mar  4 13:41:51 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Sat, 4 Mar 2000 13:41:51 +0000 (GMT)
Subject: [Rd] StatDataML
In-Reply-To: <14527.58185.135296.986847@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.20.0003041325420.12572-100000@laplace>

Hi Fritz,

Interesting proposal!  If I may second your comment "Note: Move dimension
and/or dimnames to properties list?", which I think ties in with David
James's point.  My feeling is that it be better to operate at a slightly
lower level and represent array-type constructions as properties of simple
numeric or character vectors, ie very much the way that R does anyway.  
Presumably it would be possible to make a property a recursive structure,
such as a list of dimnames?  (I am not very XML-literate.)

If I might also comment on Paul Gilbert's point about existing alternative
standards.  Our experience with one of our commerical partners suggests
that parsers for R dput objects into XML will be written, if they do not
already exist.  Whatever its shortcomings, XML seems to be here to stay,
and I think the development of a set of R tools at this stage will allow
us to attempt some degree of standardisation.

Best wishes, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcneney@cs.sfu.ca  Sat Mar  4 18:23:52 2000
From: mcneney@cs.sfu.ca (Brad McNeney)
Date: Sat, 4 Mar 2000 10:23:52 -0800 (PST)
Subject: [Rd] problem with glm (PR#452)
In-Reply-To: <x2snyogipc.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.OSF.4.21.0003041022320.263210-100000@smahlt.math.sfu.ca>

I looked into the glm problem some more. Seems to be a memory problem that
occurs just after garbage collection. The easiest way for me to
reproduce  the error is in lapply. I take a list and ask lapply to provide
the descriptive stat summary. I do this several times with the same list.
Most often it gives the correct summary, but just after allocSExp calls
R_gc, one of the summaries for a list element will be NULL. 

E.g for a data frame dat with five columns I get the following (having added
print statements in summary.default and in allocSExp just after the test
for whether gc is necessary):

> lapply(as.list(dat), summary, maxsum = maxsum)
[1] "exiting summary.default"
R_FreeSEXP == NULL  
[1] "exiting summary.default"
[1] "exiting summary.default"
[1] "exiting summary.default"
[1] "exiting summary.default"
$Delta
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   0.00    1.00    1.00    1.19    2.00    2.00 

$D
NULL

$R
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   0.00    1.00    1.00    0.86    1.00    1.00 

$V
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
0.004552 0.740700 1.575000 1.754000 3.205000 3.390000 

$X
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    0.0     0.0     0.5     0.5     1.0     1.0 


I don't know if the following is relevant, but for some reason I've found 
I can avoid this particular problem if I make a small change in lapply in 
its main loop.  Around line 50 of apply.c:

    PROTECT(ans = allocVector(VECSXP, n));
    for(i = 0; i < n; i++) {
        INTEGER(ind)[0] = i + 1;
        VECTOR(ans)[i] = eval(R_fcall, rho);
    }

if I change it to make an assignment to a
temporary variable first everything seems to work fine:

    PROTECT(ans = allocVector(VECSXP, n));
    for(i = 0; i < n; i++) {
        INTEGER(ind)[0] = i + 1;
        tem = eval(R_fcall, rho);
        VECTOR(ans)[i] = tem;
    }

hasn't given me any NULLs yet. 



On 20 Feb 2000, Peter Dalgaard BSA wrote:

> Brad McNeney <mcneney@cs.sfu.ca> writes:
> 
> > I'll see what I can do about getting a more reproducible error. 
> > 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Mar  5 00:03:15 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Mar 2000 01:03:15 +0100
Subject: [Rd] problem with glm (PR#452)
In-Reply-To: Brad McNeney's message of "Sat, 4 Mar 2000 10:23:52 -0800 (PST)"
References: <Pine.OSF.4.21.0003041022320.263210-100000@smahlt.math.sfu.ca>
Message-ID: <x2putauvuk.fsf@blueberry.kubism.ku.dk>

Brad McNeney <mcneney@cs.sfu.ca> writes:

> I don't know if the following is relevant, but for some reason I've found 
> I can avoid this particular problem if I make a small change in lapply in 
> its main loop.  Around line 50 of apply.c:
> 
>     PROTECT(ans = allocVector(VECSXP, n));
>     for(i = 0; i < n; i++) {
>         INTEGER(ind)[0] = i + 1;
>         VECTOR(ans)[i] = eval(R_fcall, rho);
>     }
> 
> if I change it to make an assignment to a
> temporary variable first everything seems to work fine:
> 
>     PROTECT(ans = allocVector(VECSXP, n));
>     for(i = 0; i < n; i++) {
>         INTEGER(ind)[0] = i + 1;
>         tem = eval(R_fcall, rho);
>         VECTOR(ans)[i] = tem;
>     }
> 
> hasn't given me any NULLs yet. 

Now that is pretty darn odd... Looks quite a bit like a compiler bug.
Those two pieces of code should be equivalent as far as I can see.

One thing that you might do: objdump -dS apply.o allows you to see
what code the compiler generates for the two cases. Also, of course,
you can try reducing the level of optimization.


Alternatively, the mere addition of "tem" changes the local memory use
of that function so that something that got clobbered before doesn't
get clobbered now.

The effect doesn't seem to be present on Intels:

> dfr<-do.call("data.frame",lapply(1:100,function(i)rnorm(100)))
> any(sapply(lapply(dfr,summary),is.null))
[1] FALSE

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Mar  5 10:04:44 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 5 Mar 2000 11:04:44 +0100
Subject: [Rd] Mathlib
In-Reply-To: <200003021104.LAA06377@toucan.stats.ox.ac.uk>
References: <200003021104.LAA06377@toucan.stats.ox.ac.uk>
Message-ID: <200003051004.LAA25042@fangorn.ci.tuwien.ac.at>

>>>>> Prof Brian Ripley writes:

>> X-Priority: 3 (Normal)
>> Date: Thu, 02 Mar 2000 11:41:12 +0100 (CET)
>> From: Martyn Plummer <plummer@iarc.fr>
>> To: R-devel@stat.math.ethz.ch
>> Subject: [Rd] Mathlib
>> 
>> First of all I would like to join the chorus of approval over the release
>> of R 1.0.0.  It really is an excellent piece of software. I'm sure you
>> will astonish us again with Omega.
>> 
>> I have a query about Mathlib.  It is such a nice collection of functions
>> that it would be nice to use it in other software, not necessarily related
>> to R.  Is it possible to build Mathlib separately, and/or install the
>> shared object and the header file in a more public place?

> It has been possible. Note that the header file has a switch 

> /*-- Mathlib as part of R --  undefine this for standalone : */
> #define MATHLIB_IN_R

> which controls whether R error handling is used.

> Now, I suspect that it may not be totally in a state where it can be
> used separately in 1.0.0, as this may well not have been tested 
> recently. It did work at some stage between 0.90.1 and 0.99.0, as
> I tested it during the API changes, but there have been a lot
> of changes since, and at least two of those (log1p and pnorm5) have
> failed in the standalone case when I tried just now.

> The other problem is that some careful configuring would be needed for
> the settings of e.g. ISNAN.

> Is it worth trying to set up a configure script and Makefile.in to build
> a standalone libnmath.a?   I suspect Martyn is suggesting that it is?

In a way, this had always been the plan, so I would say yes it is worth
the trouble.

One issue is the naming issue.  I'd still recommend `Rmath'.  We should
also try to standardized the header file procedure.  (E.g., by declaring
#include <Rmath.h> as the official way ...)

Most likely, this would require setting up a second configure.in in the
Rmath (nmath) srcdir, but that shouldn't be to hard ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Mar  6 11:27:25 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 6 Mar 2000 12:27:25 +0100 (CET)
Subject: [Rd] Re: [Omega-devel] StatDataML
In-Reply-To: <200003032136.QAA20959@jessie.research.bell-labs.com>
References: <200003032136.QAA20959@jessie.research.bell-labs.com>
Message-ID: <14531.38429.238420.501197@galadriel.ci.tuwien.ac.at>


>>>>> On Fri, 3 Mar 2000 16:36:36 -0500 (EST),
>>>>> David James (DJ) wrote:

DJ> Hi,
DJ> I just had a very quick look at the StatDataML proposal --- nice
DJ> work!   At the risk of showing my ignorance, I want to mention 
DJ> my first impressions.

DJ> My first impression is that defining datasets in terms of
DJ> arrays and list is a bit too high a level.  What about 
DJ> simpler vectors, scalars? (I know that R/S don't have scalars,
DJ> but other systems/applications do.)  Can we think of a core
DJ> set of "basic" data types (factors, strings, integers, etc.)
DJ> from which to build on other, possibly recursive types (perhaps
DJ> similar to corba's IDL basic data types or S's datadump?).

Hmm, basically we have that ... just that I don't see why it's
necessary to differentiate between a vector (=1-dimensional array) and
higher dimensions, i.e., introduce different tags for it. But if many
others feel like this is necessary: I don't have s trong opinion about
it, we just wanted to keep the thing as simple as possible.

Regarding data types: Torsten and I just discussed that we want to
keep the mode of an array as abstract as possible such that
applications can use the internal representation that fits the data
best.

IMO the following modes will be necessary to represent statistical
data:

logical, nominal, ordinal, integer, real, complex



DJ> Would it make sense to imagine, say xlispstat/python/java applications 
DJ> reading  and interpreting an StatDataML document without serious difficulties? 

Sure! What's the difference?


DJ> My gut feeling (which is often wrong) is that the DTD should make
DJ> the data self-describing:  e.g., the factor "machineId" has 
DJ> levels (or defining set) "Stepper1", "Stepper2", ... "Stepper20", 
DJ> eventhough the particular dataset at hand has only a
DJ> subset of those.  Similarly, perhaps allowing  units and classes
DJ> to be included in the dataset (in the case of currency, it is certainly 
DJ> a number, perhaps single precision, perhaps not, with specific units 
DJ> dollars, euros, pesos, etc.)

DJ> More long-term, how about application-defined data?  Application may have
DJ> it's own set of data objects that fully exploits contextual 
DJ> information that could be extremely useful to capture and 
DJ> communicate.

We definitely need (and want) any user to be able to exctend
StatDataML, i.e., define new classes. There should be a set of
standard classes (like dataframe or time series), but also interfaces
for defining new classes.

The current idea (in R) is to have the following: If the SDML object
has a class and there exists a conversion function for that particular
class then use it, otherwise do the default thing.

The conversion function shouldn't do to much, probably mostly renaming
some slots and re-organizing the structure (as claases on different
systems will probably have different structures).



DJ> Also, do the data have to be in ASCII format?  What about 
DJ> (possibly mime-encoded) images? sound?

Hmm, haven't thought about that yet. 


DJ> As I mentioned, these are questions coming from my lack of experience
DJ> with XML, but may be worth raising now better than later :-)

YES!!! That's why we called it ``proposal'' rather than
``StatDataML version 1.0'' :-)

Best,
Fritz

PS: We are also no XML experts!

-- 
-------------------------------------------------------------------
                        Friedrich  Leisch 
Institut für Statistik                     Tel: (+43 1) 58801 10715
Technische Universität Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstraße 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Mar  6 11:35:11 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 6 Mar 2000 12:35:11 +0100 (CET)
Subject: [Rd] Re: [Omega-devel] StatDataML
In-Reply-To: <14531.38429.238420.501197@galadriel.ci.tuwien.ac.at>
References: <200003032136.QAA20959@jessie.research.bell-labs.com>
 <14531.38429.238420.501197@galadriel.ci.tuwien.ac.at>
Message-ID: <14531.38895.432529.339700@galadriel.ci.tuwien.ac.at>

>>>>> On Mon, 6 Mar 2000 12:27:25 +0100 (CET),
>>>>> Friedrich Leisch (FL) wrote:


FL> IMO the following modes will be necessary to represent statistical
FL> data:

FL> logical, nominal, ordinal, integer, real, complex

Sorry, forgot character.

.fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Mar  6 11:39:25 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Mon, 6 Mar 2000 12:39:25 +0100 (CET)
Subject: [Rd] StatDataML
In-Reply-To: <38C0363B.DDB2AEA6@bank-banque-canada.ca>
References: <14527.58185.135296.986847@galadriel.ci.tuwien.ac.at>
 <38C0363B.DDB2AEA6@bank-banque-canada.ca>
Message-ID: <14531.39149.147189.715132@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 03 Mar 2000 17:01:31 -0500,
>>>>> Paul Gilbert (PG) wrote:

PG> Fritz
PG> Could you compare/contrast this a bit with NetCDF and  the UN/EDIFACT General
PG> Statistical Message (GESMES ). I know almost nothing about NetCDF, but from the
PG> little I know it seems to attempt to do a similar thing. I know a bit more about
PG> Gesmes, and there seems to be a lot of overlap with what you are proposing.


I don't know anything about GESMES, and have only looked into NetCDF a
little bit. Of course there are several ``standards'' for exchanging
data, and XML is one of them which looks promising to us.

One nice thing about XML is that more and more applications start
supporting it, i.e., have parsers for XML.  And you don't need any
special software for writing XML, as it is plain text -> you can
create XML files without the need to link any shared libs etc.

That XML can be easily extended is already part of the name ...

Best,

-- 
-------------------------------------------------------------------
                        Friedrich  Leisch 
Institut für Statistik                     Tel: (+43 1) 58801 10715
Technische Universität Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstraße 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Mar  6 14:47:54 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 06 Mar 2000 08:47:54 -0600
Subject: [Rd] A new way for an Alpha to fail
Message-ID: <6rd7p8889x.fsf@franz.stat.wisc.edu>

Previously I had managed to get R-0.99.0 to compile and pass the tests
on a Debian Linux/Alpha 2.2 system by recompiling src/main/optim.c by
hand omitting the -O2 flag.

I just tried R-1.0.0 on a similarly configured machine, although not
the same machine as before, and it compiled ok but failed the tests.
This time it fails on
 bessel> x <- seq(0, 4, len = 501)

 bessel> plot(x, x, ylim = c(0, 6), ylab = "", type = "n", 
     main = "Bessel Functions  I_nu(x)")
 Error in axis(side, at, labels, ...) : no locations are finite

Doing some checking by hand shows that
 plot(x, x)
works and that range(x) is 0 to 4, as expected, but
 plot(x, x, ylim = c(0, 6))
fails with the above message.

The compilers are gcc 2.95.2 and g77 from 1999/10/xx

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Mon Mar  6 15:02:43 2000
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 06 Mar 2000 07:02:43 -0800
Subject: [Rd] Re: [Omega-devel] StatDataML
In-Reply-To: Friedrich Leisch's message of "Mon, 6 Mar 2000 12:27:25 +0100 (CET)"
References: <200003032136.QAA20959@jessie.research.bell-labs.com> <14531.38429.238420.501197@galadriel.ci.tuwien.ac.at>
Message-ID: <87bt4sgmzw.fsf@alpha.cfas.washington.edu>

>>>>> "FL" == Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

    DJ> Also, do the data have to be in ASCII format?  What about
    DJ> (possibly mime-encoded) images? sound?

You can insert _SOME_ base64 encoded binary files.  There are
problems, depending on the image encoding format used
(gif/tiff/png/xbm, I'm not sure which are problematic; see the xml-dev
archives for more info).   I think the solutions where simple.

There are XML-based proposals for images that are quite interesting (I
think SDL?  or SML?  Look under the XML computational chemistry
section) Basically, it's a flexible vector-graphics format, that
scales on the fly and has other nice features...

Have you looked at MathML integration for providing output?  Frank
Harrell pop'd up a quite interesting question regarding literate
programming, and this (the SDML) could be one aspect of it...).

Still havn't looked at it; maybe Friday I'll find some time...

best,
-tony

-- 
A.J. Rossini		       Research Assistant Professor of Biostatistics 
Biostatistics/Univ. of Washington  (Th)	Box 357232   206-543-1044 (3286=fax)
Center for AIDS Research/HMC/UW	  (M/F)	Box 359931   206-731-3647 (3693=fax)
VTN/SCHARP/FHCRC		 (Tu/W)	Box 358080   206-667-7025 (4812=fax)
rossini@(biostat.washington.edu|u.washington.edu|hivnet.fhcrc.org)
http://www.biostat.washington.edu/~rossini

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar  6 15:09:30 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Mar 2000 16:09:30 +0100
Subject: [Rd] A new way for an Alpha to fail
In-Reply-To: Douglas Bates's message of "06 Mar 2000 08:47:54 -0600"
References: <6rd7p8889x.fsf@franz.stat.wisc.edu>
Message-ID: <x2ln3w879x.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

>  bessel> x <- seq(0, 4, len = 501)
> 
>  bessel> plot(x, x, ylim = c(0, 6), ylab = "", type = "n", 
>      main = "Bessel Functions  I_nu(x)")
>  Error in axis(side, at, labels, ...) : no locations are finite
> 
> Doing some checking by hand shows that
>  plot(x, x)
> works and that range(x) is 0 to 4, as expected, but
>  plot(x, x, ylim = c(0, 6))
> fails with the above message.

Interesting... How about firing ub gdb with a breakpoint in do_axis?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Mon Mar  6 15:35:45 2000
From: dtrenkler@nts6.oec.uni-osnabrueck.de (dtrenkler@nts6.oec.uni-osnabrueck.de)
Date: Mon, 6 Mar 2000 16:35:45 +0100 (MET)
Subject: [Rd] anova-bug in R-version  1.0.0? (PR#470)
Message-ID: <200003061535.QAA07778@pubhealth.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@biostat.ku.dk
#
######################################################

Under R version 0.6.51  the following 

A_c(13,9,15,5,25,15,3,9,6,12)
B_c(42,24,41,19,27)
C_c(8,24,9,18,9,24,12,4)
D_c(9,12,7,18,2,18)
kaeufe_c(A,B,C,D)
region_factor(rep(1:4,c(10,5,8,6)),labels=LETTERS[1:4])
anova(lm(kaeufe~region))   

delivers

Analysis of Variance Table

Response: kaeufe
          Df  Sum Sq Mean Sq F value   Pr(>F)    
region     3 1474.65  491.55  8.7852 0.000376 ***
Residuals 25 1398.80   55.95                     
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1


This is what I expected. Under RW 1.0.0 I get

Analysis of Variance Table

Response: kaeufe
Error in print.coefmat(x, digits = digits, signif.stars = signif.stars,
: 
        binary operator applied to invalid types

Am I doing something wrong or is this a real bug?

Regards,

  *** D.Trenkler ***

====================================================================
Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
Statistik / Empirische Wirtschaftsforschung
Universitaet Osnabrueck
Rolandstrasse 8                           Phone: +49(0) 541-969-2753
D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
GERMANY
====================================================================



--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows NT 4.0 (build 1381) Service Pack 3

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar  6 15:51:10 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Mar 2000 16:51:10 +0100
Subject: [Rd] anova-bug in R-version  1.0.0? (PR#470)
In-Reply-To: dtrenkler@nts6.oec.uni-osnabrueck.de's message of "Mon, 6 Mar 2000 16:35:45 +0100 (MET)"
References: <200003061535.QAA07778@pubhealth.ku.dk>
Message-ID: <x2aekc85ch.fsf@blueberry.kubism.ku.dk>

dtrenkler@nts6.oec.uni-osnabrueck.de writes:

> Under R version 0.6.51  the following 
> 
> A_c(13,9,15,5,25,15,3,9,6,12)
> B_c(42,24,41,19,27)
> C_c(8,24,9,18,9,24,12,4)
> D_c(9,12,7,18,2,18)
> kaeufe_c(A,B,C,D)
> region_factor(rep(1:4,c(10,5,8,6)),labels=LETTERS[1:4])
> anova(lm(kaeufe~region))   
> 
> delivers
> 
> Analysis of Variance Table
> 
> Response: kaeufe
>           Df  Sum Sq Mean Sq F value   Pr(>F)    
> region     3 1474.65  491.55  8.7852 0.000376 ***
> Residuals 25 1398.80   55.95                     
> ---
> Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1
> 
> 
> This is what I expected. Under RW 1.0.0 I get
> 
> Analysis of Variance Table
> 
> Response: kaeufe
> Error in print.coefmat(x, digits = digits, signif.stars = signif.stars,
> : 
>         binary operator applied to invalid types
> 
> Am I doing something wrong or is this a real bug?

It's not happening on Unix... Does this happen when starting from a
blank workspace?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar  6 18:02:18 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 6 Mar 2000 18:02:18 +0000 (GMT Standard Time)
Subject: [Rd] anova-bug in R-version  1.0.0? (PR#470)
In-Reply-To: <x2aekc85ch.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.WNT.4.05.10003061800470.1821-100000@tern.stats>

On 6 Mar 2000, Peter Dalgaard BSA wrote:

> dtrenkler@nts6.oec.uni-osnabrueck.de writes:
> 
> > Under R version 0.6.51  the following 
> > 
> > A_c(13,9,15,5,25,15,3,9,6,12)
> > B_c(42,24,41,19,27)
> > C_c(8,24,9,18,9,24,12,4)
> > D_c(9,12,7,18,2,18)
> > kaeufe_c(A,B,C,D)
> > region_factor(rep(1:4,c(10,5,8,6)),labels=LETTERS[1:4])
> > anova(lm(kaeufe~region))   
> > 
> > delivers
> > 
> > Analysis of Variance Table
> > 
> > Response: kaeufe
> >           Df  Sum Sq Mean Sq F value   Pr(>F)    
> > region     3 1474.65  491.55  8.7852 0.000376 ***
> > Residuals 25 1398.80   55.95                     
> > ---
> > Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1
> > 
> > 
> > This is what I expected. Under RW 1.0.0 I get
> > 
> > Analysis of Variance Table
> > 
> > Response: kaeufe
> > Error in print.coefmat(x, digits = digits, signif.stars = signif.stars,
> > : 
> >         binary operator applied to invalid types
> > 
> > Am I doing something wrong or is this a real bug?
> 
> It's not happening on Unix... Does this happen when starting from a
> blank workspace?

It is also not happening on rw1000. Is your .Rprofile (if any) valid?
Try starting with --vanilla.

BDR

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar  6 18:47:15 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Mar 2000 19:47:15 +0100
Subject: [Rd] anova-bug in R-version  1.0.0? (PR#470)
In-Reply-To: Prof Brian D Ripley's message of "Mon, 6 Mar 2000 18:02:18 +0000 (GMT Standard Time)"
References: <Pine.WNT.4.05.10003061800470.1821-100000@tern.stats>
Message-ID: <x24sakylzg.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> > 
> > It's not happening on Unix... Does this happen when starting from a
> > blank workspace?
> 
> It is also not happening on rw1000. Is your .Rprofile (if any) valid?
> Try starting with --vanilla.

The submitter told me in private email that the problem disappeared
when starting with a blank workspace, so a critical function probably
had been overridden.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar  6 18:46:22 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Mon, 6 Mar 2000 19:46:22 +0100 (MET)
Subject: [Rd] anova-bug in R-version  1.0.0? (PR#470)
Message-ID: <200003061846.TAA09039@pubhealth.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> > 
> > It's not happening on Unix... Does this happen when starting from a
> > blank workspace?
> 
> It is also not happening on rw1000. Is your .Rprofile (if any) valid?
> Try starting with --vanilla.

The submitter told me in private email that the problem disappeared
when starting with a blank workspace, so a critical function probably
had been overridden.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Mon Mar  6 21:26:41 2000
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 06 Mar 2000 13:26:41 -0800
Subject: [Rd] StatDataML and graphics... I meant to say "SVG".
Message-ID: <878zzvn626.fsf@alpha.cfas.washington.edu>


See subject...

-- 
A.J. Rossini		       Research Assistant Professor of Biostatistics 
Biostatistics/Univ. of Washington  (Th)	Box 357232   206-543-1044 (3286=fax)
Center for AIDS Research/HMC/UW	  (M/F)	Box 359931   206-731-3647 (3693=fax)
VTN/SCHARP/FHCRC		 (Tu/W)	Box 358080   206-667-7025 (4812=fax)
rossini@(biostat.washington.edu|u.washington.edu|hivnet.fhcrc.org)
http://www.biostat.washington.edu/~rossini

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Mar  6 21:55:12 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Mon, 6 Mar 2000 16:55:12 -0500 (EST)
Subject: [Rd] nlm and optional arguments
Message-ID: <Pine.LNX.4.10.10003061650300.1417-100000@bolker.zoo.ufl.edu>


  It would be really nice if nlm took a set of "..." optional arguments
that were passed through to the objective function.  This level of hacking
is probably slightly beyond me: is there a reason it would be technically
difficult/inefficient?  (I have a vague memory that it used to work this
way either in S-PLUS or in some previous version of R, but I could easily
be wrong.)

  Here's a hack in R code that works for me (basically copying the R code
of nlm() but defining a temporary function that passes the optional
arguments to the objective function), but I presume this would be cleaner
and faster if implemented at a lower level ...

nlm2 <- function(f, p, hessian=FALSE, typsize=rep(1,length(p)),
                fscale=1, print.level=0, ndigit=12, gradtol=1e-6,
                stepmax=max(1000 * sqrt(sum((p/typsize)^2)), 1000),
                steptol=1e-6, iterlim=100, check.analyticals=TRUE, ...) {
  tmpf <- function(x) {
    f(x,...)
  }
  nlm(tmpf,p,hessian=hessian,typsize=typsize,fscale=fscale,print.level=print.level,
      ndigit=ndigit,gradtol=gradtol,stepmax=stepmax,steptol=steptol,iterlim=iterlim,
      check.analyticals=check.analyticals)
}

  As a matter of general principle, would the R-core folks prefer that
"wishlist" items like this get sent to R-bugs (so they can be kept better
track of) or not (so they don't clutter up the bugs database) ?

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Mar  6 22:10:28 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 06 Mar 2000 17:10:28 -0500
Subject: [Rd] StatDataML
Message-ID: <38C42CD4.FA989479@bank-banque-canada.ca>

PG> Could you compare/contrast this a bit with NetCDF and  the
UN/EDIFACT
PG> General Statistical Message (GESMES ).

Well, I guess I'll try to answer part of my own question. I'm groping a
bit to understand the various pieces, and to what extent they overlap or
are complementary, so I would especially invite anyone with more
knowledge to help clear things up. Having very little true
understanding, I think of XML as a language that allows one to define a
format for the data exchange, whereas Gesmes actually defines a format.
I believe they both result in ASCII files. I'm not sure if this means
that XML could be used to define the Gesmes message format or not. CORBA
on the other hand is a protocol for negotiating the exchange of a
formatted message between a client and a server, so it could be used to
exchange Gesmes or some other format defined by XML. CORBA is probably a
replacement for the PADI protocol, based on RPC, which we use here to
exchange time series data between our data servers (Fame) and R and
Splus. (PADI is publicly available but not widely used.)

Torsten>I just had a short (!) look at the description of the data model
and the
Torsten>user guide for GESMES at
http://www.ecb.int/stats/gesmes/gesmes.htm
Torsten>For me it looks biased to banking problems and very
dataframe/array
Torsten>centric.

Yes, I won't recommend it for being simple. That link seems to go to
Gesmes/CB (Central Bank subset of Gesmes) which is decidedly oriented
toward banking and time series data. Reference documents for other parts
of Gesmes are available at

<http://forum.europa.eu.int/Public/irc/dsis/eeg6/library?l=/reference_implementation/gesmes_statistical&vm=detailed&sb=Title>

After looking at this, one might be inclined to think that trying to be
too general is dangerous.  However, even if Gesmes is very complicated,
I'm not sure that trying to define a different general message is the
answer.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Tue Mar  7 06:15:02 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue, 7 Mar 2000 07:15:02 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200003070615.HAA01626@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

none

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 400 *
Subject: X11 troubles
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Jan 2000 14:31:42 +0100
--a) We don't handle multiple window closes well
--b) X11 errors should be caught by an error handler, not kill R
* PR# 414 *
Subject:  graphics bugs: steep slopes and large values beyond ylim 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 7 Feb 2000 18:28:04 -0500
--Followup on R-devel showed this was due to generating integer coordinates 
--outside +/- 2^15 in the X11 driver.

Directory:  In-Out

none

Directory:  Installation

none

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100

Directory:  Low-level

* PR# 391 *
Subject: Segfault in dataentry()
From: Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk>
Date: 29 Dec 1999 11:59:50 +0100
--dataentry(0,0) segfaults

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 462 *
Subject: pgamma
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Tue, 29 Feb 2000 09:50:00 +0100 (MET)
* PR# 463 *
Subject: Bug in read.table
From: "E. S. Venkatraman" <venkat@biosta.mskcc.org>
Date: Tue, 29 Feb 2000 17:47:54 -0500 (EST)
* PR# 465 *
Subject: "is.qr" definition
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Wed, 1 Mar 2000 11:12:37 +0000 (GMT)
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
* PR# 469 *
Subject:  using function names as parameters 
From: Torsten Hothorn <hothorn@ci.tuwien.ac.at>
Date: Fri, 3 Mar 2000 10:11:00 +0100
* PR# 470 *
Subject: anova-bug in R-version  1.0.0?
From: "Trenkler, Dietrich" <dtrenkler@nts6.oec.uni-osnabrueck.de>
Date: Mon, 6 Mar 2000 16:35:12 +0100 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  7 07:06:28 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 7 Mar 2000 07:06:28 +0000 (GMT)
Subject: [Rd] nlm and optional arguments
In-Reply-To: <Pine.LNX.4.10.10003061650300.1417-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.GSO.4.05.10003070701290.20391-100000@auk.stats>

On Mon, 6 Mar 2000, Ben Bolker wrote:

> 
>   It would be really nice if nlm took a set of "..." optional arguments
> that were passed through to the objective function.  This level of hacking
> is probably slightly beyond me: is there a reason it would be technically
> difficult/inefficient?  (I have a vague memory that it used to work this
> way either in S-PLUS or in some previous version of R, but I could easily
> be wrong.)

Well, ms and nlminb work that way in S-PLUS, and optimize and optim do in
R, so there is no real problem.

>   Here's a hack in R code that works for me (basically copying the R code
> of nlm() but defining a temporary function that passes the optional
> arguments to the objective function), but I presume this would be cleaner
> and faster if implemented at a lower level ...
> 
> nlm2 <- function(f, p, hessian=FALSE, typsize=rep(1,length(p)),
>                 fscale=1, print.level=0, ndigit=12, gradtol=1e-6,
>                 stepmax=max(1000 * sqrt(sum((p/typsize)^2)), 1000),
>                 steptol=1e-6, iterlim=100, check.analyticals=TRUE, ...) {
>   tmpf <- function(x) {
>     f(x,...)
>   }
>   nlm(tmpf,p,hessian=hessian,typsize=typsize,fscale=fscale,print.level=print.level,
>       ndigit=ndigit,gradtol=gradtol,stepmax=stepmax,steptol=steptol,iterlim=iterlim,
>       check.analyticals=check.analyticals)
> }

One can just put function(x) f(x, ...) as the first argumnet of the
.Internal call.  It can also fairly easily be done internally (but
why bother?)   I'll take a look at this, but why not try optim instead?


>   As a matter of general principle, would the R-core folks prefer that
> "wishlist" items like this get sent to R-bugs (so they can be kept better
> track of) or not (so they don't clutter up the bugs database) ?

I'll leave that for the R-bugs-master.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Tue Mar  7 07:27:59 2000
From: berwin@maths.uwa.edu.au (berwin@maths.uwa.edu.au)
Date: Tue, 7 Mar 2000 08:27:59 +0100 (MET)
Subject: [Rd] Problems with nlme (PR#471)
Message-ID: <200003070727.IAA11450@pubhealth.ku.dk>

Dear R developers,

first of all let me join the chorus of congratulations for the release
of R 1.0.0.  Well, done!

Unfortunately, I find it necessary to e-mail in a bug report regarding
the `nlme' package.  On my office machine I experience the following
trouble:

bossiaea:/opt/R$ R CMD check -c nlme 
Checking package `nlme' ...
 Massaging examples into `nlme-Ex.R' ...
 Running examples in package `nlme' ...
 ERROR

The end of nlme-Ex.Rout is:

> rm(list = ls(all = TRUE)); .Random.seed <- c(0,rep(7654,3))
> ###--- >>> `anova.gls' <<<----- Compare Likelihoods of Fitted Objects
> 
> 	## alias	 help(anova.gls)
> 
> ##___ Examples ___:
> 
> library(nlme)
> data(Ovary)
> # AR(1) errors within each Mare
> fm1 <- gls(follicles ~ sin(2*pi*Time) + cos(2*pi*Time), Ovary,
+            correlation = corAR1(form = ~ 1 | Mare))
Warning message: 
NA/Inf replaced by maximum positive value 
> anova(fm1)
Denom. DF: 305 
                   numDF  F-value p-value
(Intercept)            1 354.7375  <.0001
sin(2 * pi * Time)     1  18.5035  <.0001
cos(2 * pi * Time)     1   1.6633  0.1981
> # variance changes with a power of the absolute fitted values?
> fm2 <- update(fm1, weights = varPower())
Error in update.gls(fm1, weights = varPower()) : 
	subscript out of bounds
Execution halted


(R CMD check MASS is also failing on an example that uses update.gls.)

On my machine at home I run into troubles even faster when running `R
CMD check nlme'.  One of the early examples chokes on the line:
> data(Orthodont)

I had done a "clean install" on that machine, i.e., I first blew away
the older installation of R.  It seems that the datasets Orthodont and
Pixel have been distributed with the nls library in earlier R versions
but not so in R 1.0.0.  But they are not distributed with the current
version of nlme either.

Cheers,

        Berwin

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Tue Mar  7 08:26:16 2000
From: dtrenkler@nts6.oec.uni-osnabrueck.de (Trenkler, Dietrich)
Date: Tue, 7 Mar 2000 09:26:16 +0100
Subject: AW: [Rd] anova-bug in R-version  1.0.0? (PR#470)
Message-ID: <51615E1449A4D111AE9900008322A88025CD0E@nts6.oec.Uni-Osnabrueck.DE>

I think I've discovered what went wrong.

My workspace included a function wilcox.test formerly copied from
ctest. Now ctest ist part of the distribution and because of that I
always got the message:

[Previously saved workspace restored]

Error in autoload("wilcox.test", "ctest") :
        Object already exists

I didn't take care of this message. Now I removed wilcox.test, saved
the WS, restarted R without the vanilla-option and alas, anova
now works.

It seems that R stops initializing after encountering the error
mentioned above. Is this correct?   


> Regards,
> 
>   *** D.Trenkler ***
> 
> ====================================================================
> Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
> Statistik / Empirische Wirtschaftsforschung
> Universitaet Osnabrueck
> Rolandstrasse 8                           Phone: +49(0) 541-969-2753
> D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
> GERMANY
> ====================================================================
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Tue Mar  7 08:26:53 2000
From: dtrenkler@nts6.oec.uni-osnabrueck.de (dtrenkler@nts6.oec.uni-osnabrueck.de)
Date: Tue, 7 Mar 2000 09:26:53 +0100 (MET)
Subject: AW: [Rd] anova-bug in R-version  1.0.0? (PR#470)
Message-ID: <200003070826.JAA12238@pubhealth.ku.dk>

I think I've discovered what went wrong.

My workspace included a function wilcox.test formerly copied from
ctest. Now ctest ist part of the distribution and because of that I
always got the message:

[Previously saved workspace restored]

Error in autoload("wilcox.test", "ctest") :
        Object already exists

I didn't take care of this message. Now I removed wilcox.test, saved
the WS, restarted R without the vanilla-option and alas, anova
now works.

It seems that R stops initializing after encountering the error
mentioned above. Is this correct?   


> Regards,
> 
>   *** D.Trenkler ***
> 
> ====================================================================
> Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
> Statistik / Empirische Wirtschaftsforschung
> Universitaet Osnabrueck
> Rolandstrasse 8                           Phone: +49(0) 541-969-2753
> D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
> GERMANY
> ====================================================================
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  7 08:40:40 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 7 Mar 2000 08:40:40 +0000 (GMT)
Subject: AW: [Rd] anova-bug in R-version  1.0.0? (PR#470)
In-Reply-To: <51615E1449A4D111AE9900008322A88025CD0E@nts6.oec.Uni-Osnabrueck.DE>
Message-ID: <Pine.GSO.4.05.10003070836280.15700-100000@auk.stats>

On Tue, 7 Mar 2000, Trenkler, Dietrich wrote:

> I think I've discovered what went wrong.
> 
> My workspace included a function wilcox.test formerly copied from
> ctest. Now ctest ist part of the distribution and because of that I
> always got the message:
> 
> [Previously saved workspace restored]
> 
> Error in autoload("wilcox.test", "ctest") :
>         Object already exists
> 
> I didn't take care of this message. Now I removed wilcox.test, saved
> the WS, restarted R without the vanilla-option and alas, anova
> now works.
> 
> It seems that R stops initializing after encountering the error
> mentioned above. Is this correct?   

Yes, in that the rest of the system Rprofile file is skipped
and hence options show.signif.stars and show.coef.Pvalues are not set.

It looks to me as if a bit more protection is needed in print.coefmat,
at least.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar  7 08:53:43 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Mar 2000 09:53:43 +0100
Subject: [Rd] nlm and optional arguments
In-Reply-To: Prof Brian D Ripley's message of "Tue, 7 Mar 2000 07:06:28 +0000 (GMT)"
References: <Pine.GSO.4.05.10003070701290.20391-100000@auk.stats>
Message-ID: <x2ln3vf9ew.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> >   As a matter of general principle, would the R-core folks prefer that
> > "wishlist" items like this get sent to R-bugs (so they can be kept better
> > track of) or not (so they don't clutter up the bugs database) ?
> 
> I'll leave that for the R-bugs-master.

Probably better just to discuss things on the lists.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Tue Mar  7 10:00:34 2000
From: dtrenkler@nts6.oec.uni-osnabrueck.de (dtrenkler@nts6.oec.uni-osnabrueck.de)
Date: Tue, 7 Mar 2000 11:00:34 +0100 (MET)
Subject: [Rd] R-crash using cut-and-paste (PR#472)
Message-ID: <200003071000.LAA13965@pubhealth.ku.dk>

Dear R-Team,

sorry for bugging (:-)), it's me again. In the FAQ coming along with the
R distribution it reads:

If R executes an illegal instruction, or dies with an operating system
error message that indicates a problem in the program (as opposed to
something like "disk full"), then it is certainly a bug.

This encourages me to describe a crash I encountered a few minutes ago.

I had written a function in an  editor, copied it to the clip-board and
tried to establish it in my workspace (cut and paste). Suddenly I got
the following message form Windows NT (sorry it's german):


Die Anweisung "0x7762d4be" verweist auf Speicher in "0x0247c000".  Der
Vorgang "read" konnte nicht auf dem Speicher durchgeführt werden.
Klicken Sie auf "OK um die Anwendung zu beenden.

Rgui.exe-Fehler in Anwendung

There are very technical terms which I hope will be translated such
that it makes sense to you:

The instruction "0x7762d4be" points to memory in "0x0247c000".  "read"
could not be carried out in memory.  Click on "OK to stop the program.  

Clicking on OK caused R to close (and of course the most recent work was
lost)


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows NT 4.0 (build 1381) Service Pack 3

Search Path:
 .GlobalEnv, Autoloads, package:base


Regards,

  *** D.Trenkler ***

====================================================================
Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
Statistik / Empirische Wirtschaftsforschung
Universitaet Osnabrueck
Rolandstrasse 8                           Phone: +49(0) 541-969-2753
D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
GERMANY
====================================================================


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  7 10:30:26 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 7 Mar 2000 10:30:26 +0000 (GMT)
Subject: [Rd] R-crash using cut-and-paste (PR#472)
In-Reply-To: <200003071000.LAA13965@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10003071023280.20024-100000@auk.stats>

On Tue, 7 Mar 2000 dtrenkler@nts6.oec.uni-osnabrueck.de wrote:

> Dear R-Team,
> 
> sorry for bugging (:-)), it's me again. In the FAQ coming along with the
> R distribution it reads:
> 
> If R executes an illegal instruction, or dies with an operating system
> error message that indicates a problem in the program (as opposed to
> something like "disk full"), then it is certainly a bug.
> 
> This encourages me to describe a crash I encountered a few minutes ago.
> 
> I had written a function in an  editor, copied it to the clip-board and
> tried to establish it in my workspace (cut and paste). Suddenly I got
> the following message form Windows NT (sorry it's german):

[...]

How big was the function you were trying to paste in?  There are 
distinct limits to such cut-and-paste, not all of which are under 
our control. To quote more of the FAQ:

  Please include an example that reproduces the problem, preferably the
  simplest one you have found.

Without such an example, there is nothing we can do to help.

As a general work-around, you will find it much easier to use source() to
load in sizeable functions than cut-and-paste.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Mar  7 10:47:43 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 7 Mar 2000 11:47:43 +0100 (MET)
Subject: [Rd] autoload error in profile {was anova-bug in R-version  1.0.0?} (PR#470)
Message-ID: <200003071047.LAA14756@pubhealth.ku.dk>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Tue, 7 Mar 2000, Trenkler, Dietrich wrote:
    >> I think I've discovered what went wrong.
    >> 
    >> My workspace included a function wilcox.test formerly copied from
    >> ctest. Now ctest ist part of the distribution and because of that I
    >> always got the message:
    >> 
    >> [Previously saved workspace restored]
    >> 
    >> Error in autoload("wilcox.test", "ctest") :
    >> Object already exists
    >> 
    >> I didn't take care of this message. Now I removed wilcox.test, saved
    >> the WS, restarted R without the vanilla-option and alas, anova
    >> now works.
    >> 
    >> It seems that R stops initializing after encountering the error
    >> mentioned above. Is this correct?   

    BDR> Yes, in that the rest of the system Rprofile file is skipped
    BDR> and hence options show.signif.stars and show.coef.Pvalues are not set.
but other options as well..
I think this shouldn't happen and *is* a bug.

    BDR> It looks to me as if a bit more protection is needed in print.coefmat,
    BDR> at least.
In extrapolation, wouldn't all R functions using non-internal *)
options() {i.e. getOption() nowadays} need protection against these options
being wrong or non existent ?
I feel that this is exaggerated..

*) Currently, the following options are "internal"
   (i.e. changing them does some consistency checks in src/main/options.c):

   Option	       Requirements
   ------	       ------------
   width	       integer    MIN_WIDTH..MAX_WIDTH
   digits	       integer    MIN_DIGITS..MAX_DIGITS
   expressions	       integer    MIN_EXPRESSIONS..MAX_EXPRESSIONS
   editor	       character  {not NA nor character(0)}
   continue	       character  {not NA nor character(0)}
   prompt	       character  {not NA nor character(0)}
   contrasts	       character(2)
   warn		       numeric(1)
   warning.expression  expression or language
   error	       expression or language
   show.error.messages logical(1)
   echo		       logical(1)

------------

However, I wonder if we shouldn't do consistency checks on other options as
well,  e.g. na.action seems to be more important than the show.* ones ...

For the 1.0.x patches, at least, I'll move the autoload()'s to the end of
profile/Common.R

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Mar  7 11:03:33 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 07 Mar 2000 12:03:33 +0100
Subject: [Rd] R-crash using cut-and-paste (PR#472)
References: <Pine.GSO.4.05.10003071023280.20024-100000@auk.stats>
Message-ID: <38C4E205.9C9A5B72@statistik.uni-dortmund.de>

Hi!

Prof Brian D Ripley schrieb:
> 
> On Tue, 7 Mar 2000 dtrenkler@nts6.oec.uni-osnabrueck.de wrote:
> 
> > Dear R-Team,
> >
> > sorry for bugging (:-)), it's me again. In the FAQ coming along with the
> > R distribution it reads:
> >
> > If R executes an illegal instruction, or dies with an operating system
> > error message that indicates a problem in the program (as opposed to
> > something like "disk full"), then it is certainly a bug.
> >
> > This encourages me to describe a crash I encountered a few minutes ago.
> >
> > I had written a function in an  editor, copied it to the clip-board and
> > tried to establish it in my workspace (cut and paste). Suddenly I got
> > the following message form Windows NT (sorry it's german):
...

Happens here too (R 1.0.0, Windows NT 4.0, SP5).
Sometimes with Dr. Watson, sometimes as described above by D.Trenkler,
sometimes R terminates without any message.

> How big was the function you were trying to paste in?  There are
> distinct limits to such cut-and-paste, not all of which are under
> our control. To quote more of the FAQ:
> 
>   Please include an example that reproduces the problem, preferably the
>   simplest one you have found.
> 
> Without such an example, there is nothing we can do to help.


If you paste the following function about four times (makes no sense,
but reproduces the error without pasting a really big function), the
error occurs:
-------------

"scoredach" <-
  function (x) 
{
  v1 <- x[1]
  u11<- x[2]
  u12<- x[3]
  v2 <- x[4]
  u21<- x[5]
  u22<- x[6]
  v3 <- x[7]
  u31<- x[8]
  u32<- x[9]
  w1 <- x[10]
  w2 <- x[11]
  w3 <- x[12]
  z11<- x[13]
  z21<- x[14]
  z31<- x[15]
  z12<- x[16]
  z22<- x[17]
  z32<- x[18]
 scoredach <- v1/(1 + exp(-(u11 * xseq + u12 * yseq))) 
             + v2/(1 + exp(-(u21 * xseq + u22 * yseq))) 
             + v3/(1 + exp(-(u31 * xseq + u32 * yseq)))

return(scoredach)}

---------------------

> As a general work-around, you will find it much easier to use source() to
> load in sizeable functions than cut-and-paste.


Regards, 
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  7 11:03:41 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 7 Mar 2000 12:03:41 +0100 (MET)
Subject: [Rd] Re: autoload error in profile {was anova-bug in R-version  1.0.0?} (PR#473)
Message-ID: <200003071103.MAA15042@pubhealth.ku.dk>

On Tue, 7 Mar 2000, Martin Maechler wrote:

> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> 
>     BDR> On Tue, 7 Mar 2000, Trenkler, Dietrich wrote:
>     >> I think I've discovered what went wrong.
>     >> 
>     >> My workspace included a function wilcox.test formerly copied from
>     >> ctest. Now ctest ist part of the distribution and because of that I
>     >> always got the message:
>     >> 
>     >> [Previously saved workspace restored]
>     >> 
>     >> Error in autoload("wilcox.test", "ctest") :
>     >> Object already exists
>     >> 
>     >> I didn't take care of this message. Now I removed wilcox.test, saved
>     >> the WS, restarted R without the vanilla-option and alas, anova
>     >> now works.
>     >> 
>     >> It seems that R stops initializing after encountering the error
>     >> mentioned above. Is this correct?   
> 
>     BDR> Yes, in that the rest of the system Rprofile file is skipped
>     BDR> and hence options show.signif.stars and show.coef.Pvalues are not set.
> but other options as well..
> I think this shouldn't happen and *is* a bug.
> 
>     BDR> It looks to me as if a bit more protection is needed in print.coefmat,
>     BDR> at least.
> In extrapolation, wouldn't all R functions using non-internal *)
> options() {i.e. getOption() nowadays} need protection against these options
> being wrong or non existent ?
> I feel that this is exaggerated..

Yes, they should, and when I write them I do check for sensible values.

> *) Currently, the following options are "internal"
>    (i.e. changing them does some consistency checks in src/main/options.c):
> 
>    Option	       Requirements
>    ------	       ------------
>    width	       integer    MIN_WIDTH..MAX_WIDTH
>    digits	       integer    MIN_DIGITS..MAX_DIGITS
>    expressions	       integer    MIN_EXPRESSIONS..MAX_EXPRESSIONS
>    editor	       character  {not NA nor character(0)}
>    continue	       character  {not NA nor character(0)}
>    prompt	       character  {not NA nor character(0)}
>    contrasts	       character(2)
>    warn		       numeric(1)
>    warning.expression  expression or language
>    error	       expression or language
>    show.error.messages logical(1)
>    echo		       logical(1)
> 
> ------------
> 
> However, I wonder if we shouldn't do consistency checks on other options as
> well,  e.g. na.action seems to be more important than the show.* ones ...

We do have some consistency checks on na.action in model.frame.default.

> For the 1.0.x patches, at least, I'll move the autoload()'s to the end of
> profile/Common.R

I _think_ they should have try() around them, which is what S-PLUS 
now does with all startup code.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Tue Mar  7 11:06:34 2000
From: dtrenkler@nts6.oec.uni-osnabrueck.de (Trenkler, Dietrich)
Date: Tue, 7 Mar 2000 12:06:34 +0100
Subject: AW: [Rd] R-crash using cut-and-paste (PR#472)
Message-ID: <51615E1449A4D111AE9900008322A88025CD10@nts6.oec.Uni-Osnabrueck.DE>



> -----Ursprüngliche Nachricht-----
> Von:	Prof Brian D Ripley 
> Gesendet am:	Tuesday, March 07, 2000 11:30 AM
> An:	dtrenkler@nts6.oec.uni-osnabrueck.de
> Cc:	r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Betreff:	Re: [Rd] R-crash using cut-and-paste (PR#472)
> 
> On Tue, 7 Mar 2000 dtrenkler@nts6.oec.uni-osnabrueck.de wrote:
> 
> > Dear R-Team,
> > 
> > sorry for bugging (:-)), it's me again. In the FAQ coming along with
> the
> > R distribution it reads:
> > 
> > If R executes an illegal instruction, or dies with an operating
> system
> > error message that indicates a problem in the program (as opposed to
> > something like "disk full"), then it is certainly a bug.
> > 
> > This encourages me to describe a crash I encountered a few minutes
> ago.
> > 
> > I had written a function in an  editor, copied it to the clip-board
> and
> > tried to establish it in my workspace (cut and paste). Suddenly I
> got
> > the following message form Windows NT (sorry it's german):
> 
> [...]
> 
> How big was the function you were trying to paste in?  
	[Dietrich Trenkler]  About 36 lines. Here you are:

	
tefo_function(form,symb="%",dir="F:/DIDITEX/compstatr/ss00/r2latex/"){
	tf_paste(c(dir,form,".r2l"),collapse="")
	cat(c("Reading ",tf,".\n"),collapse="")
	ss_scan(file=tf,what="",sep="\n",quiet=TRUE)
	sss_ss
	a_(1:length(sss))[ss==as.vector("\\end{RFunction}")]
	sss_sss[1:a-1]
	b_(1:length(sss))[ss==as.vector("\\begin{RFunction}")]

	collect.expressions_function(ss){
	ss_ss[grep("%",ss)]
	ss_paste(ss,collapse="")
	ss_substring(ss,1:nchar(ss),1:nchar(ss))
	ss_as.vector(ss[!((ss=="%")|(ss==" "))])
	ss_paste(c("list(",ss[-1],")"),collapse="")
	ss
	}
	a_collect.expressions(ss[-(1:a)])
	a_paste(c("a0_",a),collapse="")
	sss_c(sss[-(1:b)],a)
	sss_c(sss,"a0_lapply(a0,signif,digits=digits)")
	a_paste(c("ss_paste(c('",tf,,"'),collapse='')"),collapse="")
	sss_c(sss,a)
	sss_c(sss,"ss_scan(file=ss,what='',sep='\\n',quiet=TRUE)")
	
sss_c(sss,"a_(1:length(ss))[ss==as.vector('\\\\end{RFunction}')]")
	sss_c(sss,"ss_ss[-(1:a)]")
	sss_c(sss,"ss_ss[-grep('%',ss)]")
	sss_c(sss,"ss_paste(ss,collapse='\\n',sep='\\n')")
	sss_c(sss,paste("for(i in
1:length(a0)){ss_sub('",symb,"',as.character(a0),ss);a0_a0[-1]}",sep="")
)
	sss_c(sss,"if(!file=='')")
	
sss_c(sss,"write(paste(ss,collapse='\\n',sep='\\n'),file=paste(c(dir,fil
e,'.tex'),collapse=''))")
	sss_c(sss,"else return(cat(ss,'\\n'))")
	sss_c(sss,"}")
	
eval(parse(text=paste(sss,collapse="\n",sep="\n")),envir=.GlobalEnv)
	cat("Function ",form," established.\n")
	}
	 


> There are 
> distinct limits to such cut-and-paste, not all of which are under 
> our control. 
	[Dietrich Trenkler]  This seems to be true. When I copied this
function to the clipboard R crashed several times (sometimes without any
messages). There seems to be some interferences with the clipboard...


> As a general work-around, you will find it much easier to use source()
> to
> load in sizeable functions than cut-and-paste.
	[Dietrich Trenkler]  Henceforth I will obey to your advice.


> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jfox@mcmaster.ca  Tue Mar  7 14:08:03 2000
From: jfox@mcmaster.ca (jfox@mcmaster.ca)
Date: Tue, 7 Mar 2000 15:08:03 +0100 (MET)
Subject: [Rd] update fails after specific sequence of steps (PR#474)
Message-ID: <200003071408.PAA18937@pubhealth.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@biostat.ku.dk
#
######################################################



I stumbled on this error while doing a classroom demonstration. The error is reproducible, 
but seems to require a specific sequence of operations: (1) fitting a linear model; (2) 
calling the summary function; (3) calling a function of mine, called test.terms; (4) making 
a typing error in a call to update -- typing "~.~" instead of ".~." . (5) After this, a 
correct call to update fails. If any of the steps 1-4 is omitted, everything proceeds 
normally.

I've attached the following: 

 o   several listings illustrating when the error occurs and when it does not; 

 o   a listing of the dataset; 

 o   a listing of the test.terms function and the functions that it uses. 

The dataset, though, seems unremarkable, and test.tests is a straightforward function 
without (intended) side effects. The library fox just contains some functions and datasets; 
I can, of course, supply it if that seems relevant.

I'm not sure that this is a bug in R, but it seemed worth reporting.

Thanks for your trouble,
 John

----------------- first listing, showing error ---------------------------

R : Copyright 2000, The R Development Core Team
Version 1.0.0  (February 29, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(fox)
> data(Moore)
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)

Call:
lm(formula = conform ~ status * fcategory)

Residuals:
    Min      1Q  Median      3Q     Max 
-8.6250 -2.9000 -0.2727  2.7273 11.3750 

Coefficients:
                          Estimate Std. Error t value Pr(>|t|)    
(Intercept)                11.8571     1.7307   6.851 3.44e-08 ***
statuslow                   0.7679     2.3699   0.324   0.7477    
fcategorylow                5.5429     2.6813   2.067   0.0454 *  
fcategorymedium             2.4156     2.2140   1.091   0.2819    
statuslow.fcategorylow     -9.2679     3.4507  -2.686   0.0106 *  
statuslow.fcategorymedium  -7.7906     3.5728  -2.181   0.0353 *  
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 

Residual standard error: 4.579 on 39 degrees of freedom
Multiple R-Squared: 0.3237,     Adjusted R-squared: 0.237 
F-statistic: 3.734 on 5 and 39 degrees of freedom,      p-value: 0.007397 

> test.terms(mod.full)
                 Sum Sq Df F value    Pr(>F)    
(Intercept)      984.14  1 46.9348 3.436e-08 ***
status             2.20  1  0.1050   0.74767    
fcategory         89.67  2  2.1383   0.13147    
status:fcategory 175.49  2  4.1846   0.02257 *  
Residuals        817.76 39                      
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 
> mod.m<-update(mod.full, ~.~-status:fcategory)
Error in model.frame.default(formula = ~conform ~ 1, drop.unused.levels = TRUE) : 
        object is not a matrix
> mod.m<-update(mod.full, .~.-status:fcategory)  # fails after summary, test.terms, & error
Error in parse(file, n, text, prompt) : parse error
> 

----------------- second listing, omitting error in call to update, everything works -------

R : Copyright 2000, The R Development Core Team
Version 1.0.0  (February 29, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(fox)
> data(Moore)
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)

Call:
lm(formula = conform ~ status * fcategory)

Residuals:
    Min      1Q  Median      3Q     Max 
-8.6250 -2.9000 -0.2727  2.7273 11.3750 

Coefficients:
                          Estimate Std. Error t value Pr(>|t|)    
(Intercept)                11.8571     1.7307   6.851 3.44e-08 ***
statuslow                   0.7679     2.3699   0.324   0.7477    
fcategorylow                5.5429     2.6813   2.067   0.0454 *  
fcategorymedium             2.4156     2.2140   1.091   0.2819    
statuslow.fcategorylow     -9.2679     3.4507  -2.686   0.0106 *  
statuslow.fcategorymedium  -7.7906     3.5728  -2.181   0.0353 *  
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 

Residual standard error: 4.579 on 39 degrees of freedom
Multiple R-Squared: 0.3237,     Adjusted R-squared: 0.237 
F-statistic: 3.734 on 5 and 39 degrees of freedom,      p-value: 0.007397 

> test.terms(mod.full)
                 Sum Sq Df F value    Pr(>F)    
(Intercept)      984.14  1 46.9348 3.436e-08 ***
status             2.20  1  0.1050   0.74767    
fcategory         89.67  2  2.1383   0.13147    
status:fcategory 175.49  2  4.1846   0.02257 *  
Residuals        817.76 39                      
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 
> mod.m<-update(mod.full, .~.-status:fcategory) # works following summary & test.terms
> mod.m

Call:
lm(formula = conform ~ status + fcategory)

Coefficients:
    (Intercept)        statuslow     fcategorylow  fcategorymedium  
       14.72356         -4.60667          0.08089         -1.09511  

> 

----- third listing, omitting call to test.terms, everything works --------------------

R : Copyright 2000, The R Development Core Team
Version 1.0.0  (February 29, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(fox)
> data(Moore)
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)

Call:
lm(formula = conform ~ status * fcategory)

Residuals:
    Min      1Q  Median      3Q     Max 
-8.6250 -2.9000 -0.2727  2.7273 11.3750 

Coefficients:
                          Estimate Std. Error t value Pr(>|t|)    
(Intercept)                11.8571     1.7307   6.851 3.44e-08 ***
statuslow                   0.7679     2.3699   0.324   0.7477    
fcategorylow                5.5429     2.6813   2.067   0.0454 *  
fcategorymedium             2.4156     2.2140   1.091   0.2819    
statuslow.fcategorylow     -9.2679     3.4507  -2.686   0.0106 *  
statuslow.fcategorymedium  -7.7906     3.5728  -2.181   0.0353 *  
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 

Residual standard error: 4.579 on 39 degrees of freedom
Multiple R-Squared: 0.3237,     Adjusted R-squared: 0.237 
F-statistic: 3.734 on 5 and 39 degrees of freedom,      p-value: 0.007397 

> mod.m<-update(mod.full, ~.~-status:fcategory)
Error in model.frame.default(formula = ~conform ~ 1, drop.unused.levels = TRUE) : 
        object is not a matrix
> mod.m<-update(mod.full, .~.-status:fcategory) # works following summary and error
> mod.m

Call:
lm(formula = conform ~ status + fcategory)

Coefficients:
    (Intercept)        statuslow     fcategorylow  fcategorymedium  
       14.72356         -4.60667          0.08089         -1.09511  

> 


----------- fourth listing, omitting call to summary, everything works ------------------

R : Copyright 2000, The R Development Core Team
Version 1.0.0  (February 29, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> library(fox)
> data(Moore)
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> test.terms(mod.full)
                 Sum Sq Df F value    Pr(>F)    
(Intercept)      984.14  1 46.9348 3.436e-08 ***
status             2.20  1  0.1050   0.74767    
fcategory         89.67  2  2.1383   0.13147    
status:fcategory 175.49  2  4.1846   0.02257 *  
Residuals        817.76 39                      
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 
> mod.m<-update(mod.full, ~.~-status:fcategory)
Error in model.frame.default(formula = ~conform ~ 1, drop.unused.levels = TRUE) : 
        object is not a matrix
> mod.m<-update(mod.full, .~.-status:fcategory) # works following test.terms and error
> mod.m

Call:
lm(formula = conform ~ status + fcategory)

Coefficients:
    (Intercept)        statuslow     fcategorylow  fcategorymedium  
       14.72356         -4.60667          0.08089         -1.09511  


------------------------ listing of dataset ----------------------------------------

> Moore
   subject status conform fcategory fscore
1        1    low       8       low     37
2        2    low       4      high     57
3        3    low       8      high     65
4        4    low       7       low     20
5        5    low      10       low     36
6        6    low       6       low     18
7        7    low      12    medium     51
8        8    low       4    medium     44
9        9    low      13       low     31
10      10    low      12       low     36
11      11    low       4    medium     42
12      12    low      13      high     56
13      13    low       7       low     28
14      14    low       9    medium     43
15      15    low       9      high     65
16      16    low      24      high     57
17      17    low       6       low     28
18      18    low       7      high     61
19      19    low      23      high     57
20      20    low      13      high     55
21      21    low       8       low     17
22      22    low      12       low     35
23      23   high      19      high     68
24      24   high      12    medium     41
25      25   high      21       low     16
26      26   high       9      high     63
27      27   high      23       low     15
28      28   high       7      high     54
29      29   high      17    medium     48
30      30   high      14    medium     42
31      31   high      11      high     59
32      32   high      16    medium     45
33      33   high      15       low     30
34      34   high      20    medium     44
35      35   high       8    medium     42
36      36   high      12       low     22
37      37   high      14      high     52
38      38   high      14    medium     42
39      39   high      17    medium     41
40      40   high       7    medium     50
41      41   high      17    medium     39
42      42   high      13      high     57
43      43   high      16       low     35
44      44   high      10      high     52
45      45   high      15    medium     44
> 

------------------ function test.terms and functions it calls ------------------------

> test.terms
function (object, ...) 
{
    UseMethod("test.terms")
}

> test.terms.lm
function (mod, error, ...) 
{
    if (!missing(error)) {
        sumry <- summary(error, corr = FALSE)
        s2 <- sumry$sigma^2
        error.df <- error$df.residual
        error.SS <- s2 * error.df
    }
    intercept <- has.intercept(mod)
    p <- length(coefficients(mod))
    I.p <- diag(p)
    Source <- term.names(mod)
    n.terms <- length(Source)
    SS <- rep(0, n.terms + 1)
    df <- rep(0, n.terms + 1)
    F <- rep(0, n.terms + 1)
    p <- rep(0, n.terms + 1)
    assign <- mod$assign
    for (term in 1:n.terms) {
        subs <- which(assign == term - intercept)
        hyp.matrix <- I.p[subs, ]
        test <- if (missing(error)) 
            linear.hypothesis(mod, hyp.matrix, ...)
        else linear.hypothesis(mod, hyp.matrix, error.SS = error.SS, 
            error.df = error.df, ...)
        SS[term] <- test$SS
        df[term] <- test$df[1]
        F[term] <- test$F
        p[term] <- test$p
    }
    Source[n.terms + 1] <- "Residuals"
    df.res <- if (missing(error)) 
        mod$df.residual
    else error.df
    sumry <- summary(mod, corr = FALSE)
    s2 <- sumry$sigma^2
    SS[n.terms + 1] <- if (missing(error)) 
        s2 * df.res
    else error.SS
    df[n.terms + 1] <- df.res
    F[n.terms + 1] <- NA
    p[n.terms + 1] <- NA
    result <- data.frame(SS, df, F, p)
    row.names(result) <- Source
    names(result) <- c("Sum Sq", "Df", "F value", "Pr(>F)")
    class(result) <- c("anova", "data.frame")
    result
}

> has.intercept
function (object, ...) 
{
    UseMethod("has.intercept")
}

> term.names
function (object, ...) 
{
    UseMethod("term.names")
}

> term.names.default
function (model) 
{
    term.names <- labels(terms(model))
    if (has.intercept(model)) 
        c("(Intercept)", term.names)
    else term.names
}

> linear.hypothesis
function (object, ...) 
{
    UseMethod("linear.hypothesis")
}

> linear.hypothesis.lm
function (mod, hypothesis.matrix, rhs = 0, white.adjust = F, 
    error.SS, error.df) 
{
    sumry <- summary(mod, corr = FALSE)
    s2 <- if (missing(error.SS)) 
        sumry$sigma^2
    else error.SS/error.df
    V <- if (white.adjust == FALSE) 
        sumry$cov.unscaled
    else hccm(mod, type = white.adjust)/s2
    b <- coefficients(mod)
    L <- if (is.null(dim(hypothesis.matrix))) 
        t(hypothesis.matrix)
    else hypothesis.matrix
    q <- nrow(L)
    SSH <- t(L %*% b - rhs) %*% inv(L %*% V %*% t(L)) %*% (L %*% 
        b - rhs)
    F <- SSH/(q * s2)
    df <- if (missing(error.df)) 
        mod$df.residual
    else error.df
    p <- 1 - pf(F, q, df)
    list(SS = SSH[1, 1], F = F[1, 1], df = c(q, df), p = p[1, 
        1])
}

> hccm
function (model, type = "hc3") 
{
    if (is.null(class(model)) || class(model) != "lm" || !is.null(weights(mod))) {
        stop("requires unweighted lm")
    }
    sumry <- summary(model, corr = FALSE)
    s2 <- sumry$sigma^2
    V <- sumry$cov.unscaled
    if (type == FALSE) 
        return(s2 * V)
    e <- residuals(model)
    X <- model.matrix(model)
    df.res <- df.residual(model)
    factor <- switch(type, hc0 = 1, hc1 = n/df.res, hc2 = 1/(1 - 
        hat(X)), hc3 = 1/(1 - hat(X))^2)
    V %*% t(X) %*% apply(X, 2, "*", (e^2)/factor) %*% V
}
> 

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows NT 4.0 (build 1381) Service Pack 3

Search Path:
 .GlobalEnv, Moore, package:fox, Autoloads, package:base


|----------------------------------------------------|
| John Fox                          jfox@McMaster.ca |
| Department of Sociology        McMaster University |
|----------------------------------------------------|

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Mar  7 14:43:35 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 07 Mar 2000 08:43:35 -0600
Subject: [Rd] Problems with nlme (PR#471)
In-Reply-To: berwin@maths.uwa.edu.au's message of "Tue, 7 Mar 2000 08:27:59 +0100 (MET)"
References: <200003070727.IAA11450@pubhealth.ku.dk>
Message-ID: <6rwvnelu20.fsf@franz.stat.wisc.edu>

berwin@maths.uwa.edu.au writes:

> bossiaea:/opt/R$ R CMD check -c nlme 
> Checking package `nlme' ...
>  Massaging examples into `nlme-Ex.R' ...
>  Running examples in package `nlme' ...
>  ERROR
> 
> The end of nlme-Ex.Rout is:
> 
> > rm(list = ls(all = TRUE)); .Random.seed <- c(0,rep(7654,3))
> > ###--- >>> `anova.gls' <<<----- Compare Likelihoods of Fitted Objects
> > 
> > 	## alias	 help(anova.gls)
> > 
> > ##___ Examples ___:
> > 
> > library(nlme)
> > data(Ovary)
> > # AR(1) errors within each Mare
> > fm1 <- gls(follicles ~ sin(2*pi*Time) + cos(2*pi*Time), Ovary,
> +            correlation = corAR1(form = ~ 1 | Mare))
> Warning message: 
> NA/Inf replaced by maximum positive value 
> > anova(fm1)
> Denom. DF: 305 
>                    numDF  F-value p-value
> (Intercept)            1 354.7375  <.0001
> sin(2 * pi * Time)     1  18.5035  <.0001
> cos(2 * pi * Time)     1   1.6633  0.1981
> > # variance changes with a power of the absolute fitted values?
> > fm2 <- update(fm1, weights = varPower())
> Error in update.gls(fm1, weights = varPower()) : 
> 	subscript out of bounds
> Execution halted
> 
> 
> (R CMD check MASS is also failing on an example that uses update.gls.)
> 
> On my machine at home I run into troubles even faster when running `R
> CMD check nlme'.  One of the early examples chokes on the line:
> > data(Orthodont)
> 
> I had done a "clean install" on that machine, i.e., I first blew away
> the older installation of R.  It seems that the datasets Orthodont and
> Pixel have been distributed with the nls library in earlier R versions
> but not so in R 1.0.0.  But they are not distributed with the current
> version of nlme either.

Ah, it appears that I need to update the nlme library.  I probably
won't be able to do that until tomorrow at the earliest.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar  7 14:43:39 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Mar 2000 15:43:39 +0100
Subject: [Rd] update fails after specific sequence of steps (PR#474)
In-Reply-To: jfox@mcmaster.ca's message of "Tue, 7 Mar 2000 15:08:03 +0100 (MET)"
References: <200003071408.PAA18937@pubhealth.ku.dk>
Message-ID: <x2wvnekfhg.fsf@blueberry.kubism.ku.dk>


Strange things happen on Unix too. 

> source('fox.R')
> Moore<-read.table('Moore.txt')
> attach(Moore)
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)
...
> mod.m<-update(mod.full, ~.~-status:fcategory)
Error in model.frame.default(formula = ~conform ~ 1, drop.unused.levels = TRUE) : 
	object is not a matrix
> mod.m<-update(mod.full, .~.-status:fcategory) # works following summary and error
> mod.m

Call:
lm(formula = conform ~ status + fcategory)

Coefficients:
    (Intercept)        statuslow     fcategorylow  fcategorymedium  
       14.72356         -4.60667          0.08089         -1.09511  


#### Well you *thought* it worked, but watch: ####
> mod.full<-lm(conform~status*fcategory)
> summary(mod.full)

Call:
lm(formula = conform ~ L×@ * fcategory)
                       ^^^^^^^

...and the attached dataframe is corrupted. Must investigate further.

> ls("Moore")
[1] "conform"   "fcategory" "fscore"    "L×@"      "subject"  
                                         ^^^^^^^
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgutwin@us.ibm.com  Tue Mar  7 15:36:01 2000
From: pgutwin@us.ibm.com (pgutwin@us.ibm.com)
Date: Tue, 7 Mar 2000 16:36:01 +0100 (MET)
Subject: [Rd] Error compiling R on RS6000 (PR#475)
Message-ID: <200003071536.QAA20337@pubhealth.ku.dk>

Full_Name: Paul Gutwin
Version: R-1.0.0
OS: AIX 4.2.1
Submission from: (NULL) (198.133.22.67)


R-1.0.0 fails to compile. I'm using the config.cache file from a successful
compliation of R-0.65.0 (prob #290, fixed thanks to Thomas Vogels @ CMU). 
Compiling R-1.0.0 fails with the following error messages:

make
Target "R" is up to date.
	gcc -I. -I../include -I../../src/include -I../../src/include/R_ext 
-DHAVE_CONFIG_H -mno-fp-in-toc -g -O2 -c Rsock.c -o Rsock.o
In file included from Rsock.c:34:
/usr/include/unistd.h:162: parse error before `lseek64'
/usr/include/unistd.h:162: parse error before `off64_t'
/usr/include/unistd.h:162: warning: data definition has no type or storage
class
In file included from /usr/include/sys/lockf.h:41,
                 from /usr/include/unistd.h:382,
                 from Rsock.c:34:
/usr/include/sys/stat.h:127: parse error before `soff_t'
/usr/include/sys/stat.h:127: warning: no semicolon at end of struct or union
/usr/include/sys/stat.h:146: parse error before `st_size'
/usr/include/sys/stat.h:146: warning: data definition has no type or storage
class
In file included from /usr/include/unistd.h:382,
                 from Rsock.c:34:
/usr/include/sys/lockf.h:60: parse error before `off64_t'
In file included from Rsock.c:34:
/usr/include/unistd.h:417: parse error before `off64_t'
/usr/include/unistd.h:438: parse error before `off64_t'
/usr/include/unistd.h:440: parse error before `ualarm'
/usr/include/unistd.h:440: warning: parameter names (without types) in function
declaration
/usr/include/unistd.h:440: warning: data definition has no type or storage
class
/usr/include/unistd.h:441: warning: parameter names (without types) in function
declaration
/usr/include/unistd.h:474: parse error before `fclear64'
/usr/include/unistd.h:474: parse error before `off64_t'
/usr/include/unistd.h:474: warning: data definition has no type or storage
class
/usr/include/unistd.h:475: parse error before `off64_t'
make: 1254-004 The error code from the last command is 1.


Stop.
make: 1254-004 The error code from the last command is 2.


Stop.
make: 1254-004 The error code from the last command is 1.


Stop.
make: 1254-004 The error code from the last command is 1.


Stop.

Compilation exited abnormally with code 2 at Tue Mar  7 10:15:58


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Mar  7 15:45:29 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 7 Mar 2000 16:45:29 +0100 (CET)
Subject: [Rd] Error compiling R on RS6000 (PR#475)
In-Reply-To: <200003071536.QAA20337@pubhealth.ku.dk>
References: <200003071536.QAA20337@pubhealth.ku.dk>
Message-ID: <14533.9241.474692.985917@galadriel.ci.tuwien.ac.at>

>>>>> On Tue, 7 Mar 2000 16:36:01 +0100 (MET),
>>>>> pgutwin  (p) wrote:

p> Full_Name: Paul Gutwin
p> Version: R-1.0.0
p> OS: AIX 4.2.1
p> Submission from: (NULL) (198.133.22.67)


p> R-1.0.0 fails to compile. I'm using the config.cache file from a successful
p> compliation of R-0.65.0 

Uhm, why would you want to do that???

Have you tried building from a clean (fresh) source tree?

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar  7 15:47:47 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Mar 2000 16:47:47 +0100
Subject: [Rd] Error compiling R on RS6000 (PR#475)
In-Reply-To: pgutwin@us.ibm.com's message of "Tue, 7 Mar 2000 16:36:01 +0100 (MET)"
References: <200003071536.QAA20337@pubhealth.ku.dk>
Message-ID: <x2r9dmkcik.fsf@blueberry.kubism.ku.dk>

pgutwin@us.ibm.com writes:

> Full_Name: Paul Gutwin
> Version: R-1.0.0
> OS: AIX 4.2.1
> Submission from: (NULL) (198.133.22.67)
> 
> 
> R-1.0.0 fails to compile. I'm using the config.cache file from a successful
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> compliation of R-0.65.0 (prob #290, fixed thanks to Thomas Vogels @ CMU). 
  ^^^^^^^^^^^^^^^^^^^^^^^

What on earth gives you the idea that that might work?? The configure
scripts have changed many a time since 0.65.0. Or was config.cache a
typo?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Tue Mar  7 18:32:52 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Tue, 7 Mar 2000 19:32:52 +0100 (MET)
Subject: [Rd] lm(rnorm(1000)~rnorm(1000)) kills rw1000 (PR#476)
Message-ID: <200003071832.TAA21815@pubhealth.ku.dk>


First:

	R core: (Thank You!)^HUGE_VAL

Now, down to business:

In a loop or in repeated command lines:

system.time(lm(rnorm(1000)~rnorm(1000)))

( or lm(rnorm(1000)~rnorm(1000))$coef )

fails after several iterations with the Windows message 'This program
has performed an illegal operation and will be shut down. If the
problem persists, please contact the vendor'.

clicking on DETAILS reveals:

RGUI caused an invalid page fault in
module R.DLL at 0137:100e938a.
Registers:
EAX=02dd9918 CS=0137 EIP=100e938a EFLGS=00010283
EBX=02bb9b18 SS=013f ESP=0253d4c0 EBP=0253e578
ECX=02bb9b2c DS=013f ESI=02dd9848 FS=3ebf
EDX=00000001 ES=013f EDI=0010a1ba GS=0000
Bytes at CS:EIP:
89 14 b8 8b 8d e8 ef ff ff 8b 9d c0 ef ff ff 47 
Stack dump:
00000000 02bb9cbc 02559278 1002fb4f 51eb851f 02bbac20 02bbac20 1002fb77 00000001 00000001 72707865 69737365 00000001 0262d9c4 8038456c 17f70bef 


Likewise with Rterm.

This also happens on rw0990.

My office setup is a trifle unusual - it is a SUNPCi board (actually
an AMDK6) that fits in an Ultra 10. Some of the Windows drivers are
replaced by Sun versions that allow access to system services on the
UltraSparc. There are bugs in this setup, but on the whole it seems
fairly stable when using applications like SAS and Office.

It does not happen on rw0901 or rw0651 (? version number ?) on my HOME
PC. Nor on R 0.90.1 under Solaris

Enclosing EITHER 'rnorm(1000)' within I( ) seems to cure this
behavior. (It also produces the behavior I expected, viz. regressing
one set of random normal deviates on another. FWIW, neither Splus3.4
for Solaris nor R 0.90.1 produce the result I expected unless I() is
used.)

Chuck Berry

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows 9x 4.0 (build 1111)  B

Search Path:
 .GlobalEnv, Autoloads, package:base




-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  7 18:51:58 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 7 Mar 2000 18:51:58 +0000 (GMT Standard Time)
Subject: [Rd] lm(rnorm(1000)~rnorm(1000)) kills rw1000 (PR#476)
In-Reply-To: <200003071832.TAA21815@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.05.10003071851000.98-100000@tern.stats>

On Tue, 7 Mar 2000 cberry@tajo.ucsd.edu wrote:

> It does not happen on rw0901 or rw0651 (? version number ?) on my HOME
> PC. Nor on R 0.90.1 under Solaris

It does happen on R 1.0.0 on Solaris and on rw1000 on a real PC.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Mar  7 19:17:30 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 7 Mar 2000 11:17:30 -0800 (PST)
Subject: [Rd] lm(rnorm(1000)~rnorm(1000)) kills rw1000 (PR#476)
In-Reply-To: <Pine.WNT.4.05.10003071851000.98-100000@tern.stats>
Message-ID: <Pine.GSO.4.21.0003071108270.27319-100000@mail.biostat.washington.edu>

On Tue, 7 Mar 2000, Prof Brian D Ripley wrote:

> On Tue, 7 Mar 2000 cberry@tajo.ucsd.edu wrote:
> 
> > It does not happen on rw0901 or rw0651 (? version number ?) on my HOME
> > PC. Nor on R 0.90.1 under Solaris
> 
> It does happen on R 1.0.0 on Solaris and on rw1000 on a real PC.

Something strange is happening where we ensure that the response does not
appear on the rhs of the formula.  

At lines 1643ff of model.c we count how many columns of the design matrix
are needed for each model term.  This count is not done if the term is the
response, which leaves the count uninitialised.

We then use this uninitialised count at 1673ff to construct the assign
attribute.

	-thomas



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Mar  7 19:24:06 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 7 Mar 2000 11:24:06 -0800 (PST)
Subject: [Rd] lm(rnorm(1000)~rnorm(1000)) kills rw1000 (PR#476)
In-Reply-To: <Pine.GSO.4.21.0003071108270.27319-100000@mail.biostat.washington.edu>
Message-ID: <Pine.GSO.4.21.0003071120060.27319-100000@mail.biostat.washington.edu>

On Tue, 7 Mar 2000, Thomas Lumley wrote:

> On Tue, 7 Mar 2000, Prof Brian D Ripley wrote:
> 
> > On Tue, 7 Mar 2000 cberry@tajo.ucsd.edu wrote:
> > 
> > > It does not happen on rw0901 or rw0651 (? version number ?) on my HOME
> > > PC. Nor on R 0.90.1 under Solaris
> > 
> > It does happen on R 1.0.0 on Solaris and on rw1000 on a real PC.
> 
> Something strange is happening where we ensure that the response does not
> appear on the rhs of the formula.  
> 
> At lines 1643ff of model.c we count how many columns of the design matrix
> are needed for each model term.  This count is not done if the term is the
> response, which leaves the count uninitialised.
> 
> We then use this uninitialised count at 1673ff to construct the assign
> attribute.

Incidentally, this command doesn't do what the user probably thinks it
does:  lm thinks that the rnorm(1000) on the lhs is the same as the one on
the rhs and drops it from the model, fitting only an intercept.

I think this is unavoidable, since model.matrix can't be expected to know
whether an arbitrary function is deterministic or random.

The work-around is
	a<-rnorm(1000)
	b<-rnorm(1000)
	lm(a~b)


	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Mar  7 19:39:47 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 7 Mar 2000 11:39:47 -0800 (PST)
Subject: [Rd] lm(rnorm(1000)~rnorm(1000)) kills rw1000 (PR#476)
In-Reply-To: <Pine.GSO.4.21.0003071120060.27319-100000@mail.biostat.washington.edu>
Message-ID: <Pine.GSO.4.21.0003071134290.27319-100000@mail.biostat.washington.edu>


A patch is

1649,1652c1649
<       if (j == rhs_response) {
<           INTEGER(count)[j]=0;  /* need this initialised */
<           continue;
<       }
---
>       if (j == rhs_response) continue;



	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar  7 19:48:24 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Mar 2000 20:48:24 +0100
Subject: [Rd] lm(rnorm(1000)~rnorm(1000)) kills rw1000 (PR#476)
In-Reply-To: Thomas Lumley's message of "Tue, 7 Mar 2000 11:39:47 -0800 (PST)"
References: <Pine.GSO.4.21.0003071134290.27319-100000@mail.biostat.washington.edu>
Message-ID: <x2aekah88n.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> A patch is
> 
> 1649,1652c1649
> <       if (j == rhs_response) {
> <           INTEGER(count)[j]=0;  /* need this initialised */
> <           continue;
> <       }
> ---
> >       if (j == rhs_response) continue;

Hmm, this wouldn't happen to cure the update(.~.-whateveritwas) case
by jfox, would it? (darn nasty one that one...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From klittle@iecodesign.com  Tue Mar  7 20:22:09 2000
From: klittle@iecodesign.com (Kevin Little)
Date: Tue, 7 Mar 2000 14:22:09 -0600
Subject: [Rd] Re: [Omega-devel] StatDataML Description element
In-Reply-To: <87bt4sgmzw.fsf@alpha.cfas.washington.edu>
Message-ID: <LMBBIPCDANABKBDOOCEHKEFJEIAA.klittle@iecodesign.com>

This is a multi-part message in MIME format.

------=_NextPart_000_0033_01BF8840.85DCFC80
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

  [from your draft]
  The description element
  <!ELEMENT description (title?, source?, date?, version?, comment?)>

  <!ELEMENT title (#PCDATA) >
  <!ELEMENT source (#PCDATA) >
  <!ELEMENT date (#PCDATA) >
  <!ELEMENT version (#PCDATA) >
  <!ELEMENT comment (#PCDATA) >

  The description element itself consists of five elements (title, source,
date, comment, version) which are simple strings and include no other
elements. It is used to provide meta-information about a dataset that is
typically not needed for computations on the data itself.

One of the key issues I worry about is "data set provenance" and I encourage
my clients to be able to trace back to one or more sources to inform
themselves of the quality of the data set (how much reliance they can place
in what they are about to see or manipulate, etc).

1. easy links to an originator would be good e.g. is there any way to use
hypertext in any of the arguments for email or web site referrals?

2. what limits (any?) are there typically on the length of the strings in
the arguments of DESCRIPTION?

3. In S or R or Omega, a statistical dataset's description is always
available by command or menu item (I'm guessing).  Are the arguments
typically available now for any kind of search or filtering or action by my
statistical application (e.g. can I ask the statistical application to only
allow me to work on datasets from a certain source? I guess this is possible
and would be addressed by the application developers, not the developers of
the XML standard but maybe there is something required of the XML standard
to make it possible to hook to applications?)

4. is the list of arguments fixed at five? Or could one allow for multiple
comment1, comment2, ...

[If one can search or otherwise operate on the string in the "comment" field
then I guess you don't need to extend the list of arguments.  That leads to
another question:  how extensible or upgradeable is StatDataML envisioned to
be?  I can imagine a "Data Quality Stamp or Certification" being relevant
within certain communities and it would be nice to have that in the
meta-data description, perhaps as a separate argument.]

Thanks again for your draft proposal on StatDataML, this is a potentially
very important contribution.

Regards
Kevin Little, Ph.D.
Informing Ecological Design, LLC
2213 West Lawn Avenue
Madison, WI  53711
tel 608.251.4355 fax 608.251.0399
email klittle@iecodesign.com


------=_NextPart_000_0033_01BF8840.85DCFC80
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE></TITLE>
<META content=3D"text/html; charset=3Diso-8859-1" =
http-equiv=3DContent-Type>
<META content=3D"MSHTML 5.00.2614.3500" name=3DGENERATOR></HEAD>
<BODY>
<BLOCKQUOTE style=3D"MARGIN-RIGHT: 0px">
  <DIV style=3D"MARGIN-RIGHT: 0px"><FONT color=3D#0000ff face=3DArial =
size=3D2>[from=20
  your draft]</FONT></DIV>
  <DIV style=3D"MARGIN-RIGHT: 0px"><FONT color=3D#0000ff face=3DArial =
size=3D2>The=20
  description element<BR>&lt;!ELEMENT description (title?, source?, =
date?,=20
  version?, comment?)&gt;<BR><BR>&lt;!ELEMENT title (#PCDATA)=20
  &gt;<BR>&lt;!ELEMENT source (#PCDATA) &gt;<BR>&lt;!ELEMENT date =
(#PCDATA)=20
  &gt;<BR>&lt;!ELEMENT version (#PCDATA) &gt;<BR>&lt;!ELEMENT comment =
(#PCDATA)=20
  &gt;<BR><BR>The description element itself consists of five elements =
(title,=20
  source, date, comment, version) which are simple strings and include =
no other=20
  elements. It is used to provide meta-information about a dataset that =
is=20
  typically not needed for computations on the data=20
itself.<BR></DIV></BLOCKQUOTE></FONT>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2>One of the =
key issues I=20
worry about is "data set provenance" and I encourage my clients to be =
able to=20
trace back to one or more sources to&nbsp;inform themselves of the =
quality of=20
the data set (how much reliance they can place in what they are about to =
see or=20
manipulate, etc).&nbsp; </FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial =
size=3D2></FONT>&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2>1. easy =
links to an=20
originator would be good e.g. is <FONT face=3DArial size=3D2>there any =
way to use=20
hypertext in any of the arguments for email or web site=20
referrals?</FONT></FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2><FONT =
face=3DArial=20
size=3D2></FONT></FONT>&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2><FONT =
face=3DArial=20
size=3D2>2. what limits (any?) are there typically on the length of the =
strings in=20
the arguments of&nbsp;DESCRIPTION?</FONT></FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px">&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2>3. In S or =
R or Omega, a=20
statistical dataset's description is always available by command or menu =
item=20
(I'm guessing).&nbsp; Are the arguments typically available now for any =
kind of=20
search or filtering or action by my statistical application (e.g. can I =
ask the=20
statistical application to only allow me to work on datasets from a =
certain=20
source? I guess this is possible and would be addressed by the =
application=20
developers, not the developers of the XML standard but maybe there is =
something=20
required of the XML standard to make it possible to hook to=20
applications?)</FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px">&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2><FONT =
face=3DArial=20
size=3D2>4.&nbsp;is the list of arguments fixed at five? Or could one =
allow for=20
multiple comment1, comment2, ... </FONT></FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2><FONT =
face=3DArial=20
size=3D2></FONT></FONT>&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2><FONT =
face=3DArial=20
size=3D2>[If one can search or otherwise operate on the string in the =
"comment"=20
field then I guess you don't need to extend the list of arguments.&nbsp; =
That=20
leads to another question:&nbsp; how extensible or upgradeable is =
StatDataML=20
envisioned to be?&nbsp; I can imagine a "Data Quality=20
Stamp&nbsp;or&nbsp;Certification" being relevant within certain =
communities=20
and&nbsp;it would be nice to have that in&nbsp;the meta-data =
description,=20
perhaps as a separate argument.]&nbsp; </FONT></FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial =
size=3D2></FONT>&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2><FONT =
color=3D#0000ff=20
face=3DArial size=3D2><FONT color=3D#000000>Thanks again for your draft =
proposal on=20
StatDataML, this is a potentially very important=20
contribution.</FONT></FONT></FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial =
size=3D2></FONT>&nbsp;</DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial =
size=3D2>Regards</FONT></DIV>
<DIV style=3D"MARGIN-RIGHT: 0px"><FONT face=3DArial size=3D2>
<P><FONT face=3DArial size=3D2>Kevin Little, Ph.D.</FONT> <BR><FONT =
face=3DArial=20
size=3D2>Informing Ecological Design, LLC</FONT> <BR><FONT face=3DArial =
size=3D2>2213=20
West Lawn Avenue</FONT> <BR><FONT face=3DArial size=3D2>Madison, =
WI&nbsp;=20
53711</FONT> <BR><FONT face=3DArial size=3D2>tel 608.251.4355 fax=20
608.251.0399</FONT> <BR><FONT face=3DArial size=3D2>email=20
klittle@iecodesign.com</FONT> </P></DIV></FONT></BODY></HTML>

------=_NextPart_000_0033_01BF8840.85DCFC80--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Tue Mar  7 22:31:43 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 07 Mar 2000 17:31:43 -0500
Subject: [Rd] Error compiling R on RS6000 (PR#475)
In-Reply-To: Peter Dalgaard BSA's message of "07 Mar 2000 16:47:47 +0100"
References: <200003071536.QAA20337@pubhealth.ku.dk> <x2r9dmkcik.fsf@blueberry.kubism.ku.dk>
Message-ID: <871z5m1kfk.fsf@bavaria.ece.cmu.edu>


Hi,

  I'll assume Paul meant config.site which contains all the extra
  compiler and linker flags and those flags are somewhat involved in
  his environment.  Triggered by Paul's email I tried to
  compile R-1.0.0.  It compiles cleanly but dies with "Illegal
  Instruction" upon start.  Sorry, I don't have any further insight
  into this problem at this time.

  I've been working on my Linux box instead of the my AIX workstation
  lately, so I didn't see this earlier.  Actually I've been so busy
  using R, that I've missed to congratulate on the release or 1.0.
  Thanks to all who work on R which has been a tremendous help for me!

  -tom


Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> pgutwin@us.ibm.com writes:
> 
> > Full_Name: Paul Gutwin
> > Version: R-1.0.0
> > OS: AIX 4.2.1
> > Submission from: (NULL) (198.133.22.67)
> > 
> > 
> > R-1.0.0 fails to compile. I'm using the config.cache file from a successful
>                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> > compliation of R-0.65.0 (prob #290, fixed thanks to Thomas Vogels @ CMU). 
>   ^^^^^^^^^^^^^^^^^^^^^^^
> 
> What on earth gives you the idea that that might work?? The configure
> scripts have changed many a time since 0.65.0. Or was config.cache a
> typo?

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Wed Mar  8 08:25:00 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Wed, 8 Mar 2000 09:25:00 +0100 (CET)
Subject: [Rd] Re: [Omega-devel] StatDataML Description element
In-Reply-To: <LMBBIPCDANABKBDOOCEHKEFJEIAA.klittle@iecodesign.com>
Message-ID: <Pine.LNX.4.21.0003080915400.30257-100000@boromir.ci.tuwien.ac.at>


> 
> 1. easy links to an originator would be good e.g. is there any way to use
> hypertext in any of the arguments for email or web site referrals?
> 

as long as all elements include strings, "source" would be the right place
to save a URL 

> 2. what limits (any?) are there typically on the length of the strings in
> the arguments of DESCRIPTION?
> 

interesting question, I think there is no limit.

> 3. In S or R or Omega, a statistical dataset's description is always
> available by command or menu item (I'm guessing).  Are the arguments
> typically available now for any kind of search or filtering or action by my
> statistical application (e.g. can I ask the statistical application to only
> allow me to work on datasets from a certain source? I guess this is possible
> and would be addressed by the application developers, not the developers of
> the XML standard but maybe there is something required of the XML standard
> to make it possible to hook to applications?)
> 

in our alpha implementation, readSDML returns the read object with an
additional "SDMLdescription" attribute. One can check, if e.g. the source
is valid in a special application.

> 4. is the list of arguments fixed at five? Or could one allow for multiple
> comment1, comment2, ...
> 

<!ELEMENT description (title?, source?, date?, version?, comment*)>

allows comments until the end of time (will be added in StatDataML.dtd,
thanks for the hint). 

> [If one can search or otherwise operate on the string in the "comment" field
> then I guess you don't need to extend the list of arguments.  That leads to
> another question:  how extensible or upgradeable is StatDataML envisioned to
> be?  I can imagine a "Data Quality Stamp or Certification" being relevant
> within certain communities and it would be nice to have that in the
> meta-data description, perhaps as a separate argument.]
> 

something like a RSA-key included in the description? will think about
this! 

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Mar  8 09:16:39 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 8 Mar 2000 10:16:39 +0100
Subject: [Rd] possible BUG with as.data.frame() and/or [.data.frame
Message-ID: <000501bf88df$039febc0$a9021aac@joelschlaegel>



Here is a possible BUG with as.data.frame() and/or [.data.frame which broke
Michael Lapsleys RODBC-Code.
Can anyone confirm it is a bug or a 'feature' of the prototype?


tablename <- "abc"
a <- as.data.frame(cbind("abc", 1:3))
b <- as.data.frame(cbind(tablename, 1:3))

# ok
> a
   V1 V2
1 abc  1
2 abc  2
3 abc  3

# missing column name
> b
  tablename
1       abc 1
2       abc 2
3       abc 3

# subsetting ok
> b[1,1]
[1] abc
Levels:  abc

# subsetting fails
> b[1,2]
Error in [.data.frame(b, 1, 2) : undefined columns selected


##by contrast
> data.frame(cbind(tablename, 1:3))
  tablename Var.2
1       abc     1
2       abc     2
3       abc     3

Regards


--
Dr. Jens Oehlschlägel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 München

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Mar  8 09:14:38 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 8 Mar 2000 10:14:38 +0100
Subject: [Rd] RODBC: follow up
Message-ID: <000401bf88de$bb153630$a9021aac@joelschlaegel>



Hi Michael,
Here is the result of my first testing:

(0) Dr. Watson
Sorry, I should have given a more precise description: by default in R
exists a function with the name 'table', if you use this name as in

  odbcPrimaryKeys(0, table)

a Dr. Watson occurs, because table does not give a table name.
However, it is always a good idea to prevent Dr. Watsons, even if it is
triggered by a stupid user, as in my case.


(1, may be Davids comment already solves this?)
There are still some problems with sqlTables() and sqlQuery() which should
return a data.frame, but only return one line.
I tried with MS Access and Oracle, and now odbcGetErrMsg() somewhat explains
the problem.

sqlTables(0)
  TABLE_QUALIFIER TABLE_OWNER TABLE_NAME   TABLE_TYPE REMARKS
1    C:\\TEMP\\db          NA   MSysACEs SYSTEM TABLE      NA
Browse[1]> odbcGetErrMsg(channel)
[1] "[RODBC]ERROR: Row count not supported"


Why is this? If it is generally possible, that some ODBC drivers do not
support Row count,
then we need to check odbcGetErrMsg() after each of those functions, which
are expected to return a data.frame.
Or better those functions have to check on their own and to build up the
COMPLETE data frame using odbcFetchRow()
until all rows are fetched. Of course this should not be R-code but C-code,
as looping in R is not a good idea.



(2)
in sqlSave()

  if (any(sqlTables(0)[3] == tablename)) {

probably should read

  if (any(sqlTables(channel)[3] == tablename)) {

furthermore if sqlTables() fails with "[RODBC]ERROR: Row count not
supported"
this check for existence is currently not reliable (sqlTables() silently
returns a one-line data.frame).



(3, see posting to r-devel)
in sqlSave()

  newname <- as.data.frame(cbind(NA, NA, tablename, as.matrix(names(dat)),
    12, "varchar", 255, 255, NA, NA, 1, NA))

creates a data.frame with "" as column names (except for "tablename" as
third column name)
I don't know whether this is a R bug or expected behaviour. However it
currently creates trouble as the later call of

  query <- sqltablecreate(tablename, newname, keys = 0)

fails at

Browse[1]>
debug: if (coldata[i, 11] == 1) {
    null <- "NULL"
} else {
    null <- "NOT NULL"
}
Browse[1]>
Error in [.data.frame(coldata, i, 11) : undefined columns selected


because newname/coldata misses colnames

  debug: print(coldata)
  Browse[1]>
          tablename
1 NA NA        dd V1 12 varchar 255 255 NA NA 1 NA
2 NA NA        dd V2 12 varchar 255 255 NA NA 1 NA


BTW: why use as.matrix(names(dat)) ?



(4) in sqltablecreate

  gsub("[^A-Za-z]+", "", as.character(coldata[i, 4]))

destroys numbers in column names, rather use

  gsub("[^A-Za-z0-9]+", "", as.character(coldata[i, 4]))


Furthermore think about substituting '_' in SQLNAMES to '.' in
RNAMEodbcColumns(channel, table)S and vice versa.
  gsub("[.]", "_", RNAME)
  gsub("[_]", ".", SQLNAME)


(5) in several functions you use

  if (!any(sqlTables(channel) == sqtable)) )

shouldn't that read

  if (!any(sqlTables(channel)[4] == sqtable))

?

The above mentioned one-line-only problem with sqlTables() of course breaks
this code


(6) Some more comments (perhaps due to my ignorance about ODBC, can ODBC
write data without sending sql statements?)

(6.1) looping
sqlwrite() sqlgetresults() uses for-loops for writing/reading data rowwise.
I expect this to be rather slow.
Is it possible to have this done in C instead of R?
If in R, might it be that the sequence of multiple rbind() leads to memory
segmentation (growing lists)??
May be one should ask  on R-Help, if it is better to first create an object
of approbriate size and then replacing single rows.

(6.2) block read/write
Reading all rows at a time with sqlgetresults() could run into memory
trouble.
Fetching single rows using odbcFetchRow() probably creates slow looping
problems in R.
I think the interface would become more suitable for big datasets if it had
functions for writing and reading BLOCKS of rows. E.g. sqlgetresults() could
get a parameter nmax= .

(6.3) sqlCopy()
Convert query results into a data.frame before sending them to another
channel could lead to memory trouble.
Better would be a lowlevel implementation in C, which copies rowwise.

Regards


Jens

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar  8 10:14:17 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Mar 2000 11:14:17 +0100
Subject: [Rd] possible BUG with as.data.frame() and/or [.data.frame
In-Reply-To: "Jens Oehlschl?gel-Akiyoshi"'s message of "Wed, 8 Mar 2000 10:16:39 +0100"
References: <000501bf88df$039febc0$a9021aac@joelschlaegel>
Message-ID: <x2g0u1wyyu.fsf@blueberry.kubism.ku.dk>

"Jens Oehlschlägel-Akiyoshi" <jens.oehlschlaegel-akiyoshi@mdfactory.de> writes:

> Here is a possible BUG with as.data.frame() and/or [.data.frame which broke
> Michael Lapsleys RODBC-Code.
> Can anyone confirm it is a bug or a 'feature' of the prototype?
> 
> 
> tablename <- "abc"
> a <- as.data.frame(cbind("abc", 1:3))
> b <- as.data.frame(cbind(tablename, 1:3))
> 
> # ok
> > a
>    V1 V2
> 1 abc  1
> 2 abc  2
> 3 abc  3
> 
> # missing column name
> > b
>   tablename
> 1       abc 1
> 2       abc 2
> 3       abc 3
> 
> # subsetting ok
> > b[1,1]
> [1] abc
> Levels:  abc
> 
> # subsetting fails
> > b[1,2]
> Error in [.data.frame(b, 1, 2) : undefined columns selected
> 
> 
> ##by contrast
> > data.frame(cbind(tablename, 1:3))
>   tablename Var.2
> 1       abc     1
> 2       abc     2
> 3       abc     3


It's a prototype "feature"...
...
Version 3.4 Release 1 for Sun SPARC, SunOS 5.3 : 1996 
...
>  tablename <- "abc"
>  b <- as.data.frame(cbind(tablename, 1:3))
> b
  tablename   
1       abc 1
2       abc 2
3       abc 3
> b[,2]
Error in "[.data.frame"(b,  , 2): undefined columns selected
Dumped


This is a conspiracy of three things: 

1) The deparse.level feature of cbind (which is unsettable, but the
   internals still behave as if deparse.level=1) which causes a
   deparsing of simple arguments (i.e. symbols) into colnames, leaving
   others blank.

2) as.data.frame.matrix expects that if colnames are present, they can
   just be copied to the names() of the result

3) "[.data.frame" explicitly checks whether a column name is blank
   after subsetting, and protests if it is. 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Mar  8 10:16:30 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 8 Mar 2000 10:16:30 +0000 (GMT)
Subject: [Rd] possible BUG with as.data.frame() and/or [.data.frame
Message-ID: <200003081016.KAA05882@toucan.stats.ox.ac.uk>

> From: "Jens Oehlschlägel-Akiyoshi" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
> Date: Wed, 8 Mar 2000 10:16:39 +0100
> 
> Here is a possible BUG with as.data.frame() and/or [.data.frame which broke
> Michael Lapsleys RODBC-Code.

> Can anyone confirm it is a bug or a 'feature' of the prototype?

It's the same in S-PLUS 3.4, but different in 2000 and 5.1. In short,
it seems a bug in Svr3 that have been fixed since in S-PLUS, but
one could argue that it is intentional.

> tablename <- "abc"
> a <- as.data.frame(cbind("abc", 1:3))
> b <- as.data.frame(cbind(tablename, 1:3))
> 
> # ok
> > a
>    V1 V2
> 1 abc  1
> 2 abc  2
> 3 abc  3
> 
> # missing column name
> > b
>   tablename
> 1       abc 1
> 2       abc 2
> 3       abc 3

It's empty not missing.
> names(b)
[1] "tablename" ""         

Here 2000 and 5.1 give

  tablename X.2 
1       abc   1
2       abc   2
3       abc   3


There's an easy fix here:

as.data.frame.matrix can fixed by adding the two lines after
collabs <- dn[[2]]

    if(any(empty <- nchar(collabs)==0)) 
        collabs[empty] <- paste("V", 1:ncols, sep = "")[empty]

I am inclined to regard this as a reported bug, and fix it in R-release.
I am not sure I know what the optional argument in as.data.frame.matrix is
supposed to do: it seems documented nowhere.  On the other hand, the
behaviour has been there for a long time undetected (in R).


> # subsetting ok
> > b[1,1]
> [1] abc
> Levels:  abc
> 
> # subsetting fails
> > b[1,2]
> Error in [.data.frame(b, 1, 2) : undefined columns selected

That appears to be deliberate: you cannot select unnamed columns.


As for the original code that triggers the problem:

   in sqlSave() in RODBC
   
     newname <- as.data.frame(cbind(NA, NA, tablename, as.matrix(names(dat)),
       12, "varchar", 255, 255, NA, NA, 1, NA))

it is almost always a good idea to name the arguments to cbind.



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Mar  8 10:34:25 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 8 Mar 2000 11:34:25 +0100
Subject: [Rd] RE: [R] RODBC
In-Reply-To: <200003081028.KAA05923@toucan.stats.ox.ac.uk>
Message-ID: <001501bf88e9$e0b32ea0$a9021aac@joelschlaegel>



Sorry,

I was commenting on the previous windows version (version file says 0.5a)
(the first one which ran under RW.1.0.0)

I have Win NT 4.0 Service pack 5
and R is

> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    0.0
year     2000
month    February
day      29
language R



> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk]
> Sent: Wednesday, March 08, 2000 11:29 AM
> To: dajm@deeq.demon.co.uk; mlapsley@ndirect.co.uk
> Cc: jens.oehlschlaegel-akiyoshi@mdfactory.de
> Subject: Re: [R] RODBC
>
>
>
> > Date: Wed, 8 Mar 2000 08:23:02 +0000
> > From: Michael Lapsley <mlapsley@ndirect.co.uk>
> > To: David Middleton <dajm@deeq.demon.co.uk>
> > Cc: Michael Lapsley <mlapsley@ndirect.co.uk>, Prof Brian Ripley
> <ripley@stats.ox.ac.uk>, jens.oehlschlaegel-akiyoshi@mdfactory.de
> > Subject: Re: [R] RODBC
> > X-Keywords:
> >
> > Dammit!  Sorry, folks, to make such stupid mistakes.
> > New version on my 'web page'.
> >
> > On Tue, Mar 07, 2000 at 08:37:14PM -0300, David Middleton wrote:
> > > i) a typo in sqlgetresults "odbcFetchrow" should be
> "odbcFetchRow" at
> > >    line 420 of RODBC/R/RODBC (binary dist. from Brian Ripley)
> > >    line 356 of RODBC/R/sql.R (your source dist)
> > >
> > > ii) the C source change to RODBCNumRows does not set num[0] in the
> > >     case where handles[channel].nRows == -1.  Thus where
> > >     odbcNumRows previously gave me $num=-1, $stat=1, I now
> > >     $num=1, $stat=-1, so it still just returns the first
> row of the query!
>
> I happen to have my laptop in my office of for a demo in 30 mins, so
> a new Windows version is now up at http://www.stats.ox.ac.uk/pub/bdr.
>
> I have no idea which version Jens has been commenting on this morning:
> Jens could you always tell us please?
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Mar  8 13:39:59 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 08 Mar 2000 07:39:59 -0600
Subject: [Rd] Error compiling R on RS6000 (PR#475)
In-Reply-To: Thomas J Vogels's message of "07 Mar 2000 17:31:43 -0500"
References: <200003071536.QAA20337@pubhealth.ku.dk> <x2r9dmkcik.fsf@blueberry.kubism.ku.dk> <871z5m1kfk.fsf@bavaria.ece.cmu.edu>
Message-ID: <6rwvndh974.fsf@franz.stat.wisc.edu>

Thomas J Vogels <tov@ece.cmu.edu> writes:

>   I'll assume Paul meant config.site which contains all the extra
>   compiler and linker flags and those flags are somewhat involved in
>   his environment.  Triggered by Paul's email I tried to
>   compile R-1.0.0.  It compiles cleanly but dies with "Illegal
>   Instruction" upon start.  Sorry, I don't have any further insight
>   into this problem at this time.

Do the compilers need special flags to control IEEE floating point
behavior?  One of the first things that R does on startup is to force
an evaluation of 1.0/0.0 and store the result as a global "Infinity".
On some architecture/compiler combinations this will generate an error
unless you instruct the compiler to insert special code for full IEEE
compliance.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar  8 15:31:06 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Mar 2000 16:31:06 +0100
Subject: [Rd] update fails after specific sequence of steps (PR#474)
In-Reply-To: Peter Dalgaard BSA's message of "07 Mar 2000 15:43:39 +0100"
References: <200003071408.PAA18937@pubhealth.ku.dk> <x2wvnekfhg.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2ya7tv5qd.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Strange things happen on Unix too. 
..
> > mod.m<-update(mod.full, ~.~-status:fcategory)
...
> ...and the attached dataframe is corrupted. Must investigate further.
> 
> > ls("Moore")
> [1] "conform"   "fcategory" "fscore"    "L×@"      "subject"  

I think this is fixed now. Apparently model formulas like the above
caused R to become confused as to the number of variables in the
model and overrun the array of names, subsequently confusing the
garbage collector.

(Temporary workaround: Just don't do that...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar  8 15:41:06 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 08 Mar 2000 10:41:06 -0500
Subject: [Rd] Re: [Omega-devel] StatDataML Description element
References: <Pine.LNX.4.21.0003080915400.30257-100000@boromir.ci.tuwien.ac.at>
Message-ID: <38C67491.13E2B99E@bank-banque-canada.ca>

>> be?  I can imagine a "Data Quality Stamp or Certification" being
relevant
> >within certain communities and it would be nice to have that in the
> >meta-data description, perhaps as a separate argument.]

>something like a RSA-key included in the description? will think about
>this!

I would think of any certification as being part of the "communication
protocol". I could see a place in the data format for indicating the
source, description, and possibly a special field for the the source's
assessment of the quality. If you really want  certification ( =
authentication)  you should have the whole thing encrypted so that it
needs to be unencrypted with the source's public key, but you have to do
that outside the format description (and you need PKI infastructure to
do it correctly).

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Wed Mar  8 15:50:37 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Wed, 8 Mar 2000 16:50:37 +0100 (CET)
Subject: [Rd] Re: [Omega-devel] StatDataML Description element
In-Reply-To: <38C67491.13E2B99E@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.21.0003081642440.25544-100000@boromir.ci.tuwien.ac.at>


> >> be?  I can imagine a "Data Quality Stamp or Certification" being
> relevant
> > >within certain communities and it would be nice to have that in the
> > >meta-data description, perhaps as a separate argument.]
> 
> >something like a RSA-key included in the description? will think about
> >this!
> 
> I would think of any certification as being part of the "communication
> protocol". I could see a place in the data format for indicating the
> source, description, and possibly a special field for the the source's
> assessment of the quality. If you really want  certification ( =
> authentication)  you should have the whole thing encrypted so that it
> needs to be unencrypted with the source's public key, but you have to do
> that outside the format description (and you need PKI infastructure to
> do it correctly).

The idea was not encryption but having something that we can be sure that
the dataset has not been manipulated. There is a w3 project about XML and
signatures at http://www.w3.org/Signature/, maybe one can use something
like this. 

Additionaly, Fritz and I discussed the helpful mail by Kevin and decided
to add a properties element to the description instead of more
comments. One can save "proprietary", that means application based
extentions as properties to the document (which is, in our opinion,
more closed to the framework and saves some lines of code)

We suggest to use the extention *.sdml for StatDataML files, any protests?

Torsten


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar  8 16:47:31 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 08 Mar 2000 11:47:31 -0500
Subject: [Rd] Re: [Omega-devel] StatDataML Description element
References: <Pine.LNX.4.21.0003081642440.25544-100000@boromir.ci.tuwien.ac.at>
Message-ID: <38C68422.BDF20B27@bank-banque-canada.ca>

Torsten

>The idea was not encryption but having something that we can be sure
that
>the dataset has not been manipulated.

This is called authentication. You can add a checksum to the data
format, or something like that, but that just helps stop accidental
manipulation. I think it is useful and may be the way to go, but don't
think of it as any kind of certification or authentication. If you
really want authentication, then the whole format (data, description and
all)  needs to be encrypted by the source with their private key, and it
can then be unencrypted by anyone with the source's public key. The
encryption does not prevent anyone from reading it, since anyone can get
the source's public key. It just prevents manipulation. To do this
properly you then need to be sure that you can get the true source's
public key (not some bogus key provided by whoever is providing you with
manipulated data). That is where Public Key Infrastructure (PKI) is
necessary.

Needless to say, this gets a bit messy, but there are some important
points. The key cannot be part of the message (data format), otherwise
you cannot unlock the key. That is, the authentication has to be part of
what I loosely call the "communications protocol."  I believe these
services are provided by CORBA. If you really want authentication then
you should be looking at the communications protocol, and that is
separate from the data format.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From P.J.Green@bristol.ac.uk  Wed Mar  8 17:23:34 2000
From: P.J.Green@bristol.ac.uk (P.J.Green@bristol.ac.uk)
Date: Wed, 8 Mar 2000 18:23:34 +0100 (MET)
Subject: [Rd] Printing graphs on W98 laptop (PR#477)
Message-ID: <200003081723.SAA04355@pubhealth.ku.dk>

Full_Name: Peter Green
Version: 1.0.0 and 0.99.0
OS: windows 98
Submission from: (NULL) (194.83.240.36)


Running R (either 1.0.0 or 0.99.0) under Windows 98 on
my Toshiba laptop (Satellite 4080), I get a problem
when I hit the print toolbar button with the graph window on top.
It declares an illegal operation, and produces the error
messages reproduced below (slightly different in each
version). It then terminates R and returns to the desktop.

The printer is an HP 6MP, directly connected to the laptop,
no network.

All is fine on my desktop with Windows NT4.0.

Is this a known problem?   

R 1.0.0

RGUI caused an exception 10H in module R.DLL at 015f:1002460b.
Registers:
EAX=00000006 CS=015f EIP=1002460b EFLGS=00010246
EBX=00000000 SS=0167 ESP=0253f220 EBP=0253f258
ECX=0045c8f0 DS=0167 ESI=02ee81c8 FS=0e47
EDX=00000001 ES=0167 EDI=0045c8f0 GS=0000
Bytes at CS:EIP:
dd 99 90 0a 00 00 89 81 90 0a 00 00 8b 81 34 24
Stack dump:     
0045c8f0 02ee81c8 0045c8f0 1007449a 00000002 0322a560
0253f258 1001b862 0045c8f0 00000000 0253f298 10023f7d
00455f70 1000e0fd 0253f298 100249a2

R 0.99.0

RGUI caused an exception 10H in module R.DLL at 015f:1002450b.
Registers:
EAX=00000006 CS=015f EIP=1002450b EFLGS=00010246
EBX=00000000 SS=0167 ESP=0253f220 EBP=0253f258
ECX=0045bad0 DS=0167 ESI=02e6c064 FS=3407
EDX=00000001 ES=0167 EDI=0045bad0 GS=0000
Bytes at CS:EIP:
dd 99 90 0a 00 00 89 81 90 0a 00 00 8b 81 34 24
Stack dump:
0045bad0 02e6c064 0045bad0 100737da 00000002 0318a260
0253f258 1001b822 0045bad0 00000000 0253f298 10023e7d
00455fa0 1000e0dd 0253f298 100248a2
                                                                                
                                                      

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar  8 18:58:20 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 08 Mar 2000 13:58:20 -0500
Subject: [Rd] Re: [Omega-devel] StatDataML Description element
References: <Pine.GSO.4.21.0003080823460.22094-100000@mail.biostat.washington.edu>
Message-ID: <38C6A2CC.405047D2@bank-banque-canada.ca>

Thomas

(I'm getting a bit confused about whether this discussion is taking
place on r-devel or omega-devel, and perhaps everyone is on both lists)

I just posted something on R-devel which I hope addresses many of the
points you mentioned, in particular pointing out that I meant encryption
for the purpose of authentication, not for the purpose of making
something secret, and I was using the term "communication protocol"
rather loosely. In particular, I meant it more broadly than something
like TCP/IP, which would handle accidental corruption during
transmission.

>For this purpose you would want a field that was a (cryptographically
>secure) hash of the data. This could be signed using a public key
system ...

I was rather brief on this point, but it turns out to be a problem to do
this in a way that can be authenticated. That's why encryption is
necessary and why authentication has to be done outside the data format.
It would be possible to build this level into R, for example, in the
same way that Netscape can handle the authentication of email messages,
but it seems to make much more sense to draw on the services from
something like CORBA (which I believe can provide this). In any case, it
has to be "outside" the data format in the same way that it is outside
an email message.

If you are just thinking of the hash for an occassional data set, then
providing a publicly available hash may be adequate. I don't think we
would consider that adequate authentication for data we provide to the
public on a regular basis, because of the problem that the hash can be
spoofed.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgutwin@us.ibm.com  Wed Mar  8 20:00:35 2000
From: pgutwin@us.ibm.com (pgutwin@us.ibm.com)
Date: Wed, 8 Mar 2000 15:00:35 -0500
Subject: [Rd] Error compiling R on RS6000 (PR#475)
Message-ID: <OF18295FA2.47E108A9-ON8525689C.006D91F2@pok.ibm.com>


(sorry - gcc changed underneath me and I was getting a bogus compile error)
I am now getting the same results: Illegal Instruction. I did a little
poking around and found (I think) that during a return following an
UNPROTECT the code is jumping to address #000000. Does this help any?

----------------------------------------------------------------------------------------------------------

Paul Gutwin
802-769-6433
 X86 Product Development
pgutwin@us.ibm.com


Thomas J Vogels <tov@ece.cmu.edu>@bavaria.ece.cmu.edu on 03/07/2000
05:31:43 PM

Please respond to Thomas Vogels <tov@ece.cmu.edu>

Sent by:  tov@bavaria.ece.cmu.edu


To:   Paul Gutwin/Burlington/IBM@IBMUS, r-devel@stat.math.ethz.ch,
      tov@ece.cmu.edu
cc:
Subject:  Re: [Rd] Error compiling R on RS6000 (PR#475)




Hi,

  I'll assume Paul meant config.site which contains all the extra
  compiler and linker flags and those flags are somewhat involved in
  his environment.  Triggered by Paul's email I tried to
  compile R-1.0.0.  It compiles cleanly but dies with "Illegal
  Instruction" upon start.  Sorry, I don't have any further insight
  into this problem at this time.

  I've been working on my Linux box instead of the my AIX workstation
  lately, so I didn't see this earlier.  Actually I've been so busy
  using R, that I've missed to congratulate on the release or 1.0.
  Thanks to all who work on R which has been a tremendous help for me!

  -tom


Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> pgutwin@us.ibm.com writes:
>
> > Full_Name: Paul Gutwin
> > Version: R-1.0.0
> > OS: AIX 4.2.1
> > Submission from: (NULL) (198.133.22.67)
> >
> >
> > R-1.0.0 fails to compile. I'm using the config.cache file from a
successful
>
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> > compliation of R-0.65.0 (prob #290, fixed thanks to Thomas Vogels @
CMU).
>   ^^^^^^^^^^^^^^^^^^^^^^^
>
> What on earth gives you the idea that that might work?? The configure
> scripts have changed many a time since 0.65.0. Or was config.cache a
> typo?

--
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgutwin@us.ibm.com  Wed Mar  8 20:04:02 2000
From: pgutwin@us.ibm.com (pgutwin@us.ibm.com)
Date: Wed, 8 Mar 2000 15:04:02 -0500
Subject: [Rd] Error compiling R on RS6000 (PR#475)
Message-ID: <OFE5F04C32.10597618-ON8525689C.006DFEC0@pok.ibm.com>


Oops - sorry. The aforementioned jump to #00000 is performed someplace deep
in R_LoadProfile, called at line 417 in main.c

----------------------------------------------------------------------------------------------------------

Paul Gutwin
802-769-6433
 X86 Product Development
pgutwin@us.ibm.com

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar  9 00:04:11 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Mar 2000 01:04:11 +0100
Subject: [Rd] Printing graphs on W98 laptop (PR#477)
In-Reply-To: P.J.Green@bristol.ac.uk's message of "Wed, 8 Mar 2000 18:23:34 +0100 (MET)"
References: <200003081723.SAA04355@pubhealth.ku.dk>
Message-ID: <x266ux6mbo.fsf@blueberry.kubism.ku.dk>

P.J.Green@bristol.ac.uk writes:

> Is this a known problem?   

It's been reported before, but been unreproduceable for any of the
developers... I'm fairly sure this is the exact same spot that tripped
Bendix & coworkers. On their systems it appears to depend on the day
of the week and go away when the system adinistrators are looking!
Yours seems to be the first "plain" system (i.e. non-networked
printers) with the problem. Hmm... Are you any good with a debugger?

> 
> R 1.0.0
> 
> RGUI caused an exception 10H in module R.DLL at 015f:1002460b.
> Registers:
> EAX=00000006 CS=015f EIP=1002460b EFLGS=00010246
> EBX=00000000 SS=0167 ESP=0253f220 EBP=0253f258
> ECX=0045c8f0 DS=0167 ESI=02ee81c8 FS=0e47
> EDX=00000001 ES=0167 EDI=0045c8f0 GS=0000
> Bytes at CS:EIP:
> dd 99 90 0a 00 00 89 81 90 0a 00 00 8b 81 34 24
> Stack dump:     
> 0045c8f0 02ee81c8 0045c8f0 1007449a 00000002 0322a560
> 0253f258 1001b862 0045c8f0 00000000 0253f298 10023f7d
> 00455f70 1000e0fd 0253f298 100249a2


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hoffmann@ehmgs2.et.tu-dresden.de  Thu Mar  9 08:43:03 2000
From: hoffmann@ehmgs2.et.tu-dresden.de (hoffmann@ehmgs2.et.tu-dresden.de)
Date: Thu, 9 Mar 2000 09:43:03 +0100 (MET)
Subject: [Rd] Conditional for XDR code left out in saveload.c (PR#478)
Message-ID: <200003090843.JAA07578@pubhealth.ku.dk>

Full_Name: Thomas Hoffmann
Version: 1.0.0
OS: OS/2 Warp 4.0 FP 11
Submission from: (NULL) (141.30.125.20)


I autoconfigured/configured the src'es w/o having XDR (#undef HAVE_RPC_XDR_H).

In saveload.c , at the beginning of the file the XDR code is enclosed by
matching #ifdefs.

But in the NEW_SAVE_FORMAT section, there are no #ifdefs around the XDR code.

Does this imply that using the new save format requires using XDR or is 
this simply an oversight?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar  9 09:10:51 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 9 Mar 2000 09:10:51 +0000 (GMT)
Subject: [Rd] Conditional for XDR code left out in saveload.c (PR#478)
In-Reply-To: <200003090843.JAA07578@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10003090908141.7342-100000@auk.stats>

On Thu, 9 Mar 2000 hoffmann@ehmgs2.et.tu-dresden.de wrote:

> Full_Name: Thomas Hoffmann
> Version: 1.0.0
> OS: OS/2 Warp 4.0 FP 11
> Submission from: (NULL) (141.30.125.20)
> 
> 
> I autoconfigured/configured the src'es w/o having XDR (#undef HAVE_RPC_XDR_H).
> 
> In saveload.c , at the beginning of the file the XDR code is enclosed by
> matching #ifdefs.
> 
> But in the NEW_SAVE_FORMAT section, there are no #ifdefs around the XDR code.
> 
> Does this imply that using the new save format requires using XDR or is 
> this simply an oversight?

The defines in R_SaveToFile and R_LoadFromFile determine what is 
actually used.  I think all that happens is that unused code is not
excluded from the compile (and that happens with the BinarySave code
if XDR is available).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Mar 10 10:09:02 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 10 Mar 2000 11:09:02 +0100
Subject: [Rd] Using WinEdt as editor for R
Message-ID: <38C8C9BE.DE9F7CD2@statistik.uni-dortmund.de>

I just uploaded the archive "R-WinEdt" to CRAN.
You will find it in "Contributed Extensions" - "Non-standard
Extensions".

Note: WinEdt is a Windows 32-bit editor (shareware). (Mik)TeX users may
know the editor.


Relevant part of Readme.txt:

==========================================================================
Using WinEdt as an editor and pager for R			09.03.2000
==========================================================================

Overview:
---------

  This package contains an example and macro file to configure WinEdt
  as an editor or pager for R.


Features:
---------

  - Syntax-Highlighting
  - Pasting selected code from WinEdt directly to R (i.e. from history)
  - Faster start than with standard configuration
  - features of WinEdt (i.e. Delimiter Check, ...)

[.....]
==========================================================================


Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Mar 10 10:34:01 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Fri, 10 Mar 2000 11:34:01 +0100 (CET)
Subject: [Rd] README & Apache
Message-ID: <14536.53145.633068.790805@galadriel.ci.tuwien.ac.at>



Due to recent config changes Apache does (by default) not list files
called ``README'' anymore but only prints the contents. This can be a
hassle if you want to download the file ...

As we have no control over all CRAN mirrors we can therefore only
rename the files such that they get listed again. Brian Ripley
suggested to use ReadMe instead which seems to be safe (at least
currently).

I have renamed all files on CRAN over which I have control (i.e., the
ones we do not mirror from some other place), Brian has done his
subtree.

**This applies only to people maintaining CRAN subtrees**: Please
rename all files called README that people might want to download to
ReadMe (or some other safe name). Attached you find a list of
candidates.

The reason why I'm writing this to r-devel is that we want to
discourage the use of name ``README'' for future submissions. I will
configure the CRAN master site in a minute such that it prints
ReadMe's, but also lists the file in the directory listing.

Best,
Fritz

**********************************************************

galadriel:R$ find -name README
./bin/windows/README
./bin/windows/windows-NT/base/README
./bin/windows/windows-NT/README
./bin/osf/osf4.0/tar/alpha_ev5/README
./bin/osf/osf4.0/RPMS/alpha_ev5/source/README
./bin/osf/osf4.0/RPMS/README
./bin/osf/osf4.0/RPMS/alpha_ev6/source/README
./bin/osf/osf4.0/README
./bin/linux/redhat/SRPMS/contrib/README
./bin/linux/redhat/6.x/sparc/README
./bin/linux/redhat/6.x/i386/README
./bin/linux/redhat/6.x/alpha/README
./bin/linux/linuxppc/5.0/README
./bin/linux/suse/5.3/RPMS/i386/source/README
./bin/linux/suse/5.3/RPMS/i386/README
./bin/linux/suse/6.0/RPMS/i386/source/README
./bin/linux/suse/6.0/RPMS/i386/README
./bin/linux/suse/6.2/RPMS/i386/source/README
./bin/linux/suse/6.2/RPMS/i386/README
./bin/linux/suse/README
/bin/linux/suse/6.3/RPMS/i386/README
./src/base/README
./src/base/Historic/Windows/README
./src/base/Historic/README

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Fri Mar 10 14:19:27 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Fri, 10 Mar 2000 15:19:27 +0100 (CET)
Subject: [Rd] StatDataML version 0.1-2
In-Reply-To: <38C6A2CC.405047D2@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.21.0003101514560.30227-100000@boromir.ci.tuwien.ac.at>


I just uploaded version 0.1-2 of the StatDataML proposal with the 
changes discussed this week to 

http://www.ci.tuwien.ac.at/~leisch/R/

Also available at this adress version 0.2-2 of the R implementation of
StatDataML and version 0.1-3 of the XML package. 

Torsten 

*****************************************************************
*								*
* Torsten Hothorn, Statistician					*
* at the moment: Institut fuer Statistik, TU Wien		*
* Tel: 0043 1 58801 10772					*
* Fax: 0043 1 58801 10798					*
*								*
*****************************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Mon Mar 13 01:23:45 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Mon, 13 Mar 2000 02:23:45 +0100 (MET)
Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
Message-ID: <200003130123.CAA03987@pubhealth.ku.dk>

plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))

  shows axis labels as:
  
      |    |    |    |    |     |
                                0
  rather than
      |    |    |    |    |    |
      5    4    3    2    1    0

as I believe it used to do in some earlier version.

Thank you for R.

Rashid Nassar

--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Shannon2, Autoloads, package:base





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Mar 13 12:44:10 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 13 Mar 2000 12:44:10 +0000 (GMT)
Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
Message-ID: <200003131244.MAA07249@toucan.stats.ox.ac.uk>


> From: rnassar@duke.edu
> Date: Mon, 13 Mar 2000 02:23:45 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
> 
>   shows axis labels as:
>   
>       |    |    |    |    |     |
>                                 0
>   rather than
>       |    |    |    |    |    |
>       5    4    3    2    1    0
> 
> as I believe it used to do in some earlier version.

Up to 0.64.2, not since 0.65.0.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Mar 13 13:08:11 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 13 Mar 2000 14:08:11 +0100 (MET)
Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
In-Reply-To: <200003131244.MAA07249@toucan.stats.ox.ac.uk>
References: <200003131244.MAA07249@toucan.stats.ox.ac.uk>
Message-ID: <14540.59451.128319.746184@lynne.ethz.ch>


>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    >> From: rnassar@duke.edu
    >> Date: Mon, 13 Mar 2000 02:23:45 +0100 (MET)
    >> To: r-devel@stat.math.ethz.ch
    >> Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
    >> CC: R-bugs@biostat.ku.dk
    >> X-Loop: R-bugs@biostat.ku.dk
    >> 
    >> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
    >> 
    >> shows axis labels as:
    >> 
    >> |    |    |    |    |     |
    >> 0
    >> rather than
    >> |    |    |    |    |    |
    >> 5    4    3    2    1    0
    >> 
    >> as I believe it used to do in some earlier version.

    BDR> Up to 0.64.2, not since 0.65.0.

No, unfortunately,  happens here with 1.0.0 (even patched; "R-release")

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 13 13:23:53 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Mar 2000 14:23:53 +0100
Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
In-Reply-To: Martin Maechler's message of "Mon, 13 Mar 2000 14:08:11 +0100 (MET)"
References: <200003131244.MAA07249@toucan.stats.ox.ac.uk> <14540.59451.128319.746184@lynne.ethz.ch>
Message-ID: <x2bt4jj95i.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> >>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

>     >> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
>     >> 
>     >> shows axis labels as:
>     >> 
>     >> |    |    |    |    |     |
>     >> 0
>     >> rather than
>     >> |    |    |    |    |    |
>     >> 5    4    3    2    1    0
>     >> 
>     >> as I believe it used to do in some earlier version.
> 
>     BDR> Up to 0.64.2, not since 0.65.0.
> 
> No, unfortunately,  happens here with 1.0.0 (even patched; "R-release")
> 

I think Brian meant that it hasn't done the  5 4 3 2 1 thing since
0.64.2...  

In general, it can be argued that the reversed xy limits are not safe
and shouldn't be, since things are likely not to work at the device
level with a mirrored coordinate system (I.e.: if we decide that it
should work, we may find ourselves fixing lots of small glitches in
devxxx.c). 

Plotting (5-x,5-y) and doing the axes with axis(n, at=0:5, labels=5:0)
will get the plot done in a cleaner, albeit more cumbersome fashion.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From neteler@geog.uni-hannover.de  Mon Mar 13 18:04:51 2000
From: neteler@geog.uni-hannover.de (neteler@geog.uni-hannover.de)
Date: Mon, 13 Mar 2000 19:04:51 +0100 (MET)
Subject: [Rd] check does not accept --vsize option (PR#481)
Message-ID: <200003131804.TAA12983@pubhealth.ku.dk>

Full_Name: Markus Neteler
Version: 1.0.0
OS: Linux 2.2.10/i686
Submission from: (NULL) (130.75.72.37)


Hi,

I wanted to "check" the R.GRASS GIS interface from Roger Bivand:
http://www.geog.uni-hannover.de/grass/statsgrasslist.html

using
R CMD check --vsize=10M GRASS

but:

[error message shortened]
> G <- gmeta()
Error: heap memory (6144 Kb) exhausted [needed 1024 Kb more]
       See "help(Memory)" on how to increase the heap size.
Execution halted

It seems that --vsize is ignored. I check R/bin/check, the
parameter is sent properly to R but ignored there. From the
buglist I have seen that this problem occured with --nsize, too.

Hoping for a bug fix!

Kind regards and many thanks for your work

 Markus Neteler
 GRASS GIS 5 coordinator




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Mar 13 19:02:37 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 13 Mar 2000 13:02:37 -0600
Subject: [Rd] check does not accept --vsize option (PR#481)
In-Reply-To: neteler@geog.uni-hannover.de's message of "Mon, 13 Mar 2000 19:04:51 +0100 (MET)"
References: <200003131804.TAA12983@pubhealth.ku.dk>
Message-ID: <6rya7msng2.fsf@franz.stat.wisc.edu>

neteler@geog.uni-hannover.de writes:

> I wanted to "check" the R.GRASS GIS interface from Roger Bivand:
> http://www.geog.uni-hannover.de/grass/statsgrasslist.html
> 
> using
> R CMD check --vsize=10M GRASS
> 
> but:
> 
> [error message shortened]
> > G <- gmeta()
> Error: heap memory (6144 Kb) exhausted [needed 1024 Kb more]
>        See "help(Memory)" on how to increase the heap size.
> Execution halted
> 
> It seems that --vsize is ignored. I check R/bin/check, the
> parameter is sent properly to R but ignored there. From the
> buglist I have seen that this problem occured with --nsize, too.

An R CMD check is designed to run in a protected environment, which is
the reason that some command line switches are ignored.  A workaround
is to specify the size as a shell or environment variable.  That is, use
 R_VSIZE=10M R CMD check GRASS
from a Bourne shell (or equivalent).  From the C-shell you may need to
use
 setenv R_VSIZE 10M
 R CMD check GRASS

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Mon Mar 13 19:11:21 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Mon, 13 Mar 2000 20:11:21 +0100 (MET)
Subject: [Rd] plot(1:10,c(1)$nothing)  yields index plot (PR#482)
Message-ID: <200003131911.UAA13262@pubhealth.ku.dk>

<<insert bug report here>>

IMHO, 

	plot(x,c(1)$nothing)

should fail or at least issue a warning.

Instead it produces an index plot of the first argument, i.e. plot(x)

Chuck Berry

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Patched
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive
Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Mar 13 19:27:42 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 13 Mar 2000 11:27:42 -0800 (PST)
Subject: [Rd] plot(1:10,c(1)$nothing)  yields index plot (PR#482)
In-Reply-To: <200003131911.UAA13262@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0003131116350.18281-100000@mail.biostat.washington.edu>

On Mon, 13 Mar 2000 cberry@tajo.ucsd.edu wrote:

> <<insert bug report here>>
> 
> IMHO, 
> 
> 	plot(x,c(1)$nothing)
> 
> should fail or at least issue a warning.
> 
> Instead it produces an index plot of the first argument, i.e. plot(x)

No, the alternative is worse.

The ability to do plot(x) with x a vector is important.  One might think
that in 
	plot(x,y=NULL)
we could test for missing(y) rather than is.null(y) and issue a warning if
y was NULL but not missing.  More-or-less equivalently we could use
substitute(y) to check whether y was a literal NULL or an expression
evaluating to NULL.

This turns out to be a bad idea, because we must be able to call plot(x)
from other functions (with arbitrarily deep nesting), and it becomes very
messy to trick plot() into handling the arguments correctly as they are
passed from one function to another. 

Since plot(x) can't tell whether the NULL argument is deliberate or
accidental, it shouldn't try to guess and give a warning.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 13 19:49:02 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Mar 2000 20:49:02 +0100
Subject: [Rd] plot(1:10,c(1)$nothing)  yields index plot (PR#482)
In-Reply-To: Thomas Lumley's message of "Mon, 13 Mar 2000 11:27:42 -0800 (PST)"
References: <Pine.GSO.4.21.0003131116350.18281-100000@mail.biostat.washington.edu>
Message-ID: <x23dpuabwx.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> This turns out to be a bad idea, because we must be able to call plot(x)
> from other functions (with arbitrarily deep nesting), and it becomes very
> messy to trick plot() into handling the arguments correctly as they are
> passed from one function to another. 

Actually, S-plus has that problem, not R:

> f<-function(x,y)g(x,y)
> g<-function(x,y)missing(y)
> f(2)
[1] F

where R propagates missings just fine:

> f<-function(x,y)g(x,y)
> g<-function(x,y)missing(y)
> f(2)
[1] TRUE

but given the amount of ported code we have to deal with, we probably
have to be able to deal with NULLs being passed to signify absent
arguments. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 13 20:28:41 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 13 Mar 2000 20:28:41 +0000 (GMT)
Subject: [Rd] check does not accept --vsize option (PR#481)
In-Reply-To: <6rya7msng2.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.GSO.4.05.10003132010540.26046-100000@auk.stats>

On 13 Mar 2000, Douglas Bates wrote:

> neteler@geog.uni-hannover.de writes:
> 
> > I wanted to "check" the R.GRASS GIS interface from Roger Bivand:
> > http://www.geog.uni-hannover.de/grass/statsgrasslist.html
> > 
> > using
> > R CMD check --vsize=10M GRASS
> > 
> > but:
> > 
> > [error message shortened]
> > > G <- gmeta()
> > Error: heap memory (6144 Kb) exhausted [needed 1024 Kb more]
> >        See "help(Memory)" on how to increase the heap size.
> > Execution halted
> > 
> > It seems that --vsize is ignored. I check R/bin/check, the
> > parameter is sent properly to R but ignored there. From the
> > buglist I have seen that this problem occured with --nsize, too.

What version of R were you using?  That bug report was from 0.99.0,
I think.

> An R CMD check is designed to run in a protected environment, which is
> the reason that some command line switches are ignored.  A workaround
> is to specify the size as a shell or environment variable.  That is, use
>  R_VSIZE=10M R CMD check GRASS
> from a Bourne shell (or equivalent).  From the C-shell you may need to
> use
>  setenv R_VSIZE 10M
>  R CMD check GRASS

I think CMD check _is_ now supposed to accept --vsize and --nsize:

auk%  R CMD check --help
Usage: R CMD check [options] pkgs
...
  --vsize=N             set R's vector heap size to N bytes
  --nsize=N             set R's number of cons cells to N


However, it seems not to work correctly

ARGUMENT '{R_opts}' __ignored__

appears in *.Rout on Solaris, and only one of them is accepted.

In the check script we need

    --nsize=*)
      R_opts="${R_opts} ${1}" ;;
    --vsize=*)
      R_opts="${R_opts} ${1}" ;;

adding a couple of `$'.


On (t)csh I use something like.

env R_VSIZE=10M R CMD check GRASS


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aim@uwo.ca  Mon Mar 13 21:02:44 2000
From: aim@uwo.ca (aim@uwo.ca)
Date: Mon, 13 Mar 2000 22:02:44 +0100 (MET)
Subject: [Rd] error in par option xaxt (PR#483)
Message-ID: <200003132102.WAA13861@pubhealth.ku.dk>

Full_Name: Ian McLeod
Version: 1
OS: WinNT
Submission from: (NULL) (129.100.45.131)


The plot optional argument xaxt does not work.  Setting xaxt="n" has no effect,
the axis is annotated. The R online documention provides an example. See
help(axis) and try to execute the illustrative script. The annotated labels are
overwritten.

For convenience, I have extracted the following from the help(axis) page:

plot(1:4, rnorm(4), axes=FALSE)
axis(1, 1:4, LETTERS[1:4])
axis(2)
box() #- to make it look "as usual"

plot(1:7, rnorm(7), type = 's', xaxt='n', col = 'red')
axis(1, 1:7, LETTERS[1:7], col.axis = 'blue')




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aim@uwo.ca  Mon Mar 13 21:03:02 2000
From: aim@uwo.ca (aim@uwo.ca)
Date: Mon, 13 Mar 2000 22:03:02 +0100 (MET)
Subject: [Rd] error in par option xaxt (PR#484)
Message-ID: <200003132103.WAA13875@pubhealth.ku.dk>

Full_Name: Ian McLeod
Version: 1
OS: WinNT
Submission from: (NULL) (129.100.45.131)


The plot optional argument xaxt does not work.  Setting xaxt="n" has no effect,
the axis is annotated. The R online documention provides an example. See
help(axis) and try to execute the illustrative script. The annotated labels are
overwritten.

For convenience, I have extracted the following from the help(axis) page:

plot(1:4, rnorm(4), axes=FALSE)
axis(1, 1:4, LETTERS[1:4])
axis(2)
box() #- to make it look "as usual"

plot(1:7, rnorm(7), type = 's', xaxt='n', col = 'red')
axis(1, 1:7, LETTERS[1:7], col.axis = 'blue')




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyzhang@umich.edu  Mon Mar 13 21:13:29 2000
From: lyzhang@umich.edu (lyzhang@umich.edu)
Date: Mon, 13 Mar 2000 22:13:29 +0100 (MET)
Subject: [Rd] Install R1.0.0 (PR#485)
Message-ID: <200003132113.WAA13935@pubhealth.ku.dk>


Hello,

I tried to compile and install R. After I ran
make 2>&1 | tee log
., I got the following error:

making system.d from system.c
system.c:37: readline/readline.h: No such file or directory
make[3]: *** [system.d] Error 1
make[3]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
0.0/src/unix'
make[2]: *** [R] Error 2
make[2]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
0.0/src/unix'
make[1]: *** [R] Error 1
make[1]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
0.0/src'
make: *** [R] Error 1



Please help.

Lots aof thanks!

*=======================================* 
*	Lynn Zhang             	        *
*	LS&A System Services Team       *
*	lyzhang@umich.edu               *
*=======================================*


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Mar 13 21:24:59 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 13 Mar 2000 13:24:59 -0800 (PST)
Subject: [Rd] Install R1.0.0 (PR#485)
In-Reply-To: <200003132113.WAA13935@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0003131315460.18281-100000@mail.biostat.washington.edu>

On Mon, 13 Mar 2000 lyzhang@umich.edu wrote:

> 
> Hello,
> 
> I tried to compile and install R. After I ran
> make 2>&1 | tee log
> ., I got the following error:
> 
> making system.d from system.c
> system.c:37: readline/readline.h: No such file or directory

It looks as though you are trying to use GNU readline without it being
present.  This shouldn't be allowed by configure.

Try 
     make distclean
     ./configure
     make

again, to see if the problem goes away. If it doesn't then
look at src/include/config.h to see if you have something like
/* GNU Readline Library */
#define HAVE_LIBREADLINE 1
#define HAVE_READLINE_HISTORY_H 1
#define HAVE_READLINE_READLINE_H 1
indicating that configure thinks you have readline or like
/* GNU Readline Library */
/* #undef HAVE_LIBREADLINE */
/* #undef HAVE_READLINE_HISTORY_H */
/* #undef HAVE_READLINE_READLINE_H */
indicating that it doesn't.

In either case there would be a problem with configure, but a different
one. It's possible, for example, that configure is finding the readline
headers but that the compiler isn't looking in the same place.

Of course this is assuming you do have the GNU readline library and
headers. If you don't, then
	./configure --without-readline
is a workaround, though we would still like to know why configure thinks
you have it.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle




> make[3]: *** [system.d] Error 1
> make[3]: Leaving directory
> `/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
> 0.0/src/unix'
> make[2]: *** [R] Error 2
> make[2]: Leaving directory
> `/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
> 0.0/src/unix'
> make[1]: *** [R] Error 1
> make[1]: Leaving directory
> `/afs/lsa.umich.edu/group/admin/software/build/R/R-1.
> 0.0/src'
> make: *** [R] Error 1
> 
> 
> 
> Please help.
> 
> Lots aof thanks!
> 
> *=======================================* 
> *	Lynn Zhang             	        *
> *	LS&A System Services Team       *
> *	lyzhang@umich.edu               *
> *=======================================*
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 13 21:46:59 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 13 Mar 2000 21:46:59 +0000 (GMT)
Subject: [Rd] error in par option xaxt (PR#483)
In-Reply-To: <200003132102.WAA13861@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10003132143060.27721-100000@auk.stats>

On Mon, 13 Mar 2000 aim@uwo.ca wrote:

> Full_Name: Ian McLeod
> Version: 1
> OS: WinNT
> Submission from: (NULL) (129.100.45.131)
> 
> 
> The plot optional argument xaxt does not work.  Setting xaxt="n" has no effect,
> the axis is annotated. The R online documention provides an example. See
> help(axis) and try to execute the illustrative script. The annotated labels are
> overwritten.

You mean 1.0.0, I think. That bug is already fixed for R-release: as you
are on Windows you will just need to compile it up from source

As a workaround, 

par(xaxt='n')
plot(1:7, rnorm(7), type = 's', col = 'red')

_does_ work: it is only the inline setting that is broken, and only in that
version.

[I don't understand why this was sent out twice with different PR# numbers?
Did you submit it twice?]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Mar 14 09:32:37 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 14 Mar 2000 10:32:37 +0100 (MET)
Subject: [Rd] Re: autoload error in profile {was anova-bug in R-version  1.0.0?} (PR#486)
Message-ID: <200003140932.KAA17259@pubhealth.ku.dk>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Tue, 7 Mar 2000, Martin Maechler wrote:
    >> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
    >> 
    BDR> On Tue, 7 Mar 2000, Trenkler, Dietrich wrote:
    >> >> I think I've discovered what went wrong.
    >> >> 
    >> >> My workspace included a function wilcox.test formerly copied from
    >> >> ctest. Now ctest ist part of the distribution and because of that I
    >> >> always got the message:
    >> >> 
    >> >> [Previously saved workspace restored]
    >> >> 
    >> >> Error in autoload("wilcox.test", "ctest") :
    >> >> Object already exists
    >> >> 
    >> >> I didn't take care of this message. Now I removed wilcox.test, saved
    >> >> the WS, restarted R without the vanilla-option and alas, anova
    >> >> now works.
    >> >> 
    >> >> It seems that R stops initializing after encountering the error
    >> >> mentioned above. Is this correct?   
    >> 
    BDR> Yes, in that the rest of the system Rprofile file is skipped
    BDR> and hence options show.signif.stars and show.coef.Pvalues are not set.
    >> but other options as well..
    >> I think this shouldn't happen and *is* a bug.

    BDR> It looks to me as if a bit more protection is needed in print.coefmat,
    BDR> at least.

	 which Brian has implemented in the mean time.

	 ....

    >> For the 1.0.x patches, at least, I'll move the autoload()'s to the end of
    >> profile/Common.R

    BDR> I _think_ they should have try() around them, which is what S-PLUS 
    BDR> now does with all startup code.

I tried this, but it does not work :

try(autoload(..)) works okay when used after startup, but not *during*
startup.  However, I'll put a workaround into Common.R

Should this {try(.) not working during startup} be another bug report ?

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Tue Mar 14 11:16:27 2000
From: dtrenkler@nts6.oec.uni-osnabrueck.de (dtrenkler@nts6.oec.uni-osnabrueck.de)
Date: Tue, 14 Mar 2000 12:16:27 +0100 (MET)
Subject: [Rd] Bug in sub? (PR#487)
Message-ID: <200003141116.MAA19358@pubhealth.ku.dk>

I suspect that there is bug in sub when using "?":

> string_"This is a bug!"
>  sub("!", ", or isn't it?", string)
[1] "This is a bug, or isn't it?"
> string_"This is a bug?"
>  sub("?", ", or isn't it?", string)
[1] "This is a bug?"


Regards,

  *** D.Trenkler ***

====================================================================
Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
Statistik / Empirische Wirtschaftsforschung
Universitaet Osnabrueck
Rolandstrasse 8                           Phone: +49(0) 541-969-2753
D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
GERMANY
====================================================================


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows NT 4.0 (build 1381) Service Pack 3

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Tue Mar 14 11:22:54 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Tue, 14 Mar 2000 12:22:54 +0100 (CET)
Subject: [Rd] Bug in sub? (PR#487)
In-Reply-To: <200003141116.MAA19358@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0003141221520.18407-100000@boromir.ci.tuwien.ac.at>


> I suspect that there is bug in sub when using "?":
> 
> > string_"This is a bug!"
> >  sub("!", ", or isn't it?", string)
> [1] "This is a bug, or isn't it?"
> > string_"This is a bug?"
> >  sub("?", ", or isn't it?", string)
> [1] "This is a bug?"


R> string_"This is a bug?"
R> sub("[?]", ", or isn't it?", string)
[1] "This is a bug, or isn't it?"

works, has "?" a special meaning in regexp?

Torsten


> 
> 
> Regards,
> 
>   *** D.Trenkler ***
> 
> ====================================================================
> Dietrich Trenkler                   (trenkler@oec.uni-osnabrueck.de)
> Statistik / Empirische Wirtschaftsforschung
> Universitaet Osnabrueck
> Rolandstrasse 8                           Phone: +49(0) 541-969-2753
> D-49069 Osnabrueck                        Fax  : +49(0) 541-969-2745
> GERMANY
> ====================================================================
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 0.0
>  year = 2000
>  month = February
>  day = 29
>  language = R
> 
> Windows NT 4.0 (build 1381) Service Pack 3
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 14 11:33:38 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 2000 12:33:38 +0100
Subject: [Rd] Bug in sub? (PR#487)
In-Reply-To: dtrenkler@nts6.oec.uni-osnabrueck.de's message of "Tue, 14 Mar 2000 12:16:27 +0100 (MET)"
References: <200003141116.MAA19358@pubhealth.ku.dk>
Message-ID: <x266up4wh9.fsf@blueberry.kubism.ku.dk>

dtrenkler@nts6.oec.uni-osnabrueck.de writes:

> I suspect that there is bug in sub when using "?":
> 
> > string_"This is a bug!"
> >  sub("!", ", or isn't it?", string)
> [1] "This is a bug, or isn't it?"
> > string_"This is a bug?"
> >  sub("?", ", or isn't it?", string)
> [1] "This is a bug?"

Hmm. If there is a bug it may not where you think...

'?' is an operator of extended regular expressions, so you're not
looking for a question mark there: 

>  sub("\\?", ", or isn't it?", string)
[1] "This is a bug, or isn't it?"

>  sub("?", ", or isn't it?", ext=F, string)
[1] "This is a bug, or isn't it?"

One might expect that a null RE would always match the beginning of a
string, but it doesn't...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From simon.frost@ed.ac.uk  Tue Mar 14 13:15:54 2000
From: simon.frost@ed.ac.uk (simon.frost@ed.ac.uk)
Date: Tue, 14 Mar 2000 14:15:54 +0100 (MET)
Subject: [Rd] Error in lme? (PR#488)
Message-ID: <200003141315.OAA21607@pubhealth.ku.dk>

Full_Name: Simon Frost
Version: 1.0.0
OS: Windows
Submission from: (NULL) (129.215.60.79)


Hi everyone,

I've just installed R for Windows - I've previously been using it on Linux -
and I've run into a problem when using lme.

The lme routine throws up an error in the getGroups.data.frame command,
complaining about an error in the formula:

Error in getGroups.data.frame(dataMix, groups) : 
        Invalid formula for groups

getGroups works just fine, and I haven't run into this problem previously.

Any ideas?

Best wishes
Simon

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Mar 14 13:44:56 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 14 Mar 2000 07:44:56 -0600
Subject: [Rd] Error in lme? (PR#488)
In-Reply-To: simon.frost@ed.ac.uk's message of "Tue, 14 Mar 2000 14:15:54 +0100 (MET)"
References: <200003141315.OAA21607@pubhealth.ku.dk>
Message-ID: <6rg0ttll7r.fsf@franz.stat.wisc.edu>

simon.frost@ed.ac.uk writes:

> I've just installed R for Windows - I've previously been using it on Linux -
> and I've run into a problem when using lme.
> 
> The lme routine throws up an error in the getGroups.data.frame command,
> complaining about an error in the formula:
> 
> Error in getGroups.data.frame(dataMix, groups) : 
>         Invalid formula for groups
> 
> getGroups works just fine, and I haven't run into this problem previously.

Could you send us an example call that generates this error
(preferably using one of the data sets that comes with R)?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lyzhang@umich.edu  Tue Mar 14 21:33:30 2000
From: lyzhang@umich.edu (Lynn Zhang)
Date: Tue, 14 Mar 2000 16:33:30 -0500 (EST)
Subject: [Rd] Install R1.0.0 (PR#485)
In-Reply-To: <Pine.GSO.4.21.0003131315460.18281-100000@mail.biostat.washington.edu>
Message-ID: <Pine.SOL.3.95.1000314163154.17926J-100000@kongzi.admin.lsa.umich.edu>


Hello,

After I run make, I got the following error,

__d_sign                            /usr/lsa/lib/libblas.a(drotg.o)
ld: fatal: Symbol referencing errors. No output written to ../../bin/R.X11
make[3]: *** [../../bin/R.X11] Error 1
make[3]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.0.0/src/main'
make[2]: *** [R] Error 2
make[2]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.0.0/src/main'
make[1]: *** [R] Error 1
make[1]: Leaving directory
`/afs/lsa.umich.edu/group/admin/software/build/R/R-1.0.0/src'
make: *** [R] Error 1


Would you please help me on that?

Lots of thanks!




*=======================================* 
*	Lynn Zhang             	        *
*	LS&A System Services Team       *
*	lyzhang@umich.edu               *
*=======================================*

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Wed Mar 15 11:03:03 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Wed, 15 Mar 2000 12:03:03 +0100
Subject: [Rd] solaris without x
Message-ID: <38CF6DE7.896575F0@univie.ac.at>

i am trying to compile the current release on solaris 8.
i do not have a complete x installation on my server.
so i tried
./configure --without-x
this is what i get

making dataentry.d from dataentry.c
In file included from dataentry.c:28:
dataentry.h:22: X11/X.h: No such file or directory
dataentry.h:23: X11/Xlib.h: No such file or directory
dataentry.h:24: X11/Xutil.h: No such file or directory
dataentry.h:25: X11/keysym.h: No such file or directory
dataentry.h:26: X11/cursorfont.h: No such file or directory
make[3]: *** [dataentry.d] Error 1

./configure --without-x --without-dataentry --disable-dataentry

this is what i get

make[3]: Entering directory `/servers/space/neuwirth/R/R-release/src/unix'
gcc -I. -I../include -I../../src/include -I../../src/include/R_ext   -DHAVE_CONF
IG_H  -g -O2 -c dataentry.c -o dataentry.o
In file included from dataentry.c:28:
dataentry.h:22: X11/X.h: No such file or directory
dataentry.h:23: X11/Xlib.h: No such file or directory
dataentry.h:24: X11/Xutil.h: No such file or directory
dataentry.h:25: X11/keysym.h: No such file or directory
dataentry.h:26: X11/cursorfont.h: No such file or directory
make[3]: *** [dataentry.o] Error 1

can anybody help me?



--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Mar 15 11:17:14 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 15 Mar 2000 12:17:14 +0100 (CET)
Subject: [Rd] solaris without x
In-Reply-To: <38CF6DE7.896575F0@univie.ac.at>
References: <38CF6DE7.896575F0@univie.ac.at>
Message-ID: <14543.28986.899408.308721@aragorn.ci.tuwien.ac.at>

>>>>> Erich Neuwirth writes:

> i am trying to compile the current release on solaris 8.
> i do not have a complete x installation on my server.
> so i tried
> ./configure --without-x
> this is what i get

> making dataentry.d from dataentry.c
> In file included from dataentry.c:28:
> dataentry.h:22: X11/X.h: No such file or directory
> dataentry.h:23: X11/Xlib.h: No such file or directory
> dataentry.h:24: X11/Xutil.h: No such file or directory
> dataentry.h:25: X11/keysym.h: No such file or directory
> dataentry.h:26: X11/cursorfont.h: No such file or directory
> make[3]: *** [dataentry.d] Error 1

> ./configure --without-x --without-dataentry --disable-dataentry

> this is what i get

> make[3]: Entering directory `/servers/space/neuwirth/R/R-release/src/unix'
> gcc -I. -I../include -I../../src/include -I../../src/include/R_ext   -DHAVE_CONF
> IG_H  -g -O2 -c dataentry.c -o dataentry.o
> In file included from dataentry.c:28:
> dataentry.h:22: X11/X.h: No such file or directory
> dataentry.h:23: X11/Xlib.h: No such file or directory
> dataentry.h:24: X11/Xutil.h: No such file or directory
> dataentry.h:25: X11/keysym.h: No such file or directory
> dataentry.h:26: X11/cursorfont.h: No such file or directory
> make[3]: *** [dataentry.o] Error 1

> can anybody help me?

Simply speaking, --without-x is not supported (yet).  We are planning to
package GUIs (X11, GNOME) in the near future, and along with that we
should also make it possible to build without X.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 15 11:34:20 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Mar 2000 12:34:20 +0100
Subject: [Rd] solaris without x
In-Reply-To: Kurt Hornik's message of "Wed, 15 Mar 2000 12:17:14 +0100 (CET)"
References: <38CF6DE7.896575F0@univie.ac.at> <14543.28986.899408.308721@aragorn.ci.tuwien.ac.at>
Message-ID: <x2r9dco4ar.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> Simply speaking, --without-x is not supported (yet).  We are planning to
> package GUIs (X11, GNOME) in the near future, and along with that we
> should also make it possible to build without X.

However, last I tried (a couple of years back, admittedly...) it
wasn't terribly difficult to force the sources to compile without X.
Basically, place R on the operating table and rip out the relevant
internal organs... I.e. you need to remove the entire dataentry.c and
devX11.c and all references to X include files and functions in other
places. 

If you figure out how to do this with proper #ifdef'ing I think we'd
like to have the patches (it is much easier to get right on a system
that doesn't actuallly have X11, and gives an error if one forget to
remove something...).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Wed Mar 15 13:31:00 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Wed, 15 Mar 2000 14:31:00 +0100
Subject: [Rd] headers needed in gcc
Message-ID: <38CF9094.EEE7BEEC@univie.ac.at>

i am working my way to create a stdin-stdout version of R

i am not a gcc configuration expert.
currently, i am missing

#include <sys/types.h>
#  include <sys/socket.h>
#  include <netinet/in.h>
#  include <netinet/tcp.h>
#include "sock.h"

as far as i understand my system,
these header files shpuld be in
/usr/local/lib/gcc-lib/sparc-sun-solaris2.7/2.95.1/include

what library do i have to create in gcc
to get these goodies?



--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Mar 15 14:08:41 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 15 Mar 2000 15:08:41 +0100 (MET)
Subject: [Rd] headers needed in gcc
In-Reply-To: <38CF9094.EEE7BEEC@univie.ac.at>
References: <38CF9094.EEE7BEEC@univie.ac.at>
Message-ID: <14543.39273.545539.516566@lynne.ethz.ch>

>>>>> "Erich" == Erich Neuwirth <erich.neuwirth@univie.ac.at> writes:

    Erich> i am working my way to create a stdin-stdout version of R
    Erich> i am not a gcc configuration expert.
    Erich> currently, i am missing

    Erich> #include <sys/types.h>
    Erich> #  include <sys/socket.h>
    Erich> #  include <netinet/in.h>
    Erich> #  include <netinet/tcp.h>

    Erich> #include "sock.h"
well, "sock.h"  (as the `"' suggests) is a local file, 
in this case, it's in the same directory as the *.c file which includes it.
 
    Erich> as far as i understand my system,
    Erich> these header files shpuld be in
    Erich> /usr/local/lib/gcc-lib/sparc-sun-solaris2.7/2.95.1/include

Well, I think to remember that for gcc under Solaris,
it looks *BOTH* in
   /usr/local/lib/gcc-lib/sparc..../<version>/include
AND
   /usr/include/

i.e. /usr/include/sys/  and /usr/include/netinet/  may contain your
headers..
Otherwise, try

    cd /usr/include
    find . -name types.h
    find . -name tcp.h

etc.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Wed Mar 15 15:20:26 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Wed, 15 Mar 2000 16:20:26 +0100
Subject: [Rd] question
Message-ID: <38CFAA3A.1108F0CC@univie.ac.at>

here is another question (kurt already knows about it).
i would like to do a client server version
of R where the server can run on a unix box and the client
is excel ond a win machine.
the easiest solution would be running a stdin-stdout version
of the server through inetd.
but this is vulnerable.
so what is needed is a sandbox version of the server,
where no acrtive access to the file system is open
and where spawning processes is disabled.
are there any plans for doing such a version?


--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Wed Mar 15 15:52:29 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Wed, 15 Mar 2000 16:52:29 +0100 (MET)
Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
Message-ID: <200003151552.QAA07465@pubhealth.ku.dk>

Dear Sirs,

Thank you very much for your replies.  If I may, and assuming this makes
sense, I would like to suggest as a low-priority wish-list item for a
future version that perhaps the plot function could take an additional
optional argument (e.g. reverse, which can have values "x", "y" or "xy")
which would make the plot function do the calculations suggested by Dr
Dalgaard below to allow easy plotting with reversed axis values, and even
prehaps issue a warning message for xlim=c(5:2) to make it clear that this
is not supposed to work that way?  Just some thoughts. 

Thank you again!

Rashid Nassar


On 13 Mar 2000, Peter Dalgaard BSA wrote:

> Date: 13 Mar 2000 14:23:53 +0100
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> To: Martin Maechler <maechler@stat.math.ethz.ch>
> Cc: Prof Brian Ripley <ripley@stats.ox.ac.uk>, r-devel@stat.math.ethz.ch,
>     rnassar@duke.edu, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
> 
> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > >>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> >     >> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
> >     >> 
> >     >> shows axis labels as:
> >     >> 
> >     >> |    |    |    |    |     |
> >     >> 0
> >     >> rather than
> >     >> |    |    |    |    |    |
> >     >> 5    4    3    2    1    0
> >     >> 
> >     >> as I believe it used to do in some earlier version.
> > 
> >     BDR> Up to 0.64.2, not since 0.65.0.
> > 
> > No, unfortunately,  happens here with 1.0.0 (even patched; "R-release")
> > 
> 
> I think Brian meant that it hasn't done the  5 4 3 2 1 thing since
> 0.64.2...  
> 
> In general, it can be argued that the reversed xy limits are not safe
> and shouldn't be, since things are likely not to work at the device
> level with a mirrored coordinate system (I.e.: if we decide that it
> should work, we may find ourselves fixing lots of small glitches in
> devxxx.c). 
> 
> Plotting (5-x,5-y) and doing the axes with axis(n, at=0:5, labels=5:0)
> will get the plot done in a cleaner, albeit more cumbersome fashion.
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> 
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Wed Mar 15 15:44:23 2000
From: rnassar@duke.edu (Rashid Nassar)
Date: Wed, 15 Mar 2000 10:44:23 -0500 (EST)
Subject: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
In-Reply-To: <x2bt4jj95i.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SOL.3.91.1000315103144.28375A-100000@bio3.acpub.duke.edu>

Dear Sirs,

Thank you very much for your replies.  If I may, and assuming this makes
sense, I would like to suggest as a low-priority wish-list item for a
future version that perhaps the plot function could take an additional
optional argument (e.g. reverse, which can have values "x", "y" or "xy")
which would make the plot function do the calculations suggested by Dr
Dalgaard below to allow easy plotting with reversed axis values, and even
prehaps issue a warning message for xlim=c(5:2) to make it clear that this
is not supposed to work that way?  Just some thoughts. 

Thank you again!

Rashid Nassar


On 13 Mar 2000, Peter Dalgaard BSA wrote:

> Date: 13 Mar 2000 14:23:53 +0100
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> To: Martin Maechler <maechler@stat.math.ethz.ch>
> Cc: Prof Brian Ripley <ripley@stats.ox.ac.uk>, r-devel@stat.math.ethz.ch,
>     rnassar@duke.edu, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] problem with plot(...., xlim=c(5,0)) (PR#480)
> 
> Martin Maechler <maechler@stat.math.ethz.ch> writes:
> 
> > >>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> >     >> plot(1:4,1:4,xlim=c(5,0),ylim=c(5,0))
> >     >> 
> >     >> shows axis labels as:
> >     >> 
> >     >> |    |    |    |    |     |
> >     >> 0
> >     >> rather than
> >     >> |    |    |    |    |    |
> >     >> 5    4    3    2    1    0
> >     >> 
> >     >> as I believe it used to do in some earlier version.
> > 
> >     BDR> Up to 0.64.2, not since 0.65.0.
> > 
> > No, unfortunately,  happens here with 1.0.0 (even patched; "R-release")
> > 
> 
> I think Brian meant that it hasn't done the  5 4 3 2 1 thing since
> 0.64.2...  
> 
> In general, it can be argued that the reversed xy limits are not safe
> and shouldn't be, since things are likely not to work at the device
> level with a mirrored coordinate system (I.e.: if we decide that it
> should work, we may find ourselves fixing lots of small glitches in
> devxxx.c). 
> 
> Plotting (5-x,5-y) and doing the axes with axis(n, at=0:5, labels=5:0)
> will get the plot done in a cleaner, albeit more cumbersome fashion.
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 15 16:33:17 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Mar 2000 17:33:17 +0100
Subject: [Rd] question
In-Reply-To: Erich Neuwirth's message of "Wed, 15 Mar 2000 16:20:26 +0100"
References: <38CFAA3A.1108F0CC@univie.ac.at>
Message-ID: <x2em9cnqgi.fsf@blueberry.kubism.ku.dk>

Erich Neuwirth <erich.neuwirth@univie.ac.at> writes:

> here is another question (kurt already knows about it). i would like
> to do a client server version of R where the server can run on a
> unix box and the client is excel ond a win machine. the easiest
> solution would be running a stdin-stdout version of the server
> through inetd. but this is vulnerable. so what is needed is a
> sandbox version of the server, where no acrtive access to the file
> system is open and where spawning processes is disabled. are there
> any plans for doing such a version?

No immediate plans no.

It sounds a bit dangerous with dyn.load and whatnot floating around.
What would be more likely to work would be to have a version of R that
would immediately chroot() to a directory specified on the command
line and an inetd.conf entry like

auth stream  tcp nowait  nobody  \
   /usr/sbin/tcpd in.Rdaemon --chroot=/usr/lib/Rdaemon 

and setup /usr/lib/Rdaemon as a "chroot jail" with no write
permissions and /bin and /lib subdirectories with only the few system
commands and .so files needed to run (if there are any), and with an
/RHOME tree with packages and soforth. That way, it could do little
damage apart from eating CPU cycles. (Much like the way in which
anonymous FTP is set up).
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Mar 15 16:35:12 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 15 Mar 2000 08:35:12 -0800 (PST)
Subject: [Rd] question
In-Reply-To: <38CFAA3A.1108F0CC@univie.ac.at>
Message-ID: <Pine.GSO.4.21.0003150821350.22376-100000@mail.biostat.washington.edu>

On Wed, 15 Mar 2000, Erich Neuwirth wrote:

> here is another question (kurt already knows about it).
> i would like to do a client server version
> of R where the server can run on a unix box and the client
> is excel ond a win machine.
> the easiest solution would be running a stdin-stdout version
> of the server through inetd.
> but this is vulnerable.
> so what is needed is a sandbox version of the server,
> where no acrtive access to the file system is open
> and where spawning processes is disabled.
> are there any plans for doing such a version?


This would be very hard to do properly.  It's certainly possible to
disable the interpreted commands that access the file system, and even to
remove them from the symbol table so that .C and .Internal can't get to
them. This would stop accidental damage or casual attacks.

However I don't think we can disable .C/.Fortran completely.  By passing
data of the wrong types to .C a sufficiently malicious program can
overwrite the stack and get with very little effort the sort of effect
that usually takes buffer overflows. 

I think a secure version of R would require rewriting all the important .C
and .Fortran code to use Internal or .Call and then disabling .C and
.Fortran as well as system() and all the file access commands (or perhaps 
restricting the file access to a specific tree as http servers do).

In the foreseeable future I think the solution is to assume that R can
execute arbitrary code and either run in a safe account or authenticate
the connection somehow. 


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Wed Mar 15 18:02:22 2000
From: luke@stat.umn.edu (Luke Tierney)
Date: Wed, 15 Mar 2000 12:02:22 -0600 (CST)
Subject: [Rd] question
In-Reply-To: <38CFAA3A.1108F0CC@univie.ac.at> from Erich Neuwirth at "Mar 15, 2000 04:20:26 pm"
Message-ID: <200003151802.MAA23423@nokomis.stat.umn.edu>

Erich Neuwirth wrote:
> here is another question (kurt already knows about it).
> i would like to do a client server version
> of R where the server can run on a unix box and the client
> is excel ond a win machine.
> the easiest solution would be running a stdin-stdout version
> of the server through inetd.
> but this is vulnerable.
> so what is needed is a sandbox version of the server,
> where no acrtive access to the file system is open
> and where spawning processes is disabled.
> are there any plans for doing such a version?
> 

You could have a look at some of the things Jeff Banfield did for Rweb
(http://www.math.montana.edu/Rweb).  He disabled some things to get a
moderate increase in security, but as Thomas and Peter said, you
really can't drop dyn.load and .C and with those more or less anything
is open to someone who knows what they are doing.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Wed Mar 15 18:52:41 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Wed, 15 Mar 2000 19:52:41 +0100
Subject: [Rd] compiling
Message-ID: <38CFDBF9.C8B9D227@univie.ac.at>

here i am again.
it turns out that
the link step does not automatically include
the lnsl library, which contains the tcp stuff.
how can i tell configure it should use the relevant library
in the link step?
i cannot find a way of doing this.


--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Mar 15 18:55:58 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 15 Mar 2000 10:55:58 -0800 (PST)
Subject: [Rd] compiling
In-Reply-To: <38CFDBF9.C8B9D227@univie.ac.at>
Message-ID: <Pine.GSO.4.21.0003151055380.22376-100000@mail.biostat.washington.edu>

On Wed, 15 Mar 2000, Erich Neuwirth wrote:

> here i am again.
> it turns out that
> the link step does not automatically include
> the lnsl library, which contains the tcp stuff.
> how can i tell configure it should use the relevant library
> in the link step?
> i cannot find a way of doing this.

Add it to the LIBS variable in config.site

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Wed Mar 15 20:42:17 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Wed, 15 Mar 2000 21:42:17 +0100
Subject: [Rd] solaris without x
References: <38CF6DE7.896575F0@univie.ac.at> <14543.28986.899408.308721@aragorn.ci.tuwien.ac.at> <x2r9dco4ar.fsf@blueberry.kubism.ku.dk>
Message-ID: <38CFF5A9.2634CAAA@univie.ac.at>

ok,
i managed to create a non x-rated version of R

i am not an expert in writing configurations,
so i just give the changes.
perhaps some kind soul can integrate them into configure and
the different Makefile.in
or wheerever chanegs are needed.

-=-=-=-=-=-=

the following changes are needed:

necessary changes in 
src/unix/Makefile

old
SOURCES = dataentry.c devX11.c dynload.c edit.c rotated.c \
         system.c sys-unix.c sys-common.c
--->
new
SOURCES = dynload.c edit.c  \
          system.c sys-unix.c sys-common.c

probably sensible changes:
remove
HEADERS = dataentry.h devX11.h rotated.h

-=-=-=-=-=-=-=-=-=-=-

necessary changes in 
src/main/devices.c

#ifdef Unix

has to be changed to
Unix AND X11
(or whatever the syntax needed is)

-=-=-=-=-=-=-=-=-=-=-

necessary changes in 
src/main/names.c
remove the entry
{"dataentry",   do_dataentry,   0,      11,     1,      PP_FUNCALL},

-=-=-=-=-=-=-=-=-=-=-

necessary changes in 
src/unix/system.c

1. remove

            case XActivity:
                R_ProcessEvents();
                break;

2. remove 

#include "devX11.h"
#define XActivity 1
    int connectionfd = X11ConnectionNumber();


3. remove 
    if (connectionfd > 0) {
        FD_SET(connectionfd, &readMask);
        if (connectionfd > stdinfd)
            maxfd = connectionfd;

4. remove 
   if (connectionfd > 0)
        if (FD_ISSET(connectionfd, &readMask))
            return XActivity;



-=-=-=-=-=-=-=-=-=-=-


> However, last I tried (a couple of years back, admittedly...) it
> wasn't terribly difficult to force the sources to compile without X.
> Basically, place R on the operating table and rip out the relevant
> internal organs... I.e. you need to remove the entire dataentry.c and
> devX11.c and all references to X include files and functions in other
> places.
> 
> If you figure out how to do this with proper #ifdef'ing I think we'd
> like to have the patches (it is much easier to get right on a system
> that doesn't actuallly have X11, and gives an error if one forget to
> remove something...).
> 
--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Wed Mar 15 23:27:33 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Thu, 16 Mar 2000 10:27:33 +1100
Subject: [Rd] question
In-Reply-To: <38CFAA3A.1108F0CC@univie.ac.at>; from erich.neuwirth@univie.ac.at on Wed, Mar 15, 2000 at 04:20:26PM +0100
References: <38CFAA3A.1108F0CC@univie.ac.at>
Message-ID: <20000316102733.A9676@ftoomsh.progsoc.uts.edu.au>

On Wed, Mar 15, 2000 at 04:20:26PM +0100, Erich Neuwirth wrote:
> here is another question (kurt already knows about it).
> i would like to do a client server version
> of R where the server can run on a unix box and the client
> is excel ond a win machine.
> the easiest solution would be running a stdin-stdout version
> of the server through inetd.
> but this is vulnerable.

It isn't too bad if you feed it through the /usr/sbin/tcpd
service which can screen incoming connections (various
filtering rules go into /etc/hosts.allow and /etc/hosts.deny,
see the man page for tcpd). If your local network keeps
static IP numbers then add all the acceptable machines into
your /etc/hosts file so you have a local copy of their IP numbers
and no one can use the DNS to confuse your machine, also make
sure nothing nearby has source-routing switched on.

That is reasonably secure if you can trust the machines which
you are allowing connections from and your routers are set up
in a way that they cannot get confused. It is still possible
for someone to clip their laptop to the local network, use a
false IP number and maybe make a connection but this is pretty
unlikely and you probably will see the person doing it (unless
your local network is completely insecure like ours).

Naturally, using a chroot is a good idea and creating a local
unix user that does only this and owns no files except its
own tree is also a good idea.

	- Tel
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Mar 16 08:02:03 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 16 Mar 2000 09:02:03 +0100 (MET)
Subject: [Rd] Attachments with bug reports: PLEASE don't
In-Reply-To: <200003160435.FAA26315@stat.math.ethz.ch>
References: <200003160435.FAA26315@stat.math.ethz.ch>
Message-ID: <14544.38139.84527.599335@lynne.ethz.ch>

Dear Gregory,
you'v sent a bug report (PR#489) to R-bugs
with the subject
  "r-base_1.0.0-1_i386.deb install problem (PR#489)"

you end saying

>> I've attached both the modified control file, and a complete debian
>> package which is identical to the original except for this change.
>> 
>> -Gregory 
 
and then you have a 5 MB attachment, filename "r-base_1.0.0-2_i386.deb"
base64 encoded.
{and hence (size!) the automatic forwarding of the bug report to R-devel
 is bounced --- that's how I got it}.

Now, please  (everyone!)

     >>>> --------------------------------------- <<<<
     >>>> stop using attachments in R bug reports <<<<
     >>>> --------------------------------------- <<<<

1) the attachments become practically unusable once the bug report is 
   put in the jitterbug archive,
      http://bugs.r-project.org
      ~~~~~~~~~~~~~~~~~~~~~~~~~
2) Bug reports should usually be short (up to at most a few hundred lines, IMO)
   
3) If you (really) need to provide long files for data or such,
   make them available via FTP or HTTP from your site..

---

However, thank you for sending useful bug reports!
	 ---------
This way you are becoming part of the ``R culture''
which as most Open Source / Free Software projects
relies on wide collaboration.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Thu Mar 16 22:25:29 2000
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Thu, 16 Mar 2000 23:25:29 +0100 (MET)
Subject: [Rd] R-1.0.0 on alpha/osf1 memory glitch (PR#490)
Message-ID: <200003162225.XAA21838@pubhealth.ku.dk>

Digital Alpha (various), Digital UNIX V4.0[EF], R-1.0.0, gcc, f77

When using batch mode with the save option, an error message is issued.
However [I have just discovered that] it appears that the operation
does complete, i.e. the .RData file is saved successfully.  The main
problem is that the return code is non-zero (and so it is impossible to
distinguish this "non-error" from some other error in a script).

Reproduce by:

    bats>  echo 'x <- 1' | R --save
    
    R : Copyright 2000, The R Development Core Team
    Version 1.0.0  (February 29, 2000)
    
    R is free software and comes with ABSOLUTELY NO WARRANTY.
    You are welcome to redistribute it under certain conditions.
    Type    "?license" or "?licence" for distribution details.
    
    R is a collaborative project with many contributors.
    Type    "?contributors" for a list.
    
    Type    "demo()" for some demos, "help()" for on-line help, or
            "help.start()" for a HTML browser interface to help.
    Type    "q()" to quit R.
    
    > x <- 1
    >
    xmalloc: out of virtual memory
    bats> 

Note that an alternate form that achieves the same desired effect does
not issue any error messages:

    echo 'x <- 1; save(list = ls(), file = ".RData")' | R --no-save

I can't find any record of the configure summary output (is it saved
anywhere, or does it only appear on the screen?) but I could reproduce
this if necessary.

Ray Brownrigg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 17 07:32:00 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 17 Mar 2000 08:32:00 +0100
Subject: [Rd] solaris without x
In-Reply-To: <38CFF5A9.2634CAAA@univie.ac.at>
References: <38CF6DE7.896575F0@univie.ac.at>
 <14543.28986.899408.308721@aragorn.ci.tuwien.ac.at>
 <x2r9dco4ar.fsf@blueberry.kubism.ku.dk>
 <38CFF5A9.2634CAAA@univie.ac.at>
Message-ID: <200003170732.IAA01479@aragorn.ci.tuwien.ac.at>

>>>>> Erich Neuwirth writes:

> ok,
> i managed to create a non x-rated version of R

> i am not an expert in writing configurations, so i just give the
> changes.  perhaps some kind soul can integrate them into configure and
> the different Makefile.in or wheerever chanegs are needed.

I'll try to merge the changes into R, but it may take a few days ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 17 07:32:00 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 17 Mar 2000 08:32:00 +0100
Subject: [Rd] compiling
In-Reply-To: <Pine.GSO.4.21.0003151055380.22376-100000@mail.biostat.washington.edu>
References: <38CFDBF9.C8B9D227@univie.ac.at>
 <Pine.GSO.4.21.0003151055380.22376-100000@mail.biostat.washington.edu>
Message-ID: <200003170732.IAA01482@aragorn.ci.tuwien.ac.at>

>>>>> Thomas Lumley writes:

> On Wed, 15 Mar 2000, Erich Neuwirth wrote:
>> here i am again.
>> it turns out that
>> the link step does not automatically include
>> the lnsl library, which contains the tcp stuff.
>> how can i tell configure it should use the relevant library
>> in the link step?
>> i cannot find a way of doing this.

> Add it to the LIBS variable in config.site

> 	-thomas

Or, do

	LIBS=-lnsl /path/to/configure

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 17 07:32:01 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 17 Mar 2000 08:32:01 +0100
Subject: [Rd] headers needed in gcc
In-Reply-To: <38CF9094.EEE7BEEC@univie.ac.at>
References: <38CF9094.EEE7BEEC@univie.ac.at>
Message-ID: <200003170732.IAA01487@aragorn.ci.tuwien.ac.at>

>>>>> Erich Neuwirth writes:

> i am working my way to create a stdin-stdout version of R
> i am not a gcc configuration expert.
> currently, i am missing

> #include <sys/types.h>
> #  include <sys/socket.h>
> #  include <netinet/in.h>
> #  include <netinet/tcp.h>
> #include "sock.h"

> as far as i understand my system, these header files shpuld be in
> /usr/local/lib/gcc-lib/sparc-sun-solaris2.7/2.95.1/include

> what library do i have to create in gcc to get these goodies?

I don't know whether the header files ``should'' be in gcc-lib (in which
case gcc should also find them), but the code definitely needs some
help.  I don't think that sys/socket.h or netinet/*.h are ANSI C, and
this is all we assume.  We should have AC_CONFIG_HEADER tests for each
of these, and not have sockets if the headers cannot be found.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kthaka@uta.fi  Fri Mar 17 09:16:11 2000
From: kthaka@uta.fi (kthaka@uta.fi)
Date: Fri, 17 Mar 2000 10:16:11 +0100 (MET)
Subject: [Rd] lag (PR#491)
Message-ID: <200003170916.KAA24535@pubhealth.ku.dk>

Full_Name: Hannu Kahra
Version: 1.0.0
OS: Windows
Submission from: (NULL) (153.1.50.127)


x1 <- lag(x, k=1) returns the original series x. The time series is not
shiftet at all. Only the time is shiftet: for x1 new start = old start -1 
and new end = old end -1. When I run, e.g. lm(x~x1) the result is not what
I expect. Both x and x1 are time series. Is this a bug or am I forgetting
something?

Regards
Hannu Kahra 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 17 09:38:18 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 17 Mar 2000 09:38:18 +0000 (GMT)
Subject: [Rd] lag (PR#491)
In-Reply-To: <200003170916.KAA24535@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10003170931560.26211-100000@auk.stats>

On Fri, 17 Mar 2000 kthaka@uta.fi wrote:

> Full_Name: Hannu Kahra
> Version: 1.0.0
> OS: Windows
> Submission from: (NULL) (153.1.50.127)
> 
> 
> x1 <- lag(x, k=1) returns the original series x. The time series is not
> shiftet at all. Only the time is shiftet: for x1 new start = old start -1 
> and new end = old end -1. When I run, e.g. lm(x~x1) the result is not what

So that is _not_ the original series!

> I expect. Both x and x1 are time series. Is this a bug or am I forgetting
> something?

Your description is exactly as documented:

Lag a Time Series

Description:

     Computed a lagged version of a time series, shifting the time base
     back by `k' observations.

[Please read the documentation before submitting a bug report. The FAQ
tells you what a bug is.]

Don't apply regression (a non-time-series technique) to time series, and
expect the implicit conversion to vectors to preserve the time alignment.
Do something like

library(ts)
data(lh)
df <- cbind(x=lh, x1 =lag(lh, 1))
lm(x ~ x1, data=df)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From robertasg@takas.lt  Fri Mar 17 15:35:38 2000
From: robertasg@takas.lt (robertasg@takas.lt)
Date: Fri, 17 Mar 2000 16:35:38 +0100 (MET)
Subject: [Rd] the R bug (PR#492)
Message-ID: <200003171535.QAA01208@pubhealth.ku.dk>

This is a multi-part message in MIME format.

------=_NextPart_000_0005_01BF9034.A9183BA0
Content-Type: text/plain;
	charset="iso-8859-4"
Content-Transfer-Encoding: quoted-printable

Hello, i am from Lithuania=20
I am workink with program R. But i have problem, if i need work with =
more als 220Mb disk space. Free disk space i have 2Gb.=20
Can you help me??

Sincerly Robertas Geistoraitis form Lithuania from Genetic Laboratory=20
University of Veterinary



------=_NextPart_000_0005_01BF9034.A9183BA0
Content-Type: text/html;
	charset="iso-8859-4"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META content=3D"text/html; charset=3Diso-8859-4" =
http-equiv=3DContent-Type>
<META content=3D"MSHTML 5.00.2614.3500" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT face=3DArial size=3D2>Hello, i am from Lithuania =
</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>I am workink with program R. But i have =
problem, if=20
i need work with more als 220Mb disk space. Free disk space i have 2Gb.=20
</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>Can you help me??</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>Sincerly Robertas Geistoraitis form =
Lithuania from=20
Genetic Laboratory </FONT></DIV>
<DIV><FONT face=3DArial size=3D2>University of Veterinary</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV></BODY></HTML>

------=_NextPart_000_0005_01BF9034.A9183BA0--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Fri Mar 17 15:35:30 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Fri, 17 Mar 2000 16:35:30 +0100
Subject: [Rd] lag (PR#491)
References: <Pine.GSO.4.05.10003170931560.26211-100000@auk.stats>
Message-ID: <38D250C1.5D6EBE49@univie.ac.at>

here is another thing

on my relatively standard solaris 7 configuration i had to put
LIB="-lnsl -lsocket"
in config.site

perhaps this can be done by configure automatically,
if gcc is found?


--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar 17 16:30:34 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 17 Mar 2000 08:30:34 -0800 (PST)
Subject: [Rd] -nsl
In-Reply-To: <38D250C1.5D6EBE49@univie.ac.at>
Message-ID: <Pine.GSO.4.21.0003170826340.29031-100000@mail.biostat.washington.edu>

On Fri, 17 Mar 2000, Erich Neuwirth wrote:

> here is another thing
> 
> on my relatively standard solaris 7 configuration i had to put
> LIB="-lnsl -lsocket"
> in config.site
> 
> perhaps this can be done by configure automatically,
> if gcc is found?

On my Solaris 7 configuration it is looked for automatically with either
cc or gcc. The check is part of X_EXTRA_LIBS

If we are going to configure --without-x it would need to be
checked for.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dirk@surfer.sbm.temple.edu  Fri Mar 17 17:02:48 2000
From: dirk@surfer.sbm.temple.edu (dirk@surfer.sbm.temple.edu)
Date: Fri, 17 Mar 2000 18:02:48 +0100 (MET)
Subject: [Rd] optim: problem with additional arguments (PR#493)
Message-ID: <200003171702.SAA01912@pubhealth.ku.dk>

The R function "optim" fails when a function requires additional
arguments, if the option "hessian=T" is specified.  I am using R Version
1.0.0 on Windows 98.

Here is an example of the Rosenbrock Banana function from the optim help
example, with the function and gradient modified to take an additonal
argument.  Note that the call to optim works fine unless a hessian is
requested.


     ## Rosenbrock Banana function, modified to take an additional
argument
     fra <- function(x,a) {
         x1 <- x[1]
         x2 <- x[2]
         a * (x2 - x1 * x1)^2 + (1 - x1)^2
     }

     grra <- function(x,a) {
         x1 <- x[1]
         x2 <- x[2]
         c(-4*a * x1 * (x2 - x1 * x1) - 2 * (1 - x1), 2*a * (x2 - x1 *
x1))
     }
a <- 100
xx <- c(-2.1,1)
optim(c(-1.2,1), fra, grra, method = "BFGS",a=100)             # this
works
optim(c(-1.2,1), fra, grra, method = "BFGS",hessian=T,a=100)   # this
doesn't



Dirk Moore
Dept. of Statistics
Temple University
dirk@sbm.temple.edu




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 17 17:28:28 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 17 Mar 2000 18:28:28 +0100 (CET)
Subject: [Rd] -nsl
In-Reply-To: <Pine.GSO.4.21.0003170826340.29031-100000@mail.biostat.washington.edu>
References: <38D250C1.5D6EBE49@univie.ac.at>
 <Pine.GSO.4.21.0003170826340.29031-100000@mail.biostat.washington.edu>
Message-ID: <14546.27452.734481.937821@aragorn.ci.tuwien.ac.at>

>>>>> Thomas Lumley writes:

> On Fri, 17 Mar 2000, Erich Neuwirth wrote:
>> here is another thing
>> 
>> on my relatively standard solaris 7 configuration i had to put
>> LIB="-lnsl -lsocket"
>> in config.site
>> 
>> perhaps this can be done by configure automatically,
>> if gcc is found?

> On my Solaris 7 configuration it is looked for automatically with
> either cc or gcc. The check is part of X_EXTRA_LIBS

> If we are going to configure --without-x it would need to be checked
> for.

I think we need to test for socket functionality, both for header files
and libraries.  Let me see if I can come up with such a test ...

Where did sock.c && friends come from?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar 17 17:43:20 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 17 Mar 2000 09:43:20 -0800 (PST)
Subject: [Rd] -nsl
In-Reply-To: <14546.27452.734481.937821@aragorn.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.21.0003170942240.29432-100000@mail.biostat.washington.edu>

On Fri, 17 Mar 2000, Kurt Hornik wrote:

> >>>>> Thomas Lumley writes:
> 
> > On Fri, 17 Mar 2000, Erich Neuwirth wrote:
> >> here is another thing
> >> 
> >> on my relatively standard solaris 7 configuration i had to put
> >> LIB="-lnsl -lsocket"
> >> in config.site
> >> 
> >> perhaps this can be done by configure automatically,
> >> if gcc is found?
> 
> > On my Solaris 7 configuration it is looked for automatically with
> > either cc or gcc. The check is part of X_EXTRA_LIBS
> 
> > If we are going to configure --without-x it would need to be checked
> > for.
> 
> I think we need to test for socket functionality, both for header files
> and libraries.  Let me see if I can come up with such a test ...
> 
> Where did sock.c && friends come from?

They're based on Luke's socket code for xlispstat.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 17 18:43:42 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Mar 2000 19:43:42 +0100
Subject: [Rd] optim: problem with additional arguments (PR#493)
In-Reply-To: dirk@surfer.sbm.temple.edu's message of "Fri, 17 Mar 2000 18:02:48 +0100 (MET)"
References: <200003171702.SAA01912@pubhealth.ku.dk>
Message-ID: <x2zorxfndt.fsf@blueberry.kubism.ku.dk>

dirk@surfer.sbm.temple.edu writes:

> The R function "optim" fails when a function requires additional
> arguments, if the option "hessian=T" is specified.  I am using R Version
> 1.0.0 on Windows 98.
....
> optim(c(-1.2,1), fra, grra, method = "BFGS",a=100)             # this
> works
> optim(c(-1.2,1), fra, grra, method = "BFGS",hessian=T,a=100)   # this
> doesn't

Yes. However, you can easily fix it for yourself. In optim(), the line

    hess <- .Internal(optimhess(res$par, fn, gr, con))

needs to be modified along the lines of

    res <- .Internal(optim(par, function(par) fn(par, ...),
                           function(par) gr(par, ...),
                           method, con, lower, upper))

(although that might get you in trouble if gr is NULL, so a permanent
fix would be slightly different.)


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Hoffmann" <thoffman@zappa.sax.de  Fri Mar 17 23:04:10 2000
From: Thomas Hoffmann" <thoffman@zappa.sax.de (Thomas Hoffmann)
Date: Sat, 18 Mar 00 00:04:10 +0100
Subject: [Rd] d-p-q-r-tests: why is plnorm(exp(Inf)) equal pnorm(Inf)?
Message-ID: <38d2b9ec.thoffman.zappa@zappa.sax.de>

I stumbled across a result of d-p-q-r-tests:

d-p-q-r-tests expects pnorm(Inf) and pnorm(-Inf)  to give the same results as  plnorm(exp(Inf)) 
and plnorm(exp(-Inf)), respectively.

Does this mean that all expressions result in NaN (which I expect for the 3rd and 4th expression only) or 
does it mean that R can prevent the exp(Inf) to be evaluated before being parsed in the context of plnorm?

Thomas Hoffmann.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar 17 23:38:48 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 17 Mar 2000 15:38:48 -0800 (PST)
Subject: [Rd] d-p-q-r-tests: why is plnorm(exp(Inf)) equal pnorm(Inf)?
In-Reply-To: <38d2b9ec.thoffman.zappa@zappa.sax.de>
Message-ID: <Pine.GSO.4.21.0003171536410.29432-100000@mail.biostat.washington.edu>

On Sat, 18 Mar 2000, Thomas Hoffmann wrote:

> I stumbled across a result of d-p-q-r-tests:
> 
> d-p-q-r-tests expects pnorm(Inf) and pnorm(-Inf)  to give the same results as  plnorm(exp(Inf)) 
> and plnorm(exp(-Inf)), respectively.
> 
> Does this mean that all expressions result in NaN (which I expect for
> the 3rd and 4th expression only) or does it mean that R can prevent
> the exp(Inf) to be evaluated before being parsed in the context of
> plnorm?

No, it means that exp(Inf) and exp(-Inf) are evaluated correctly (Inf and
0 respectively) and the lognormal cdf is then evaluated as 1 and 0
respectively. 

If the result were NaN then equality would not hold. Nothing is equal to
NaN, not even itself.



	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Sat Mar 18 05:14:17 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 18 Mar 2000 00:14:17 -0500
Subject: [Rd] AIX fails on startup with R-1.0.0
Message-ID: <87ln3g97x2.fsf@bavaria.ece.cmu.edu>


Hi,

this is not a bug report since this may not be a problem with R per se. 

The current release of R (1.1.0) will compile cleanly on an AIX box
(I have 4.3.2) but it will fail upon startup with an Illegal
Instruction.  I've located the problem to be in do_strsplit when R
calls regcomp.

This function is defined in regex.c.  However, the text from regex.o
doesn't find its way into the executable, R.X11, since there's also a
regcomp in /usr/lib/libc.a  Apparently, this confuses the system
enough to completely lose its mind.  When regcomp in libc.a gets
called, the stack is trashed which made this hard to debug.

A temporary fix is to remove the _first_ use of -lc from the linker
command line.  This will affect the way the export symbols are
defined.  Not sure yet whether this matters.

Why does this bug only show up on AIX?  Is this some weird posix trap?

Thanks,
  -tom  

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Mar 18 10:58:00 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Mar 2000 11:58:00 +0100
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: Thomas J Vogels's message of "18 Mar 2000 00:14:17 -0500"
References: <87ln3g97x2.fsf@bavaria.ece.cmu.edu>
Message-ID: <x2hfe4czpj.fsf@blueberry.kubism.ku.dk>

Thomas J Vogels <tov@ece.cmu.edu> writes:

> Hi,
> 
> this is not a bug report since this may not be a problem with R per se. 
> 
> The current release of R (1.1.0) will compile cleanly on an AIX box
> (I have 4.3.2) but it will fail upon startup with an Illegal
> Instruction.  I've located the problem to be in do_strsplit when R
> calls regcomp.
> 
> This function is defined in regex.c.  However, the text from regex.o
> doesn't find its way into the executable, R.X11, since there's also a
> regcomp in /usr/lib/libc.a  Apparently, this confuses the system
> enough to completely lose its mind.  When regcomp in libc.a gets
> called, the stack is trashed which made this hard to debug.
> 
> A temporary fix is to remove the _first_ use of -lc from the linker
> command line.  This will affect the way the export symbols are
> defined.  Not sure yet whether this matters.
> 
> Why does this bug only show up on AIX?  Is this some weird posix trap?

We've discussed this recently (others know better than me). I think
you have it spot on, and the problem is that almost all other systems
than AIX will have the linker implicitly move -lc *after* the .o
files... AFAIR the permanent fix is equivalent to your temporary one.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Sat Mar 18 19:18:20 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Sat, 18 Mar 2000 11:18:20 -0800 (PST)
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: <x2hfe4czpj.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu>

On 18 Mar 2000, Peter Dalgaard BSA wrote:

> Thomas J Vogels <tov@ece.cmu.edu> writes:
> 
> > Hi,
> > 
> > this is not a bug report since this may not be a problem with R per se. 
> > 
> > The current release of R (1.1.0) will compile cleanly on an AIX box
> > (I have 4.3.2) but it will fail upon startup with an Illegal
> > Instruction.  I've located the problem to be in do_strsplit when R
> > calls regcomp.
> > 
> > This function is defined in regex.c.  However, the text from regex.o
> > doesn't find its way into the executable, R.X11, since there's also a
> > regcomp in /usr/lib/libc.a  Apparently, this confuses the system
> > enough to completely lose its mind.  When regcomp in libc.a gets
> > called, the stack is trashed which made this hard to debug.
> > 
> > A temporary fix is to remove the _first_ use of -lc from the linker
> > command line.  This will affect the way the export symbols are
> > defined.  Not sure yet whether this matters.
> > 
> > Why does this bug only show up on AIX?  Is this some weird posix trap?
> 
> We've discussed this recently (others know better than me). I think
> you have it spot on, and the problem is that almost all other systems
> than AIX will have the linker implicitly move -lc *after* the .o
> files... AFAIR the permanent fix is equivalent to your temporary one.


It's actually a combination of a number of factors.  On most systems we
link with the C compiler, which knows what to do with libc automatically.  
In any case, many linkers can handle the problem as Peter points out.

On AIX we were using ld rather than CC to link, and ld doesn't move -lc to
the end, and we were using a hardcoded set of linker options that some
helpful user had sent in a long time ago (no-one in R-core has very
convenient access to AIX). It worked fine until we added GNU regex to R.

The fix was what you suggest.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Sun Mar 19 14:50:30 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Sun, 19 Mar 2000 15:50:30 +0100
Subject: [Rd] windows version
References: <87ln3g97x2.fsf@bavaria.ece.cmu.edu> <x2hfe4czpj.fsf@blueberry.kubism.ku.dk>
Message-ID: <38D4E936.EB941D1C@univie.ac.at>

for all of you using the windows version:
i think having a look at the r-winedt
interface by volker ligges is a good idea.
it works quite nicely.

i talked to volker,
and at the moment,
there is something which could be improved,
anmley it would be nice if one could get access to the current
history buffer.

is there a way of getting it
(i.e. exactly what would be saved in .Rhistory if one were to exit right
now)?

then one could interactively edit the current session
in winedt.







Peter Dalgaard BSA wrote:
> 
> Thomas J Vogels <tov@ece.cmu.edu> writes:
> 
> > Hi,
> >
> > this is not a bug report since this may not be a problem with R per se.
> >
> > The current release of R (1.1.0) will compile cleanly on an AIX box
> > (I have 4.3.2) but it will fail upon startup with an Illegal
> > Instruction.  I've located the problem to be in do_strsplit when R
> > calls regcomp.
> >
> > This function is defined in regex.c.  However, the text from regex.o
> > doesn't find its way into the executable, R.X11, since there's also a
> > regcomp in /usr/lib/libc.a  Apparently, this confuses the system
> > enough to completely lose its mind.  When regcomp in libc.a gets
> > called, the stack is trashed which made this hard to debug.
> >
> > A temporary fix is to remove the _first_ use of -lc from the linker
> > command line.  This will affect the way the export symbols are
> > defined.  Not sure yet whether this matters.
> >
> > Why does this bug only show up on AIX?  Is this some weird posix trap?
> 
> We've discussed this recently (others know better than me). I think
> you have it spot on, and the problem is that almost all other systems
> than AIX will have the linker implicitly move -lc *after* the .o
> files... AFAIR the permanent fix is equivalent to your temporary one.
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Sun Mar 19 23:00:48 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 19 Mar 2000 18:00:48 -0500
Subject: [Rd] R-1.0.0 on alpha/osf1 memory glitch (PR#490)
References: <200003162225.XAA21838@pubhealth.ku.dk>
Message-ID: <87hfe21s67.fsf@bavaria.ece.cmu.edu>


Hi,

I just tried this on an AIX computer (4.3.2, also gcc + f77, R-1.0.0).
The same "error" comes up -- xmalloc complains.  This is somewhat
cosmetic as the data is fine so it may not be very high on the
priority list.
Anyways, let me know if I can help debug this--I don't know whether
you have easy access to DEC or AIX boxes.  But with a dysfunctional
gdb I'd need a hint about where this might happen.
Regards,
  -tom


Ray.Brownrigg@mcs.vuw.ac.nz writes:

> Digital Alpha (various), Digital UNIX V4.0[EF], R-1.0.0, gcc, f77
> 
> When using batch mode with the save option, an error message is issued.
> However [I have just discovered that] it appears that the operation
> does complete, i.e. the .RData file is saved successfully.  The main
> problem is that the return code is non-zero (and so it is impossible to
> distinguish this "non-error" from some other error in a script).

[snip]
>     xmalloc: out of virtual memory

[snip]

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Mar 19 23:49:00 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Mar 2000 00:49:00 +0100
Subject: [Rd] R-1.0.0 on alpha/osf1 memory glitch (PR#490)
In-Reply-To: Thomas J Vogels's message of "19 Mar 2000 18:00:48 -0500"
References: <200003162225.XAA21838@pubhealth.ku.dk> <87hfe21s67.fsf@bavaria.ece.cmu.edu>
Message-ID: <x266ui4j2r.fsf@blueberry.kubism.ku.dk>

Thomas J Vogels <tov@ece.cmu.edu> writes:

> Hi,
> 
> I just tried this on an AIX computer (4.3.2, also gcc + f77, R-1.0.0).
> The same "error" comes up -- xmalloc complains.  This is somewhat
> cosmetic as the data is fine so it may not be very high on the
> priority list.
> Anyways, let me know if I can help debug this--I don't know whether
> you have easy access to DEC or AIX boxes.  But with a dysfunctional
> gdb I'd need a hint about where this might happen.
> Regards,
>   -tom
...
> [snip]
> >     xmalloc: out of virtual memory
> 
> [snip]

Hmm. In system.c we have

    case SA_SAVE:
	if(runLast) R_dot_Last();
	if(R_DirtyImage) R_SaveGlobalEnv();
#ifdef HAVE_LIBREADLINE
#ifdef HAVE_READLINE_HISTORY_H
	if(R_Interactive && UsingReadline)
	    stifle_history(R_HistorySize);
	write_history(R_HistoryFile);
#endif
#endif
	break;


This looks wrong to me since write_history is getting called even if
!R_Interactive and !UsingReadline, in which case I don't think there
*is* a history to write and I'd suspect that anything could happen...
Could you try making that

        if(R_Interactive && UsingReadline) {
            stifle_history(R_HistorySize);
            write_history(R_HistoryFile);
	}

 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Mar 20 00:01:45 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 19 Mar 2000 19:01:45 -0500
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: Thomas Lumley's message of "Sat, 18 Mar 2000 11:18:20 -0800 (PST)"
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu>
Message-ID: <871z561pcm.fsf@bavaria.ece.cmu.edu>



Thomas Lumley <thomas@biostat.washington.edu> writes:

[snip]
> It's actually a combination of a number of factors.  On most systems we
> link with the C compiler, which knows what to do with libc automatically.  
> In any case, many linkers can handle the problem as Peter points out.

On AIX you have to build the export file, R.exp, which was the reason
to force the use of ld, I believe.  Also, the libs must be on the
command line for ldAIX to include exported symbols from libc.a in
R.exp (which reduces the size of shared libs).

> On AIX we were using ld rather than CC to link, and ld doesn't move -lc to
> the end, and we were using a hardcoded set of linker options that some
> helpful user had sent in a long time ago (no-one in R-core has very
> convenient access to AIX). It worked fine until we added GNU regex to R.

ok, now I understand why this problem didn't occur until 1.0.  I
glanced at Makeconf.  There is the '-lc' (along with '-lm') in the
DLLFLAGS but also in SHLIBLDFLAGS -- do you plan to export regexec and
friends?  Because the creation of shared libs with an early -lc will
create the same Illegal Instructions...

Thanks,
  -tom


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Mon Mar 20 00:57:23 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Mon, 20 Mar 2000 12:57:23 +1200
Subject: [Rd] followup to graphics bug #414
References: <Pine.LNX.4.10.10002110817290.953-100000@bolker.zoo.ufl.edu> <001301bf7696$9cde2780$175dd882@stat.auckland.ac.nz> <x2bt5k8a52.fsf@blueberry.kubism.ku.dk>
Message-ID: <016201bf9207$40fd6d40$175dd882@stat.auckland.ac.nz>

hi

i have committed a fix for this bug into the development version.

The idea is that, for devices which canClip, R still does some preclipping
to the device
extent.  This stops stupidly large numbers being sent to the device, but
there is a penalty in that two sets of clipping occurs.  Note that this
preclipping occurs in the graphics engine to  avoid the need for per-device
checks.  For more information, see the latex file included below.

paul


---snip---


\documentclass{article}
\title{Changes to Clipping in R}
\author{Paul Murrell}
\begin{document}
\maketitle

All devices have a {\tt canClip} field which indicates whether they
have clipping facilities.  Previously,
if this field was {\tt true} then R used to
delegate all clipping to the device.  R has its own clipping code (in
{\tt graphics.c}) for devices which cannot do the clipping themselves.

Note that R's clipping is inferior to a device's clipping (which is why we
let the device do the clipping if it can).  For example, R's text
clipping completely clips text if the text intersects the boundary of
the clipping region at all (i.e., text is only drawn if it lies wholly
within the clipping region).

\section*{The Problem}

Devices which can clip still have problems with (for example) very large
numbers.  For example, if you try to draw a line which is several feet
off the edge of an X11 window or a Postscript page, the device will fall
over.

\section*{The Solution}

For devices which {\tt canClip}, R does some ``preclipping'' to the device
extent.  This removes the possibility of ridiculously large numbers being
sent to a device.  The device is still responsible for any further clipping.
For devices which cannot clip, R does all of the clipping (as before).

This preclipping occurs at the level of graphical primitives (i.e.,
{\tt GLine}, {\tt GPolyline}, {\tt GPolygon}, {\tt GRect}, {\tt GCircle},
and {\tt GText}).
Only text is a special case.  In general, any part of the graphical
primitive which lies outside of the device extent gets clipped.  This means
that the device only gets sent graphical primitives which lie entirely
within the device extent.  Because R's text clipping is pretty crude,
this policy is a bit of overkill, so
if the device {\tt canClip} and the text intersects the device boundary,
the text is sent unaltered to the device.  It is assumed that, if a
piece of text intersects the boundary of the device then it cannot extend
a ridiculous distance outside of the device (unless it is a VERY long
piece of text, or a VERY large font is being used).

There will be a speed penalty for devices which {\tt canClip} because there
will now be two sets of clipping occurring (R clips to the device, then
the device clips to the current setting of {\tt par("xpd")}).  This may
affect X11 and Windows devices - don't know by how much.

\section*{Addendum}

The Postscript device was not doing any clipping, despite the fact that
Postscript has full clipping capabilities.  This has been changed so that
Postscript devices now {\tt canClip}.  This should improve the text
clipping on Postscript output (which used to use R's crude text clipping).

\end{document}



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Mon Mar 20 11:21:20 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 20 Mar 2000 12:21:20 +0100
Subject: [Rd] windows version
References: <87ln3g97x2.fsf@bavaria.ece.cmu.edu> <x2hfe4czpj.fsf@blueberry.kubism.ku.dk> <38D4E936.EB941D1C@univie.ac.at>
Message-ID: <38D609B0.5F652E67@statistik.uni-dortmund.de>

Erich Neuwirth schrieb:
> 
> for all of you using the windows version:
> i think having a look at the r-winedt
> interface by volker ligges is a good idea.
> it works quite nicely.
> 
> i talked to volker,
> and at the moment,
> there is something which could be improved,
> anmley it would be nice if one could get access to the current
> history buffer.
> 
> is there a way of getting it
> (i.e. exactly what would be saved in .Rhistory if one were to exit right
> now)?
> 
> then one could interactively edit the current session
> in winedt.

I just uploaded a new "version" of R-WinEdt with some improvements /
bugfixes and enhanced ReadMe to CRAN (Erich Neuwirth already has got
it).

The latest release is also available at 
http://www.statistik.uni-dortmund.de/leute/ligges.htm


Thanks for all comments!

Uwe Ligges
^^^  ;-)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Mon Mar 20 21:12:59 2000
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray Brownrigg)
Date: Tue, 21 Mar 2000 09:12:59 +1200 (NZST)
Subject: [Rd] R-1.0.0 on alpha/osf1 memory glitch (PR#490)
Message-ID: <200003202112.JAA07598@aqua.mcs.vuw.ac.nz>

> Hmm. In system.c we have
> 
>     case SA_SAVE:
> 	if(runLast) R_dot_Last();
> 	if(R_DirtyImage) R_SaveGlobalEnv();
> #ifdef HAVE_LIBREADLINE
> #ifdef HAVE_READLINE_HISTORY_H
> 	if(R_Interactive && UsingReadline)
> 	    stifle_history(R_HistorySize);
> 	write_history(R_HistoryFile);
> #endif
> #endif
> 	break;
> 
> Could you try making that
> 
>         if(R_Interactive && UsingReadline) {
>             stifle_history(R_HistorySize);
>             write_history(R_HistoryFile);
> 	}
> 
I can confirm that this change works in my situation.

Thanks,
Ray Brownrigg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Mar 20 22:20:15 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Mon, 20 Mar 2000 17:20:15 -0500 (EST)
Subject: [Rd] followup to graphics bug #414
In-Reply-To: <016201bf9207$40fd6d40$175dd882@stat.auckland.ac.nz>
Message-ID: <Pine.LNX.4.10.10003201645220.8643-100000@bolker.zoo.ufl.edu>


  I haven't been able to compile the development version on my machine yet
(problems with BLAS includes, I don't have time to dig into it right now),
so I'm curious: does this fix also solve the problem recently reported by
Robert Sandefur recently on R-help, where he got different results from
abline() on the X11 and Postscript drivers?  I can replicate his problem
(and perhaps shed some light on it) with the following code--

==========================

tmpf0 <- function(col=1:3,...) {
  p <- matrix(c(3.9,0.2,3.9,0.25,3.9,1.0),byrow=TRUE,ncol=2)
  abline(coef=p[1,],col=col[1],...)
  abline(coef=p[2,],col=col[2],...)
  abline(coef=p[3,],col=col[3],...)
}

tmpf0(3:4)
tmpf0(1:2,p1=c(3.9,0.2),p2=c(3.9,0.25))
tmpf0(1:2,p1=c(3.9,0.2),p2=c(3.9,0.25))

tmpf <- function() {
  plot(1:10,1:10,xlim=c(-3,3),ylim=c(2000,1000000),log="y")
  par(xpd=TRUE)
  tmpf0(lty=1)
  par(xpd=FALSE)
  tmpf0(lty=2)
  par(xpd=NA)
  tmpf0(lty=3)
}

x11()
tmpf()
postscript(file="tmp.ps")
tmpf()
dev.off()
========================

I set this up so that one line (red) would clip at the bottom only, one
line (green) would clip at the bottom and the top, and one line (black)
wouldn't need clipping at all. In R 1.0.0 everything works fine under the
X11 driver but under the Postscript driver, both of the clipped lines are
wrong, but are different depending on how the clipping parameter is set.

  I haven't yet been able to track the source of this down, but I hope
that this information helps if someone gets to it before I do.  If the
recent fix also fixes this bug, that would be very nice.

  Ben Bolker

On Mon, 20 Mar 2000, Paul Murrell wrote:

> hi
> 
> i have committed a fix for this bug into the development version.
> 
> The idea is that, for devices which canClip, R still does some preclipping
> to the device
> extent.  This stops stupidly large numbers being sent to the device, but
> there is a penalty in that two sets of clipping occurs.  Note that this
> preclipping occurs in the graphics engine to  avoid the need for per-device
> checks.  For more information, see the latex file included below.
> 
> paul
> 
> 


-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Mar 20 22:34:49 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Mon, 20 Mar 2000 23:34:49 +0100 (MET)
Subject: [Rd] minor problem in barplot legend (PR#494)
Message-ID: <200003202234.XAA19634@pubhealth.ku.dk>


  If length(col)<length(legend.txt) in barplot, then the reversal of
the legend leads to funny results.  For example:

x <- matrix(runif(25),nrow=5)
barplot(x,col=c("red","green","black"),legend=as.character(1:5),ylim=c(0,5))

The (easy) fix is to replace

       legend.col <- col

with

         legend.col <- rep(col,length=length(legend.text))

on line 94 of barplot.default.

  Trivia, but hey, it confused me for a little while, it might as well
be fixed.

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Mar 20 22:49:50 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 20 Mar 2000 17:49:50 -0500
Subject: [Rd] R-1.0.0 on alpha/osf1 memory glitch (PR#490)
In-Reply-To: Peter Dalgaard BSA's message of "20 Mar 2000 00:49:00 +0100"
References: <200003162225.XAA21838@pubhealth.ku.dk> <87hfe21s67.fsf@bavaria.ece.cmu.edu> <x266ui4j2r.fsf@blueberry.kubism.ku.dk>
Message-ID: <87bt49i7e9.fsf@bavaria.ece.cmu.edu>



Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

[snip]
>         if(R_Interactive && UsingReadline) {
>             stifle_history(R_HistorySize);
>             write_history(R_HistoryFile);
> 	}

That takes care of the xmalloc complaints on an AIX box as well.
(Also, recompiling R with -lc in LIBS instead of DLLFLAGS works for AIX...)

Thanks!
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 20 23:34:29 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Mar 2000 00:34:29 +0100
Subject: [Rd] followup to graphics bug #414
In-Reply-To: Ben Bolker's message of "Mon, 20 Mar 2000 17:20:15 -0500 (EST)"
References: <Pine.LNX.4.10.10003201645220.8643-100000@bolker.zoo.ufl.edu>
Message-ID: <x2k8ixp662.fsf@blueberry.kubism.ku.dk>

Ben Bolker <ben@zoo.ufl.edu> writes:

> I set this up so that one line (red) would clip at the bottom only, one
> line (green) would clip at the bottom and the top, and one line (black)
> wouldn't need clipping at all. In R 1.0.0 everything works fine under the
> X11 driver but under the Postscript driver, both of the clipped lines are
> wrong, but are different depending on how the clipping parameter is set.
> 
>   I haven't yet been able to track the source of this down, but I hope
> that this information helps if someone gets to it before I do.  If the
> recent fix also fixes this bug, that would be very nice.

I suspect it will. The clipping functions are broken with logged axes
on all devices which cannot do their own clipping, and since Paul made
devPS capable of clipping... 

We still need a fix for clipping for 1.0.1. I assume that the new
devPS has been changed too much to qualify as a bugfix (?) and
anyways, it is still a bug for any other device without clipping
capabilities. 

(As you may have gathered, the bug is that clipping is calculated by
linear interpolations on the original scale, which isn't going to
work...) 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Tue Mar 21 00:00:58 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Tue, 21 Mar 2000 12:00:58 +1200
Subject: [Rd] followup to graphics bug #414
References: <Pine.LNX.4.10.10003201645220.8643-100000@bolker.zoo.ufl.edu> <x2k8ixp662.fsf@blueberry.kubism.ku.dk>
Message-ID: <012101bf92c8$89c92ac0$175dd882@stat.auckland.ac.nz>

hi


> > I set this up so that one line (red) would clip at the bottom only, one
> > line (green) would clip at the bottom and the top, and one line (black)
> > wouldn't need clipping at all. In R 1.0.0 everything works fine under
the
> > X11 driver but under the Postscript driver, both of the clipped lines
are
> > wrong, but are different depending on how the clipping parameter is set.
> >
> >   I haven't yet been able to track the source of this down, but I hope
> > that this information helps if someone gets to it before I do.  If the
> > recent fix also fixes this bug, that would be very nice.
>
> I suspect it will. The clipping functions are broken with logged axes
> on all devices which cannot do their own clipping, and since Paul made
> devPS capable of clipping...


or it may have just made it a little more sinister.  devices which can do
their own clipping still use the R clipping to preclip to the device extent.
so if you specify a line which extends outside of the device extent (and you
have log axes) it will be (incorrectly) clipped by R before sending on to
the device.

also, Ross has pointed out that R's polygon clipping probably suffers from
the same problem (has anyone tried drawing polygons with log axes ?).  He
may take a look at this soon because he's mucking about with polygon
clipping for his maps stuff.


> We still need a fix for clipping for 1.0.1. I assume that the new
> devPS has been changed too much to qualify as a bugfix (?) and
> anyways, it is still a bug for any other device without clipping
> capabilities.


devPS has not changed that much, but graphics.c has.

paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 21 00:28:56 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Mar 2000 01:28:56 +0100
Subject: [Rd] followup to graphics bug #414
In-Reply-To: "Paul Murrell"'s message of "Tue, 21 Mar 2000 12:00:58 +1200"
References: <Pine.LNX.4.10.10003201645220.8643-100000@bolker.zoo.ufl.edu> <x2k8ixp662.fsf@blueberry.kubism.ku.dk> <012101bf92c8$89c92ac0$175dd882@stat.auckland.ac.nz>
Message-ID: <x266uhupx3.fsf@blueberry.kubism.ku.dk>

"Paul Murrell" <paul@stat.auckland.ac.nz> writes:

> > I suspect it will. The clipping functions are broken with logged axes
> > on all devices which cannot do their own clipping, and since Paul made
> > devPS capable of clipping...
> 
> 
> or it may have just made it a little more sinister.  devices which can do
> their own clipping still use the R clipping to preclip to the device extent.
> so if you specify a line which extends outside of the device extent (and you
> have log axes) it will be (incorrectly) clipped by R before sending on to
> the device.

Hmmno.. (well maybe now in the development version.) In R-release, we have

    if (dd->dp.canClip) {
        GClip(dd);
        dd->dp.polyline(n, x, y, coords, dd);
    }
    else
        CScliplines(n, x, y, coords, dd);

and CScliplines has the problem. GClip just sets the clip boundary for
the device.

> also, Ross has pointed out that R's polygon clipping probably suffers from
> the same problem (has anyone tried drawing polygons with log axes ?).  He
> may take a look at this soon because he's mucking about with polygon
> clipping for his maps stuff.

Yes. Same problem. Silly thing is that the only (simple) way to fix it
seems to be to take logs, do the clipping, take antilogs, and then
have the device function take logs once again...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Tue Mar 21 04:11:00 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Tue, 21 Mar 2000 16:11:00 +1200
Subject: [Rd] followup to graphics bug #414
References: <Pine.LNX.4.10.10003201645220.8643-100000@bolker.zoo.ufl.edu> <x2k8ixp662.fsf@blueberry.kubism.ku.dk> <012101bf92c8$89c92ac0$175dd882@stat.auckland.ac.nz> <x266uhupx3.fsf@blueberry.kubism.ku.dk>
Message-ID: <015f01bf92eb$7c17af00$175dd882@stat.auckland.ac.nz>

hi


> > > I suspect it will. The clipping functions are broken with logged axes
> > > on all devices which cannot do their own clipping, and since Paul made
> > > devPS capable of clipping...
> >
> >
> > or it may have just made it a little more sinister.  devices which can
do
> > their own clipping still use the R clipping to preclip to the device
extent.
> > so if you specify a line which extends outside of the device extent (and
you
> > have log axes) it will be (incorrectly) clipped by R before sending on
to
> > the device.
>
> Hmmno.. (well maybe now in the development version.) In R-release, we have
>
>     if (dd->dp.canClip) {
>         GClip(dd);
>         dd->dp.polyline(n, x, y, coords, dd);
>     }
>     else
>         CScliplines(n, x, y, coords, dd);
>
> and CScliplines has the problem. GClip just sets the clip boundary for
> the device.


yes, but in R-release postscript can't clip right ?  if, in r-release we
just changed devPS so that it would clip, then r-release would be ok.
r-devel is broken though because the above code segment has changed.

paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Tue Mar 21 06:15:08 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue, 21 Mar 2000 07:15:08 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200003210615.HAA13190@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 471 *
Subject:  Problems with nlme 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 7 Mar 2000 15:28:00 +0800
--Problem 1) was a subscripting bug introduced in 1.0.0 and fixed for 1.0.1
--Problem 2) (mssing datasets) needs a revised nlme

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 400 *
Subject: X11 troubles
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Jan 2000 14:31:42 +0100
--a) We don't handle multiple window closes well
--b) X11 errors should be caught by an error handler, not kill R
* PR# 414 *
Subject:  graphics bugs: steep slopes and large values beyond ylim 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 7 Feb 2000 18:28:04 -0500
--Followup on R-devel showed this was due to generating integer coordinates 
--outside +/- 2^15 in the X11 driver.

Directory:  In-Out

none

Directory:  Installation

* PR# 478 *
Subject: Conditional for XDR code left out in saveload.c
From: hoffmann@ehmgs2.et.tu-dresden.de
Date: Thu, 9 Mar 2000 09:43:01 +0100 (MET)
--This seems to be a harmless warning, not an error.

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100

Directory:  Low-level

* PR# 391 *
Subject: Segfault in dataentry()
From: Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk>
Date: 29 Dec 1999 11:59:50 +0100
--dataentry(0,0) segfaults

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 463 *
Subject: Bug in read.table
From: "E. S. Venkatraman" <venkat@biosta.mskcc.org>
Date: Tue, 29 Feb 2000 17:47:54 -0500 (EST)
* PR# 465 *
Subject: "is.qr" definition
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Date: Wed, 1 Mar 2000 11:12:37 +0000 (GMT)
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
* PR# 474 *
Subject: update fails after specific sequence of steps
From: John Fox <jfox@mcmaster.ca>
Date: Tue, 07 Mar 2000 09:06:21 -0500
* PR# 475 *
Subject: Error compiling R on RS6000
From: pgutwin@us.ibm.com
Date: Tue, 7 Mar 2000 16:35:59 +0100 (MET)
* PR# 477 *
Subject: Printing graphs on W98 laptop
From: P.J.Green@bristol.ac.uk
Date: Wed, 8 Mar 2000 18:23:33 +0100 (MET)
* PR# 480 *
Subject: problem with plot(...., xlim=c(5,0))
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 12 Mar 2000 20:19:16 -0500 (EST)
* PR# 481 *
Subject: check does not accept --vsize option
From: neteler@geog.uni-hannover.de
Date: Mon, 13 Mar 2000 19:04:50 +0100 (MET)
* PR# 482 *
Subject: plot(1:10,c(1)$nothing)  yields index plot
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 13 Mar 2000 11:13:18 -0800
* PR# 483 *
Subject: error in par option xaxt
From: aim@uwo.ca
Date: Mon, 13 Mar 2000 22:02:42 +0100 (MET)
* PR# 484 *
Subject: error in par option xaxt
From: aim@uwo.ca
Date: Mon, 13 Mar 2000 22:03:00 +0100 (MET)
* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
* PR# 487 *
Subject: Bug in sub?
From: "Trenkler, Dietrich" <dtrenkler@nts6.oec.uni-osnabrueck.de>
Date: Tue, 14 Mar 2000 12:15:54 +0100
* PR# 488 *
Subject: Error in lme?
From: simon.frost@ed.ac.uk
Date: Tue, 14 Mar 2000 14:15:52 +0100 (MET)
* PR# 489 *
Subject: r-base_1.0.0-1_i386.deb install problem
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Thu, 16 Mar 2000 04:02:26 +0000 (GMT)
* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
* PR# 491 *
Subject: lag
From: kthaka@uta.fi
Date: Fri, 17 Mar 2000 10:16:09 +0100 (MET)
* PR# 492 *
Subject: the R bug
From: "Robertas Geistoraitis" <robertasg@takas.lt>
Date: Fri, 17 Mar 2000 17:17:23 +0100
* PR# 493 *
Subject: optim: problem with additional arguments
From: "Dirk F. Moore" <dirk@surfer.sbm.temple.edu>
Date: Fri, 17 Mar 2000 12:05:32 -0500
* PR# 494 *
Subject:  minor problem in barplot legend 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 20 Mar 2000 17:31:36 -0500
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From skala@incoma.cz  Tue Mar 21 08:20:35 2000
From: skala@incoma.cz (skala@incoma.cz)
Date: Tue, 21 Mar 2000 09:20:35 +0100 (MET)
Subject: [Rd] barplot (PR#495)
Message-ID: <200003210820.JAA22364@pubhealth.ku.dk>

Full_Name: Zdenek Skala
Version: 1.0.0
OS: MS Windows 95
Submission from: (NULL) (194.108.127.14)


Dear all,
a problem with barplot() was already discussed on R-help for R 0.90.0 - sorry,
if this is a known bug, but I was unable to find it in the bugs database.
In:
> barplot(c(.1,.5,1), ylim=(0:1))
or
> barplot(c(.1,.5,1), ylim=c(0,1))
the y axis is drawn from 0.2 to 0.8, in:
> barplot(c(.1,.5,1))
the y axis is drawn from 0.0 to 0.8.
As I was notified earlier by Peter Dalgaard, "the axis settings use yaxs='i' 
(or xaxs if horizontal) which sets the plot boundaries equal to the ylim 
(stated or computed) and marks the axes "internally". The endpoints of the 
axes are not considered to be internal."
Sorry again if this is already reported.
With regards
Zdenek Skala

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 21 08:56:30 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Mar 2000 09:56:30 +0100
Subject: [Rd] barplot (PR#495)
In-Reply-To: skala@incoma.cz's message of "Tue, 21 Mar 2000 09:20:35 +0100 (MET)"
References: <200003210820.JAA22364@pubhealth.ku.dk>
Message-ID: <x2aejs66rl.fsf@blueberry.kubism.ku.dk>

skala@incoma.cz writes:

> > barplot(c(.1,.5,1), ylim=c(0,1))
> the y axis is drawn from 0.2 to 0.8, in:

> As I was notified earlier by Peter Dalgaard, "the axis settings use yaxs='i' 
> (or xaxs if horizontal) which sets the plot boundaries equal to the ylim 
> (stated or computed) and marks the axes "internally". The endpoints of the 
> axes are not considered to be internal."
> Sorry again if this is already reported.

I actually thought we had that one fixed, but obviously not ...
As usual, the workaround is to extend the ylim a tiny bit:

barplot(c(.1,.5,1), ylim=c(-.001,1.001))

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Tue Mar 21 13:57:59 2000
From: wsi@gcal.ac.uk (wsi@gcal.ac.uk)
Date: Tue, 21 Mar 2000 14:57:59 +0100 (MET)
Subject: [Rd] par help wrong: xlog & ylog (PR#497)
Message-ID: <200003211357.OAA29225@pubhealth.ku.dk>

Full_Name: 
Version: 1.0.0
OS: linux
Submission from: (NULL) (193.62.250.209)


    

?par lists and describes xlog and ylog, though these are obsolete. It does not
list
log. I found out about log from ?plot.defaults--so that help is OK.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Tue Mar 21 14:11:06 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Tue, 21 Mar 2000 15:11:06 +0100 (CET)
Subject: [Rd] is.null(list()) is FALSE ?
In-Reply-To: <200003211357.OAA29225@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0003211507220.16848-100000@boromir.ci.tuwien.ac.at>


On R-1.0.0, debian GNU/Linux, 

R> is.null(list())
FALSE

conflicts with the help for ?is.null:

Examples:

     is.null(list())    # TRUE (not so in S)
     is.null(integer(0))# F
     is.null(logical(0))# F
     as.null(list(a=1,b='c'))

and, I would like is.null(list()) to be TRUE :-)

Torsten

*****************************************************************
*								*
* Torsten Hothorn, Statistician					*
* at the moment: Institut fuer Statistik, TU Wien		*
* Tel: 0043 1 58801 10772					*
* Fax: 0043 1 58801 10798					*
*								*
*****************************************************************



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 21 14:18:04 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Mar 2000 15:18:04 +0100
Subject: [Rd] par help wrong: xlog & ylog (PR#497)
In-Reply-To: wsi@gcal.ac.uk's message of "Tue, 21 Mar 2000 14:57:59 +0100 (MET)"
References: <200003211357.OAA29225@pubhealth.ku.dk>
Message-ID: <x266ugs8yr.fsf@blueberry.kubism.ku.dk>

wsi@gcal.ac.uk writes:

> Full_Name: 
> Version: 1.0.0
> OS: linux
> Submission from: (NULL) (193.62.250.209)
> 
> 
>     
> 
> ?par lists and describes xlog and ylog, though these are obsolete. It does not
> list
> log. I found out about log from ?plot.defaults--so that help is OK.

Not a bug, not obsolete, and works as documented:

> plot(1,log="y")
> par("ylog")    
[1] TRUE


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Tue Mar 21 15:27:25 2000
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Tue, 21 Mar 2000 15:27:25 +0000 (GMT)
Subject: [Rd] par help wrong: xlog & ylog (PR#497)
In-Reply-To: <200003211357.OAA29225@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.10003211522090.9897-100000@localhost.localdomain>


> Full_Name: 
> Version: 1.0.0
> OS: linux
> Submission from: (NULL) (193.62.250.209)
> 
> ?par lists and describes xlog and ylog, though these are obsolete. It does not
> list
> log. I found out about log from ?plot.defaults--so that help is OK.
Reading through ?par again, I see that xlog and ylog are "read only". (I
initially thought xlog and ylog were obsolete because I could set them) I
don't find the help to be very clear:

ylog: R.O..  A logical value (see `log' in `plot.default').  See
          `xlog' above.

Instead of (see `log' in `plot.default'), why not have log listed here in
the par help? Or is it an argument to plot()? In which case, why not list
it in the help for plot()? I find it hard to find info for plots because
this info seems to be spread out in several places

Bill


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Tue Mar 21 15:30:31 2000
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Tue, 21 Mar 2000 15:30:31 +0000 (GMT)
Subject: [Rd] par help wrong: xlog & ylog (PR#497)
In-Reply-To: <x266ugs8yr.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10003211528091.9897-100000@localhost.localdomain>



On 21 Mar 2000, Peter Dalgaard BSA wrote:

> wsi@gcal.ac.uk writes:
> 
> > Full_Name: 
> > Version: 1.0.0
> > OS: linux
> > Submission from: (NULL) (193.62.250.209)
> > 
> > 
> >     
> > 
> > ?par lists and describes xlog and ylog, though these are obsolete. It does not
> > list
> > log. I found out about log from ?plot.defaults--so that help is OK.
> 
> Not a bug, not obsolete, and works as documented:
True. True. Not documented in plot help. It is documented in plot.default.
Why not in par, where xlog and ylog are? I find it confusing.

> 
> > plot(1,log="y")
> > par("ylog")    
> [1] TRUE

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Mar 21 16:05:42 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 21 Mar 2000 17:05:42 +0100 (MET)
Subject: [Rd] par help wrong: xlog & ylog (PR#497)
Message-ID: <200003211605.RAA00840@pubhealth.ku.dk>


>>>>> "Bill" == Bill Simpson <wsi@gcal.ac.uk> writes:

    Bill> On 21 Mar 2000, Peter Dalgaard BSA wrote:

    >> wsi@gcal.ac.uk writes:
    >> 
    >> > Full_Name: 
    >> > Version: 1.0.0
    >> > OS: linux
    >> > Submission from: (NULL) (193.62.250.209)
    >> > 
    >> > 
    >> >     
    >> > 
    >> > ?par lists and describes xlog and ylog, though these are
    >> > obsolete. It does not list log. I found out about log from
    >> > ?plot.defaults--so that help is OK.
    >> 
    >> Not a bug, not obsolete, and works as documented:
    Bill> True. True. Not documented in plot help. It is documented in plot.default.
    Bill> Why not in par, where xlog and ylog are? I find it confusing.

    >> 
    >> > plot(1,log="y")
    >> > par("ylog")    
    >> [1] TRUE

log is *not* a valid  par(.) argument, what makes you think it should be
documented there ?

  > par(log = "x")
  Warning message: 
  parameter "log" can't be set in: par(args) 


It *is* a valid argument to most(?) plot methods;
plot is the generic function, and the idea is that it only documents what
*ALL* plot methods have in common.  This is the reason that "log = .." is
documented with the default  plot method, plot.default.

You might have a point:  We could (should we?) consider requiring a 
"log =" argument for *ALL* plot methods, and then have it 
documented and possibly even among the listed arguements (the "non ..." ones)
of the generic  plot.

Opinions?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Mar 21 16:33:51 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 21 Mar 2000 08:33:51 -0800 (PST)
Subject: [Rd] par help wrong: xlog & ylog (PR#497)
In-Reply-To: <200003211605.RAA00840@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0003210829030.14323-100000@mail.biostat.washington.edu>

On Tue, 21 Mar 2000 maechler@stat.math.ethz.ch wrote:

> You might have a point:  We could (should we?) consider requiring a 
> "log =" argument for *ALL* plot methods, and then have it 
> documented and possibly even among the listed arguements (the "non ..." ones)
> of the generic  plot.
> 
> Opinions?
> 

Aaagh! No!  What about plots that intrinsically contain zero x or y
values, such as mortality plots (ie upside-down survival plots) or
Receiver Operating Characteristic curves?

Going further, some plot methods have a ... option but don't pass it to
plot. If the method uses plot to set up axes and then calls points() or
lines() to handle the actual drawing it may make sense to pass ... to
points() or lines().  These functions don't understand log=, so it would
be necessary to have an explicit log= option for the method, even if it
was completely inappropriate.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Mar 21 16:40:14 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 21 Mar 2000 08:40:14 -0800 (PST)
Subject: [Rd] is.null(list()) is FALSE ?
In-Reply-To: <Pine.LNX.4.21.0003211507220.16848-100000@boromir.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.21.0003210834560.14323-100000@mail.biostat.washington.edu>

On Tue, 21 Mar 2000, Torsten Hothorn wrote:

> 
> On R-1.0.0, debian GNU/Linux, 
> 
> R> is.null(list())
> FALSE
> 
> conflicts with the help for ?is.null:
> 
> Examples:
> 
>      is.null(list())    # TRUE (not so in S)
>      is.null(integer(0))# F
>      is.null(logical(0))# F
>      as.null(list(a=1,b='c'))
> 
> and, I would like is.null(list()) to be TRUE :-)

My guess is that this dates from old-style pairlists, where list() could
easily be NULL. Now a list is internally a vector, so list() is a vector
of length zero and so is stored as a VECTOR node.

Also, a difficulty with storing list() as NULL is that you can't set
attributes on NULL:
R> a<-NULL
R> attr(a,"foo")<-"bar"
Error: attempt to set an attribute on NULL
R> a<-list()
R> attr(a,"foo")<-"bar"
R> a
list()
attr(,"foo")
[1] "bar"


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Mar 21 16:57:55 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 21 Mar 2000 17:57:55 +0100 (MET)
Subject: [Rd] is.null(list()) is FALSE ?
In-Reply-To: <Pine.GSO.4.21.0003210834560.14323-100000@mail.biostat.washington.edu>
References: <Pine.LNX.4.21.0003211507220.16848-100000@boromir.ci.tuwien.ac.at>
 <Pine.GSO.4.21.0003210834560.14323-100000@mail.biostat.washington.edu>
Message-ID: <14551.43539.660392.388561@lynne.ethz.ch>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> On Tue, 21 Mar 2000, Torsten Hothorn wrote:
    >> 
    >> On R-1.0.0, debian GNU/Linux, 
    >> 
    R> is.null(list())
    >> FALSE
    >> 
    >> conflicts with the help for ?is.null:
    >> 
    >> Examples:
    >> 
    >> is.null(list())    # TRUE (not so in S)
    >> is.null(integer(0))# F
    >> is.null(logical(0))# F
    >> as.null(list(a=1,b='c'))
    >> 
    >> and, I would like is.null(list()) to be TRUE :-)

    TL> My guess is that this dates from old-style pairlists, where list() could
    TL> easily be NULL.
well guessed!
    TL> Now a list is internally a vector, so list() is a vector
    TL> of length zero and so is stored as a VECTOR node.

and we had decision quite a while ago that  is.null(list()) should give
FALSE {and this is S compatible}.

I've already committed fix for  the wrong comment above :

  cvs diff -r 1.3 src/library/base/man/NULL.Rd

  ...

  diff -r1.3 -r1.3.22.1
  24c24
  < is.null(list())    # TRUE (not so in S)
  ---
  > is.null(list())    # FALSE (on purpose!)


    TL> Also, a difficulty with storing list() as NULL is that you can't set
    TL> attributes on NULL:
    R> a<-NULL
    R> attr(a,"foo")<-"bar"
    TL> Error: attempt to set an attribute on NULL
    R> a<-list()
    R> attr(a,"foo")<-"bar"
    R> a
    TL> list()
    TL> attr(,"foo")
    TL> [1] "bar"

    TL> -thomas

    TL> Thomas Lumley
    TL> Assistant Professor, Biostatistics
    TL> University of Washington, Seattle

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Tue Mar 21 22:15:12 2000
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Tue, 21 Mar 2000 23:15:12 +0100 (MET)
Subject: [Rd] Use of Rd2txt on .Rd files from rw-1.0.0 (PR#498)
Message-ID: <200003212215.XAA03296@pubhealth.ku.dk>

>From e980153 Tue Mar 21 18:50:55 2000
To: bates@stat.wisc.edu
Subject: Use of Rd2txt on .Rd files from rw-1.0.0

Files generated using prompt.data.frame() under rw-1.0.0 get
scrambled (mildly) when I process them under Rd2txt on Solaris,
(using R-devel 1.1.0).
Files generated under R-devel 1.1 on Solaris are processed ok.

The .Rd files from the two sources look identical. The problem 
is likely to be with Rd2txt, I guess.

Here is an example.  I give only the first part of the output,
where the problem occurs.
=========================================================
Kiwifruit data

Description:

 Kiwifruitkiwishade' data frame has 48 rows and 3 columns.
     shading trial

Format:

     This data frame contains the following columns:

      yield a numeric vector

 `west'  ck a factor with levels

 `Feb2May'  a factor with levels
            `none' 

Details:

............
=========================================================

Here is what I expected to get, and do get when the .Rd file
is generated under Solaris:

=========================================================
Kiwifruit data

Description:

     The `kiwishade' data frame has 48 rows and 3 columns. Kiwifruit
     shading trial

Format:

     This data frame contains the following columns:

      yield a numeric vector

      block a factor with levels `east'  `north'  `west' 

      shade a factor with levels `Aug2Dec'  `Dec2Feb'  `Feb2May' 
            `none'
............
=========================================================

Here is the .Rd file, from the PC, then editing using emacs
under Solaris.  However the same scrambling occurs when the
files is processed without editing.
=========================================================
\name{kiwishade}
\alias{kiwishade}
\non_function{}
\title{Kiwifruit data}
\description{
The \code{kiwishade} data frame has 48 rows and 3 columns.
Kiwifruit shading trial
}
\format{
This data frame contains the following columns:
\describe{
\item{yield}{
a numeric vector
}
\item{block}{
a factor with levels
\code{east} 
\code{north} 
\code{west} 
}
\item{shade}{
a factor with levels
\code{Aug2Dec} 
\code{Dec2Feb} 
\code{Feb2May} 
\code{none} 
}
}
}
\details{

}
\source{
Snelgar at al.
}
\examples{
data(kiwishade)
}
\keyword{datasets}
=========================================================

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jgm@qed.econ.queensu.ca  Wed Mar 22 04:40:08 2000
From: jgm@qed.econ.queensu.ca (jgm@qed.econ.queensu.ca)
Date: Wed, 22 Mar 2000 05:40:08 +0100 (MET)
Subject: [Rd] help system does not work (PR#499)
Message-ID: <200003220440.FAA04346@pubhealth.ku.dk>

Full_Name: James MacKinnon
Version: Version 1.0.0
OS: Debian 2.1
Submission from: (NULL) (24.141.113.138)


I am a novice at R, so I am not totally sure that this is a bug, but I think it
must
be. When I type help.start() or ?help, Netscape starts up, as it should, but it
displays my normal home page, not any help for R. The relevant documents exist
in
/usr/lib/R/doc/html, but Netscape does not seem to know about them when it is
started
from within R. I cannot figure out how to tell Netscape about them.

I simply installed the Debian package from one of the R websites. The file I
used
is r-base_1.0.0-1_i386.deb.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Mar 22 10:40:47 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 22 Mar 2000 11:40:47 +0100 (MET)
Subject: [Rd] minor problem in barplot legend (PR#494)
Message-ID: <200003221040.LAA07976@pubhealth.ku.dk>

>>>>> "Ben" == Ben Bolker <bolker@zoo.ufl.edu> writes:

    Ben> If length(col)<length(legend.txt) in barplot, then the reversal of
    Ben> the legend leads to funny results.  For example:

    Ben> x <- matrix(runif(25),nrow=5)
    Ben> barplot(x,col=c("red","green","black"),legend=as.character(1:5),ylim=c(0,5))

    Ben> The (easy) fix is to replace

    Ben>     legend.col <- col

    Ben> with

    Ben>	legend.col <- rep(col,length=length(legend.text))

    Ben> on line 94 of barplot.default.

    Ben> Trivia, but hey, it confused me for a little while, it might as well
    Ben> be fixed.

Now done for "R-release", i.e. the (unreleased) future R 1.0.1

Thank you, Ben!
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Mar 22 15:02:15 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 22 Mar 2000 16:02:15 +0100 (CET)
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: <871z561pcm.fsf@bavaria.ece.cmu.edu>
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu>
 <871z561pcm.fsf@bavaria.ece.cmu.edu>
Message-ID: <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at>

>>>>> Thomas J Vogels writes:

> Thomas Lumley <thomas@biostat.washington.edu> writes:

> [snip]
>> It's actually a combination of a number of factors.  On most systems we
>> link with the C compiler, which knows what to do with libc automatically.  
>> In any case, many linkers can handle the problem as Peter points out.

> On AIX you have to build the export file, R.exp, which was the reason
> to force the use of ld, I believe.  Also, the libs must be on the
> command line for ldAIX to include exported symbols from libc.a in
> R.exp (which reduces the size of shared libs).

>> On AIX we were using ld rather than CC to link, and ld doesn't move -lc to
>> the end, and we were using a hardcoded set of linker options that some
>> helpful user had sent in a long time ago (no-one in R-core has very
>> convenient access to AIX). It worked fine until we added GNU regex to R.

> ok, now I understand why this problem didn't occur until 1.0.  I
> glanced at Makeconf.  There is the '-lc' (along with '-lm') in the
> DLLFLAGS but also in SHLIBLDFLAGS -- do you plan to export regexec and
> friends?  Because the creation of shared libs with an early -lc will
> create the same Illegal Instructions...

Can you have a look at the current r-devel snapshot?  The way I think my
code works is by adding to R_XTRA_LIBS, which should only be used when
linking the main binary, but not when creating shared libraries.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Mar 22 15:12:46 2000
From: bates@stat.wisc.edu (bates@stat.wisc.edu)
Date: Wed, 22 Mar 2000 16:12:46 +0100 (MET)
Subject: [Rd] help system does not work (PR#499)
Message-ID: <200003221512.QAA12449@pubhealth.ku.dk>

jgm@qed.econ.queensu.ca writes:

> Full_Name: James MacKinnon
> Version: Version 1.0.0
> OS: Debian 2.1
> Submission from: (NULL) (24.141.113.138)
> 
> 
> I am a novice at R, so I am not totally sure that this is a bug, but
> I think it must be. When I type help.start() or ?help, Netscape
> starts up, as it should, but it displays my normal home page, not
> any help for R. The relevant documents exist in /usr/lib/R/doc/html,
> but Netscape does not seem to know about them when it is started
> from within R. I cannot figure out how to tell Netscape about them.
> 
> I simply installed the Debian package from one of the R
> websites. The file I used is r-base_1.0.0-1_i386.deb.

Hello James,

When you use help.start it is supposed to create and populate a
directory ~/.R.  Within there there should be an html directory and
links to several of the html files in /usr/lib/R/doc/html.

Could you check that this directory exists?  My version (under Debian
2.2 and using an experimental r-base_1.0.1-0) looks like

  /u9/bates/.R/doc/html:
  total 19
  drwxrwxr-x    3 bates    bates        1024 Mar 22 09:05 .
  drwxrwxr-x    3 bates    bates        1024 Mar 22 09:05 ..
  lrwxrwxrwx    1 bates    bates          25 Mar 22 09:05 R.css -> /usr/lib/R/doc/html/R.css
  lrwxrwxrwx    1 bates    bates          30 Mar 22 09:05 about.html -> /usr/lib/R/doc/html/about.html
  lrwxrwxrwx    1 bates    bates          28 Mar 22 09:05 faq.html -> /usr/lib/R/doc/html/faq.html
  lrwxrwxrwx    1 bates    bates          33 Mar 22 09:05 function.html -> /usr/lib/R/doc/html/function.html
  lrwxrwxrwx    1 bates    bates          30 Mar 22 09:05 index.html -> /usr/lib/R/doc/html/index.html
  lrwxrwxrwx    1 bates    bates          28 Mar 22 09:05 left.jpg -> /usr/lib/R/doc/html/left.jpg
  lrwxrwxrwx    1 bates    bates          28 Mar 22 09:05 logo.jpg -> /usr/lib/R/doc/html/logo.jpg
  lrwxrwxrwx    1 bates    bates          30 Mar 22 09:05 logosm.jpg -> /usr/lib/R/doc/html/logosm.jpg
  lrwxrwxrwx    1 bates    bates          38 Mar 22 09:05 packages-foot.html -> /usr/lib/R/doc/html/packages-foot.html
  lrwxrwxrwx    1 bates    bates          38 Mar 22 09:05 packages-head.html -> /usr/lib/R/doc/html/packages-head.html
  -rw-r--r--    1 bates    bates       14580 Mar 22 09:05 packages.html
  lrwxrwxrwx    1 bates    bates          33 Mar 22 09:05 resource.html -> /usr/lib/R/doc/html/resource.html
  lrwxrwxrwx    1 bates    bates          29 Mar 22 09:05 right.jpg -> /usr/lib/R/doc/html/right.jpg
  drwxrwxr-x    2 bates    bates        1024 Mar 22 09:05 search
  lrwxrwxrwx    1 bates    bates          33 Mar 22 09:05 template.html -> /usr/lib/R/doc/html/template.html
  lrwxrwxrwx    1 bates    bates          31 Mar 22 09:05 thanks.html -> /usr/lib/R/doc/html/thanks.html
  lrwxrwxrwx    1 bates    bates          26 Mar 22 09:05 up.jpg -> /usr/lib/R/doc/html/up.jpg

BTW, my daughter, who is a student at Queen's, tells me that you are
having wonderful weather right now.  She was down to the lakefront to
do some reading yesterday.

--
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jgm@qed.econ.queensu.ca  Wed Mar 22 16:27:38 2000
From: jgm@qed.econ.queensu.ca (jgm@qed.econ.queensu.ca)
Date: Wed, 22 Mar 2000 17:27:38 +0100 (MET)
Subject: [Rd] help system does not work (PR#499)
Message-ID: <200003221627.RAA13198@pubhealth.ku.dk>

Thanks for the very speedy response.

I just tried again, but this time on my office machine, and I am extremely
embarrassed to report that everything seems to work fine! The only problem
is that the headings under "Data Analysis with R" are not actually links,
but no doubt that is because they are not (yet) supposed to be. 

It seems to be only on my home machine, where I was trying to experiment
with R last night, that there is a problem. I think the problem must have
something to do with the way in which netscape is installed on the two
machines. "which netscape" yields different results on the two of them.

I am pretty sure I can solve the problem now. I presume that R is passing
a command like "netscape URL" to the operating system, and I am pretty
sure that "URL" is not getting through on my home machine because it is
finding a script instead of the real executable. I think I just need to
change the script to pass its arguments to netscape. Unfortunately, I
cannot check the fix while I am at the office.

Incidentally, is there some way I can change the command that R is
issuing? That way, I could point it directly to a particular executable (I
have several netscapes).  Also, I would like to experiment with having it
fire up lynx in an xterm rather than netscape, if that is possible.

On 22 Mar 2000, Douglas Bates wrote:

> When you use help.start it is supposed to create and populate a
> directory ~/.R.  Within there there should be an html directory and
> links to several of the html files in /usr/lib/R/doc/html.

Yes, these directories are present on both machines, and the contents seem
to be fine. I think R itself is working fine.
 
> BTW, my daughter, who is a student at Queen's, tells me that you are
> having wonderful weather right now.  She was down to the lakefront to
> do some reading yesterday.

Incredible weather, actually. It is bright and sunny and warm enough that
a jacket really isn't needed.

I am very sorry to have bothered you. Should I do something to close the
bug report?

Cheers, James.

James G. MacKinnon                       Department of Economics
    phone: 613 533-2293                  Queen's University
      Fax: 613 533-2257                  Kingston, Ontario, Canada
    Email: jgm@qed.econ.queensu.ca       K7L 3N6



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Mar 22 16:43:09 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 22 Mar 2000 08:43:09 -0800 (PST)
Subject: [Rd] help system does not work (PR#499)
In-Reply-To: <200003221627.RAA13198@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0003220832480.28978-100000@mail.biostat.washington.edu>

On Wed, 22 Mar 2000 jgm@qed.econ.queensu.ca wrote:
> 
> Incidentally, is there some way I can change the command that R is
> issuing? That way, I could point it directly to a particular executable (I
> have several netscapes).  Also, I would like to experiment with having it
> fire up lynx in an xterm rather than netscape, if that is possible.

options(browser="browser")

However, to start in a xterm you need to be a bit clever. The browser is
invoked as
 
browser URL &

and you will probably need a script to set up lynx in a xterm in such a
way that it opens the file and stays open. The first four things I tried
didn't work.


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 22 17:17:00 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Mar 2000 18:17:00 +0100
Subject: [Rd] help system does not work (PR#499)
In-Reply-To: Thomas Lumley's message of "Wed, 22 Mar 2000 08:43:09 -0800 (PST)"
References: <Pine.GSO.4.21.0003220832480.28978-100000@mail.biostat.washington.edu>
Message-ID: <x2wvmux6ur.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:


> However, to start in a xterm you need to be a bit clever. The browser is
> invoked as
>  
> browser URL &
> 
> and you will probably need a script to set up lynx in a xterm in such a
> way that it opens the file and stays open. The first four things I tried
> didn't work.

Actually, the real problem is that it is getting passed

 -remote openURL(file:/long/and/winded/path/ls.html)

so you'd need to feed it to something (perl?) to extract the actual
URL. Then just use "xterm -e lynx $URL".
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Mar 22 18:25:41 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Wed, 22 Mar 2000 19:25:41 +0100 (MET)
Subject: [Rd] segmentation fault with 1D array (PR#500)
Message-ID: <200003221825.TAA14306@pubhealth.ku.dk>

Here's a nasty one.  The following has caused a segmentation
fault and possibly also a bus error.

fred <- 1:6
dim(fred) <- 6
dimnames(fred) <- list(LETTERS[1:6])
mm <- matrix(1:12, 2, 6)

mm %*% fred # segmentation fault here

In the case without the dimnames assignment the result is OK.

Cheers, Jonathan.


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Patched
 major = 0
 minor = 99.0
 year = 2000
 month = February
 day = 9
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Mar 22 18:43:27 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 22 Mar 2000 13:43:27 -0500 (EST)
Subject: [Rd] segmentation fault with 1D array (PR#500)
In-Reply-To: <200003221825.TAA14306@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.10003221342370.10699-100000@bolker.zoo.ufl.edu>

On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:

> Here's a nasty one.  The following has caused a segmentation
> fault and possibly also a bus error.
> 
> fred <- 1:6
> dim(fred) <- 6
> dimnames(fred) <- list(LETTERS[1:6])
> mm <- matrix(1:12, 2, 6)
> 
> mm %*% fred # segmentation fault here
> 
> In the case without the dimnames assignment the result is OK.

  Here (1.0.0 on RH 6.0) I get

Error: invalid type for dimname (must be a vector)

instead of a segmentation fault.

> 
> --please do not edit the information below--
> 
> Version:
>  platform = sparc-sun-solaris2.7
>  arch = sparc
>  os = solaris2.7
>  system = sparc, solaris2.7
>  status = Patched
>  major = 0
>  minor = 99.0
>  year = 2000
>  month = February
>  day = 9
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 22 18:59:23 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Mar 2000 19:59:23 +0100
Subject: [Rd] segmentation fault with 1D array (PR#500)
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Wed, 22 Mar 2000 19:25:41 +0100 (MET)"
References: <200003221825.TAA14306@pubhealth.ku.dk>
Message-ID: <x2zorqkf04.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> Here's a nasty one.  The following has caused a segmentation
> fault and possibly also a bus error.
> 
> fred <- 1:6
> dim(fred) <- 6
> dimnames(fred) <- list(LETTERS[1:6])
> mm <- matrix(1:12, 2, 6)
> 
> mm %*% fred # segmentation fault here
> 
> In the case without the dimnames assignment the result is OK.

Still present... Some pretty odd things appear to be going on there.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 22 19:06:57 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Mar 2000 20:06:57 +0100
Subject: [Rd] segmentation fault with 1D array (PR#500)
In-Reply-To: Ben Bolker's message of "Wed, 22 Mar 2000 13:43:27 -0500 (EST)"
References: <Pine.LNX.4.10.10003221342370.10699-100000@bolker.zoo.ufl.edu>
Message-ID: <x2wvmukeni.fsf@blueberry.kubism.ku.dk>

Ben Bolker <ben@zoo.ufl.edu> writes:

> On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:
> 
> > Here's a nasty one.  The following has caused a segmentation
> > fault and possibly also a bus error.
> > 
> > fred <- 1:6
> > dim(fred) <- 6
> > dimnames(fred) <- list(LETTERS[1:6])
> > mm <- matrix(1:12, 2, 6)
> > 
> > mm %*% fred # segmentation fault here
> > 
> > In the case without the dimnames assignment the result is OK.
> 
>   Here (1.0.0 on RH 6.0) I get
> 
> Error: invalid type for dimname (must be a vector)
> 
> instead of a segmentation fault.

Hm? 1.0.0 on RH 6.1 gives the segfault for me as does later patch
versions...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Mar 22 19:10:55 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 22 Mar 2000 14:10:55 -0500 (EST)
Subject: [Rd] segmentation fault with 1D array (PR#500)
In-Reply-To: <x2wvmukeni.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10003221408110.10733-100000@bolker.zoo.ufl.edu>


  Weird.  It does crash if I run it in a new session.  I tried the
commands out in a session that I'd already done a whole lot in, so maybe
it's just corrupting some little piece of my (large) environment rather
than segfaulting.

On 22 Mar 2000, Peter Dalgaard BSA wrote:

> Ben Bolker <ben@zoo.ufl.edu> writes:
> 
> > On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:
> > 
> > > Here's a nasty one.  The following has caused a segmentation
> > > fault and possibly also a bus error.
> > > 
> > > fred <- 1:6
> > > dim(fred) <- 6
> > > dimnames(fred) <- list(LETTERS[1:6])
> > > mm <- matrix(1:12, 2, 6)
> > > 
> > > mm %*% fred # segmentation fault here
> > > 
> > > In the case without the dimnames assignment the result is OK.
> > 
> >   Here (1.0.0 on RH 6.0) I get
> > 
> > Error: invalid type for dimname (must be a vector)
> > 
> > instead of a segmentation fault.
> 
> Hm? 1.0.0 on RH 6.1 gives the segfault for me as does later patch
> versions...
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Mar 22 19:14:11 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Wed, 22 Mar 2000 20:14:11 +0100 (MET)
Subject: [Rd] segmentation fault with 1D array (PR#500)
Message-ID: <200003221914.UAA14761@pubhealth.ku.dk>


  Weird.  It does crash if I run it in a new session.  I tried the
commands out in a session that I'd already done a whole lot in, so maybe
it's just corrupting some little piece of my (large) environment rather
than segfaulting.

On 22 Mar 2000, Peter Dalgaard BSA wrote:

> Ben Bolker <ben@zoo.ufl.edu> writes:
> 
> > On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:
> > 
> > > Here's a nasty one.  The following has caused a segmentation
> > > fault and possibly also a bus error.
> > > 
> > > fred <- 1:6
> > > dim(fred) <- 6
> > > dimnames(fred) <- list(LETTERS[1:6])
> > > mm <- matrix(1:12, 2, 6)
> > > 
> > > mm %*% fred # segmentation fault here
> > > 
> > > In the case without the dimnames assignment the result is OK.
> > 
> >   Here (1.0.0 on RH 6.0) I get
> > 
> > Error: invalid type for dimname (must be a vector)
> > 
> > instead of a segmentation fault.
> 
> Hm? 1.0.0 on RH 6.1 gives the segfault for me as does later patch
> versions...
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 22 20:10:28 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Mar 2000 21:10:28 +0100
Subject: [Rd] segmentation fault with 1D array (PR#500)
In-Reply-To: Peter Dalgaard BSA's message of "22 Mar 2000 20:06:57 +0100"
References: <Pine.LNX.4.10.10003221342370.10699-100000@bolker.zoo.ufl.edu> <x2wvmukeni.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2bt466a17.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Ben Bolker <ben@zoo.ufl.edu> writes:
> 
> > On Wed, 22 Mar 2000 J.C.Rougier@durham.ac.uk wrote:
> > 
> > > Here's a nasty one.  The following has caused a segmentation
> > > fault and possibly also a bus error.
> > > 
> > > fred <- 1:6
> > > dim(fred) <- 6
> > > dimnames(fred) <- list(LETTERS[1:6])
> > > mm <- matrix(1:12, 2, 6)
> > > 
> > > mm %*% fred # segmentation fault here
> > > 
> > > In the case without the dimnames assignment the result is OK.
> > 
> >   Here (1.0.0 on RH 6.0) I get
> > 
> > Error: invalid type for dimname (must be a vector)
> > 
> > instead of a segmentation fault.
> 
> Hm? 1.0.0 on RH 6.1 gives the segfault for me as does later patch
> versions...

Squished... Will commit to release track in a moment (if it survives
"make check").

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Thu Mar 23 06:00:09 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 23 Mar 2000 01:00:09 -0500
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: Kurt Hornik's message of "Wed, 22 Mar 2000 16:02:15 +0100 (CET)"
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu> <871z561pcm.fsf@bavaria.ece.cmu.edu> <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at>
Message-ID: <8766uens46.fsf@bavaria.ece.cmu.edu>


Hi,

ok, the main binary builds, but not ctest.so.  Here is the head of the
linker output:

$ ld -bM:SRE -H512 -T512 -bnoentry -bexpall       -bI:../../../../etc/R.exp  -o ct
est.so ansari.o fexact.o kendall.o ks.o prho.o swilk.o  -L/usr/local/lib -L/afs/
ece/usr/tov/opt/arch -lblas  -lxlf90 -lxlf -lxlomp_ser -lm
ld: 0711-317 ERROR: Undefined symbol: .sprintf
ld: 0711-317 ERROR: Undefined symbol: .itrunc

... and so on.  It's dearly missing -lc.  I've tried adding -lc and
that allowed at least ctest.so to link.  But where should -lc be added
for shared libs to link with?

Thanks,
  -tom

(I used rsync to get r-devel (date-stamp is 2000/March/22).)


Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

[snip]
> Can you have a look at the current r-devel snapshot?  The way I think my
> code works is by adding to R_XTRA_LIBS, which should only be used when
> linking the main binary, but not when creating shared libraries.
> 
> -k

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Mar 23 13:44:36 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 23 Mar 2000 14:44:36 +0100 (CET)
Subject: [Rd] clipboard
Message-ID: <14554.8132.140193.424776@galadriel.ci.tuwien.ac.at>


Hi,

if we do something like that for windows (which might be useful) we
should do the same for X, i.e., use the X clipboard in the same way.

Not that I know how to access it but it shouldn't be too hard to find
out. Both would probably come down to having something like

	read.table(text=foo, ...)

along with

	foo <- getClipboard(...)

reading a text string from the X or Windows clipboard (assuming that
what you get from the windows clipboard is a string).

.f

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 23 13:59:19 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Mar 2000 14:59:19 +0100
Subject: [Rd] clipboard
In-Reply-To: Friedrich Leisch's message of "Thu, 23 Mar 2000 14:44:36 +0100 (CET)"
References: <14554.8132.140193.424776@galadriel.ci.tuwien.ac.at>
Message-ID: <x2vh2dss7c.fsf@blueberry.kubism.ku.dk>

Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

> if we do something like that for windows (which might be useful) we
> should do the same for X, i.e., use the X clipboard in the same way.
> 
> Not that I know how to access it but it shouldn't be too hard to find
> out. Both would probably come down to having something like
> 
> 	read.table(text=foo, ...)
> 
> along with
> 
> 	foo <- getClipboard(...)
> 
> reading a text string from the X or Windows clipboard (assuming that
> what you get from the windows clipboard is a string).

Wouldn't that require some sort of coordination with a similar feature
in e.g. gnumeric? If all we can do with the clipboard is to stick its
content into a text file, we might as well do so directly...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Thu Mar 23 14:50:02 2000
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 23 Mar 2000 06:50:02 -0800
Subject: [Rd] clipboard
In-Reply-To: Peter Dalgaard BSA's message of "23 Mar 2000 14:59:19 +0100"
References: <14554.8132.140193.424776@galadriel.ci.tuwien.ac.at> <x2vh2dss7c.fsf@blueberry.kubism.ku.dk>
Message-ID: <87itydzqp1.fsf@alpha.cfas.washington.edu>

>>>>> "PDB" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PDB> Wouldn't that require some sort of coordination with a
    PDB> similar feature in e.g. gnumeric? If all we can do with the
    PDB> clipboard is to stick its content into a text file, we might
    PDB> as well do so directly...

Check out the drag-n-drop discussions on the XEmacs/GNOME mailing
lists...  (or possibly the code -- you'd have to look at the various
DnD protocols, 4-5 currently in use to be fairly general across unices
and not just Linux-centric (which would still be 3) I believe...).

best,
-tony

-- 
A.J. Rossini		       Research Assistant Professor of Biostatistics 
Biostatistics/Univ. of Washington  (Th)	Box 357232   206-543-1044 (3286=fax)
Center for AIDS Research/HMC/UW	  (M/F)	Box 359931   206-731-3647 (3693=fax)
VTN/SCHARP/FHCRC		 (Tu/W)	Box 358080   206-667-7025 (4812=fax)
rossini@(biostat.washington.edu|u.washington.edu|hivnet.fhcrc.org)
http://www.biostat.washington.edu/~rossini

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Mar 23 15:15:35 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 23 Mar 2000 16:15:35 +0100 (CET)
Subject: [Rd] clipboard
In-Reply-To: <x2vh2dss7c.fsf@blueberry.kubism.ku.dk>
References: <14554.8132.140193.424776@galadriel.ci.tuwien.ac.at>
 <x2vh2dss7c.fsf@blueberry.kubism.ku.dk>
Message-ID: <14554.13591.966735.391021@galadriel.ci.tuwien.ac.at>

>>>>> On 23 Mar 2000 14:59:19 +0100,
>>>>> Peter Dalgaard BSA (PDB) wrote:

PDB> Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:
>> if we do something like that for windows (which might be useful) we
>> should do the same for X, i.e., use the X clipboard in the same way.
>> 
>> Not that I know how to access it but it shouldn't be too hard to find
>> out. Both would probably come down to having something like
>> 
>> read.table(text=foo, ...)
>> 
>> along with
>> 
>> foo <- getClipboard(...)
>> 
>> reading a text string from the X or Windows clipboard (assuming that
>> what you get from the windows clipboard is a string).

PDB> Wouldn't that require some sort of coordination with a similar feature
PDB> in e.g. gnumeric? If all we can do with the clipboard is to stick its
PDB> content into a text file, we might as well do so directly...

Well, sure ... I just meant the above as simple default method which
should work in cooperation with all applications. If I write the
string to a tmpfile and use the current read.table or enhance
read.table is probably not really important, just the latter should be
more efficient (and could be useful in other contexts, too).

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Mar 23 17:10:31 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 23 Mar 2000 18:10:31 +0100
Subject: [Rd] 3D-Scatterplot
Message-ID: <38DA5007.B0AB5186@statistik.uni-dortmund.de>

If someone is interested in 3D-scatterplots, have a look at
http://www.statistik.uni-dortmund.de/leute/ligges.htm

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Thu Mar 23 17:37:53 2000
From: kjetil.kjernsmo@astro.uio.no (Kjetil Kjernsmo)
Date: Thu, 23 Mar 2000 18:37:53 +0100 (MET)
Subject: [Rd] Some "new" stuff for hist.R
Message-ID: <Pine.OSF.4.05.10003231657240.7710-200000@alnair.uio.no>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--0-201145637-953833073=:7710
Content-Type: TEXT/PLAIN; charset=US-ASCII

Dear all,

I've been hacking on histograms the past couple of days. I wanted to do
two things, add histograms where the breaks of one histogram is a
subset sequence of the other, and get a histogram plot from a histogram
object. I found no function to do these things and got no response on
r-help, so I started doing it myself. I think I have solved it now, so
I have attached the code I've got, in case it would be something to
include in R in the future. 
I guess most of the file is your code, that is, it's just hist.default
with only two changes:
In the line
  stop("`probability' is an alias for `!freq', however they differ.")
--------------------^ closing ' was missing
and it returns an object with class="histogram". 

Then, I made hist.histogram, that plots an existing "histogram" object.
This is also just your code, I just did cut'n'paste on the parts that
seemed relevant. One might argue that the default method should be split
in two, since these two parts are almost identical. 

Then, there's adding. To find a subset sequence, I wrote a
sub.vector-function, admittedly very ugly, what I really wanted was a
function that would output the union of sequences and pad the rest with
zeros. Anyway, the function solves my problem... (I'm not usually a
pragmatist... :-)) Then, there's the add.histogram function that outputs a
histogram object. I tried to declare "+".histogram, "%+%".histogram and
things like that, in the hope of creating a binary operator for
histograms, but I couldn't get it to work. Anyway, this is what I've got,
I hope it can be used.

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no 


--0-201145637-953833073=:7710
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="hist.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.OSF.4.05.10003231837530.7710@alnair.uio.no>
Content-Description: Histogram R-code
Content-Disposition: attachment; filename="hist.R"

aGlzdCA8LSBmdW5jdGlvbih4LCAuLi4pIFVzZU1ldGhvZCgiaGlzdCIpDQoN
Cmhpc3QuZGVmYXVsdCA8LQ0KICAgIGZ1bmN0aW9uICh4LCBicmVha3MsIGZy
ZXE9IE5VTEwsIHByb2JhYmlsaXR5ID0gIWZyZXEsIGluY2x1ZGUubG93ZXN0
PSBUUlVFLA0KCSAgICAgIHJpZ2h0PVRSVUUsIGNvbCA9IE5VTEwsIGJvcmRl
ciA9IHBhcigiZmciKSwNCgkgICAgICBtYWluID0gcGFzdGUoIkhpc3RvZ3Jh
bSBvZiIgLCBkZXBhcnNlKHN1YnN0aXR1dGUoeCkpKSwNCgkgICAgICB4bGlt
ID0gcmFuZ2UoYnJlYWtzKSwgeWxpbSA9IHJhbmdlKHksIDApLA0KCSAgICAg
IHhsYWIgPSBkZXBhcnNlKHN1YnN0aXR1dGUoeCkpLCB5bGFiLA0KCSAgICAg
IGF4ZXMgPSBUUlVFLCBwbG90ID0gVFJVRSwgbGFiZWxzID0gRkFMU0UsIG5j
bGFzcyA9IE5VTEwsIC4uLikNCnsNCiAgICBpZiAoIWlzLm51bWVyaWMoeCkp
DQoJc3RvcCgiaGlzdDogeCBtdXN0IGJlIG51bWVyaWMiKQ0KICAgIG1haW4g
IyBldmFsKCkgbm93OiBkZWZlYXQgbGF6eSBldmFsDQogICAgeGxhYg0KICAg
IG4gPC0gbGVuZ3RoKHggPC0geFshaXMubmEoeCldKQ0KICAgIHVzZS5iciA8
LSAhbWlzc2luZyhicmVha3MpDQogICAgaWYodXNlLmJyKSB7DQoJaWYoIW1p
c3NpbmcobmNsYXNzKSkNCgkgICAgd2FybmluZygiYG5jbGFzcycgbm90IHVz
ZWQgd2hlbiBgYnJlYWtzJyBzcGVjaWZpZWQiKQ0KICAgIH0NCiAgICBlbHNl
IGlmKCFpcy5udWxsKG5jbGFzcykgJiYgbGVuZ3RoKG5jbGFzcykgPT0gMSkN
CglicmVha3MgPC0gbmNsYXNzDQogICAgdXNlLmJyIDwtIHVzZS5iciAmJiAo
bkIgPC0gbGVuZ3RoKGJyZWFrcykpID4gMQ0KICAgIGlmKHVzZS5icikNCgli
cmVha3MgPC0gc29ydChicmVha3MpDQogICAgZWxzZSB7ICMgY29uc3RydWN0
IHZlY3RvciBvZiBicmVha3MNCglyeCA8LSByYW5nZSh4KQ0KCW5uYiA8LQ0K
CSAgICBpZihtaXNzaW5nKGJyZWFrcykpIDEgKyBsb2cyKG4pDQoJICAgIGVs
c2UgeyAjIGJyZWFrcyA9IGBuY2xhc3MnDQoJCWlmIChpcy5uYShicmVha3Mp
IHwgYnJlYWtzIDwgMikNCgkJICAgIHN0b3AoImludmFsaWQgbnVtYmVyIG9m
IGJyZWFrcyIpDQoJCWJyZWFrcw0KCSAgICB9DQoJYnJlYWtzIDwtIHByZXR0
eSAocngsIG4gPSBubmIsIG1pbi5uPTEsIGVwcy5jb3JyID0gMikNCgluQiA8
LSBsZW5ndGgoYnJlYWtzKQ0KCWlmKG5CIDw9IDEpIHsgIyMtLSBJbXBvc3Np
YmxlICENCgkgICAgc3RvcChwYXN0ZSgiaGlzdC5kZWZhdWx0OiBwcmV0dHko
KSBlcnJvciwgYnJlYWtzPSIsZm9ybWF0KGJyZWFrcykpKQ0KCX0NCiAgICB9
DQogICAgc3RvcmFnZS5tb2RlKHgpIDwtICJkb3VibGUiDQogICAgc3RvcmFn
ZS5tb2RlKGJyZWFrcykgPC0gImRvdWJsZSINCiAgICBjb3VudHMgPC0gLkMo
ImJpbmNvdW50IiwNCgkJIHgsDQoJCSBuLA0KCQkgYnJlYWtzLA0KCQkgbkIs
DQoJCSBjb3VudHMgPSBpbnRlZ2VyKG5CIC0gMSksDQoJCSByaWdodAk9IGFz
LmxvZ2ljYWwocmlnaHQpLA0KCQkgaW5jbHVkZT0gYXMubG9naWNhbChpbmNs
dWRlLmxvd2VzdCksDQoJCSBOQU9LID0gRkFMU0UsIERVUCA9IEZBTFNFLCBQ
QUNLQUdFID0gImJhc2UiKSAkY291bnRzDQogICAgaWYgKGFueShjb3VudHMg
PCAwKSkNCglzdG9wKCJuZWdhdGl2ZSBgY291bnRzJy4gSW50ZXJuYWwgRXJy
b3IgaW4gQy1jb2RlIGZvciBcImJpbmNvdW50XCIiKQ0KICAgIGlmIChzdW0o
Y291bnRzKSA8IG4pDQoJc3RvcCgic29tZSBgeCcgbm90IGNvdW50ZWQ7IG1h
eWJlIGBicmVha3MnIGRvIG5vdCBzcGFuIHJhbmdlIG9mIGB4JyIpDQogICAg
aCA8LSBkaWZmKGJyZWFrcykNCiAgICBpZiAoIXVzZS5iciAmJiBhbnkoaCA8
PSAwKSkNCglzdG9wKCJub3Qgc3RyaWN0bHkgaW5jcmVhc2luZyBgYnJlYWtz
Jy4iKQ0KICAgIGlmIChpcy5udWxsKGZyZXEpKSB7DQoJZnJlcSA8LSBpZigh
bWlzc2luZyhwcm9iYWJpbGl0eSkpDQoJICAgICFhcy5sb2dpY2FsKHByb2Jh
YmlsaXR5KQ0KCWVsc2UgaWYodXNlLmJyKSB7DQoJICAgICMjLS0gRG8gZnJl
cXVlbmNpZXMgaWYgYnJlYWtzIGFyZSBldmVubHkgc3BhY2VkDQoJICAgIG1h
eChoKS1taW4oaCkgPCAxZS03ICogbWVhbihoKQ0KCX0gZWxzZSBUUlVFDQog
ICAgfSBlbHNlIGlmKCFtaXNzaW5nKHByb2JhYmlsaXR5KSAmJiBhbnkocHJv
YmFiaWxpdHkgPT0gZnJlcSkpDQoJc3RvcCgiYHByb2JhYmlsaXR5JyBpcyBh
biBhbGlhcyBmb3IgYCFmcmVxJywgaG93ZXZlciB0aGV5IGRpZmZlci4iKQ0K
ICAgIGludGVuc2l0aWVzIDwtIGNvdW50cy8obipoKQ0KICAgIG1pZHMgPC0g
MC41ICogKGJyZWFrc1stMV0gKyBicmVha3NbLW5CXSkNCiAgICB5IDwtIGlm
IChmcmVxKSBjb3VudHMgZWxzZSBpbnRlbnNpdGllcw0KICAgIHIgPC0gc3Ry
dWN0dXJlKGxpc3QoYnJlYWtzID0gYnJlYWtzLCBjb3VudHMgPSBjb3VudHMs
DQoJICAgICAgaW50ZW5zaXRpZXMgPSBpbnRlbnNpdGllcywgbWlkcyA9IG1p
ZHMpLCBjbGFzcz0iaGlzdG9ncmFtIikNCiAgICBpZiAocGxvdCkgew0KCXBs
b3QubmV3KCkNCglwbG90LndpbmRvdyh4bGltLCB5bGltLCAiIikgIy0+IHls
aW0ncyBkZWZhdWx0IGZyb20gJ3knDQoJaWYgKG1pc3NpbmcoeWxhYikpDQoJ
ICAgIHlsYWIgPC0gcGFzdGUoaWYoIWZyZXEpIlJlbGF0aXZlICIsICJGcmVx
dWVuY3kiLCBzZXA9IiIpDQoJaWYoZnJlcSAmJiB1c2UuYnIgJiYgbWF4KGgp
LW1pbihoKSA+IDFlLTcgKiBtZWFuKGgpKQ0KCSAgICB3YXJuaW5nKCJ0aGUg
QVJFQVMgaW4gdGhlIHBsb3QgYXJlIHdyb25nIC0tIG1heWJlIHVzZSBgZnJl
cT1GQUxTRSciKQ0KCXRpdGxlKG1haW4gPSBtYWluLCB4bGFiID0geGxhYiwg
eWxhYiA9IHlsYWIsIC4uLikNCglpZihheGVzKSB7DQoJICAgIGF4aXMoMSwg
Li4uKQ0KCSAgICBheGlzKDIsIC4uLikNCgl9DQoJcmVjdChicmVha3NbLW5C
XSwgMCwgYnJlYWtzWy0xXSwgeSwNCgkgICAgIGNvbCA9IGNvbCwgYm9yZGVy
ID0gYm9yZGVyKQ0KCWlmKGxhYmVscykNCgkgICAgdGV4dChtaWRzLCB5LA0K
CQkgbGFiZWxzID0gaWYoZnJlcSkgY291bnRzIGVsc2Ugcm91bmQoaW50ZW5z
aXRpZXMsMyksDQoJCSBhZGogPSBjKDAuNSwgLTAuNSkpDQoJaW52aXNpYmxl
KHIpDQogICAgfQ0KICAgIGVsc2Ugcg0KfQ0KDQoNCmhpc3QuaGlzdG9ncmFt
IDwtDQogIGZ1bmN0aW9uIChoLCBmcmVxPSBOVUxMLCBwcm9iYWJpbGl0eSA9
ICFmcmVxLCANCgkgICAgICBjb2wgPSBOVUxMLCBib3JkZXIgPSBwYXIoImZn
IiksDQoJICAgICAgbWFpbiA9IHBhc3RlKCJIaXN0b2dyYW0gb2YiICwgZGVw
YXJzZShzdWJzdGl0dXRlKGgpKSksDQoJICAgICAgeGxpbSA9IHJhbmdlKGgk
YnJlYWtzKSwgeWxpbSA9IHJhbmdlKHksIDApLA0KCSAgICAgIHhsYWIgPSBk
ZXBhcnNlKHN1YnN0aXR1dGUoaCkpLCB5bGFiLA0KCSAgICAgIGF4ZXMgPSBU
UlVFLCBsYWJlbHMgPSBGQUxTRSwgIC4uLikNCnsNCiAgaWYgKGlzLm51bGwo
ZnJlcSkpIHsNCiAgICBmcmVxIDwtIGlmKCFtaXNzaW5nKHByb2JhYmlsaXR5
KSkNCiAgICAgICFhcy5sb2dpY2FsKHByb2JhYmlsaXR5KSBlbHNlIFRSVUUN
CiAgfSBlbHNlIGlmKCFtaXNzaW5nKHByb2JhYmlsaXR5KSAmJiBhbnkocHJv
YmFiaWxpdHkgPT0gZnJlcSkpDQogICAgc3RvcCgiYHByb2JhYmlsaXR5JyBp
cyBhbiBhbGlhcyBmb3IgYCFmcmVxJywgaG93ZXZlciB0aGV5IGRpZmZlci4i
KQ0KICB5IDwtIGlmIChmcmVxKSBoJGNvdW50cyBlbHNlIGgkaW50ZW5zaXRp
ZXMNCiAgbkIgPC0gbGVuZ3RoKGgkYnJlYWtzKQ0KICBwbG90Lm5ldygpDQog
IHBsb3Qud2luZG93KHhsaW0sIHlsaW0sICIiKSAjLT4geWxpbSdzIGRlZmF1
bHQgZnJvbSAneScNCiAgaWYgKG1pc3NpbmcoeWxhYikpDQogICAgeWxhYiA8
LSBwYXN0ZShpZighZnJlcSkiUmVsYXRpdmUgIiwgIkZyZXF1ZW5jeSIsIHNl
cD0iIikNCiAgdGl0bGUobWFpbiA9IG1haW4sIHhsYWIgPSB4bGFiLCB5bGFi
ID0geWxhYiwgLi4uKQ0KICBpZihheGVzKSB7DQogICAgYXhpcygxLCAuLi4p
DQogICAgYXhpcygyLCAuLi4pDQogIH0NCiAgcmVjdChoJGJyZWFrc1stbkJd
LCAwLCBoJGJyZWFrc1stMV0sIHksDQogICAgICAgY29sID0gY29sLCBib3Jk
ZXIgPSBib3JkZXIpDQogIGlmKGxhYmVscykNCiAgICB0ZXh0KGgkbWlkcywg
eSwNCiAgICAgICAgIGxhYmVscyA9IGlmKGZyZXEpIGgkY291bnRzIGVsc2Ug
cm91bmQoaCRpbnRlbnNpdGllcywzKSwNCiAgICAgICAgIGFkaiA9IGMoMC41
LCAtMC41KSkNCiAgaW52aXNpYmxlKHkpDQp9DQpzdWIudmVjdG9yIDwtIGZ1
bmN0aW9uKGIxLCBiMikNCnsNCiAgaSA8LSAwDQogIHdoaWxlKCEgYWxsKGIy
WyhpKzEpOihsZW5ndGgoYjEpK2kpXSA9PSBiMSkpDQogIHsgICANCiAgICBp
PC1pKzENCiAgICBpZihpK2xlbmd0aChiMSkgPiBsZW5ndGgoYjIpKSByZXR1
cm4oTlVMTCkNCiAgfQ0KICByZXR1cm4oKGkrMSk6KGxlbmd0aChiMSkraSkp
DQp9DQoNCmFkZC5oaXN0b2dyYW0gPC0gZnVuY3Rpb24oaDEsIGgyKQ0Kew0K
ICBpZihsZW5ndGgoaDEkYnJlYWtzKSA+PSBsZW5ndGgoaDIkYnJlYWtzKSkN
CiAgew0KICAgIGJsIDwtIGgxJGJyZWFrcw0KICAgIGJzIDwtIGgyJGJyZWFr
cw0KICAgIGNsIDwtIGgxJGNvdW50cw0KICAgIGNzIDwtIGgyJGNvdW50cw0K
ICAgIG1pIDwtIGgxJG1pZHMNCiAgfSBlbHNlIHsNCiAgICBicyA8LSBoMSRi
cmVha3MNCiAgICBibCA8LSBoMiRicmVha3MNCiAgICBjcyA8LSBoMSRjb3Vu
dHMNCiAgICBjbCA8LSBoMiRjb3VudHMNCiAgICBtaSA8LSBoMiRtaWRzDQog
IH0NCiAgaW5kIDwtIHN1Yi52ZWN0b3IoYnMsIGJsKQ0KICBpZighIGlzLnZl
Y3RvcihpbmQpKSBzdG9wKCJJbmNvbXBhdGlibGUgYnJlYWtzIikNCiAgYzAg
PC0gcmVwKDAsIGxlbmd0aChjbCkpDQogIGMwW2luZFsxOmxlbmd0aChjcyld
XSA8LSBjcw0KICBjdCA8LSBjMCArIGNsDQogIGludCA8LSBjdC8oc3VtKGN0
KSpkaWZmKGJsKSkgIyBUaGlzIHdvcmtzIGZvciBub24tZXF1aWRpc3RhbnQg
YnJlYWtzPw0KICByZXR1cm4oc3RydWN0dXJlKGxpc3QoYnJlYWtzPWJsLA0K
ICAgICAgICAgICAgICAgICAgICAgICAgY291bnRzPWN0LA0KICAgICAgICAg
ICAgICAgICAgICAgICAgaW50ZW5zaXRpZXM9aW50LA0KICAgICAgICAgICAg
ICAgICAgICAgICAgbWlkcz1taSksDQogICAgICAgICAgICAgICAgICAgY2xh
c3M9Imhpc3RvZ3JhbSIpKQ0KfQ0K
--0-201145637-953833073=:7710--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Mar 23 18:27:35 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 23 Mar 2000 19:27:35 +0100 (CET)
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: <8766uens46.fsf@bavaria.ece.cmu.edu>
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu>
 <871z561pcm.fsf@bavaria.ece.cmu.edu>
 <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at>
 <8766uens46.fsf@bavaria.ece.cmu.edu>
Message-ID: <14554.25111.847983.270127@aragorn.ci.tuwien.ac.at>

>>>>> Thomas J Vogels writes:

> Hi,

> ok, the main binary builds, but not ctest.so.  Here is the head of the
> linker output:

> $ ld -bM:SRE -H512 -T512 -bnoentry -bexpall       -bI:../../../../etc/R.exp  -o ct
> est.so ansari.o fexact.o kendall.o ks.o prho.o swilk.o  -L/usr/local/lib -L/afs/
> ece/usr/tov/opt/arch -lblas  -lxlf90 -lxlf -lxlomp_ser -lm
> ld: 0711-317 ERROR: Undefined symbol: .sprintf
> ld: 0711-317 ERROR: Undefined symbol: .itrunc

> ... and so on.  It's dearly missing -lc.  I've tried adding -lc and
> that allowed at least ctest.so to link.  But where should -lc be added
> for shared libs to link with?

Tried adding to LIBS now.  Pls check.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From santini@dsi.unimi.it  Fri Mar 24 10:12:52 2000
From: santini@dsi.unimi.it (santini@dsi.unimi.it)
Date: Fri, 24 Mar 2000 11:12:52 +0100 (MET)
Subject: [Rd] kernel {ts}, kernel.dirichlet calling with one arg (PR#501)
Message-ID: <200003241012.LAA29932@pubhealth.ku.dk>

Full_Name: Massimo Santini
Version: 1.0.0
OS: Linux
Submission from: (NULL) (159.149.147.89)


At line 1269 of .../R/library/ts/R/ts there is the following call

	dirichlet = dirichlet.kernel(m), 

but since dirichlet.kernel is declared somewhre above to take two arguments, 
I suspect that that line should read as

	dirichlet = dirichlet.kernel(m, r), 

Without this correction the call
	
	kernel("dirichlet",m=10,r=1);
	
always returns the following error

	Error in dirichlet.kernel(m) : Argument "r" is missing, with no default

while after the proposed patch if correctly outputs the desider kernel.

I hope this helps,

			best regards, Massimo

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lbaring@stochastik.uni-hannover.de  Fri Mar 24 12:23:25 2000
From: lbaring@stochastik.uni-hannover.de (lbaring@stochastik.uni-hannover.de)
Date: Fri, 24 Mar 2000 13:23:25 +0100 (MET)
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
Message-ID: <200003241223.NAA02113@pubhealth.ku.dk>

Hello!

I use R-version 1.0.0
To get the 0.95 quantile of the hypergeometric
distribution with the parameters m=45000,n=5000 and
k=600 I use the R-command 

> qhyper(0.95,45000,5000,600).


The value obtained is 600. However, the true value
is 552. The latter can be obtained for example by
calling the corresponding distribution function 
with the R commands 

> x<-540:580
> phyper(x,45000,5000,600)   

The value 552 is obtained also by the usual normal
approximation.


Overall, it seems that R produces errors when calling
qhyper(p,m,n,k) for large values of the parametes 
m,n or k.

Sincerely
L. Baringhaus

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Fri Mar 24 13:40:13 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Fri, 24 Mar 2000 14:40:13 +0100 (CET)
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
In-Reply-To: <200003241223.NAA02113@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0003241433160.21466-100000@boromir.ci.tuwien.ac.at>


> Hello!
> 
> I use R-version 1.0.0
> To get the 0.95 quantile of the hypergeometric
> distribution with the parameters m=45000,n=5000 and
> k=600 I use the R-command 
> 
> > qhyper(0.95,45000,5000,600).
> 
> 
> The value obtained is 600. However, the true value
> is 552. 

Well, 

had a short look. The problem arises in qhyper.c at line 56:

 term = exp(lfastchoose(NR, xr) + lfastchoose(NB, xb) - lfastchoose(N, n));

The expression inside the exp() function gives -1415.411856 and exp()
returns 0. So term and sum in 

 while(sum < p && xr < xend) {
        xr++;
        NB++;
        term *= (NR / xr) * (xb / NB);
        sum += term;
        xb--;
        NR--;
    }

are 0 all the time and xend = 600 is returned. 

R-Core: How to fix this?

Torsten

*****************************************************************
*				                                *
* Torsten Hothorn, Statistician 		                *
* at the moment: Institut fuer Statistik, TU Wien	        *
* Tel: 0043 1 58801 10772                  			*
* Fax: 0043 1 58801 10798                                       *
*                                                               *
*****************************************************************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hothorn@ci.tuwien.ac.at  Fri Mar 24 13:58:25 2000
From: hothorn@ci.tuwien.ac.at (Torsten Hothorn)
Date: Fri, 24 Mar 2000 14:58:25 +0100 (CET)
Subject: [Rd] StatDataML & Gnumeric
Message-ID: <Pine.LNX.4.21.0003241452010.26446-100000@boromir.ci.tuwien.ac.at>


I just uploaded version 0.2-5 of the StatDataML package and a corrected
version of the proposal to http://www.ci.tuwien.ac.at/~leisch/R

Also available now is StatDataMLGnumeric, which implements writing of
"dataframe.dtd" conform StatDataML files from Gnumeric. 

Torsten

*****************************************************************
*								*
* Torsten Hothorn, Statistician					*
* at the moment: Institut fuer Statistik, TU Wien		*
* Tel: 0043 1 58801 10772					*
* Fax: 0043 1 58801 10798					*
*								*
*****************************************************************


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 24 14:58:39 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Mar 2000 15:58:39 +0100
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
In-Reply-To: Torsten Hothorn's message of "Fri, 24 Mar 2000 14:40:13 +0100 (CET)"
References: <Pine.LNX.4.21.0003241433160.21466-100000@boromir.ci.tuwien.ac.at>
Message-ID: <x2wvmswh28.fsf@blueberry.kubism.ku.dk>

Torsten Hothorn <hothorn@ci.tuwien.ac.at> writes:

>  term = exp(lfastchoose(NR, xr) + lfastchoose(NB, xb) - lfastchoose(N, n));
> 
> The expression inside the exp() function gives -1415.411856 and exp()
> returns 0. So term and sum in 
> 
>  while(sum < p && xr < xend) {
>         xr++;
>         NB++;
>         term *= (NR / xr) * (xb / NB);
>         sum += term;
>         xb--;
>         NR--;
>     }
> 
> are 0 all the time and xend = 600 is returned. 
> 
> R-Core: How to fix this?

Ick! That is of course only to be expected with recurrence relations
like this applied to large numbers. Since the term formula (as far as
I remember!) applies to all the point probabilities, I suppose that
one could start the recurrence from a "known positive" value and work
both forwards and backwards from there. Since you still want to do the
sums from the low end (although that is perhaps not all that
important?) you might need an intermediate array to hold the values.
One idea could be to start from the normal approximation of the
desired quantile. Probably a bit more than an afternoons work, but
hardly several weeks...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar 24 16:10:38 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 24 Mar 2000 08:10:38 -0800 (PST)
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
In-Reply-To: <x2wvmswh28.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.21.0003240807090.2323-100000@mail.biostat.washington.edu>

On 24 Mar 2000, Peter Dalgaard BSA wrote:

> Torsten Hothorn <hothorn@ci.tuwien.ac.at> writes:
> 
> >  term = exp(lfastchoose(NR, xr) + lfastchoose(NB, xb) - lfastchoose(N, n));
> > 
> > The expression inside the exp() function gives -1415.411856 and exp()
> > returns 0. So term and sum in 
> > 
> >  while(sum < p && xr < xend) {
> >         xr++;
> >         NB++;
> >         term *= (NR / xr) * (xb / NB);
> >         sum += term;
> >         xb--;
> >         NR--;
> >     }
> > 
> > are 0 all the time and xend = 600 is returned. 
> > 
> > R-Core: How to fix this?
> 
> Ick! That is of course only to be expected with recurrence relations
> like this applied to large numbers. Since the term formula (as far as
> I remember!) applies to all the point probabilities, I suppose that
> one could start the recurrence from a "known positive" value and work
> both forwards and backwards from there. Since you still want to do the
> sums from the low end (although that is perhaps not all that
> important?) you might need an intermediate array to hold the values.
> One idea could be to start from the normal approximation of the
> desired quantile. Probably a bit more than an afternoons work, but
> hardly several weeks...

As phyper seems to work we could just start at the Normal approximation to
qhyper and search for x such  that phyper(x)=p. Since it's a discrete
distribution this shouldn't take that long.

	-thomas





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar 24 16:10:35 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Fri, 24 Mar 2000 17:10:35 +0100 (MET)
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
Message-ID: <200003241610.RAA05583@pubhealth.ku.dk>

On 24 Mar 2000, Peter Dalgaard BSA wrote:

> Torsten Hothorn <hothorn@ci.tuwien.ac.at> writes:
> 
> >  term = exp(lfastchoose(NR, xr) + lfastchoose(NB, xb) - lfastchoose(N, n));
> > 
> > The expression inside the exp() function gives -1415.411856 and exp()
> > returns 0. So term and sum in 
> > 
> >  while(sum < p && xr < xend) {
> >         xr++;
> >         NB++;
> >         term *= (NR / xr) * (xb / NB);
> >         sum += term;
> >         xb--;
> >         NR--;
> >     }
> > 
> > are 0 all the time and xend = 600 is returned. 
> > 
> > R-Core: How to fix this?
> 
> Ick! That is of course only to be expected with recurrence relations
> like this applied to large numbers. Since the term formula (as far as
> I remember!) applies to all the point probabilities, I suppose that
> one could start the recurrence from a "known positive" value and work
> both forwards and backwards from there. Since you still want to do the
> sums from the low end (although that is perhaps not all that
> important?) you might need an intermediate array to hold the values.
> One idea could be to start from the normal approximation of the
> desired quantile. Probably a bit more than an afternoons work, but
> hardly several weeks...

As phyper seems to work we could just start at the Normal approximation to
qhyper and search for x such  that phyper(x)=p. Since it's a discrete
distribution this shouldn't take that long.

	-thomas






-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 24 16:29:06 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 24 Mar 2000 17:29:06 +0100 (MET)
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
Message-ID: <200003241629.RAA05692@pubhealth.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> As phyper seems to work we could just start at the Normal approximation to
> qhyper and search for x such  that phyper(x)=p. Since it's a discrete
> distribution this shouldn't take that long.

Or apply the same fixup:

        sum += (small_N ? term : exp(term));
        ...
        if(small_N) term *= (NR / xr) * (xb / NB);
        else    term += log((NR / xr) * (xb / NB));

which is pretty obviously not optimized for speed, but certainly
avoids the multiply-by-zero effect.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 24 16:32:37 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Mar 2000 17:32:37 +0100
Subject: [Rd] quantiles of the hypergeometric distribution (PR#502)
In-Reply-To: Thomas Lumley's message of "Fri, 24 Mar 2000 08:10:38 -0800 (PST)"
References: <Pine.GSO.4.21.0003240807090.2323-100000@mail.biostat.washington.edu>
Message-ID: <x2r9d0wcpm.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> As phyper seems to work we could just start at the Normal approximation to
> qhyper and search for x such  that phyper(x)=p. Since it's a discrete
> distribution this shouldn't take that long.

Or apply the same fixup:

        sum += (small_N ? term : exp(term));
        ...
        if(small_N) term *= (NR / xr) * (xb / NB);
        else    term += log((NR / xr) * (xb / NB));

which is pretty obviously not optimized for speed, but certainly
avoids the multiply-by-zero effect.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Fri Mar 24 19:26:18 2000
From: warnes@biostat.washington.edu (warnes@biostat.washington.edu)
Date: Fri, 24 Mar 2000 20:26:18 +0100 (MET)
Subject: [Rd] dmvnorm() bug in e1071 (PR#503)
Message-ID: <200003241926.UAA06290@pubhealth.ku.dk>


When dmvnorm is applied to matrices it fails.  The offending lines are

  if (length(x) != ncol(sigma)) {
    stop("x and sigma have non-conforming size")
  }

which works fine if x is a dataframe, but not if x is a matrix.

Replacing this test with

  if (ncol(x) != ncol(sigma)) {
    stop("x and sigma have non-conforming size")
  }

Corrects the problem, and still works for data frames and
vectors.  (Vectors have already been converted to matrices).

-Gregory


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Mar 24 19:53:42 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Fri, 24 Mar 2000 14:53:42 -0500 (EST)
Subject: [Rd] Some "new" stuff for hist.R
In-Reply-To: <Pine.OSF.4.05.10003231657240.7710-200000@alnair.uio.no>
Message-ID: <Pine.LNX.4.10.10003241450500.824-100000@bolker.zoo.ufl.edu>

On Thu, 23 Mar 2000, Kjetil Kjernsmo wrote:

> Dear all,
> 
> I've been hacking on histograms the past couple of days. I wanted to do
> two things, add histograms where the breaks of one histogram is a
> subset sequence of the other, and get a histogram plot from a histogram
> object.

> Then, I made hist.histogram, that plots an existing "histogram" object.
> This is also just your code, I just did cut'n'paste on the parts that
> seemed relevant. One might argue that the default method should be split
> in two, since these two parts are almost identical. 

  Might it be more logical to make hist.histogram be plot.histogram
instead?  

  This is a nice idea; I had thought in the past that it would be nice to
make "histogram" into a class with print and plot methods (in particular,
it's sometimes nice to be able to overlay different histograms on each
other), but never got around to doing it.

  Ben

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Fri Mar 24 19:58:43 2000
From: kjetil.kjernsmo@astro.uio.no (Kjetil Kjernsmo)
Date: Fri, 24 Mar 2000 20:58:43 +0100 (MET)
Subject: [Rd] Some "new" stuff for hist.R
In-Reply-To: <Pine.LNX.4.10.10003241450500.824-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.OSF.4.05.10003242057440.2535-100000@alnair.uio.no>

On Fri, 24 Mar 2000, Ben Bolker wrote:

>  Might it be more logical to make hist.histogram be plot.histogram
>instead?  

Yep, Jens e-mailed me about it, and after thinking about, I think it would
be a good idea.

>  This is a nice idea; I had thought in the past that it would be nice to
>make "histogram" into a class with print and plot methods (in particular,
>it's sometimes nice to be able to overlay different histograms on each
>other), but never got around to doing it.

Yeah, that would have been a niec feature too! :-)

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Sat Mar 25 20:06:53 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Sat, 25 Mar 2000 21:06:53 +0100 (MET)
Subject: [Rd] new save code and DOTSXP (PR#504)
Message-ID: <200003252006.VAA08757@pubhealth.ku.dk>

The new save/load code cannot handle DOTSXP

 f<-function(x,...){ function(y) list(x=x,y=y,...)} 
 a<-f(1,2,3)
 save(list="a",file="a.rdata")

Error in save(list = "a", file = "a.rdata") :
        NewWriteItem: unknown type 17



R 1.0 on Solaris or Linux

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Sat Mar 25 20:16:40 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Sat, 25 Mar 2000 21:16:40 +0100 (MET)
Subject: [Rd] interrupted save (PR#505)
Message-ID: <200003252016.VAA08795@pubhealth.ku.dk>


If an error occurs during a save the file does not appear to be
closed and buffers flushed.  This can lead to corruption if the same
filename is used later and then the buffer is flushed on program exit.

For example, tn the context of PR #504

 f<-function(x,...){ function(y) list(x=x,y=y,...)}
 a<-f(1,2,3)
 save(list="a",file="a.rdata")  ## -- error --
 b<-1:10
 save(list="b",file="a.rdata")
 load("a.rdata")  ## works
 q("no")
 
 R

 load("a.rdata")  ## error



This is R1.0 on Linux

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Mar 26 09:06:55 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 26 Mar 2000 09:06:55 +0100 (BST)
Subject: [Rd] windows version
In-Reply-To: <38D4E936.EB941D1C@univie.ac.at>
Message-ID: <Pine.GSO.4.05.10003260906000.2875-100000@auk.stats>

On Sun, 19 Mar 2000, Erich Neuwirth wrote:

> for all of you using the windows version:
> i think having a look at the r-winedt
> interface by volker ligges is a good idea.
> it works quite nicely.

Is WinEdt not shareware?  That dampens my enthusiasm for using it with
an Open Source project.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Sun Mar 26 09:28:45 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Sun, 26 Mar 2000 10:28:45 +0200
Subject: [Rd] windows version
References: <Pine.GSO.4.05.10003260906000.2875-100000@auk.stats>
Message-ID: <38DDCA3D.DAF93DD8@univie.ac.at>

yes, you are right.
winedt is shareware.


Prof Brian D Ripley wrote:
> 
> On Sun, 19 Mar 2000, Erich Neuwirth wrote:
> 
> > for all of you using the windows version:
> > i think having a look at the r-winedt
> > interface by volker ligges is a good idea.
> > it works quite nicely.
> 
> Is WinEdt not shareware?  That dampens my enthusiasm for using it with
> an Open Source project.
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Mar 26 09:38:17 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 26 Mar 2000 09:38:17 +0100 (BST)
Subject: [Rd] Use of Rd2txt on .Rd files from rw-1.0.0 (PR#498)
In-Reply-To: <200003212215.XAA03296@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10003260936270.2875-100000@auk.stats>

How did you get the files from Windows to Solaris?  I suspect you have
CRLF line endings (which emacs tolerates).  Try converting to LF
(e.g. by MULE on emacs setting the coding).  It is a bit much to expext
Unix systems to accept Windows files.


On Tue, 21 Mar 2000 john.maindonald@anu.edu.au wrote:

> >From e980153 Tue Mar 21 18:50:55 2000
> To: bates@stat.wisc.edu
> Subject: Use of Rd2txt on .Rd files from rw-1.0.0
> 
> Files generated using prompt.data.frame() under rw-1.0.0 get
> scrambled (mildly) when I process them under Rd2txt on Solaris,
> (using R-devel 1.1.0).
> Files generated under R-devel 1.1 on Solaris are processed ok.
> 
> The .Rd files from the two sources look identical. The problem 
> is likely to be with Rd2txt, I guess.
> 
> Here is an example.  I give only the first part of the output,
> where the problem occurs.
> =========================================================
> Kiwifruit data
> 
> Description:
> 
>  Kiwifruitkiwishade' data frame has 48 rows and 3 columns.
>      shading trial
> 
> Format:
> 
>      This data frame contains the following columns:
> 
>       yield a numeric vector
> 
>  `west'  ck a factor with levels
> 
>  `Feb2May'  a factor with levels
>             `none' 
> 
> Details:
> 
> ............
> =========================================================
> 
> Here is what I expected to get, and do get when the .Rd file
> is generated under Solaris:
> 
> =========================================================
> Kiwifruit data
> 
> Description:
> 
>      The `kiwishade' data frame has 48 rows and 3 columns. Kiwifruit
>      shading trial
> 
> Format:
> 
>      This data frame contains the following columns:
> 
>       yield a numeric vector
> 
>       block a factor with levels `east'  `north'  `west' 
> 
>       shade a factor with levels `Aug2Dec'  `Dec2Feb'  `Feb2May' 
>             `none'
> ............
> =========================================================
> 
> Here is the .Rd file, from the PC, then editing using emacs
> under Solaris.  However the same scrambling occurs when the
> files is processed without editing.
> =========================================================
> \name{kiwishade}
> \alias{kiwishade}
> \non_function{}
> \title{Kiwifruit data}
> \description{
> The \code{kiwishade} data frame has 48 rows and 3 columns.
> Kiwifruit shading trial
> }
> \format{
> This data frame contains the following columns:
> \describe{
> \item{yield}{
> a numeric vector
> }
> \item{block}{
> a factor with levels
> \code{east} 
> \code{north} 
> \code{west} 
> }
> \item{shade}{
> a factor with levels
> \code{Aug2Dec} 
> \code{Dec2Feb} 
> \code{Feb2May} 
> \code{none} 
> }
> }
> }
> \details{
> 
> }
> \source{
> Snelgar at al.
> }
> \examples{
> data(kiwishade)
> }
> \keyword{datasets}
> =========================================================
> 
> John Maindonald               email : john.maindonald@anu.edu.au        
> Statistical Consulting Unit,  phone : (6249)3998        
> c/o CMA, SMS,                 fax   : (6249)5549  
> John Dedman Mathematical Sciences Building
> Australian National University
> Canberra ACT 0200
> Australia
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sun Mar 26 11:24:58 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Sun, 26 Mar 2000 12:24:58 +0200
Subject: [Rd] windows version
References: <Pine.GSO.4.05.10003260906000.2875-100000@auk.stats>
Message-ID: <38DDE57A.6FECED98@statistik.uni-dortmund.de>

> Is WinEdt not shareware?  That dampens my enthusiasm for using it with
> an Open Source project.

You are right.
I thought it would be nice for some Windows users, which are using
WinEdt already as a TeX-Editor and don't like emacs very well.

Best regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Sun Mar 26 21:49:24 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Sun, 26 Mar 2000 22:49:24 +0200 (MET DST)
Subject: [Rd] matlines, matpoints don't follow prototype (PR#506)
Message-ID: <200003262049.WAA11567@pubhealth.ku.dk>

The Blue Book allows the 'type' argument to be used in matpoints and
matlines.

	matlines(x, y, type="l", lty=1:5, pch=, col=1:4)

R-1.0.0 does not.

Thus, type="h", "b", must be invoked thru matplot( x, y, type = "h",
add=TRUE)

For the sake of consistency with S, it would be nice to have matlines
defined as:

"matlines" <-
  function(x, y, type = 'l', lty=1:5, lwd = 1, pch=NULL, col=1:6, ...)
  matplot(x=x, y=y, type=type, lty=lty, lwd=lwd, pch=pch, col=col,
          add=TRUE, ...)


and similarly for matpoints.

Chuck Berry
-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive
Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Mar 27 19:18:54 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 27 Mar 2000 12:18:54 -0600
Subject: [Rd] R port of acepack
Message-ID: <6rog80p981.fsf@franz.stat.wisc.edu>

To whom should bug reports of the R port of acepack be directed?

On a SPARC/Solaris 2.6 or 2.7 (SunOS 5.6 or 5.7) system running
R-1.0.0 the avas example fails
 > library(acepack)
 > example(avas)

 avas> TWOPI <- 8 * atan(1)

 avas> x <- runif(200, 0, TWOPI)

 avas> y <- exp(sin(x) + rnorm(200)/2)

 avas> a <- avas(x, y)

 Process R bus error (core dumped) at Mon Mar 27 11:59:54 2000

The bus error occurs inside the Fortran subroutine smth, which is
called by the subroutine rlsmo, which is called by the subroutine
avas.  The compilers would have been gcc 2.95.2 and g77 GNU Fortran
0.5.25 19991024 (release).

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Mar 27 19:33:27 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 27 Mar 2000 10:33:27 -0800 (PST)
Subject: [Rd] R port of acepack
In-Reply-To: <6rog80p981.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.GSO.4.21.0003271031110.15596-100000@mail.biostat.washington.edu>

On 27 Mar 2000, Douglas Bates wrote:

> To whom should bug reports of the R port of acepack be directed?

To me.   I'll see what I can do. I get a probably related error on Solaris
(probably with these compilers, but I didn't do the compilation).

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

> 
> On a SPARC/Solaris 2.6 or 2.7 (SunOS 5.6 or 5.7) system running
> R-1.0.0 the avas example fails
>  > library(acepack)
>  > example(avas)
> 
>  avas> TWOPI <- 8 * atan(1)
> 
>  avas> x <- runif(200, 0, TWOPI)
> 
>  avas> y <- exp(sin(x) + rnorm(200)/2)
> 
>  avas> a <- avas(x, y)
> 
>  Process R bus error (core dumped) at Mon Mar 27 11:59:54 2000
> 
> The bus error occurs inside the Fortran subroutine smth, which is
> called by the subroutine rlsmo, which is called by the subroutine
> avas.  The compilers would have been gcc 2.95.2 and g77 GNU Fortran
> 0.5.25 19991024 (release).
> 
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status = 
>  major = 1
>  minor = 0.0
>  year = 2000
>  month = February
>  day = 29
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Tue Mar 28 19:24:09 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 28 Mar 2000 13:24:09 -0500
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: Kurt Hornik's message of "Mon, 27 Mar 2000 08:57:27 +0200"
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu> <871z561pcm.fsf@bavaria.ece.cmu.edu> <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at> <8766uens46.fsf@bavaria.ece.cmu.edu> <14554.25111.847983.270127@aragorn.ci.tuwien.a
Message-ID: <87r9cvgdh2.fsf@bavaria.ece.cmu.edu>


Kurt,

thanks for your help.  Your suggestion to use "LDCMD=cc SHLIBLD=cc"
for configure worked, I've got a working R again :-)

Other roadblocks I've encountered (and the reason I cc: r-devel):

-- ld/cc doesn't automatically include /usr/local/lib while gcc does.
This comes from the sytem installation here and has nothing to do with
R.  But having to add LIBS=-L/usr/local/lib may come as a surprise to
people who don't do this regularly.  Does configure check for the
existence of e.g. libz.a with cc or gcc?

-- the installation fails when I try to build in a special
subdirectory.  install-sh can't be found.  I've edited the Makefile to
use "build/tools/../$(INSTALL_DATA)".  (I guess build/$(INSTALL_DATA)
would be enough.)  I believe this worked on a sun.  Is this a
consequence of overriding install-sh on AIX in configure?

-- demo.so is not installed and demo(dyn.load) fails.  This is a
trivial matter if detected before 'rm -rf build' ...

-- there used to be a memory glitch when exiting R on AIX (and I think
Alpha).  This was fixed, but I now get this weird xmalloc statement
before startup:

$ echo "x <- 1; q()" | R BATCH
$ cat .R.Rout 

R : Copyright 2000, The R Development Core Team
Version 1.1.0 Under development (unstable) (March 27, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

[Previously saved workspace restored]

xmalloc: out of virtual memory
R> invisible(options(echo = TRUE))
R> x <- 1; q()


Thanks again for getting R running on AIX again,
  -tom



-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Mar 28 19:43:37 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 28 Mar 2000 13:43:37 -0500
Subject: [Rd] scale
Message-ID: <38E0FD59.CC4D2D16@bank-banque-canada.ca>

I am cleaning up a few pieces of my DSE library and I realized I am still
overriding scale to make it generic with the base version as the default. I use
scale methods for data objects which are not simple matrices. Could scale in the
base be made generic?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 28 20:06:15 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Mar 2000 21:06:15 +0200
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: Thomas J Vogels's message of "28 Mar 2000 13:24:09 -0500"
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu> <871z561pcm.fsf@bavaria.ece.cmu.edu> <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at> <8766uens46.fsf@bavaria.ece.cmu.edu> <14554.25111.847983.270127@aragorn.ci.tuwien.a
Message-ID: <x2og7ysymw.fsf@blueberry.kubism.ku.dk>

Thomas J Vogels <tov@ece.cmu.edu> writes:

> Alpha).  This was fixed, but I now get this weird xmalloc statement
> before startup:
> 
> $ echo "x <- 1; q()" | R BATCH
> $ cat .R.Rout 
> 
> R : Copyright 2000, The R Development Core Team
> Version 1.1.0 Under development (unstable) (March 27, 2000)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type    "?license" or "?licence" for distribution details.
> 
> R is a collaborative project with many contributors.
> Type    "?contributors" for a list.
> 
> Type    "demo()" for some demos, "help()" for on-line help, or
>         "help.start()" for a HTML browser interface to help.
> Type    "q()" to quit R.
> 
> [Previously saved workspace restored]
> 
> xmalloc: out of virtual memory
> R> invisible(options(echo = TRUE))
> R> x <- 1; q()

Hmm. What's in that previously saved workspace?  Can you zoom in a
little closer on where that error comes from?

(And note that the save bug is not actually fixed in R-devel yet -
will happen as soon as I merge in from the "release" branch)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Mar 29 07:30:54 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 29 Mar 2000 08:30:54 +0200 (MEST)
Subject: [Rd] scale
In-Reply-To: <38E0FD59.CC4D2D16@bank-banque-canada.ca>
References: <38E0FD59.CC4D2D16@bank-banque-canada.ca>
Message-ID: <14561.41758.916698.438279@lynne.ethz.ch>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> I am cleaning up a few pieces of my DSE library and I realized I
    PaulG> am still overriding scale to make it generic with the base
    PaulG> version as the default. I use scale methods for data objects
    PaulG> which are not simple matrices. Could scale in the base be made
    PaulG> generic?
it could..

      scale (x, center = TRUE, scale = TRUE)  

Is it okay to require the center and scale argument for all methods?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gs@statlab.uni-heidelberg.de  Wed Mar 29 13:27:58 2000
From: gs@statlab.uni-heidelberg.de (G. Sawitzki)
Date: Wed, 29 Mar 2000 14:27:58 +0200
Subject: [Rd] Porting R
Message-ID: <v03110700b507a5de3db8@[129.206.113.239]>

I am trying to get R 1.0 running on the Mac.

The main target is MacX. Anyone else working on that?

For the recent Macintosh system, I am trying to compile R using MachTen.
The R core compiles and runs without any changes, using the Unix make files.

The libraries give some problems, presumably due to handling of shared
libraries. It seems I am missing something to link. Before I spend my time
hunting it down, maybe someone has an immediate idea.
  gs.

 ==
my output:

make[4]: Entering directory `//local.src/R-1.0.0/src/library/ctest/src'
gcc -shared -Xlsharedlibrary -Xlexpall  -o ctest.so alnorm.o ansari.o
fexact.o kendall.o
 ks.o prho.o swilk.o  -L/usr/lib/gcc-lib/powerpc-apple-machten4/2.8.1 -lg2c -lm
ansari.o: In function `errmsg':
ansari.c:13: undefined reference to `Rf_error'
ansari.o: In function `w_init':
ansari.c:21: undefined reference to `R_chk_calloc'
...
ansari.c:84: undefined reference to `Rf_choose'
ansari.o: In function `pansari':
ansari.c:110: undefined reference to `Rf_choose'
fexact.o: In function `fexact':
...
kendall.c:24: undefined reference to `Rf_sign'
kendall.o: In function `ckendall':
kendall.c:99: undefined reference to `Rf_gammafn'
swilk.o: In function `swilk':
swilk.c:92: undefined reference to `Rf_qnorm5'
swilk.c:166: undefined reference to `Rf_sign'
...


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 29 14:20:30 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 2000 15:20:30 +0200
Subject: [Rd] Porting R
In-Reply-To: "G. Sawitzki"'s message of "Wed, 29 Mar 2000 14:27:58 +0200"
References: <v03110700b507a5de3db8@[129.206.113.239]>
Message-ID: <x2n1nhq5ep.fsf@blueberry.kubism.ku.dk>

"G. Sawitzki" <gs@statlab.uni-heidelberg.de> writes:

> I am trying to get R 1.0 running on the Mac.
.......
> The libraries give some problems, presumably due to handling of shared
> libraries. It seems I am missing something to link. Before I spend my time
> hunting it down, maybe someone has an immediate idea.
......
> make[4]: Entering directory `//local.src/R-1.0.0/src/library/ctest/src'
> gcc -shared -Xlsharedlibrary -Xlexpall  -o ctest.so alnorm.o ansari.o
> fexact.o kendall.o
>  ks.o prho.o swilk.o  -L/usr/lib/gcc-lib/powerpc-apple-machten4/2.8.1 -lg2c -lm
> ansari.o: In function `errmsg':
> ansari.c:13: undefined reference to `Rf_error'
> ansari.o: In function `w_init':
> ansari.c:21: undefined reference to `R_chk_calloc'

Hi Gunther,

I don't know whether it helps, but those unresolved references are
supposed to be there (they point to items in the main R binary) and be
resolved at dyn.load time. That is usually allowed when using the
-shared switch to gcc, although some systems (notably AIX and Win32)
require you use an explicit import library generated from the R
binary.

	-p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mc7414@mclink.it  Wed Mar 29 14:51:28 2000
From: mc7414@mclink.it (Stefano Iacus)
Date: Wed, 29 Mar 2000 15:51:28 +0200
Subject: [Rd] Porting R
In-Reply-To: <v03110700b507a5de3db8@[129.206.113.239]>
Message-ID: <200003291351.PAA06901@mail1.mclink.it>

Dear Sawiztki,

I'm also working on the porting of R 1.0 to MacOS. I'm in contact Ross
Ihaka and he thinks (and I agree) that we should use a cross platform
interface like  wxWindows (http://wxwindows.org). 

Let us know what you think about it.

Stefano

>I am trying to get R 1.0 running on the Mac.
>
>The main target is MacX. Anyone else working on that?
>
>For the recent Macintosh system, I am trying to compile R using MachTen.
>The R core compiles and runs without any changes, using the Unix make files.
>
>The libraries give some problems, presumably due to handling of shared
>libraries. It seems I am missing something to link. Before I spend my time
>hunting it down, maybe someone has an immediate idea.
>  gs.
>
> ==
>my output:
>
>make[4]: Entering directory `//local.src/R-1.0.0/src/library/ctest/src'
>gcc -shared -Xlsharedlibrary -Xlexpall  -o ctest.so alnorm.o ansari.o
>fexact.o kendall.o
> ks.o prho.o swilk.o  -L/usr/lib/gcc-lib/powerpc-apple-machten4/2.8.1
-lg2c -lm
>ansari.o: In function `errmsg':
>ansari.c:13: undefined reference to `Rf_error'
>ansari.o: In function `w_init':
>ansari.c:21: undefined reference to `R_chk_calloc'
>...
>ansari.c:84: undefined reference to `Rf_choose'
>ansari.o: In function `pansari':
>ansari.c:110: undefined reference to `Rf_choose'
>fexact.o: In function `fexact':
>...
>kendall.c:24: undefined reference to `Rf_sign'
>kendall.o: In function `ckendall':
>kendall.c:99: undefined reference to `Rf_gammafn'
>swilk.o: In function `swilk':
>swilk.c:92: undefined reference to `Rf_qnorm5'
>swilk.c:166: undefined reference to `Rf_sign'
>...
>
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gs@statlab.uni-heidelberg.de  Wed Mar 29 15:09:58 2000
From: gs@statlab.uni-heidelberg.de (G. Sawitzki)
Date: Wed, 29 Mar 2000 16:09:58 +0200
Subject: [Rd] Porting R
In-Reply-To: <x2n1nhq5ep.fsf@blueberry.kubism.ku.dk>
References: "G. Sawitzki"'s message of "Wed, 29 Mar 2000 14:27:58 +0200"
 <v03110700b507a5de3db8@[129.206.113.239]>
Message-ID: <v03110701b507bed61c1a@[129.206.113.239]>


>Hi Gunther,
>
>I don't know whether it helps, but those unresolved references are
>supposed to be there (they point to items in the main R binary) and be
>resolved at dyn.load time. That is usually allowed when using the
>-shared switch to gcc, although some systems (notably AIX and Win32)
>require you use an explicit import library generated from the R
>binary.
>
>	-p

.. so there may be already a prepared rule and config flag somewhere to
create this library? Which flag/option do I need?

 g.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar 29 15:31:06 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 29 Mar 2000 09:31:06 -0500
Subject: [Rd] scale
References: <38E0FD59.CC4D2D16@bank-banque-canada.ca> <14561.41758.916698.438279@lynne.ethz.ch>
Message-ID: <38E213AA.71514DDE@bank-banque-canada.ca>

Martin> Is it okay to require the center and scale argument for all
methods?

Unfortunately, no, not the way I have used it. (One of the ways I use it
is for a structure called TSdata that has two data matrices. I
eventually call the default with a center and scale for each matrix, but
the original call is scale(x, scale), where scale is a list with a
center and scale value for each matrix.) My methods always use the
argument scale, but not center.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 29 15:49:36 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 2000 16:49:36 +0200
Subject: [Rd] Porting R
In-Reply-To: "G. Sawitzki"'s message of "Wed, 29 Mar 2000 16:09:58 +0200"
References: <v03110700b507a5de3db8@[129.206.113.239]> <v03110701b507bed61c1a@[129.206.113.239]>
Message-ID: <x2k8ilq1a7.fsf@blueberry.kubism.ku.dk>

"G. Sawitzki" <gs@statlab.uni-heidelberg.de> writes:

> >Hi Gunther,
> >
> >I don't know whether it helps, but those unresolved references are
> >supposed to be there (they point to items in the main R binary) and be
> >resolved at dyn.load time. That is usually allowed when using the
> >-shared switch to gcc, although some systems (notably AIX and Win32)
> >require you use an explicit import library generated from the R
> >binary.
> >
> >	-p
> 
> .. so there may be already a prepared rule and config flag somewhere to
> create this library? Which flag/option do I need?

Yes, that is the question, but you need to either find someone who
knows machTen, or go through the man pages. Hmm, the following post
from comp.unix.machten doesn't bode too well (Mac-style dynload is
also discussed in
http://www.stat.umn.edu/~luke/xls/projects/dlbasics/dlbasics.html )

-----
 > in article 3852EB96.7A957BAA@uswest.net, Rob & Nancy Wade at rnwade@uswest.net
 wrote on 12/11/99 6:26 PM:
  
 > Anyone had any luck getting Tk installed on Machten?  I'm working with
 > Perl 5.005 and I can't compile with dynamic loading.
  
 Dynamic loading (in the usual Unix sense) doesn't work under MachTen.
 The closest to this is to use the shared libraries Mac-side; see pp.
 219-220 in the manual.
  

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Wed Mar 29 16:44:59 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 29 Mar 2000 10:44:59 -0500
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: Peter Dalgaard BSA's message of "28 Mar 2000 21:06:15 +0200"
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu> <871z561pcm.fsf@bavaria.ece.cmu.edu> <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at> <8766uens46.fsf@bavaria.ece.cmu.edu> <14554.25111.847983.270127@aragorn.ci.tuwien.a
Message-ID: <87r9ctzsp0.fsf@bavaria.ece.cmu.edu>


Peter,

ah, stupid me.  I've put the braces "back" into system.c to guard
write_history(), et voila, it works.  I was simply confused by the
error message showing up before the R prompt instead of the very
end...
Regards,
  -tom


Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Thomas J Vogels <tov@ece.cmu.edu> writes:
[snip]
> > xmalloc: out of virtual memory
> > R> invisible(options(echo = TRUE))
> > R> x <- 1; q()
> 
> Hmm. What's in that previously saved workspace?  Can you zoom in a
> little closer on where that error comes from?
> 
> (And note that the save bug is not actually fixed in R-devel yet -
> will happen as soon as I merge in from the "release" branch)

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gs@statlab.uni-heidelberg.de  Wed Mar 29 16:51:30 2000
From: gs@statlab.uni-heidelberg.de (G. Sawitzki)
Date: Wed, 29 Mar 2000 17:51:30 +0200
Subject: [Rd] Porting R
In-Reply-To: <x2k8ilq1a7.fsf@blueberry.kubism.ku.dk>
References: "G. Sawitzki"'s message of "Wed, 29 Mar 2000 16:09:58 +0200"
 <v03110700b507a5de3db8@[129.206.113.239]>
 <v03110701b507bed61c1a@[129.206.113.239]>
Message-ID: <v03110702b507d6429d3e@[129.206.113.239]>

At 16:49 +0200 29.03.2000, Peter Dalgaard BSA wrote:
#
>Yes, that is the question, but you need to either find someone who
>knows machTen, or go through the man pages.
Oh. I think I did both.

Hmm, the following post
>from comp.unix.machten doesn't bode too well (Mac-style dynload is
>also discussed in
>http://www.stat.umn.edu/~luke/xls/projects/dlbasics/dlbasics.html )
The relevant lines seem to be:
The Mac does not seem to allow a shared library to have unresolved symbols,
but you can handle references into an executable by linking the library
against the
executable. You also need to take some action to export external symbols;
fortunately this is easy. I have not yet explored what happens when files
are moved
around, search pat issues, and the like ****.

As a work around, I included the standard dynamic library in the core.
Seems to work.

Anyway there should not go too much effort into this. For now, MachTen is
only an intermediate step to go to MachX, which is the really interesting
thing.
 g.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Mar 29 17:13:45 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 29 Mar 2000 10:13:45 -0600
Subject: [Rd] A "stack" function
Message-ID: <6rwvmlrbye.fsf@franz.stat.wisc.edu>

I am using R in my undergraduate engineering statistics courses, in
which I am currently discussing one-way analysis of variance.  Many of
the data sets for the exercises or examples give the data in the form
on one column per treatment level.  To use the aov or lm functions
such data should be converted to one column with all the response
observations and a companion column with indicators of the treatment
level.

In Minitab this operation is called "stacking" columns and the command
to perform the operation is "stack".  I have written a similar function
for R.  Before taking the time to make it elegant and to document it,
I thought I would check if I have overlooked an existing way of doing
this.

Here is an example

> library(Devore5)
> data(ex10.09)
> boxplot(ex10.09)
> str(ex10.09)             # show the structure
`data.frame':	6 obs. of  4 variables:
 $ Wheat : num  5.2 4.5 6 6.1 6.7 5.8
 $ Barley: num  6.5 8 6.1 7.5 5.9 5.6
 $ Maize : num  5.8 4.7 6.4 4.9 6 5.2
 $ Oats  : num  8.3 6.1 7.8 7 5.5 7.2
> stack <- function(data)
+  data.frame(values = unlist(data),
+             lev = factor(rep(names(data), lapply(data, length))))

> stack(ex10.09)   # try it on the example
        values    lev
Wheat1     5.2  Wheat
Wheat2     4.5  Wheat
Wheat3     6.0  Wheat
Wheat4     6.1  Wheat
Wheat5     6.7  Wheat
Wheat6     5.8  Wheat
Barley1    6.5 Barley
Barley2    8.0 Barley
Barley3    6.1 Barley
Barley4    7.5 Barley
Barley5    5.9 Barley
Barley6    5.6 Barley
Maize1     5.8  Maize
Maize2     4.7  Maize
Maize3     6.4  Maize
Maize4     4.9  Maize
Maize5     6.0  Maize
Maize6     5.2  Maize
Oats1      8.3   Oats
Oats2      6.1   Oats
Oats3      7.8   Oats
Oats4      7.0   Oats
Oats5      5.5   Oats
Oats6      7.2   Oats
> fm1 <- lm(values ~ lev, stack(ex10.09))
> anova(fm1)
Analysis of Variance Table

Response: values
          Df  Sum Sq Mean Sq F value  Pr(>F)  
lev        3  8.9833  2.9944  3.9565 0.02293 *
Residuals 20 15.1367  0.7568                  
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 


-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed Mar 29 17:16:37 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 29 Mar 2000 08:16:37 -0800 (PST)
Subject: [Rd] A "stack" function
In-Reply-To: <6rwvmlrbye.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.GSO.4.21.0003290814400.3570-100000@mail.biostat.washington.edu>

On 29 Mar 2000, Douglas Bates wrote:

> I am using R in my undergraduate engineering statistics courses, in
> which I am currently discussing one-way analysis of variance.  Many of
> the data sets for the exercises or examples give the data in the form
> on one column per treatment level.  To use the aov or lm functions
> such data should be converted to one column with all the response
> observations and a companion column with indicators of the treatment
> level.
> 
> In Minitab this operation is called "stacking" columns and the command
> to perform the operation is "stack".  I have written a similar function
> for R.  Before taking the time to make it elegant and to document it,
> I thought I would check if I have overlooked an existing way of doing
> this.
> 

It would be really nice if you could also do the reverse: take repeated
measurements in 'long' form and convert them into 'wide' form.
  In Stata both of these are available in the -reshape- command.  I don't
know any really simple way of doing it in R.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 29 17:42:05 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 2000 18:42:05 +0200
Subject: [Rd] A "stack" function
In-Reply-To: Thomas Lumley's message of "Wed, 29 Mar 2000 08:16:37 -0800 (PST)"
References: <Pine.GSO.4.21.0003290814400.3570-100000@mail.biostat.washington.edu>
Message-ID: <x28zz1pw2q.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> On 29 Mar 2000, Douglas Bates wrote:
> 
...
> > In Minitab this operation is called "stacking" columns and the command
> > to perform the operation is "stack".  I have written a similar function
> > for R.  Before taking the time to make it elegant and to document it,
> > I thought I would check if I have overlooked an existing way of doing
> > this.
> > 
> 
> It would be really nice if you could also do the reverse: take repeated
> measurements in 'long' form and convert them into 'wide' form.
>   In Stata both of these are available in the -reshape- command.  I don't
> know any really simple way of doing it in R.

Not really simple, but wouldn't something like
as.data.frame(tapply(x,f,as.vector)) do it? Hmmm... This seems to work;

> tt<-data.frame(c(tapply(ss$values,ss$lev,as.vector)))
> tt
  Barley Maize Oats Wheat
1    6.5   5.8  8.3   5.2
2    8.0   4.7  6.1   4.5
3    6.1   6.4  7.8   6.0
4    7.5   4.9  7.0   6.1
5    5.9   6.0  5.5   6.7
6    5.6   5.2  7.2   5.8

Re. stack(), wouldn't you want to stack over only a subset of columns,
while replicating all the remaining columns? There's some code in
subset() which might be used for selecting the columns.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Mar 29 17:37:29 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Wed, 29 Mar 2000 18:37:29 +0200
Subject: [Rd] pre summary: mapping of colornames into hsv?
In-Reply-To: <14560.48243.200487.325190@lynne.ethz.ch>
Message-ID: <000801bf999d$13c36170$a9021aac@joelschlaegel>



Hi Martin,
Great that you follow this. My original intention was to be able to
translate colornames to hsv because this would allow using colornames to cut
out a certain part of the colorwheel for colorcoding (HSV component H, see
my code below)

I think internally we might have colors represented as

Colornames, ColorIntegers, ColorHexcodes, ColorRGBs, ColorHSVs (ColorCMYs?)

however the R-user probably shouldn't see the internal ColorIntegers of the
C-code, as this might lead to confusion with the colornumbers resulting from
the palette settings.

So the R-user should see functions translating

ColorName2ColorHexcode() ColorHexcode2ColorRGB() and ColorRGB2ColorHSV()
and backwards
ColorHSV2ColorRGB() ColorRGB2ColorHexcode(), rather not
ColorHexcode2Colorname() as not every possible color is granted to have a
name.

Regards


Jens


P.S. the folowing function colorcode() I think is more general than
rainbow() in three aspects:
1) works also with not-equidistant colorcodings
2) works around the 'borders' of the colorwheel
3) works both directions along the colorwheel
With the above mentioned translation functions one could specify start= and
end= as colornames, which would make code more readable. Feel free to
include into R.

# 0 = red
# 1/6 = yellow
# 2/6 = green
# 3/6 = cyan
# 4/6 = blue
# 5/6 = violet
# go from red via yellow to green: start=0, stop=2/6
# go from green via yellow to red: start=2/6, stop=0
# go from green via cyan-blue-violet to red: start=2/6, stop=1
# go from red via violet-blue-cyan to green: start=0, stop=-4/6
colorcode <- function (p, start=0, end=2/6, s=1, v=1, ...)
{
   # make p 0..1
   r <- range(p)
   p <- (p - r[1])/diff(r)
   # wrap hue
   up <- start <= end
   start <- start %% 1
   end <- end %% 1
   if (up)
     if (start < end){
       h <- (start + p*(end-start)) %% 1
     }else{
       h <- (start + p*(1+end-start)) %% 1
     }
   else
     if (end < start){
       h <- (start - p*(start-end)) %% 1
     }else{
       h <- (start - p*(1+start-end)) %% 1
     }
   # round against bug if start=1 end=4/3 with p=seq(0, 1, 0.05)
   hsv( round(h, 5), s, v, ...)
}






> -----Original Message-----
> From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> Sent: Tuesday, March 28, 2000 4:07 PM
> To: jens.oehlschlaegel-akiyoshi@mdfactory.de
> Cc: R-core@stat.math.ethz.ch
> Subject: Re: [Rd] pre summary: mapping of colornames into hsv?
>
>
> >>>>> <jens.oehlschlaegel-akiyoshi@mdfactory.de> writes on
> Feb.28, 2000 :
>
>     Jens> etc/colors.big doesn't do the job currently, as:
>
>     Jens> colors.big maps 455 names to rgb in S syntax
>     Jens> rgb.txt maps 657 names to rgb in C syntax, but
> unlike colors() it has
>     Jens> mixed upper and lower case
>
>     Jens> The C source has the information twice
>     Jens> rgb.c maps 657 names to rgb (mixed upper and lower case)
>     Jens> graphics.c maps 657 names tp colorstrings (lower case only)
>
>     Jens> internal name2col() and R colors() accesses those
> in graphics.c
>
>     Jens> I tend to create a R representation which copies
> the info from
>     Jens> graphics.c, unless someone plans to export internal
> name2col() to
>     Jens> become an official R function, which of course
> would be a less
>     Jens> redundant solution.
>
> and a day later, Jens provided
>
>   .ColorDataBase <-  matrix(c(
>       "white",		"#FFFFFF",
>       "aliceblue",	"#F0F8FF",
>       "antiquewhite",	"#FAEBD7",
>       "antiquewhite1",	"#FFEFDB",
>       "antiquewhite2",	"#EEDFCC",
>       "antiquewhite3",	"#CDC0B0",
>       .............
>   ))
>
> Now, we should stand back for a moment and
> think about what functionality we should provide on the R level.
>
> I think we should use the internal accessor functions to ColorDataBase
> (in graphics.c) in order ensure consistency not to further
> duplicate the
> information.
>
> {{Guido: Jens is right that src/gnuwin32/graphapp/rgb.c
> 	 kind of replicates the table already available in
> src/main/graphics.c
>   should we separate out this definition from graphics.c
>   into a global src/main/rgb.c or something else
>   after which (most of) graphapp/rgb.c wouldn't be needed anymore ?
>   -- or just declare the tables in Graphics.h and use them in
> graphapp as well?
> }}
>
>
> Potential useful functions {from graphics.c} to be made
> available on the R
> level are
>
> hsv2rgb()   (h,s,v) |-> (r,g,b)
>
> rgb2hsv() does *NOT* exist in graphics.c ;
> 	  is it possible at all (i.e. is hsv <--> rgb 1:1 ?)}
>
> rgb2col(rgb_ch) |-> uint { := unsigned int }
> name2col  (ch)  |-> uint
> number2col(ch)  |-> uint
> str2col   (ch)  |-> uint {calling one of the above 3 functions !}
>
> RGB2rgb(r,g,b)  |-> #RRGGBB string
> col2name(uint)  |-> name from colors() or #RRGGBB string
>
> -------
> I would tend to provide only
>
> * str2col()  returning an R integer() {instead of uint;  the
> R color model
> 				      only needs the low order 24 bits,
> 				      see beginning of Graphics.h }
> * col2name()
>
> at first, but one might also want
>
>     uint <-->  (r,g,b) <-->  (h,s,v)
>
> o Further ideas ?
> o Are 24bit colors okay?
>   gnuwin32's graphapp seems to use "transparency"
>   additionally to 3x8 bit RGB {didn't look closely}
>
>
> Martin
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar 29 19:26:27 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 29 Mar 2000 13:26:27 -0500
Subject: [Rd] R CMD build
Message-ID: <38E24AD3.3B592196@bank-banque-canada.ca>

I've been trying "R CMD build" to build my packages because of the
various nice checks it does. Here are some questions/comments/problems.

1/ I get a WARNING about RD files without alias for (what seems like)
all my Rd files. I'm not sure if this is related to the fact that all my
functions are in one .R file.

2/ I get a warning about undocumented objects for all the specific
methods of generic functions. In many cases only the generic is
documented, so the warning is correct, but there are so many of them
that it tends to obscure more important warnings.

3/ It doesn't work with bundles.

4/ Checking for undocumented objects fails with an ERROR when checking
an (undocumented) assignment object ( "input.series.names<-" ).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 29 19:47:37 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 29 Mar 2000 19:47:37 +0100 (BST)
Subject: [Rd] R CMD build
In-Reply-To: <38E24AD3.3B592196@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10003291935170.23270-100000@auk.stats>

On Wed, 29 Mar 2000, Paul Gilbert wrote:

> I've been trying "R CMD build" to build my packages because of the
> various nice checks it does. Here are some questions/comments/problems.
> 
> 1/ I get a WARNING about RD files without alias for (what seems like)
> all my Rd files. I'm not sure if this is related to the fact that all my
> functions are in one .R file.

Well, are there \alias entries in the Rd files?  (The layout of the .R file
is immaterial: in the installed code all R functions are always in one
file.) `build' expects a \alias as well as a \name.

If the \alias are there, we may be hitting again problems with the 
different dialects of egrep and sed.  AFAIK the current version
behaves itself on Solaris 2.6/7 and on POSIX platforms.

> 2/ I get a warning about undocumented objects for all the specific
> methods of generic functions. In many cases only the generic is
> documented, so the warning is correct, but there are so many of them
> that it tends to obscure more important warnings.

The convention is to put a \alias for the method in the help file for the
generic.  R-core are divided on this point!  At least now the indices
(e.g. in HTML help and the LaTeX manual) will try to omit the methods.

> 3/ It doesn't work with bundles.

True, but it will check every package in a bundle.  The only bundle
I know of is VR, and that is built by a highly specific script.  If
(as your comment suggests) there is a need to build other bundles, we
can look into extending `build'.

> 4/ Checking for undocumented objects fails with an ERROR when checking
> an (undocumented) assignment object ( "input.series.names<-" ).

I think it works if you document it, though, and the error is correct,
surely?  Do you mean it gives ERROR and then stops rather than warns?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar 29 21:07:21 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 29 Mar 2000 15:07:21 -0500
Subject: [Rd] R CMD build
References: <Pine.GSO.4.05.10003291935170.23270-100000@auk.stats>
Message-ID: <38E26279.BC2A6400@bank-banque-canada.ca>

>Well, are there \alias entries in the Rd files?
No. I guess that would be it. Should I have an empty \alias entry if the
object does not have an alias, or should should I just live with the
warnings?

>The convention is to put a \alias for the method in the help file for
the generic.
Ok, but I guess this won't work if the generic is the base and my method
is in my library?

>If (as your comment suggests) there is a need to build other bundles,
we
>can look into extending `build'.
No, I don't think it is a priority. I was just point it out in case it
was suppose to work with bundles and I was hitting a bug. I'll run it to
test the packages in the bundle and roll up the bundle after.

>> 4/ Checking for undocumented objects fails with an ERROR when
checking
>> an (undocumented) assignment object ( "input.series.names<-" ).
>I think it works if you document it, though, and the error is correct,
>surely?  Do you mean it gives ERROR and then stops rather than warns?

Yes, it should warn me about this, but it gives ERROR and stops. (If I
run it with my makefile it returns code 1.) The message is:
in eval(expr, envir, enclos) : couldn't find function
"input.series.names<-"

Thanks,
Paul




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Wed Mar 29 21:34:04 2000
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Thu, 30 Mar 2000 08:34:04 +1200
Subject: [Rd] home in Sept
In-Reply-To: <v03110700b507a5de3db8@[129.206.113.239]>; from G. Sawitzki on Wed, Mar 29, 2000 at 02:27:58PM +0200
References: <v03110700b507a5de3db8@[129.206.113.239]>
Message-ID: <20000330083404.W26661@stat1.stat.auckland.ac.nz>

Hi Guenther,
  Are you going to be home in Sept? Can I still come and visit?
 I finally have made some decision about where I am going (and withdrew
 from the crazy thing at ETH). I'm off to Harvard some time in the fall,

  regards to you and Heidi,
    robert

-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              phone : (64-9) 3737-599 ext 3946          | 
| Senior Lecturer               fax :   (64-9) 3737-018                   |
| Department of Statistics      office : Room 206 Maths/Physics           |
| University of Auckland	email : rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@stat.auckland.ac.nz  Wed Mar 29 21:47:30 2000
From: rgentlem@stat.auckland.ac.nz (Robert Gentleman)
Date: Thu, 30 Mar 2000 08:47:30 +1200
Subject: [Rd] home in Sept
In-Reply-To: <20000330083404.W26661@stat1.stat.auckland.ac.nz>; from Robert Gentleman on Thu, Mar 30, 2000 at 08:34:04AM +1200
References: <v03110700b507a5de3db8@[129.206.113.239]> <20000330083404.W26661@stat1.stat.auckland.ac.nz>
Message-ID: <20000330084730.Y26661@stat1.stat.auckland.ac.nz>

Well, boy do I feel stupid; I was sure that I had set that to 
mail only to Guenther.
Please disregard my impertinent comments regarding ETH, I apologize
especially to Martin for making them.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
 I will not put both feet in my mouth.
 I will not trust *&%^$& mailers.
-- 
+-------------------------------------------------------------------------+
| Robert Gentleman              phone : (64-9) 3737-599 ext 3946          | 
| Senior Lecturer               fax :   (64-9) 3737-018                   |
| Department of Statistics      office : Room 206 Maths/Physics           |
| University of Auckland	email : rgentlem@stat.auckland.ac.nz      |
+-------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 29 22:41:39 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 2000 23:41:39 +0200
Subject: [Rd] home in Sept
In-Reply-To: Robert Gentleman's message of "Thu, 30 Mar 2000 08:47:30 +1200"
References: <v03110700b507a5de3db8@[129.206.113.239]> <20000330083404.W26661@stat1.stat.auckland.ac.nz> <20000330084730.Y26661@stat1.stat.auckland.ac.nz>
Message-ID: <x2bt3x314c.fsf@blueberry.kubism.ku.dk>

Robert Gentleman <rgentlem@stat.auckland.ac.nz> writes:

>  I will not put both feet in my mouth.
>  I will not trust *&%^$& mailers.

<grin> Good thing you didn't put `!!!' after that or Martin would have
had to approve it manually....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 29 22:53:16 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 2000 23:53:16 +0200
Subject: [Rd] home in Sept
In-Reply-To: Peter Dalgaard BSA's message of "29 Mar 2000 23:41:39 +0200"
References: <v03110700b507a5de3db8@[129.206.113.239]> <20000330083404.W26661@stat1.stat.auckland.ac.nz> <20000330084730.Y26661@stat1.stat.auckland.ac.nz> <x2bt3x314c.fsf@blueberry.kubism.ku.dk>
Message-ID: <x28zz130kz.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

[Well, never mind]

Aargh! Another one bites the dust... Please disregard note intended
for Rob and intended to be humourous. Failed on both counts,
obviously. Talking about putting your feet, hands, arms, and legs in
your mouth...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar 30 07:14:18 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 30 Mar 2000 07:14:18 +0100 (BST)
Subject: [Rd] R CMD build
In-Reply-To: <38E26279.BC2A6400@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10003300709540.23994-100000@auk.stats>

On Wed, 29 Mar 2000, Paul Gilbert wrote:

> >Well, are there \alias entries in the Rd files?
> No. I guess that would be it. Should I have an empty \alias entry if the
> object does not have an alias, or should should I just live with the
> warnings?

You should have an alias for each function documented there, even
if there is only one. The object name is itself an alias.  The \name field
is the help file name, not the object name (although 90+% of them are the
same), and it is the \alias's that gives the object names,

> >The convention is to put a \alias for the method in the help file for
> the generic.
> Ok, but I guess this won't work if the generic is the base and my method
> is in my library?

Sure (and that is part of the debate). Either ignore them, or have
a .Rd with just a very brief description of these (e.g. just their
usages).

> >> 4/ Checking for undocumented objects fails with an ERROR when
> checking
> >> an (undocumented) assignment object ( "input.series.names<-" ).
> >I think it works if you document it, though, and the error is correct,
> >surely?  Do you mean it gives ERROR and then stops rather than warns?
> 
> Yes, it should warn me about this, but it gives ERROR and stops. (If I
> run it with my makefile it returns code 1.) The message is:
> in eval(expr, envir, enclos) : couldn't find function
> "input.series.names<-"

Looks like a bug, then.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Mar 30 10:31:56 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 30 Mar 2000 11:31:56 +0200 (CEST)
Subject: [Rd] forwarded message from Griffith Feeney
Message-ID: <14563.7948.655308.693311@galadriel.ci.tuwien.ac.at>


--8sD16rPb6u
Content-Type: text/plain; charset=us-ascii
Content-Description: message body text
Content-Transfer-Encoding: 7bit


Griffith,

I'm forwarding the mail to r-devel.

Best,
Fritz


--8sD16rPb6u
Content-Type: message/rfc822
Content-Description: forwarded message
Content-Transfer-Encoding: 7bit

Received: from isildur.ci.tuwien.ac.at (root@isildur.ci.tuwien.ac.at [128.131.51.43])
	by fangorn.ci.tuwien.ac.at (8.9.3/8.9.3/Debian/GNU) with ESMTP id VAA22421
	for <wwwadmin@cran.r-project.org>; Wed, 29 Mar 2000 21:35:20 +0200
Received: from hawaii.rr.com (hnlmail2.hawaii.rr.com [24.25.227.35])
	by isildur.ci.tuwien.ac.at (8.9.3/8.9.3/Debian/GNU) with ESMTP id VAA14801
	for <wwwadmin@cran.r-project.org>; Wed, 29 Mar 2000 21:35:12 +0200
Received: from homebrew.hawaii.rr.com ([24.31.70.87]) by hawaii.rr.com  with Microsoft SMTPSVC(5.5.1877.447.44);
	 Wed, 29 Mar 2000 09:35:46 -1000
Message-Id: <3.0.5.32.20000329093550.007be910@pop-server.hawaii.edu>
X-Sender: gfeeney@pop-server.hawaii.edu
X-Mailer: QUALCOMM Windows Eudora Light Version 3.0.5 (32)
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
From: Griffith Feeney <gfeeney@hawaii.edu>
To: wwwadmin@isildur.ci.tuwien.ac.at
Subject: problem posting to r-help list
Date: Wed, 29 Mar 2000 09:35:50 -1000

I've tried twice to post the following message to the R-help list, but it
doesn't seem to get through. I pick up my mail at pop-server.hawaii.edu
(University of Hawaii) but work at home with cable internet connection so
send mail via smtp-server.hawaii.rr.com (because smpt-server.hawaii.edu
won't let me send messages coming from hawaii.rr.com). I use
gfeeney@hawaii.edu as my email address and normally have this as the return
address. Posting to R-help, however, messages are bounced unless I change
the return to address to feeneyg001@hawaii.rr.com. With this change they
don't bounce, but they don't seem to get through.



Attempting to build R-1.0.0 from source I get the following.

F:\rw1000\src\gnuwin32>make BUILD=MINGW32
mkdir -p ../../bin
F:/GCC-29~1.2/BIN/MAKE.EXE -C ./fixed
MAKE.EXE[1]: Entering directory `F:/rw1000/src/gnuwin32/fixed'
MAKE.EXE[1]: Nothing to be done for `all'.
MAKE.EXE[1]: Leaving directory `F:/rw1000/src/gnuwin32/fixed'
cp -pr unzip ../..
rm -f ../../unzip/*.h
Syntax error: Unterminated quoted string
F:\GCC-29~1.2\BIN\MAKE.EXE: *** [console.d] Error 2

By way of background, I am running Windows 95 4.00.950 and had, following
rw1000\src\gnuwin32\install file: 

1 installed mingw32 gcc-2.95.2 (MSVCRT) and put gcc-2.95.2\bin in the path;
2 installed cygwin user tools and put cygwin-b20\h-i586-cygwin32\bin in the
path;
3 [Perl5 was already installed and in the path];
4 'set MAKE_MODE=UNIX';
5 untarred R-1.0.0.tgz in f:\ and changed directory name from R-1.0.0 to
rw1000;
6 left rw1000\src\gnuwin32\MkRules unchanged;
7 edited rw1000\src\gnuwin32\Makefile to put WINHELP=NO;
8 created rw1000\unzip\ and copied unzip32.dll from binary distribution
into it;
9 ran make BUILD=MINGW32 with the result shown above.

The result ("Syntax error: Unterminated quoted string ... MAKE.EXE: ***
[console.d] Error 2")is the same whether I use the DOS shell or the cygwin
bash shell.

I'm just learning how to build from source and am insufficiently familiar
with make and makefiles to diagnose what's wrong and how to proceed. The
Note 2 statement that "the Makefiles do not work unchanged on all the
possible combinations of tools, compilers and OSes" is noted. Suggestions
on what to try next would be greatly appreciated.


--8sD16rPb6u--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Mar 30 11:18:51 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 30 Mar 2000 11:18:51 +0100 (BST)
Subject: [Rd] Re: problem posting to r-help list
Message-ID: <200003301018.LAA14214@toucan.stats.ox.ac.uk>

You are using the wrong make.  Please read the instructions very carefully.
You _must_ use the cygwin make with the supplied Makefiles. As INSTALL says:

   You will also
   need suitable versions of at least make, sh, rm, sed, (g)awk, mkdir,
   echo, cp, cut, diff, grep, egrep, pwd, expr and cat; we use those from
   the cygwin distribution (http://sourceware.cygnus.com/cygwin and
   several mirrors).


> From: Griffith Feeney <gfeeney@hawaii.edu>
> To: wwwadmin@isildur.ci.tuwien.ac.at
> Subject: problem posting to r-help list
> Date: Wed, 29 Mar 2000 09:35:50 -1000
> 
> Attempting to build R-1.0.0 from source I get the following.
> 
> F:\rw1000\src\gnuwin32>make BUILD=MINGW32
> mkdir -p ../../bin
> F:/GCC-29~1.2/BIN/MAKE.EXE -C ./fixed

Note, this is the mingw32 make (which I did not think was in the 
base mingw32 distribution).

> MAKE.EXE[1]: Entering directory `F:/rw1000/src/gnuwin32/fixed'
> MAKE.EXE[1]: Nothing to be done for `all'.
> MAKE.EXE[1]: Leaving directory `F:/rw1000/src/gnuwin32/fixed'
> cp -pr unzip ../..
> rm -f ../../unzip/*.h
> Syntax error: Unterminated quoted string
> F:\GCC-29~1.2\BIN\MAKE.EXE: *** [console.d] Error 2
> 
> By way of background, I am running Windows 95 4.00.950 and had, following
> rw1000\src\gnuwin32\install file: 
> 
> 1 installed mingw32 gcc-2.95.2 (MSVCRT) and put gcc-2.95.2\bin in the path;
> 2 installed cygwin user tools and put cygwin-b20\h-i586-cygwin32\bin in the
> path;

Put that ahead of 1 in your path!


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Mar 30 11:31:48 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 30 Mar 2000 11:31:48 +0100 (BST)
Subject: [Rd] AIX fails on startup with R-1.0.0
Message-ID: <200003301031.LAA18620@toucan.stats.ox.ac.uk>


> To: Kurt.Hornik@ci.tuwien.ac.at
> Cc: R-devel <r-devel@stat.math.ethz.ch>
> Subject: Re: [Rd] AIX fails on startup with R-1.0.0
> X-URI: http://www.ece.cmu.edu/~tov
> From: Thomas J Vogels <tov@ece.cmu.edu>
> Date: 28 Mar 2000 13:24:09 -0500

> Other roadblocks I've encountered (and the reason I cc: r-devel):
> 
> -- ld/cc doesn't automatically include /usr/local/lib while gcc does.
> This comes from the sytem installation here and has nothing to do with
> R.  But having to add LIBS=-L/usr/local/lib may come as a surprise to
> people who don't do this regularly.  Does configure check for the
> existence of e.g. libz.a with cc or gcc?

This is a common problem, and if libz is shared, building may work but
running may not (as you need /usr/local/lib in the shared library path).

BTW, recent gcc's (e.g. 2.95.2) seem to include prefix/lib not
/usr/local/lib which may come as even more of a surprise.
On Solaris 2.6 I need 

CPPFLAGS=-I/usr/local/include
LIBS="-L/usr/local/lib -R/usr/local/lib"

when using gcc 2.95.2, installed in /ext/gcc-2.95.2, and I always need the
second to cope with /usr/local/lib/libz.so.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 31 18:21:21 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 31 Mar 2000 19:21:21 +0200 (CEST)
Subject: [Rd] AIX fails on startup with R-1.0.0
In-Reply-To: <87r9cvgdh2.fsf@bavaria.ece.cmu.edu>
References: <Pine.GSO.4.21.0003181111590.11158-100000@mail.biostat.washington.edu>
 <871z561pcm.fsf@bavaria.ece.cmu.edu>
 <14552.57463.552150.382635@aragorn.ci.tuwien.ac.at>
 <8766uens46.fsf@bavaria.ece.cmu.edu>
 <14554.25111.847983.270127@aragorn.ci.tuwien.ac.at>
 <87u2hxl28l.fsf@bavaria.ece.cmu.edu>
 <200003270657.IAA01178@aragorn.ci.tuwien.ac.at>
 <87r9cvgdh2.fsf@bavaria.ece.cmu.edu>
Message-ID: <14564.56977.803778.800788@aragorn.ci.tuwien.ac.at>

>>>>> Thomas J Vogels writes:

> Kurt,

> thanks for your help.  Your suggestion to use "LDCMD=cc SHLIBLD=cc"
> for configure worked, I've got a working R again :-)

And got me confused.

Ideally, I'd like to use the C compiler (rather than ld) for linking the
main binary as well as shared libs, so overriding should only occur if
there is a good reason.  I assume that there was one for aix, but from
the above maybe it is gone now?

Users of current r-devel snapshots on AIX, can you confirm that

	MAINLD=cc SHLIBLD=cc /path/to/configure
	make

works o.k.?  (Or actually, use your C compiler rather than `cc' ...)

> Other roadblocks I've encountered (and the reason I cc: r-devel):

> -- ld/cc doesn't automatically include /usr/local/lib while gcc does.
> This comes from the sytem installation here and has nothing to do with
> R.  But having to add LIBS=-L/usr/local/lib may come as a surprise to
> people who don't do this regularly.

> Does configure check for the existence of e.g. libz.a with cc or gcc?
It uses the C compiler specified.

Well, LIBS is needed when you have things in `non-standard' locations.
Of course your mileage may vary on the definition of non-standard :-)

Is there anything I/configure could do about this?  (Note that I don't
think that unconditionally adding /usr/local/lib to LIBS is a good
idea.) 

> -- the installation fails when I try to build in a special
> subdirectory.  install-sh can't be found.  I've edited the Makefile to
> use "build/tools/../$(INSTALL_DATA)".  (I guess build/$(INSTALL_DATA)
> would be enough.)  I believe this worked on a sun.  Is this a
> consequence of overriding install-sh on AIX in configure?

I need more info on that.  configure does two fixing steps after using
the standard autoconf code for determining a BSD compatible install: if
we end up with the script, then make sure its path is absolute.  I think
this is needed and should work.  Secondly, on platforms where the code
was known to give something that would not work, use the script in any
case.  Maybe the latter can be avoided with the most recent autoconf
code.

What exactly is the failure you observe?

> -- demo.so is not installed and demo(dyn.load) fails.  This is a
> trivial matter if detected before 'rm -rf build' ...

Why is that?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

