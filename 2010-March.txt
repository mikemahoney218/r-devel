From martin.becker at mx.uni-saarland.de  Mon Mar  1 00:45:26 2010
From: martin.becker at mx.uni-saarland.de (Martin Becker)
Date: Mon, 01 Mar 2010 00:45:26 +0100
Subject: [Rd] Problem with gsl package
In-Reply-To: <2586A1048152BE4D861E64A98700AD4204E76425@nki-mail.nki.rfmh.org>
References: <2586A1048152BE4D861E64A98700AD4204E76425@nki-mail.nki.rfmh.org>
Message-ID: <4B8B0016.8070205@mx.uni-saarland.de>

Hi,

I think I had similar problems with gsl on a non-standard installation. 
The following steps seemed to work (but are merely the results of 
struggling around...)

1. Download and extract source code of R-package 'gsl'
2. Use gsl-config --libs to get the path to GSL's lib directory 
(-L<path-to-lib>), use gsl-config --cflags to get the path to GSL's 
include directory (-I<path-to-include>)
3. Change Makevars in gsl/src:
- Add -L<path-to-lib> to PKG_LIBS
- Add (new) line: PKG_CPPFLAGS=-I<path-to-include>
4. Install gsl via
  LDFLAGS=-L<path-to-lib>;export 
LDFLAGS;CPPFLAGS=-I<path-to-include>;export CPPFLAGS;R CMD INSTALL gsl

Best,

  Martin



Hoptman, Matthew wrote:
> Hi all, 
> I am new to R and am writing after having contacted Robin Hankin, who
> maintains the R gsl wrapper.
>
>  
>
> I am trying to use an AFNI (neuroimaging analysis) program that depends
> on the R gsl package.   When I try to use the script I wrote, I get an
> error that led me to suspect the gsl package was a culprit.  When I do
> library("gsl") within R, I get:
>
> Error in dyn.load(file, DLLpath = DLLpath, ...) : 
>
>   unable to load shared library
> '/home/matt/R/lib64/R/library/gsl/libs/gsl.so':
>
>   /home/matt/R/lib64/R/library/gsl/libs/gsl.so: undefined symbol:
> gsl_sf_expint_En_e
>
> Error: package/namespace load failed for 'gsl'
>
>  
>
> It looks like it is due to where my Linux (not R) gsl package is
> installed.  Robin thought the problem is that I had to install my Linux
> gsl package in a nontypical location (it's in /usr) because /usr/local
> is not available to us.
>
>  
>
> He mentioned that others have had this problem.  Has anyone been able to
> surmount this problem?
> Thanks,
>
> Matt
>
>  
>
> PS.  I'm running Suse Linux 10.3:
>
> Linux ghidra 2.6.22.19-0.1-default #1 SMP 2008-10-14 22:17:43 +0200
> x86_64 x86_64 x86_64 GNU/Linux
>
> Matthew J. Hoptman, PhD 
> Research Scientist V 
> Nathan S. Kline Institute for Psychiatric Research 
>
> Research Associate Professor in Psychiatry 
> NYU School of Medicine 
>
>  
>
> IMPORTANT NOTICE: This e-mail is meant only for the use of the intended
> recipient. It may contain confidential information which is legally
> privileged or otherwise protected by law. If you received this 
> e-mail in error or from someone who was not authorized to send it to
> you, you are strictly prohibited from reviewing, using, disseminating,
> distributing or copying the e-mail. 
>
> PLEASE NOTIFY US IMMEDIATELY OF THE ERROR BY RETURN E-MAIL AND DELETE
> THIS MESSAGE FROM YOUR SYSTEM. Thank you for your cooperation.
>
>  
>
>
>
> _________________________________________
> Conserve resources. Print only when necessary.
>
> IMPORTANT NOTICE:  This e-mail is meant only for the use of the intended recipient.  It may contain confidential information which is legally privileged
> or otherwise protected by law.  If you received this e-mail in error or from someone who was not authorized to send it to you, you are strictly prohibited
> from reviewing, using, disseminating, distributing or copying the e-mail.  PLEASE NOTIFY US IMMEDIATELY OF THE ERROR BY RETURN E-MAIL AND DELETE THIS MESSAGE FROM YOUR SYSTEM.  Thank you for your cooperation.
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>   

-- 
Dr. Martin Becker
Statistics and Econometrics
Saarland University
Campus C3 1, Room 206
66123 Saarbruecken
Germany


From Hoptman at NKI.RFMH.ORG  Mon Mar  1 01:09:32 2010
From: Hoptman at NKI.RFMH.ORG (Hoptman, Matthew)
Date: Sun, 28 Feb 2010 19:09:32 -0500
Subject: [Rd] Problem with gsl package
In-Reply-To: <4B8B0016.8070205@mx.uni-saarland.de>
References: <2586A1048152BE4D861E64A98700AD4204E76425@nki-mail.nki.rfmh.org>
	<4B8B0016.8070205@mx.uni-saarland.de>
Message-ID: <2586A1048152BE4D861E64A98700AD4204E76428@nki-mail.nki.rfmh.org>

Hi Martin,
I'll try it out.
Best,
Matt

-----Original Message-----
From: Martin Becker [mailto:martin.becker at mx.uni-saarland.de] 
Sent: Sunday, February 28, 2010 6:45 PM
To: Hoptman, Matthew
Cc: r-devel at r-project.org
Subject: Re: [Rd] Problem with gsl package

Hi,

I think I had similar problems with gsl on a non-standard installation. 
The following steps seemed to work (but are merely the results of 
struggling around...)

1. Download and extract source code of R-package 'gsl'
2. Use gsl-config --libs to get the path to GSL's lib directory 
(-L<path-to-lib>), use gsl-config --cflags to get the path to GSL's 
include directory (-I<path-to-include>)
3. Change Makevars in gsl/src:
- Add -L<path-to-lib> to PKG_LIBS
- Add (new) line: PKG_CPPFLAGS=-I<path-to-include>
4. Install gsl via
  LDFLAGS=-L<path-to-lib>;export 
LDFLAGS;CPPFLAGS=-I<path-to-include>;export CPPFLAGS;R CMD INSTALL gsl

Best,

  Martin



Hoptman, Matthew wrote:
> Hi all, 
> I am new to R and am writing after having contacted Robin Hankin, who
> maintains the R gsl wrapper.
>
>  
>
> I am trying to use an AFNI (neuroimaging analysis) program that
depends
> on the R gsl package.   When I try to use the script I wrote, I get an
> error that led me to suspect the gsl package was a culprit.  When I do
> library("gsl") within R, I get:
>
> Error in dyn.load(file, DLLpath = DLLpath, ...) : 
>
>   unable to load shared library
> '/home/matt/R/lib64/R/library/gsl/libs/gsl.so':
>
>   /home/matt/R/lib64/R/library/gsl/libs/gsl.so: undefined symbol:
> gsl_sf_expint_En_e
>
> Error: package/namespace load failed for 'gsl'
>
>  
>
> It looks like it is due to where my Linux (not R) gsl package is
> installed.  Robin thought the problem is that I had to install my
Linux
> gsl package in a nontypical location (it's in /usr) because /usr/local
> is not available to us.
>
>  
>
> He mentioned that others have had this problem.  Has anyone been able
to
> surmount this problem?
> Thanks,
>
> Matt
>
>  
>
> PS.  I'm running Suse Linux 10.3:
>
> Linux ghidra 2.6.22.19-0.1-default #1 SMP 2008-10-14 22:17:43 +0200
> x86_64 x86_64 x86_64 GNU/Linux
>
> Matthew J. Hoptman, PhD 
> Research Scientist V 
> Nathan S. Kline Institute for Psychiatric Research 
>
> Research Associate Professor in Psychiatry 
> NYU School of Medicine 
>
>  
>
> IMPORTANT NOTICE: This e-mail is meant only for the use of the
intended
> recipient. It may contain confidential information which is legally
> privileged or otherwise protected by law. If you received this 
> e-mail in error or from someone who was not authorized to send it to
> you, you are strictly prohibited from reviewing, using, disseminating,
> distributing or copying the e-mail. 
>
> PLEASE NOTIFY US IMMEDIATELY OF THE ERROR BY RETURN E-MAIL AND DELETE
> THIS MESSAGE FROM YOUR SYSTEM. Thank you for your cooperation.
>
>  
>
>
>
> _________________________________________
> Conserve resources. Print only when necessary.
>
> IMPORTANT NOTICE:  This e-mail is meant only for the use of the
intended recipient.  It may contain confidential information which is
legally privileged
> or otherwise protected by law.  If you received this e-mail in error
or from someone who was not authorized to send it to you, you are
strictly prohibited
> from reviewing, using, disseminating, distributing or copying the
e-mail.  PLEASE NOTIFY US IMMEDIATELY OF THE ERROR BY RETURN E-MAIL AND
DELETE THIS MESSAGE FROM YOUR SYSTEM.  Thank you for your cooperation.
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>   

-- 
Dr. Martin Becker
Statistics and Econometrics
Saarland University
Campus C3 1, Room 206
66123 Saarbruecken
Germany


_________________________________________
Conserve resources. Print only when necessary.

IMPORTANT NOTICE:  This e-mail is meant only for the use of the intended recipient.  It may contain confidential information which is legally privileged
or otherwise protected by law.  If you received this e-mail in error or from someone who was not authorized to send it to you, you are strictly prohibited
from reviewing, using, disseminating, distributing or copying the e-mail.  PLEASE NOTIFY US IMMEDIATELY OF THE ERROR BY RETURN E-MAIL AND DELETE THIS MESSAGE FROM YOUR SYSTEM.  Thank you for your cooperation.



From ripley at stats.ox.ac.uk  Mon Mar  1 09:12:59 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 1 Mar 2010 08:12:59 +0000 (GMT)
Subject: [Rd] Update 2 on MinGW-w64 builds for 64-bit Windows
Message-ID: <alpine.LFD.2.00.1003010751360.3657@gannet.stats.ox.ac.uk>

This post updates

https://stat.ethz.ch/pipermail/r-devel/2010-January/056301.html
https://stat.ethz.ch/pipermail/r-devel/2010-January/056411.html

The MinGW-w64 snapshots have moved back to gcc pre-4.4.4 (from 
pre-4.5.0) with static linking to C++ and Fortran run-time DLLs, and 
seem more stable.  Currently the CRAN package check pages at 
http://cran.r-project.org/web/checks/check_summary.html are showing 
101/2182 failures, but ca 40 packages are failing on all 64-bit 
platforms in R-devel, and 21 further CRAN packages (plus Rgraphviz and 
a couple of Omegahat packages) are available on CRANextras after 
manual tweaking.  At one point we had installed all the BioC 
dependencies of CRAN packages from the bioc-devel sources, but 
rtracklayer does not currently build on Windows.

Thus there are ca 40 CRAN packages which have issues specific to 
64-bit Windows.  Most of these are due to dependencies which are 
currently unavailable because external software is not, notably BRugs 
rgdal rggobi and rjags.  There are only four which fail in ways not 
seen on at least one other platform.

We do not anticipate any major changes to the build before 2.11.0 is 
released (most likely in April), and it can now be regarded as at 
'beta' status -- users with a 64-bit Windows OS and who do not need 
Bioconductor packages are encouraged to try it out.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From bayesianlogic at acm.org  Mon Mar  1 01:02:30 2010
From: bayesianlogic at acm.org (Jan Theodore Galkowski)
Date: Sun, 28 Feb 2010 19:02:30 -0500
Subject: [Rd] Have another apparent version skew
In-Reply-To: <mailman.19.1263812407.26774.r-devel@r-project.org>
References: <mailman.19.1263812407.26774.r-devel@r-project.org>
Message-ID: <1267401750.14769.1362375261@webmail.messagingengine.com>

The package "sm" was obtained twice, one using R's built-in updating of
packages, the second directly.  In both cases the USA-NC CRAN mirror was
used.  In both cases, loading the package under R 2.10.1 for Windows
resulted in a 'package obsolete' kind of message.  Switching the mirror
to USA-CA-1 (Berkeley) got a good package that loaded without complaint.


R version 2.10.1 (2009-12-14)
Copyright (C) 2009 The R Foundation for Statistical Computing
ISBN 3-900051-07-0

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

[1] "C:/builds/R"
> require(sm)
Loading required package: sm
Package `sm', version 2.2-3;  Copyright (C) 1997, 2000, 2005, 2007
A.W.Bowman & A.Azzalini
type help(sm) for summary information
Warning message:
package 'sm' was built under R version 2.9.1 and help will not work
correctly
Please re-install it 
>


From cgb at datanalytics.com  Mon Mar  1 16:33:08 2010
From: cgb at datanalytics.com (Carlos J. Gil Bellosta)
Date: Mon, 01 Mar 2010 16:33:08 +0100
Subject: [Rd] Idea for install.packages on (certain) linux distributions
Message-ID: <4B8BDE34.6070000@datanalytics.com>

Hello,

I do not know whether this idea would be considered useful or not. Or 
easy to implement.

But it is the case that on certain Linux distributions there are OS 
packages with precompiled R packages. However, install.packages (and 
related functions) download the source ones.

Would it be possible to add an extra "repository" (or option) on 
install.packages that would direct R to use the OS level package manager 
(apt-get, yum or the like) so as to install the precompiled packages 
from the distribution mirrors instead of the CRAN ones?

Best regards,

Carlos J. Gil Bellosta
http://www.datanalytics.com


From abryant at i-review.com  Mon Mar  1 16:45:30 2010
From: abryant at i-review.com (Alex Bryant)
Date: Mon, 1 Mar 2010 10:45:30 -0500
Subject: [Rd] ICONV error installing R-2.10.1 on HP-UX B.11.23 U ia64
Message-ID: <41A047C9B0CF8D4CBB0C8BA991086CCB0E3CCA0CD2@exchange07.i-review.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100301/0871b379/attachment.pl>

From ligges at statistik.tu-dortmund.de  Mon Mar  1 17:36:36 2010
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 01 Mar 2010 17:36:36 +0100
Subject: [Rd] Idea for install.packages on (certain) linux distributions
In-Reply-To: <4B8BDE34.6070000@datanalytics.com>
References: <4B8BDE34.6070000@datanalytics.com>
Message-ID: <4B8BED14.3050003@statistik.tu-dortmund.de>



On 01.03.2010 16:33, Carlos J. Gil Bellosta wrote:
> Hello,
>
> I do not know whether this idea would be considered useful or not. Or
> easy to implement.
>
> But it is the case that on certain Linux distributions there are OS
> packages with precompiled R packages. However, install.packages (and
> related functions) download the source ones.
>
> Would it be possible to add an extra "repository" (or option) on
> install.packages that would direct R to use the OS level package manager
> (apt-get, yum or the like) so as to install the precompiled packages
> from the distribution mirrors instead of the CRAN ones?

Beside the problem that there are several distributions with different 
OS level package managers that are not part of R, we can not guarantee 
that the relevant repositories are up to date (which we can control for 
CRAN, for example).

We have even discussed if it makes sense to provide Windows binary 
packages without compiled code through CRAN further on given that it is 
easily possible to install them from sources (even on Windows).

Best wishes,
Uwe Ligges



> Best regards,
>
> Carlos J. Gil Bellosta
> http://www.datanalytics.com
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Mon Mar  1 18:56:06 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 1 Mar 2010 17:56:06 +0000 (GMT)
Subject: [Rd] ICONV error installing R-2.10.1 on HP-UX B.11.23 U ia64
In-Reply-To: <41A047C9B0CF8D4CBB0C8BA991086CCB0E3CCA0CD2@exchange07.i-review.com>
References: <41A047C9B0CF8D4CBB0C8BA991086CCB0E3CCA0CD2@exchange07.i-review.com>
Message-ID: <alpine.LFD.2.00.1003011753450.28436@localhost>

On Mon, 1 Mar 2010, Alex Bryant wrote:

> Hi, I have the following error during the ./configure phase
>
> checking iconv.h usability... yes
> checking iconv.h presence... yes
> checking for iconv.h... yes
> checking for iconv... in libiconv
> checking whether iconv accepts "UTF-8", "latin1" and "UCS-*"... no
> configure: error: a suitable iconv is essential
>
> I have installed GNU libiconv-1.13.1 without success.  I have also installed gettext-0.17 per iconv installation instructions.  Still no success and I feel I currently heading down the wrong path.  Can anyone help?

Take a look at config.log: it should help -- perhaps the library is 
not being found and needs to be put in the ld.so cache, or something 
like that.

As far as we know you do need GMU libiconv on all the commercial 
Unixen (Solaris, AIX, IRIX), but I am not sure anyone has reported on 
HP-UX recently.

>
> Thanks,
> Alex
>
> //************************
> // Alex Bryant
> // Software Developer
> // Integrated Clinical Systems, Inc.
> // 908-996-7208


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jel+r at cs.uni-magdeburg.de  Mon Mar  1 19:09:15 2010
From: jel+r at cs.uni-magdeburg.de (Jens Elkner)
Date: Mon, 1 Mar 2010 19:09:15 +0100
Subject: [Rd] R logo as SVG ?
In-Reply-To: <de4e29f51002271123s2ae805cex8b6d71d98ba62d8f@mail.gmail.com>
References: <20100220171608.GA17050@trex.cs.uni-magdeburg.de>
	<4B80275C.8080806@biostat.ku.dk>
	<a695148b1002201033q31bdc708o17b1c8bd8e2760ae@mail.gmail.com>
	<4B80313D.1000909@biostat.ku.dk>
	<20100220195620.GA17109@trex.cs.uni-magdeburg.de>
	<4B82753B.2090006@biostat.ku.dk>
	<20100227023844.GA1272@trex.cs.uni-magdeburg.de>
	<4B88E35F.3010805@biostat.ku.dk>
	<20100227185533.GA3602@trex.cs.uni-magdeburg.de>
	<de4e29f51002271123s2ae805cex8b6d71d98ba62d8f@mail.gmail.com>
Message-ID: <20100301180915.GA11344@grex.cs.uni-magdeburg.de>

On Sat, Feb 27, 2010 at 08:23:17PM +0100, baptiste auguie wrote:
> You got the first two letters right, but it's actually *Barry*'s work!
  
Oh - sorry, Barry!!!

BTW: screenshots I made from my desktop are available via
http://iws.cs.uni-magdeburg.de/~elkner/r/

OT: Incl. the iconv patch I used for Solaris, since I prefer its
libiconv 'fail fast' instead of the GNU libiconvs 'perhaps I can
produce something usable' approach ...

Regards,
jel.
-- 
Otto-von-Guericke University     http://www.cs.uni-magdeburg.de/
Department of Computer Science   Geb. 29 R 027, Universitaetsplatz 2
39106 Magdeburg, Germany         Tel: +49 391 67 12768


From ligges at statistik.tu-dortmund.de  Mon Mar  1 19:15:06 2010
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 01 Mar 2010 19:15:06 +0100
Subject: [Rd] Have another apparent version skew
In-Reply-To: <1267401750.14769.1362375261@webmail.messagingengine.com>
References: <mailman.19.1263812407.26774.r-devel@r-project.org>
	<1267401750.14769.1362375261@webmail.messagingengine.com>
Message-ID: <4B8C042A.4050308@statistik.tu-dortmund.de>



On 01.03.2010 01:02, Jan Theodore Galkowski wrote:
> The package "sm" was obtained twice, one using R's built-in updating of
> packages, the second directly.  In both cases the USA-NC CRAN mirror was
> used.  In both cases, loading the package under R 2.10.1 for Windows
> resulted in a 'package obsolete' kind of message.  Switching the mirror
> to USA-CA-1 (Berkeley) got a good package that loaded without complaint.


Works fine for me (and I get the correct file) from exactly that mirror 
(http://mirrors.ibiblio.org/pub/mirrors/CRAN/) with R-2.10.1. Although 
it is rather slow from Germany....

Uwe Ligges




>
> R version 2.10.1 (2009-12-14)
> Copyright (C) 2009 The R Foundation for Statistical Computing
> ISBN 3-900051-07-0
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
>
>    Natural language support but running in an English locale
>
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
>
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
>
> [1] "C:/builds/R"
>> require(sm)
> Loading required package: sm
> Package `sm', version 2.2-3;  Copyright (C) 1997, 2000, 2005, 2007
> A.W.Bowman&  A.Azzalini
> type help(sm) for summary information
> Warning message:
> package 'sm' was built under R version 2.9.1 and help will not work
> correctly
> Please re-install it
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From p.dalgaard at biostat.ku.dk  Mon Mar  1 19:47:37 2010
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Mon, 01 Mar 2010 19:47:37 +0100
Subject: [Rd] R logo as SVG ?
In-Reply-To: <20100301180915.GA11344@grex.cs.uni-magdeburg.de>
References: <20100220171608.GA17050@trex.cs.uni-magdeburg.de>	<4B80275C.8080806@biostat.ku.dk>	<a695148b1002201033q31bdc708o17b1c8bd8e2760ae@mail.gmail.com>	<4B80313D.1000909@biostat.ku.dk>	<20100220195620.GA17109@trex.cs.uni-magdeburg.de>	<4B82753B.2090006@biostat.ku.dk>	<20100227023844.GA1272@trex.cs.uni-magdeburg.de>	<4B88E35F.3010805@biostat.ku.dk>	<20100227185533.GA3602@trex.cs.uni-magdeburg.de>	<de4e29f51002271123s2ae805cex8b6d71d98ba62d8f@mail.gmail.com>
	<20100301180915.GA11344@grex.cs.uni-magdeburg.de>
Message-ID: <4B8C0BC9.3050903@biostat.ku.dk>

Jens Elkner wrote:
> On Sat, Feb 27, 2010 at 08:23:17PM +0100, baptiste auguie wrote:
>> You got the first two letters right, but it's actually *Barry*'s work!
>   
> Oh - sorry, Barry!!!
> 
> BTW: screenshots I made from my desktop are available via
> http://iws.cs.uni-magdeburg.de/~elkner/r/
> 
> OT: Incl. the iconv patch I used for Solaris, since I prefer its
> libiconv 'fail fast' instead of the GNU libiconvs 'perhaps I can
> produce something usable' approach ...
> 
> Regards,
> jel.

Looks quite nice. I later realized that it would be a much better idea 
to start by tracing the highest resolution bitmap from

http://developer.r-project.org/Logo

I now have a version that is only 48 K. It still needs a little touching 
up to get a transparent background without destroying the highlighted 
regions. I'm attaching it here, but it might not make it to r-devel.

-- 
    O__  ---- Peter Dalgaard
   c/ /'_ --- Center for Statistics
  (*) \(*) -- Copenhagen Business School
~~~~~~~~~~ -

From p.dalgaard at biostat.ku.dk  Mon Mar  1 22:16:16 2010
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Mon, 01 Mar 2010 22:16:16 +0100
Subject: [Rd] R logo as SVG ?
In-Reply-To: <4B8C0BC9.3050903@biostat.ku.dk>
References: <20100220171608.GA17050@trex.cs.uni-magdeburg.de>	<4B80275C.8080806@biostat.ku.dk>	<a695148b1002201033q31bdc708o17b1c8bd8e2760ae@mail.gmail.com>	<4B80313D.1000909@biostat.ku.dk>	<20100220195620.GA17109@trex.cs.uni-magdeburg.de>	<4B82753B.2090006@biostat.ku.dk>	<20100227023844.GA1272@trex.cs.uni-magdeburg.de>	<4B88E35F.3010805@biostat.ku.dk>	<20100227185533.GA3602@trex.cs.uni-magdeburg.de>	<de4e29f51002271123s2ae805cex8b6d71d98ba62d8f@mail.gmail.com>	<20100301180915.GA11344@grex.cs.uni-magdeburg.de>
	<4B8C0BC9.3050903@biostat.ku.dk>
Message-ID: <4B8C2EA0.5050901@biostat.ku.dk>

Peter Dalgaard wrote:
> Jens Elkner wrote:
>> On Sat, Feb 27, 2010 at 08:23:17PM +0100, baptiste auguie wrote:
>>> You got the first two letters right, but it's actually *Barry*'s work!
>>   Oh - sorry, Barry!!!
>>
>> BTW: screenshots I made from my desktop are available via
>> http://iws.cs.uni-magdeburg.de/~elkner/r/
>>
>> OT: Incl. the iconv patch I used for Solaris, since I prefer its
>> libiconv 'fail fast' instead of the GNU libiconvs 'perhaps I can
>> produce something usable' approach ...
>>
>> Regards,
>> jel.
> 
> Looks quite nice. I later realized that it would be a much better idea 
> to start by tracing the highest resolution bitmap from
> 
> http://developer.r-project.org/Logo
> 
> I now have a version that is only 48 K. It still needs a little touching 
> up to get a transparent background without destroying the highlighted 
> regions. I'm attaching it here, but it might not make it to r-devel.

Didn't...

Should be making its way to developer.r-project.org now. Or for the 
impatient:

http://svn.r-project.org/R-dev-web/trunk/Logo/

-- 
    O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
   c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
  (*) \(*) -- University of Copenhagen   Denmark      Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)              FAX: (+45) 35327907


From gkerns at ysu.edu  Mon Mar  1 22:28:30 2010
From: gkerns at ysu.edu (G. Jay Kerns)
Date: Mon, 01 Mar 2010 16:28:30 -0500
Subject: [Rd] R logo as SVG ?
In-Reply-To: <4B8C2EA0.5050901@biostat.ku.dk>
References: <20100220171608.GA17050@trex.cs.uni-magdeburg.de>
	<20100220195620.GA17109@trex.cs.uni-magdeburg.de>
	<4B82753B.2090006@biostat.ku.dk>
	<20100227023844.GA1272@trex.cs.uni-magdeburg.de>
	<4B88E35F.3010805@biostat.ku.dk>
	<20100227185533.GA3602@trex.cs.uni-magdeburg.de>
	<de4e29f51002271123s2ae805cex8b6d71d98ba62d8f@mail.gmail.com>
	<20100301180915.GA11344@grex.cs.uni-magdeburg.de>
	<4B8C0BC9.3050903@biostat.ku.dk> <4B8C2EA0.5050901@biostat.ku.dk>
Message-ID: <a695148b1003011328l62a9d289yf8217f5141051b98@mail.gmail.com>

On Mon, Mar 1, 2010 at 4:16 PM, Peter Dalgaard <p.dalgaard at biostat.ku.dk> wrote:

>>
>> Looks quite nice. I later realized that it would be a much better idea to
>> start by tracing the highest resolution bitmap from
>>
>> http://developer.r-project.org/Logo
>>
>> I now have a version that is only 48 K. It still needs a little touching
>> up to get a transparent background without destroying the highlighted
>> regions. I'm attaching it here, but it might not make it to r-devel.
>
> Didn't...
>
> Should be making its way to developer.r-project.org now. Or for the
> impatient:
>
> http://svn.r-project.org/R-dev-web/trunk/Logo/
>

Wow!  That really looks great.  And at 5% of the size of mine, to
boot.  I spent some minutes trying to make mine smaller but could only
get it to ~850k.

Jay


From nashjc at uottawa.ca  Tue Mar  2 13:31:49 2010
From: nashjc at uottawa.ca (Prof. John C Nash)
Date: Tue, 02 Mar 2010 07:31:49 -0500
Subject: [Rd]  Idea for install.packages on (certain) linux distributions
In-Reply-To: <mailman.25.1267527607.26924.r-devel@r-project.org>
References: <mailman.25.1267527607.26924.r-devel@r-project.org>
Message-ID: <4B8D0535.8000701@uottawa.ca>

Some time ago, I had some email discussion with Dirk E. about putting a front-end on 
install.packages to first look at the debian repositories for R and use them before trying 
to install from source. The code for this would not be very large. As Uwe points out in 
another posting, the issue then becomes one of repository maintenance. And as more types 
of installers get included, the code and the chance of package mismatches get more risky.

However, where we have repositories, it may be useful to have example code to try such an 
approach. In pseudo-code this could be implemented without damaging install.packages as:

    [start of my.install.packages]
    if (exist(local.install) ) {
            local.install(package)
    } else {
            install.packages(package)
    }

If anyone gets enthused about this, I'd suggest posting on R-wiki. Note that local.install 
will have to be pretty aggressive at checking the OS version etc.

JN



> Date: Mon, 01 Mar 2010 16:33:08 +0100
> From: "Carlos J. Gil Bellosta" <cgb at datanalytics.com>
> To: r-devel at r-project.org
> Subject: [Rd] Idea for install.packages on (certain) linux
> 	distributions
> Message-ID: <4B8BDE34.6070000 at datanalytics.com>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
> 
> Hello,
> 
> I do not know whether this idea would be considered useful or not. Or 
> easy to implement.
> 
> But it is the case that on certain Linux distributions there are OS 
> packages with precompiled R packages. However, install.packages (and 
> related functions) download the source ones.
> 
> Would it be possible to add an extra "repository" (or option) on 
> install.packages that would direct R to use the OS level package manager 
> (apt-get, yum or the like) so as to install the precompiled packages 
> from the distribution mirrors instead of the CRAN ones?
> 
> Best regards,
> 
> Carlos J. Gil Bellosta
> http://www.datanalytics.com
>


From edd at debian.org  Tue Mar  2 14:02:49 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 2 Mar 2010 07:02:49 -0600
Subject: [Rd] Idea for install.packages on (certain) linux distributions
In-Reply-To: <4B8D0535.8000701@uottawa.ca>
References: <mailman.25.1267527607.26924.r-devel@r-project.org>
	<4B8D0535.8000701@uottawa.ca>
Message-ID: <19341.3193.321954.331102@ron.nulle.part>


On 2 March 2010 at 07:31, Prof. John C Nash wrote:
| Some time ago, I had some email discussion with Dirk E. about putting a front-end on 

Allow me to really quickly correct the record here by stating that it was
John N. who claimed this was a) desirable and b) possible.  I can only agree
on a) here and managed to get the referenced thread off here and over to the
R Wiki.  I would invite people to actually to some groundwork to get all /
most package built for a certain environment which is far from being a small
task. And that is merely a basic requirement before one would have to tackle
package information consistencies between R, the host OS, its version, ... as
well as progagation of such information trough both R and the host OS. Across
different vendor flavours.

To me, this is one of these "it would be really nice" ideas.  Just like
nuclear fusion and those floating cars the Flintstones have.  And I see about
the same ETA for all three of these.

Dirk

| install.packages to first look at the debian repositories for R and use them before trying 
| to install from source. The code for this would not be very large. As Uwe points out in 
| another posting, the issue then becomes one of repository maintenance. And as more types 
| of installers get included, the code and the chance of package mismatches get more risky.
| 
| However, where we have repositories, it may be useful to have example code to try such an 
| approach. In pseudo-code this could be implemented without damaging install.packages as:
| 
|     [start of my.install.packages]
|     if (exist(local.install) ) {
|             local.install(package)
|     } else {
|             install.packages(package)
|     }
| 
| If anyone gets enthused about this, I'd suggest posting on R-wiki. Note that local.install 
| will have to be pretty aggressive at checking the OS version etc.
| 
| JN
| 
| 
| 
| > Date: Mon, 01 Mar 2010 16:33:08 +0100
| > From: "Carlos J. Gil Bellosta" <cgb at datanalytics.com>
| > To: r-devel at r-project.org
| > Subject: [Rd] Idea for install.packages on (certain) linux
| > 	distributions
| > Message-ID: <4B8BDE34.6070000 at datanalytics.com>
| > Content-Type: text/plain; charset=ISO-8859-1; format=flowed
| > 
| > Hello,
| > 
| > I do not know whether this idea would be considered useful or not. Or 
| > easy to implement.
| > 
| > But it is the case that on certain Linux distributions there are OS 
| > packages with precompiled R packages. However, install.packages (and 
| > related functions) download the source ones.
| > 
| > Would it be possible to add an extra "repository" (or option) on 
| > install.packages that would direct R to use the OS level package manager 
| > (apt-get, yum or the like) so as to install the precompiled packages 
| > from the distribution mirrors instead of the CRAN ones?
| > 
| > Best regards,
| > 
| > Carlos J. Gil Bellosta
| > http://www.datanalytics.com
| >
| 
| ______________________________________________
| R-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
  Registration is open for the 2nd International conference R / Finance 2010
  See http://www.RinFinance.com for details, and see you in Chicago in April!


From edd at debian.org  Tue Mar  2 15:34:00 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 2 Mar 2010 08:34:00 -0600
Subject: [Rd] Idea for install.packages on (certain) linux distributions
In-Reply-To: <19341.3193.321954.331102@ron.nulle.part>
References: <mailman.25.1267527607.26924.r-devel@r-project.org>
	<4B8D0535.8000701@uottawa.ca>
	<19341.3193.321954.331102@ron.nulle.part>
Message-ID: <19341.8664.130865.15930@ron.nulle.part>


On 2 March 2010 at 07:02, Dirk Eddelbuettel wrote:
| To me, this is one of these "it would be really nice" ideas.  Just like
| nuclear fusion and those floating cars the Flintstones have.  And I see about
| the same ETA for all three of these.

Marc Schwartz kindly reminded me off-list that I am no historian of technology.
Jetsons, not Flintstones, were the ones I was thinking of.

   http://en.wikipedia.org/wiki/The_Jetsons
 
   http://en.wikipedia.org/wiki/The_Flintstones

Dirk

-- 
  Registration is open for the 2nd International conference R / Finance 2010
  See http://www.RinFinance.com for details, and see you in Chicago in April!


From jel+r at cs.uni-magdeburg.de  Tue Mar  2 17:46:27 2010
From: jel+r at cs.uni-magdeburg.de (Jens Elkner)
Date: Tue, 2 Mar 2010 17:46:27 +0100
Subject: [Rd] R logo as SVG ?
In-Reply-To: <4B8C2EA0.5050901@biostat.ku.dk>
References: <4B80313D.1000909@biostat.ku.dk>
	<20100220195620.GA17109@trex.cs.uni-magdeburg.de>
	<4B82753B.2090006@biostat.ku.dk>
	<20100227023844.GA1272@trex.cs.uni-magdeburg.de>
	<4B88E35F.3010805@biostat.ku.dk>
	<20100227185533.GA3602@trex.cs.uni-magdeburg.de>
	<de4e29f51002271123s2ae805cex8b6d71d98ba62d8f@mail.gmail.com>
	<20100301180915.GA11344@grex.cs.uni-magdeburg.de>
	<4B8C0BC9.3050903@biostat.ku.dk> <4B8C2EA0.5050901@biostat.ku.dk>
Message-ID: <20100302164627.GA5157@grex.cs.uni-magdeburg.de>

On Mon, Mar 01, 2010 at 10:16:16PM +0100, Peter Dalgaard wrote:
> >Jens Elkner wrote:
...
> >>BTW: screenshots I made from my desktop are available via
> >>http://iws.cs.uni-magdeburg.de/~elkner/r/
...
> >Looks quite nice. I later realized that it would be a much better idea 
> >to start by tracing the highest resolution bitmap from
> >
> >http://developer.r-project.org/Logo
> >
> >I now have a version that is only 48 K. It still needs a little touching 
> >up to get a transparent background without destroying the highlighted 
> >regions. I'm attaching it here, but it might not make it to r-devel.

Good work!!!

Still looks ok for me (so less is more ;-)). Added screenshots to
the URL above (new 49K based ones have a '2' at the end). For your
convinience/easier comparision I tied them together:
http://iws.cs.uni-magdeburg.de/~elkner/r/menu.html
http://iws.cs.uni-magdeburg.de/~elkner/r/nautilus.html

Regards,
jel.
-- 
Otto-von-Guericke University     http://www.cs.uni-magdeburg.de/
Department of Computer Science   Geb. 29 R 027, Universitaetsplatz 2
39106 Magdeburg, Germany         Tel: +49 391 67 12768


From bullard at stat.Berkeley.EDU  Wed Mar  3 01:20:57 2010
From: bullard at stat.Berkeley.EDU (bullard at stat.Berkeley.EDU)
Date: Tue, 2 Mar 2010 16:20:57 -0800 (PST)
Subject: [Rd] linking hdf5, requires setting LD_LIBRARY_PATH
Message-ID: <8654.66.201.56.150.1267575657.squirrel@www.stat.berkeley.edu>

I am writing an R package to interface to hdf5 files (yes I know one
exists, the issue will be demonstrated using that package). I tend to like
to build/install things locally so that aspects of the system I am working
on don't cause problems later when attempting to install elsewhere. To
this end, I build and install the hdf5 libraries w/out incident:

tar xzf hdf5-1.8.4.tar.bz2
cd hdf5-1.8.4
./configure --prefix=/home/jbullard/scratch/hdf5_install
make && make install

Now, I make a shared object using the following (I am compiling hdf5.c
directly in src of the hdf5 package):

gcc -I/home/jbullard/projects/me/R-builder/lib64/R/include
-I/home/jbullard/scratch/hdf5_install/include -I/usr/local/include -fpic
-g -O2 -std=gnu99 -c hdf5.c -o hdf5.o
gcc -shared -L/usr/local/lib64 -o hdf5.so hdf5.o
-L/home/jbullard/scratch/hdf5_install/lib -lhdf5 -lz -lm
-L/home/jbullard/projects/me/R-builder/lib64/R/lib -lR

I then start R and get the following error:

Error in dyn.load("hdf5.so") :
  unable to load shared library '/home/jbullard/scratch/hdf5/src/hdf5.so':
  libhdf5.so.6: cannot open shared object file: No such file or directory

The solution is set LD_LIBRARY_PATH to
/home/jbullard/scratch/hdf5_install/lib

Then things work just fine. However, I dislike this option -- Is there any
other way which things can be orchestrated completely at package install
time? I don't want to go editing any files in the R installation; more
like an option to append something to R's LD_LIBRARY_PATH w/in the
Makevars.in of the package being installed (in this case, hdf5)?

Details of platform below. As always, thanks in advance.

jim

R version 2.11.0 Under development (unstable) (2010-02-08 r51110)
x86_64-unknown-linux-gnu

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

HDF5 Version 1.8.4
R hdf5 package: hdf5_1.6.9.tar.gz
Linux mp-1246 2.6.31-19-generic #56-Ubuntu SMP Thu Jan 28 02:39:34 UTC
2010 x86_64 GNU/Linux


From edd at debian.org  Wed Mar  3 02:45:08 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 2 Mar 2010 19:45:08 -0600
Subject: [Rd] linking hdf5, requires setting LD_LIBRARY_PATH
In-Reply-To: <8654.66.201.56.150.1267575657.squirrel@www.stat.berkeley.edu>
References: <8654.66.201.56.150.1267575657.squirrel@www.stat.berkeley.edu>
Message-ID: <19341.48932.761309.378574@ron.nulle.part>


Unless I am missing something, this has nothing to do with hdf5 per se. See
below.

On 2 March 2010 at 16:20, bullard at stat.Berkeley.EDU wrote:
| I am writing an R package to interface to hdf5 files (yes I know one
| exists, the issue will be demonstrated using that package). I tend to like
| to build/install things locally so that aspects of the system I am working
| on don't cause problems later when attempting to install elsewhere. To
| this end, I build and install the hdf5 libraries w/out incident:
| 
| tar xzf hdf5-1.8.4.tar.bz2
| cd hdf5-1.8.4
| ./configure --prefix=/home/jbullard/scratch/hdf5_install
| make && make install
| 
| Now, I make a shared object using the following (I am compiling hdf5.c
| directly in src of the hdf5 package):
| 
| gcc -I/home/jbullard/projects/me/R-builder/lib64/R/include
| -I/home/jbullard/scratch/hdf5_install/include -I/usr/local/include -fpic
| -g -O2 -std=gnu99 -c hdf5.c -o hdf5.o
| gcc -shared -L/usr/local/lib64 -o hdf5.so hdf5.o
| -L/home/jbullard/scratch/hdf5_install/lib -lhdf5 -lz -lm
| -L/home/jbullard/projects/me/R-builder/lib64/R/lib -lR
| 
| I then start R and get the following error:
| 
| Error in dyn.load("hdf5.so") :
|   unable to load shared library '/home/jbullard/scratch/hdf5/src/hdf5.so':
|   libhdf5.so.6: cannot open shared object file: No such file or directory
| 
| The solution is set LD_LIBRARY_PATH to
| /home/jbullard/scratch/hdf5_install/lib

Of course. This is a dynamic library, and ld.so needs to find it.  

So if and when _you_ opt to depart from using standard locations, _you_ need
to tell ld.so where to look.

Setting LD_LIBRARY_PATH is one of several ways to do so. Others include 

  a) the /etc/ld.so.conf file, 

  b) (on newer linuxen) a file in the /etc/ld.so.conf.d/ directory

  c) encode the path at link time using the rpath argument.

Rcpp and RInside provide examples of the last approach.

Hth, Dirk

| 
| Then things work just fine. However, I dislike this option -- Is there any
| other way which things can be orchestrated completely at package install
| time? I don't want to go editing any files in the R installation; more
| like an option to append something to R's LD_LIBRARY_PATH w/in the
| Makevars.in of the package being installed (in this case, hdf5)?
| 
| Details of platform below. As always, thanks in advance.
| 
| jim
| 
| R version 2.11.0 Under development (unstable) (2010-02-08 r51110)
| x86_64-unknown-linux-gnu
| 
| locale:
|  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
|  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
|  [5] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8
|  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
|  [9] LC_ADDRESS=C               LC_TELEPHONE=C
| [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
| 
| attached base packages:
| [1] stats     graphics  grDevices utils     datasets  methods   base
| 
| HDF5 Version 1.8.4
| R hdf5 package: hdf5_1.6.9.tar.gz
| Linux mp-1246 2.6.31-19-generic #56-Ubuntu SMP Thu Jan 28 02:39:34 UTC
| 2010 x86_64 GNU/Linux
| 
| ______________________________________________
| R-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
  Registration is open for the 2nd International conference R / Finance 2010
  See http://www.RinFinance.com for details, and see you in Chicago in April!


From bullard at stat.berkeley.edu  Wed Mar  3 04:27:41 2010
From: bullard at stat.berkeley.edu (James Bullard)
Date: Tue, 2 Mar 2010 19:27:41 -0800
Subject: [Rd] linking hdf5, requires setting LD_LIBRARY_PATH
In-Reply-To: <19341.48932.761309.378574@ron.nulle.part>
References: <8654.66.201.56.150.1267575657.squirrel@www.stat.berkeley.edu>
	<19341.48932.761309.378574@ron.nulle.part>
Message-ID: <CEBD7B6C-988D-4F0B-9821-A3299C9B9A23@stat.berkeley.edu>





On Mar 2, 2010, at 17:45, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> Unless I am missing something, this has nothing to do with hdf5 per  
> se. See
> below.
>
No, you are not missing anything. Thank you for the response.  This is  
exactly what I was looking for.


Thanks again, Jim



> On 2 March 2010 at 16:20, bullard at stat.Berkeley.EDU wrote:
> | I am writing an R package to interface to hdf5 files (yes I know one
> | exists, the issue will be demonstrated using that package). I tend  
> to like
> | to build/install things locally so that aspects of the system I am  
> working
> | on don't cause problems later when attempting to install  
> elsewhere. To
> | this end, I build and install the hdf5 libraries w/out incident:
> |
> | tar xzf hdf5-1.8.4.tar.bz2
> | cd hdf5-1.8.4
> | ./configure --prefix=/home/jbullard/scratch/hdf5_install
> | make && make install
> |
> | Now, I make a shared object using the following (I am compiling  
> hdf5.c
> | directly in src of the hdf5 package):
> |
> | gcc -I/home/jbullard/projects/me/R-builder/lib64/R/include
> | -I/home/jbullard/scratch/hdf5_install/include -I/usr/local/include  
> -fpic
> | -g -O2 -std=gnu99 -c hdf5.c -o hdf5.o
> | gcc -shared -L/usr/local/lib64 -o hdf5.so hdf5.o
> | -L/home/jbullard/scratch/hdf5_install/lib -lhdf5 -lz -lm
> | -L/home/jbullard/projects/me/R-builder/lib64/R/lib -lR
> |
> | I then start R and get the following error:
> |
> | Error in dyn.load("hdf5.so") :
> |   unable to load shared library '/home/jbullard/scratch/hdf5/src/ 
> hdf5.so':
> |   libhdf5.so.6: cannot open shared object file: No such file or  
> directory
> |
> | The solution is set LD_LIBRARY_PATH to
> | /home/jbullard/scratch/hdf5_install/lib
>
> Of course. This is a dynamic library, and ld.so needs to find it.
>
> So if and when _you_ opt to depart from using standard locations,  
> _you_ need
> to tell ld.so where to look.
>
> Setting LD_LIBRARY_PATH is one of several ways to do so. Others  
> include
>
>  a) the /etc/ld.so.conf file,
>
>  b) (on newer linuxen) a file in the /etc/ld.so.conf.d/ directory
>
>  c) encode the path at link time using the rpath argument.
>
> Rcpp and RInside provide examples of the last approach.
>
> Hth, Dirk
>
> |
> | Then things work just fine. However, I dislike this option -- Is  
> there any
> | other way which things can be orchestrated completely at package  
> install
> | time? I don't want to go editing any files in the R installation;  
> more
> | like an option to append something to R's LD_LIBRARY_PATH w/in the
> | Makevars.in of the package being installed (in this case, hdf5)?
> |
> | Details of platform below. As always, thanks in advance.
> |
> | jim
> |
> | R version 2.11.0 Under development (unstable) (2010-02-08 r51110)
> | x86_64-unknown-linux-gnu
> |
> | locale:
> |  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> |  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> |  [5] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8
> |  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
> |  [9] LC_ADDRESS=C               LC_TELEPHONE=C
> | [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> |
> | attached base packages:
> | [1] stats     graphics  grDevices utils     datasets  methods   base
> |
> | HDF5 Version 1.8.4
> | R hdf5 package: hdf5_1.6.9.tar.gz
> | Linux mp-1246 2.6.31-19-generic #56-Ubuntu SMP Thu Jan 28 02:39:34  
> UTC
> | 2010 x86_64 GNU/Linux
> |
> | ______________________________________________
> | R-devel at r-project.org mailing list
> | https://stat.ethz.ch/mailman/listinfo/r-devel
>
> -- 
>  Registration is open for the 2nd International conference R /  
> Finance 2010
>  See http://www.RinFinance.com for details, and see you in Chicago  
> in April!


From p_connolly at slingshot.co.nz  Wed Mar  3 07:53:20 2010
From: p_connolly at slingshot.co.nz (Patrick Connolly)
Date: Wed, 3 Mar 2010 19:53:20 +1300
Subject: [Rd] Rmpi on CentOS (64bit)
Message-ID: <20100303065320.GA633@slingshot.co.nz>

I got Rmpi to compile with little difficulty, but had a tricky time
setting the LD_LIBRARY_PATH to use the OpenMPI libs.  I now get a
different error when I try to load Rmpi


> require(Rmpi)                  
Loading required package: Rmpi
librdmacm: couldn't read ABI version.
librdmacm: assuming: 4
libibverbs: Fatal: couldn't read uverbs ABI version.
CMA: unable to open /dev/infiniband/rdma_cm
--------------------------------------------------------------------------
WARNING: Failed to open "OpenIB-cma" [DAT_INTERNAL_ERROR:].
This may be a real error or it may be an invalid entry in the uDAPL
Registry which is contained in the dat.conf file. Contact your local
System Administrator to confirm the availability of the interfaces in
the dat.conf file.
--------------------------------------------------------------------------

I don't have this problem with Fedora 11 and I'd have thought there
would be little difference with CentOS (apart from the latter being 64
bit).

Is there something else that needs to be specified?


TIA

-- 
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.   
   ___    Patrick Connolly   
 {~._.~}                   Great minds discuss ideas    
 _( Y )_  	         Average minds discuss events 
(:_~*~_:)                  Small minds discuss people  
 (_)-(_)  	                      ..... Eleanor Roosevelt
	  
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.


From jnoble at vcu.edu  Tue Mar  2 22:35:08 2010
From: jnoble at vcu.edu (jnoble at vcu.edu)
Date: Tue,  2 Mar 2010 22:35:08 +0100 (CET)
Subject: [Rd] Installation problem with 2.10 and Solaris 10 (PR#14227)
Message-ID: <20100302213508.93193282EF29@mail.pubhealth.ku.dk>

Full_Name: John Noble
Version: 2.10
OS: Solaris 10 SPARC
Submission from: (NULL) (128.172.190.27)



  The make of Recommended fails.  All sections of Make work up to this point and
the compiled version of R appears to be correct.  Only when adding the
recommended modules does the problem appear.  The best I can figure the problem
appears to be related to the fact that gzip will not decompress linked files
without the "-f" option.  Sample output follows:

# make
make[1]: Entering directory `/home/jnoble/R-2.10.1/src/library/Recommended'
begin installing recommended package boot
ERROR: cannot extract package from 'boot.tgz'
make[1]: *** [boot.ts] Error 1
make[1]: Leaving directory `/home/jnoble/R-2.10.1/src/library/Recommended'
make: *** [recommended-packages] Error 2

  The boot.ts.out file contains:

# more boot.ts.out 
  ERROR: cannot extract package from 'boot.tgz'

  If I try to run the command that the Makefile appears to be running
by hand I get the following:

# ../../../bin/R CMD INSTALL -l "../../../library" boot.tgz
  ERROR: cannot extract package from 'boot.tgz'

 Oddly, the following happens with the latest gzip:

 gzip -d boot.tgz
 gzip: boot.tgz: Number of symbolic links encountered during path name traversal
 exceeds MAXSYMLINKS

  This can be corrected with the "-f" option but I can't pass that into "R".

  Thanks, john noble
  VCU 
  jnoble at vcu.edu

  Solaris 10, SPARC


From tbrick at virginia.edu  Tue Mar  2 17:45:10 2010
From: tbrick at virginia.edu (tbrick at virginia.edu)
Date: Tue,  2 Mar 2010 17:45:10 +0100 (CET)
Subject: [Rd] libgfortran misplaced in Mac OS X R install (PR#14226)
Message-ID: <20100302164510.DAE6F282EFE9@mail.pubhealth.ku.dk>

Full_Name: Timothy Brick
Version: 2.10
OS: Mac OS X (seen on both 10.6 and 10.5)
Submission from: (NULL) (63.255.24.5)


When using install.packages in R on Mac OS X, packages that require gfortran
throws an error (Example below from installation of OpenMx package):

Loading required package: OpenMx
Error in dyn.load(file, DLLpath = DLLpath, ...) :
unable to load shared library
'/Library/Frameworks/R.framework/Resources/library/OpenMx/libs/i386/OpenMx.so':
dlopen(/Library/Frameworks/R.framework/Resources/library/OpenMx/libs/i386/OpenMx.so,
6): Library not loaded: /usr/local/lib/libgfortran.2.dylib
Referenced from: /Library/Frameworks/R.framework/Resources/library/OpenMx/libs/i386/OpenMx.so
Reason: image not found

libgfortran.2.dylib does exist, but in
/Library/Frameworks/R.framework/Versions/2.10/Resouces/lib/libgfortran.2.dylib
(or /2.9/, depending on version installed).

A workaround at present involves creating a symbolic link from the above file to
/usr/local/lib/libgfortran.2.dylib, however this requires sudo access and is
confusing for novice users.

There is more discussion of this bug as it relates to OpenMx at:
http://openmx.psyc.virginia.edu/thread/316

Posts on other forums indicate a similar issue with other packages including
vegan and lme4:
http://r-forge.r-project.org/forum/forum.php?thread_id=728&forum_id=194
https://stat.ethz.ch/pipermail/r-sig-mac/2009-May/006210.html


From p_connolly at slingshot.co.nz  Tue Mar  2 20:15:56 2010
From: p_connolly at slingshot.co.nz (Patrick Connolly)
Date: Wed, 3 Mar 2010 08:15:56 +1300
Subject: [Rd] Rmpi on CentOS
Message-ID: <20100302191556.GB4671@slingshot.co.nz>


After setting the LD_LIBRARY_PATH to use the OpenMPI libs, I now get a
different error when I try to load Rmpi


> require(Rmpi)                                                                                           
Loading required package: Rmpi
librdmacm: couldn't read ABI version.
librdmacm: assuming: 4
libibverbs: Fatal: couldn't read uverbs ABI version.
CMA: unable to open /dev/infiniband/rdma_cm
--------------------------------------------------------------------------
WARNING: Failed to open "OpenIB-cma" [DAT_INTERNAL_ERROR:].
This may be a real error or it may be an invalid entry in the uDAPL
Registry which is contained in the dat.conf file. Contact your local
System Administrator to confirm the availability of the interfaces in
the dat.conf file.
--------------------------------------------------------------------------

I don't have this problem with Fedora 11 and I'd have thought there
would be little difference with CentOS (64 bit).  

I thought it might be because there aren't librdmacm or libibverbs
rpms installed, but that's not the case.  There are no -devel rpms
to go with them, but I doubt that's the problem since they're not on
the Fedora installation either (IIRC).


Is there something else that needs to be specified?

TIA

-- 
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.   
   ___    Patrick Connolly   
 {~._.~}                   Great minds discuss ideas    
 _( Y )_  	         Average minds discuss events 
(:_~*~_:)                  Small minds discuss people  
 (_)-(_)  	                      ..... Eleanor Roosevelt
	  
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.


From ripley at stats.ox.ac.uk  Wed Mar  3 09:40:58 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 3 Mar 2010 08:40:58 +0000 (GMT)
Subject: [Rd] Installation problem with 2.10 and Solaris 10 (PR#14227)
In-Reply-To: <20100302213508.93193282EF29@mail.pubhealth.ku.dk>
References: <20100302213508.93193282EF29@mail.pubhealth.ku.dk>
Message-ID: <alpine.LFD.2.00.1003030806000.11176@gannet.stats.ox.ac.uk>

On Tue, 2 Mar 2010, jnoble at vcu.edu wrote:

> Full_Name: John Noble
> Version: 2.10

There is no such version of R (see the posting guide for the need for 
accurate reporting of version numbers).  In 2.10.1, the unpacking is 
usually done by either by

tar xf

or

gzip -dc | tar xf

so the behaviour of gzip -d without -c is not relevant.

As R 2.10.0 and 2.10.1 have been built on many Solaris 10 systems, by 
far the most likely issue is a configuration problem on yours.

One possible workaround (not needed on our Solaris boxes) is to set 
the environment variable TAR to a GNU version of tar that supports 
unpacking compressed archives directly: R will then call that tar.

> OS: Solaris 10 SPARC
> Submission from: (NULL) (128.172.190.27)
>
>
>
>  The make of Recommended fails.  All sections of Make work up to 
> this point and the compiled version of R appears to be correct. 
> Only when adding the recommended modules does the problem appear.

Do you mean the 'recommended packages': there are 'modules' and that 
is not what is being installed at this stage?

> The best I can figure the problem appears to be related to the fact 
> that gzip will not decompress linked files without the "-f" option.

Not the whole story ... but what version of gzip is this?

> Sample output follows:
>
> # make
> make[1]: Entering directory `/home/jnoble/R-2.10.1/src/library/Recommended'
> begin installing recommended package boot
> ERROR: cannot extract package from 'boot.tgz'
> make[1]: *** [boot.ts] Error 1
> make[1]: Leaving directory `/home/jnoble/R-2.10.1/src/library/Recommended'
> make: *** [recommended-packages] Error 2
>
>  The boot.ts.out file contains:
>
> # more boot.ts.out
>  ERROR: cannot extract package from 'boot.tgz'
>
>  If I try to run the command that the Makefile appears to be running
> by hand I get the following:
>
> # ../../../bin/R CMD INSTALL -l "../../../library" boot.tgz
>  ERROR: cannot extract package from 'boot.tgz'
>
> Oddly, the following happens with the latest gzip:
>
> gzip -d boot.tgz
> gzip: boot.tgz: Number of symbolic links encountered during path name traversal
> exceeds MAXSYMLINKS

That is as expected, but where did you get the idea that gzip -d is 
used in that fashion?  The most likely command used,

gzip -dc boot.tgz | tar xf -

works for e.g. gzip 1.3.5 (which is what our Solaris 10 system has in 
/usr/bin) and 1.3.12.

>  This can be corrected with the "-f" option but I can't pass that into "R".

Actually, you can: the gzip command used is set by R_GZIPCMD.  But 
you do not want to here.

>
>  Thanks, john noble
>  VCU
>  jnoble at vcu.edu
>
>  Solaris 10, SPARC
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Wed Mar  3 09:42:00 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 3 Mar 2010 08:42:00 +0000 (GMT)
Subject: [Rd] Rmpi on CentOS (64bit)
In-Reply-To: <20100303065320.GA633@slingshot.co.nz>
References: <20100303065320.GA633@slingshot.co.nz>
Message-ID: <alpine.LFD.2.00.1003030732430.11176@gannet.stats.ox.ac.uk>

There are many different versions of OpenMPI about.  It looks like you 
have one that is set up for specialized hardware.  Either this is the 
wrong version or a configuration error, and you will need to talk to 
your 'local System Administrator'.

Incidentally, you should not have to set LD_LIBRARY_PATH, but I 
frequently have had to add configuration files in /etc/ld.so.conf.d, 
including for openmpi on Fedora 12. On Fedora 10 (but not 12) MPI was 
under the /etc/alternatives mechanism, and had other problems.  I 
currently have

gannet% cat /etc/ld.so.conf.d/openmpi-x86_64.conf
/usr/lib64/openmpi/lib

on F12.

On Wed, 3 Mar 2010, Patrick Connolly wrote:

> I got Rmpi to compile with little difficulty, but had a tricky time
> setting the LD_LIBRARY_PATH to use the OpenMPI libs.  I now get a
> different error when I try to load Rmpi
>
>
>> require(Rmpi)
> Loading required package: Rmpi
> librdmacm: couldn't read ABI version.
> librdmacm: assuming: 4
> libibverbs: Fatal: couldn't read uverbs ABI version.
> CMA: unable to open /dev/infiniband/rdma_cm
> --------------------------------------------------------------------------
> WARNING: Failed to open "OpenIB-cma" [DAT_INTERNAL_ERROR:].
> This may be a real error or it may be an invalid entry in the uDAPL
> Registry which is contained in the dat.conf file. Contact your local
> System Administrator to confirm the availability of the interfaces in
> the dat.conf file.
> --------------------------------------------------------------------------
>
> I don't have this problem with Fedora 11 and I'd have thought there
> would be little difference with CentOS (apart from the latter being 64
> bit).
>
> Is there something else that needs to be specified?
>
>
> TIA
>
> -- 
> ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.
>   ___    Patrick Connolly
> {~._.~}                   Great minds discuss ideas
> _( Y )_  	         Average minds discuss events
> (:_~*~_:)                  Small minds discuss people
> (_)-(_)  	                      ..... Eleanor Roosevelt
>
> ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From mequitomz at yahoo.com.br  Wed Mar  3 14:44:11 2010
From: mequitomz at yahoo.com.br (Arlindo Meque)
Date: Wed, 3 Mar 2010 05:44:11 -0800 (PST)
Subject: [Rd] Displaying political boundaries in R
Message-ID: <554001.22774.qm@web52302.mail.re2.yahoo.com>

?
Dearall,? 
?
?
I am new in the R environment. How can I enable political boundaries in R?
I want plot a variable (e.g., temperature) only for Mozambique.
?
?
Help is needed 



      _______________________________________________________________________________[[elided Yahoo spam]]
//br.maisbuscados.yahoo.com


From simon.urbanek at r-project.org  Wed Mar  3 16:32:52 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 3 Mar 2010 10:32:52 -0500
Subject: [Rd] libgfortran misplaced in Mac OS X R install (PR#14226)
In-Reply-To: <20100302164510.DAE6F282EFE9@mail.pubhealth.ku.dk>
References: <20100302164510.DAE6F282EFE9@mail.pubhealth.ku.dk>
Message-ID: <1E04E16A-A257-4186-873A-DAF05BED061B@r-project.org>

This is not an R bug so please don't abuse R-bugs. It is likely a bug  
in the way OpenMx binaries are distributed by someone (you didn't even  
say where you got them from) - OpenMx is not even on CRAN so take that  
to whoever gave you the binaries. On CRAN we use the correct paths.

Cheers,
Simon


On Mar 2, 2010, at 11:45 , tbrick at virginia.edu wrote:

> Full_Name: Timothy Brick
> Version: 2.10
> OS: Mac OS X (seen on both 10.6 and 10.5)
> Submission from: (NULL) (63.255.24.5)
>
>
> When using install.packages in R on Mac OS X, packages that require  
> gfortran
> throws an error (Example below from installation of OpenMx package):
>
> Loading required package: OpenMx
> Error in dyn.load(file, DLLpath = DLLpath, ...) :
> unable to load shared library
> '/Library/Frameworks/R.framework/Resources/library/OpenMx/libs/i386/ 
> OpenMx.so':
> dlopen(/Library/Frameworks/R.framework/Resources/library/OpenMx/libs/ 
> i386/OpenMx.so,
> 6): Library not loaded: /usr/local/lib/libgfortran.2.dylib
> Referenced from: /Library/Frameworks/R.framework/Resources/library/ 
> OpenMx/libs/i386/OpenMx.so
> Reason: image not found
>
> libgfortran.2.dylib does exist, but in
> /Library/Frameworks/R.framework/Versions/2.10/Resouces/lib/ 
> libgfortran.2.dylib
> (or /2.9/, depending on version installed).
>
> A workaround at present involves creating a symbolic link from the  
> above file to
> /usr/local/lib/libgfortran.2.dylib, however this requires sudo  
> access and is
> confusing for novice users.
>
> There is more discussion of this bug as it relates to OpenMx at:
> http://openmx.psyc.virginia.edu/thread/316
>
> Posts on other forums indicate a similar issue with other packages  
> including
> vegan and lme4:
> http://r-forge.r-project.org/forum/forum.php? 
> thread_id=728&forum_id=194
> https://stat.ethz.ch/pipermail/r-sig-mac/2009-May/006210.html
>

Those are very old posts and those were temporary issues in the CRAN  
build system that have been promptly resolved.


From bluesky315 at gmail.com  Wed Mar  3 17:29:15 2010
From: bluesky315 at gmail.com (blue sky)
Date: Wed, 3 Mar 2010 10:29:15 -0600
Subject: [Rd] What is pairlist in R-ints.pdf?
Message-ID: <48413fa11003030829t42b53499je20df27ec41d2e05@mail.gmail.com>

R-ints.pdf mentions pairlist with the reference to mit-scheme.
However, it is not clear to me what 'pairlist' exactly refers to, as I
don't find the definition for it. Does a 'pairlist' in R equivalent to
a pair or a list (which is essentially a pair whose cdr is a list) in
mit-scheme?


From hb at stat.berkeley.edu  Wed Mar  3 17:42:24 2010
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Wed, 3 Mar 2010 17:42:24 +0100
Subject: [Rd] R logo as SVG ?
In-Reply-To: <20100302164627.GA5157@grex.cs.uni-magdeburg.de>
References: <4B80313D.1000909@biostat.ku.dk> <4B82753B.2090006@biostat.ku.dk>
	<20100227023844.GA1272@trex.cs.uni-magdeburg.de>
	<4B88E35F.3010805@biostat.ku.dk>
	<20100227185533.GA3602@trex.cs.uni-magdeburg.de>
	<de4e29f51002271123s2ae805cex8b6d71d98ba62d8f@mail.gmail.com>
	<20100301180915.GA11344@grex.cs.uni-magdeburg.de>
	<4B8C0BC9.3050903@biostat.ku.dk> <4B8C2EA0.5050901@biostat.ku.dk>
	<20100302164627.GA5157@grex.cs.uni-magdeburg.de>
Message-ID: <59d7961d1003030842h86e3808h77d3875d040a8ac4@mail.gmail.com>

My Wednesday procrastination:

There's quite some number of decimals in the SVG and some whitespace,
so some dummy trimming gives:

x <- readLines("http://developer.r-project.org/Logo/Rlogo-1.svg");
nx <- sum(nchar(x))+length(x);

for (kk in 2:0) {
  # Keep only K decimals
  pattern <- sprintf("([0-9]+)\\.([0-9]{%d})([0-9]*)", kk);
  y <- gsub(pattern, "\\1.\\2", x);
  # Drop trailing zeros
  y <- gsub("([0-9]+)\\.([1-9]+)(0+)([^0])", "\\1.\\2\\4", y);
  # Drop trailing periods
  y <- gsub("([0-9]+)\\.([, \"])", "\\1\\2", y);
  # Trim white space
  y <- gsub("^[ ]+", "", y);
  y <- gsub("[ ]+\\/>", "/>", y);

  # Keep first line as is
  y[1] <- x[1];
  # Write to file
  pathname <- sprintf("Rlogo-1,trimmed,%d.svg", kk);
  bfr <- paste(y, collapse="\n");
  bfr <- charToRaw(bfr);
  ny <- length(bfr);
  writeBin(bfr, con=pathname);
  cat(sprintf("%d bytes (%.1f%%)\n", ny, 100*ny/nx));
} # for (kk ...)

gives

36694 bytes (74.3%)
32766 bytes (66.3%)
23981 bytes (48.5%)

Not easy to see any differences between these and the original one.

/Henrik

On Tue, Mar 2, 2010 at 5:46 PM, Jens Elkner <jel+r at cs.uni-magdeburg.de> wrote:
> On Mon, Mar 01, 2010 at 10:16:16PM +0100, Peter Dalgaard wrote:
>> >Jens Elkner wrote:
> ...
>> >>BTW: screenshots I made from my desktop are available via
>> >>http://iws.cs.uni-magdeburg.de/~elkner/r/
> ...
>> >Looks quite nice. I later realized that it would be a much better idea
>> >to start by tracing the highest resolution bitmap from
>> >
>> >http://developer.r-project.org/Logo
>> >
>> >I now have a version that is only 48 K. It still needs a little touching
>> >up to get a transparent background without destroying the highlighted
>> >regions. I'm attaching it here, but it might not make it to r-devel.
>
> Good work!!!
>
> Still looks ok for me (so less is more ;-)). Added screenshots to
> the URL above (new 49K based ones have a '2' at the end). For your
> convinience/easier comparision I tied them together:
> http://iws.cs.uni-magdeburg.de/~elkner/r/menu.html
> http://iws.cs.uni-magdeburg.de/~elkner/r/nautilus.html
>
> Regards,
> jel.
> --
> Otto-von-Guericke University ? ? http://www.cs.uni-magdeburg.de/
> Department of Computer Science ? Geb. 29 R 027, Universitaetsplatz 2
> 39106 Magdeburg, Germany ? ? ? ? Tel: +49 391 67 12768
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From simon.urbanek at r-project.org  Wed Mar  3 17:49:50 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 3 Mar 2010 11:49:50 -0500
Subject: [Rd] What is pairlist in R-ints.pdf?
In-Reply-To: <48413fa11003030829t42b53499je20df27ec41d2e05@mail.gmail.com>
References: <48413fa11003030829t42b53499je20df27ec41d2e05@mail.gmail.com>
Message-ID: <310330E0-C213-4A07-9791-151C3BB4DBC9@r-project.org>


On Mar 3, 2010, at 11:29 , blue sky wrote:

> R-ints.pdf mentions pairlist with the reference to mit-scheme.
> However, it is not clear to me what 'pairlist' exactly refers to, as  
> I don't find the definition for it. Does a 'pairlist' in R  
> equivalent to a pair or a list (which is essentially a pair whose  
> cdr is a list) in mit-scheme?
>

pairlist is short for "dotted pair list" (see ?pairlist) which is a  
syntax for specifying linked lists as ( CAR . CDR ). Since the term  
"list" has a different meaning in R, using just "list" would be  
ambiguous (in the current R lists are implemented as generic vectors,  
not as linked lists).

Cheers,
Simon


From p_connolly at slingshot.co.nz  Wed Mar  3 20:15:29 2010
From: p_connolly at slingshot.co.nz (Patrick Connolly)
Date: Thu, 4 Mar 2010 08:15:29 +1300
Subject: [Rd] Rmpi on CentOS (64bit)
In-Reply-To: <alpine.LFD.2.00.1003030732430.11176@gannet.stats.ox.ac.uk>
References: <20100303065320.GA633@slingshot.co.nz>
	<alpine.LFD.2.00.1003030732430.11176@gannet.stats.ox.ac.uk>
Message-ID: <20100303191529.GB633@slingshot.co.nz>

On Wed, 03-Mar-2010 at 08:42AM +0000, Prof Brian Ripley wrote:

> There are many different versions of OpenMPI about.  It looks like
> you have one that is set up for specialized hardware.  Either this
> is the wrong version or a configuration error, and you will need to
> talk to your 'local System Administrator'.

He knows less about it (MPI, at least) than I do.  Perhaps this is
'specialized hardware' in that it's a dual quad-core processor machine
-- but I'd have thought that's not particularly special nowadays.

I notice that my Fedora installation has no dat.conf file.  Perhaps
it pertains to something special on the CentOS machine.  I can't
check the CentOS machine right now, but at one time, I did find the
rpm that is associated with the dat.conf file.  Fedora seems not to
need that one.

>
> Incidentally, you should not have to set LD_LIBRARY_PATH, but I  

It might not be elegant, but at least it got over that problem.  Is
there any possibility that doing it so inelegantly has a bearing on
the issues I have now?

> frequently have had to add configuration files in /etc/ld.so.conf.d,  
> including for openmpi on Fedora 12. On Fedora 10 (but not 12) MPI was  

Fedora 11 would appear to be like F12.  I'll check later if CentOS is
more like the way F10 was.

> under the /etc/alternatives mechanism, and had other problems.  I  
> currently have
>
> gannet% cat /etc/ld.so.conf.d/openmpi-x86_64.conf
> /usr/lib64/openmpi/lib

Is that to say I could make a similar file to avoid setting
LD_LIBRARY_PATH?

Thanks for the help.



>
> on F12.
>
> On Wed, 3 Mar 2010, Patrick Connolly wrote:
>
>> I got Rmpi to compile with little difficulty, but had a tricky time
>> setting the LD_LIBRARY_PATH to use the OpenMPI libs.  I now get a
>> different error when I try to load Rmpi
>>
>>
>>> require(Rmpi)
>> Loading required package: Rmpi
>> librdmacm: couldn't read ABI version.
>> librdmacm: assuming: 4
>> libibverbs: Fatal: couldn't read uverbs ABI version.
>> CMA: unable to open /dev/infiniband/rdma_cm
>> --------------------------------------------------------------------------
>> WARNING: Failed to open "OpenIB-cma" [DAT_INTERNAL_ERROR:].
>> This may be a real error or it may be an invalid entry in the uDAPL
>> Registry which is contained in the dat.conf file. Contact your local
>> System Administrator to confirm the availability of the interfaces in
>> the dat.conf file.
>> --------------------------------------------------------------------------
>>
>> I don't have this problem with Fedora 11 and I'd have thought there
>> would be little difference with CentOS (apart from the latter being 64
>> bit).
>>
>> Is there something else that needs to be specified?
>>
>>
>> TIA
>>
>> -- 
>> ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.
>>   ___    Patrick Connolly
>> {~._.~}                   Great minds discuss ideas
>> _( Y )_  	         Average minds discuss events
>> (:_~*~_:)                  Small minds discuss people
>> (_)-(_)  	                      ..... Eleanor Roosevelt
>>
>> ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-- 
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.   
   ___    Patrick Connolly   
 {~._.~}                   Great minds discuss ideas    
 _( Y )_  	         Average minds discuss events 
(:_~*~_:)                  Small minds discuss people  
 (_)-(_)  	                      ..... Eleanor Roosevelt
	  
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.


From quantumelixir at gmail.com  Wed Mar  3 20:17:22 2010
From: quantumelixir at gmail.com (Chidambaram Annamalai)
Date: Thu, 4 Mar 2010 00:47:22 +0530
Subject: [Rd] Mentor for GSOC '10: Symbolic Regression in R
Message-ID: <7021740b1003031117w59cea52ds15567665d38cf91c@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100304/d2ebe146/attachment.pl>

From ripley at stats.ox.ac.uk  Wed Mar  3 20:24:22 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 3 Mar 2010 19:24:22 +0000 (GMT)
Subject: [Rd] Rmpi on CentOS (64bit)
In-Reply-To: <20100303191529.GB633@slingshot.co.nz>
References: <20100303065320.GA633@slingshot.co.nz>
	<alpine.LFD.2.00.1003030732430.11176@gannet.stats.ox.ac.uk>
	<20100303191529.GB633@slingshot.co.nz>
Message-ID: <alpine.LFD.2.00.1003031921550.29730@gannet.stats.ox.ac.uk>

On Thu, 4 Mar 2010, Patrick Connolly wrote:

> On Wed, 03-Mar-2010 at 08:42AM +0000, Prof Brian Ripley wrote:
>
>> There are many different versions of OpenMPI about.  It looks like
>> you have one that is set up for specialized hardware.  Either this
>> is the wrong version or a configuration error, and you will need to
>> talk to your 'local System Administrator'.
>
> He knows less about it (MPI, at least) than I do.  Perhaps this is
> 'specialized hardware' in that it's a dual quad-core processor machine
> -- but I'd have thought that's not particularly special nowadays.

No, it is high-speed interconnects, used in high-performance clusters.

> I notice that my Fedora installation has no dat.conf file.  Perhaps
> it pertains to something special on the CentOS machine.  I can't
> check the CentOS machine right now, but at one time, I did find the
> rpm that is associated with the dat.conf file.  Fedora seems not to
> need that one.

It does if you have that sort of hardware (and we do on one of the 
clusters we use).

>> Incidentally, you should not have to set LD_LIBRARY_PATH, but I
>
> It might not be elegant, but at least it got over that problem.  Is
> there any possibility that doing it so inelegantly has a bearing on
> the issues I have now?

Unlikely, unless you got the wrong libmpi.

>> frequently have had to add configuration files in /etc/ld.so.conf.d,
>> including for openmpi on Fedora 12. On Fedora 10 (but not 12) MPI was
>
> Fedora 11 would appear to be like F12.  I'll check later if CentOS is
> more like the way F10 was.
>
>> under the /etc/alternatives mechanism, and had other problems.  I
>> currently have
>>
>> gannet% cat /etc/ld.so.conf.d/openmpi-x86_64.conf
>> /usr/lib64/openmpi/lib
>
> Is that to say I could make a similar file to avoid setting
> LD_LIBRARY_PATH?

Indeed, that is the recommended mechanism.

> Thanks for the help.
>
>
>
>>
>> on F12.
>>
>> On Wed, 3 Mar 2010, Patrick Connolly wrote:
>>
>>> I got Rmpi to compile with little difficulty, but had a tricky time
>>> setting the LD_LIBRARY_PATH to use the OpenMPI libs.  I now get a
>>> different error when I try to load Rmpi
>>>
>>>
>>>> require(Rmpi)
>>> Loading required package: Rmpi
>>> librdmacm: couldn't read ABI version.
>>> librdmacm: assuming: 4
>>> libibverbs: Fatal: couldn't read uverbs ABI version.
>>> CMA: unable to open /dev/infiniband/rdma_cm
>>> --------------------------------------------------------------------------
>>> WARNING: Failed to open "OpenIB-cma" [DAT_INTERNAL_ERROR:].
>>> This may be a real error or it may be an invalid entry in the uDAPL
>>> Registry which is contained in the dat.conf file. Contact your local
>>> System Administrator to confirm the availability of the interfaces in
>>> the dat.conf file.
>>> --------------------------------------------------------------------------
>>>
>>> I don't have this problem with Fedora 11 and I'd have thought there
>>> would be little difference with CentOS (apart from the latter being 64
>>> bit).
>>>
>>> Is there something else that needs to be specified?
>>>
>>>
>>> TIA
>>>
>>> --
>>> ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.
>>>   ___    Patrick Connolly
>>> {~._.~}                   Great minds discuss ideas
>>> _( Y )_  	         Average minds discuss events
>>> (:_~*~_:)                  Small minds discuss people
>>> (_)-(_)  	                      ..... Eleanor Roosevelt
>>>
>>> ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>
>> --
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford,             Tel:  +44 1865 272861 (self)
>> 1 South Parks Road,                     +44 1865 272866 (PA)
>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -- 
> ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.
>   ___    Patrick Connolly
> {~._.~}                   Great minds discuss ideas
> _( Y )_  	         Average minds discuss events
> (:_~*~_:)                  Small minds discuss people
> (_)-(_)  	                      ..... Eleanor Roosevelt
>
> ~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From marc_schwartz at me.com  Wed Mar  3 20:46:34 2010
From: marc_schwartz at me.com (Marc Schwartz)
Date: Wed, 03 Mar 2010 13:46:34 -0600
Subject: [Rd] Rmpi on CentOS (64bit)
In-Reply-To: <alpine.LFD.2.00.1003031921550.29730@gannet.stats.ox.ac.uk>
References: <20100303065320.GA633@slingshot.co.nz>
	<alpine.LFD.2.00.1003030732430.11176@gannet.stats.ox.ac.uk>
	<20100303191529.GB633@slingshot.co.nz>
	<alpine.LFD.2.00.1003031921550.29730@gannet.stats.ox.ac.uk>
Message-ID: <37BEE6C2-9F37-48E8-BCDC-76938913AC73@me.com>

On Mar 3, 2010, at 1:24 PM, Prof Brian Ripley wrote:

> On Thu, 4 Mar 2010, Patrick Connolly wrote:
> 
>> On Wed, 03-Mar-2010 at 08:42AM +0000, Prof Brian Ripley wrote:
>> 
>>> There are many different versions of OpenMPI about.  It looks like
>>> you have one that is set up for specialized hardware.  Either this
>>> is the wrong version or a configuration error, and you will need to
>>> talk to your 'local System Administrator'.
>> 
>> He knows less about it (MPI, at least) than I do.  Perhaps this is
>> 'specialized hardware' in that it's a dual quad-core processor machine
>> -- but I'd have thought that's not particularly special nowadays.
> 
> No, it is high-speed interconnects, used in high-performance clusters.
> 
>> I notice that my Fedora installation has no dat.conf file.  Perhaps
>> it pertains to something special on the CentOS machine.  I can't
>> check the CentOS machine right now, but at one time, I did find the
>> rpm that is associated with the dat.conf file.  Fedora seems not to
>> need that one.
> 
> It does if you have that sort of hardware (and we do on one of the clusters we use).
> 
>>> Incidentally, you should not have to set LD_LIBRARY_PATH, but I
>> 
>> It might not be elegant, but at least it got over that problem.  Is
>> there any possibility that doing it so inelegantly has a bearing on
>> the issues I have now?
> 
> Unlikely, unless you got the wrong libmpi.
> 
>>> frequently have had to add configuration files in /etc/ld.so.conf.d,
>>> including for openmpi on Fedora 12. On Fedora 10 (but not 12) MPI was
>> 
>> Fedora 11 would appear to be like F12.  I'll check later if CentOS is
>> more like the way F10 was.

<snip>

Patrick, just as an FYI, I did not see which variant of CentOS you are using, but:

CentOS 4, which is based upon RHEL 4, is in turn based upon Fedora Core 3 (2004).

CentOS 5, which is based upon RHEL 5, is in turn based upon Fedora Core 6 (2006).

So to reinforce, there is a substantial and intentional lag between RHEL/CentOS and Fedora. Recall that RHEL and CentOS are targeted for stable server use, whereas Fedora is a bleeding edge distro.

HTH,

Marc Schwartz


From edd at debian.org  Wed Mar  3 20:57:10 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 3 Mar 2010 13:57:10 -0600
Subject: [Rd] Rmpi on CentOS (64bit)
In-Reply-To: <alpine.LFD.2.00.1003031921550.29730@gannet.stats.ox.ac.uk>
References: <20100303065320.GA633@slingshot.co.nz>
	<alpine.LFD.2.00.1003030732430.11176@gannet.stats.ox.ac.uk>
	<20100303191529.GB633@slingshot.co.nz>
	<alpine.LFD.2.00.1003031921550.29730@gannet.stats.ox.ac.uk>
Message-ID: <19342.48918.686531.962037@ron.nulle.part>


On 3 March 2010 at 19:24, Prof Brian Ripley wrote:
| On Thu, 4 Mar 2010, Patrick Connolly wrote:
| 
| > On Wed, 03-Mar-2010 at 08:42AM +0000, Prof Brian Ripley wrote:
| >
| >> There are many different versions of OpenMPI about.  It looks like
| >> you have one that is set up for specialized hardware.  Either this
| >> is the wrong version or a configuration error, and you will need to
| >> talk to your 'local System Administrator'.
| >
| > He knows less about it (MPI, at least) than I do.  Perhaps this is
| > 'specialized hardware' in that it's a dual quad-core processor machine
| > -- but I'd have thought that's not particularly special nowadays.
| 
| No, it is high-speed interconnects, used in high-performance clusters.

A similar issue once arose on Debian as we built Open MPI with the IB libs
even though most people don't have suitable Inifiniband hardware. In our case
that lead to a noisy warning; upstream later suppressed the warning given
certain conditions.  

You could try to suppress the probe for IB which we did (in the older 1.2.*
series of OpenMPI) via

   # Disable the use of InfiniBand
   #   btl = ^openib
   btl = ^openib

in  /etc/openmpi/openmpi-mca-params.conf

Hth, Dirk

-- 
  Registration is open for the 2nd International conference R / Finance 2010
  See http://www.RinFinance.com for details, and see you in Chicago in April!


From bolker at ufl.edu  Wed Mar  3 21:40:02 2010
From: bolker at ufl.edu (Ben Bolker)
Date: Wed, 3 Mar 2010 20:40:02 +0000 (UTC)
Subject: [Rd] Displaying political boundaries in R
References: <554001.22774.qm@web52302.mail.re2.yahoo.com>
Message-ID: <loom.20100303T213708-929@post.gmane.org>

Arlindo Meque <mequitomz <at> yahoo.com.br> writes:

> 
> ?
> Dearall,? 
> ?
> ?
> I am new in the R environment. How can I enable political boundaries in R?
> I want plot a variable (e.g., temperature) only for Mozambique.


  Dear Arlindo,

 you need to
(1) ask this question at r-help at r-project.org instead of r-devel:
this mailing list is for technical/development questions, not for
general help.

(2) read the posting guide <www.r-project.org/posting-guide.html>
and be much more specific about stating your question.

(3) it will improve your chances of getting a helpful answer
if you indicate that you have 'done your homework' by searching
in various places on the web, or in books, for the answer to
your question, before posting to the list.

  cheers
    Ben Bolker


From p_connolly at slingshot.co.nz  Thu Mar  4 08:24:02 2010
From: p_connolly at slingshot.co.nz (Patrick Connolly)
Date: Thu, 4 Mar 2010 20:24:02 +1300
Subject: [Rd] Rmpi on CentOS (64bit)
In-Reply-To: <37BEE6C2-9F37-48E8-BCDC-76938913AC73@me.com>
References: <20100303065320.GA633@slingshot.co.nz>
	<alpine.LFD.2.00.1003030732430.11176@gannet.stats.ox.ac.uk>
	<20100303191529.GB633@slingshot.co.nz>
	<alpine.LFD.2.00.1003031921550.29730@gannet.stats.ox.ac.uk>
	<37BEE6C2-9F37-48E8-BCDC-76938913AC73@me.com>
Message-ID: <20100304072402.GC633@slingshot.co.nz>

On Wed, 03-Mar-2010 at 01:46PM -0600, Marc Schwartz wrote:


|> Patrick, just as an FYI, I did not see which variant of CentOS you
|> are using, but:

Apologies.  I didn't mention it's 5.4

|> CentOS 4, which is based upon RHEL 4, is in turn based upon Fedora
|> Core 3 (2004).

|> CentOS 5, which is based upon RHEL 5, is in turn based upon Fedora
|> Core 6 (2006).

|> So to reinforce, there is a substantial and intentional lag between
|> RHEL/CentOS and Fedora. Recall that RHEL and CentOS are targeted
|> for stable server use, whereas Fedora is a bleeding edge distro.

Yes.  For that reason, I wished to get Rmpi working on CentOS.  I use
Fedora 11 at home and I'm a bit put off by the 300-500 Mb of updates
most weeks.  It's nice using the new stuff, but those updates
periodically screw up what had been working well.  I wouldn't want
that on a production machine.  Looks as though I'll have to do so
anyway.  My Linux skills aren't up to sorting out this CentOS lot, and
I should at least get it started: it's likely there's not much
difference between F11 and F12 for this task.

This could well be a case where Debian would be the easiest way to go,
but I couldn't convince the IT people to go down such a new track.
Ours is very much an rpm site.  In any case, my only Debian-type
experience is with Mepis (where I got Rmpi working in 20 minutes, but
I don't think that makes me a Debian pro).

Thanks for the hints.

-- 
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.   
   ___    Patrick Connolly   
 {~._.~}                   Great minds discuss ideas    
 _( Y )_  	         Average minds discuss events 
(:_~*~_:)                  Small minds discuss people  
 (_)-(_)  	                      ..... Eleanor Roosevelt
	  
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.


From romain at r-enthusiasts.com  Thu Mar  4 08:48:23 2010
From: romain at r-enthusiasts.com (Romain Francois)
Date: Thu, 04 Mar 2010 08:48:23 +0100
Subject: [Rd] Mentor for GSOC '10: Symbolic Regression in R
In-Reply-To: <7021740b1003031117w59cea52ds15567665d38cf91c@mail.gmail.com>
References: <7021740b1003031117w59cea52ds15567665d38cf91c@mail.gmail.com>
Message-ID: <4B8F65C7.1020705@r-enthusiasts.com>

Hello,

I can't offer to mentor because I don't know anything about symbolic 
regression.

However, since you have R/C++ as the skills requirements, I would 
strongly recommend that you use Rcpp as an enabling technology, so that 
you can be productive on C++/symbolic regressions as opposed to manage R 
API quirks.

Also, you can count on some implicit support through Rcpp mailing list.
https://lists.r-forge.r-project.org/cgi-bin/mailman/listinfo/rcpp-devel

Good luck finding a mentor, this sounds like a cool project.

Romain

On 03/03/2010 08:17 PM, Chidambaram Annamalai wrote:
>
> Hi all,
>
> I am looking to extend the regression and data analysis capabilities of R
> through Symbolic Regression that can potentially find implicit equation
> relationships in the input data. You can find my project proposal at:
> http://rwiki.sciviews.org/doku.php?id=developers:projects:gsoc2010:syrfr
>
> I am looking for a mentor to guide me through the summer on the project
> under the Google Summer Of Code program (GSOC 2010) with relevant experience
> in Symbolic Regression or Genetic Programming in general.
>
>
> Chillu


-- 
Romain Francois
Professional R Enthusiast
+33(0) 6 28 91 30 30
http://romainfrancois.blog.free.fr
|- http://tr.im/OIXN : raster images and RImageJ
|- http://tr.im/OcQe : Rcpp 0.7.7
`- http://tr.im/O1wO : highlight 0.1-5


From quantumelixir at gmail.com  Thu Mar  4 09:01:23 2010
From: quantumelixir at gmail.com (Chidambaram Annamalai)
Date: Thu, 4 Mar 2010 13:31:23 +0530
Subject: [Rd] Mentor for GSOC '10: Symbolic Regression in R
In-Reply-To: <4B8F65C7.1020705@r-enthusiasts.com>
References: <7021740b1003031117w59cea52ds15567665d38cf91c@mail.gmail.com>
	<4B8F65C7.1020705@r-enthusiasts.com>
Message-ID: <7021740b1003040001j4d6c5bb0o41ecec548f133c7@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100304/fb1dc63a/attachment.pl>

From maechler at stat.math.ethz.ch  Thu Mar  4 09:26:26 2010
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Thu, 4 Mar 2010 09:26:26 +0100
Subject: [Rd] dots for sample --> "implicitGeneric"
In-Reply-To: <4B8AB68E.2090404@units.it>
References: <4B8AB68E.2090404@units.it>
Message-ID: <19343.28338.343700.941713@lynne.math.ethz.ch>

>>>>> "CB" == Claudia Beleites <cbeleites at units.it>
>>>>>     on Sun, 28 Feb 2010 19:31:42 +0100 writes:

    CB> Dear R-Developers,
    CB> could 'sample' gain a ... argument?

As you may know, adding '...' also has drawbacks,
most notably that you lose automatic checking of correctly
specified argument names (when the function is called).

OTOH, R has now (since 2.9.0)  had sample.int() as a fast and "robust"
alternative.

    CB> As a convenience function, I added a sample Method to my hyperSpec 
    CB> class. This function however has a flag indicating whether the results 
    CB> should be returned directly as a hyperSpec object or rather as indices 
    CB> that give a random sample.

    CB> For the moment, I use SetGeneric to add the dots argument, but this of 
    CB> course gives a warning that the base function sample is overwritten (and 
    CB> my colleagues are almost as scared of warnings as of errors...)

and they are not the only ones ... 

For a while now, we have (in 'methods') the possibility to make
functions "implicit generic",  see  ?implicitGeneric ,
exactly for purposes like (I think)  you have here
( and notably to ensure that if *different* packages do this,
  they get "compatible" versions of the generic,
  and hence all the different method definitions will be
  "attached" to the same generic )

Namely, you'd want to define S4 methods (and hence make 'sample' an S4 generic)
with "new" arguments in your package.

So, yes, I now have added 'sample' to the list of functions
that we make implicitGeneric in R.
--> Get a version of R-devel, (svn revision >= 51202)
and try the following:

> setClass("foo", contains="vector")
[1] "foo"

> setMethod("sample", "foo", function(x, size, myArg, ...) sprintf("sample(<foo>, myArg=%s)\n",myArg))
Restoring the implicit generic function for ?sample? from package ?base?
    into package ?.GlobalEnv?; the generic differs from the default conversion (Formal arguments differ: (x, size, replace, prob), (x, size, replace, prob, ...))
Creating a new generic function for "sample" in ".GlobalEnv"
[1] "sample"

> sample(new("foo"), myArg = 64)
[1] "sample(<foo>, myArg=64)\n"


Best regards,
Martin Maechler, ETH Zurich


    CB> Thanks,
    CB> Claudia

    CB> -- 
    CB> Claudia Beleites
    CB> Dipartimento dei Materiali e delle Risorse Naturali
    CB> Universit? degli Studi di Trieste
    CB> Via Valerio 2
    CB> I-34127 Trieste
    CB> ITALY


From D.Strbenac at garvan.org.au  Thu Mar  4 08:24:18 2010
From: D.Strbenac at garvan.org.au (Dario Strbenac)
Date: Thu,  4 Mar 2010 18:24:18 +1100 (EST)
Subject: [Rd] R CMD check data reading
Message-ID: <20100304182418.BFK26130@gimr.garvan.unsw.edu.au>

Hello,

I have a test script that works fine when I copy and paste it into a R session. I have the script in the tests directory of the package. But when I do R CMD check on the package it runs all the tests OK on my first dataset in the script, then I make a call to load() for the second dataset, and it gives

  Error in readChar(con, 5L, useBytes = TRUE) : cannot open the connection
  Calls: load -> load.default -> readChar
  Execution halted

At least I think that's where it is happening. None of my cat() statements in the script go to the screen, so it's only a guess based on the Calls: in the above message.

How could the script work when copied and pasted into a session, but fail under R CMD check ? I'm out of ideas on this one.

-------------------------------------
Dario Strbenac
Research Assistant
Cancer Epigenetics
Garvan Institute of Medical Research
Darlinghurst NSW 2010
Australia


From ms6ep at cs.virginia.edu  Wed Mar  3 18:01:00 2010
From: ms6ep at cs.virginia.edu (Michael Spiegel)
Date: Wed, 3 Mar 2010 10:01:00 -0700
Subject: [Rd] (PR#14226) -- Re: libgfortran misplaced in Mac OS X R install
	(PR#14226)
Message-ID: <1901f69e1003030900v69b031feoab6828517af2255f@mail.gmail.com>

I am the guy who compiles the OpenMx binaries.  We would be delighted
to place our package on CRAN, once the project is stable enough so
that we are comfortable releasing it to the larger public.  Let's try
to track down where I made a mistake.  Our Makevars.in file contains
the line:

PKG_LIBS=$(FLIBS) $(BLAS_LIBS) $(LAPACK_LIBS)

In addition, on the build machine I noticed that a copy of
libgfortran.2.dylib exists at /usr/local/lib.  I believe the Xcode
install placed a copy of it there.  To create the binary release, I
run  R CMD INSTALL --build.  The beta test users install the package
using the following script:
http://openmx.psyc.virginia.edu/getOpenMx.R.


On Wed, Mar 3, 2010 at 9:48 AM, Tim Brick <tbrick at virginia.edu> wrote:
>
>
>> From: Simon Urbanek <simon.urbanek at r-project.org>
>> Date: March 3, 2010 8:32:52 AM MST
>> To: tbrick at virginia.edu
>> Cc: r-devel at stat.math.ethz.ch, R-bugs at r-project.org
>> Subject: Re: [Rd] libgfortran misplaced in Mac OS X R install (PR#14226)
>>
>> This is not an R bug so please don't abuse R-bugs. It is likely a bug in the way OpenMx binaries are distributed by someone (you didn't even say where you got them from) - OpenMx is not even on CRAN so take that to whoever gave you the binaries. On CRAN we use the correct paths.
>>
>> Cheers,
>> Simon
>>
>>
>> On Mar 2, 2010, at 11:45 , tbrick at virginia.edu wrote:
>>
>>> Full_Name: Timothy Brick
>>> Version: 2.10
>>> OS: Mac OS X (seen on both 10.6 and 10.5)
>>> Submission from: (NULL) (63.255.24.5)
>>>
>>>
>>> When using install.packages in R on Mac OS X, packages that require gfortran
>>> throws an error (Example below from installation of OpenMx package):
>>>
>>> Loading required package: OpenMx
>>> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>>> unable to load shared library
>>> '/Library/Frameworks/R.framework/Resources/library/OpenMx/libs/i386/OpenMx.so':
>>> dlopen(/Library/Frameworks/R.framework/Resources/library/OpenMx/libs/i386/OpenMx.so,
>>> 6): Library not loaded: /usr/local/lib/libgfortran.2.dylib
>>> Referenced from: /Library/Frameworks/R.framework/Resources/library/OpenMx/libs/i386/OpenMx.so
>>> Reason: image not found
>>>
>>> libgfortran.2.dylib does exist, but in
>>> /Library/Frameworks/R.framework/Versions/2.10/Resouces/lib/libgfortran.2.dylib
>>> (or /2.9/, depending on version installed).
>>>
>>> A workaround at present involves creating a symbolic link from the above file to
>>> /usr/local/lib/libgfortran.2.dylib, however this requires sudo access and is
>>> confusing for novice users.
>>>
>>> There is more discussion of this bug as it relates to OpenMx at:
>>> http://openmx.psyc.virginia.edu/thread/316
>>>
>>> Posts on other forums indicate a similar issue with other packages including
>>> vegan and lme4:
>>> http://r-forge.r-project.org/forum/forum.php?thread_id=728&forum_id=194
>>> https://stat.ethz.ch/pipermail/r-sig-mac/2009-May/006210.html
>>>
>>
>> Those are very old posts and those were temporary issues in the CRAN build system that have been promptly resolved.
>>
>>
>
>


From simon.urbanek at r-project.org  Thu Mar  4 15:49:02 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 4 Mar 2010 09:49:02 -0500
Subject: [Rd] (PR#14226) -- Re: libgfortran misplaced in Mac OS X R
	install (PR#14226)
In-Reply-To: <1901f69e1003030900v69b031feoab6828517af2255f@mail.gmail.com>
References: <1901f69e1003030900v69b031feoab6828517af2255f@mail.gmail.com>
Message-ID: <3214E67E-521A-49E7-A8FF-32EC723CA458@r-project.org>

Hi Michael,

On Mar 3, 2010, at 12:01 , Michael Spiegel wrote:

> I am the guy who compiles the OpenMx binaries.  We would be  
> delighted to place our package on CRAN, once the project is stable  
> enough so that we are comfortable releasing it to the larger  
> public.  Let's try to track down where I made a mistake.  Our  
> Makevars.in file contains the line:
>
> PKG_LIBS=$(FLIBS) $(BLAS_LIBS) $(LAPACK_LIBS)
>
> In addition, on the build machine I noticed that a copy of  
> libgfortran.2.dylib exists at /usr/local/lib.  I believe the Xcode  
> install placed a copy of it there.

No, it is part of the GNU Fortran installation. Anything you compile  
with a Fortran requires that you have that Fortran installed at run  
time, because Fortran uses its own run-time libraries (if the Fortran  
you compiled with used dynamic libraries). This implies that if you  
distribute your package you have to tell users to install the same  
Fortran you used to compile it.

However, unlike other unices Mac users don't necessarily have  
development tools installed, so on CRAN we make an effort to modify  
the binaries such that they work even without the tools they have been  
compiled with. There are several possible approaches, but since R  
itself already uses the same Fortran, we ship a copy of the Fortran  
libraries inside R and modify packages such that they use it instead  
of the one from dev tools (see below for details).


>  To create the binary release, I run  R CMD INSTALL --build.

That is not sufficient to create a binary of your package, because it  
contains a configure script (this is unrelated to the above - see R- 
admin 2.6). What you want to use is something like this (assuming R  
2.10.1 Leopard build and Fortran from CRAN):

R --arch=i386 CMD INSTALL OpenMx_0.2.9-1147.tar.gz
R --arch=x86_64 CMD INSTALL --libs-only OpenMx_0.2.9-1147.tar.gz
R --arch=ppc CMD INSTALL --libs-only OpenMx_0.2.9-1147.tar.gz
cd /Library/Frameworks/R.framework/Versions/2.10/Resources/library

# fix the Fortran paths to point to R 2.10 instead
for lib in `ls OpenMx/libs/*/*.so`; do
   install_name_tool -change /usr/local/lib/libgfortran.2.dylib \
     /Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
libgfortran.2.dylib \
    $lib
done

# change permissions for distribution
sudo chown -Rh root:admin OpenMx
sudo chmod -R g+w OpenMx

# pack it up
tar fvcz ~/OpenMx_0.2.9-1147.tgz OpenMx


You can check that you have the correct paths using otool -L:

ginaz:library$ otool -L OpenMx/libs/*/*.so
OpenMx/libs/i386/OpenMx.so:
	OpenMx.so (compatibility version 0.0.0, current version 0.0.0)
	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
libgfortran.2.dylib (compatibility version 3.0.0, current version 3.0.0)
	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
libRblas.dylib (compatibility version 0.0.0, current version 0.0.0)
	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
libRlapack.dylib (compatibility version 2.10.0, current version 2.10.1)
	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
libR.dylib (compatibility version 2.10.0, current version 2.10.1)
	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/ 
CoreFoundation (compatibility version 150.0.0, current version 476.19.0)
	/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current  
version 1.0.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current  
version 111.1.4)
	/System/Library/Frameworks/vecLib.framework/Versions/A/vecLib  
(compatibility version 1.0.0, current version 242.0.0)
OpenMx/libs/ppc/OpenMx.so:
	OpenMx.so (compatibility version 0.0.0, current version 0.0.0)
	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
libgfortran.2.dylib (compatibility version 3.0.0, current version 3.0.0)
	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
libRblas.dylib (compatibility version 0.0.0, current version 0.0.0)
	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
libRlapack.dylib (compatibility version 2.10.0, current version 2.10.1)
	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
libR.dylib (compatibility version 2.10.0, current version 2.10.1)
	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/ 
CoreFoundation (compatibility version 150.0.0, current version 476.19.0)
	/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current  
version 1.0.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current  
version 111.1.4)
	/System/Library/Frameworks/vecLib.framework/Versions/A/vecLib  
(compatibility version 1.0.0, current version 242.0.0)
OpenMx/libs/x86_64/OpenMx.so:
	OpenMx.so (compatibility version 0.0.0, current version 0.0.0)
	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
libgfortran.2.dylib (compatibility version 3.0.0, current version 3.0.0)
	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
libRblas.dylib (compatibility version 0.0.0, current version 0.0.0)
	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
libRlapack.dylib (compatibility version 2.10.0, current version 2.10.1)
	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
libR.dylib (compatibility version 2.10.0, current version 2.10.1)
	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/ 
CoreFoundation (compatibility version 150.0.0, current version 476.19.0)
	/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current  
version 1.0.0)
	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current  
version 111.1.4)
	/System/Library/Frameworks/vecLib.framework/Versions/A/vecLib  
(compatibility version 1.0.0, current version 242.0.0)


If you are dealing with only one R version, you can change the ID of  
your Fortran library instead of touching the package files:

install_name_tool -id \
    /Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
libgfortran.2.dylib
   /usr/local/lib/libgfortran.2.0.0.dylib

Note, however, that this will lead to (possibly silent) errors if you  
forget to change it when switching to another R version, so I prefer  
to fix the package instead.

Cheers,
Simon


>  The beta test users install the package using the following script: http://openmx.psyc.virginia.edu/getOpenMx.R 
> .
>



>
> On Wed, Mar 3, 2010 at 9:48 AM, Tim Brick <tbrick at virginia.edu> wrote:
>>
>>
>>> From: Simon Urbanek <simon.urbanek at r-project.org>
>>> Date: March 3, 2010 8:32:52 AM MST
>>> To: tbrick at virginia.edu
>>> Cc: r-devel at stat.math.ethz.ch, R-bugs at r-project.org
>>> Subject: Re: [Rd] libgfortran misplaced in Mac OS X R install  
>>> (PR#14226)
>>>
>>> This is not an R bug so please don't abuse R-bugs. It is likely a  
>>> bug in the way OpenMx binaries are distributed by someone (you  
>>> didn't even say where you got them from) - OpenMx is not even on  
>>> CRAN so take that to whoever gave you the binaries. On CRAN we use  
>>> the correct paths.
>>>
>>> Cheers,
>>> Simon
>>>
>>>
>>> On Mar 2, 2010, at 11:45 , tbrick at virginia.edu wrote:
>>>
>>>> Full_Name: Timothy Brick
>>>> Version: 2.10
>>>> OS: Mac OS X (seen on both 10.6 and 10.5)
>>>> Submission from: (NULL) (63.255.24.5)
>>>>
>>>>
>>>> When using install.packages in R on Mac OS X, packages that  
>>>> require gfortran
>>>> throws an error (Example below from installation of OpenMx  
>>>> package):
>>>>
>>>> Loading required package: OpenMx
>>>> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>>>> unable to load shared library
>>>> '/Library/Frameworks/R.framework/Resources/library/OpenMx/libs/ 
>>>> i386/OpenMx.so':
>>>> dlopen(/Library/Frameworks/R.framework/Resources/library/OpenMx/ 
>>>> libs/i386/OpenMx.so,
>>>> 6): Library not loaded: /usr/local/lib/libgfortran.2.dylib
>>>> Referenced from: /Library/Frameworks/R.framework/Resources/ 
>>>> library/OpenMx/libs/i386/OpenMx.so
>>>> Reason: image not found
>>>>
>>>> libgfortran.2.dylib does exist, but in
>>>> /Library/Frameworks/R.framework/Versions/2.10/Resouces/lib/ 
>>>> libgfortran.2.dylib
>>>> (or /2.9/, depending on version installed).
>>>>
>>>> A workaround at present involves creating a symbolic link from  
>>>> the above file to
>>>> /usr/local/lib/libgfortran.2.dylib, however this requires sudo  
>>>> access and is
>>>> confusing for novice users.
>>>>
>>>> There is more discussion of this bug as it relates to OpenMx at:
>>>> http://openmx.psyc.virginia.edu/thread/316
>>>>
>>>> Posts on other forums indicate a similar issue with other  
>>>> packages including
>>>> vegan and lme4:
>>>> http://r-forge.r-project.org/forum/forum.php?thread_id=728&forum_id=194
>>>> https://stat.ethz.ch/pipermail/r-sig-mac/2009-May/006210.html
>>>>
>>>
>>> Those are very old posts and those were temporary issues in the  
>>> CRAN build system that have been promptly resolved.
>>>
>>>
>>
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From cbeleites at units.it  Thu Mar  4 15:59:32 2010
From: cbeleites at units.it (Claudia Beleites)
Date: Thu, 04 Mar 2010 15:59:32 +0100
Subject: [Rd] dots for sample --> "implicitGeneric"
In-Reply-To: <19343.28338.343700.941713@lynne.math.ethz.ch>
References: <4B8AB68E.2090404@units.it>
	<19343.28338.343700.941713@lynne.math.ethz.ch>
Message-ID: <hmohtk$443$1@dough.gmane.org>

Dear Martin,

Martin Maechler wrote:
>>>>>> "CB" == Claudia Beleites <cbeleites at units.it>
>>>>>>     on Sun, 28 Feb 2010 19:31:42 +0100 writes:
> 
>     CB> Dear R-Developers,
>     CB> could 'sample' gain a ... argument?
> 
> As you may know, adding '...' also has drawbacks,
> most notably that you lose automatic checking of correctly
> specified argument names (when the function is called).
Yes, I'm aware of that - and was silently wondering whether one could do 
something against it (besides having nicely behaved functions without ... at the 
end of the call chain).

> 
> OTOH, R has now (since 2.9.0)  had sample.int() as a fast and "robust"
> alternative.
Yes.
I had a quick thought whether I should do
sample (my.object) => new object with a subset of my.object's spectra
and
sample.int (my.object) => indices for use with my.object
I decided that this is bad, as I would expect that a function somefun.int does 
*expect* rather than *return* the integer.

The other thought was to have an additional function
isample that returns indices. Which after rethinking seems the right thing to do.

However this doesn't solve the implicitGeneric problem: if the object is 
returned I'd like to allow users to pass short messages that end up in the 
object's "logbook".
But this can easily be postponed until R 2.11 is released and sample has the 
implicit generic also for "normal" users (= my colleagues who already complain 
if I ask them to update their R to the official release).

> 
>     CB> As a convenience function, I added a sample Method to my hyperSpec 
>     CB> class. This function however has a flag indicating whether the results 
>     CB> should be returned directly as a hyperSpec object or rather as indices 
>     CB> that give a random sample.
> 
>     CB> For the moment, I use SetGeneric to add the dots argument, but this of 
>     CB> course gives a warning that the base function sample is overwritten (and 
>     CB> my colleagues are almost as scared of warnings as of errors...)
> 
> and they are not the only ones ... 
> 
> For a while now, we have (in 'methods') the possibility to make
> functions "implicit generic",  see  ?implicitGeneric ,
> exactly for purposes like (I think)  you have here
> ( and notably to ensure that if *different* packages do this,
>   they get "compatible" versions of the generic,
>   and hence all the different method definitions will be
>   "attached" to the same generic )

Yes, thank you - that's what I really wanted!
I'll do my "homework" and reread the chaper in Chambers' book.

> Namely, you'd want to define S4 methods (and hence make 'sample' an S4 generic)
> with "new" arguments in your package.
Exactly.

> So, yes, I now have added 'sample' to the list of functions
> that we make implicitGeneric in R.
Thanks a lot.

> --> Get a version of R-devel, (svn revision >= 51202)
> and try the following:
> 
>> setClass("foo", contains="vector")
> [1] "foo"
> 
>> setMethod("sample", "foo", function(x, size, myArg, ...) sprintf("sample(<foo>, myArg=%s)\n",myArg))
> Restoring the implicit generic function for ?sample? from package ?base?
>     into package ?.GlobalEnv?; the generic differs from the default conversion (Formal arguments differ: (x, size, replace, prob), (x, size, replace, prob, ...))
> Creating a new generic function for "sample" in ".GlobalEnv"
> [1] "sample"
> 
>> sample(new("foo"), myArg = 64)
> [1] "sample(<foo>, myArg=64)\n"
Wonderful. Works like a charm. Thanks a lot.

Thanks for your kind help,

Claudia



> 
> 
> Best regards,
> Martin Maechler, ETH Zurich
> 
> 
>     CB> Thanks,
>     CB> Claudia
> 
>     CB> -- 
>     CB> Claudia Beleites
>     CB> Dipartimento dei Materiali e delle Risorse Naturali
>     CB> Universit? degli Studi di Trieste
>     CB> Via Valerio 2
>     CB> I-34127 Trieste
>     CB> ITALY
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Claudia Beleites
Dipartimento dei Materiali e delle Risorse Naturali
Universit? degli Studi di Trieste
Via Alfonso Valerio 6/a
I-34127 Trieste

phone: +39 0 40 5 58-37 68
email: cbeleites at units.it


From marc_schwartz at me.com  Thu Mar  4 16:15:03 2010
From: marc_schwartz at me.com (Marc Schwartz)
Date: Thu, 04 Mar 2010 09:15:03 -0600
Subject: [Rd] Rmpi on CentOS (64bit)
In-Reply-To: <20100304072402.GC633@slingshot.co.nz>
References: <20100303065320.GA633@slingshot.co.nz>
	<alpine.LFD.2.00.1003030732430.11176@gannet.stats.ox.ac.uk>
	<20100303191529.GB633@slingshot.co.nz>
	<alpine.LFD.2.00.1003031921550.29730@gannet.stats.ox.ac.uk>
	<37BEE6C2-9F37-48E8-BCDC-76938913AC73@me.com>
	<20100304072402.GC633@slingshot.co.nz>
Message-ID: <01193BAD-4D69-427B-9B57-0BC8791B85BF@me.com>


On Mar 4, 2010, at 1:24 AM, Patrick Connolly wrote:

> On Wed, 03-Mar-2010 at 01:46PM -0600, Marc Schwartz wrote:
> 
> 
> |> Patrick, just as an FYI, I did not see which variant of CentOS you
> |> are using, but:
> 
> Apologies.  I didn't mention it's 5.4

No problem.

> 
> |> CentOS 4, which is based upon RHEL 4, is in turn based upon Fedora
> |> Core 3 (2004).
> 
> |> CentOS 5, which is based upon RHEL 5, is in turn based upon Fedora
> |> Core 6 (2006).
> 
> |> So to reinforce, there is a substantial and intentional lag between
> |> RHEL/CentOS and Fedora. Recall that RHEL and CentOS are targeted
> |> for stable server use, whereas Fedora is a bleeding edge distro.
> 
> Yes.  For that reason, I wished to get Rmpi working on CentOS.  I use
> Fedora 11 at home and I'm a bit put off by the 300-500 Mb of updates
> most weeks.  It's nice using the new stuff, but those updates
> periodically screw up what had been working well.  I wouldn't want
> that on a production machine.  Looks as though I'll have to do so
> anyway.  My Linux skills aren't up to sorting out this CentOS lot, and
> I should at least get it started: it's likely there's not much
> difference between F11 and F12 for this task.
> 
> This could well be a case where Debian would be the easiest way to go,
> but I couldn't convince the IT people to go down such a new track.
> Ours is very much an rpm site.  In any case, my only Debian-type
> experience is with Mepis (where I got Rmpi working in 20 minutes, but
> I don't think that makes me a Debian pro).
> 
> Thanks for the hints.


BTW, just as happenstance this morning, I found the following blog posting, that may or may not be of help to you for Rmpi on Fedora:

  http://www.r-bloggers.com/r-tips-installing-rmpi-on-fedora-linux/

Notwithstanding the IT people issues, you could perhaps consider Ubuntu LTS, which provides a hybrid-ish approach of having a fairly up to date desktop Linux distro with longer term post-release support. Moving to a Debian based distro of course also avails you of the significant work that folks like Dirk have put in place to make most CRAN packages easily available via apt.

There was a similar hybrid attempt for Fedora a few years ago, called Fedora Legacy, but it was effectively DOA. There were folks who wanted and argued for longer post release support, to avoid the frequent release update cycle. Not surprisingly, with the exception of a core group, the majority of those who wanted it were not willing to provide the substantial voluntary resources to actually make it successful. Not to mention, it was anathema to Fedora's raison d'etre and there were heated discussions on the Fedora lists.

F13 is scheduled for release mid-May, which means that F11 goes EOL mid-June. So you will need to think about moving any F11 based systems to F12 or F13 in the not too distant future. That's the challenge of Fedora's life cycle, with twice per year major releases, so one has to make an informed decision as to the willingness to be on a fast track. It is one of the reasons that I moved to OSX a year ago, after 8 years on RH/Fedora, along with growing frustration over the poor nature of Linux hardware support from the GPU vendors (especially nVidia) at the time. As they say, the only good thing about banging your head against the wall, is that it feels so good when you stop.

To contrast, RHEL has a 7 year life cycle, which of course carries over to CentOS, again reflecting server versus desktop requirements. You can see more information here:

  http://www.redhat.com/security/updates/errata/

So each RHEL/CentOS major release lives during roughly 14 Fedora major releases.

There are also various rumors and speculations about RHEL 6, its release date and which version of Fedora it will be based upon, with some suggesting F12 or F13:

  http://lwn.net/Articles/364405/

  http://jason.roysdon.net/2010/01/29/red-hat-enterprise-linux-6-speculation/


HTH,

Marc


From tshort.rlists at gmail.com  Thu Mar  4 16:29:48 2010
From: tshort.rlists at gmail.com (Tom Short)
Date: Thu, 4 Mar 2010 10:29:48 -0500
Subject: [Rd] Bug reporting system inquiry plus a bug report related to sort
Message-ID: <fd27013a1003040729h328672d4p64facae896d1325a@mail.gmail.com>

Is the bug-reporting system working okay? Two days ago, I submitted
the following bug report via email to r-bugs at r-project.org. I didn't
see a confirmation, and it didn't see it at
http://bugs.r-project.org/. Now, http://bugs.r-project.org/ seems to
be down.

Anyway, here's the bug report related to sort.list and sort(...,
index.return = TRUE) with na.last = NA


I think that both sort.list(x, na.last = NA) and sort(x, na.last = NA,
index.return = TRUE)$ix give incorrect answers with na.last. With
na.last, both of these return answers equivalent to
sort.list(na.omit(x)), and I think they should be the equivalent of
order(x, na.last=NA) as follows.

> x <- c(1L, 6L, NA, 2L)
> order(x, na.last = NA) # right
[1] 1 4 2
> sort.list(x, na.last = NA, method = "radix") # wrong, I think
[1] 1 3 2
> sort.list(x, na.last = NA, method = "quick") # wrong
[1] 1 3 2
> sort(x, na.last = NA, index.return = TRUE)$ix # wrong
[1] 1 3 2

I've included a patch for the "radix" and "shell" methods of
sort.list. The sort and "quick" method of sort.list (which uses sort)
look more challenging. With the patch, I get:

> sort.list(x, na.last = NA, method = "radix") # good
[1] 1 4 2
> sort.list(x, na.last = NA, method = "shell") # good
[1] 1 4 2
> sort.list(x, na.last = NA, method = "quick") # still bad
[1] 1 3 2

By the way, having the radix sort is great. It's really fast for factors.

- Tom

Tom Short
Electric Power Research Institute (EPRI)



> sessionInfo()
R version 2.10.1 (2009-12-14)
i386-pc-mingw32

locale:
[1] LC_COLLATE=English_United States.1252
[2] LC_CTYPE=English_United States.1252
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

From marc_schwartz at me.com  Thu Mar  4 16:39:41 2010
From: marc_schwartz at me.com (Marc Schwartz)
Date: Thu, 04 Mar 2010 09:39:41 -0600
Subject: [Rd] Bug reporting system inquiry plus a bug report related to
	sort
In-Reply-To: <fd27013a1003040729h328672d4p64facae896d1325a@mail.gmail.com>
References: <fd27013a1003040729h328672d4p64facae896d1325a@mail.gmail.com>
Message-ID: <0EE6CBA8-25BC-480E-88E9-D491C395D154@me.com>

On Mar 4, 2010, at 9:29 AM, Tom Short wrote:

> Is the bug-reporting system working okay? Two days ago, I submitted
> the following bug report via email to r-bugs at r-project.org. I didn't
> see a confirmation, and it didn't see it at
> http://bugs.r-project.org/. Now, http://bugs.r-project.org/ seems to
> be down.
> 
> Anyway, here's the bug report related to sort.list and sort(...,
> index.return = TRUE) with na.last = NA
> 
> 
> I think that both sort.list(x, na.last = NA) and sort(x, na.last = NA,
> index.return = TRUE)$ix give incorrect answers with na.last. With
> na.last, both of these return answers equivalent to
> sort.list(na.omit(x)), and I think they should be the equivalent of
> order(x, na.last=NA) as follows.
> 
>> x <- c(1L, 6L, NA, 2L)
>> order(x, na.last = NA) # right
> [1] 1 4 2
>> sort.list(x, na.last = NA, method = "radix") # wrong, I think
> [1] 1 3 2
>> sort.list(x, na.last = NA, method = "quick") # wrong
> [1] 1 3 2
>> sort(x, na.last = NA, index.return = TRUE)$ix # wrong
> [1] 1 3 2
> 
> I've included a patch for the "radix" and "shell" methods of
> sort.list. The sort and "quick" method of sort.list (which uses sort)
> look more challenging. With the patch, I get:
> 
>> sort.list(x, na.last = NA, method = "radix") # good
> [1] 1 4 2
>> sort.list(x, na.last = NA, method = "shell") # good
> [1] 1 4 2
>> sort.list(x, na.last = NA, method = "quick") # still bad
> [1] 1 3 2
> 
> By the way, having the radix sort is great. It's really fast for factors.
> 
> - Tom
> 
> Tom Short
> Electric Power Research Institute (EPRI)
> 
> 
> 
>> sessionInfo()
> R version 2.10.1 (2009-12-14)
> i386-pc-mingw32
> 
> locale:
> [1] LC_COLLATE=English_United States.1252
> [2] LC_CTYPE=English_United States.1252
> [3] LC_MONETARY=English_United States.1252
> [4] LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base


Tom, 

See this recent follow up posting from Peter:

  http://tolstoy.newcastle.edu.au/R/e9/devel/10/02/0375.html

There has been talk over the years of moving to Bugzilla, but I am not clear on present status.

Perhaps the link on the main R Project page needs to be removed or better, updated to a link with a status update on the R bug reporting process. Of course, that does not help folks using bug.report(), which presumably needs to be updated as well.

HTH,

Marc Schwartz


From jel+r at cs.uni-magdeburg.de  Thu Mar  4 17:10:59 2010
From: jel+r at cs.uni-magdeburg.de (Jens Elkner)
Date: Thu, 4 Mar 2010 17:10:59 +0100
Subject: [Rd] Bug reporting system inquiry plus a bug report related to
	sort
In-Reply-To: <0EE6CBA8-25BC-480E-88E9-D491C395D154@me.com>
References: <fd27013a1003040729h328672d4p64facae896d1325a@mail.gmail.com>
	<0EE6CBA8-25BC-480E-88E9-D491C395D154@me.com>
Message-ID: <20100304161059.GA4312@trex.cs.uni-magdeburg.de>

On Thu, Mar 04, 2010 at 09:39:41AM -0600, Marc Schwartz wrote:
  
> There has been talk over the years of moving to Bugzilla, but I am not clear on present status.

IMHO Bugzilla is too challenging for normal users/human beeings (even
developers are often not able to extract the info they need). So JIRA
(http://www.atlassian.com/software/jira/) might be a much better choice -
usually it is not a problem to ask for and get a license for free for
OpenSource projects ...

Regards,
jel.
-- 
Otto-von-Guericke University     http://www.cs.uni-magdeburg.de/
Department of Computer Science   Geb. 29 R 027, Universitaetsplatz 2
39106 Magdeburg, Germany         Tel: +49 391 67 12768


From jel+r at cs.uni-magdeburg.de  Thu Mar  4 17:19:45 2010
From: jel+r at cs.uni-magdeburg.de (Jens Elkner)
Date: Thu, 4 Mar 2010 17:19:45 +0100
Subject: [Rd] R logo as SVG ?
In-Reply-To: <59d7961d1003030842h86e3808h77d3875d040a8ac4@mail.gmail.com>
References: <4B82753B.2090006@biostat.ku.dk>
	<20100227023844.GA1272@trex.cs.uni-magdeburg.de>
	<4B88E35F.3010805@biostat.ku.dk>
	<20100227185533.GA3602@trex.cs.uni-magdeburg.de>
	<de4e29f51002271123s2ae805cex8b6d71d98ba62d8f@mail.gmail.com>
	<20100301180915.GA11344@grex.cs.uni-magdeburg.de>
	<4B8C0BC9.3050903@biostat.ku.dk> <4B8C2EA0.5050901@biostat.ku.dk>
	<20100302164627.GA5157@grex.cs.uni-magdeburg.de>
	<59d7961d1003030842h86e3808h77d3875d040a8ac4@mail.gmail.com>
Message-ID: <20100304161945.GB4312@trex.cs.uni-magdeburg.de>

On Wed, Mar 03, 2010 at 05:42:24PM +0100, Henrik Bengtsson wrote:
Hi Henrik,

> My Wednesday procrastination:
> 
> There's quite some number of decimals in the SVG and some whitespace,
> so some dummy trimming gives:
> 
> x <- readLines("http://developer.r-project.org/Logo/Rlogo-1.svg");
...
Cool :). However, wrt. ressource consumption when the image gets
loaded/rendered, I think there is no noticable gain. But anyway,
reducing the package size is always a good thing :) !

Thanx,
jel.
-- 
Otto-von-Guericke University     http://www.cs.uni-magdeburg.de/
Department of Computer Science   Geb. 29 R 027, Universitaetsplatz 2
39106 Magdeburg, Germany         Tel: +49 391 67 12768


From marc_schwartz at me.com  Thu Mar  4 17:58:16 2010
From: marc_schwartz at me.com (Marc Schwartz)
Date: Thu, 04 Mar 2010 10:58:16 -0600
Subject: [Rd] Bug reporting system inquiry plus a bug report related
	to	sort
In-Reply-To: <20100304161059.GA4312@trex.cs.uni-magdeburg.de>
References: <fd27013a1003040729h328672d4p64facae896d1325a@mail.gmail.com>
	<0EE6CBA8-25BC-480E-88E9-D491C395D154@me.com>
	<20100304161059.GA4312@trex.cs.uni-magdeburg.de>
Message-ID: <A8F2FE84-51DC-4F32-931F-54BAB5D2F91F@me.com>


On Mar 4, 2010, at 10:10 AM, Jens Elkner wrote:

> On Thu, Mar 04, 2010 at 09:39:41AM -0600, Marc Schwartz wrote:
> 
>> There has been talk over the years of moving to Bugzilla, but I am not clear on present status.
> 
> IMHO Bugzilla is too challenging for normal users/human beeings (even
> developers are often not able to extract the info they need). So JIRA
> (http://www.atlassian.com/software/jira/) might be a much better choice -
> usually it is not a problem to ask for and get a license for free for
> OpenSource projects ...

Jira was discussed a couple of years ago:

  http://tolstoy.newcastle.edu.au/R/e5/devel/08/09/0006.html

I presume that the disposition towards non-FOSS platforms remains.

FWIW, the company that I work for uses Bugzilla (and SVN) on RHEL for our own internal development and bug/issue reporting processes. We have both clients and employees using our Bugzilla platform.

The key to having a successful result is not the software, but that the end users and developers can interact with a base of information that enables productive conversation. That places a certain burden on those reporting the bugs/issues to understand both when and how to report bugs, including providing sufficient information on the platform, versions, code and data to reliably reproduce the issue observed.

As we frequently see on both R-Help and R-Devel, in my mind, that is the limiting characteristic. With bug.report(), we still have issues and that is arguably independent of the host bug management system.

I would argue that if there was a somewhat bigger hurdle in place to bug reporting that compelled folks to post to R-Help first, before filing a formal bug report, that this would not be a bad outcome. Whatever the host system may be, a member of R Core will still need to manually process the report, adding to their overhead. Reducing the number of false positives would be helpful.

Marc


From simon.urbanek at r-project.org  Thu Mar  4 18:36:37 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 4 Mar 2010 12:36:37 -0500
Subject: [Rd] Bug reporting system inquiry plus a bug report related
	to	sort
In-Reply-To: <A8F2FE84-51DC-4F32-931F-54BAB5D2F91F@me.com>
References: <fd27013a1003040729h328672d4p64facae896d1325a@mail.gmail.com>
	<0EE6CBA8-25BC-480E-88E9-D491C395D154@me.com>
	<20100304161059.GA4312@trex.cs.uni-magdeburg.de>
	<A8F2FE84-51DC-4F32-931F-54BAB5D2F91F@me.com>
Message-ID: <DD514A5A-B21C-48DC-B46F-BA8507B31724@r-project.org>

Just to calm the discussion a bit - we already have decided to go with  
Bugzilla, we created tools for the import of old PRs and the new bug  
system is up and running in a test phase. The current downtime is not  
directly related to that - the cause is being investigated.

Cheers,
Simon


On Mar 4, 2010, at 11:58 , Marc Schwartz wrote:

>
> On Mar 4, 2010, at 10:10 AM, Jens Elkner wrote:
>
>> On Thu, Mar 04, 2010 at 09:39:41AM -0600, Marc Schwartz wrote:
>>
>>> There has been talk over the years of moving to Bugzilla, but I am  
>>> not clear on present status.
>>
>> IMHO Bugzilla is too challenging for normal users/human beeings (even
>> developers are often not able to extract the info they need). So JIRA
>> (http://www.atlassian.com/software/jira/) might be a much better  
>> choice -
>> usually it is not a problem to ask for and get a license for free for
>> OpenSource projects ...
>
> Jira was discussed a couple of years ago:
>
>  http://tolstoy.newcastle.edu.au/R/e5/devel/08/09/0006.html
>
> I presume that the disposition towards non-FOSS platforms remains.
>
> FWIW, the company that I work for uses Bugzilla (and SVN) on RHEL  
> for our own internal development and bug/issue reporting processes.  
> We have both clients and employees using our Bugzilla platform.
>
> The key to having a successful result is not the software, but that  
> the end users and developers can interact with a base of information  
> that enables productive conversation. That places a certain burden  
> on those reporting the bugs/issues to understand both when and how  
> to report bugs, including providing sufficient information on the  
> platform, versions, code and data to reliably reproduce the issue  
> observed.
>
> As we frequently see on both R-Help and R-Devel, in my mind, that is  
> the limiting characteristic. With bug.report(), we still have issues  
> and that is arguably independent of the host bug management system.
>
> I would argue that if there was a somewhat bigger hurdle in place to  
> bug reporting that compelled folks to post to R-Help first, before  
> filing a formal bug report, that this would not be a bad outcome.  
> Whatever the host system may be, a member of R Core will still need  
> to manually process the report, adding to their overhead. Reducing  
> the number of false positives would be helpful.
>
> Marc
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From marc_schwartz at me.com  Thu Mar  4 18:47:20 2010
From: marc_schwartz at me.com (Marc Schwartz)
Date: Thu, 04 Mar 2010 11:47:20 -0600
Subject: [Rd] Bug reporting system inquiry plus a bug report
	related	to	sort
In-Reply-To: <DD514A5A-B21C-48DC-B46F-BA8507B31724@r-project.org>
References: <fd27013a1003040729h328672d4p64facae896d1325a@mail.gmail.com>
	<0EE6CBA8-25BC-480E-88E9-D491C395D154@me.com>
	<20100304161059.GA4312@trex.cs.uni-magdeburg.de>
	<A8F2FE84-51DC-4F32-931F-54BAB5D2F91F@me.com>
	<DD514A5A-B21C-48DC-B46F-BA8507B31724@r-project.org>
Message-ID: <2CB2C26D-E528-48E7-9707-5254A2954928@me.com>

Thanks for the update and your work on this Simon.

Regards,

Marc

On Mar 4, 2010, at 11:36 AM, Simon Urbanek wrote:

> Just to calm the discussion a bit - we already have decided to go with Bugzilla, we created tools for the import of old PRs and the new bug system is up and running in a test phase. The current downtime is not directly related to that - the cause is being investigated.
> 
> Cheers,
> Simon
> 
> 
> On Mar 4, 2010, at 11:58 , Marc Schwartz wrote:
> 
>> 
>> On Mar 4, 2010, at 10:10 AM, Jens Elkner wrote:
>> 
>>> On Thu, Mar 04, 2010 at 09:39:41AM -0600, Marc Schwartz wrote:
>>> 
>>>> There has been talk over the years of moving to Bugzilla, but I am not clear on present status.
>>> 
>>> IMHO Bugzilla is too challenging for normal users/human beeings (even
>>> developers are often not able to extract the info they need). So JIRA
>>> (http://www.atlassian.com/software/jira/) might be a much better choice -
>>> usually it is not a problem to ask for and get a license for free for
>>> OpenSource projects ...
>> 
>> Jira was discussed a couple of years ago:
>> 
>> http://tolstoy.newcastle.edu.au/R/e5/devel/08/09/0006.html
>> 
>> I presume that the disposition towards non-FOSS platforms remains.
>> 
>> FWIW, the company that I work for uses Bugzilla (and SVN) on RHEL for our own internal development and bug/issue reporting processes. We have both clients and employees using our Bugzilla platform.
>> 
>> The key to having a successful result is not the software, but that the end users and developers can interact with a base of information that enables productive conversation. That places a certain burden on those reporting the bugs/issues to understand both when and how to report bugs, including providing sufficient information on the platform, versions, code and data to reliably reproduce the issue observed.
>> 
>> As we frequently see on both R-Help and R-Devel, in my mind, that is the limiting characteristic. With bug.report(), we still have issues and that is arguably independent of the host bug management system.
>> 
>> I would argue that if there was a somewhat bigger hurdle in place to bug reporting that compelled folks to post to R-Help first, before filing a formal bug report, that this would not be a bad outcome. Whatever the host system may be, a member of R Core will still need to manually process the report, adding to their overhead. Reducing the number of false positives would be helpful.
>> 
>> Marc


From abryant at i-review.com  Thu Mar  4 20:42:38 2010
From: abryant at i-review.com (Alex Bryant)
Date: Thu, 4 Mar 2010 14:42:38 -0500
Subject: [Rd] R 2.10.0 or R 2.10.1 installation fails on HP-UX B.11.23 U ia64
Message-ID: <41A047C9B0CF8D4CBB0C8BA991086CCB0E3CCA0DE6@exchange07.i-review.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100304/6de3270d/attachment.pl>

From ripley at stats.ox.ac.uk  Thu Mar  4 20:44:07 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 4 Mar 2010 19:44:07 +0000 (GMT)
Subject: [Rd] (PR#14226) -- Re: libgfortran misplaced in Mac OS X R
 install
In-Reply-To: <3214E67E-521A-49E7-A8FF-32EC723CA458@r-project.org>
References: <1901f69e1003030900v69b031feoab6828517af2255f@mail.gmail.com>
	<3214E67E-521A-49E7-A8FF-32EC723CA458@r-project.org>
Message-ID: <alpine.LFD.2.00.1003041927500.11292@gannet.stats.ox.ac.uk>

Another possibility is to link statically to libgfortran.  That has 
pros and cons, but for libgfortran not many cons apart from space for 
multiple copies in sundry packages (and is what is done on Windows, 
BTW).

There are several ways to arrange that.  As far as I recall I 
temporarily removed /usr/local/lib/libgfortran*.dylib: another way is 
to edit FLIBS in Makeconf (but then you do need to know which 
copies of that file you need to edit).

As far as I know we don't document in the standard manuals how to 
build distributable binary Mac packages, and perhaps we should do so 
in due course (or at least point at where the information can be 
found).

On Thu, 4 Mar 2010, Simon Urbanek wrote:

> Hi Michael,
>
> On Mar 3, 2010, at 12:01 , Michael Spiegel wrote:
>
>> I am the guy who compiles the OpenMx binaries.  We would be delighted to 
>> place our package on CRAN, once the project is stable enough so that we are 
>> comfortable releasing it to the larger public.  Let's try to track down 
>> where I made a mistake.  Our Makevars.in file contains the line:
>> 
>> PKG_LIBS=$(FLIBS) $(BLAS_LIBS) $(LAPACK_LIBS)
>> 
>> In addition, on the build machine I noticed that a copy of 
>> libgfortran.2.dylib exists at /usr/local/lib.  I believe the Xcode install 
>> placed a copy of it there.
>
> No, it is part of the GNU Fortran installation. Anything you compile with a 
> Fortran requires that you have that Fortran installed at run time, because 
> Fortran uses its own run-time libraries (if the Fortran you compiled with 
> used dynamic libraries). This implies that if you distribute your package you 
> have to tell users to install the same Fortran you used to compile it.
>
> However, unlike other unices Mac users don't necessarily have development 
> tools installed, so on CRAN we make an effort to modify the binaries such 
> that they work even without the tools they have been compiled with. There are 
> several possible approaches, but since R itself already uses the same 
> Fortran, we ship a copy of the Fortran libraries inside R and modify packages 
> such that they use it instead of the one from dev tools (see below for 
> details).
>
>
>> To create the binary release, I run  R CMD INSTALL --build.
>
> That is not sufficient to create a binary of your package, because it 
> contains a configure script (this is unrelated to the above - see R-admin 
> 2.6). What you want to use is something like this (assuming R 2.10.1 Leopard 
> build and Fortran from CRAN):
>
> R --arch=i386 CMD INSTALL OpenMx_0.2.9-1147.tar.gz
> R --arch=x86_64 CMD INSTALL --libs-only OpenMx_0.2.9-1147.tar.gz
> R --arch=ppc CMD INSTALL --libs-only OpenMx_0.2.9-1147.tar.gz
> cd /Library/Frameworks/R.framework/Versions/2.10/Resources/library
>
> # fix the Fortran paths to point to R 2.10 instead
> for lib in `ls OpenMx/libs/*/*.so`; do
> install_name_tool -change /usr/local/lib/libgfortran.2.dylib \
>   /Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libgfortran.2.dylib 
> \
>  $lib
> done
>
> # change permissions for distribution
> sudo chown -Rh root:admin OpenMx
> sudo chmod -R g+w OpenMx
>
> # pack it up
> tar fvcz ~/OpenMx_0.2.9-1147.tgz OpenMx
>
>
> You can check that you have the correct paths using otool -L:
>
> ginaz:library$ otool -L OpenMx/libs/*/*.so
> OpenMx/libs/i386/OpenMx.so:
> 	OpenMx.so (compatibility version 0.0.0, current version 0.0.0)
> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libgfortran.2.dylib 
> (compatibility version 3.0.0, current version 3.0.0)
> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libRblas.dylib 
> (compatibility version 0.0.0, current version 0.0.0)
> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libRlapack.dylib 
> (compatibility version 2.10.0, current version 2.10.1)
> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libR.dylib 
> (compatibility version 2.10.0, current version 2.10.1)
> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation 
> (compatibility version 150.0.0, current version 476.19.0)
> 	/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current 
> version 1.0.0)
> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current 
> version 111.1.4)
> 	/System/Library/Frameworks/vecLib.framework/Versions/A/vecLib 
> (compatibility version 1.0.0, current version 242.0.0)
> OpenMx/libs/ppc/OpenMx.so:
> 	OpenMx.so (compatibility version 0.0.0, current version 0.0.0)
> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libgfortran.2.dylib 
> (compatibility version 3.0.0, current version 3.0.0)
> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libRblas.dylib 
> (compatibility version 0.0.0, current version 0.0.0)
> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libRlapack.dylib 
> (compatibility version 2.10.0, current version 2.10.1)
> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libR.dylib 
> (compatibility version 2.10.0, current version 2.10.1)
> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation 
> (compatibility version 150.0.0, current version 476.19.0)
> 	/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current 
> version 1.0.0)
> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current 
> version 111.1.4)
> 	/System/Library/Frameworks/vecLib.framework/Versions/A/vecLib 
> (compatibility version 1.0.0, current version 242.0.0)
> OpenMx/libs/x86_64/OpenMx.so:
> 	OpenMx.so (compatibility version 0.0.0, current version 0.0.0)
> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libgfortran.2.dylib 
> (compatibility version 3.0.0, current version 3.0.0)
> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libRblas.dylib 
> (compatibility version 0.0.0, current version 0.0.0)
> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libRlapack.dylib 
> (compatibility version 2.10.0, current version 2.10.1)
> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libR.dylib 
> (compatibility version 2.10.0, current version 2.10.1)
> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation 
> (compatibility version 150.0.0, current version 476.19.0)
> 	/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current 
> version 1.0.0)
> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current 
> version 111.1.4)
> 	/System/Library/Frameworks/vecLib.framework/Versions/A/vecLib 
> (compatibility version 1.0.0, current version 242.0.0)
>
>
> If you are dealing with only one R version, you can change the ID of your 
> Fortran library instead of touching the package files:
>
> install_name_tool -id \
>  /Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libgfortran.2.dylib
> /usr/local/lib/libgfortran.2.0.0.dylib
>
> Note, however, that this will lead to (possibly silent) errors if you forget 
> to change it when switching to another R version, so I prefer to fix the 
> package instead.
>
> Cheers,
> Simon
>
>
>> The beta test users install the package using the following script: 
>> http://openmx.psyc.virginia.edu/getOpenMx.R.
>> 
>
>
>
>> 
>> On Wed, Mar 3, 2010 at 9:48 AM, Tim Brick <tbrick at virginia.edu> wrote:
>>> 
>>> 
>>>> From: Simon Urbanek <simon.urbanek at r-project.org>
>>>> Date: March 3, 2010 8:32:52 AM MST
>>>> To: tbrick at virginia.edu
>>>> Cc: r-devel at stat.math.ethz.ch, R-bugs at r-project.org
>>>> Subject: Re: [Rd] libgfortran misplaced in Mac OS X R install (PR#14226)
>>>> 
>>>> This is not an R bug so please don't abuse R-bugs. It is likely a bug in 
>>>> the way OpenMx binaries are distributed by someone (you didn't even say 
>>>> where you got them from) - OpenMx is not even on CRAN so take that to 
>>>> whoever gave you the binaries. On CRAN we use the correct paths.
>>>> 
>>>> Cheers,
>>>> Simon
>>>> 
>>>> 
>>>> On Mar 2, 2010, at 11:45 , tbrick at virginia.edu wrote:
>>>> 
>>>>> Full_Name: Timothy Brick
>>>>> Version: 2.10
>>>>> OS: Mac OS X (seen on both 10.6 and 10.5)
>>>>> Submission from: (NULL) (63.255.24.5)
>>>>> 
>>>>> 
>>>>> When using install.packages in R on Mac OS X, packages that require 
>>>>> gfortran
>>>>> throws an error (Example below from installation of OpenMx package):
>>>>> 
>>>>> Loading required package: OpenMx
>>>>> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>>>>> unable to load shared library
>>>>> '/Library/Frameworks/R.framework/Resources/library/OpenMx/libs/i386/OpenMx.so':
>>>>> dlopen(/Library/Frameworks/R.framework/Resources/library/OpenMx/libs/i386/OpenMx.so,
>>>>> 6): Library not loaded: /usr/local/lib/libgfortran.2.dylib
>>>>> Referenced from: 
>>>>> /Library/Frameworks/R.framework/Resources/library/OpenMx/libs/i386/OpenMx.so
>>>>> Reason: image not found
>>>>> 
>>>>> libgfortran.2.dylib does exist, but in
>>>>> /Library/Frameworks/R.framework/Versions/2.10/Resouces/lib/libgfortran.2.dylib
>>>>> (or /2.9/, depending on version installed).
>>>>> 
>>>>> A workaround at present involves creating a symbolic link from the above 
>>>>> file to
>>>>> /usr/local/lib/libgfortran.2.dylib, however this requires sudo access 
>>>>> and is
>>>>> confusing for novice users.
>>>>> 
>>>>> There is more discussion of this bug as it relates to OpenMx at:
>>>>> http://openmx.psyc.virginia.edu/thread/316
>>>>> 
>>>>> Posts on other forums indicate a similar issue with other packages 
>>>>> including
>>>>> vegan and lme4:
>>>>> http://r-forge.r-project.org/forum/forum.php?thread_id=728&forum_id=194
>>>>> https://stat.ethz.ch/pipermail/r-sig-mac/2009-May/006210.html
>>>>> 
>>>> 
>>>> Those are very old posts and those were temporary issues in the CRAN 
>>>> build system that have been promptly resolved.
>>>> 
>>>> 
>>> 
>>> 
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>> 
>> 
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From simon.urbanek at r-project.org  Thu Mar  4 21:11:23 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 4 Mar 2010 15:11:23 -0500
Subject: [Rd] distributable binary Mac packages [Was: libgfortran misplaced
	in Mac OS X R install]
In-Reply-To: <alpine.LFD.2.00.1003041927500.11292@gannet.stats.ox.ac.uk>
References: <1901f69e1003030900v69b031feoab6828517af2255f@mail.gmail.com>
	<3214E67E-521A-49E7-A8FF-32EC723CA458@r-project.org>
	<alpine.LFD.2.00.1003041927500.11292@gannet.stats.ox.ac.uk>
Message-ID: <E029A98F-540F-4FBF-9C2A-E868292E823A@r-project.org>

On Mar 4, 2010, at 14:44 , Prof Brian Ripley wrote:

> Another possibility is to link statically to libgfortran.  That has  
> pros and cons, but for libgfortran not many cons apart from space  
> for multiple copies in sundry packages (and is what is done on  
> Windows, BTW).
>
> There are several ways to arrange that.  As far as I recall I  
> temporarily removed /usr/local/lib/libgfortran*.dylib: another way  
> is to edit FLIBS in Makeconf (but then you do need to know which  
> copies of that file you need to edit).
>

The Xcode add-on compilers from R.research.att.com use static  
libgfortran by default, so if you didn't install any other Fortran,  
that will be the default.

However, there are issues when linking multiple modules that also link  
libgfortran statically - dylibs are not allowed to contain multiple  
common symbols on OS X (with flat namespaces) which is the case if you  
get static libgfortran from two sources independently. The most  
prominent example is libRlapack linked into a package that also uses  
Fortran (that's why CRAN Rlapack does not use static libgfortran).  
There are ways around, but it all makes the already complex issue even  
more complex ;).


> As far as I know we don't document in the standard manuals how to  
> build distributable binary Mac packages, and perhaps we should do so  
> in due course (or at least point at where the information can be  
> found).
>

Yes, I agree. There are bits and pieces in the R for Mac FAQ, but it  
may be worth putting what I wrote below into the FAQ.

Thanks,
Simon



> On Thu, 4 Mar 2010, Simon Urbanek wrote:
>
>> Hi Michael,
>>
>> On Mar 3, 2010, at 12:01 , Michael Spiegel wrote:
>>
>>> I am the guy who compiles the OpenMx binaries.  We would be  
>>> delighted to place our package on CRAN, once the project is stable  
>>> enough so that we are comfortable releasing it to the larger  
>>> public.  Let's try to track down where I made a mistake.  Our  
>>> Makevars.in file contains the line:
>>> PKG_LIBS=$(FLIBS) $(BLAS_LIBS) $(LAPACK_LIBS)
>>> In addition, on the build machine I noticed that a copy of  
>>> libgfortran.2.dylib exists at /usr/local/lib.  I believe the Xcode  
>>> install placed a copy of it there.
>>
>> No, it is part of the GNU Fortran installation. Anything you  
>> compile with a Fortran requires that you have that Fortran  
>> installed at run time, because Fortran uses its own run-time  
>> libraries (if the Fortran you compiled with used dynamic  
>> libraries). This implies that if you distribute your package you  
>> have to tell users to install the same Fortran you used to compile  
>> it.
>>
>> However, unlike other unices Mac users don't necessarily have  
>> development tools installed, so on CRAN we make an effort to modify  
>> the binaries such that they work even without the tools they have  
>> been compiled with. There are several possible approaches, but  
>> since R itself already uses the same Fortran, we ship a copy of the  
>> Fortran libraries inside R and modify packages such that they use  
>> it instead of the one from dev tools (see below for details).
>>
>>
>>> To create the binary release, I run  R CMD INSTALL --build.
>>
>> That is not sufficient to create a binary of your package, because  
>> it contains a configure script (this is unrelated to the above -  
>> see R-admin 2.6). What you want to use is something like this  
>> (assuming R 2.10.1 Leopard build and Fortran from CRAN):
>>
>> R --arch=i386 CMD INSTALL OpenMx_0.2.9-1147.tar.gz
>> R --arch=x86_64 CMD INSTALL --libs-only OpenMx_0.2.9-1147.tar.gz
>> R --arch=ppc CMD INSTALL --libs-only OpenMx_0.2.9-1147.tar.gz
>> cd /Library/Frameworks/R.framework/Versions/2.10/Resources/library
>>
>> # fix the Fortran paths to point to R 2.10 instead
>> for lib in `ls OpenMx/libs/*/*.so`; do
>> install_name_tool -change /usr/local/lib/libgfortran.2.dylib \
>>  /Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
>> libgfortran.2.dylib \
>> $lib
>> done
>>
>> # change permissions for distribution
>> sudo chown -Rh root:admin OpenMx
>> sudo chmod -R g+w OpenMx
>>
>> # pack it up
>> tar fvcz ~/OpenMx_0.2.9-1147.tgz OpenMx
>>
>>
>> You can check that you have the correct paths using otool -L:
>>
>> ginaz:library$ otool -L OpenMx/libs/*/*.so
>> OpenMx/libs/i386/OpenMx.so:
>> 	OpenMx.so (compatibility version 0.0.0, current version 0.0.0)
>> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
>> libgfortran.2.dylib (compatibility version 3.0.0, current version  
>> 3.0.0)
>> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
>> libRblas.dylib (compatibility version 0.0.0, current version 0.0.0)
>> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
>> libRlapack.dylib (compatibility version 2.10.0, current version  
>> 2.10.1)
>> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
>> libR.dylib (compatibility version 2.10.0, current version 2.10.1)
>> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/ 
>> CoreFoundation (compatibility version 150.0.0, current version  
>> 476.19.0)
>> 	/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current  
>> version 1.0.0)
>> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current  
>> version 111.1.4)
>> 	/System/Library/Frameworks/vecLib.framework/Versions/A/vecLib  
>> (compatibility version 1.0.0, current version 242.0.0)
>> OpenMx/libs/ppc/OpenMx.so:
>> 	OpenMx.so (compatibility version 0.0.0, current version 0.0.0)
>> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
>> libgfortran.2.dylib (compatibility version 3.0.0, current version  
>> 3.0.0)
>> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
>> libRblas.dylib (compatibility version 0.0.0, current version 0.0.0)
>> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
>> libRlapack.dylib (compatibility version 2.10.0, current version  
>> 2.10.1)
>> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
>> libR.dylib (compatibility version 2.10.0, current version 2.10.1)
>> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/ 
>> CoreFoundation (compatibility version 150.0.0, current version  
>> 476.19.0)
>> 	/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current  
>> version 1.0.0)
>> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current  
>> version 111.1.4)
>> 	/System/Library/Frameworks/vecLib.framework/Versions/A/vecLib  
>> (compatibility version 1.0.0, current version 242.0.0)
>> OpenMx/libs/x86_64/OpenMx.so:
>> 	OpenMx.so (compatibility version 0.0.0, current version 0.0.0)
>> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
>> libgfortran.2.dylib (compatibility version 3.0.0, current version  
>> 3.0.0)
>> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
>> libRblas.dylib (compatibility version 0.0.0, current version 0.0.0)
>> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
>> libRlapack.dylib (compatibility version 2.10.0, current version  
>> 2.10.1)
>> 	/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
>> libR.dylib (compatibility version 2.10.0, current version 2.10.1)
>> 	/System/Library/Frameworks/CoreFoundation.framework/Versions/A/ 
>> CoreFoundation (compatibility version 150.0.0, current version  
>> 476.19.0)
>> 	/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current  
>> version 1.0.0)
>> 	/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current  
>> version 111.1.4)
>> 	/System/Library/Frameworks/vecLib.framework/Versions/A/vecLib  
>> (compatibility version 1.0.0, current version 242.0.0)
>>
>>
>> If you are dealing with only one R version, you can change the ID  
>> of your Fortran library instead of touching the package files:
>>
>> install_name_tool -id \
>> /Library/Frameworks/R.framework/Versions/2.10/Resources/lib/ 
>> libgfortran.2.dylib
>> /usr/local/lib/libgfortran.2.0.0.dylib
>>
>> Note, however, that this will lead to (possibly silent) errors if  
>> you forget to change it when switching to another R version, so I  
>> prefer to fix the package instead.
>>
>> Cheers,
>> Simon
>>
>>
>>> The beta test users install the package using the following  
>>> script: http://openmx.psyc.virginia.edu/getOpenMx.R.
>>
>>
>>
>>> On Wed, Mar 3, 2010 at 9:48 AM, Tim Brick <tbrick at virginia.edu>  
>>> wrote:
>>>>> From: Simon Urbanek <simon.urbanek at r-project.org>
>>>>> Date: March 3, 2010 8:32:52 AM MST
>>>>> To: tbrick at virginia.edu
>>>>> Cc: r-devel at stat.math.ethz.ch, R-bugs at r-project.org
>>>>> Subject: Re: [Rd] libgfortran misplaced in Mac OS X R install  
>>>>> (PR#14226)
>>>>> This is not an R bug so please don't abuse R-bugs. It is likely  
>>>>> a bug in the way OpenMx binaries are distributed by someone (you  
>>>>> didn't even say where you got them from) - OpenMx is not even on  
>>>>> CRAN so take that to whoever gave you the binaries. On CRAN we  
>>>>> use the correct paths.
>>>>> Cheers,
>>>>> Simon
>>>>> On Mar 2, 2010, at 11:45 , tbrick at virginia.edu wrote:
>>>>>> Full_Name: Timothy Brick
>>>>>> Version: 2.10
>>>>>> OS: Mac OS X (seen on both 10.6 and 10.5)
>>>>>> Submission from: (NULL) (63.255.24.5)
>>>>>> When using install.packages in R on Mac OS X, packages that  
>>>>>> require gfortran
>>>>>> throws an error (Example below from installation of OpenMx  
>>>>>> package):
>>>>>> Loading required package: OpenMx
>>>>>> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>>>>>> unable to load shared library
>>>>>> '/Library/Frameworks/R.framework/Resources/library/OpenMx/libs/ 
>>>>>> i386/OpenMx.so':
>>>>>> dlopen(/Library/Frameworks/R.framework/Resources/library/OpenMx/ 
>>>>>> libs/i386/OpenMx.so,
>>>>>> 6): Library not loaded: /usr/local/lib/libgfortran.2.dylib
>>>>>> Referenced from: /Library/Frameworks/R.framework/Resources/ 
>>>>>> library/OpenMx/libs/i386/OpenMx.so
>>>>>> Reason: image not found
>>>>>> libgfortran.2.dylib does exist, but in
>>>>>> /Library/Frameworks/R.framework/Versions/2.10/Resouces/lib/ 
>>>>>> libgfortran.2.dylib
>>>>>> (or /2.9/, depending on version installed).
>>>>>> A workaround at present involves creating a symbolic link from  
>>>>>> the above file to
>>>>>> /usr/local/lib/libgfortran.2.dylib, however this requires sudo  
>>>>>> access and is
>>>>>> confusing for novice users.
>>>>>> There is more discussion of this bug as it relates to OpenMx at:
>>>>>> http://openmx.psyc.virginia.edu/thread/316
>>>>>> Posts on other forums indicate a similar issue with other  
>>>>>> packages including
>>>>>> vegan and lme4:
>>>>>> http://r-forge.r-project.org/forum/forum.php?thread_id=728&forum_id=194
>>>>>> https://stat.ethz.ch/pipermail/r-sig-mac/2009-May/006210.html
>>>>> Those are very old posts and those were temporary issues in the  
>>>>> CRAN build system that have been promptly resolved.
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>


From jel+r at cs.uni-magdeburg.de  Fri Mar  5 00:13:58 2010
From: jel+r at cs.uni-magdeburg.de (Jens Elkner)
Date: Fri, 5 Mar 2010 00:13:58 +0100
Subject: [Rd] Bug reporting system inquiry plus a bug report related
	to	sort
In-Reply-To: <A8F2FE84-51DC-4F32-931F-54BAB5D2F91F@me.com>
References: <fd27013a1003040729h328672d4p64facae896d1325a@mail.gmail.com>
	<0EE6CBA8-25BC-480E-88E9-D491C395D154@me.com>
	<20100304161059.GA4312@trex.cs.uni-magdeburg.de>
	<A8F2FE84-51DC-4F32-931F-54BAB5D2F91F@me.com>
Message-ID: <20100304231358.GA5938@trex.cs.uni-magdeburg.de>

On Thu, Mar 04, 2010 at 10:58:16AM -0600, Marc Schwartz wrote:
... 
> Jira was discussed a couple of years ago:
> 
>   http://tolstoy.newcastle.edu.au/R/e5/devel/08/09/0006.html
> 
> I presume that the disposition towards non-FOSS platforms remains.

Was just an idea. IMHO the hosting team needs to decide, what they
can accomplish/how many time they are able to invest to get that thing
driven/maintained/adjusted. Everybody else has to live with that decision
;-)
  
...
> The key to having a successful result is not the software, but that the end users and developers can interact with a base of information that enables productive conversation.

Exactly wrt. the last part. But often even developers just want to get
its work done, don't have the time to get trained to a more or less
complicated beast, have at least at the beginning no intention to extend
it and just want to have their "customers" report bugs/oddities in a 
usable style, which is a problem, if one presents an interface, which is
hard to use / use as intented because of the "none"-expert knowledge ...
So IMHO success certainly depends on the software, as long as you do not
have access limited to a [small] trained group ...
...
> I would argue that if there was a somewhat bigger hurdle

Hurdles wrt. SW dev and help are always bad. Thinking about how to make it
easier to find the required information/right direction is a good thing
...
> Whatever the host system may be, a member of R Core will still need to manually process the report, adding to their overhead. Reducing the number of false positives would be helpful.
...
Yes. So good/extensive documentation/examples is the? key for success ? ;-)

Regards,
jel.
-- 
Otto-von-Guericke University     http://www.cs.uni-magdeburg.de/
Department of Computer Science   Geb. 29 R 027, Universitaetsplatz 2
39106 Magdeburg, Germany         Tel: +49 391 67 12768


From bolker at ufl.edu  Fri Mar  5 00:06:16 2010
From: bolker at ufl.edu (Ben Bolker)
Date: Thu, 4 Mar 2010 23:06:16 +0000 (UTC)
Subject: [Rd] scale(x, center=FALSE) (PR#14219)
References: <4B87E790.6000302@bgsu.edu> <4B88088D.2040505@ufl.edu>
Message-ID: <loom.20100305T000254-873@post.gmane.org>

Ben Bolker <bolker <at> ufl.edu> writes:

 [re: behavior of scale() when center=FALSE and scale=TRUE]

>   Again, I agree with you that the behavior is not optimal, but it is
> very hard to make changes in R when the behavior is sub-optimal rather
> than actually wrong (by some definition).  R-core is very conservative
> about changes that break backward compatibility; I would like it if they
> chose to change the function to use standard deviation rather than
> root-mean-square, but I doubt it will happen (and it would break things
> for any users who are relying on the current definition).
 
[snip]  

>  I have attached a patch
> file (and append the information below as well) that changes "standard
> deviation" back to "root mean square" and is much more explicit about
> this issue ... I hope R-core will jump in, critique it, and possibly use
> it in some form to improve (?) the documentation ...
> 
>   [PS: I have written that the scaling is equivalent to sd() "if and
> only if" centering was done.  Technically it would also be equivalent if
> the column already had zero mean ...]
> 
===================================================================
--- scale.Rd	(revision 51180)
+++ scale.Rd	(working copy)
@@ -41,13 +41,18 @@
   equal to the number of columns of \code{x}, then each column of
   \code{x} is divided by the corresponding value from \code{scale}.  If
   \code{scale} is \code{TRUE} then scaling is done by dividing the
-  (centered) columns of \code{x} by their standard deviations, and if
+  (centered) columns of \code{x} by their root-mean-squares, and if
   \code{scale} is \code{FALSE}, no scaling is done.
-
-  The standard deviation for a column is obtained by computing the
-  square-root of the sum-of-squares of the non-missing values in the
-  column divided by the number of non-missing values minus one (whether
-  or not centering was done).
+
+  The root-mean-square for a (possibly centered)
+  column is defined as
+  \eqn{\sqrt{\sum(x^2)/(n-1)}}{sqrt(sum(x^2)/(n-1))},
+  where \eqn{x} is a vector of the non-missing values
+  and \eqn{n} is the number of non-missing values.
+  If (and only if) centering was done,
+  this is equivalent to \code{sd(x,na.rm=TRUE)}.
+  (To scale by the standard deviations without centering,
+  use \code{scale(x,center=FALSE,scale=apply(x,2,sd,na.rm=TRUE))}.)
 }
\references{
   Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)


 (Bump re: suggested update to scale.Rd .  Is this under
consideration? I'll stop pestering if it's considered
unacceptable, just don't want it to vanish without a trace ...)


From p_connolly at slingshot.co.nz  Fri Mar  5 09:28:08 2010
From: p_connolly at slingshot.co.nz (Patrick Connolly)
Date: Fri, 5 Mar 2010 21:28:08 +1300
Subject: [Rd] Rmpi on CentOS (64bit)
In-Reply-To: <19342.48918.686531.962037@ron.nulle.part>
References: <20100303065320.GA633@slingshot.co.nz>
	<alpine.LFD.2.00.1003030732430.11176@gannet.stats.ox.ac.uk>
	<20100303191529.GB633@slingshot.co.nz>
	<alpine.LFD.2.00.1003031921550.29730@gannet.stats.ox.ac.uk>
	<19342.48918.686531.962037@ron.nulle.part>
Message-ID: <20100305082808.GE633@slingshot.co.nz>

On Wed, 03-Mar-2010 at 01:57PM -0600, Dirk Eddelbuettel wrote:

[...]

|> You could try to suppress the probe for IB which we did (in the older 1.2.*
|> series of OpenMPI) via
|> 
|>    # Disable the use of InfiniBand
|>    #   btl = ^openib
|>    btl = ^openib
|> 
|> in  /etc/openmpi/openmpi-mca-params.conf

CentOS has it in a completely different place.  I tried that
suggestion, but to no avail.


I looked into "... the availability of the interfaces in the dat.conf
file" which the error message mentioned. 


$ locate dat.conf
/etc/ofed/dat.conf
/etc/ofed/compat-dapl/dat.conf
/usr/share/man/man5/dat.conf.5.gz

(No such files appear in Fedora 11 and there seems to be no
ill-effects).

Are we to assume that it's the second of those that is related to the message?


$ cat /etc/ofed/compat-dapl/dat.conf
OpenIB-cma u1.2 nonthreadsafe default libdaplcma.so.1 dapl.1.2 "ib0 0" ""
OpenIB-cma-1 u1.2 nonthreadsafe default libdaplcma.so.1 dapl.1.2 "ib1 0" ""
OpenIB-mthca0-1 u1.2 nonthreadsafe default libdaplscm.so.1 dapl.1.2 "mthca0 1" ""
OpenIB-mthca0-2 u1.2 nonthreadsafe default libdaplscm.so.1 dapl.1.2 "mthca0 2" ""
OpenIB-mlx4_0-1 u1.2 nonthreadsafe default libdaplscm.so.1 dapl.1.2 "mlx4_0 1" ""
OpenIB-mlx4_0-2 u1.2 nonthreadsafe default libdaplscm.so.1 dapl.1.2 "mlx4_0 2" ""
OpenIB-ipath0-1 u1.2 nonthreadsafe default libdaplscm.so.2 dapl.1.2 "ipath0 1" ""
OpenIB-ipath0-2 u1.2 nonthreadsafe default libdaplscm.so.2 dapl.1.2 "ipath0 2" ""
OpenIB-ehca0-2 u1.2 nonthreadsafe default libdaplscm.so.2 dapl.1.2 "ehca0 1" ""
OpenIB-iwarp u1.2 nonthreadsafe default libdaplcma.so.1 dapl.1.2 "eth2 0" ""


$ cat /etc/ofed/dat.conf
ofa-v2-ib0 u2.0 nonthreadsafe default libdaplofa.so.2 dapl.2.0 "ib0 0" ""
ofa-v2-ib1 u2.0 nonthreadsafe default libdaplofa.so.2 dapl.2.0 "ib1 0" ""
ofa-v2-mthca0-1 u2.0 nonthreadsafe default libdaploscm.so.2 dapl.2.0 "mthca0 1" ""
ofa-v2-mthca0-2 u2.0 nonthreadsafe default libdaploscm.so.2 dapl.2.0 "mthca0 2" ""
ofa-v2-mlx4_0-1 u2.0 nonthreadsafe default libdaploscm.so.2 dapl.2.0 "mlx4_0 1" ""
ofa-v2-mlx4_0-2 u2.0 nonthreadsafe default libdaploscm.so.2 dapl.2.0 "mlx4_0 2" ""
ofa-v2-ipath0-1 u2.0 nonthreadsafe default libdaploscm.so.2 dapl.2.0 "ipath0 1" ""
ofa-v2-ipath0-2 u2.0 nonthreadsafe default libdaploscm.so.2 dapl.2.0 "ipath0 2" ""
ofa-v2-ehca0-2 u2.0 nonthreadsafe default libdaploscm.so.2 dapl.2.0 "ehca0 1"  ""
ofa-v2-iwarp u2.0 nonthreadsafe default libdaplofa.so.2 dapl.2.0 "eth2 0" ""
$


Does that give anyone any clues as to what could be going on the
message (which went like this)?

librdmacm: couldn't read ABI version.
librdmacm: assuming: 4
libibverbs: Fatal: couldn't read uverbs ABI version.
CMA: unable to open /dev/infiniband/rdma_cm
--------------------------------------------------------------------------
WARNING: Failed to open "OpenIB-cma" [DAT_INTERNAL_ERROR:].
This may be a real error or it may be an invalid entry in the uDAPL
Registry which is contained in the dat.conf file. Contact your local
System Administrator to confirm the availability of the interfaces in
the dat.conf file.
--------------------------------------------------------------------------



Could there be a modification to Dirk's suggestion that might deal
with it?  (I'm making a last-ditch attempt to avoid using Fedora.)

It's hard to find anything much about CentOS and MPI -- or at least
what people did to get it working.  I found tales of people having
difficulties with Fedora that I didn't have.  I'm not much wiser than
I began.


best

-- 
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.   
   ___    Patrick Connolly   
 {~._.~}                   Great minds discuss ideas    
 _( Y )_  	         Average minds discuss events 
(:_~*~_:)                  Small minds discuss people  
 (_)-(_)  	                      ..... Eleanor Roosevelt
	  
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.


From mdowle at mdowle.plus.com  Fri Mar  5 11:52:10 2010
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Fri, 5 Mar 2010 10:52:10 -0000
Subject: [Rd] Suggestion to add crantastic to resources section on posting
	guide
Message-ID: <hmqnoq$8uj$1@dough.gmane.org>

Under the "further resources" section I'd like to suggest the following 
addition :

*  http://crantastic.org/ lists popular packages according to other users 
votes. Consider briefly reviewing the top 30 packages before posting to 
r-help since someone may have already released a package that solves your 
problem.

Thats just a straw man idea so I hope there will be answer, or discussion, 
either way.

Matthew


From mdowle at mdowle.plus.com  Fri Mar  5 12:37:04 2010
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Fri, 5 Mar 2010 11:37:04 -0000
Subject: [Rd] shash in unique.c
References: <hlu4qh$l7s$1@dough.gmane.org>
Message-ID: <hmqqd2$i3h$1@dough.gmane.org>

I was hoping for a 'yes', 'no', 'maybe' or 'bad idea because ...'. No 
response resulted in a retry() after a Sys.sleep(10 days).

If its a "yes" or "maybe" then I could proceed to try it, test it, and 
present the test results and timings to you along with the patch.  It would 
be on 32bit Ubuntu first, and I would need to either buy, rent time on, or 
borrow a 64bit machine to be able to then test there, owing to the nature of 
the suggestion.

If its "no", "bad idea because..." or "we were already working on it, or 
better",  then I won't spend any more time on it.

Matthew


"Matthew Dowle" <mdowle at mdowle.plus.com> wrote in message 
news:hlu4qh$l7s$1 at dough.gmane.org...
>
> Looking at shash in unique.c, from R-2.10.1  I'm wondering if it makes 
> sense to hash the pointer itself rather than the string it points to?
> In other words could the SEXP pointer be cast to unsigned int and the 
> usual scatter be called on that as if it were integer?
>
> shash would look like a slightly modified version of ihash like this :
>
> static int shash(SEXP x, int indx, HashData *d)
> {
>    if (STRING_ELT(x,indx) == NA_STRING) return 0;
>    return scatter((unsigned int) (STRING_ELT(x,indx), d);
> }
>
> rather than its current form which appears to hash the string it points to 
> :
>
> static int shash(SEXP x, int indx, HashData *d)
> {
>    unsigned int k;
>    const char *p;
>    if(d->useUTF8)
> p = translateCharUTF8(STRING_ELT(x, indx));
>    else
> p = translateChar(STRING_ELT(x, indx));
>    k = 0;
>    while (*p++)
>     k = 11 * k + *p; /* was 8 but 11 isn't a power of 2 */
>    return scatter(k, d);
> }
>
> Looking at sequal, below, and reading its comments, if the pointers are 
> equal it doesn't look at the strings they point to, which lead to the 
> question above.
>
> static int sequal(SEXP x, int i, SEXP y, int j)
> {
>    if (i < 0 || j < 0) return 0;
>    /* Two strings which have the same address must be the same,
>       so avoid looking at the contents */
>    if (STRING_ELT(x, i) == STRING_ELT(y, j)) return 1;
>    /* Then if either is NA the other cannot be */
>    /* Once all CHARSXPs are cached, Seql will handle this */
>    if (STRING_ELT(x, i) == NA_STRING || STRING_ELT(y, j) == NA_STRING)
> return 0;
>    return Seql(STRING_ELT(x, i), STRING_ELT(y, j));
> }
>
> Matthew
>


From murdoch at stats.uwo.ca  Fri Mar  5 12:55:32 2010
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 05 Mar 2010 06:55:32 -0500
Subject: [Rd] shash in unique.c
In-Reply-To: <hmqqd2$i3h$1@dough.gmane.org>
References: <hlu4qh$l7s$1@dough.gmane.org> <hmqqd2$i3h$1@dough.gmane.org>
Message-ID: <4B90F134.6070004@stats.uwo.ca>

Matthew Dowle wrote:
> I was hoping for a 'yes', 'no', 'maybe' or 'bad idea because ...'. No 
> response resulted in a retry() after a Sys.sleep(10 days).
>
> If its a "yes" or "maybe" then I could proceed to try it, test it, and 
> present the test results and timings to you along with the patch.  It would 
> be on 32bit Ubuntu first, and I would need to either buy, rent time on, or 
> borrow a 64bit machine to be able to then test there, owing to the nature of 
> the suggestion.
>
> If its "no", "bad idea because..." or "we were already working on it, or 
> better",  then I won't spend any more time on it.
>
> Matthew
>
>
> "Matthew Dowle" <mdowle at mdowle.plus.com> wrote in message 
> news:hlu4qh$l7s$1 at dough.gmane.org...
>   
>> Looking at shash in unique.c, from R-2.10.1  I'm wondering if it makes 
>> sense to hash the pointer itself rather than the string it points to?
>> In other words could the SEXP pointer be cast to unsigned int and the 
>> usual scatter be called on that as if it were integer?
>>     
Two negative but probably not fatal issues:

Pointers and ints are not always the same size.  In Win64, ints are 32 
bits, pointers are 64 bits.  (Can we be sure there is some integer type 
the same size as a pointer?  I don't know, ask a C expert.)

We might want to save the hash to disk.  On restore, the pointer based 
hash would be all wrong.  (I don't know if we actually do ever save a 
hash to disk.  )

Duncan Murdoch
>> shash would look like a slightly modified version of ihash like this :
>>
>> static int shash(SEXP x, int indx, HashData *d)
>> {
>>    if (STRING_ELT(x,indx) == NA_STRING) return 0;
>>    return scatter((unsigned int) (STRING_ELT(x,indx), d);
>> }
>>
>> rather than its current form which appears to hash the string it points to 
>> :
>>
>> static int shash(SEXP x, int indx, HashData *d)
>> {
>>    unsigned int k;
>>    const char *p;
>>    if(d->useUTF8)
>> p = translateCharUTF8(STRING_ELT(x, indx));
>>    else
>> p = translateChar(STRING_ELT(x, indx));
>>    k = 0;
>>    while (*p++)
>>     k = 11 * k + *p; /* was 8 but 11 isn't a power of 2 */
>>    return scatter(k, d);
>> }
>>
>> Looking at sequal, below, and reading its comments, if the pointers are 
>> equal it doesn't look at the strings they point to, which lead to the 
>> question above.
>>
>> static int sequal(SEXP x, int i, SEXP y, int j)
>> {
>>    if (i < 0 || j < 0) return 0;
>>    /* Two strings which have the same address must be the same,
>>       so avoid looking at the contents */
>>    if (STRING_ELT(x, i) == STRING_ELT(y, j)) return 1;
>>    /* Then if either is NA the other cannot be */
>>    /* Once all CHARSXPs are cached, Seql will handle this */
>>    if (STRING_ELT(x, i) == NA_STRING || STRING_ELT(y, j) == NA_STRING)
>> return 0;
>>    return Seql(STRING_ELT(x, i), STRING_ELT(y, j));
>> }
>>
>> Matthew
>>
>>     
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From ggrothendieck at gmail.com  Fri Mar  5 13:33:26 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 5 Mar 2010 07:33:26 -0500
Subject: [Rd] Suggestion to add crantastic to resources section on
	posting guide
In-Reply-To: <hmqnoq$8uj$1@dough.gmane.org>
References: <hmqnoq$8uj$1@dough.gmane.org>
Message-ID: <971536df1003050433i7f104bd4l1e1421fab0d3f73@mail.gmail.com>

I don't think we should be expanding the posting guide.  Its already
so long that no one reads it.  We should be thinking of ways to cut it
down to a smaller size instead.

On Fri, Mar 5, 2010 at 5:52 AM, Matthew Dowle <mdowle at mdowle.plus.com> wrote:
> Under the "further resources" section I'd like to suggest the following
> addition :
>
> * ?http://crantastic.org/ lists popular packages according to other users
> votes. Consider briefly reviewing the top 30 packages before posting to
> r-help since someone may have already released a package that solves your
> problem.
>
> Thats just a straw man idea so I hope there will be answer, or discussion,
> either way.
>
> Matthew
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From mdowle at mdowle.plus.com  Fri Mar  5 13:40:42 2010
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Fri, 5 Mar 2010 12:40:42 -0000
Subject: [Rd] shash in unique.c
References: <hlu4qh$l7s$1@dough.gmane.org> <hmqqd2$i3h$1@dough.gmane.org>
	<4B90F134.6070004@stats.uwo.ca>
Message-ID: <hmqu4c$v1u$1@dough.gmane.org>

Thanks a lot.  Quick and brief responses below...

"Duncan Murdoch" <murdoch at stats.uwo.ca> wrote in message 
news:4B90F134.6070004 at stats.uwo.ca...
> Matthew Dowle wrote:
>> I was hoping for a 'yes', 'no', 'maybe' or 'bad idea because ...'. No 
>> response resulted in a retry() after a Sys.sleep(10 days).
>>
>> If its a "yes" or "maybe" then I could proceed to try it, test it, and 
>> present the test results and timings to you along with the patch.  It 
>> would be on 32bit Ubuntu first, and I would need to either buy, rent time 
>> on, or borrow a 64bit machine to be able to then test there, owing to the 
>> nature of the suggestion.
>>
>> If its "no", "bad idea because..." or "we were already working on it, or 
>> better",  then I won't spend any more time on it.
>>
>> Matthew
>>
>>
>> "Matthew Dowle" <mdowle at mdowle.plus.com> wrote in message 
>> news:hlu4qh$l7s$1 at dough.gmane.org...
>>
>>> Looking at shash in unique.c, from R-2.10.1  I'm wondering if it makes 
>>> sense to hash the pointer itself rather than the string it points to?
>>> In other words could the SEXP pointer be cast to unsigned int and the 
>>> usual scatter be called on that as if it were integer?
>>>
> Two negative but probably not fatal issues:
>
> Pointers and ints are not always the same size.  In Win64, ints are 32 
> bits, pointers are 64 bits.  (Can we be sure there is some integer type 
> the same size as a pointer?  I don't know, ask a C expert.)
No we can't be sure. But we could test at runtime, and if the assumption 
wasn't true, then revert to the existing method.

>
> We might want to save the hash to disk.  On restore, the pointer based 
> hash would be all wrong.  (I don't know if we actually do ever save a hash 
> to disk.  )
The hash table in unique.c appears to be a temporary private hash, different 
to the global R_StringHash. Its private hash appears to be used only while 
the call to unique runs, then free'd. Thats my understanding anyway. The 
suggestion is not to alter the global R_StringHash in any way at all,  which 
is the one that might be saved to disk now or in the future.

>
> Duncan Murdoch
>>> shash would look like a slightly modified version of ihash like this :
>>>
>>> static int shash(SEXP x, int indx, HashData *d)
>>> {
>>>    if (STRING_ELT(x,indx) == NA_STRING) return 0;
>>>    return scatter((unsigned int) (STRING_ELT(x,indx), d);
>>> }
>>>
>>> rather than its current form which appears to hash the string it points 
>>> to :
>>>
>>> static int shash(SEXP x, int indx, HashData *d)
>>> {
>>>    unsigned int k;
>>>    const char *p;
>>>    if(d->useUTF8)
>>> p = translateCharUTF8(STRING_ELT(x, indx));
>>>    else
>>> p = translateChar(STRING_ELT(x, indx));
>>>    k = 0;
>>>    while (*p++)
>>>     k = 11 * k + *p; /* was 8 but 11 isn't a power of 2 */
>>>    return scatter(k, d);
>>> }
>>>
>>> Looking at sequal, below, and reading its comments, if the pointers are 
>>> equal it doesn't look at the strings they point to, which lead to the 
>>> question above.
>>>
>>> static int sequal(SEXP x, int i, SEXP y, int j)
>>> {
>>>    if (i < 0 || j < 0) return 0;
>>>    /* Two strings which have the same address must be the same,
>>>       so avoid looking at the contents */
>>>    if (STRING_ELT(x, i) == STRING_ELT(y, j)) return 1;
>>>    /* Then if either is NA the other cannot be */
>>>    /* Once all CHARSXPs are cached, Seql will handle this */
>>>    if (STRING_ELT(x, i) == NA_STRING || STRING_ELT(y, j) == NA_STRING)
>>> return 0;
>>>    return Seql(STRING_ELT(x, i), STRING_ELT(y, j));
>>> }
>>>
>>> Matthew
>>>
>>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>


From mdowle at mdowle.plus.com  Fri Mar  5 14:30:28 2010
From: mdowle at mdowle.plus.com (Matthew Dowle)
Date: Fri, 5 Mar 2010 13:30:28 -0000
Subject: [Rd] Suggestion to add crantastic to resources section
	onposting guide
References: <hmqnoq$8uj$1@dough.gmane.org>
	<971536df1003050433i7f104bd4l1e1421fab0d3f73@mail.gmail.com>
Message-ID: <hmr11n$9og$1@dough.gmane.org>

That appears to be an epistemic error. Some people, and I would agree it 
seems like an increasing number of people, clearly don't read the posting 
guide.  However, it is impossible for anyone to know how many people do read 
it, do thoroughly read it and, therefore, don't ever need to post to r-help. 
Those people would be missing from the statistical sample of people who do 
post.  In fact it would be very surprising indeed,  assuming it is true that 
R is getting more popular,  to not see the numbers of non-compliant posters 
increase.

I dont believe in basing decisions upon poorly applied statistics. 
Especially ones that go from correlation to causation so casually.


"Gabor Grothendieck" <ggrothendieck at gmail.com> wrote in message 
news:971536df1003050433i7f104bd4l1e1421fab0d3f73 at mail.gmail.com...
I don't think we should be expanding the posting guide.  Its already
so long that no one reads it.  We should be thinking of ways to cut it
down to a smaller size instead.

On Fri, Mar 5, 2010 at 5:52 AM, Matthew Dowle <mdowle at mdowle.plus.com> 
wrote:
> Under the "further resources" section I'd like to suggest the following
> addition :
>
> * http://crantastic.org/ lists popular packages according to other users
> votes. Consider briefly reviewing the top 30 packages before posting to
> r-help since someone may have already released a package that solves your
> problem.
>
> Thats just a straw man idea so I hope there will be answer, or discussion,
> either way.
>
> Matthew
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From aredd at stat.tamu.edu  Fri Mar  5 17:46:40 2010
From: aredd at stat.tamu.edu (Andrew Redd)
Date: Fri, 5 Mar 2010 10:46:40 -0600
Subject: [Rd] Changing the Prompt for browser()
Message-ID: <4d17c3501003050846m6c08426cy9ca1139ffefa9525@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100305/726c3802/attachment.pl>

From therneau at mayo.edu  Fri Mar  5 17:47:57 2010
From: therneau at mayo.edu (Terry Therneau)
Date: Fri, 05 Mar 2010 10:47:57 -0600
Subject: [Rd] Defining a method in two packages
Message-ID: <1267807677.9076.21.camel@punchbuggy>

The coxme package has a ranef() method, as does lme4.  I'm having
trouble getting them to play together, as shown below.  (The particular
model in the example isn't defensible, but uses a standard data set.)

The problem is that most of the time only one of lme4 or coxme will be
loaded, so each needs to define the basic ranef function as well as a
method for it.  But when loaded together the last one wins.  The coxme
object is an S3 class BTW. (Suggestions to convert it to S4 will not be
well recieved -- but that's a different and unnecessary thread.)

Odds are that this has a simple solution which I have missed.
     Terry Therneau


tmt935% R --vanilla

R version 2.10.0 (2009-10-26)
Copyright (C) 2009 The R Foundation for Statistical Computing
ISBN 3-900051-07-0

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(coxme)
Loading required package: survival
Loading required package: splines
Loading required package: bdsmatrix

> fit <- coxme(Surv(time, status) ~ age + (1|ph.ecog), lung)
> ranef(fit)
$ph.ecog
Intercept 
0.1592346 

> library(lme4)
Loading required package: Matrix
Loading required package: lattice

Attaching package: 'lme4'


        The following object(s) are masked from package:coxme :

         fixef,
         ranef 

> ranef(fit)
Error in function (classes, fdef, mtable)  : 
  unable to find an inherited method for function "ranef", for signature
"coxme"
> q()


From pgilbert at bank-banque-canada.ca  Fri Mar  5 18:40:43 2010
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 5 Mar 2010 12:40:43 -0500
Subject: [Rd] CRAN nearly down?
Message-ID: <D611103AA7EE3B4DAE7F7D49C72B291A02420D1B@EXMAIL2.bocad.bank-banque-canada.ca>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100305/5651227f/attachment.pl>

From simon.urbanek at r-project.org  Fri Mar  5 19:06:43 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 5 Mar 2010 13:06:43 -0500
Subject: [Rd] CRAN nearly down?
In-Reply-To: <D611103AA7EE3B4DAE7F7D49C72B291A02420D1B@EXMAIL2.bocad.bank-banque-canada.ca>
References: <D611103AA7EE3B4DAE7F7D49C72B291A02420D1B@EXMAIL2.bocad.bank-banque-canada.ca>
Message-ID: <90C51534-AB2E-44ED-B8F7-0BC92CC8A731@r-project.org>


On Mar 5, 2010, at 12:40 , Paul Gilbert wrote:

> Is CRAN having trouble or is it just me?

CRAN consists of 70 servers (hence the "N" in the name) so the answer  
is definitely it's you ;). Try using a different mirror - the ones I  
tried are all very snappy so if that doesn't help it's your connection.

Cheers,
Simon



>  (The web interface is very
> slow and install.packages() is timing out and giving me "service not
> available").
>
>
>
> Paul
>
> = 
> = 
> = 
> = 
> = 
> = 
> = 
> = 
> = 
> = 
> = 
> = 
> = 
> = 
> ======================================================================
>
> La version fran?aise suit le texte anglais.
>
> ------------------------------------------------------------------------------------
>
> This email may contain privileged and/or confidential information,  
> and the Bank of
> Canada does not waive any related rights. Any distribution, use, or  
> copying of this
> email or the information it contains by other than the intended  
> recipient is
> unauthorized. If you received this email in error please delete it  
> immediately from
> your system and notify the sender promptly by email that you have  
> done so.
>
> ------------------------------------------------------------------------------------
>
> Le pr?sent courriel peut contenir de l'information privil?gi?e ou  
> confidentielle.
> La Banque du Canada ne renonce pas aux droits qui s'y rapportent.  
> Toute diffusion,
> utilisation ou copie de ce courriel ou des renseignements qu'il  
> contient par une
> personne autre que le ou les destinataires d?sign?s est interdite. 
> Si vous recevez
> ce courriel par erreur, veuillez le supprimer imm?diatement et  
> envoyer sans d?lai ?
> l'exp?diteur un message ?lectronique pour l'aviser que vous avez  
> ?limin? de votre
> ordinateur toute copie du courriel re?u.
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Fri Mar  5 19:18:42 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 5 Mar 2010 18:18:42 +0000 (GMT)
Subject: [Rd] Changing the Prompt for browser()
In-Reply-To: <4d17c3501003050846m6c08426cy9ca1139ffefa9525@mail.gmail.com>
References: <4d17c3501003050846m6c08426cy9ca1139ffefa9525@mail.gmail.com>
Message-ID: <alpine.LFD.2.00.1003051816440.9815@gannet.stats.ox.ac.uk>

On Fri, 5 Mar 2010, Andrew Redd wrote:

> Is there a way that I can change the prompt for within a browser() call.  I
> often use use code like
>
>> with(obj1,browser())
> Browse[1]>
>
> Is there a way that I can set it so that I can get something like
>
>> with(obj1,browser(prompt="obj1"))
> obj1[1]>
>
> I know that prompt is not a valid option for browser, but it would be nice
> if it were.   There is an option('prompt")  but that does not affect the
> prompt for browser.  Can I change this and how?

Only by changing the sources.  The prompt is hard-coded in 
src/main/main.c.

>
> Thanks,
> Andrew
>
> 	[[alternative HTML version deleted]]

Please respect the request in the posting guide not to send HTML.

> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From seth at userprimary.net  Fri Mar  5 19:19:36 2010
From: seth at userprimary.net (Seth Falcon)
Date: Fri, 05 Mar 2010 10:19:36 -0800
Subject: [Rd] shash in unique.c
In-Reply-To: <hmqu4c$v1u$1@dough.gmane.org>
References: <hlu4qh$l7s$1@dough.gmane.org>
	<hmqqd2$i3h$1@dough.gmane.org>	<4B90F134.6070004@stats.uwo.ca>
	<hmqu4c$v1u$1@dough.gmane.org>
Message-ID: <4B914B38.1040606@userprimary.net>

On 3/5/10 4:40 AM, Matthew Dowle wrote:
> Thanks a lot.  Quick and brief responses below...
>
> "Duncan Murdoch"<murdoch at stats.uwo.ca>  wrote in message
> news:4B90F134.6070004 at stats.uwo.ca...
>> Matthew Dowle wrote:
>>> I was hoping for a 'yes', 'no', 'maybe' or 'bad idea because ...'. No
>>> response resulted in a retry() after a Sys.sleep(10 days).
>>>
>>> If its a "yes" or "maybe" then I could proceed to try it, test it, and
>>> present the test results and timings to you along with the patch.  It
>>> would be on 32bit Ubuntu first, and I would need to either buy, rent time
>>> on, or borrow a 64bit machine to be able to then test there, owing to the
>>> nature of the suggestion.
>>>
>>> If its "no", "bad idea because..." or "we were already working on it, or
>>> better",  then I won't spend any more time on it.
>>>
>>> Matthew
>>>
>>>
>>> "Matthew Dowle"<mdowle at mdowle.plus.com>  wrote in message
>>> news:hlu4qh$l7s$1 at dough.gmane.org...
>>>
>>>> Looking at shash in unique.c, from R-2.10.1  I'm wondering if it makes
>>>> sense to hash the pointer itself rather than the string it points to?
>>>> In other words could the SEXP pointer be cast to unsigned int and the
>>>> usual scatter be called on that as if it were integer?
>>>>
>> Two negative but probably not fatal issues:
>>
>> Pointers and ints are not always the same size.  In Win64, ints are 32
>> bits, pointers are 64 bits.  (Can we be sure there is some integer type
>> the same size as a pointer?  I don't know, ask a C expert.)
> No we can't be sure. But we could test at runtime, and if the assumption
> wasn't true, then revert to the existing method.

I think the idea is, on the whole, a reasonable one and would be 
inclined to apply a patch if it demonstrated some measurable performance 
improvement.

For the 32bit v 64bit issue, I think we could detect and in the 64bit 
case take something like:

    ((int)p) ^ ((int)(p >> 32))

>>
>> We might want to save the hash to disk.  On restore, the pointer based
>> hash would be all wrong.  (I don't know if we actually do ever save a hash
>> to disk.  )
> The hash table in unique.c appears to be a temporary private hash, different
> to the global R_StringHash. Its private hash appears to be used only while
> the call to unique runs, then free'd. Thats my understanding anyway. The
> suggestion is not to alter the global R_StringHash in any way at all,  which
> is the one that might be saved to disk now or in the future.
>

I agree with your reading: this is a temporary hash table and there 
would be little reason to want to save it (it is not saved now).

+ seth

-- 
Seth Falcon | @sfalcon | http://userprimary.net/user


From kw.stat at gmail.com  Fri Mar  5 20:52:20 2010
From: kw.stat at gmail.com (Kevin Wright)
Date: Fri, 5 Mar 2010 13:52:20 -0600
Subject: [Rd] Defining a method in two packages
In-Reply-To: <1267807677.9076.21.camel@punchbuggy>
References: <1267807677.9076.21.camel@punchbuggy>
Message-ID: <5c62e0071003051152x4fde614di4d86b150c87b2fea@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100305/eefa9954/attachment.pl>

From rvaradhan at jhmi.edu  Fri Mar  5 21:26:08 2010
From: rvaradhan at jhmi.edu (Ravi Varadhan)
Date: Fri, 05 Mar 2010 15:26:08 -0500
Subject: [Rd] Improved Nelder-Mead algorithm - a potential replacement for
 optim's Nelder-Mead
Message-ID: <f4e199bfbcbf.4b912290@johnshopkins.edu>

Hi,

I have written an R translation of C.T. Kelley's Matlab version of the Nelder-Mead algorithm.  This algorithm is discussed in detail in his book "Iterative methods for optimization" (SIAM 1999, Chapter 8).  I have tested this relatively extensively on a number of smooth and non-smooth problems.  It performs well, in general, and it almost always outperforms optim's implementation of Nelder-Mead.  I have obtained written permissions from both SIAM (publishers of Kelley's text) and from C.T. Kelley himself to make this publicly available in R. 

I have been planning on releasing this function either as a separate package or as one of the algorithms in a package containing derivative-free methods.  However, it was recently suggested to me by Soren Hosgaard that a better option would be to incorporate this as part of `optim' itself, either replacing existing Nelder-Mead or as another `method' in optim, so that it will be more widely used.   Would anyone from the R-core be interested in incorporting this into optim? It should be mentioned that my code is entirely written in R.  Therefore, speed gains could be achieved if translated into C (I am not proficient in C).  

Best,
Ravi.

____________________________________________________________________

Ravi Varadhan, Ph.D.
Assistant Professor,
Division of Geriatric Medicine and Gerontology
School of Medicine
Johns Hopkins University

Ph. (410) 502-2619
email: rvaradhan at jhmi.edu
-------------- next part --------------
An embedded message was scrubbed...
From: =?iso-8859-1?Q?S=F8ren_H=F8jsgaard?= <Soren.Hojsgaard at agrsci.dk>
Subject: SV: [R] Improved Nelder-Mead algorithm and Matlab's fminsearch. Was: Hi
Date: Fri, 05 Mar 2010 20:47:11 +0100
Size: 5724
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100305/9404b759/attachment.mht>

From abryant at i-review.com  Fri Mar  5 22:01:54 2010
From: abryant at i-review.com (Alex Bryant)
Date: Fri, 5 Mar 2010 16:01:54 -0500
Subject: [Rd] unable to compile Recommended packages
Message-ID: <41A047C9B0CF8D4CBB0C8BA991086CCB0E3CCA0E69@exchange07.i-review.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100305/245ba1a8/attachment.pl>

From alex46015 at yahoo.com  Fri Mar  5 22:15:37 2010
From: alex46015 at yahoo.com (alex46015 at yahoo.com)
Date: Fri, 5 Mar 2010 13:15:37 -0800 (PST)
Subject: [Rd] for help on building a R package with several R function and a
	bunch of c, c++
Message-ID: <96129.66118.qm@web113306.mail.gq1.yahoo.com>

Hope I can get quick help from here, I have a bunch of c, c++ included main function and makefile. It works well on both UNIX and windows. I tried to build R package which include this C++ program and several other R functions.  These R function here are independent  of c++ code. I prefer to define one R function to call this c++ program (main function). 

I know how to build R package with just R function, but I don't know how to handle those c++ c code after I copied those  code  in ./src, I am reading manual "Writing R Extensions" , but I did n't catch the key point . Do you know any easy way to do it? ,

Thank you in advance! 

Alex


From peter.ruckdeschel at web.de  Fri Mar  5 22:57:48 2010
From: peter.ruckdeschel at web.de (Peter Ruckdeschel)
Date: Fri, 05 Mar 2010 22:57:48 +0100
Subject: [Rd] references to (1) R source code in svn repo within .Rd file
 and (2) to C source code in comments in R code using .Internal()
 /.Primitive()
Message-ID: <4B917E5C.9060503@web.de>

Hi R-devels,


recently I wanted to quickly look up a C implementation
in R-Core code in the official subversion repository;

more specifically the code was called from R by means of the .Internal()
interface.

And: yes, I did read Uwe Ligges' article in R News,
R Help Desk: Accessing the sources. R News, 6(4):43-45, October 2006

In the end I succeeded, using grep and the like to search the sources in
R_HOME/src, but I found it rather painful ...

(in particular, if R function foo() is not implemented in file foo.R
 and/or the corresponding C code is not in file ../src/foo.c )


So here my "little" two wishes:

(1) references to R code in the .Rd file

    As all the R source code is accessible through
           https://svn.r-project.org/R
    anyway, why not link to it in .Rd files?

    What about a new optional markup command \URLtoSource with
    one argument (the URL); e.g. inserting to file
        R_HOME/src/library/base/man/sample.Rd
    the following line:

   \URLtoSource{https://svn.r-project.org/R/% <linebreak>
                branches/R-2-xx-branch/src/library/base/sample.R}

   (OK, yet another markup command to be rendered by the
    new Rd parser...)

   Advantage: Following this link in a browser would then
   also display comments in R source, without the caveats
   mentioned in Uwe's article. Also no need to download and unpack
   all the source tar-ball.

   Disadvantage: Presumably more traffic on svn.r-project.org ...

   I think (1) should be feasible automatically
   (at least to a large extent).

(2) references to C code interfaced to through .Internal() /
    .Primitive() as comments in R code

    Could you think of an automatic way of inserting references
    into the R source containing the call to .Internal() /
    .Primitive() ---

    some (standardized) comment with a link referring to the
    respective C source file, or, even better, to the corresponding
    C function(s), possibly again an URL to the svn repository ?

    Example: code to sample.R

    #  File src/library/base/R/sample.R
    #  Part of the R package, http://www.R-project.org
    #
     --- [snip] ---
    #  http://www.r-project.org/Licenses/

    sample <- function(x, size, replace=FALSE, prob=NULL)
    {
        if(length(x) == 1L && is.numeric(x) && x >= 1) {
	   if(missing(size)) size <- x
   	   .Internal(sample(x, size, replace, prob))
        }
        else {
	   if(missing(size)) size <- length(x)
	   x[.Internal(sample(length(x), size, replace, prob))]
     #
    ###new proposed comment:
     #
     ### C code interfaced to is implemented in
     ###          R_HOME/src/main/random.c
     ###
     ### or: even "nicer"
     ###
     ### corresponding C code may be inspected in
     ###     https://svn.r-project.org/R/branches/% <linebreak>
     ###           R-2-xx-branch/src/main/random.c
     ###
     ### <and, optionally something like>
     ###
     ### as functions ProbSampleReplace(), ProbSampleNoReplace(),
     ###               SampleReplace(),  SampleNoReplace(), .....
     ###               <maybe more>
     #
    ###end.new comment
     #
        }
    }
    --- snip ---

    (The actual list of C functions would not be urgent at all;
     finding the "right" source file already would mean
     the big step)

     As indicated in Uwe's article, one start to automatize this,
     I guess, would be to build up a table with columns
          R function name : R-source file : C-source file
     from the entries in R_HOME/src/main/names.c

These two enhancements would help outsiders very much to spot the
corresponding code (and not the least to learn "from the Giants").

 --- just a "wish for enhancement" though, certainly not of
     top priority.


Any comments are welcome,

Best, Peter


From edd at debian.org  Sat Mar  6 02:25:34 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 5 Mar 2010 19:25:34 -0600
Subject: [Rd] for help on building a R package with several R function
	and a bunch of c, c++
In-Reply-To: <96129.66118.qm@web113306.mail.gq1.yahoo.com>
References: <96129.66118.qm@web113306.mail.gq1.yahoo.com>
Message-ID: <19345.44814.323263.59655@ron.nulle.part>


On 5 March 2010 at 13:15, alex46015 at yahoo.com wrote:
| Hope I can get quick help from here, I have a bunch of c, c++ included main function and makefile. It works well on both UNIX and windows. I tried to build R package which include this C++ program and several other R functions.  These R function here are independent  of c++ code. I prefer to define one R function to call this c++ program (main function). 
| 
| I know how to build R package with just R function, but I don't know how to handle those c++ c code after I copied those  code  in ./src, I am reading manual "Writing R Extensions" , but I did n't catch the key point . Do you know any easy way to do it? ,

When you asked _that exact same question_ this morning on r-help, you got the
following answer:

   From: Whit Armstrong <armstrong.whit at gmail.com>
   To: alex46015 at yahoo.com
   Cc: r-help at r-project.org
   Subject: Re: [R] for help on building a R package with several R function and a bunch of c, c++
   Date: Fri, 5 Mar 2010 10:33:54 -0500
   
   Pick up Rcpp, make your life easier.
   
   http://dirk.eddelbuettel.com/code/rcpp.html
   
   -Whit
  
   On Fri, Mar 5, 2010 at 9:19 AM,  <alex46015 at yahoo.com> wrote:
   > Hope I can get quick help from here, I have a bunch of c, c++ included main function and makefile. It works well on both UNIX and windows. I tried to build R package which include this C++ program and several other R functions. ?R function here are independent ?c++ code. I prefer to define one R function to call this c++ program.
   >
   > Do you know any easy way to do it? I am reading manual "Writing R Extensions", I didn't catch the key point. I know how to build R package with just R function, ?If I put all c++ code and makefile in /src...what I need do?
   >
   > Thank you in advance!
   >
   > Alex

Now, can you let us know 

    a) what part of the answer was unclear to you, and 

    b) what made you think you needed to repost _the identical question_ here

| Thank you in advance!

You're welcome. 

Dirk
 
| Alex
| 
| ______________________________________________
| R-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
  Registration is open for the 2nd International conference R / Finance 2010
  See http://www.RinFinance.com for details, and see you in Chicago in April!


From alex46015 at yahoo.com  Sat Mar  6 03:27:44 2010
From: alex46015 at yahoo.com (alex46015 at yahoo.com)
Date: Fri, 5 Mar 2010 18:27:44 -0800 (PST)
Subject: [Rd] for help on building a R package with several R function
	and a bunch of c, c++
In-Reply-To: <19345.44814.323263.59655@ron.nulle.part>
Message-ID: <281603.59631.qm@web113307.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100305/499057db/attachment.pl>

From p_connolly at slingshot.co.nz  Sat Mar  6 06:42:44 2010
From: p_connolly at slingshot.co.nz (Patrick Connolly)
Date: Sat, 6 Mar 2010 18:42:44 +1300
Subject: [Rd] Rmpi on CentOS (64bit)
In-Reply-To: <20100303065320.GA633@slingshot.co.nz>
References: <20100303065320.GA633@slingshot.co.nz>
Message-ID: <20100306054244.GF633@slingshot.co.nz>

On Wed, 03-Mar-2010 at 07:53PM +1300, Patrick Connolly wrote:

|> I got Rmpi to compile with little difficulty, but had a tricky time
|> setting the LD_LIBRARY_PATH to use the OpenMPI libs.  I now get a
|> different error when I try to load Rmpi
|> 
|> 
|> > require(Rmpi)                  
|> Loading required package: Rmpi
|> librdmacm: couldn't read ABI version.
|> librdmacm: assuming: 4
|> libibverbs: Fatal: couldn't read uverbs ABI version.
|> CMA: unable to open /dev/infiniband/rdma_cm
|> --------------------------------------------------------------------------
|> WARNING: Failed to open "OpenIB-cma" [DAT_INTERNAL_ERROR:].
|> This may be a real error or it may be an invalid entry in the uDAPL
|> Registry which is contained in the dat.conf file. Contact your local
|> System Administrator to confirm the availability of the interfaces in
|> the dat.conf file.
|> --------------------------------------------------------------------------


I looked further into this uDAPL thing and found an FAQ:
http://www.open-mpi.org/faq/?category=udapl
This one was particularly interesting:

3. Where is the static uDAPL Registry found?

Solaris: /etc/dat/dat.conf

Linux: /etc/dat.conf 


On my CentOS installation, I have two, neither of which is where it's
supposed to be for "Linux" in the opinion of open-mpi.org.

$ locate dat.conf
/etc/ofed/dat.conf
/etc/ofed/compat-dapl/dat.conf
/usr/share/man/man5/dat.conf.5.gz


Would there be a way at the time of compiling Rmpi to specify a
configure arg to use one or other of the ones I have?  Or would it be
simpler to make a link in /etc/ to one or other of them?  Is there any
danger that such a link could bother anything else?

best

-- 
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.   
   ___    Patrick Connolly   
 {~._.~}                   Great minds discuss ideas    
 _( Y )_  	         Average minds discuss events 
(:_~*~_:)                  Small minds discuss people  
 (_)-(_)  	                      ..... Eleanor Roosevelt
	  
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.


From b.rowlingson at lancaster.ac.uk  Sat Mar  6 13:57:22 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sat, 6 Mar 2010 12:57:22 +0000
Subject: [Rd] CRAN nearly down?
In-Reply-To: <D611103AA7EE3B4DAE7F7D49C72B291A02420D1B@EXMAIL2.bocad.bank-banque-canada.ca>
References: <Acq8ivrmxCT+HsnITVa0MD7aLM/uZQ==>
	<D611103AA7EE3B4DAE7F7D49C72B291A02420D1B@EXMAIL2.bocad.bank-banque-canada.ca>
Message-ID: <d8ad40b51003060457g6c5dfc1ci71fc4528e2b54905@mail.gmail.com>

On Fri, Mar 5, 2010 at 5:40 PM, Paul Gilbert
<pgilbert at bank-banque-canada.ca> wrote:
> Is CRAN having trouble or is it just me? ?(The web interface is very
> slow and install.packages() is timing out and giving me "service not
> available").

Have you ever tried:

http://downforeveryoneorjustme.com/cran.r-project.org

 - I thought it was a joke domain name at first! Obviously it might
not get it right if a site is being slow or inconsistent, but its a
handy check when you get a flat non-response.

Barry

-- 
blog: http://geospaced.blogspot.com/
web: http://www.maths.lancs.ac.uk/~rowlings
web: http://www.rowlingson.com/
twitter: http://twitter.com/geospacedman
pics: http://www.flickr.com/photos/spacedman


From b.rowlingson at lancaster.ac.uk  Sat Mar  6 14:04:08 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sat, 6 Mar 2010 13:04:08 +0000
Subject: [Rd] Improved Nelder-Mead algorithm - a potential replacement
	for optim's Nelder-Mead
In-Reply-To: <f4e199bfbcbf.4b912290@johnshopkins.edu>
References: <f4e199bfbcbf.4b912290@johnshopkins.edu>
Message-ID: <d8ad40b51003060504n7a2262b3p3d0d15f91dc45030@mail.gmail.com>

On Fri, Mar 5, 2010 at 8:26 PM, Ravi Varadhan <rvaradhan at jhmi.edu> wrote:
> Hi,
>
> I have written an R translation of C.T. Kelley's Matlab version of the Nelder-Mead algorithm. ?This algorithm is discussed in detail in his book "Iterative methods for optimization" (SIAM 1999, Chapter 8). ?I have tested this relatively extensively on a number of smooth and non-smooth problems. ?It performs well, in general, and it almost always outperforms optim's implementation of Nelder-Mead. ?I have obtained written permissions from both SIAM (publishers of Kelley's text) and from C.T. Kelley himself to make this publicly available in R.

 By 'in R' do you mean 'written in R' or 'in the R package as you get
from CRAN'?

 I think the terms and conditions of that permission would need to be
studied if the code can be redistributed and modified, who holds the
copyright, can it be stuck in with R under an open license and so
on...

>  ?Therefore, speed gains could be achieved if translated into C (I am not proficient in C).

 Not necessarily - if most of the time is spent in the objective
function then even an instantaneous implementation isn't going to
speed things up enough to be worthwhile. More R users know R than C so
the R implementation is always going to be more useful for R users to
study, tweak, and possibly improve!

 Sounds good though!

Barry

-- 
blog: http://geospaced.blogspot.com/
web: http://www.maths.lancs.ac.uk/~rowlings
web: http://www.rowlingson.com/
twitter: http://twitter.com/geospacedman
pics: http://www.flickr.com/photos/spacedman


From rvaradhan at jhmi.edu  Sat Mar  6 15:47:08 2010
From: rvaradhan at jhmi.edu (Ravi Varadhan)
Date: Sat, 06 Mar 2010 09:47:08 -0500
Subject: [Rd] Improved Nelder-Mead algorithm - a potential replacement
 for optim's Nelder-Mead
In-Reply-To: <d8ad40b51003060504n7a2262b3p3d0d15f91dc45030@mail.gmail.com>
References: <f4e199bfbcbf.4b912290@johnshopkins.edu>
	<d8ad40b51003060504n7a2262b3p3d0d15f91dc45030@mail.gmail.com>
Message-ID: <f513a7fa11fdd.4b92249c@johnshopkins.edu>

Dear Barry,

Thanks for your response.  The code is written in R language.  

I had obtained permission from the author C.T. Kelley and the Publisher (SIAM) for releasing the R code under GPL-2 license.  I don't understand what else you'd need to study.   I can send you the actual email transactions, if you are interested in making this happen. 

If there is no interest from any of the R-core members, I will just go ahead and release it as a separate package. My only reason for not doing that was that this potentially useful improvement to an already existing and widely-used algorithm will get lost in a sea of 2200+ packages.

Best regards,
Ravi.
____________________________________________________________________

Ravi Varadhan, Ph.D.
Assistant Professor,
Division of Geriatric Medicine and Gerontology
School of Medicine
Johns Hopkins University

Ph. (410) 502-2619
email: rvaradhan at jhmi.edu


----- Original Message -----
From: Barry Rowlingson <b.rowlingson at lancaster.ac.uk>
Date: Saturday, March 6, 2010 8:04 am
Subject: Re: [Rd] Improved Nelder-Mead algorithm - a potential replacement for optim's Nelder-Mead
To: Ravi Varadhan <rvaradhan at jhmi.edu>
Cc: r-devel at r-project.org, S?ren H?jsgaard <Soren.Hojsgaard at agrsci.dk>


> On Fri, Mar 5, 2010 at 8:26 PM, Ravi Varadhan <rvaradhan at jhmi.edu> wrote:
> > Hi,
> >
> > I have written an R translation of C.T. Kelley's Matlab version of 
> the Nelder-Mead algorithm. ?This algorithm is discussed in detail in 
> his book "Iterative methods for optimization" (SIAM 1999, Chapter 8). 
> ?I have tested this relatively extensively on a number of smooth and 
> non-smooth problems. ?It performs well, in general, and it almost 
> always outperforms optim's implementation of Nelder-Mead. ?I have 
> obtained written permissions from both SIAM (publishers of Kelley's 
> text) and from C.T. Kelley himself to make this publicly available in 
> R.
> 
>  By 'in R' do you mean 'written in R' or 'in the R package as you get
> from CRAN'?
> 
>  I think the terms and conditions of that permission would need to be
> studied if the code can be redistributed and modified, who holds the
> copyright, can it be stuck in with R under an open license and so
> on...
> 
> >  ?Therefore, speed gains could be achieved if translated into C (I 
> am not proficient in C).
> 
>  Not necessarily - if most of the time is spent in the objective
> function then even an instantaneous implementation isn't going to
> speed things up enough to be worthwhile. More R users know R than C so
> the R implementation is always going to be more useful for R users to
> study, tweak, and possibly improve!
> 
>  Sounds good though!
> 
> Barry
> 
> -- 
> blog: 
> web: 
> web: 
> twitter: 
> pics:


From ken.knoblauch at inserm.fr  Sat Mar  6 16:28:24 2010
From: ken.knoblauch at inserm.fr (Ken Knoblauch)
Date: Sat, 06 Mar 2010 16:28:24 +0100
Subject: [Rd] thin grid lines, again (FAQ 7.36), a proposal
Message-ID: <20100306162824.qi6318ymg44kc8og@imp.inserm.fr>

Hi,

I'm raising the issue, again, of those pesky thin lines that show up
with a pdf graphics device, otherwise known as FAQ 7.36. I have read
the FAQ and understand that I can eliminate them by adjusting the  
anti-aliasing
option for viewing them on the screen, but this doesn't necessarily
eliminate them for a print device or for transferring them into a powerpoint
or similar type of presentation format.  I have noticed that pdf's  generated
by some other software do not have the problem that the R generated ones
do.  For example, I can generate a pdf figure in R and with Asymptote
(http://asymptote.sourceforge.net/) and put them in the same LaTeX document
and the Asymptote generated pdf shows no thin lines independently of
the anti-alias setting while the R generated one does.  So it is not  
just the viewer
that is at issue as some pdf generators can make an image that is resistant
to this problem.

After some experimentation, I found that I could fix the problem in a pdf file
generated in R using the pdf graphics device by running the file  
through a filter.

Here is a short R example that produces the lines if your  
anti-aliasing setting
is set (in)appropriately:

pdf("TestBand.pdf")
n <- 16
x <- y <- seq(1, n)
z <- matrix(1, n, n)
z[, 7:10] <- 0.5
z[, c(5, 12)] <- 0
cc <- seq(0, 1, len = 256)
image(z, col = grey(cc), axes = FALSE)
dev.off()

and afterwards I corrected the file with the following awk filter

#FixLines.awk
{
if ($NF == "rg") {
         print $0
         for (i = 1; i < NF; i++) printf "%6.3f ", $i
         print " RG"
         }
else {if ($NF == "f") {
         for (i = 1; i < (NF - 1); i++) printf "%6.3f ", $i
         print "re  b"
         } else print $0
}
}

and then this from a terminal command line:

awk -f FixLines.awk < TestBand.pdf > FT.pdf

alternatively, the following Python script works just as well:

import sys

InFile = open(sys.argv[1], mode = "r")
for line in InFile:
   if(line.rfind("rg") != -1):
     print line,
     print line.replace("rg", "RG"),
   elif(line.rfind("re f") != -1):
     print line.replace("re f", "re b"),
   else:
     print line,
InFile.close()

What I found was that the pdf's generated from R contain commands that
are filling but not stroking rectangles that would correspond to the elements
of the matrix visualized with the image function. So with the filter,  
I located the
lines that set the fill color and added another line that set the stroke color
to be the same, then changed the rectangle fill commands, "re f", to
fill and stroke commands, "re b".

I think that this could be patched in devPS.c (untested) by something like

devPS.c6945
if(R_VIS(gc->fill)) {
         PDF_SetFill(gc->fill, dd);
         PDF_SetLineColor(gc->fill, dd);
         fprintf(pd->pdffp, "0 0 %.2f %.2f re b\n",
                 72.0 * pd->width, 72.0 * pd->height);
     }

or if the current behavior is desired under certain circumstances, perhaps an
argument, StrokeandFill, could be added to the pdf device (postscript, too, I
suppose) so that this behavior could be selected?

Perhaps, there are some more fundamental issues here that I'm not aware of.
i'd like to hear about them, if so.  Thank you.

Ken



-- 
Ken Knoblauch
Inserm U846
Stem-cell and Brain Research Institute
Department of Integrative Neurosciences
18 avenue du Doyen L?pine
69500 Bron
France
tel: +33 (0)4 72 91 34 77
fax: +33 (0)4 72 91 34 61
portable: +33 (0)6 84 10 64 10
http://www.sbri.fr/members/kenneth-knoblauch.html





-- 
Ken Knoblauch
Inserm U846
Stem-cell and Brain Research Institute
Department of Integrative Neurosciences
18 avenue du Doyen L?pine
69500 Bron
France
tel: +33 (0)4 72 91 34 77
fax: +33 (0)4 72 91 34 61
portable: +33 (0)6 84 10 64 10
http://www.sbri.fr/members/kenneth-knoblauch.html


From ligges at statistik.tu-dortmund.de  Sat Mar  6 19:45:29 2010
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 06 Mar 2010 19:45:29 +0100
Subject: [Rd] Defining a method in two packages
In-Reply-To: <1267807677.9076.21.camel@punchbuggy>
References: <1267807677.9076.21.camel@punchbuggy>
Message-ID: <4B92A2C9.1020803@statistik.tu-dortmund.de>

Terry,

this happens since the ranef in coxme is a S3 generic and the one in 
lme4 is a S4 generic.

Of course, after loading lme4, you can still use the ranef from coxme:

coxme::ranef(fit)

and get the desired result.

If you write your own code, you might want to use that call explicitly 
(i.e. accessing from the correct namepsace). In your own package, you 
could simply import the generic from coxme.

Best wishes,
Uwe






On 05.03.2010 17:47, Terry Therneau wrote:
> The coxme package has a ranef() method, as does lme4.  I'm having
> trouble getting them to play together, as shown below.  (The particular
> model in the example isn't defensible, but uses a standard data set.)
>
> The problem is that most of the time only one of lme4 or coxme will be
> loaded, so each needs to define the basic ranef function as well as a
> method for it.  But when loaded together the last one wins.  The coxme
> object is an S3 class BTW. (Suggestions to convert it to S4 will not be
> well recieved -- but that's a different and unnecessary thread.)
>
> Odds are that this has a simple solution which I have missed.
>       Terry Therneau
>
>
> tmt935% R --vanilla
>
> R version 2.10.0 (2009-10-26)
> Copyright (C) 2009 The R Foundation for Statistical Computing
> ISBN 3-900051-07-0
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
>
>    Natural language support but running in an English locale
>
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
>
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
>
>> library(coxme)
> Loading required package: survival
> Loading required package: splines
> Loading required package: bdsmatrix
>
>> fit<- coxme(Surv(time, status) ~ age + (1|ph.ecog), lung)
>> ranef(fit)
> $ph.ecog
> Intercept
> 0.1592346
>
>> library(lme4)
> Loading required package: Matrix
> Loading required package: lattice
>
> Attaching package: 'lme4'
>
>
>          The following object(s) are masked from package:coxme :
>
>           fixef,
>           ranef
>
>> ranef(fit)
> Error in function (classes, fdef, mtable)  :
>    unable to find an inherited method for function "ranef", for signature
> "coxme"
>> q()
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Sat Mar  6 21:17:23 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 6 Mar 2010 20:17:23 +0000 (GMT)
Subject: [Rd] Defining a method in two packages
In-Reply-To: <4B92A2C9.1020803@statistik.tu-dortmund.de>
References: <1267807677.9076.21.camel@punchbuggy>
	<4B92A2C9.1020803@statistik.tu-dortmund.de>
Message-ID: <alpine.LFD.2.00.1003061952170.14938@gannet.stats.ox.ac.uk>

On Sat, 6 Mar 2010, Uwe Ligges wrote:

> Terry,
>
> this happens since the ranef in coxme is a S3 generic and the one in lme4 is 
> a S4 generic.

But the packages could be more cooperative.  There is also a S3 
generic for ranef in package nlme.  Ideally the S4 generic in lme4 
would have a default method which dispatched on S3 methods: that would 
be easy to achieve if there was just one other ranef, but not so if 
there are 2 or more -- but read on.

Indeed, the situation is pretty much the same if you load nlme after 
coxme:

> library(nlme)

Attaching package: 'nlme'

The following object(s) are masked from 'package:coxme':

     fixed.effects, fixef, random.effects, ranef

> ranef(fit)
Error in UseMethod("ranef") :
   no applicable method for 'ranef' applied to an object of class "coxme"

The situation can be alleviated by making S3 methods visible.  Thus if
coxme exported coxme:::ranef.coxme and lme4 had a default method

function (object, ...) UseMethod("ranef")

loading lme4 (or nlme) after coxme would work.

My solution would though be NOT to reuse a name that is already 
established in another package (nlme has used it for many years).

The design problem is that generic foo() in package B might have 
nothing to do with foo() in package A.  When it does, we expect B to 
import the generic from A, but that can be a 'which came first' 
problem unless a base package is involved.  But here nlme is a 
long-established recommended package, so it would be reasonable to 
expect both coxme and lme4 to import from it.


> Of course, after loading lme4, you can still use the ranef from coxme:
>
> coxme::ranef(fit)
>
> and get the desired result.
>
> If you write your own code, you might want to use that call explicitly (i.e. 
> accessing from the correct namepsace). In your own package, you could simply 
> import the generic from coxme.

> Best wishes,
> Uwe
>
>
>
>
>
>
> On 05.03.2010 17:47, Terry Therneau wrote:
>> The coxme package has a ranef() method, as does lme4.  I'm having
>> trouble getting them to play together, as shown below.  (The particular
>> model in the example isn't defensible, but uses a standard data set.)
>> 
>> The problem is that most of the time only one of lme4 or coxme will be
>> loaded, so each needs to define the basic ranef function as well as a
>> method for it.  But when loaded together the last one wins.  The coxme
>> object is an S3 class BTW. (Suggestions to convert it to S4 will not be
>> well recieved -- but that's a different and unnecessary thread.)
>> 
>> Odds are that this has a simple solution which I have missed.
>>       Terry Therneau
>> 
>> 
>> tmt935% R --vanilla
>> 
>> R version 2.10.0 (2009-10-26)
>> Copyright (C) 2009 The R Foundation for Statistical Computing
>> ISBN 3-900051-07-0
>> 
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>> You are welcome to redistribute it under certain conditions.
>> Type 'license()' or 'licence()' for distribution details.
>>
>>    Natural language support but running in an English locale
>> 
>> R is a collaborative project with many contributors.
>> Type 'contributors()' for more information and
>> 'citation()' on how to cite R or R packages in publications.
>> 
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>> 'help.start()' for an HTML browser interface to help.
>> Type 'q()' to quit R.
>> 
>>> library(coxme)
>> Loading required package: survival
>> Loading required package: splines
>> Loading required package: bdsmatrix
>> 
>>> fit<- coxme(Surv(time, status) ~ age + (1|ph.ecog), lung)
>>> ranef(fit)
>> $ph.ecog
>> Intercept
>> 0.1592346
>> 
>>> library(lme4)
>> Loading required package: Matrix
>> Loading required package: lattice
>> 
>> Attaching package: 'lme4'
>> 
>>
>>          The following object(s) are masked from package:coxme :
>>
>>           fixef,
>>           ranef
>> 
>>> ranef(fit)
>> Error in function (classes, fdef, mtable)  :
>>    unable to find an inherited method for function "ranef", for signature
>> "coxme"
>>> q()
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From romain at r-enthusiasts.com  Sun Mar  7 09:59:12 2010
From: romain at r-enthusiasts.com (Romain Francois)
Date: Sun, 07 Mar 2010 09:59:12 +0100
Subject: [Rd] for help on building a R package with several R function
 and a bunch of c, c++
In-Reply-To: <281603.59631.qm@web113307.mail.gq1.yahoo.com>
References: <281603.59631.qm@web113307.mail.gq1.yahoo.com>
Message-ID: <4B936AE0.1030601@r-enthusiasts.com>

On 03/06/2010 03:27 AM, alex46015 at yahoo.com wrote:
> I think the first question should be how to build a R function to call a bunch of C ,C++ which include one main program, and a makefile. My goal to build a R package will be next step.

You should jump straight to making a package. You are making you life 
difficult with this "main program & makefile" model.

Install Rcpp and try to use the Rcpp.package.skeleton, this will create 
a simple package that uses some C++ classes from Rcpp, as well as an R 
function that calls them.

> I read Rcpp , I am not sure if  RcppResultSet can solve my problem or other function. Once I make sure it work I need ask UNIX adminstrator to install it.

We don't know what your problem is. We can answer a question, but we 
cannot guess the question for you.

Rcpp works, please refer to our unit tests, for example look at this 
vignette: 
http://cran.r-project.org/web/packages/Rcpp/vignettes/Rcpp-unitTests.pdf

> I think it shouldn't be very complex,  as I know to build a R function easy with one C function.
>
> Thanks you for yout attention!
>
> Alex
>
> --- On Fri, 3/5/10, Dirk Eddelbuettel<edd at debian.org>  wrote:
>
>
> From: Dirk Eddelbuettel<edd at debian.org>
> Subject: Re: [Rd] for help on building a R package with several R function and a bunch of c, c++
> To: alex46015 at yahoo.com
> Cc: r-devel at r-project.org
> Date: Friday, March 5, 2010, 8:25 PM
>
>
>
> On 5 March 2010 at 13:15, alex46015 at yahoo.com wrote:
> | Hope I can get quick help from here, I have a bunch of c, c++ included main function and makefile. It works well on both UNIX and windows. I tried to build R package which include this C++ program and several other R functions.  These R function here are independent  of c++ code. I prefer to define one R function to call this c++ program (main function).
> |
> | I know how to build R package with just R function, but I don't know how to handle those c++ c code after I copied those  code  in ./src, I am reading manual "Writing R Extensions" , but I did n't catch the key point . Do you know any easy way to do it? ,
>
> When you asked _that exact same question_ this morning on r-help, you got the
> following answer:
>
>     From: Whit Armstrong<armstrong.whit at gmail.com>
>     To: alex46015 at yahoo.com
>     Cc: r-help at r-project.org
>     Subject: Re: [R] for help on building a R package with several R function and a bunch of c, c++
>     Date: Fri, 5 Mar 2010 10:33:54 -0500
>
>     Pick up Rcpp, make your life easier.
>
>     http://dirk.eddelbuettel.com/code/rcpp.html
>
>     -Whit
>
>     On Fri, Mar 5, 2010 at 9:19 AM,<alex46015 at yahoo.com>  wrote:
>     >  Hope I can get quick help from here, I have a bunch of c, c++ included main function and makefile. It works well on both UNIX and windows. I tried to build R package which include this C++ program and several other R functions.  R function here are independent  c++ code. I prefer to define one R function to call this c++ program.
>     >
>     >  Do you know any easy way to do it? I am reading manual "Writing R Extensions", I didn't catch the key point. I know how to build R package with just R function,  If I put all c++ code and makefile in /src...what I need do?
>     >
>     >  Thank you in advance!
>     >
>     >  Alex
>
> Now, can you let us know
>
>      a) what part of the answer was unclear to you, and
>
>      b) what made you think you needed to repost _the identical question_ here
>
> | Thank you in advance!
>
> You're welcome.
>
> Dirk


-- 
Romain Francois
Professional R Enthusiast
+33(0) 6 28 91 30 30
http://romainfrancois.blog.free.fr
|- http://tr.im/OIXN : raster images and RImageJ
|- http://tr.im/OcQe : Rcpp 0.7.7
`- http://tr.im/O1wO : highlight 0.1-5


From romain at r-enthusiasts.com  Sun Mar  7 10:48:21 2010
From: romain at r-enthusiasts.com (Romain Francois)
Date: Sun, 07 Mar 2010 10:48:21 +0100
Subject: [Rd] duplicate STRSXP : shallow copy ?
Message-ID: <4B937665.4000503@r-enthusiasts.com>

Hello,

As this little program illustrates, duplicating a STRSXP does not seem 
deep enough.

require( inline )

fx <- cfunction( signature( x = "character"), '
	SEXP y = PROTECT( duplicate( x ) );
	int n = LENGTH(x);
	int nc = 0 ;
	char* p = 0 ;
	for( int i=0; i<n; i++){
		p = (char*)( CHAR( STRING_ELT( y , i ) ) );
		nc = strlen( p ) ;
		for( int j=0; j<nc; j++){
			p[j] = tolower( p[j] ) ;
		}
	}
	SEXP res = PROTECT( allocVector( VECSXP, 2 ) );
	SET_VECTOR_ELT( res, 0, x );
	SET_VECTOR_ELT( res, 1, y );
	UNPROTECT(2) ;
	return res ;
', includes = "#include <ctype.h>" )

I get :

 > fx( c("Tick", "Tack", "Tock" ) )
[[1]]
[1] "tick" "tack" "tock"

[[2]]
[1] "tick" "tack" "tock"

where I would expect the second element of the list to not be modified. 
Is this intended ?

If not, I can track it down to the   DUPLICATE_ATOMIC_VECTOR in 
duplicate.c and submit a patch.

Also, CHARSXP don't seem to be actually duplicated :

     case CHARSXP:
	return s;

Romain

-- 
Romain Francois
Professional R Enthusiast
+33(0) 6 28 91 30 30
http://romainfrancois.blog.free.fr
|- http://tr.im/OIXN : raster images and RImageJ
|- http://tr.im/OcQe : Rcpp 0.7.7
`- http://tr.im/O1wO : highlight 0.1-5


From romain at r-enthusiasts.com  Sun Mar  7 12:01:20 2010
From: romain at r-enthusiasts.com (Romain Francois)
Date: Sun, 07 Mar 2010 12:01:20 +0100
Subject: [Rd] duplicate STRSXP : shallow copy ?
In-Reply-To: <4B937665.4000503@r-enthusiasts.com>
References: <4B937665.4000503@r-enthusiasts.com>
Message-ID: <4B938780.2050800@r-enthusiasts.com>


Hello,

I understand now that this is very intended after reading: 
http://cran.r-project.org/doc/manuals/R-ints.html#The-CHARSXP-cache

So we are not supposed to modify a CHARSXP character by character.

Sorry for the noise.

Romain

On 03/07/2010 10:48 AM, Romain Francois wrote:
>
> Hello,
>
> As this little program illustrates, duplicating a STRSXP does not seem
> deep enough.
>
> require( inline )
>
> fx <- cfunction( signature( x = "character"), '
> SEXP y = PROTECT( duplicate( x ) );
> int n = LENGTH(x);
> int nc = 0 ;
> char* p = 0 ;
> for( int i=0; i<n; i++){
> p = (char*)( CHAR( STRING_ELT( y , i ) ) );
> nc = strlen( p ) ;
> for( int j=0; j<nc; j++){
> p[j] = tolower( p[j] ) ;
> }
> }
> SEXP res = PROTECT( allocVector( VECSXP, 2 ) );
> SET_VECTOR_ELT( res, 0, x );
> SET_VECTOR_ELT( res, 1, y );
> UNPROTECT(2) ;
> return res ;
> ', includes = "#include <ctype.h>" )
>
> I get :
>
>  > fx( c("Tick", "Tack", "Tock" ) )
> [[1]]
> [1] "tick" "tack" "tock"
>
> [[2]]
> [1] "tick" "tack" "tock"
>
> where I would expect the second element of the list to not be modified.
> Is this intended ?
>
> If not, I can track it down to the DUPLICATE_ATOMIC_VECTOR in
> duplicate.c and submit a patch.
>
> Also, CHARSXP don't seem to be actually duplicated :
>
> case CHARSXP:
> return s;
>
> Romain
>


-- 
Romain Francois
Professional R Enthusiast
+33(0) 6 28 91 30 30
http://romainfrancois.blog.free.fr
|- http://tr.im/OIXN : raster images and RImageJ
|- http://tr.im/OcQe : Rcpp 0.7.7
`- http://tr.im/O1wO : highlight 0.1-5


From jsalsman at talknicer.com  Mon Mar  8 02:11:01 2010
From: jsalsman at talknicer.com (James Salsman)
Date: Sun, 7 Mar 2010 17:11:01 -0800
Subject: [Rd] application to mentor syrfr package development for Google
	Summer of Code 2010
Message-ID: <a3c2bd6c1003071711h346dd79fr820a41f9080700fc@mail.gmail.com>

Per http://rwiki.sciviews.org/doku.php?id=developers:projects:gsoc2010
-- and http://rwiki.sciviews.org/doku.php?id=developers:projects:gsoc2010:syrfr
-- I am applying to mentor the "Symbolic Regression for R" (syrfr)
package for the Google Summer of Code 2010.

I propose the following test which an applicant would have to pass in
order to qualify for the topic:

1. Describe each of the following terms as they relate to statistical
regression: categorical, periodic, modular, continuous, bimodal,
log-normal, logistic, Gompertz, and nonlinear.

2. Explain which parts of http://bit.ly/tablecurve were adopted in
SigmaPlot and which weren't.

3. Use the 'outliers' package to improve a regression fit maintaining
the correct extrapolation confidence intervals as are between those
with and without outlier exclusions in proportion to the confidence
that the outliers were reasonably excluded.  (Show your R transcript.)

4. Explain the relationship between degrees of freedom and correlated
independent variables.

Best regards,

James Salsman
jsalsman at talknicer.com
http://talknicer.com


From alex46015 at yahoo.com  Mon Mar  8 04:20:26 2010
From: alex46015 at yahoo.com (alex46015 at yahoo.com)
Date: Sun, 7 Mar 2010 19:20:26 -0800 (PST)
Subject: [Rd] for help on building a R package with several R function
	and a bunch of c, c++
In-Reply-To: <4B936AE0.1030601@r-enthusiasts.com>
Message-ID: <882270.66158.qm@web113303.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100307/cecd81af/attachment.pl>

From quantumelixir at gmail.com  Mon Mar  8 04:35:11 2010
From: quantumelixir at gmail.com (Chidambaram Annamalai)
Date: Mon, 8 Mar 2010 09:05:11 +0530
Subject: [Rd] application to mentor syrfr package development for Google
	Summer of Code 2010
In-Reply-To: <a3c2bd6c1003071711h346dd79fr820a41f9080700fc@mail.gmail.com>
References: <a3c2bd6c1003071711h346dd79fr820a41f9080700fc@mail.gmail.com>
Message-ID: <7021740b1003071935p51d4ed7dq2fe481e499f0ef5@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100308/da8f5873/attachment.pl>

From jsalsman at talknicer.com  Mon Mar  8 06:00:27 2010
From: jsalsman at talknicer.com (James Salsman)
Date: Sun, 7 Mar 2010 21:00:27 -0800
Subject: [Rd] application to mentor syrfr package development for Google
	Summer of Code 2010
In-Reply-To: <7021740b1003071935p51d4ed7dq2fe481e499f0ef5@mail.gmail.com>
References: <a3c2bd6c1003071711h346dd79fr820a41f9080700fc@mail.gmail.com>
	<7021740b1003071935p51d4ed7dq2fe481e499f0ef5@mail.gmail.com>
Message-ID: <a3c2bd6c1003072100g2e9ff45fw69c45b9257fa6e5c@mail.gmail.com>

Chillu,

If I understand your concern, you want to lay the foundation for
derivatives so that you can implement the search strategies described
in Schmidt and Lipson (2010) --
http://www.springerlink.com/content/l79v2183725413w0/ -- is that
right? It is not clear to me how well this generalized approach will
work in practice, but there is no reason not to proceed in parallel to
establish a framework under which you could implement the metrics
proposed by Schmidt and Lipson in the contemplated syrfr package.

I have expanded the test I proposed with two more questions -- at
http://rwiki.sciviews.org/doku.php?id=developers:projects:gsoc2010:syrfr
-- specifically:

5. Critique http://sites.google.com/site/gptips4matlab/

6. Use anova to compare the goodness-of-fit of a SSfpl nls fit with a
linear model of your choice. How can your characterize the
degree-of-freedom-adjusted goodness of fit of nonlinear models?

I believe pairwise anova.nls is the optimal comparison for nonlinear
models, but there are several good choices for approximations,
including the residual standard error, which I believe can be adjusted
for degrees of freedom, as can the F statistic which TableCurve uses;
see: http://en.wikipedia.org/wiki/F-test#Regression_problems

Best regards,
James Salsman


On Sun, Mar 7, 2010 at 7:35 PM, Chidambaram Annamalai
<quantumelixir at gmail.com> wrote:
> It's been a while since I proposed syrfr and I have been constantly in
> contact with the many people in the R community and I wasn't able to find a
> mentor for the project. I later got interested in the Automatic
> Differentiation proposal (adinr) and, on consulting with a few others within
> the R community, I mailed John Nash (who proposed adinr in the first place)
> if he'd be willing to take me up on the project. I got a positive reply only
> a few hours ago and it was my mistake to have not removed the syrfr proposal
> in time from the wiki, as being listed under proposals looking for mentors.
>
> While I appreciate your interest in the syrfr proposal I am afraid my
> allegiances have shifted towards the adinr proposal, as I got convinced that
> it might interest a larger group of people and it has wider scope in
> general.
>
> I apologize for having caused this trouble.
>
> Best Regards,
> Chillu
>
> On Mon, Mar 8, 2010 at 6:41 AM, James Salsman <jsalsman at talknicer.com>
> wrote:
>>
>> Per http://rwiki.sciviews.org/doku.php?id=developers:projects:gsoc2010
>> -- and
>> http://rwiki.sciviews.org/doku.php?id=developers:projects:gsoc2010:syrfr
>> -- I am applying to mentor the "Symbolic Regression for R" (syrfr)
>> package for the Google Summer of Code 2010.
>>
>> I propose the following test which an applicant would have to pass in
>> order to qualify for the topic:
>>
>> 1. Describe each of the following terms as they relate to statistical
>> regression: categorical, periodic, modular, continuous, bimodal,
>> log-normal, logistic, Gompertz, and nonlinear.
>>
>> 2. Explain which parts of http://bit.ly/tablecurve were adopted in
>> SigmaPlot and which weren't.
>>
>> 3. Use the 'outliers' package to improve a regression fit maintaining
>> the correct extrapolation confidence intervals as are between those
>> with and without outlier exclusions in proportion to the confidence
>> that the outliers were reasonably excluded. ?(Show your R transcript.)
>>
>> 4. Explain the relationship between degrees of freedom and correlated
>> independent variables.
>>
>> Best regards,
>>
>> James Salsman
>> jsalsman at talknicer.com
>> http://talknicer.com
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From quantumelixir at gmail.com  Mon Mar  8 07:39:27 2010
From: quantumelixir at gmail.com (Chidambaram Annamalai)
Date: Mon, 8 Mar 2010 12:09:27 +0530
Subject: [Rd] application to mentor syrfr package development for Google
	Summer of Code 2010
In-Reply-To: <a3c2bd6c1003072100g2e9ff45fw69c45b9257fa6e5c@mail.gmail.com>
References: <a3c2bd6c1003071711h346dd79fr820a41f9080700fc@mail.gmail.com>
	<7021740b1003071935p51d4ed7dq2fe481e499f0ef5@mail.gmail.com>
	<a3c2bd6c1003072100g2e9ff45fw69c45b9257fa6e5c@mail.gmail.com>
Message-ID: <7021740b1003072239n529da6f6ye95ce30c4715a03d@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100308/8f9d3d74/attachment.pl>

From romain at r-enthusiasts.com  Mon Mar  8 08:47:13 2010
From: romain at r-enthusiasts.com (Romain Francois)
Date: Mon, 08 Mar 2010 08:47:13 +0100
Subject: [Rd] for help on building a R package with several R function
 and a bunch of c, c++
In-Reply-To: <882270.66158.qm@web113303.mail.gq1.yahoo.com>
References: <882270.66158.qm@web113303.mail.gq1.yahoo.com>
Message-ID: <4B94AB81.7090807@r-enthusiasts.com>

Hi,

Yes, the problem is with spaces in path names. This has been fixed and 
will appear as Rcpp 0.7.8 in a few days.

If you are in a rush, you can build it from svn, or quote the path that 
is returned from CxxFlags.

Feel free to get back to us with more questions, although I'd encourage 
you to use the dedicated Rcpp-devel mailing list :
https://lists.r-forge.r-project.org/cgi-bin/mailman/listinfo/rcpp-devel

Romain

On 03/08/2010 04:20 AM, alex46015 at yahoo.com wrote:
> Thank you for your help. So far what I did?  on my notebook as follows. My OS is windows7.
> ?
> I downloaded Rcpp windows version, and load library("Rcpp") then.
> ?
> 1, Change main funnction to f1.cpp, remove makefile.
> 2 ,run Rcpp.package.skeleton(name="test",list=c("rec1.R","rect2.R"))
> 3,? edit ? /man, /R, copied my exist file? whch I have done? sucessfully?  without? any c++ program before.
> 4, copy?  f1.cpp and all other related cpp and c into /src/
> 5. Rcmd?  build --binary test
> ?
> It showed------
> ?
> making DLL....
> gcc -l???C:/PROGRA~2/R/R-210~1.1/include",???C:/PROGRA~2/R/R-210~1.1/bin/Rscript -e' Rcpp:::CxxxFlags<>'` -03 -Wall -std =gnu -999 -c cranbombind.c -o cranbombind.o
> ?
> gcc.exe: **\Documents/R/win-library/2.10/Rcpp/lib: No such file or directory...
>
> I checked the path, it did have C:\Users\alex **\Documents\R\win-library\2.10\Rcpp\lib
> ?
> I don't know how I can fix the problem. do you think it could be problem? there is a space between my first name and last name..
> ?
> All I tried are on my own PC at home? , I will tryon other ? PC in my office.
> ?
> Do you have suggestion?. Thanks,
> ?
> Alex
> --- On Sun, 3/7/10, Romain Francois<romain at r-enthusiasts.com>  wrote:
>
>
> From: Romain Francois<romain at r-enthusiasts.com>
> Subject: Re: [Rd] for help on building a R package with several R function and a bunch of c, c++
> To: alex46015 at yahoo.com
> Cc: "Dirk Eddelbuettel"<edd at debian.org>, r-devel at r-project.org
> Date: Sunday, March 7, 2010, 3:59 AM
>
>
> On 03/06/2010 03:27 AM, alex46015 at yahoo.com wrote:
>> I think the first question should be how to build a R function to call a bunch of C ,C++ which include one main program, and a makefile. My goal to build a R package will be next step.
>
> You should jump straight to making a package. You are making you life
> difficult with this "main program&  makefile" model.
>
> Install Rcpp and try to use the Rcpp.package.skeleton, this will create
> a simple package that uses some C++ classes from Rcpp, as well as an R
> function that calls them.
>
>> I read Rcpp , I am not sure if?  RcppResultSet can solve my problem or other function. Once I make sure it work I need ask UNIX adminstrator to install it.
>
> We don't know what your problem is. We can answer a question, but we
> cannot guess the question for you.
>
> Rcpp works, please refer to our unit tests, for example look at this
> vignette:
> http://cran.r-project.org/web/packages/Rcpp/vignettes/Rcpp-unitTests.pdf
>
>> I think it shouldn't be very complex,?  as I know to build a R function easy with one C function.
>>
>> Thanks you for yout attention!
>>
>> Alex
>>
>> --- On Fri, 3/5/10, Dirk Eddelbuettel<edd at debian.org>?  wrote:
>>
>>
>> From: Dirk Eddelbuettel<edd at debian.org>
>> Subject: Re: [Rd] for help on building a R package with several R function and a bunch of c, c++
>> To: alex46015 at yahoo.com
>> Cc: r-devel at r-project.org
>> Date: Friday, March 5, 2010, 8:25 PM
>>
>>
>>
>> On 5 March 2010 at 13:15, alex46015 at yahoo.com wrote:
>> | Hope I can get quick help from here, I have a bunch of c, c++ included main function and makefile. It works well on both UNIX and windows. I tried to build R package which include this C++ program and several other R functions.?  These R function here are independent?  of c++ code. I prefer to define one R function to call this c++ program (main function).
>> |
>> | I know how to build R package with just R function, but I don't know how to handle those c++ c code after I copied those?  code?  in ./src, I am reading manual "Writing R Extensions" , but I did n't catch the key point . Do you know any easy way to do it? ,
>>
>> When you asked _that exact same question_ this morning on r-help, you got the
>> following answer:
>>
>> ?  ? ? ? From: Whit Armstrong<armstrong.whit at gmail.com>
>> ?  ? ? ? To: alex46015 at yahoo.com
>> ?  ? ? ? Cc: r-help at r-project.org
>> ?  ? ? ? Subject: Re: [R] for help on building a R package with several R function and a bunch of c, c++
>> ?  ? ? ? Date: Fri, 5 Mar 2010 10:33:54 -0500
>>
>> ?  ? ? ? Pick up Rcpp, make your life easier.
>>
>> ?  ? ? ? http://dirk.eddelbuettel.com/code/rcpp.html
>>
>> ?  ? ? ? -Whit
>>
>> ?  ? ? ? On Fri, Mar 5, 2010 at 9:19 AM,<alex46015 at yahoo.com>?  wrote:
>> ?  ? ? ?>?  Hope I can get quick help from here, I have a bunch of c, c++ included main function and makefile. It works well on both UNIX and windows. I tried to build R package which include this C++ program and several other R functions.?  R function here are independent?  c++ code. I prefer to define one R function to call this c++ program.
>> ?  ? ? ?>
>> ?  ? ? ?>?  Do you know any easy way to do it? I am reading manual "Writing R Extensions", I didn't catch the key point. I know how to build R package with just R function,?  If I put all c++ code and makefile in /src...what I need do?
>> ?  ? ? ?>
>> ?  ? ? ?>?  Thank you in advance!
>> ?  ? ? ?>
>> ?  ? ? ?>?  Alex
>>
>> Now, can you let us know
>>
>> ?  ?  ?  a) what part of the answer was unclear to you, and
>>
>> ?  ?  ?  b) what made you think you needed to repost _the identical question_ here
>>
>> | Thank you in advance!
>>
>> You're welcome.
>>
>> Dirk

-- 
Romain Francois
Professional R Enthusiast
+33(0) 6 28 91 30 30
http://romainfrancois.blog.free.fr
|- http://tr.im/OIXN : raster images and RImageJ
|- http://tr.im/OcQe : Rcpp 0.7.7
`- http://tr.im/O1wO : highlight 0.1-5


From jsalsman at talknicer.com  Mon Mar  8 08:49:36 2010
From: jsalsman at talknicer.com (James Salsman)
Date: Sun, 7 Mar 2010 23:49:36 -0800
Subject: [Rd] application to mentor syrfr package development for Google
	Summer of Code 2010
In-Reply-To: <7021740b1003072239n529da6f6ye95ce30c4715a03d@mail.gmail.com>
References: <a3c2bd6c1003071711h346dd79fr820a41f9080700fc@mail.gmail.com>
	<7021740b1003071935p51d4ed7dq2fe481e499f0ef5@mail.gmail.com>
	<a3c2bd6c1003072100g2e9ff45fw69c45b9257fa6e5c@mail.gmail.com>
	<7021740b1003072239n529da6f6ye95ce30c4715a03d@mail.gmail.com>
Message-ID: <a3c2bd6c1003072349p3d506ca2s8959d88c913f9947@mail.gmail.com>

Chillu, I meant that development on both a syrfr R package capable of
using either F statistics or parametric derivatives should proceed in
parallel with your work on such a derivatives package. You are right
that genetic algorithm search (and general best-first search --
http://en.wikipedia.org/wiki/Best-first_search -- of which genetic
algorithms are various special cases) can be very effectively
parallelized, too.

In any case, thank you for pointing out Eureqa --
http://ccsl.mae.cornell.edu/eureqa -- but I can see no evidence there
or in the user manual or user forums that Eureqa is considering
degrees of freedom in its goodness-of-fit estimation.  That is a
serious problem which will typically result in invalid symbolic
regression.  I am sending this message also to Michael Schmidt so that
he might be able to comment on the extent to which Eureqa adjusts for
degrees of freedom in his fit evaluations.

Best regards,
James Salsman

On Sun, Mar 7, 2010 at 10:39 PM, Chidambaram Annamalai
<quantumelixir at gmail.com> wrote:
>
>> If I understand your concern, you want to lay the foundation for
>> derivatives so that you can implement the search strategies described
>> in Schmidt and Lipson (2010) --
>> http://www.springerlink.com/content/l79v2183725413w0/ -- is that
>> right?
>
> Yes. Basically traditional "naive" error estimators or fitness functions
> fail miserably when used in SR with implicit equations because they
> immediately close in on "best" fits like f(x) = x - x and other trivial
> solutions. In such cases no amount of regularization and complexity
> penalizing methods will help since x - x is fairly simple by most measures
> of complexity and it does have zero error. So the paper outlines such
> problems associated with "direct" error estimators and thus they infer the
> "triviality" of the fit by probing its estimates around nearby points and
> seeing if it does follow the pattern dictated by the data points -- ergo
> derivatives.
>
> Also, somewhat like a side benefit, this method also enables us to perform
> regression on closed loops and other implicit equations since the fitness
> functions are based only on derivatives. The specific form of the error is
> equation 1.2 which is what, I believe, comprises of the internals of the
> evaluation procedure used in Eureqa.
>
> You are correct in pointing out that there is no reason to not work in
> parallel, since GAs generally have a more or less fixed form
> (evaluate-reproduce cycle) which is quite easily parallelized. I have used
> OpenMP in the past, in which it is fairly trivial to parallelize well formed
> for loops.
>
> Chillu
>
>> It is not clear to me how well this generalized approach will
>> work in practice, but there is no reason not to proceed in parallel to
>> establish a framework under which you could implement the metrics
>> proposed by Schmidt and Lipson in the contemplated syrfr package.
>>
>> I have expanded the test I proposed with two more questions -- at
>> http://rwiki.sciviews.org/doku.php?id=developers:projects:gsoc2010:syrfr
>> -- specifically:
>>
>> 5. Critique http://sites.google.com/site/gptips4matlab/
>>
>> 6. Use anova to compare the goodness-of-fit of a SSfpl nls fit with a
>> linear model of your choice. How can your characterize the
>> degree-of-freedom-adjusted goodness of fit of nonlinear models?
>>
>> I believe pairwise anova.nls is the optimal comparison for nonlinear
>> models, but there are several good choices for approximations,
>> including the residual standard error, which I believe can be adjusted
>> for degrees of freedom, as can the F statistic which TableCurve uses;
>> see: http://en.wikipedia.org/wiki/F-test#Regression_problems
>>
>> Best regards,
>> James Salsman
>>
>>
>> On Sun, Mar 7, 2010 at 7:35 PM, Chidambaram Annamalai
>> <quantumelixir at gmail.com> wrote:
>> > It's been a while since I proposed syrfr and I have been constantly in
>> > contact with the many people in the R community and I wasn't able to
>> > find a
>> > mentor for the project. I later got interested in the Automatic
>> > Differentiation proposal (adinr) and, on consulting with a few others
>> > within
>> > the R community, I mailed John Nash (who proposed adinr in the first
>> > place)
>> > if he'd be willing to take me up on the project. I got a positive reply
>> > only
>> > a few hours ago and it was my mistake to have not removed the syrfr
>> > proposal
>> > in time from the wiki, as being listed under proposals looking for
>> > mentors.
>> >
>> > While I appreciate your interest in the syrfr proposal I am afraid my
>> > allegiances have shifted towards the adinr proposal, as I got convinced
>> > that
>> > it might interest a larger group of people and it has wider scope in
>> > general.
>> >
>> > I apologize for having caused this trouble.
>> >
>> > Best Regards,
>> > Chillu
>> >
>> > On Mon, Mar 8, 2010 at 6:41 AM, James Salsman <jsalsman at talknicer.com>
>> > wrote:
>> >>
>> >> Per http://rwiki.sciviews.org/doku.php?id=developers:projects:gsoc2010
>> >> -- and
>> >>
>> >> http://rwiki.sciviews.org/doku.php?id=developers:projects:gsoc2010:syrfr
>> >> -- I am applying to mentor the "Symbolic Regression for R" (syrfr)
>> >> package for the Google Summer of Code 2010.
>> >>
>> >> I propose the following test which an applicant would have to pass in
>> >> order to qualify for the topic:
>> >>
>> >> 1. Describe each of the following terms as they relate to statistical
>> >> regression: categorical, periodic, modular, continuous, bimodal,
>> >> log-normal, logistic, Gompertz, and nonlinear.
>> >>
>> >> 2. Explain which parts of http://bit.ly/tablecurve were adopted in
>> >> SigmaPlot and which weren't.
>> >>
>> >> 3. Use the 'outliers' package to improve a regression fit maintaining
>> >> the correct extrapolation confidence intervals as are between those
>> >> with and without outlier exclusions in proportion to the confidence
>> >> that the outliers were reasonably excluded. ?(Show your R transcript.)
>> >>
>> >> 4. Explain the relationship between degrees of freedom and correlated
>> >> independent variables.
>> >>
>> >> Best regards,
>> >>
>> >> James Salsman
>> >> jsalsman at talknicer.com
>> >> http://talknicer.com
>> >>
>> >> ______________________________________________
>> >> R-devel at r-project.org mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-devel
>> >
>> >
>
>


From quantumelixir at gmail.com  Mon Mar  8 09:21:29 2010
From: quantumelixir at gmail.com (Chidambaram Annamalai)
Date: Mon, 8 Mar 2010 13:51:29 +0530
Subject: [Rd] application to mentor syrfr package development for Google
	Summer of Code 2010
In-Reply-To: <a3c2bd6c1003072349p3d506ca2s8959d88c913f9947@mail.gmail.com>
References: <a3c2bd6c1003071711h346dd79fr820a41f9080700fc@mail.gmail.com>
	<7021740b1003071935p51d4ed7dq2fe481e499f0ef5@mail.gmail.com>
	<a3c2bd6c1003072100g2e9ff45fw69c45b9257fa6e5c@mail.gmail.com>
	<7021740b1003072239n529da6f6ye95ce30c4715a03d@mail.gmail.com>
	<a3c2bd6c1003072349p3d506ca2s8959d88c913f9947@mail.gmail.com>
Message-ID: <7021740b1003080021j51e781d5oee8576b552f5d0e8@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100308/5471253f/attachment.pl>

From alex46015 at yahoo.com  Fri Mar  5 20:02:33 2010
From: alex46015 at yahoo.com (alex46015 at yahoo.com)
Date: Fri, 5 Mar 2010 11:02:33 -0800 (PST)
Subject: [Rd] for help on building a R package with several R function and a
	bunch of c, c++
Message-ID: <450460.761.qm@web113305.mail.gq1.yahoo.com>

Hope I can get quick help from here, I have a bunch of c, c++ included main function and makefile. It works well on both UNIX and windows. I tried to build R package which include this C++ program and several other R functions.  These R functions here are independent of c++ code. I prefer to define one R function to call this c++ program. 

I know how to build R package with just R function, But I don't know how to handle those c++, c and makefile  after I copied them in  /src.  I am reading manual "Writing R Extensions", I didn't catch the key point . Do you guys anybody know easy way to do it?.

Thank you in advance! 

Alex


From mstokely at google.com  Sat Mar  6 00:10:12 2010
From: mstokely at google.com (mstokely at google.com)
Date: Sat,  6 Mar 2010 00:10:12 +0100 (CET)
Subject: [Rd] [PATCH] R ignores PATH_MAX and fails in long directories
	(PR#14228)
Message-ID: <20100305231012.3731F2831FF0@mail.pubhealth.ku.dk>

Full_Name: Murray Stokely
Version: 2.10.1
OS: Linux
Submission from: (NULL) (216.239.45.4)


The Defn.h header includes limits.h for PATH_MAX and then checks if it hasn't
been defined and if not sets something manually.  Some of the R code uses
PATH_MAX but a lot of other functions in unix/sys-unix.c and main/startup.c just
hardcodes a limit of 256 characters.

In my environment this is not always enough, so I ran into this being a problem,
and verified that the attached fix resolves the problem with R 2.10.1.

To duplicate the problem:

1. Create a large directory:
echo `seq 80` | tr ' ' '_' | sed -e 's|\(.*\)|/tmp/\1/\1/\1|g' | xargs mkdir -p
2. Copy R into it
3. Launch R from that directory / with that R_HOME
You don't be able to load the base module or run other functions.

I have prepared 2 patches, one against the trunk in Subversion :
http://people.FreeBSD.org/~murray/maxpath-svn-trunk.patch

And one against the 2.10 release branch :

http://people.FreeBSD.org/~murray/maxpath-svn-2-10-branch.patch

Trunk patch pasted below :

Index: src/unix/sys-unix.c
===================================================================
--- src/unix/sys-unix.c (revision 51208)
+++ src/unix/sys-unix.c (working copy)
@@ -61,7 +61,7 @@
 attribute_hidden
 FILE *R_OpenInitFile(void)
 {
-    char buf[256], *home, *p = getenv("R_PROFILE_USER");
+    char buf[PATH_MAX], *home, *p = getenv("R_PROFILE_USER");
     FILE *fp;

     fp = NULL;
@@ -72,7 +72,7 @@
            return fp;
        if((home = getenv("HOME")) == NULL)
            return NULL;
-       sprintf(buf, "%s/.Rprofile", home);
+       snprintf(buf, PATH_MAX, "%s/.Rprofile", home);
        if((fp = R_fopen(buf, "r")))
            return fp;
     }
Index: src/main/startup.c
===================================================================
--- src/main/startup.c  (revision 51208)
+++ src/main/startup.c  (working copy)
@@ -52,10 +52,10 @@
 attribute_hidden
 FILE *R_OpenLibraryFile(const char *file)
 {
-    char buf[256];
+    char buf[PATH_MAX];
     FILE *fp;

-    snprintf(buf, 256, "%s/library/base/R/%s", R_Home, file);
+    snprintf(buf, PATH_MAX, "%s/library/base/R/%s", R_Home, file);
     fp = R_fopen(buf, "r");
     return fp;
 }
@@ -71,10 +71,10 @@
 attribute_hidden
 FILE *R_OpenSysInitFile(void)
 {
-    char buf[256];
+    char buf[PATH_MAX];
     FILE *fp;

-    snprintf(buf, 256, "%s/library/base/R/Rprofile", R_Home);
+    snprintf(buf, PATH_MAX, "%s/library/base/R/Rprofile", R_Home);
     fp = R_fopen(buf, "r");
     return fp;
 }
@@ -82,7 +82,7 @@
 attribute_hidden
 FILE *R_OpenSiteFile(void)
 {
-    char buf[256];
+    char buf[PATH_MAX];
     FILE *fp;

     fp = NULL;
@@ -90,10 +90,10 @@
        if ((fp = R_fopen(getenv("R_PROFILE"), "r"))) return fp;
        if ((fp = R_fopen(getenv("RPROFILE"), "r"))) return fp;
 #ifdef R_ARCH
-       snprintf(buf, 256, "%s/etc/%s/Rprofile.site", R_Home, R_ARCH);
+       snprintf(buf, PATH_MAX, "%s/etc/%s/Rprofile.site", R_Home, R_ARCH);
        if ((fp = R_fopen(buf, "r"))) return fp;
 #endif
-       snprintf(buf, 256, "%s/etc/Rprofile.site", R_Home);
+       snprintf(buf, PATH_MAX, "%s/etc/Rprofile.site", R_Home);
        if ((fp = R_fopen(buf, "r"))) return fp;
     }
     return fp;
Index: src/main/main.c
===================================================================
--- src/main/main.c     (revision 51208)
+++ src/main/main.c     (working copy)
@@ -862,9 +862,9 @@
     }

     if (strcmp(R_GUIType, "Tk") == 0) {
-       char buf[256];
+       char buf[PATH_MAX];

-       snprintf(buf, 256, "%s/library/tcltk/exec/Tk-frontend.R", R_Home);
+       snprintf(buf, PATH_MAX, "%s/library/tcltk/exec/Tk-frontend.R", R_Home);
        R_LoadProfile(R_fopen(buf, "r"), R_GlobalEnv);
     }


From mds47 at cornell.edu  Mon Mar  8 09:41:52 2010
From: mds47 at cornell.edu (Michael Schmidt)
Date: Mon, 8 Mar 2010 03:41:52 -0500
Subject: [Rd] application to mentor syrfr package development for Google
	Summer of Code 2010
In-Reply-To: <a3c2bd6c1003072349p3d506ca2s8959d88c913f9947@mail.gmail.com>
References: <a3c2bd6c1003071711h346dd79fr820a41f9080700fc@mail.gmail.com>
	<7021740b1003071935p51d4ed7dq2fe481e499f0ef5@mail.gmail.com>
	<a3c2bd6c1003072100g2e9ff45fw69c45b9257fa6e5c@mail.gmail.com>
	<7021740b1003072239n529da6f6ye95ce30c4715a03d@mail.gmail.com>
	<a3c2bd6c1003072349p3d506ca2s8959d88c913f9947@mail.gmail.com>
Message-ID: <a528a0c41003080041n7eabcf60lf9a479f5feb80841@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100308/3641b9fc/attachment.pl>

From pd.mes at cbs.dk  Fri Mar  5 11:50:41 2010
From: pd.mes at cbs.dk (Peter Dalgaard)
Date: Fri, 5 Mar 2010 11:50:41 +0100
Subject: [Rd] Bug reporting system inquiry plus a bug report
	related	to	sort
In-Reply-To: <2CB2C26D-E528-48E7-9707-5254A2954928@me.com>
References: <fd27013a1003040729h328672d4p64facae896d1325a@mail.gmail.com>
	<0EE6CBA8-25BC-480E-88E9-D491C395D154@me.com>
	<20100304161059.GA4312@trex.cs.uni-magdeburg.de>
	<A8F2FE84-51DC-4F32-931F-54BAB5D2F91F@me.com>
	<DD514A5A-B21C-48DC-B46F-BA8507B31724@r-project.org>
	<2CB2C26D-E528-48E7-9707-5254A2954928@me.com>
Message-ID: <8EB956A4-21A5-4484-B863-75BA0CAFB690@cbs.dk>

Yes,

The webserver had died of loneliness, apparently. The automounter had failed following a power outage on the file servers and the physical machine is in my old office, which I'm not. 

The machine is currently up and running again, but don't expect any great longevity, since the move to Bugzilla is imminent. 

This will have to involve a short gap in services because we have to take the old server down before we can put up the new one, or PR#s will overlap. This also includes the mail interface, so mails to R-bugs at r-project.org may bounce for a while, including followups on R-devel. The exact timing is yet to be decided.  

-pd

On Mar 4, 2010, at 6:47 PM, Marc Schwartz wrote:

> Thanks for the update and your work on this Simon.
> 
> Regards,
> 
> Marc
> 
> On Mar 4, 2010, at 11:36 AM, Simon Urbanek wrote:
> 
>> Just to calm the discussion a bit - we already have decided to go with Bugzilla, we created tools for the import of old PRs and the new bug system is up and running in a test phase. The current downtime is not directly related to that - the cause is being investigated.
>> 
>> Cheers,
>> Simon
>> 
>> 
>> On Mar 4, 2010, at 11:58 , Marc Schwartz wrote:
>> 
>>> 
>>> On Mar 4, 2010, at 10:10 AM, Jens Elkner wrote:
>>> 
>>>> On Thu, Mar 04, 2010 at 09:39:41AM -0600, Marc Schwartz wrote:
>>>> 
>>>>> There has been talk over the years of moving to Bugzilla, but I am not clear on present status.
>>>> 
>>>> IMHO Bugzilla is too challenging for normal users/human beeings (even
>>>> developers are often not able to extract the info they need). So JIRA
>>>> (http://www.atlassian.com/software/jira/) might be a much better choice -
>>>> usually it is not a problem to ask for and get a license for free for
>>>> OpenSource projects ...
>>> 
>>> Jira was discussed a couple of years ago:
>>> 
>>> http://tolstoy.newcastle.edu.au/R/e5/devel/08/09/0006.html
>>> 
>>> I presume that the disposition towards non-FOSS platforms remains.
>>> 
>>> FWIW, the company that I work for uses Bugzilla (and SVN) on RHEL for our own internal development and bug/issue reporting processes. We have both clients and employees using our Bugzilla platform.
>>> 
>>> The key to having a successful result is not the software, but that the end users and developers can interact with a base of information that enables productive conversation. That places a certain burden on those reporting the bugs/issues to understand both when and how to report bugs, including providing sufficient information on the platform, versions, code and data to reliably reproduce the issue observed.
>>> 
>>> As we frequently see on both R-Help and R-Devel, in my mind, that is the limiting characteristic. With bug.report(), we still have issues and that is arguably independent of the host bug management system.
>>> 
>>> I would argue that if there was a somewhat bigger hurdle in place to bug reporting that compelled folks to post to R-Help first, before filing a formal bug report, that this would not be a bad outcome. Whatever the host system may be, a member of R Core will still need to manually process the report, adding to their overhead. Reducing the number of false positives would be helpful.
>>> 
>>> Marc
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel



Peter Dalgaard
pd.mes at cbs.dk


From maechler at stat.math.ethz.ch  Mon Mar  8 14:46:04 2010
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 8 Mar 2010 14:46:04 +0100
Subject: [Rd] R Bugs Repository - in transition - E-mail currently "stopped"
In-Reply-To: <EB7CA024-6A6C-480D-9384-26A777C228E4@cbs.dk>
References: <F53A7FF5-3BB6-4764-A3E4-33BE16203981@r-project.org>
	<30305DCA-02BF-472C-BECC-C79038B94BCB@cbs.dk>
	<19343.60858.130176.721995@lynne.math.ethz.ch>
	<4B9005FD.6090107@cbs.dk>
	<19344.55098.70635.10184@ridcully.stat.uni-muenchen.de>
	<4B9107A2.7010403@wu.ac.at>
	<A867895D-32E9-4EC4-96BA-B66C9BAC339E@cbs.dk>
	<19348.50360.918841.835020@lynne.math.ethz.ch>
	<EB7CA024-6A6C-480D-9384-26A777C228E4@cbs.dk>
Message-ID: <19348.65436.636964.967599@lynne.math.ethz.ch>

Dear R Developers,

in transitioning the R Bugs repository, (see earlier e-mails),
the E-mail address  R-bugs at r-project.org  has been disabled
-- only for a couple of hours -- after which it should be an
alias to the new address.

Martin Maechler, R Core Team


From therneau at mayo.edu  Mon Mar  8 17:16:32 2010
From: therneau at mayo.edu (Terry Therneau)
Date: Mon, 08 Mar 2010 10:16:32 -0600
Subject: [Rd] Defining a method in two packages
In-Reply-To: <alpine.LFD.2.00.1003061952170.14938@gannet.stats.ox.ac.uk>
References: <1267807677.9076.21.camel@punchbuggy>
	<4B92A2C9.1020803@statistik.tu-dortmund.de>
	<alpine.LFD.2.00.1003061952170.14938@gannet.stats.ox.ac.uk>
Message-ID: <1268064992.26491.31.camel@punchbuggy>

Brian & Uwe,
  Thanks for responding.  Let me see if I can refine the query and move
towards a solution.

>From Uwe: 
> Of course, after loading lme4, you can still use the ranef from coxme:
> coxme::ranef(fit)

Of course, but I'm interested in other users (as well as myself) and
prefer to avoid the 'secret handshake' form of a call.

> In your own package, you could simply import the generic from coxme.

I don't understand this.


>From Brian:
> My solution would though be NOT to reuse a name that is already 
> established in another package (nlme has used it for many years).
> The design problem is that generic foo() in package B might have 
> nothing to do with foo() in package A.  When it does, we expect B ...

I disagree completely.  It is precisely because of nlme and lmer
prominence that I want to reprise their methods: my users have a much
better chance of remembering how to do things.  If I followed this logic
to its conclusion one should never define a print() method because it
might conflict with the base definition.  
  The consequence is that I am under obligation to NOT make my method
something different than Doug's, if I want to satisfy the goal of user
level consistency.  Several aspects of coxme purposefully mimic lmer,
even in cases (such as print.coxme) where his layout is not precisely
what I would have chosen.

  I really do not want to require lme4 just to pick up the methods
definition.  It's a huge package, and there is no code in common.  Both
packages work very hard to be efficient via sparse matrix methods, but
the actual details are completely different due to the mathematical
structure of our underlying likelihoods.  Use of both in the same
analysis would be rare, so my issue won't be common.

> The situation can be alleviated by making S3 methods visible.  Thus if
> coxme exported coxme:::ranef.coxme and lme4 had a default method

> ranef <- function (object, ...) UseMethod("ranef")

 I have no objection to exporting my method.  If a joint change to lme4
and coxme is the best solution, I will take the discussion off line with
Doug.  Is this the best way forward?

Terry


From alex46015 at yahoo.com  Mon Mar  8 18:16:01 2010
From: alex46015 at yahoo.com (alex46015 at yahoo.com)
Date: Mon, 8 Mar 2010 09:16:01 -0800 (PST)
Subject: [Rd] for help on building a R package with several R function
	and a bunch of c, c++
In-Reply-To: <4B94AB81.7090807@r-enthusiasts.com>
Message-ID: <249088.44490.qm@web113311.mail.gq1.yahoo.com>

I built R package with only R code before, this is first time I build R package with mixed R code and C, C++ code. I would try Rcpp on our center UNIX, before I ask the administrator to install it, I need confirm several issue are right. Thank you for you patient.

1, I change main function as a general function with certain name such as void tranptest(char* filename[], double* para[]), and copy this file and other related c, c++  h, program to /src, and removed makefile.

2, I noticed there is Makevars after I ran Rcpp.package.skeleton,
do I need modify this file before I run R CMD build? what I need do for  rcpp_hello_world.cpp rcpp_hello_world.cpp? it is template file handled by the program or it is for me to edit it as template?

3, Do I need write a R function such as tranptest<-function(inputfile, ctlfile,outfile, param1,param2,param3)
{
filenames<-c(inputfile,ctlfile,outfile)
params<-as.vector(c(param1, param2,param3))
.C("tranptest", as.character(filenames),as.double(params))
}
before I run R CMD build? if so, that means I put this R function in /R?

4, Do I need do anything to run library.dyname to load those complied objects? Where I can make sure it successful and I can use .C("tranptest",....) in R before the wholepackage installed?


Thank you so much!

Alex
--- On Mon, 3/8/10, Romain Francois <romain at r-enthusiasts.com> wrote:

> From: Romain Francois <romain at r-enthusiasts.com>
> Subject: Re: [Rd] for help on building a R package with several R function and a bunch of c, c++
> To: alex46015 at yahoo.com
> Cc: r-devel at r-project.org, "Dirk Eddelbuettel" <edd at debian.org>
> Date: Monday, March 8, 2010, 2:47 AM
> Hi,
> 
> Yes, the problem is with spaces in path names. This has
> been fixed and 
> will appear as Rcpp 0.7.8 in a few days.
> 
> If you are in a rush, you can build it from svn, or quote
> the path that 
> is returned from CxxFlags.
> 
> Feel free to get back to us with more questions, although
> I'd encourage 
> you to use the dedicated Rcpp-devel mailing list :
> https://lists.r-forge.r-project.org/cgi-bin/mailman/listinfo/rcpp-devel
> 
> Romain
> 
> On 03/08/2010 04:20 AM, alex46015 at yahoo.com
> wrote:
> > Thank you for your help. So far what I did?? on
> my notebook as follows. My OS is windows7.
> > ?
> > I downloaded Rcpp windows version, and load
> library("Rcpp") then.
> > ?
> > 1, Change main funnction to f1.cpp, remove makefile.
> > 2 ,run
> Rcpp.package.skeleton(name="test",list=c("rec1.R","rect2.R"))
> > 3,? edit ? /man, /R, copied my exist file? whch I
> have done? sucessfully?? without? any c++ program
> before.
> > 4, copy?? f1.cpp and all other related cpp and c
> into /src/
> > 5. Rcmd?? build --binary test
> > ?
> > It showed------
> > ?
> > making DLL....
> > gcc
> -l???C:/PROGRA~2/R/R-210~1.1/include",???C:/PROGRA~2/R/R-210~1.1/bin/Rscript
> -e' Rcpp:::CxxxFlags<>'` -03 -Wall -std =gnu -999 -c
> cranbombind.c -o cranbombind.o
> > ?
> > gcc.exe: **\Documents/R/win-library/2.10/Rcpp/lib: No
> such file or directory...
> >
> > I checked the path, it did have C:\Users\alex
> **\Documents\R\win-library\2.10\Rcpp\lib
> > ?
> > I don't know how I can fix the problem. do you think
> it could be problem? there is a space between my first name
> and last name..
> > ?
> > All I tried are on my own PC at home? , I will tryon
> other ? PC in my office.
> > ?
> > Do you have suggestion?. Thanks,
> > ?
> > Alex
> > --- On Sun, 3/7/10, Romain Francois<romain at r-enthusiasts.com>?
> wrote:
> >
> >
> > From: Romain Francois<romain at r-enthusiasts.com>
> > Subject: Re: [Rd] for help on building a R package
> with several R function and a bunch of c, c++
> > To: alex46015 at yahoo.com
> > Cc: "Dirk Eddelbuettel"<edd at debian.org>,
> r-devel at r-project.org
> > Date: Sunday, March 7, 2010, 3:59 AM
> >
> >
> > On 03/06/2010 03:27 AM, alex46015 at yahoo.com
> wrote:
> >> I think the first question should be how to build
> a R function to call a bunch of C ,C++ which include one
> main program, and a makefile. My goal to build a R package
> will be next step.
> >
> > You should jump straight to making a package. You are
> making you life
> > difficult with this "main program&? makefile"
> model.
> >
> > Install Rcpp and try to use the Rcpp.package.skeleton,
> this will create
> > a simple package that uses some C++ classes from Rcpp,
> as well as an R
> > function that calls them.
> >
> >> I read Rcpp , I am not sure if??
> RcppResultSet can solve my problem or other function. Once I
> make sure it work I need ask UNIX adminstrator to install
> it.
> >
> > We don't know what your problem is. We can answer a
> question, but we
> > cannot guess the question for you.
> >
> > Rcpp works, please refer to our unit tests, for
> example look at this
> > vignette:
> > http://cran.r-project.org/web/packages/Rcpp/vignettes/Rcpp-unitTests.pdf
> >
> >> I think it shouldn't be very complex,?? as I
> know to build a R function easy with one C function.
> >>
> >> Thanks you for yout attention!
> >>
> >> Alex
> >>
> >> --- On Fri, 3/5/10, Dirk Eddelbuettel<edd at debian.org>??
> wrote:
> >>
> >>
> >> From: Dirk Eddelbuettel<edd at debian.org>
> >> Subject: Re: [Rd] for help on building a R package
> with several R function and a bunch of c, c++
> >> To: alex46015 at yahoo.com
> >> Cc: r-devel at r-project.org
> >> Date: Friday, March 5, 2010, 8:25 PM
> >>
> >>
> >>
> >> On 5 March 2010 at 13:15, alex46015 at yahoo.com
> wrote:
> >> | Hope I can get quick help from here, I have a
> bunch of c, c++ included main function and makefile. It
> works well on both UNIX and windows. I tried to build R
> package which include this C++ program and several other R
> functions.?? These R function here are
> independent?? of c++ code. I prefer to define one R
> function to call this c++ program (main function).
> >> |
> >> | I know how to build R package with just R
> function, but I don't know how to handle those c++ c code
> after I copied those?? code?? in ./src, I am
> reading manual "Writing R Extensions" , but I did n't catch
> the key point . Do you know any easy way to do it? ,
> >>
> >> When you asked _that exact same question_ this
> morning on r-help, you got the
> >> following answer:
> >>
> >> ?? ? ? ? From: Whit Armstrong<armstrong.whit at gmail.com>
> >> ?? ? ? ? To: alex46015 at yahoo.com
> >> ?? ? ? ? Cc: r-help at r-project.org
> >> ?? ? ? ? Subject: Re: [R] for help on
> building a R package with several R function and a bunch of
> c, c++
> >> ?? ? ? ? Date: Fri, 5 Mar 2010 10:33:54
> -0500
> >>
> >> ?? ? ? ? Pick up Rcpp, make your life
> easier.
> >>
> >> ?? ? ? ? http://dirk.eddelbuettel.com/code/rcpp.html
> >>
> >> ?? ? ? ? -Whit
> >>
> >> ?? ? ? ? On Fri, Mar 5, 2010 at 9:19
> AM,<alex46015 at yahoo.com>??
> wrote:
> >> ?? ? ? ?>?? Hope I can get quick
> help from here, I have a bunch of c, c++ included main
> function and makefile. It works well on both UNIX and
> windows. I tried to build R package which include this C++
> program and several other R functions.?? R function
> here are independent?? c++ code. I prefer to define
> one R function to call this c++ program.
> >> ?? ? ? ?>
> >> ?? ? ? ?>?? Do you know any easy
> way to do it? I am reading manual "Writing R Extensions", I
> didn't catch the key point. I know how to build R package
> with just R function,?? If I put all c++ code and
> makefile in /src...what I need do?
> >> ?? ? ? ?>
> >> ?? ? ? ?>?? Thank you in
> advance!
> >> ?? ? ? ?>
> >> ?? ? ? ?>?? Alex
> >>
> >> Now, can you let us know
> >>
> >> ?? ?? ?? a) what part of the
> answer was unclear to you, and
> >>
> >> ?? ?? ?? b) what made you think
> you needed to repost _the identical question_ here
> >>
> >> | Thank you in advance!
> >>
> >> You're welcome.
> >>
> >> Dirk
> 
> -- 
> Romain Francois
> Professional R Enthusiast
> +33(0) 6 28 91 30 30
> http://romainfrancois.blog.free.fr
> |- http://tr.im/OIXN : raster images and RImageJ
> |- http://tr.im/OcQe : Rcpp 0.7.7
> `- http://tr.im/O1wO : highlight 0.1-5
> 
> 





From romain at r-enthusiasts.com  Mon Mar  8 18:34:17 2010
From: romain at r-enthusiasts.com (Romain Francois)
Date: Mon, 08 Mar 2010 18:34:17 +0100
Subject: [Rd] for help on building a R package with several R function
 and a bunch of c, c++
In-Reply-To: <249088.44490.qm@web113311.mail.gq1.yahoo.com>
References: <249088.44490.qm@web113311.mail.gq1.yahoo.com>
Message-ID: <4B953519.9050306@r-enthusiasts.com>

Hello,

On 03/08/2010 06:16 PM, alex46015 at yahoo.com wrote:
> I built R package with only R code before, this is first time I build R package with mixed R code and C, C++ code. I would try Rcpp on our center UNIX, before I ask the administrator to install it, I need confirm several issue are right. Thank you for you patient.
>
> 1, I change main function as a general function with certain name such as void tranptest(char* filename[], double* para[]), and copy this file and other related c, c++  h, program to /src, and removed makefile.

I'd encourage you to use the .Call interface,

> 2, I noticed there is Makevars after I ran Rcpp.package.skeleton,
> do I need modify this file before I run R CMD build?

no

what I need do for  rcpp_hello_world.cpp rcpp_hello_world.cpp? it is 
template file handled by the program or it is for me to edit it as template?

those are examples that we expand to show the kind of code you can 
write. feel free to dump them.

In particular, it shows you how you declare c++ functions to be used by R:
- The RcppExport prevents c++ mangling. see the rationale for this in 
writing R extensions. (RcppExport is just an alias for extern "C")
- The function returns a SEXP (see writing R extensions)
- The function takes zero or more SEXP as input (see writing R extensions)

So I'd suggest you write your function something like this :

RcppExport SEXP tranptest( SEXP filename_, SEXP para_){
	Rcpp::CharacterVector filename( filename_ ) ;
	Rcpp::NumericVector para(para_) ;

	// use filename and para to do whatever you want to do with them
	// return  something
}

> 3, Do I need write a R function such as tranptest<-function(inputfile, ctlfile,outfile, param1,param2,param3)
> {
> filenames<-c(inputfile,ctlfile,outfile)
> params<-as.vector(c(param1, param2,param3))
> .C("tranptest", as.character(filenames),as.double(params))
> }
> before I run R CMD build? if so, that means I put this R function in /R?

Again, I suggest you look into the .Call interface and go for something 
like this:

.Call( "tranptest", filenames, params, PACKAGE = "yourpackage" )

> 4, Do I need do anything to run library.dyname to load those complied objects? Where I can make sure it successful and I can use .C("tranptest",....) in R before the wholepackage installed?

Rcpp.package.skeleton adds a useDynLib directive to the NAMESPACE so you 
should be fine.

> Thank you so much!
 >
> Alex
> --- On Mon, 3/8/10, Romain Francois<romain at r-enthusiasts.com>  wrote:
>
>> From: Romain Francois<romain at r-enthusiasts.com>
>> Subject: Re: [Rd] for help on building a R package with several R function and a bunch of c, c++
>> To: alex46015 at yahoo.com
>> Cc: r-devel at r-project.org, "Dirk Eddelbuettel"<edd at debian.org>
>> Date: Monday, March 8, 2010, 2:47 AM
>> Hi,
>>
>> Yes, the problem is with spaces in path names. This has
>> been fixed and
>> will appear as Rcpp 0.7.8 in a few days.
>>
>> If you are in a rush, you can build it from svn, or quote
>> the path that
>> is returned from CxxFlags.
>>
>> Feel free to get back to us with more questions, although
>> I'd encourage
>> you to use the dedicated Rcpp-devel mailing list :
>> https://lists.r-forge.r-project.org/cgi-bin/mailman/listinfo/rcpp-devel
>>
>> Romain
>>
>> On 03/08/2010 04:20 AM, alex46015 at yahoo.com
>> wrote:
>>> Thank you for your help. So far what I did?  on
>> my notebook as follows. My OS is windows7.
>>> ?
>>> I downloaded Rcpp windows version, and load
>> library("Rcpp") then.
>>> ?
>>> 1, Change main funnction to f1.cpp, remove makefile.
>>> 2 ,run
>> Rcpp.package.skeleton(name="test",list=c("rec1.R","rect2.R"))
>>> 3,? edit ? /man, /R, copied my exist file? whch I
>> have done? sucessfully?  without? any c++ program
>> before.
>>> 4, copy?  f1.cpp and all other related cpp and c
>> into /src/
>>> 5. Rcmd?  build --binary test
>>> ?
>>> It showed------
>>> ?
>>> making DLL....
>>> gcc
>> -l???C:/PROGRA~2/R/R-210~1.1/include",???C:/PROGRA~2/R/R-210~1.1/bin/Rscript
>> -e' Rcpp:::CxxxFlags<>'` -03 -Wall -std =gnu -999 -c
>> cranbombind.c -o cranbombind.o
>>> ?
>>> gcc.exe: **\Documents/R/win-library/2.10/Rcpp/lib: No
>> such file or directory...
>>>
>>> I checked the path, it did have C:\Users\alex
>> **\Documents\R\win-library\2.10\Rcpp\lib
>>> ?
>>> I don't know how I can fix the problem. do you think
>> it could be problem? there is a space between my first name
>> and last name..
>>> ?
>>> All I tried are on my own PC at home? , I will tryon
>> other ? PC in my office.
>>> ?
>>> Do you have suggestion?. Thanks,
>>> ?
>>> Alex
>>> --- On Sun, 3/7/10, Romain Francois<romain at r-enthusiasts.com>
>> wrote:
>>>
>>>
>>> From: Romain Francois<romain at r-enthusiasts.com>
>>> Subject: Re: [Rd] for help on building a R package
>> with several R function and a bunch of c, c++
>>> To: alex46015 at yahoo.com
>>> Cc: "Dirk Eddelbuettel"<edd at debian.org>,
>> r-devel at r-project.org
>>> Date: Sunday, March 7, 2010, 3:59 AM
>>>
>>>
>>> On 03/06/2010 03:27 AM, alex46015 at yahoo.com
>> wrote:
>>>> I think the first question should be how to build
>> a R function to call a bunch of C ,C++ which include one
>> main program, and a makefile. My goal to build a R package
>> will be next step.
>>>
>>> You should jump straight to making a package. You are
>> making you life
>>> difficult with this "main program&   makefile"
>> model.
>>>
>>> Install Rcpp and try to use the Rcpp.package.skeleton,
>> this will create
>>> a simple package that uses some C++ classes from Rcpp,
>> as well as an R
>>> function that calls them.
>>>
>>>> I read Rcpp , I am not sure if?
>> RcppResultSet can solve my problem or other function. Once I
>> make sure it work I need ask UNIX adminstrator to install
>> it.
>>>
>>> We don't know what your problem is. We can answer a
>> question, but we
>>> cannot guess the question for you.
>>>
>>> Rcpp works, please refer to our unit tests, for
>> example look at this
>>> vignette:
>>> http://cran.r-project.org/web/packages/Rcpp/vignettes/Rcpp-unitTests.pdf
>>>
>>>> I think it shouldn't be very complex,?  as I
>> know to build a R function easy with one C function.
>>>>
>>>> Thanks you for yout attention!
>>>>
>>>> Alex
>>>>
>>>> --- On Fri, 3/5/10, Dirk Eddelbuettel<edd at debian.org>?
>> wrote:
>>>>
>>>>
>>>> From: Dirk Eddelbuettel<edd at debian.org>
>>>> Subject: Re: [Rd] for help on building a R package
>> with several R function and a bunch of c, c++
>>>> To: alex46015 at yahoo.com
>>>> Cc: r-devel at r-project.org
>>>> Date: Friday, March 5, 2010, 8:25 PM
>>>>
>>>>
>>>>
>>>> On 5 March 2010 at 13:15, alex46015 at yahoo.com
>> wrote:
>>>> | Hope I can get quick help from here, I have a
>> bunch of c, c++ included main function and makefile. It
>> works well on both UNIX and windows. I tried to build R
>> package which include this C++ program and several other R
>> functions.?  These R function here are
>> independent?  of c++ code. I prefer to define one R
>> function to call this c++ program (main function).
>>>> |
>>>> | I know how to build R package with just R
>> function, but I don't know how to handle those c++ c code
>> after I copied those?  code?  in ./src, I am
>> reading manual "Writing R Extensions" , but I did n't catch
>> the key point . Do you know any easy way to do it? ,
>>>>
>>>> When you asked _that exact same question_ this
>> morning on r-help, you got the
>>>> following answer:
>>>>
>>>> ?  ? ? ? From: Whit Armstrong<armstrong.whit at gmail.com>
>>>> ?  ? ? ? To: alex46015 at yahoo.com
>>>> ?  ? ? ? Cc: r-help at r-project.org
>>>> ?  ? ? ? Subject: Re: [R] for help on
>> building a R package with several R function and a bunch of
>> c, c++
>>>> ?  ? ? ? Date: Fri, 5 Mar 2010 10:33:54
>> -0500
>>>>
>>>> ?  ? ? ? Pick up Rcpp, make your life
>> easier.
>>>>
>>>> ?  ? ? ? http://dirk.eddelbuettel.com/code/rcpp.html
>>>>
>>>> ?  ? ? ? -Whit
>>>>
>>>> ?  ? ? ? On Fri, Mar 5, 2010 at 9:19
>> AM,<alex46015 at yahoo.com>?
>> wrote:
>>>> ?  ? ? ?>?  Hope I can get quick
>> help from here, I have a bunch of c, c++ included main
>> function and makefile. It works well on both UNIX and
>> windows. I tried to build R package which include this C++
>> program and several other R functions.?  R function
>> here are independent?  c++ code. I prefer to define
>> one R function to call this c++ program.
>>>> ?  ? ? ?>
>>>> ?  ? ? ?>?  Do you know any easy
>> way to do it? I am reading manual "Writing R Extensions", I
>> didn't catch the key point. I know how to build R package
>> with just R function,?  If I put all c++ code and
>> makefile in /src...what I need do?
>>>> ?  ? ? ?>
>>>> ?  ? ? ?>?  Thank you in
>> advance!
>>>> ?  ? ? ?>
>>>> ?  ? ? ?>?  Alex
>>>>
>>>> Now, can you let us know
>>>>
>>>> ?  ?  ?  a) what part of the
>> answer was unclear to you, and
>>>>
>>>> ?  ?  ?  b) what made you think
>> you needed to repost _the identical question_ here
>>>>
>>>> | Thank you in advance!
>>>>
>>>> You're welcome.
>>>>
>>>> Dirk


-- 
Romain Francois
Professional R Enthusiast
+33(0) 6 28 91 30 30
http://romainfrancois.blog.free.fr
|- http://tr.im/OIXN : raster images and RImageJ
|- http://tr.im/OcQe : Rcpp 0.7.7
`- http://tr.im/O1wO : highlight 0.1-5


From edd at debian.org  Mon Mar  8 18:37:53 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon, 8 Mar 2010 11:37:53 -0600
Subject: [Rd] for help on building a R package with several R function
	and a bunch of c, c++
In-Reply-To: <249088.44490.qm@web113311.mail.gq1.yahoo.com>
References: <4B94AB81.7090807@r-enthusiasts.com>
	<249088.44490.qm@web113311.mail.gq1.yahoo.com>
Message-ID: <19349.13809.379307.450832@ron.nulle.part>


Alex,

Can you _please_ stop spamming r-devel?  Romain and I repeatedly pointed the
existence of the rcpp-devel list out to you. Please consider using it.

There are existing packages that use what you want to try use. I find it
beneficial to start from a _working example_.  Take e.g. the earthmovedist
package on R-Forge, try to understand how it works and how it makes use of
Rcpp and adapt your use case to what works.  If it fails, send pointed
messages with repeatable examples and clear error message to an appropriate
list, eg rcpp-devel. 

Dirk

-- 
  Registration is open for the 2nd International conference R / Finance 2010
  See http://www.RinFinance.com for details, and see you in Chicago in April!


From simon.urbanek at r-project.org  Mon Mar  8 18:53:06 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 8 Mar 2010 12:53:06 -0500
Subject: [Rd] for help on building a R package with several R function
	and a bunch of c, c++
In-Reply-To: <249088.44490.qm@web113311.mail.gq1.yahoo.com>
References: <249088.44490.qm@web113311.mail.gq1.yahoo.com>
Message-ID: <FC20E721-D14A-425C-B8BE-BA22531D4D4E@r-project.org>

Alex,

On Mar 8, 2010, at 12:16 , alex46015 at yahoo.com wrote:

> I built R package with only R code before, this is first time I  
> build R package with mixed R code and C, C++ code. I would try Rcpp  
> on our center UNIX, before I ask the administrator to install it, I  
> need confirm several issue are right. Thank you for you patient.
>
> 1, I change main function as a general function with certain name  
> such as void tranptest(char* filename[], double* para[]), and copy  
> this file and other related c, c++  h, program to /src, and removed  
> makefile.
>

Yes, that's perfect - for the kind of usage you don't need Rcpp at all  
- R supports C++ sources out of the box. Just make sure your tranptest  
function is either in a .c file or you put
extern "C"
in front of it if it's in .cpp , e.g:

foo.cpp:
extern "C" void tranptest(char **fn, double *par) {
...
}


> 2, I noticed there is Makevars after I ran Rcpp.package.skeleton,
> do I need modify this file before I run R CMD build? what I need do  
> for  rcpp_hello_world.cpp rcpp_hello_world.cpp? it is template file  
> handled by the program or it is for me to edit it as template?
>
> 3, Do I need write a R function such as tranptest<- 
> function(inputfile, ctlfile,outfile, param1,param2,param3)
> {
> filenames<-c(inputfile,ctlfile,outfile)
> params<-as.vector(c(param1, param2,param3))
> .C("tranptest", as.character(filenames),as.double(params))
> }
> before I run R CMD build? if so, that means I put this R function  
> in /R?
>

yes, in R/foo.R (replace "foo" by any name you want)


> 4, Do I need do anything to run library.dyname to load those  
> complied objects?

If you have a namespace just add
useDynLib(foo)
where "foo" is the name of your package. If you don't have a namespace  
(or don't kwno what that is ;)) just add a file R/zzz.R with the  
following content to your package:
.First.lib <- function(libname, pkgname) library.dynam("foo", pkgname,  
libname)
where "foo" is the name of your package.

> Where I can make sure it successful and I can  
> use .C("tranptest",....) in R before the wholepackage installed?
>

It's really simple - you don't need to install the package to test it.  
Assuming "foo" is the name of your package:
Build the sources:
R CMD SHLIB -o foo.so *.c*

start R in the same directory:
R
# load the library you just compiled
dyn.load("foo.so")
# test your code
.C("tranptest", c("file1", "file2"), as.double(1,2,3,4))

Cheers,
Simon


>
> Alex
> --- On Mon, 3/8/10, Romain Francois <romain at r-enthusiasts.com> wrote:
>
>> From: Romain Francois <romain at r-enthusiasts.com>
>> Subject: Re: [Rd] for help on building a R package with several R  
>> function and a bunch of c, c++
>> To: alex46015 at yahoo.com
>> Cc: r-devel at r-project.org, "Dirk Eddelbuettel" <edd at debian.org>
>> Date: Monday, March 8, 2010, 2:47 AM
>> Hi,
>>
>> Yes, the problem is with spaces in path names. This has
>> been fixed and
>> will appear as Rcpp 0.7.8 in a few days.
>>
>> If you are in a rush, you can build it from svn, or quote
>> the path that
>> is returned from CxxFlags.
>>
>> Feel free to get back to us with more questions, although
>> I'd encourage
>> you to use the dedicated Rcpp-devel mailing list :
>> https://lists.r-forge.r-project.org/cgi-bin/mailman/listinfo/rcpp-devel
>>
>> Romain
>>
>> On 03/08/2010 04:20 AM, alex46015 at yahoo.com
>> wrote:
>>> Thank you for your help. So far what I did?  on
>> my notebook as follows. My OS is windows7.
>>> ?
>>> I downloaded Rcpp windows version, and load
>> library("Rcpp") then.
>>> ?
>>> 1, Change main funnction to f1.cpp, remove makefile.
>>> 2 ,run
>> Rcpp.package.skeleton(name="test",list=c("rec1.R","rect2.R"))
>>> 3,? edit ? /man, /R, copied my exist file? whch I
>> have done? sucessfully?  without? any c++ program
>> before.
>>> 4, copy?  f1.cpp and all other related cpp and c
>> into /src/
>>> 5. Rcmd?  build --binary test
>>> ?
>>> It showed------
>>> ?
>>> making DLL....
>>> gcc
>> -l???C:/PROGRA~2/R/R-210~1.1/include",???C:/PROGRA~2/R/R-210~1.1/ 
>> bin/Rscript
>> -e' Rcpp:::CxxxFlags<>'` -03 -Wall -std =gnu -999 -c
>> cranbombind.c -o cranbombind.o
>>> ?
>>> gcc.exe: **\Documents/R/win-library/2.10/Rcpp/lib: No
>> such file or directory...
>>>
>>> I checked the path, it did have C:\Users\alex
>> **\Documents\R\win-library\2.10\Rcpp\lib
>>> ?
>>> I don't know how I can fix the problem. do you think
>> it could be problem? there is a space between my first name
>> and last name..
>>> ?
>>> All I tried are on my own PC at home? , I will tryon
>> other ? PC in my office.
>>> ?
>>> Do you have suggestion?. Thanks,
>>> ?
>>> Alex
>>> --- On Sun, 3/7/10, Romain Francois<romain at r-enthusiasts.com>
>> wrote:
>>>
>>>
>>> From: Romain Francois<romain at r-enthusiasts.com>
>>> Subject: Re: [Rd] for help on building a R package
>> with several R function and a bunch of c, c++
>>> To: alex46015 at yahoo.com
>>> Cc: "Dirk Eddelbuettel"<edd at debian.org>,
>> r-devel at r-project.org
>>> Date: Sunday, March 7, 2010, 3:59 AM
>>>
>>>
>>> On 03/06/2010 03:27 AM, alex46015 at yahoo.com
>> wrote:
>>>> I think the first question should be how to build
>> a R function to call a bunch of C ,C++ which include one
>> main program, and a makefile. My goal to build a R package
>> will be next step.
>>>
>>> You should jump straight to making a package. You are
>> making you life
>>> difficult with this "main program&  makefile"
>> model.
>>>
>>> Install Rcpp and try to use the Rcpp.package.skeleton,
>> this will create
>>> a simple package that uses some C++ classes from Rcpp,
>> as well as an R
>>> function that calls them.
>>>
>>>> I read Rcpp , I am not sure if?
>> RcppResultSet can solve my problem or other function. Once I
>> make sure it work I need ask UNIX adminstrator to install
>> it.
>>>
>>> We don't know what your problem is. We can answer a
>> question, but we
>>> cannot guess the question for you.
>>>
>>> Rcpp works, please refer to our unit tests, for
>> example look at this
>>> vignette:
>>> http://cran.r-project.org/web/packages/Rcpp/vignettes/Rcpp-unitTests.pdf
>>>
>>>> I think it shouldn't be very complex,?  as I
>> know to build a R function easy with one C function.
>>>>
>>>> Thanks you for yout attention!
>>>>
>>>> Alex
>>>>
>>>> --- On Fri, 3/5/10, Dirk Eddelbuettel<edd at debian.org>?
>> wrote:
>>>>
>>>>
>>>> From: Dirk Eddelbuettel<edd at debian.org>
>>>> Subject: Re: [Rd] for help on building a R package
>> with several R function and a bunch of c, c++
>>>> To: alex46015 at yahoo.com
>>>> Cc: r-devel at r-project.org
>>>> Date: Friday, March 5, 2010, 8:25 PM
>>>>
>>>>
>>>>
>>>> On 5 March 2010 at 13:15, alex46015 at yahoo.com
>> wrote:
>>>> | Hope I can get quick help from here, I have a
>> bunch of c, c++ included main function and makefile. It
>> works well on both UNIX and windows. I tried to build R
>> package which include this C++ program and several other R
>> functions.?  These R function here are
>> independent?  of c++ code. I prefer to define one R
>> function to call this c++ program (main function).
>>>> |
>>>> | I know how to build R package with just R
>> function, but I don't know how to handle those c++ c code
>> after I copied those?  code?  in ./src, I am
>> reading manual "Writing R Extensions" , but I did n't catch
>> the key point . Do you know any easy way to do it? ,
>>>>
>>>> When you asked _that exact same question_ this
>> morning on r-help, you got the
>>>> following answer:
>>>>
>>>> ?  ? ? ? From: Whit Armstrong<armstrong.whit at gmail.com>
>>>> ?  ? ? ? To: alex46015 at yahoo.com
>>>> ?  ? ? ? Cc: r-help at r-project.org
>>>> ?  ? ? ? Subject: Re: [R] for help on
>> building a R package with several R function and a bunch of
>> c, c++
>>>> ?  ? ? ? Date: Fri, 5 Mar 2010 10:33:54
>> -0500
>>>>
>>>> ?  ? ? ? Pick up Rcpp, make your life
>> easier.
>>>>
>>>> ?  ? ? ? http://dirk.eddelbuettel.com/code/rcpp.html
>>>>
>>>> ?  ? ? ? -Whit
>>>>
>>>> ?  ? ? ? On Fri, Mar 5, 2010 at 9:19
>> AM,<alex46015 at yahoo.com>?
>> wrote:
>>>> ?  ? ? ?>?  Hope I can get quick
>> help from here, I have a bunch of c, c++ included main
>> function and makefile. It works well on both UNIX and
>> windows. I tried to build R package which include this C++
>> program and several other R functions.?  R function
>> here are independent?  c++ code. I prefer to define
>> one R function to call this c++ program.
>>>> ?  ? ? ?>
>>>> ?  ? ? ?>?  Do you know any easy
>> way to do it? I am reading manual "Writing R Extensions", I
>> didn't catch the key point. I know how to build R package
>> with just R function,?  If I put all c++ code and
>> makefile in /src...what I need do?
>>>> ?  ? ? ?>
>>>> ?  ? ? ?>?  Thank you in
>> advance!
>>>> ?  ? ? ?>
>>>> ?  ? ? ?>?  Alex
>>>>
>>>> Now, can you let us know
>>>>
>>>> ?  ?  ?  a) what part of the
>> answer was unclear to you, and
>>>>
>>>> ?  ?  ?  b) what made you think
>> you needed to repost _the identical question_ here
>>>>
>>>> | Thank you in advance!
>>>>
>>>> You're welcome.
>>>>
>>>> Dirk
>>
>> -- 
>> Romain Francois
>> Professional R Enthusiast
>> +33(0) 6 28 91 30 30
>> http://romainfrancois.blog.free.fr
>> |- http://tr.im/OIXN : raster images and RImageJ
>> |- http://tr.im/OcQe : Rcpp 0.7.7
>> `- http://tr.im/O1wO : highlight 0.1-5
>>
>>
>
>
>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From simon.urbanek at r-project.org  Mon Mar  8 18:57:56 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 8 Mar 2010 12:57:56 -0500
Subject: [Rd] for help on building a R package with several R function
	and a bunch of c, c++
In-Reply-To: <19349.13809.379307.450832@ron.nulle.part>
References: <4B94AB81.7090807@r-enthusiasts.com>
	<249088.44490.qm@web113311.mail.gq1.yahoo.com>
	<19349.13809.379307.450832@ron.nulle.part>
Message-ID: <426E76B8-48F6-40F6-82CB-A8D3A4FCCF35@r-project.org>

Dirk,

he was not asking about Rcpp originally - he was asking about C++. He  
seems to be reluctant to use Rcpp due to the complexities involved  
(for which I don't blame him) so going back to simple C++ basics of R- 
ext (which is what he was using in his example) is really R-devel  
topic I think ...

Cheers,
Simon



On Mar 8, 2010, at 12:37 , Dirk Eddelbuettel wrote:

>
> Alex,
>
> Can you _please_ stop spamming r-devel?  Romain and I repeatedly  
> pointed the
> existence of the rcpp-devel list out to you. Please consider using it.
>
> There are existing packages that use what you want to try use. I  
> find it
> beneficial to start from a _working example_.  Take e.g. the  
> earthmovedist
> package on R-Forge, try to understand how it works and how it makes  
> use of
> Rcpp and adapt your use case to what works.  If it fails, send pointed
> messages with repeatable examples and clear error message to an  
> appropriate
> list, eg rcpp-devel.
>
> Dirk
>
> -- 
>  Registration is open for the 2nd International conference R /  
> Finance 2010
>  See http://www.RinFinance.com for details, and see you in Chicago  
> in April!
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From alex46015 at yahoo.com  Mon Mar  8 21:44:10 2010
From: alex46015 at yahoo.com (alex46015 at yahoo.com)
Date: Mon, 8 Mar 2010 12:44:10 -0800 (PST)
Subject: [Rd] for help on building a R package with several R function
	and a bunch of c, c++
In-Reply-To: <FC20E721-D14A-425C-B8BE-BA22531D4D4E@r-project.org>
Message-ID: <363977.29503.qm@web113308.mail.gq1.yahoo.com>

Yes! that is what I am looking for. When I post my question, I said I cannot catch the key point in "Writing R Extensions". 

Follow your suggestion, I almost have reached my goal although I passed  the R CMD check mypackage. Before I install it (I need ask UNIX adminstrator to do it), I check the package, I got the information
> dyn.load("tranptest.so")
> filenames<-c("Mrklist.txt","CCdata.txt","outputfile")
> param<-c(1,0,1,0,1,1)
> .C("tranptest",as.character(filenames),as.double(param))

 *** caught segfault ***
address 0, cause 'memory not mapped'

Traceback:
 1: .C("tranptest",as.character(filenames), as.double(param))

Do you have any clue about the error? I think it is very close tothe end.

Thank you so much . You save me a tons of time,

Alex

--- On Mon, 3/8/10, Simon Urbanek <simon.urbanek at r-project.org> wrote:

> From: Simon Urbanek <simon.urbanek at r-project.org>
> Subject: Re: [Rd] for help on building a R package with several R function and a bunch of c, c++
> To: alex46015 at yahoo.com
> Cc: "Romain Francois" <romain at r-enthusiasts.com>, r-devel at r-project.org, "Dirk Eddelbuettel" <edd at debian.org>
> Date: Monday, March 8, 2010, 12:53 PM
> Alex,
> 
> On Mar 8, 2010, at 12:16 , alex46015 at yahoo.com
> wrote:
> 
> > I built R package with only R code before, this is
> first time I build R package with mixed R code and C, C++
> code. I would try Rcpp on our center UNIX, before I ask the
> administrator to install it, I need confirm several issue
> are right. Thank you for you patient.
> > 
> > 1, I change main function as a general function with
> certain name such as void tranptest(char* filename[],
> double* para[]), and copy this file and other related c,
> c++? h, program to /src, and removed makefile.
> > 
> 
> Yes, that's perfect - for the kind of usage you don't need
> Rcpp at all - R supports C++ sources out of the box. Just
> make sure your tranptest function is either in a .c file or
> you put
> extern "C"
> in front of it if it's in .cpp , e.g:
> 
> foo.cpp:
> extern "C" void tranptest(char **fn, double *par) {
> ...
> }
> 
> 
> > 2, I noticed there is Makevars after I ran
> Rcpp.package.skeleton,
> > do I need modify this file before I run R CMD build?
> what I need do for? rcpp_hello_world.cpp
> rcpp_hello_world.cpp? it is template file handled by the
> program or it is for me to edit it as template?
> > 
> > 3, Do I need write a R function such as
> tranptest<-function(inputfile, ctlfile,outfile,
> param1,param2,param3)
> > {
> > filenames<-c(inputfile,ctlfile,outfile)
> > params<-as.vector(c(param1, param2,param3))
> > .C("tranptest",
> as.character(filenames),as.double(params))
> > }
> > before I run R CMD build? if so, that means I put this
> R function in /R?
> > 
> 
> yes, in R/foo.R (replace "foo" by any name you want)
> 
> 
> > 4, Do I need do anything to run library.dyname to load
> those complied objects?
> 
> If you have a namespace just add
> useDynLib(foo)
> where "foo" is the name of your package. If you don't have
> a namespace (or don't kwno what that is ;)) just add a file
> R/zzz.R with the following content to your package:
> .First.lib <- function(libname, pkgname)
> library.dynam("foo", pkgname, libname)
> where "foo" is the name of your package.
> 
> > Where I can make sure it successful and I can use
> .C("tranptest",....) in R before the wholepackage
> installed?
> > 
> 
> It's really simple - you don't need to install the package
> to test it. Assuming "foo" is the name of your package:
> Build the sources:
> R CMD SHLIB -o foo.so *.c*
> 
> start R in the same directory:
> R
> # load the library you just compiled
> dyn.load("foo.so")
> # test your code
> .C("tranptest", c("file1", "file2"), as.double(1,2,3,4))
> 
> Cheers,
> Simon
> 
> 
> > 
> > Alex
> > --- On Mon, 3/8/10, Romain Francois <romain at r-enthusiasts.com>
> wrote:
> > 
> >> From: Romain Francois <romain at r-enthusiasts.com>
> >> Subject: Re: [Rd] for help on building a R package
> with several R function and a bunch of c, c++
> >> To: alex46015 at yahoo.com
> >> Cc: r-devel at r-project.org,
> "Dirk Eddelbuettel" <edd at debian.org>
> >> Date: Monday, March 8, 2010, 2:47 AM
> >> Hi,
> >> 
> >> Yes, the problem is with spaces in path names.
> This has
> >> been fixed and
> >> will appear as Rcpp 0.7.8 in a few days.
> >> 
> >> If you are in a rush, you can build it from svn,
> or quote
> >> the path that
> >> is returned from CxxFlags.
> >> 
> >> Feel free to get back to us with more questions,
> although
> >> I'd encourage
> >> you to use the dedicated Rcpp-devel mailing list
> :
> >> https://lists.r-forge.r-project.org/cgi-bin/mailman/listinfo/rcpp-devel
> >> 
> >> Romain
> >> 
> >> On 03/08/2010 04:20 AM, alex46015 at yahoo.com
> >> wrote:
> >>> Thank you for your help. So far what I
> did?? on
> >> my notebook as follows. My OS is windows7.
> >>> ?
> >>> I downloaded Rcpp windows version, and load
> >> library("Rcpp") then.
> >>> ?
> >>> 1, Change main funnction to f1.cpp, remove
> makefile.
> >>> 2 ,run
> >>
> Rcpp.package.skeleton(name="test",list=c("rec1.R","rect2.R"))
> >>> 3,? edit ? /man, /R, copied my exist file?
> whch I
> >> have done? sucessfully?? without? any c++
> program
> >> before.
> >>> 4, copy?? f1.cpp and all other related
> cpp and c
> >> into /src/
> >>> 5. Rcmd?? build --binary test
> >>> ?
> >>> It showed------
> >>> ?
> >>> making DLL....
> >>> gcc
> >>
> -l???C:/PROGRA~2/R/R-210~1.1/include",???C:/PROGRA~2/R/R-210~1.1/bin/Rscript
> >> -e' Rcpp:::CxxxFlags<>'` -03 -Wall -std =gnu
> -999 -c
> >> cranbombind.c -o cranbombind.o
> >>> ?
> >>> gcc.exe:
> **\Documents/R/win-library/2.10/Rcpp/lib: No
> >> such file or directory...
> >>> 
> >>> I checked the path, it did have C:\Users\alex
> >> **\Documents\R\win-library\2.10\Rcpp\lib
> >>> ?
> >>> I don't know how I can fix the problem. do you
> think
> >> it could be problem? there is a space between my
> first name
> >> and last name..
> >>> ?
> >>> All I tried are on my own PC at home? , I
> will tryon
> >> other ? PC in my office.
> >>> ?
> >>> Do you have suggestion?. Thanks,
> >>> ?
> >>> Alex
> >>> --- On Sun, 3/7/10, Romain Francois<romain at r-enthusiasts.com>
> >> wrote:
> >>> 
> >>> 
> >>> From: Romain Francois<romain at r-enthusiasts.com>
> >>> Subject: Re: [Rd] for help on building a R
> package
> >> with several R function and a bunch of c, c++
> >>> To: alex46015 at yahoo.com
> >>> Cc: "Dirk Eddelbuettel"<edd at debian.org>,
> >> r-devel at r-project.org
> >>> Date: Sunday, March 7, 2010, 3:59 AM
> >>> 
> >>> 
> >>> On 03/06/2010 03:27 AM, alex46015 at yahoo.com
> >> wrote:
> >>>> I think the first question should be how
> to build
> >> a R function to call a bunch of C ,C++ which
> include one
> >> main program, and a makefile. My goal to build a R
> package
> >> will be next step.
> >>> 
> >>> You should jump straight to making a package.
> You are
> >> making you life
> >>> difficult with this "main program&?
> makefile"
> >> model.
> >>> 
> >>> Install Rcpp and try to use the
> Rcpp.package.skeleton,
> >> this will create
> >>> a simple package that uses some C++ classes
> from Rcpp,
> >> as well as an R
> >>> function that calls them.
> >>> 
> >>>> I read Rcpp , I am not sure if?
> >> RcppResultSet can solve my problem or other
> function. Once I
> >> make sure it work I need ask UNIX adminstrator to
> install
> >> it.
> >>> 
> >>> We don't know what your problem is. We can
> answer a
> >> question, but we
> >>> cannot guess the question for you.
> >>> 
> >>> Rcpp works, please refer to our unit tests,
> for
> >> example look at this
> >>> vignette:
> >>> http://cran.r-project.org/web/packages/Rcpp/vignettes/Rcpp-unitTests.pdf
> >>> 
> >>>> I think it shouldn't be very
> complex,?? as I
> >> know to build a R function easy with one C
> function.
> >>>> 
> >>>> Thanks you for yout attention!
> >>>> 
> >>>> Alex
> >>>> 
> >>>> --- On Fri, 3/5/10, Dirk
> Eddelbuettel<edd at debian.org>?
> >> wrote:
> >>>> 
> >>>> 
> >>>> From: Dirk Eddelbuettel<edd at debian.org>
> >>>> Subject: Re: [Rd] for help on building a R
> package
> >> with several R function and a bunch of c, c++
> >>>> To: alex46015 at yahoo.com
> >>>> Cc: r-devel at r-project.org
> >>>> Date: Friday, March 5, 2010, 8:25 PM
> >>>> 
> >>>> 
> >>>> 
> >>>> On 5 March 2010 at 13:15, alex46015 at yahoo.com
> >> wrote:
> >>>> | Hope I can get quick help from here, I
> have a
> >> bunch of c, c++ included main function and
> makefile. It
> >> works well on both UNIX and windows. I tried to
> build R
> >> package which include this C++ program and several
> other R
> >> functions.?? These R function here are
> >> independent?? of c++ code. I prefer to
> define one R
> >> function to call this c++ program (main
> function).
> >>>> |
> >>>> | I know how to build R package with just
> R
> >> function, but I don't know how to handle those c++
> c code
> >> after I copied those?? code?? in
> ./src, I am
> >> reading manual "Writing R Extensions" , but I did
> n't catch
> >> the key point . Do you know any easy way to do it?
> ,
> >>>> 
> >>>> When you asked _that exact same question_
> this
> >> morning on r-help, you got the
> >>>> following answer:
> >>>> 
> >>>> ?? ? ? ? From: Whit
> Armstrong<armstrong.whit at gmail.com>
> >>>> ?? ? ? ? To: alex46015 at yahoo.com
> >>>> ?? ? ? ? Cc: r-help at r-project.org
> >>>> ?? ? ? ? Subject: Re: [R] for
> help on
> >> building a R package with several R function and a
> bunch of
> >> c, c++
> >>>> ?? ? ? ? Date: Fri, 5 Mar 2010
> 10:33:54
> >> -0500
> >>>> 
> >>>> ?? ? ? ? Pick up Rcpp, make your
> life
> >> easier.
> >>>> 
> >>>> ?? ? ? ? http://dirk.eddelbuettel.com/code/rcpp.html
> >>>> 
> >>>> ?? ? ? ? -Whit
> >>>> 
> >>>> ?? ? ? ? On Fri, Mar 5, 2010 at
> 9:19
> >> AM,<alex46015 at yahoo.com>?
> >> wrote:
> >>>> ?? ? ? ?>?? Hope I can
> get quick
> >> help from here, I have a bunch of c, c++ included
> main
> >> function and makefile. It works well on both UNIX
> and
> >> windows. I tried to build R package which include
> this C++
> >> program and several other R functions.?? R
> function
> >> here are independent?? c++ code. I prefer to
> define
> >> one R function to call this c++ program.
> >>>> ?? ? ? ?>
> >>>> ?? ? ? ?>?? Do you know
> any easy
> >> way to do it? I am reading manual "Writing R
> Extensions", I
> >> didn't catch the key point. I know how to build R
> package
> >> with just R function,?? If I put all c++
> code and
> >> makefile in /src...what I need do?
> >>>> ?? ? ? ?>
> >>>> ?? ? ? ?>?? Thank you
> in
> >> advance!
> >>>> ?? ? ? ?>
> >>>> ?? ? ? ?>?? Alex
> >>>> 
> >>>> Now, can you let us know
> >>>> 
> >>>> ?? ?? ?? a) what part of
> the
> >> answer was unclear to you, and
> >>>> 
> >>>> ?? ?? ?? b) what made
> you think
> >> you needed to repost _the identical question_
> here
> >>>> 
> >>>> | Thank you in advance!
> >>>> 
> >>>> You're welcome.
> >>>> 
> >>>> Dirk
> >> 
> >> --Romain Francois
> >> Professional R Enthusiast
> >> +33(0) 6 28 91 30 30
> >> http://romainfrancois.blog.free.fr
> >> |- http://tr.im/OIXN : raster images and RImageJ
> >> |- http://tr.im/OcQe : Rcpp 0.7.7
> >> `- http://tr.im/O1wO : highlight 0.1-5
> >> 
> >> 
> > 
> > 
> > 
> > 
> > ______________________________________________
> > R-devel at r-project.org
> mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 





From simon.urbanek at r-project.org  Mon Mar  8 21:59:33 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 8 Mar 2010 15:59:33 -0500
Subject: [Rd] for help on building a R package with several R function
	and a bunch of c, c++
In-Reply-To: <363977.29503.qm@web113308.mail.gq1.yahoo.com>
References: <363977.29503.qm@web113308.mail.gq1.yahoo.com>
Message-ID: <DCE0D170-B9AD-4484-BBBA-00C891697DB8@r-project.org>

Alex,

On Mar 8, 2010, at 15:44 , alex46015 at yahoo.com wrote:

> Yes! that is what I am looking for. When I post my question, I said  
> I cannot catch the key point in "Writing R Extensions".
>
> Follow your suggestion, I almost have reached my goal although I  
> passed  the R CMD check mypackage. Before I install it (I need ask  
> UNIX adminstrator to do it), I check the package, I got the  
> information
>> dyn.load("tranptest.so")
>> filenames<-c("Mrklist.txt","CCdata.txt","outputfile")
>> param<-c(1,0,1,0,1,1)
>> .C("tranptest",as.character(filenames),as.double(param))
>
> *** caught segfault ***
> address 0, cause 'memory not mapped'
>
> Traceback:
> 1: .C("tranptest",as.character(filenames), as.double(param))
>
> Do you have any clue about the error? I think it is very close tothe  
> end.
>

I don't see your C code so I can't tell -- use "R -d gdb" to run R in  
a debugger so you can look at the exact spot of the crash. Is it  
possible that you get thrown off by the 0-based indexing in C and  
opposed to 1-based indexing in R?

in
extern "C" void tranptest(char **fn, double *par) {

you want to access the values as fn[0], fn[1], fn[2] and par[0],  
par[1], par[2], .. etc.

Cheers,
Simon



> Thank you so much . You save me a tons of time,
>
> Alex
>
> --- On Mon, 3/8/10, Simon Urbanek <simon.urbanek at r-project.org> wrote:
>
>> From: Simon Urbanek <simon.urbanek at r-project.org>
>> Subject: Re: [Rd] for help on building a R package with several R  
>> function and a bunch of c, c++
>> To: alex46015 at yahoo.com
>> Cc: "Romain Francois" <romain at r-enthusiasts.com>, r-devel at r-project.org 
>> , "Dirk Eddelbuettel" <edd at debian.org>
>> Date: Monday, March 8, 2010, 12:53 PM
>> Alex,
>>
>> On Mar 8, 2010, at 12:16 , alex46015 at yahoo.com
>> wrote:
>>
>>> I built R package with only R code before, this is
>> first time I build R package with mixed R code and C, C++
>> code. I would try Rcpp on our center UNIX, before I ask the
>> administrator to install it, I need confirm several issue
>> are right. Thank you for you patient.
>>>
>>> 1, I change main function as a general function with
>> certain name such as void tranptest(char* filename[],
>> double* para[]), and copy this file and other related c,
>> c++  h, program to /src, and removed makefile.
>>>
>>
>> Yes, that's perfect - for the kind of usage you don't need
>> Rcpp at all - R supports C++ sources out of the box. Just
>> make sure your tranptest function is either in a .c file or
>> you put
>> extern "C"
>> in front of it if it's in .cpp , e.g:
>>
>> foo.cpp:
>> extern "C" void tranptest(char **fn, double *par) {
>> ...
>> }
>>
>>
>>> 2, I noticed there is Makevars after I ran
>> Rcpp.package.skeleton,
>>> do I need modify this file before I run R CMD build?
>> what I need do for  rcpp_hello_world.cpp
>> rcpp_hello_world.cpp? it is template file handled by the
>> program or it is for me to edit it as template?
>>>
>>> 3, Do I need write a R function such as
>> tranptest<-function(inputfile, ctlfile,outfile,
>> param1,param2,param3)
>>> {
>>> filenames<-c(inputfile,ctlfile,outfile)
>>> params<-as.vector(c(param1, param2,param3))
>>> .C("tranptest",
>> as.character(filenames),as.double(params))
>>> }
>>> before I run R CMD build? if so, that means I put this
>> R function in /R?
>>>
>>
>> yes, in R/foo.R (replace "foo" by any name you want)
>>
>>
>>> 4, Do I need do anything to run library.dyname to load
>> those complied objects?
>>
>> If you have a namespace just add
>> useDynLib(foo)
>> where "foo" is the name of your package. If you don't have
>> a namespace (or don't kwno what that is ;)) just add a file
>> R/zzz.R with the following content to your package:
>> .First.lib <- function(libname, pkgname)
>> library.dynam("foo", pkgname, libname)
>> where "foo" is the name of your package.
>>
>>> Where I can make sure it successful and I can use
>> .C("tranptest",....) in R before the wholepackage
>> installed?
>>>
>>
>> It's really simple - you don't need to install the package
>> to test it. Assuming "foo" is the name of your package:
>> Build the sources:
>> R CMD SHLIB -o foo.so *.c*
>>
>> start R in the same directory:
>> R
>> # load the library you just compiled
>> dyn.load("foo.so")
>> # test your code
>> .C("tranptest", c("file1", "file2"), as.double(1,2,3,4))
>>
>> Cheers,
>> Simon
>>
>>
>>>
>>> Alex
>>> --- On Mon, 3/8/10, Romain Francois <romain at r-enthusiasts.com>
>> wrote:
>>>
>>>> From: Romain Francois <romain at r-enthusiasts.com>
>>>> Subject: Re: [Rd] for help on building a R package
>> with several R function and a bunch of c, c++
>>>> To: alex46015 at yahoo.com
>>>> Cc: r-devel at r-project.org,
>> "Dirk Eddelbuettel" <edd at debian.org>
>>>> Date: Monday, March 8, 2010, 2:47 AM
>>>> Hi,
>>>>
>>>> Yes, the problem is with spaces in path names.
>> This has
>>>> been fixed and
>>>> will appear as Rcpp 0.7.8 in a few days.
>>>>
>>>> If you are in a rush, you can build it from svn,
>> or quote
>>>> the path that
>>>> is returned from CxxFlags.
>>>>
>>>> Feel free to get back to us with more questions,
>> although
>>>> I'd encourage
>>>> you to use the dedicated Rcpp-devel mailing list
>> :
>>>> https://lists.r-forge.r-project.org/cgi-bin/mailman/listinfo/rcpp-devel
>>>>
>>>> Romain
>>>>
>>>> On 03/08/2010 04:20 AM, alex46015 at yahoo.com
>>>> wrote:
>>>>> Thank you for your help. So far what I
>> did?  on
>>>> my notebook as follows. My OS is windows7.
>>>>> ?
>>>>> I downloaded Rcpp windows version, and load
>>>> library("Rcpp") then.
>>>>> ?
>>>>> 1, Change main funnction to f1.cpp, remove
>> makefile.
>>>>> 2 ,run
>>>>
>> Rcpp.package.skeleton(name="test",list=c("rec1.R","rect2.R"))
>>>>> 3,? edit ? /man, /R, copied my exist file?
>> whch I
>>>> have done? sucessfully?  without? any c++
>> program
>>>> before.
>>>>> 4, copy?  f1.cpp and all other related
>> cpp and c
>>>> into /src/
>>>>> 5. Rcmd?  build --binary test
>>>>> ?
>>>>> It showed------
>>>>> ?
>>>>> making DLL....
>>>>> gcc
>>>>
>> -l???C:/PROGRA~2/R/R-210~1.1/include",???C:/PROGRA~2/R/R-210~1.1/ 
>> bin/Rscript
>>>> -e' Rcpp:::CxxxFlags<>'` -03 -Wall -std =gnu
>> -999 -c
>>>> cranbombind.c -o cranbombind.o
>>>>> ?
>>>>> gcc.exe:
>> **\Documents/R/win-library/2.10/Rcpp/lib: No
>>>> such file or directory...
>>>>>
>>>>> I checked the path, it did have C:\Users\alex
>>>> **\Documents\R\win-library\2.10\Rcpp\lib
>>>>> ?
>>>>> I don't know how I can fix the problem. do you
>> think
>>>> it could be problem? there is a space between my
>> first name
>>>> and last name..
>>>>> ?
>>>>> All I tried are on my own PC at home? , I
>> will tryon
>>>> other ? PC in my office.
>>>>> ?
>>>>> Do you have suggestion?. Thanks,
>>>>> ?
>>>>> Alex
>>>>> --- On Sun, 3/7/10, Romain Francois<romain at r-enthusiasts.com>
>>>> wrote:
>>>>>
>>>>>
>>>>> From: Romain Francois<romain at r-enthusiasts.com>
>>>>> Subject: Re: [Rd] for help on building a R
>> package
>>>> with several R function and a bunch of c, c++
>>>>> To: alex46015 at yahoo.com
>>>>> Cc: "Dirk Eddelbuettel"<edd at debian.org>,
>>>> r-devel at r-project.org
>>>>> Date: Sunday, March 7, 2010, 3:59 AM
>>>>>
>>>>>
>>>>> On 03/06/2010 03:27 AM, alex46015 at yahoo.com
>>>> wrote:
>>>>>> I think the first question should be how
>> to build
>>>> a R function to call a bunch of C ,C++ which
>> include one
>>>> main program, and a makefile. My goal to build a R
>> package
>>>> will be next step.
>>>>>
>>>>> You should jump straight to making a package.
>> You are
>>>> making you life
>>>>> difficult with this "main program&
>> makefile"
>>>> model.
>>>>>
>>>>> Install Rcpp and try to use the
>> Rcpp.package.skeleton,
>>>> this will create
>>>>> a simple package that uses some C++ classes
>> from Rcpp,
>>>> as well as an R
>>>>> function that calls them.
>>>>>
>>>>>> I read Rcpp , I am not sure if?
>>>> RcppResultSet can solve my problem or other
>> function. Once I
>>>> make sure it work I need ask UNIX adminstrator to
>> install
>>>> it.
>>>>>
>>>>> We don't know what your problem is. We can
>> answer a
>>>> question, but we
>>>>> cannot guess the question for you.
>>>>>
>>>>> Rcpp works, please refer to our unit tests,
>> for
>>>> example look at this
>>>>> vignette:
>>>>> http://cran.r-project.org/web/packages/Rcpp/vignettes/Rcpp-unitTests.pdf
>>>>>
>>>>>> I think it shouldn't be very
>> complex,?  as I
>>>> know to build a R function easy with one C
>> function.
>>>>>>
>>>>>> Thanks you for yout attention!
>>>>>>
>>>>>> Alex
>>>>>>
>>>>>> --- On Fri, 3/5/10, Dirk
>> Eddelbuettel<edd at debian.org>?
>>>> wrote:
>>>>>>
>>>>>>
>>>>>> From: Dirk Eddelbuettel<edd at debian.org>
>>>>>> Subject: Re: [Rd] for help on building a R
>> package
>>>> with several R function and a bunch of c, c++
>>>>>> To: alex46015 at yahoo.com
>>>>>> Cc: r-devel at r-project.org
>>>>>> Date: Friday, March 5, 2010, 8:25 PM
>>>>>>
>>>>>>
>>>>>>
>>>>>> On 5 March 2010 at 13:15, alex46015 at yahoo.com
>>>> wrote:
>>>>>> | Hope I can get quick help from here, I
>> have a
>>>> bunch of c, c++ included main function and
>> makefile. It
>>>> works well on both UNIX and windows. I tried to
>> build R
>>>> package which include this C++ program and several
>> other R
>>>> functions.?  These R function here are
>>>> independent?  of c++ code. I prefer to
>> define one R
>>>> function to call this c++ program (main
>> function).
>>>>>> |
>>>>>> | I know how to build R package with just
>> R
>>>> function, but I don't know how to handle those c++
>> c code
>>>> after I copied those?  code?  in
>> ./src, I am
>>>> reading manual "Writing R Extensions" , but I did
>> n't catch
>>>> the key point . Do you know any easy way to do it?
>> ,
>>>>>>
>>>>>> When you asked _that exact same question_
>> this
>>>> morning on r-help, you got the
>>>>>> following answer:
>>>>>>
>>>>>> ?  ? ? ? From: Whit
>> Armstrong<armstrong.whit at gmail.com>
>>>>>> ?  ? ? ? To: alex46015 at yahoo.com
>>>>>> ?  ? ? ? Cc: r-help at r-project.org
>>>>>> ?  ? ? ? Subject: Re: [R] for
>> help on
>>>> building a R package with several R function and a
>> bunch of
>>>> c, c++
>>>>>> ?  ? ? ? Date: Fri, 5 Mar 2010
>> 10:33:54
>>>> -0500
>>>>>>
>>>>>> ?  ? ? ? Pick up Rcpp, make your
>> life
>>>> easier.
>>>>>>
>>>>>> ?  ? ? ? http://dirk.eddelbuettel.com/code/rcpp.html
>>>>>>
>>>>>> ?  ? ? ? -Whit
>>>>>>
>>>>>> ?  ? ? ? On Fri, Mar 5, 2010 at
>> 9:19
>>>> AM,<alex46015 at yahoo.com>?
>>>> wrote:
>>>>>> ?  ? ? ?>?  Hope I can
>> get quick
>>>> help from here, I have a bunch of c, c++ included
>> main
>>>> function and makefile. It works well on both UNIX
>> and
>>>> windows. I tried to build R package which include
>> this C++
>>>> program and several other R functions.?  R
>> function
>>>> here are independent?  c++ code. I prefer to
>> define
>>>> one R function to call this c++ program.
>>>>>> ?  ? ? ?>
>>>>>> ?  ? ? ?>?  Do you know
>> any easy
>>>> way to do it? I am reading manual "Writing R
>> Extensions", I
>>>> didn't catch the key point. I know how to build R
>> package
>>>> with just R function,?  If I put all c++
>> code and
>>>> makefile in /src...what I need do?
>>>>>> ?  ? ? ?>
>>>>>> ?  ? ? ?>?  Thank you
>> in
>>>> advance!
>>>>>> ?  ? ? ?>
>>>>>> ?  ? ? ?>?  Alex
>>>>>>
>>>>>> Now, can you let us know
>>>>>>
>>>>>> ?  ?  ?  a) what part of
>> the
>>>> answer was unclear to you, and
>>>>>>
>>>>>> ?  ?  ?  b) what made
>> you think
>>>> you needed to repost _the identical question_
>> here
>>>>>>
>>>>>> | Thank you in advance!
>>>>>>
>>>>>> You're welcome.
>>>>>>
>>>>>> Dirk
>>>>
>>>> --Romain Francois
>>>> Professional R Enthusiast
>>>> +33(0) 6 28 91 30 30
>>>> http://romainfrancois.blog.free.fr
>>>> |- http://tr.im/OIXN : raster images and RImageJ
>>>> |- http://tr.im/OcQe : Rcpp 0.7.7
>>>> `- http://tr.im/O1wO : highlight 0.1-5
>>>>
>>>>
>>>
>>>
>>>
>>>
>>> ______________________________________________
>>> R-devel at r-project.org
>> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>
>
>
>
>


From alex46015 at yahoo.com  Mon Mar  8 22:35:24 2010
From: alex46015 at yahoo.com (alex46015 at yahoo.com)
Date: Mon, 8 Mar 2010 13:35:24 -0800 (PST)
Subject: [Rd] for help on building a R package with several R function
	and a bunch of c, c++
In-Reply-To: <DCE0D170-B9AD-4484-BBBA-00C891697DB8@r-project.org>
Message-ID: <578164.53515.qm@web113305.mail.gq1.yahoo.com>

I fixed the problem, it is related to my C++ code when I change main function to gneral function. 

You gave a great help!  Thank you! Simon.

have a good night!

Alex


From jsalsman at talknicer.com  Mon Mar  8 23:45:49 2010
From: jsalsman at talknicer.com (James Salsman)
Date: Mon, 8 Mar 2010 14:45:49 -0800
Subject: [Rd] application to mentor syrfr package development for Google
	Summer of Code 2010
In-Reply-To: <a528a0c41003080041n7eabcf60lf9a479f5feb80841@mail.gmail.com>
References: <a3c2bd6c1003071711h346dd79fr820a41f9080700fc@mail.gmail.com>
	<7021740b1003071935p51d4ed7dq2fe481e499f0ef5@mail.gmail.com>
	<a3c2bd6c1003072100g2e9ff45fw69c45b9257fa6e5c@mail.gmail.com>
	<7021740b1003072239n529da6f6ye95ce30c4715a03d@mail.gmail.com>
	<a3c2bd6c1003072349p3d506ca2s8959d88c913f9947@mail.gmail.com>
	<a528a0c41003080041n7eabcf60lf9a479f5feb80841@mail.gmail.com>
Message-ID: <a3c2bd6c1003081445x4fe95860v232430634ed9561d@mail.gmail.com>

Michael,

Thanks for your reply:

On Mon, Mar 8, 2010 at 12:41 AM, Michael Schmidt <mds47 at cornell.edu> wrote:
>
> Thanks for contacting me. Eureqa takes into account the total size of an
> equation when comparing different candidate models. It attempts to find the
> set of possible equations that are non-dominated in both error and size. The
> final results is a short list consisting of the most accurate equation for
> increasing equation sizes.
>
> This is closely related to degrees of freedom, but not exactly the same

That's very good, but I wonder whether we can perform automatic
outlier exclusion that way.  We would need to keep the confidence
interval, or at least the information necessary to derive it, accurate
in every step of the genetic beam search.  Since the confidence
intervals of extrapolation depend so heavily on the number of degrees
of freedom of the fit (along with the residual standard error) it's a
good idea to use a degree-of-freedom-adjusted F statistic instead of a
post-hoc combination of equation size and residual standard error, I
would think.  You might want to try it and see how it improves things.
 Confidence intervals, by representing the goodness of fit in the
original units and domain of the dependent variable, are tremendously
useful and sometimes make many kinds of tests which would otherwise be
very laborious easy to eyeball.

Being able to fit curves to one-to-many relations instead of strict
one-to-one functions appeals to those working in the imaging domain,
but not to as many traditional non-image statisticians. Regressing
functions usually results in well-defined confidence intervals, but
regressing general relations with derivatives produces confidence
intervals which can also be relations.  Trying to figure out a
spiral-shaped confidence interval probably appeals to astronomers more
than most people.  So I am proposing that, for R's contemplated
'syrfr' symbolic regression package, we do functions in a general
genetic beam search framework, Chillu and John Nash can do derivatives
in the new 'adinr' package, and then we can try to put them together,
extend the syrfr package with a parameter indicating to fit relations
with derivatives instead of functions, to try to replicate your work
on Eureqa using d.o.f-adjusted F statistics as a heuristic beam search
evaluation function.

Have you quantified the extent to which using the crossover rule in
the equation tree search is an improvement over mutation alone in
symbolic regression?  I am glad that Chillu and Dirk have already
supported that; there is no denying its utility.

Would you like to co-mentor this project?
http://rwiki.sciviews.org/doku.php?id=developers:projects:gsoc2010:syrfr
I've already stepped forward, so you could do as much or as little as
you like if you wanted to co-mentor and Dirk agreed to that
arrangement.

Best regards,
James Salsman


> On Mon, Mar 8, 2010 at 2:49 AM, James Salsman <jsalsman at talknicer.com>
> wrote:
>>
>> I meant that development on both a syrfr R package capable of
>> using either F statistics or parametric derivatives should proceed in
>> parallel with your work on such a derivatives package. You are right
>> that genetic algorithm search (and general best-first search --
>> http://en.wikipedia.org/wiki/Best-first_search -- of which genetic
>> algorithms are various special cases) can be very effectively
>> parallelized, too.
>>
>> In any case, thank you for pointing out Eureqa --
>> http://ccsl.mae.cornell.edu/eureqa -- but I can see no evidence there
>> or in the user manual or user forums that Eureqa is considering
>> degrees of freedom in its goodness-of-fit estimation. ?That is a
>> serious problem which will typically result in invalid symbolic
>> regression. ?I am sending this message also to Michael Schmidt so that
>> he might be able to comment on the extent to which Eureqa adjusts for
>> degrees of freedom in his fit evaluations.
>>
>> Best regards,
>> James Salsman
>>
>> On Sun, Mar 7, 2010 at 10:39 PM, Chidambaram Annamalai
>> <quantumelixir at gmail.com> wrote:
>> >
>> >> If I understand your concern, you want to lay the foundation for
>> >> derivatives so that you can implement the search strategies described
>> >> in Schmidt and Lipson (2010) --
>> >> http://www.springerlink.com/content/l79v2183725413w0/ -- is that
>> >> right?
>> >
>> > Yes. Basically traditional "naive" error estimators or fitness functions
>> > fail miserably when used in SR with implicit equations because they
>> > immediately close in on "best" fits like f(x) = x - x and other trivial
>> > solutions. In such cases no amount of regularization and complexity
>> > penalizing methods will help since x - x is fairly simple by most
>> > measures
>> > of complexity and it does have zero error. So the paper outlines such
>> > problems associated with "direct" error estimators and thus they infer
>> > the
>> > "triviality" of the fit by probing its estimates around nearby points
>> > and
>> > seeing if it does follow the pattern dictated by the data points -- ergo
>> > derivatives.
>> >
>> > Also, somewhat like a side benefit, this method also enables us to
>> > perform
>> > regression on closed loops and other implicit equations since the
>> > fitness
>> > functions are based only on derivatives. The specific form of the error
>> > is
>> > equation 1.2 which is what, I believe, comprises of the internals of the
>> > evaluation procedure used in Eureqa.
>> >
>> > You are correct in pointing out that there is no reason to not work in
>> > parallel, since GAs generally have a more or less fixed form
>> > (evaluate-reproduce cycle) which is quite easily parallelized. I have
>> > used
>> > OpenMP in the past, in which it is fairly trivial to parallelize well
>> > formed
>> > for loops.
>> >
>> > Chillu
>> >
>> >> It is not clear to me how well this generalized approach will
>> >> work in practice, but there is no reason not to proceed in parallel to
>> >> establish a framework under which you could implement the metrics
>> >> proposed by Schmidt and Lipson in the contemplated syrfr package.
>> >>
>> >> I have expanded the test I proposed with two more questions -- at
>> >>
>> >> http://rwiki.sciviews.org/doku.php?id=developers:projects:gsoc2010:syrfr
>> >> -- specifically:
>> >>
>> >> 5. Critique http://sites.google.com/site/gptips4matlab/
>> >>
>> >> 6. Use anova to compare the goodness-of-fit of a SSfpl nls fit with a
>> >> linear model of your choice. How can your characterize the
>> >> degree-of-freedom-adjusted goodness of fit of nonlinear models?
>> >>
>> >> I believe pairwise anova.nls is the optimal comparison for nonlinear
>> >> models, but there are several good choices for approximations,
>> >> including the residual standard error, which I believe can be adjusted
>> >> for degrees of freedom, as can the F statistic which TableCurve uses;
>> >> see: http://en.wikipedia.org/wiki/F-test#Regression_problems
>> >>
>> >> Best regards,
>> >> James Salsman


From ms6ep at cs.virginia.edu  Tue Mar  9 04:03:42 2010
From: ms6ep at cs.virginia.edu (Michael Spiegel)
Date: Mon, 8 Mar 2010 22:03:42 -0500
Subject: [Rd] (PR#14226) -- Re: libgfortran misplaced in Mac OS X R
	install
In-Reply-To: <alpine.LFD.2.00.1003041927500.11292@gannet.stats.ox.ac.uk>
References: <1901f69e1003030900v69b031feoab6828517af2255f@mail.gmail.com>
	<3214E67E-521A-49E7-A8FF-32EC723CA458@r-project.org>
	<alpine.LFD.2.00.1003041927500.11292@gannet.stats.ox.ac.uk>
Message-ID: <1901f69e1003081903p24eaae4t863f49ce64f03b2f@mail.gmail.com>

Thank you both for the advice.  It sounds like we have a solution for
our next binary release of the beta package.

--Michael

On Thu, Mar 4, 2010 at 2:44 PM, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> Another possibility is to link statically to libgfortran. ?That has pros and
> cons, but for libgfortran not many cons apart from space for multiple copies
> in sundry packages (and is what is done on Windows, BTW).
>
> There are several ways to arrange that. ?As far as I recall I temporarily
> removed /usr/local/lib/libgfortran*.dylib: another way is to edit FLIBS in
> Makeconf (but then you do need to know which copies of that file you need to
> edit).
>
> As far as I know we don't document in the standard manuals how to build
> distributable binary Mac packages, and perhaps we should do so in due course
> (or at least point at where the information can be found).
>
> On Thu, 4 Mar 2010, Simon Urbanek wrote:
>
>> Hi Michael,
>>
>> On Mar 3, 2010, at 12:01 , Michael Spiegel wrote:
>>
>>> I am the guy who compiles the OpenMx binaries. ?We would be delighted to
>>> place our package on CRAN, once the project is stable enough so that we are
>>> comfortable releasing it to the larger public. ?Let's try to track down
>>> where I made a mistake. ?Our Makevars.in file contains the line:
>>>
>>> PKG_LIBS=$(FLIBS) $(BLAS_LIBS) $(LAPACK_LIBS)
>>>
>>> In addition, on the build machine I noticed that a copy of
>>> libgfortran.2.dylib exists at /usr/local/lib. ?I believe the Xcode install
>>> placed a copy of it there.
>>
>> No, it is part of the GNU Fortran installation. Anything you compile with
>> a Fortran requires that you have that Fortran installed at run time, because
>> Fortran uses its own run-time libraries (if the Fortran you compiled with
>> used dynamic libraries). This implies that if you distribute your package
>> you have to tell users to install the same Fortran you used to compile it.
>>
>> However, unlike other unices Mac users don't necessarily have development
>> tools installed, so on CRAN we make an effort to modify the binaries such
>> that they work even without the tools they have been compiled with. There
>> are several possible approaches, but since R itself already uses the same
>> Fortran, we ship a copy of the Fortran libraries inside R and modify
>> packages such that they use it instead of the one from dev tools (see below
>> for details).
>>
>>
>>> To create the binary release, I run ?R CMD INSTALL --build.
>>
>> That is not sufficient to create a binary of your package, because it
>> contains a configure script (this is unrelated to the above - see R-admin
>> 2.6). What you want to use is something like this (assuming R 2.10.1 Leopard
>> build and Fortran from CRAN):
>>
>> R --arch=i386 CMD INSTALL OpenMx_0.2.9-1147.tar.gz
>> R --arch=x86_64 CMD INSTALL --libs-only OpenMx_0.2.9-1147.tar.gz
>> R --arch=ppc CMD INSTALL --libs-only OpenMx_0.2.9-1147.tar.gz
>> cd /Library/Frameworks/R.framework/Versions/2.10/Resources/library
>>
>> # fix the Fortran paths to point to R 2.10 instead
>> for lib in `ls OpenMx/libs/*/*.so`; do
>> install_name_tool -change /usr/local/lib/libgfortran.2.dylib \
>>
>> ?/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libgfortran.2.dylib
>> \
>> ?$lib
>> done
>>
>> # change permissions for distribution
>> sudo chown -Rh root:admin OpenMx
>> sudo chmod -R g+w OpenMx
>>
>> # pack it up
>> tar fvcz ~/OpenMx_0.2.9-1147.tgz OpenMx
>>
>>
>> You can check that you have the correct paths using otool -L:
>>
>> ginaz:library$ otool -L OpenMx/libs/*/*.so
>> OpenMx/libs/i386/OpenMx.so:
>> ? ? ? ?OpenMx.so (compatibility version 0.0.0, current version 0.0.0)
>>
>> ?/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libgfortran.2.dylib
>> (compatibility version 3.0.0, current version 3.0.0)
>>
>> ?/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libRblas.dylib
>> (compatibility version 0.0.0, current version 0.0.0)
>>
>> ?/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libRlapack.dylib
>> (compatibility version 2.10.0, current version 2.10.1)
>>
>> ?/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libR.dylib
>> (compatibility version 2.10.0, current version 2.10.1)
>>
>> ?/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation
>> (compatibility version 150.0.0, current version 476.19.0)
>> ? ? ? ?/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current
>> version 1.0.0)
>> ? ? ? ?/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current
>> version 111.1.4)
>> ? ? ? ?/System/Library/Frameworks/vecLib.framework/Versions/A/vecLib
>> (compatibility version 1.0.0, current version 242.0.0)
>> OpenMx/libs/ppc/OpenMx.so:
>> ? ? ? ?OpenMx.so (compatibility version 0.0.0, current version 0.0.0)
>>
>> ?/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libgfortran.2.dylib
>> (compatibility version 3.0.0, current version 3.0.0)
>>
>> ?/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libRblas.dylib
>> (compatibility version 0.0.0, current version 0.0.0)
>>
>> ?/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libRlapack.dylib
>> (compatibility version 2.10.0, current version 2.10.1)
>>
>> ?/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libR.dylib
>> (compatibility version 2.10.0, current version 2.10.1)
>>
>> ?/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation
>> (compatibility version 150.0.0, current version 476.19.0)
>> ? ? ? ?/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current
>> version 1.0.0)
>> ? ? ? ?/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current
>> version 111.1.4)
>> ? ? ? ?/System/Library/Frameworks/vecLib.framework/Versions/A/vecLib
>> (compatibility version 1.0.0, current version 242.0.0)
>> OpenMx/libs/x86_64/OpenMx.so:
>> ? ? ? ?OpenMx.so (compatibility version 0.0.0, current version 0.0.0)
>>
>> ?/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libgfortran.2.dylib
>> (compatibility version 3.0.0, current version 3.0.0)
>>
>> ?/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libRblas.dylib
>> (compatibility version 0.0.0, current version 0.0.0)
>>
>> ?/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libRlapack.dylib
>> (compatibility version 2.10.0, current version 2.10.1)
>>
>> ?/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libR.dylib
>> (compatibility version 2.10.0, current version 2.10.1)
>>
>> ?/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation
>> (compatibility version 150.0.0, current version 476.19.0)
>> ? ? ? ?/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current
>> version 1.0.0)
>> ? ? ? ?/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current
>> version 111.1.4)
>> ? ? ? ?/System/Library/Frameworks/vecLib.framework/Versions/A/vecLib
>> (compatibility version 1.0.0, current version 242.0.0)
>>
>>
>> If you are dealing with only one R version, you can change the ID of your
>> Fortran library instead of touching the package files:
>>
>> install_name_tool -id \
>>
>> ?/Library/Frameworks/R.framework/Versions/2.10/Resources/lib/libgfortran.2.dylib
>> /usr/local/lib/libgfortran.2.0.0.dylib
>>
>> Note, however, that this will lead to (possibly silent) errors if you
>> forget to change it when switching to another R version, so I prefer to fix
>> the package instead.
>>
>> Cheers,
>> Simon
>>
>>
>>> The beta test users install the package using the following script:
>>> http://openmx.psyc.virginia.edu/getOpenMx.R.
>>>
>>
>>
>>
>>>
>>> On Wed, Mar 3, 2010 at 9:48 AM, Tim Brick <tbrick at virginia.edu> wrote:
>>>>
>>>>
>>>>> From: Simon Urbanek <simon.urbanek at r-project.org>
>>>>> Date: March 3, 2010 8:32:52 AM MST
>>>>> To: tbrick at virginia.edu
>>>>> Cc: r-devel at stat.math.ethz.ch, R-bugs at r-project.org
>>>>> Subject: Re: [Rd] libgfortran misplaced in Mac OS X R install
>>>>> (PR#14226)
>>>>>
>>>>> This is not an R bug so please don't abuse R-bugs. It is likely a bug
>>>>> in the way OpenMx binaries are distributed by someone (you didn't even say
>>>>> where you got them from) - OpenMx is not even on CRAN so take that to
>>>>> whoever gave you the binaries. On CRAN we use the correct paths.
>>>>>
>>>>> Cheers,
>>>>> Simon
>>>>>
>>>>>
>>>>> On Mar 2, 2010, at 11:45 , tbrick at virginia.edu wrote:
>>>>>
>>>>>> Full_Name: Timothy Brick
>>>>>> Version: 2.10
>>>>>> OS: Mac OS X (seen on both 10.6 and 10.5)
>>>>>> Submission from: (NULL) (63.255.24.5)
>>>>>>
>>>>>>
>>>>>> When using install.packages in R on Mac OS X, packages that require
>>>>>> gfortran
>>>>>> throws an error (Example below from installation of OpenMx package):
>>>>>>
>>>>>> Loading required package: OpenMx
>>>>>> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>>>>>> unable to load shared library
>>>>>>
>>>>>> '/Library/Frameworks/R.framework/Resources/library/OpenMx/libs/i386/OpenMx.so':
>>>>>>
>>>>>> dlopen(/Library/Frameworks/R.framework/Resources/library/OpenMx/libs/i386/OpenMx.so,
>>>>>> 6): Library not loaded: /usr/local/lib/libgfortran.2.dylib
>>>>>> Referenced from:
>>>>>> /Library/Frameworks/R.framework/Resources/library/OpenMx/libs/i386/OpenMx.so
>>>>>> Reason: image not found
>>>>>>
>>>>>> libgfortran.2.dylib does exist, but in
>>>>>>
>>>>>> /Library/Frameworks/R.framework/Versions/2.10/Resouces/lib/libgfortran.2.dylib
>>>>>> (or /2.9/, depending on version installed).
>>>>>>
>>>>>> A workaround at present involves creating a symbolic link from the
>>>>>> above file to
>>>>>> /usr/local/lib/libgfortran.2.dylib, however this requires sudo access
>>>>>> and is
>>>>>> confusing for novice users.
>>>>>>
>>>>>> There is more discussion of this bug as it relates to OpenMx at:
>>>>>> http://openmx.psyc.virginia.edu/thread/316
>>>>>>
>>>>>> Posts on other forums indicate a similar issue with other packages
>>>>>> including
>>>>>> vegan and lme4:
>>>>>>
>>>>>> http://r-forge.r-project.org/forum/forum.php?thread_id=728&forum_id=194
>>>>>> https://stat.ethz.ch/pipermail/r-sig-mac/2009-May/006210.html
>>>>>>
>>>>>
>>>>> Those are very old posts and those were temporary issues in the CRAN
>>>>> build system that have been promptly resolved.
>>>>>
>>>>>
>>>>
>>>>
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
> --
> Brian D. Ripley, ? ? ? ? ? ? ? ? ?ripley at stats.ox.ac.uk
> Professor of Applied Statistics, ?http://www.stats.ox.ac.uk/~ripley/
> University of Oxford, ? ? ? ? ? ? Tel: ?+44 1865 272861 (self)
> 1 South Parks Road, ? ? ? ? ? ? ? ? ? ? +44 1865 272866 (PA)
> Oxford OX1 3TG, UK ? ? ? ? ? ? ? ?Fax: ?+44 1865 272595
>


From sbrand at mail.uri.edu  Tue Mar  9 00:31:36 2010
From: sbrand at mail.uri.edu (sbrand)
Date: Mon, 8 Mar 2010 18:31:36 -0500
Subject: [Rd] MaxDiff Scaling
Message-ID: <4B962B43@webmail03>

Dear R List,
I have found that R handles a remarkable number of analytic tasks that are 
overlooked by major commercial packages.  However, I have not found an R 
package that handles MaxDiff Scaling - does one exist?
Thanks in Advance,

Stephen Brand


From ligges at statistik.tu-dortmund.de  Tue Mar  9 16:19:30 2010
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 09 Mar 2010 16:19:30 +0100
Subject: [Rd] Defining a method in two packages
In-Reply-To: <1268064992.26491.31.camel@punchbuggy>
References: <1267807677.9076.21.camel@punchbuggy>	
	<4B92A2C9.1020803@statistik.tu-dortmund.de>	
	<alpine.LFD.2.00.1003061952170.14938@gannet.stats.ox.ac.uk>
	<1268064992.26491.31.camel@punchbuggy>
Message-ID: <4B966702.3090800@statistik.tu-dortmund.de>



On 08.03.2010 17:16, Terry Therneau wrote:
> Brian&  Uwe,
>    Thanks for responding.  Let me see if I can refine the query and move
> towards a solution.
>
>> From Uwe:
>> Of course, after loading lme4, you can still use the ranef from coxme:
>> coxme::ranef(fit)
>
> Of course, but I'm interested in other users (as well as myself) and
> prefer to avoid the 'secret handshake' form of a call.
>
>> In your own package, you could simply import the generic from coxme.
>
> I don't understand this.

You could import the generic from the other package and define your won 
methods for it in order to make dispatching work correctly.



>> From Brian:
>> My solution would though be NOT to reuse a name that is already
>> established in another package (nlme has used it for many years).
>> The design problem is that generic foo() in package B might have
>> nothing to do with foo() in package A.  When it does, we expect B ...
>
> I disagree completely.  It is precisely because of nlme and lmer
> prominence that I want to reprise their methods: my users have a much
> better chance of remembering how to do things.  If I followed this logic
> to its conclusion one should never define a print() method because it
> might conflict with the base definition.
>    The consequence is that I am under obligation to NOT make my method
> something different than Doug's, if I want to satisfy the goal of user
> level consistency.  Several aspects of coxme purposefully mimic lmer,
> even in cases (such as print.coxme) where his layout is not precisely
> what I would have chosen.

Then please folow my suggestion and import the generic from the packages 
mentioned above in your namespace. Then you could extend it by your own 
methods wihtout having to define another generic of the same name and 
avoid the conflicts.


>    I really do not want to require lme4 just to pick up the methods
> definition.  It's a huge package, and there is no code in common.  Both
> packages work very hard to be efficient via sparse matrix methods, but
> the actual details are completely different due to the mathematical
> structure of our underlying likelihoods.  Use of both in the same
> analysis would be rare, so my issue won't be common.

Well, then things become complicated if not impossible.


>> The situation can be alleviated by making S3 methods visible.  Thus if
>> coxme exported coxme:::ranef.coxme and lme4 had a default method
>
>> ranef<- function (object, ...) UseMethod("ranef")
>
>   I have no objection to exporting my method.  If a joint change to lme4
> and coxme is the best solution, I will take the discussion off line with
> Doug.  Is this the best way forward?

I think so.

Best wishes,
uwe


>
> Terry
>
>
>
>


From ken.knoblauch at inserm.fr  Tue Mar  9 15:47:45 2010
From: ken.knoblauch at inserm.fr (Ken Knoblauch)
Date: Tue, 9 Mar 2010 14:47:45 +0000 (UTC)
Subject: [Rd] MaxDiff Scaling
References: <4B962B43@webmail03>
Message-ID: <loom.20100309T154411-802@post.gmane.org>

sbrand <sbrand <at> mail.uri.edu> writes:
> Dear R List,
> I have found that R handles a remarkable number of analytic tasks that are 
> overlooked by major commercial packages.  However, I have not found an R 
> package that handles MaxDiff Scaling - does one exist?

This should probably have been sent to R-help and not R-devel.

I don't know about MaxDiff Scaling but there is a package
for Maximum Likelihood Difference Scaling called MLDS,
which is a related but somewhat more involved procedure.

http://cran.r-project.org/web/packages/MLDS/

http://www.jstatsoft.org/v25/i02

Hope that is useful.

> Thanks in Advance,
> 
> Stephen Brand

Ken

-- 
Ken Knoblauch
Inserm U846
Stem-cell and Brain Research Institute
Department of Integrative Neurosciences
18 avenue du Doyen L?pine
69500 Bron
France
tel: +33 (0)4 72 91 34 77
fax: +33 (0)4 72 91 34 61
portable: +33 (0)6 84 10 64 10
http://www.sbri.fr/members/kenneth-knoblauch.html


From bates at stat.wisc.edu  Tue Mar  9 19:48:04 2010
From: bates at stat.wisc.edu (Douglas Bates)
Date: Tue, 9 Mar 2010 12:48:04 -0600
Subject: [Rd] unable to compile Recommended packages
In-Reply-To: <41A047C9B0CF8D4CBB0C8BA991086CCB0E3CCA0E69@exchange07.i-review.com>
References: <41A047C9B0CF8D4CBB0C8BA991086CCB0E3CCA0E69@exchange07.i-review.com>
Message-ID: <40e66e0b1003091048r674102f2meed81fc0db0bfe9c@mail.gmail.com>

Did you run

$RHOME/src/tools/rsync-recommended

to obtain the most recent versions of the recommended packages before
trying to compile them?

On Fri, Mar 5, 2010 at 3:01 PM, Alex Bryant <abryant at i-review.com> wrote:
> Hi folks, ?I'm having a problem with installing ?R on Solaris. ?Has anyone seen a similar issue? ?I don't find any hits on the search engines. ?Thanks.
>
>
> Environment:
> SunOS xxxx 5.10 Generic_118822-25 sun4u sparc SUNW,Sun-Fire-280R
>
> During the installation/compilation of R-2.10.1 I ?get the following error:
>
> begin installing recommended package boot
> ERROR: cannot extract package from 'boot.tgz'
> *** Error code 1
> The following command caused the error:
> MAKE="make" R_LIBS= ../../../bin/R CMD INSTALL --no-lock -l "../../../library" boot.tgz > boot.ts.out 2>&1 || (cat boot.ts.out && exit 1)
> make: Fatal error: Command failed for target `boot.ts'
> Current working directory /home/ireview/R-2.10.1/src/library/Recommended
> *** Error code 1
> The following command caused the error:
> make stamp-recommended
> make: Fatal error: Command failed for target `recommended-packages'
> Current working directory /home/ireview/R-2.10.1/src/library/Recommended
> *** Error code 1
> The following command caused the error:
> (cd src/library/Recommended && make)
> make: Fatal error: Command failed for target `stamp-recommended'
>
>
> -Alex
>
>
> //************************
> // Alex Bryant
> // Software Developer
> // Integrated Clinical Systems, Inc.
> // 908-996-7208
>
>
> ________________________________
> Confidentiality Note: This e-mail, and any attachment to...{{dropped:13}}
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From abryant at i-review.com  Tue Mar  9 20:14:50 2010
From: abryant at i-review.com (Alex Bryant)
Date: Tue, 9 Mar 2010 14:14:50 -0500
Subject: [Rd] unable to compile Recommended packages
In-Reply-To: <40e66e0b1003091048r674102f2meed81fc0db0bfe9c@mail.gmail.com>
References: <41A047C9B0CF8D4CBB0C8BA991086CCB0E3CCA0E69@exchange07.i-review.com>
	<40e66e0b1003091048r674102f2meed81fc0db0bfe9c@mail.gmail.com>
Message-ID: <41A047C9B0CF8D4CBB0C8BA991086CCB0E3CCA0F0F@exchange07.i-review.com>

Thank you for your responses.  It turns out the problem was my version of 'tar' on solaris.  I downloaded the latest Gnu tar and the install completed successfully.  Who would of know ;)

Thanks again,
Alex

-----Original Message-----
From: dmbates at gmail.com [mailto:dmbates at gmail.com] On Behalf Of Douglas Bates
Sent: Tuesday, March 09, 2010 1:48 PM
To: Alex Bryant
Cc: r-devel at r-project.org
Subject: Re: [Rd] unable to compile Recommended packages

Did you run

$RHOME/src/tools/rsync-recommended

to obtain the most recent versions of the recommended packages before
trying to compile them?

On Fri, Mar 5, 2010 at 3:01 PM, Alex Bryant <abryant at i-review.com> wrote:
> Hi folks, ?I'm having a problem with installing ?R on Solaris. ?Has anyone seen a similar issue? ?I don't find any hits on the search engines. ?Thanks.
>
>
> Environment:
> SunOS xxxx 5.10 Generic_118822-25 sun4u sparc SUNW,Sun-Fire-280R
>
> During the installation/compilation of R-2.10.1 I ?get the following error:
>
> begin installing recommended package boot
> ERROR: cannot extract package from 'boot.tgz'
> *** Error code 1
> The following command caused the error:
> MAKE="make" R_LIBS= ../../../bin/R CMD INSTALL --no-lock -l "../../../library" boot.tgz > boot.ts.out 2>&1 || (cat boot.ts.out && exit 1)
> make: Fatal error: Command failed for target `boot.ts'
> Current working directory /home/ireview/R-2.10.1/src/library/Recommended
> *** Error code 1
> The following command caused the error:
> make stamp-recommended
> make: Fatal error: Command failed for target `recommended-packages'
> Current working directory /home/ireview/R-2.10.1/src/library/Recommended
> *** Error code 1
> The following command caused the error:
> (cd src/library/Recommended && make)
> make: Fatal error: Command failed for target `stamp-recommended'
>
>
> -Alex
>
>
> //************************
> // Alex Bryant
> // Software Developer
> // Integrated Clinical Systems, Inc.
> // 908-996-7208
>
>
> ________________________________
> Confidentiality Note: This e-mail, and any attachment to...{{dropped:13}}
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From jel+r at cs.uni-magdeburg.de  Wed Mar 10 01:45:54 2010
From: jel+r at cs.uni-magdeburg.de (Jens Elkner)
Date: Wed, 10 Mar 2010 01:45:54 +0100
Subject: [Rd] unable to compile Recommended packages
In-Reply-To: <41A047C9B0CF8D4CBB0C8BA991086CCB0E3CCA0F0F@exchange07.i-review.com>
References: <41A047C9B0CF8D4CBB0C8BA991086CCB0E3CCA0E69@exchange07.i-review.com>
	<40e66e0b1003091048r674102f2meed81fc0db0bfe9c@mail.gmail.com>
	<41A047C9B0CF8D4CBB0C8BA991086CCB0E3CCA0F0F@exchange07.i-review.com>
Message-ID: <20100310004554.GA13218@trex.cs.uni-magdeburg.de>

On Tue, Mar 09, 2010 at 02:14:50PM -0500, Alex Bryant wrote:
> Thank you for your responses.  It turns out the problem was my version of 'tar' on solaris.  I downloaded the latest Gnu tar and the install completed successfully.  Who would of know ;)
...
> > SunOS xxxx 5.10 Generic_118822-25 sun4u sparc SUNW,Sun-Fire-280R

Just a little note: You should add /usr/sfw/bin to your PATH env var
or ask your Sysadmin to install SUNWgtar:
Solaris 10 (even the 3 years aka pretty old version u3 you are using) 
already comes with a lot of GNU stuff ...

On none-GNU OSs GNU tools usually pick up GNU tools before the OS tools,
when they find them ...

Regards,
jel.
-- 
Otto-von-Guericke University     http://www.cs.uni-magdeburg.de/
Department of Computer Science   Geb. 29 R 027, Universitaetsplatz 2
39106 Magdeburg, Germany         Tel: +49 391 67 12768


From kevin.r.coombes at gmail.com  Wed Mar 10 03:52:54 2010
From: kevin.r.coombes at gmail.com (Kevin Coombes)
Date: Tue, 09 Mar 2010 20:52:54 -0600
Subject: [Rd] Defining a method in two packages
In-Reply-To: <4B966702.3090800@statistik.tu-dortmund.de>
References: <1267807677.9076.21.camel@punchbuggy>		<4B92A2C9.1020803@statistik.tu-dortmund.de>		<alpine.LFD.2.00.1003061952170.14938@gannet.stats.ox.ac.uk>	<1268064992.26491.31.camel@punchbuggy>
	<4B966702.3090800@statistik.tu-dortmund.de>
Message-ID: <4B970986.8000603@gmail.com>

Wouldn't it make sense to simply create a "ranef" package whose only 
role in the universe is to create the generic function that lme4, coxme, 
and anyone else who needs it could just import, without getting tons of 
additional and (depending on the application) irrelevant code?

Best,
    Kevin

Uwe Ligges wrote:
>
>
> On 08.03.2010 17:16, Terry Therneau wrote:
>> Brian&  Uwe,
>>    Thanks for responding.  Let me see if I can refine the query and move
>> towards a solution.
>>
>>> From Uwe:
>>> Of course, after loading lme4, you can still use the ranef from coxme:
>>> coxme::ranef(fit)
>>
>> Of course, but I'm interested in other users (as well as myself) and
>> prefer to avoid the 'secret handshake' form of a call.
>>
>>> In your own package, you could simply import the generic from coxme.
>>
>> I don't understand this.
>
> You could import the generic from the other package and define your 
> won methods for it in order to make dispatching work correctly.
>
>
>
>>> From Brian:
>>> My solution would though be NOT to reuse a name that is already
>>> established in another package (nlme has used it for many years).
>>> The design problem is that generic foo() in package B might have
>>> nothing to do with foo() in package A.  When it does, we expect B ...
>>
>> I disagree completely.  It is precisely because of nlme and lmer
>> prominence that I want to reprise their methods: my users have a much
>> better chance of remembering how to do things.  If I followed this logic
>> to its conclusion one should never define a print() method because it
>> might conflict with the base definition.
>>    The consequence is that I am under obligation to NOT make my method
>> something different than Doug's, if I want to satisfy the goal of user
>> level consistency.  Several aspects of coxme purposefully mimic lmer,
>> even in cases (such as print.coxme) where his layout is not precisely
>> what I would have chosen.
>
> Then please folow my suggestion and import the generic from the 
> packages mentioned above in your namespace. Then you could extend it 
> by your own methods wihtout having to define another generic of the 
> same name and avoid the conflicts.
>
>
>>    I really do not want to require lme4 just to pick up the methods
>> definition.  It's a huge package, and there is no code in common.  Both
>> packages work very hard to be efficient via sparse matrix methods, but
>> the actual details are completely different due to the mathematical
>> structure of our underlying likelihoods.  Use of both in the same
>> analysis would be rare, so my issue won't be common.
>
> Well, then things become complicated if not impossible.
>
>
>>> The situation can be alleviated by making S3 methods visible.  Thus if
>>> coxme exported coxme:::ranef.coxme and lme4 had a default method
>>
>>> ranef<- function (object, ...) UseMethod("ranef")
>>
>>   I have no objection to exporting my method.  If a joint change to lme4
>> and coxme is the best solution, I will take the discussion off line with
>> Doug.  Is this the best way forward?
>
> I think so.
>
> Best wishes,
> uwe
>
>
>>
>> Terry
>>
>>
>>
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From bates at stat.wisc.edu  Wed Mar 10 14:36:20 2010
From: bates at stat.wisc.edu (Douglas Bates)
Date: Wed, 10 Mar 2010 07:36:20 -0600
Subject: [Rd] Defining a method in two packages
In-Reply-To: <4B970986.8000603@gmail.com>
References: <1267807677.9076.21.camel@punchbuggy>
	<4B92A2C9.1020803@statistik.tu-dortmund.de>
	<alpine.LFD.2.00.1003061952170.14938@gannet.stats.ox.ac.uk>
	<1268064992.26491.31.camel@punchbuggy>
	<4B966702.3090800@statistik.tu-dortmund.de>
	<4B970986.8000603@gmail.com>
Message-ID: <40e66e0b1003100536g19fbec98q72f62455a23dc29b@mail.gmail.com>

I think a simpler solution, which I have implemented in lme4 but not
yet released is to have

importFrom(nlme, ranef, fixef)

in the NAMESPACE file of packages that implement methods for those
generics (and, of course, add nlme to the Imports: specification in
the DESCRIPTION file).  As nlme is a required package I don't think
this is too much of a burden.

On Tue, Mar 9, 2010 at 8:52 PM, Kevin Coombes <kevin.r.coombes at gmail.com> wrote:
> Wouldn't it make sense to simply create a "ranef" package whose only role in
> the universe is to create the generic function that lme4, coxme, and anyone
> else who needs it could just import, without getting tons of additional and
> (depending on the application) irrelevant code?
>
> Best,
> ? Kevin
>
> Uwe Ligges wrote:
>>
>>
>> On 08.03.2010 17:16, Terry Therneau wrote:
>>>
>>> Brian& ?Uwe,
>>> ? Thanks for responding. ?Let me see if I can refine the query and move
>>> towards a solution.
>>>
>>>> From Uwe:
>>>> Of course, after loading lme4, you can still use the ranef from coxme:
>>>> coxme::ranef(fit)
>>>
>>> Of course, but I'm interested in other users (as well as myself) and
>>> prefer to avoid the 'secret handshake' form of a call.
>>>
>>>> In your own package, you could simply import the generic from coxme.
>>>
>>> I don't understand this.
>>
>> You could import the generic from the other package and define your won
>> methods for it in order to make dispatching work correctly.
>>
>>
>>
>>>> From Brian:
>>>> My solution would though be NOT to reuse a name that is already
>>>> established in another package (nlme has used it for many years).
>>>> The design problem is that generic foo() in package B might have
>>>> nothing to do with foo() in package A. ?When it does, we expect B ...
>>>
>>> I disagree completely. ?It is precisely because of nlme and lmer
>>> prominence that I want to reprise their methods: my users have a much
>>> better chance of remembering how to do things. ?If I followed this logic
>>> to its conclusion one should never define a print() method because it
>>> might conflict with the base definition.
>>> ? The consequence is that I am under obligation to NOT make my method
>>> something different than Doug's, if I want to satisfy the goal of user
>>> level consistency. ?Several aspects of coxme purposefully mimic lmer,
>>> even in cases (such as print.coxme) where his layout is not precisely
>>> what I would have chosen.
>>
>> Then please folow my suggestion and import the generic from the packages
>> mentioned above in your namespace. Then you could extend it by your own
>> methods wihtout having to define another generic of the same name and avoid
>> the conflicts.
>>
>>
>>> ? I really do not want to require lme4 just to pick up the methods
>>> definition. ?It's a huge package, and there is no code in common. ?Both
>>> packages work very hard to be efficient via sparse matrix methods, but
>>> the actual details are completely different due to the mathematical
>>> structure of our underlying likelihoods. ?Use of both in the same
>>> analysis would be rare, so my issue won't be common.
>>
>> Well, then things become complicated if not impossible.
>>
>>
>>>> The situation can be alleviated by making S3 methods visible. ?Thus if
>>>> coxme exported coxme:::ranef.coxme and lme4 had a default method
>>>
>>>> ranef<- function (object, ...) UseMethod("ranef")
>>>
>>> ?I have no objection to exporting my method. ?If a joint change to lme4
>>> and coxme is the best solution, I will take the discussion off line with
>>> Doug. ?Is this the best way forward?
>>
>> I think so.
>>
>> Best wishes,
>> uwe
>>
>>
>>>
>>> Terry
>>>
>>>
>>>
>>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From Hoptman at NKI.RFMH.ORG  Wed Mar 10 15:00:44 2010
From: Hoptman at NKI.RFMH.ORG (Hoptman, Matthew)
Date: Wed, 10 Mar 2010 09:00:44 -0500
Subject: [Rd] Problem with gsl package
In-Reply-To: <4B8B0016.8070205@mx.uni-saarland.de>
References: <2586A1048152BE4D861E64A98700AD4204E76425@nki-mail.nki.rfmh.org>
	<4B8B0016.8070205@mx.uni-saarland.de>
Message-ID: <2586A1048152BE4D861E64A98700AD4204E7650E@nki-mail.nki.rfmh.org>

Hi Martin,
Good news.  I got things to work.  I think my gsl installation was
corrupted.  In any event, thanks for your help.
Best,
Matt

-----Original Message-----
From: Martin Becker [mailto:martin.becker at mx.uni-saarland.de] 
Sent: Sunday, February 28, 2010 6:45 PM
To: Hoptman, Matthew
Cc: r-devel at r-project.org
Subject: Re: [Rd] Problem with gsl package

Hi,

I think I had similar problems with gsl on a non-standard installation. 
The following steps seemed to work (but are merely the results of 
struggling around...)

1. Download and extract source code of R-package 'gsl'
2. Use gsl-config --libs to get the path to GSL's lib directory 
(-L<path-to-lib>), use gsl-config --cflags to get the path to GSL's 
include directory (-I<path-to-include>)
3. Change Makevars in gsl/src:
- Add -L<path-to-lib> to PKG_LIBS
- Add (new) line: PKG_CPPFLAGS=-I<path-to-include>
4. Install gsl via
  LDFLAGS=-L<path-to-lib>;export 
LDFLAGS;CPPFLAGS=-I<path-to-include>;export CPPFLAGS;R CMD INSTALL gsl

Best,

  Martin



Hoptman, Matthew wrote:
> Hi all, 
> I am new to R and am writing after having contacted Robin Hankin, who
> maintains the R gsl wrapper.
>
>  
>
> I am trying to use an AFNI (neuroimaging analysis) program that
depends
> on the R gsl package.   When I try to use the script I wrote, I get an
> error that led me to suspect the gsl package was a culprit.  When I do
> library("gsl") within R, I get:
>
> Error in dyn.load(file, DLLpath = DLLpath, ...) : 
>
>   unable to load shared library
> '/home/matt/R/lib64/R/library/gsl/libs/gsl.so':
>
>   /home/matt/R/lib64/R/library/gsl/libs/gsl.so: undefined symbol:
> gsl_sf_expint_En_e
>
> Error: package/namespace load failed for 'gsl'
>
>  
>
> It looks like it is due to where my Linux (not R) gsl package is
> installed.  Robin thought the problem is that I had to install my
Linux
> gsl package in a nontypical location (it's in /usr) because /usr/local
> is not available to us.
>
>  
>
> He mentioned that others have had this problem.  Has anyone been able
to
> surmount this problem?
> Thanks,
>
> Matt
>
>  
>
> PS.  I'm running Suse Linux 10.3:
>
> Linux ghidra 2.6.22.19-0.1-default #1 SMP 2008-10-14 22:17:43 +0200
> x86_64 x86_64 x86_64 GNU/Linux
>
> Matthew J. Hoptman, PhD 
> Research Scientist V 
> Nathan S. Kline Institute for Psychiatric Research 
>
> Research Associate Professor in Psychiatry 
> NYU School of Medicine 
>
>  
>
> IMPORTANT NOTICE: This e-mail is meant only for the use of the
intended
> recipient. It may contain confidential information which is legally
> privileged or otherwise protected by law. If you received this 
> e-mail in error or from someone who was not authorized to send it to
> you, you are strictly prohibited from reviewing, using, disseminating,
> distributing or copying the e-mail. 
>
> PLEASE NOTIFY US IMMEDIATELY OF THE ERROR BY RETURN E-MAIL AND DELETE
> THIS MESSAGE FROM YOUR SYSTEM. Thank you for your cooperation.
>
>  
>
>
>
> _________________________________________
> Conserve resources. Print only when necessary.
>
> IMPORTANT NOTICE:  This e-mail is meant only for the use of the
intended recipient.  It may contain confidential information which is
legally privileged
> or otherwise protected by law.  If you received this e-mail in error
or from someone who was not authorized to send it to you, you are
strictly prohibited
> from reviewing, using, disseminating, distributing or copying the
e-mail.  PLEASE NOTIFY US IMMEDIATELY OF THE ERROR BY RETURN E-MAIL AND
DELETE THIS MESSAGE FROM YOUR SYSTEM.  Thank you for your cooperation.
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>   

-- 
Dr. Martin Becker
Statistics and Econometrics
Saarland University
Campus C3 1, Room 206
66123 Saarbruecken
Germany


_________________________________________
Conserve resources. Print only when necessary.

IMPORTANT NOTICE:  This e-mail is meant only for the use of the intended recipient.  It may contain confidential information which is legally privileged
or otherwise protected by law.  If you received this e-mail in error or from someone who was not authorized to send it to you, you are strictly prohibited
from reviewing, using, disseminating, distributing or copying the e-mail.  PLEASE NOTIFY US IMMEDIATELY OF THE ERROR BY RETURN E-MAIL AND DELETE THIS MESSAGE FROM YOUR SYSTEM.  Thank you for your cooperation.



From therneau at mayo.edu  Wed Mar 10 15:30:07 2010
From: therneau at mayo.edu (Terry Therneau)
Date: Wed, 10 Mar 2010 08:30:07 -0600
Subject: [Rd] Defining a method in two packages
In-Reply-To: <40e66e0b1003100536g19fbec98q72f62455a23dc29b@mail.gmail.com>
References: <1267807677.9076.21.camel@punchbuggy>
	<4B92A2C9.1020803@statistik.tu-dortmund.de>
	<alpine.LFD.2.00.1003061952170.14938@gannet.stats.ox.ac.uk>
	<1268064992.26491.31.camel@punchbuggy>
	<4B966702.3090800@statistik.tu-dortmund.de>
	<4B970986.8000603@gmail.com>
	<40e66e0b1003100536g19fbec98q72f62455a23dc29b@mail.gmail.com>
Message-ID: <1268231407.18624.12.camel@punchbuggy>

Doug wrote:
> I think a simpler solution, which I have implemented in lme4 but not
> yet released is to have

> importFrom(nlme, ranef, fixef)

> in the NAMESPACE file of packages that implement methods for those
> generics (and, of course, add nlme to the Imports: specification in
> the DESCRIPTION file).  As nlme is a required package I don't think
> this is too much of a burden.

  I'll do the same change in coxme.  

We can save Kevin Coombe's solution of a separate package of "method
stubs" (which I find very similar in spirit to a shared .h file in C)
for the day that ranef/fixef gets wildly popular.  An importMethods
directive for the namespace is an intriguing long term idea for the core
team to ponder. 

Again, thanks fo all the input.  This discussion has been very
illuminating for me.

Terry T.


From wdunlap at tibco.com  Wed Mar 10 18:35:39 2010
From: wdunlap at tibco.com (William Dunlap)
Date: Wed, 10 Mar 2010 09:35:39 -0800
Subject: [Rd] log2(quote(1:10)) evaluates the quoted 1:10, log() does not
Message-ID: <77EB52C6DD32BA4D87471DCD70C8D70002A0F362@NA-PA-VBE03.na.tibco.com>

This is very minor, but shouldn't log2(quote(1:10))
throw an error,the same as log() and other math functions
do?  It looks like log2 and log10 evaluate a call object
instead of throwing a non-numeric-argument error.  They
do object to non-call language objects, like expressions.

  > log2(quote(1:10))
   [1] 0.000000 1.000000 1.584963 2.000000 2.321928 2.584963
   [7] 2.807355 3.000000 3.169925 3.321928
  > log(quote(1:10))
  Error in log(quote(1:10)) : Non-numeric argument to mathematical
function
  > sqrt(quote(1:10))
  Error in sqrt(quote(1:10)) :
    Non-numeric argument to mathematical function
  > quote(1:10) ^ 2
  Error in quote(1:10)^2 : non-numeric argument to binary operator
  > 2 ^ quote(1:10)
  Error in 2^quote(1:10) : non-numeric argument to binary operator

Bill Dunlap
Spotfire, TIBCO Software
wdunlap tibco.com 


From nashjc at uottawa.ca  Wed Mar 10 18:43:41 2010
From: nashjc at uottawa.ca (Prof. John C Nash)
Date: Wed, 10 Mar 2010 12:43:41 -0500
Subject: [Rd] R CMD check issue with soft-linked directory
Message-ID: <4B97DA4D.90803@uottawa.ca>

I've been having some strange problems with R CMD check in the last couple of days, but 
now believe I have localized the issue.

I had been running Ubuntu Hardy on one drive and then upgraded to Jaunty, but put Jaunty 
on a different drive. I continue to be able to boot Hardy when I wish. I soft-linked my R 
working area i.e.,

   /home/john/Rstuff  ---->    /media/lnx804/home/john/Rstuff

I can still build packages fine, but get

john at nsrv-jaunty:~/jtest$ R CMD check minqa
* checking for working pdflatex ... OK
* using log directory '/media/store2/jn/test/minqa.Rcheck'
* using R version 2.10.1 (2009-12-14)
* using session charset: UTF-8
* checking for file 'minqa/DESCRIPTION' ... OK
* checking extension type ... Package
* this is package 'minqa' version '1.02'
* checking package name space information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking for executable files ... OK
* checking whether package 'minqa' can be installed ... OK
* checking package directory ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... ERROR
Error in dyn.load(file, DLLpath = DLLpath, ...) :
   unable to load shared library '/media/store2/jn/test/minqa.Rcheck/minqa/libs/minqa.so':
   /media/store2/jn/test/minqa.Rcheck/minqa/libs/minqa.so: failed to map segment from 
shared object: Operation not permitted
Error : .onLoad failed in 'loadNamespace' for 'minqa'
Error: package/namespace load failed for 'minqa'
Execution halted

It looks like this package has a loading problem: see the messages for
details.

----------------------------------------------------------------------------
The above test was run with a newly created jtest/ directory on yet another drive 
(partition) to see if there was possibly corruption. However, the issue seems to be one of 
using a softlink.

I would not be upset if R CMD check simply told me that this isn't the right way to do 
things i.e., don't use the softlinked directory.

Does anyone know if this is a recognized issue and is it possible to put some sort of 
reasonable error message into R CMD check?

JN


From david at revolution-computing.com  Wed Mar 10 20:07:33 2010
From: david at revolution-computing.com (David M Smith)
Date: Wed, 10 Mar 2010 11:07:33 -0800
Subject: [Rd] [R] Using R in a corporate envinronment
In-Reply-To: <bf7b876d1003101007v37ffbee1t7ea6e65ee9f4da2@mail.gmail.com>
References: <bf7b876d1003101007v37ffbee1t7ea6e65ee9f4da2@mail.gmail.com>
Message-ID: <475a3c8f1003101107w11cb0309j5f9b53967298deeb@mail.gmail.com>

If you're looking for business and technical justifications for a
business to adopt R, I wrote some up last year:
http://blog.revolution-computing.com/2009/02/how-to-get-it-to-accept-and-love-r.html

In summary:
R is mainstream
R is supported
R is high-quality
R leads commercial packages in innovation
R is cost effective

Ironically, for many companies #1 is more important than #5, so
pointing to other companies using R is often a good strategy (see
http://blog.revolution-computing.com/rmedia/ for some media articles
that may help).
And also (if I may indulge the list for a small plug) some companies
are more comfortable paying for open-source software than installing
it free of cost (for the support, validation, and so on). If that's
the case for your company, there's REvolution R Enterprise:
http://www.revolution-computing.com/products/revolution-enterprise.php

Hope this helps,
# David Smith

--
David M Smith <david at revolution-computing.com>
VP of Marketing, REvolution Computing  http://blog.revolution-computing.com
Tel: +1 (650) 330-0553 x205 (Palo Alto, CA, USA)

Download REvolution R free:
www.revolution-computing.com/downloads/revolution-r.php

On Wed, Mar 10, 2010 at 10:07 AM, Fernando Henrique Ferraz Pereira da
Rosa <pessoal at fernandohrosa.com.br> wrote:
>
> Dear r-useRs,
>
> After a couple of years in a 'R exile' of sorts, I've recently changed jobs
> and my current employer (an American multinational in the food manufacturing
> industry) is much more open than my past employer (which wouldn't even want
> to hear about anything that didn't begin with SAS...). So, after my
> insistence corporate IT is now considering adopting R as part of our
> statistical applications toolbox.
>
> Things are not that simple though, and I'm now in the process of collecting
> data for writing a Business Case for R in our corporation, and this is the
> reason I'm writing you. If you have any examples (preferably with
> references) and/or experience in a similar scenario please do write me. I've
> already googled for some materials, and there's an excellent piece on the
> NyTimes of last year, which pointed that even Google was adopting R, and
> this is exactly the sort of thing I need to help convincing IT they'll be
> making a sound choice in adopting R.
>
> Thanks in advance for your attention,
>
> Fernando Rosa
>
> --
> "Though this be randomness, yet there is structure in't."
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?Rosa, F.H.F.P
>
> Instituto de Matem?tica e Estat?stica
> Universidade de S?o Paulo
> Fernando Henrique Ferraz P. da Rosa
> http://www.feferraz.net
>
> ? ? ? ?[[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From simon.urbanek at r-project.org  Wed Mar 10 20:52:01 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Wed, 10 Mar 2010 14:52:01 -0500
Subject: [Rd] R CMD check issue with soft-linked directory
In-Reply-To: <4B97DA4D.90803@uottawa.ca>
References: <4B97DA4D.90803@uottawa.ca>
Message-ID: <E7378350-6AF3-487E-8C28-429DC39BE29C@r-project.org>


On Mar 10, 2010, at 12:43 , Prof. John C Nash wrote:

> I've been having some strange problems with R CMD check in the last  
> couple of days, but now believe I have localized the issue.
>
> I had been running Ubuntu Hardy on one drive and then upgraded to  
> Jaunty, but put Jaunty on a different drive. I continue to be able  
> to boot Hardy when I wish. I soft-linked my R working area i.e.,
>
>  /home/john/Rstuff  ---->    /media/lnx804/home/john/Rstuff
>
> I can still build packages fine, but get
>
> john at nsrv-jaunty:~/jtest$ R CMD check minqa
> * checking for working pdflatex ... OK
> * using log directory '/media/store2/jn/test/minqa.Rcheck'
> * using R version 2.10.1 (2009-12-14)
> * using session charset: UTF-8
> * checking for file 'minqa/DESCRIPTION' ... OK
> * checking extension type ... Package
> * this is package 'minqa' version '1.02'
> * checking package name space information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking for executable files ... OK
> * checking whether package 'minqa' can be installed ... OK
> * checking package directory ... OK
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking DESCRIPTION meta-information ... OK
> * checking top-level files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... ERROR
> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>  unable to load shared library '/media/store2/jn/test/minqa.Rcheck/ 
> minqa/libs/minqa.so':
>  /media/store2/jn/test/minqa.Rcheck/minqa/libs/minqa.so: failed to  
> map segment from shared object: Operation not permitted
> Error : .onLoad failed in 'loadNamespace' for 'minqa'
> Error: package/namespace load failed for 'minqa'
> Execution halted
>
> It looks like this package has a loading problem: see the messages for
> details.
>
> ----------------------------------------------------------------------------
> The above test was run with a newly created jtest/ directory on yet  
> another drive (partition) to see if there was possibly corruption.  
> However, the issue seems to be one of using a softlink.
>

I would be very surprised if this was softlink's fault per se. It  
looks more like a permission issue in your system to me -- the first  
thing I would check is that your /media/... is not mounted with  
noexec...

Cheers,
Simon


> I would not be upset if R CMD check simply told me that this isn't  
> the right way to do things i.e., don't use the softlinked directory.
>
> Does anyone know if this is a recognized issue and is it possible to  
> put some sort of reasonable error message into R CMD check?
>
> JN
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From nashjc at uottawa.ca  Wed Mar 10 21:11:42 2010
From: nashjc at uottawa.ca (Prof. John C Nash)
Date: Wed, 10 Mar 2010 15:11:42 -0500
Subject: [Rd] R CMD check issue with soft-linked directory
In-Reply-To: <E7378350-6AF3-487E-8C28-429DC39BE29C@r-project.org>
References: <4B97DA4D.90803@uottawa.ca>
	<E7378350-6AF3-487E-8C28-429DC39BE29C@r-project.org>
Message-ID: <4B97FCFE.7030608@uottawa.ca>

Good catch Simon.

Changed fstab to force exec on mount of the drive in question and things worked.

Thanks,

JN


Simon Urbanek wrote:
> 
> On Mar 10, 2010, at 12:43 , Prof. John C Nash wrote:
> 
>> I've been having some strange problems with R CMD check in the last 
>> couple of days, but now believe I have localized the issue.
>>
>> I had been running Ubuntu Hardy on one drive and then upgraded to 
>> Jaunty, but put Jaunty on a different drive. I continue to be able to 
>> boot Hardy when I wish. I soft-linked my R working area i.e.,
>>
>>  /home/john/Rstuff  ---->    /media/lnx804/home/john/Rstuff
>>
>> I can still build packages fine, but get
>>
>> john at nsrv-jaunty:~/jtest$ R CMD check minqa
>> * checking for working pdflatex ... OK
>> * using log directory '/media/store2/jn/test/minqa.Rcheck'
>> * using R version 2.10.1 (2009-12-14)
>> * using session charset: UTF-8
>> * checking for file 'minqa/DESCRIPTION' ... OK
>> * checking extension type ... Package
>> * this is package 'minqa' version '1.02'
>> * checking package name space information ... OK
>> * checking package dependencies ... OK
>> * checking if this is a source package ... OK
>> * checking for executable files ... OK
>> * checking whether package 'minqa' can be installed ... OK
>> * checking package directory ... OK
>> * checking for portable file names ... OK
>> * checking for sufficient/correct file permissions ... OK
>> * checking DESCRIPTION meta-information ... OK
>> * checking top-level files ... OK
>> * checking index information ... OK
>> * checking package subdirectories ... OK
>> * checking R files for non-ASCII characters ... OK
>> * checking R files for syntax errors ... OK
>> * checking whether the package can be loaded ... ERROR
>> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>>  unable to load shared library 
>> '/media/store2/jn/test/minqa.Rcheck/minqa/libs/minqa.so':
>>  /media/store2/jn/test/minqa.Rcheck/minqa/libs/minqa.so: failed to map 
>> segment from shared object: Operation not permitted
>> Error : .onLoad failed in 'loadNamespace' for 'minqa'
>> Error: package/namespace load failed for 'minqa'
>> Execution halted
>>
>> It looks like this package has a loading problem: see the messages for
>> details.
>>
>> ---------------------------------------------------------------------------- 
>>
>> The above test was run with a newly created jtest/ directory on yet 
>> another drive (partition) to see if there was possibly corruption. 
>> However, the issue seems to be one of using a softlink.
>>
> 
> I would be very surprised if this was softlink's fault per se. It looks 
> more like a permission issue in your system to me -- the first thing I 
> would check is that your /media/... is not mounted with noexec...
> 
> Cheers,
> Simon
> 
> 
>> I would not be upset if R CMD check simply told me that this isn't the 
>> right way to do things i.e., don't use the softlinked directory.
>>
>> Does anyone know if this is a recognized issue and is it possible to 
>> put some sort of reasonable error message into R CMD check?
>>
>> JN
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>


From saptarshi.guha at gmail.com  Thu Mar 11 05:53:32 2010
From: saptarshi.guha at gmail.com (Saptarshi Guha)
Date: Wed, 10 Mar 2010 23:53:32 -0500
Subject: [Rd] Shrinking a List
Message-ID: <1e7471d51003102053i1f5cf893gb11434b2f7ae250a@mail.gmail.com>

Hello,
I create a VECSXP(call it A) with size N(~ 5000), i then proceed to
fill the elements and find out I don't need to fill more than
M (M<< N).
Thus if i return A to the user's R code, he/she will see a list of
length 5K of which N-M are NULLs.

To avoid this, I create a new VECSXP B of length M and /duplicate/ the
elements of A.

Since I do this often, it appears to be wasteful, so can I

a) is there a resize function for a VECSXP?

if not

b) can i just do something like

 SET_VECTOR_ELT(B,i, VECTOR_ELT(A,i))  instead of wrapping
VECTOR_ELT(A,i) inside a call to Rf_duplicate
(i will be UNPROTECTING A and B, though I will return B)


I suppose I can do (b), since B (since it is being returned) is
automatically protected and therefore all its elements will also be
protected, correct?


Thank you
Saptarshi


From jsalsman at talknicer.com  Thu Mar 11 06:21:45 2010
From: jsalsman at talknicer.com (James Salsman)
Date: Wed, 10 Mar 2010 21:21:45 -0800
Subject: [Rd] application to mentor syrfr package development for Google
	Summer of Code 2010
In-Reply-To: <a528a0c41003091106p3a2f1c32ia7d32b764fe25f4d@mail.gmail.com>
References: <a3c2bd6c1003071711h346dd79fr820a41f9080700fc@mail.gmail.com>
	<7021740b1003071935p51d4ed7dq2fe481e499f0ef5@mail.gmail.com>
	<a3c2bd6c1003072100g2e9ff45fw69c45b9257fa6e5c@mail.gmail.com>
	<7021740b1003072239n529da6f6ye95ce30c4715a03d@mail.gmail.com>
	<a3c2bd6c1003072349p3d506ca2s8959d88c913f9947@mail.gmail.com>
	<a528a0c41003080041n7eabcf60lf9a479f5feb80841@mail.gmail.com>
	<a3c2bd6c1003081445x4fe95860v232430634ed9561d@mail.gmail.com>
	<a528a0c41003091106p3a2f1c32ia7d32b764fe25f4d@mail.gmail.com>
Message-ID: <a3c2bd6c1003102121w7bcf51dcraec42ea2e9f7e2fd@mail.gmail.com>

Michael,

Thanks for your reply with the information about the Eureqa API -- I
am forwarding it to the r-devel list below.

Dirk,

Will you please agree to referring to the syrfr package as symbolic
genetic algorithm regression of functions but not (yet) general
relations?  It would be best to refer to general relation regression
as a future package, something like 'syrr' and leave the
parametrization of the derivatives to that package.

May I please mentor, in consultation with Michael if necessary, work
on general function regressions while Chillu and John Nash work on the
derivative package necessary for general relation regressions?  Thank
you for your kind consideration.

Best regards,
James Salsman


On Tue, Mar 9, 2010 at 11:06 AM, Michael Schmidt <mds47 at cornell.edu> wrote:
> I think it's a great idea worth trying out. We have always done significance
> tests just on the final frontier of models as a post processing step. Moving
> this into the algorithm could focus the search more on significant higher
> quality solutions. One thing to beware of though is that using parsimony
> pressure just on the number of free parameters tends to focus the search on
> complex equations with no free parameters. So, some care should be taken how
> to implement it.
>
> We do see a measurable improvement using crossover versus just mutation on
> random test problems. Empirically, it doesn't seem necessary for all
> problems but also doesn't seem to ever inhibit the search.
>
> I didn't know that anyone was working on a SR package for R. Very cool! I'm
> happy to consult if you have any questions I can help with.
>
> You may also be interested that we just recently opened up the API for
> interacting with Eureqa servers:
> http://code.google.com/p/eureqa-api/
> If you know of anyone that might be interested in making a wrapper for R,
> please forward.
>
> Michael
>
>
> On Mon, Mar 8, 2010 at 5:45 PM, James Salsman <jsalsman at talknicer.com>
> wrote:
>>
>> Michael,
>>
>> Thanks for your reply:
>>
>> On Mon, Mar 8, 2010 at 12:41 AM, Michael Schmidt <mds47 at cornell.edu>
>> wrote:
>> >
>> > Thanks for contacting me. Eureqa takes into account the total size of an
>> > equation when comparing different candidate models. It attempts to find
>> > the
>> > set of possible equations that are non-dominated in both error and size.
>> > The
>> > final results is a short list consisting of the most accurate equation
>> > for
>> > increasing equation sizes.
>> >
>> > This is closely related to degrees of freedom, but not exactly the same
>>
>> That's very good, but I wonder whether we can perform automatic
>> outlier exclusion that way. ?We would need to keep the confidence
>> interval, or at least the information necessary to derive it, accurate
>> in every step of the genetic beam search. ?Since the confidence
>> intervals of extrapolation depend so heavily on the number of degrees
>> of freedom of the fit (along with the residual standard error) it's a
>> good idea to use a degree-of-freedom-adjusted F statistic instead of a
>> post-hoc combination of equation size and residual standard error, I
>> would think. ?You might want to try it and see how it improves things.
>> ?Confidence intervals, by representing the goodness of fit in the
>> original units and domain of the dependent variable, are tremendously
>> useful and sometimes make many kinds of tests which would otherwise be
>> very laborious easy to eyeball.
>>
>> Being able to fit curves to one-to-many relations instead of strict
>> one-to-one functions appeals to those working in the imaging domain,
>> but not to as many traditional non-image statisticians. Regressing
>> functions usually results in well-defined confidence intervals, but
>> regressing general relations with derivatives produces confidence
>> intervals which can also be relations. ?Trying to figure out a
>> spiral-shaped confidence interval probably appeals to astronomers more
>> than most people. ?So I am proposing that, for R's contemplated
>> 'syrfr' symbolic regression package, we do functions in a general
>> genetic beam search framework, Chillu and John Nash can do derivatives
>> in the new 'adinr' package, and then we can try to put them together,
>> extend the syrfr package with a parameter indicating to fit relations
>> with derivatives instead of functions, to try to replicate your work
>> on Eureqa using d.o.f-adjusted F statistics as a heuristic beam search
>> evaluation function.
>>
>> Have you quantified the extent to which using the crossover rule in
>> the equation tree search is an improvement over mutation alone in
>> symbolic regression? ?I am glad that Chillu and Dirk have already
>> supported that; there is no denying its utility.
>>
>> Would you like to co-mentor this project?
>> http://rwiki.sciviews.org/doku.php?id=developers:projects:gsoc2010:syrfr
>> I've already stepped forward, so you could do as much or as little as
>> you like if you wanted to co-mentor and Dirk agreed to that
>> arrangement.
>>
>> Best regards,
>> James Salsman
>>
>>
>> > On Mon, Mar 8, 2010 at 2:49 AM, James Salsman <jsalsman at talknicer.com>
>> > wrote:
>> >>
>> >> I meant that development on both a syrfr R package capable of
>> >> using either F statistics or parametric derivatives should proceed in
>> >> parallel with your work on such a derivatives package. You are right
>> >> that genetic algorithm search (and general best-first search --
>> >> http://en.wikipedia.org/wiki/Best-first_search -- of which genetic
>> >> algorithms are various special cases) can be very effectively
>> >> parallelized, too.
>> >>
>> >> In any case, thank you for pointing out Eureqa --
>> >> http://ccsl.mae.cornell.edu/eureqa -- but I can see no evidence there
>> >> or in the user manual or user forums that Eureqa is considering
>> >> degrees of freedom in its goodness-of-fit estimation. ?That is a
>> >> serious problem which will typically result in invalid symbolic
>> >> regression. ?I am sending this message also to Michael Schmidt so that
>> >> he might be able to comment on the extent to which Eureqa adjusts for
>> >> degrees of freedom in his fit evaluations.
>> >>
>> >> Best regards,
>> >> James Salsman
>> >>
>> >> On Sun, Mar 7, 2010 at 10:39 PM, Chidambaram Annamalai
>> >> <quantumelixir at gmail.com> wrote:
>> >> >
>> >> >> If I understand your concern, you want to lay the foundation for
>> >> >> derivatives so that you can implement the search strategies
>> >> >> described
>> >> >> in Schmidt and Lipson (2010) --
>> >> >> http://www.springerlink.com/content/l79v2183725413w0/ -- is that
>> >> >> right?
>> >> >
>> >> > Yes. Basically traditional "naive" error estimators or fitness
>> >> > functions
>> >> > fail miserably when used in SR with implicit equations because they
>> >> > immediately close in on "best" fits like f(x) = x - x and other
>> >> > trivial
>> >> > solutions. In such cases no amount of regularization and complexity
>> >> > penalizing methods will help since x - x is fairly simple by most
>> >> > measures
>> >> > of complexity and it does have zero error. So the paper outlines such
>> >> > problems associated with "direct" error estimators and thus they
>> >> > infer
>> >> > the
>> >> > "triviality" of the fit by probing its estimates around nearby points
>> >> > and
>> >> > seeing if it does follow the pattern dictated by the data points --
>> >> > ergo
>> >> > derivatives.
>> >> >
>> >> > Also, somewhat like a side benefit, this method also enables us to
>> >> > perform
>> >> > regression on closed loops and other implicit equations since the
>> >> > fitness
>> >> > functions are based only on derivatives. The specific form of the
>> >> > error
>> >> > is
>> >> > equation 1.2 which is what, I believe, comprises of the internals of
>> >> > the
>> >> > evaluation procedure used in Eureqa.
>> >> >
>> >> > You are correct in pointing out that there is no reason to not work
>> >> > in
>> >> > parallel, since GAs generally have a more or less fixed form
>> >> > (evaluate-reproduce cycle) which is quite easily parallelized. I have
>> >> > used
>> >> > OpenMP in the past, in which it is fairly trivial to parallelize well
>> >> > formed
>> >> > for loops.
>> >> >
>> >> > Chillu
>> >> >
>> >> >> It is not clear to me how well this generalized approach will
>> >> >> work in practice, but there is no reason not to proceed in parallel
>> >> >> to
>> >> >> establish a framework under which you could implement the metrics
>> >> >> proposed by Schmidt and Lipson in the contemplated syrfr package.
>> >> >>
>> >> >> I have expanded the test I proposed with two more questions -- at
>> >> >>
>> >> >>
>> >> >> http://rwiki.sciviews.org/doku.php?id=developers:projects:gsoc2010:syrfr
>> >> >> -- specifically:
>> >> >>
>> >> >> 5. Critique http://sites.google.com/site/gptips4matlab/
>> >> >>
>> >> >> 6. Use anova to compare the goodness-of-fit of a SSfpl nls fit with
>> >> >> a
>> >> >> linear model of your choice. How can your characterize the
>> >> >> degree-of-freedom-adjusted goodness of fit of nonlinear models?
>> >> >>
>> >> >> I believe pairwise anova.nls is the optimal comparison for nonlinear
>> >> >> models, but there are several good choices for approximations,
>> >> >> including the residual standard error, which I believe can be
>> >> >> adjusted
>> >> >> for degrees of freedom, as can the F statistic which TableCurve
>> >> >> uses;
>> >> >> see: http://en.wikipedia.org/wiki/F-test#Regression_problems
>> >> >>
>> >> >> Best regards,
>> >> >> James Salsman
>
>
>
> --
> Michael Schmidt
> Cornell Computational Synthesis Lab
> Cornell University, 239 Upson Hall, Ithaca, NY 14853
> email: mds47 at cornell.edu
>


From ripley at stats.ox.ac.uk  Thu Mar 11 07:27:11 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 11 Mar 2010 06:27:11 +0000 (GMT)
Subject: [Rd] Shrinking a List
In-Reply-To: <1e7471d51003102053i1f5cf893gb11434b2f7ae250a@mail.gmail.com>
References: <1e7471d51003102053i1f5cf893gb11434b2f7ae250a@mail.gmail.com>
Message-ID: <alpine.LFD.2.00.1003110622280.9818@gannet.stats.ox.ac.uk>

And how would you do this at R level?

I would use length(A) <- M, and the corresponding C function is 
lengthgets.

Of course, the wasteful part is to create a far-too-long vector in the 
first place, rather than growing it as needed.

On Wed, 10 Mar 2010, Saptarshi Guha wrote:

> Hello,
> I create a VECSXP(call it A) with size N(~ 5000), i then proceed to
> fill the elements and find out I don't need to fill more than
> M (M<< N).
> Thus if i return A to the user's R code, he/she will see a list of
> length 5K of which N-M are NULLs.
>
> To avoid this, I create a new VECSXP B of length M and /duplicate/ the
> elements of A.
>
> Since I do this often, it appears to be wasteful, so can I
>
> a) is there a resize function for a VECSXP?
>
> if not
>
> b) can i just do something like
>
> SET_VECTOR_ELT(B,i, VECTOR_ELT(A,i))  instead of wrapping
> VECTOR_ELT(A,i) inside a call to Rf_duplicate
> (i will be UNPROTECTING A and B, though I will return B)
>
>
> I suppose I can do (b), since B (since it is being returned) is
> automatically protected and therefore all its elements will also be
> protected, correct?
>
>
> Thank you
> Saptarshi
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From hb at stat.berkeley.edu  Thu Mar 11 09:45:13 2010
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Thu, 11 Mar 2010 09:45:13 +0100
Subject: [Rd] [PATCH] R ignores PATH_MAX and fails in long directories
	(PR#14228)
In-Reply-To: <20100305231012.3731F2831FF0@mail.pubhealth.ku.dk>
References: <20100305231012.3731F2831FF0@mail.pubhealth.ku.dk>
Message-ID: <59d7961d1003110045n764c5ec3l32cdb16cba6eefca@mail.gmail.com>

Thanks for the troubleshooting,

I just want to second this patch; it would be great if PATH_MAX could
be used everywhere.

In case someone else searches the archives later, but also for those
who don't know what this is about, PATH_MAX specifies the maximum
number of symbols allowed in a pathname.  The maximum length often
differ between OSes and possibly also file systems.  For instance, in
MS Windows (all versions afaik) there is an upper limit of 256 symbols
(excluding drive letter etc) - see the below page 'How to: Use
filenames longer than 255 characters on Windows' for more details and
a workaround:

  http://www.aroma-project.org/howtos/UseLongFilenamesOnWindows

Minor comment: I've noticed that while Windows allows n symbols in a
pathname, R only allows n-1 symbols.  Is the NUL symbol adjusted for
twice?

/Henrik

On Sat, Mar 6, 2010 at 12:10 AM,  <mstokely at google.com> wrote:
> Full_Name: Murray Stokely
> Version: 2.10.1
> OS: Linux
> Submission from: (NULL) (216.239.45.4)
>
>
> The Defn.h header includes limits.h for PATH_MAX and then checks if it hasn't
> been defined and if not sets something manually. ?Some of the R code uses
> PATH_MAX but a lot of other functions in unix/sys-unix.c and main/startup.c just
> hardcodes a limit of 256 characters.
>
> In my environment this is not always enough, so I ran into this being a problem,
> and verified that the attached fix resolves the problem with R 2.10.1.
>
> To duplicate the problem:
>
> 1. Create a large directory:
> echo `seq 80` | tr ' ' '_' | sed -e 's|\(.*\)|/tmp/\1/\1/\1|g' | xargs mkdir -p
> 2. Copy R into it
> 3. Launch R from that directory / with that R_HOME
> You don't be able to load the base module or run other functions.
>
> I have prepared 2 patches, one against the trunk in Subversion :
> http://people.FreeBSD.org/~murray/maxpath-svn-trunk.patch
>
> And one against the 2.10 release branch :
>
> http://people.FreeBSD.org/~murray/maxpath-svn-2-10-branch.patch
>
> Trunk patch pasted below :
>
> Index: src/unix/sys-unix.c
> ===================================================================
> --- src/unix/sys-unix.c (revision 51208)
> +++ src/unix/sys-unix.c (working copy)
> @@ -61,7 +61,7 @@
> ?attribute_hidden
> ?FILE *R_OpenInitFile(void)
> ?{
> - ? ?char buf[256], *home, *p = getenv("R_PROFILE_USER");
> + ? ?char buf[PATH_MAX], *home, *p = getenv("R_PROFILE_USER");
> ? ? FILE *fp;
>
> ? ? fp = NULL;
> @@ -72,7 +72,7 @@
> ? ? ? ? ? ?return fp;
> ? ? ? ?if((home = getenv("HOME")) == NULL)
> ? ? ? ? ? ?return NULL;
> - ? ? ? sprintf(buf, "%s/.Rprofile", home);
> + ? ? ? snprintf(buf, PATH_MAX, "%s/.Rprofile", home);
> ? ? ? ?if((fp = R_fopen(buf, "r")))
> ? ? ? ? ? ?return fp;
> ? ? }
> Index: src/main/startup.c
> ===================================================================
> --- src/main/startup.c ?(revision 51208)
> +++ src/main/startup.c ?(working copy)
> @@ -52,10 +52,10 @@
> ?attribute_hidden
> ?FILE *R_OpenLibraryFile(const char *file)
> ?{
> - ? ?char buf[256];
> + ? ?char buf[PATH_MAX];
> ? ? FILE *fp;
>
> - ? ?snprintf(buf, 256, "%s/library/base/R/%s", R_Home, file);
> + ? ?snprintf(buf, PATH_MAX, "%s/library/base/R/%s", R_Home, file);
> ? ? fp = R_fopen(buf, "r");
> ? ? return fp;
> ?}
> @@ -71,10 +71,10 @@
> ?attribute_hidden
> ?FILE *R_OpenSysInitFile(void)
> ?{
> - ? ?char buf[256];
> + ? ?char buf[PATH_MAX];
> ? ? FILE *fp;
>
> - ? ?snprintf(buf, 256, "%s/library/base/R/Rprofile", R_Home);
> + ? ?snprintf(buf, PATH_MAX, "%s/library/base/R/Rprofile", R_Home);
> ? ? fp = R_fopen(buf, "r");
> ? ? return fp;
> ?}
> @@ -82,7 +82,7 @@
> ?attribute_hidden
> ?FILE *R_OpenSiteFile(void)
> ?{
> - ? ?char buf[256];
> + ? ?char buf[PATH_MAX];
> ? ? FILE *fp;
>
> ? ? fp = NULL;
> @@ -90,10 +90,10 @@
> ? ? ? ?if ((fp = R_fopen(getenv("R_PROFILE"), "r"))) return fp;
> ? ? ? ?if ((fp = R_fopen(getenv("RPROFILE"), "r"))) return fp;
> ?#ifdef R_ARCH
> - ? ? ? snprintf(buf, 256, "%s/etc/%s/Rprofile.site", R_Home, R_ARCH);
> + ? ? ? snprintf(buf, PATH_MAX, "%s/etc/%s/Rprofile.site", R_Home, R_ARCH);
> ? ? ? ?if ((fp = R_fopen(buf, "r"))) return fp;
> ?#endif
> - ? ? ? snprintf(buf, 256, "%s/etc/Rprofile.site", R_Home);
> + ? ? ? snprintf(buf, PATH_MAX, "%s/etc/Rprofile.site", R_Home);
> ? ? ? ?if ((fp = R_fopen(buf, "r"))) return fp;
> ? ? }
> ? ? return fp;
> Index: src/main/main.c
> ===================================================================
> --- src/main/main.c ? ? (revision 51208)
> +++ src/main/main.c ? ? (working copy)
> @@ -862,9 +862,9 @@
> ? ? }
>
> ? ? if (strcmp(R_GUIType, "Tk") == 0) {
> - ? ? ? char buf[256];
> + ? ? ? char buf[PATH_MAX];
>
> - ? ? ? snprintf(buf, 256, "%s/library/tcltk/exec/Tk-frontend.R", R_Home);
> + ? ? ? snprintf(buf, PATH_MAX, "%s/library/tcltk/exec/Tk-frontend.R", R_Home);
> ? ? ? ?R_LoadProfile(R_fopen(buf, "r"), R_GlobalEnv);
> ? ? }
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From misc7 at emerose.org  Thu Mar 11 14:52:12 2010
From: misc7 at emerose.org (Ben)
Date: Thu, 11 Mar 2010 07:52:12 -0600
Subject: [Rd] Associative array?
Message-ID: <20100311075212.66a6a0e7.misc7@emerose.org>

Hi, can someone tell me how to use associative arrays in R?  It can be
a hashtable or some kind of tree, as long as the lookups aren't O(n).
One way to do this is to use names, e.g. in:

    list(a=3, ...)[["a"]]

presumably looking up "a" is very quick.  (Can someone tell me offhand
how that is implemented?  Hashtable?)  However, if I wanted to, say,
memoize a numeric function, I can't elegantly use R names because R names must be characters.

I found the hash package on CRAN:

    http://cran.r-project.org/web/packages/hash/index.html

but it seems the keys are still characters.  Also, I haven't heard
anyone talking about it.  Trees and hashtables are common data
structures, so this problem must come up a lot.

Thanks,

-- 
Ben


From mds47 at cornell.edu  Tue Mar  9 20:06:53 2010
From: mds47 at cornell.edu (Michael Schmidt)
Date: Tue, 9 Mar 2010 14:06:53 -0500
Subject: [Rd] application to mentor syrfr package development for Google
	Summer of Code 2010
In-Reply-To: <a3c2bd6c1003081445x4fe95860v232430634ed9561d@mail.gmail.com>
References: <a3c2bd6c1003071711h346dd79fr820a41f9080700fc@mail.gmail.com>
	<7021740b1003071935p51d4ed7dq2fe481e499f0ef5@mail.gmail.com>
	<a3c2bd6c1003072100g2e9ff45fw69c45b9257fa6e5c@mail.gmail.com>
	<7021740b1003072239n529da6f6ye95ce30c4715a03d@mail.gmail.com>
	<a3c2bd6c1003072349p3d506ca2s8959d88c913f9947@mail.gmail.com>
	<a528a0c41003080041n7eabcf60lf9a479f5feb80841@mail.gmail.com>
	<a3c2bd6c1003081445x4fe95860v232430634ed9561d@mail.gmail.com>
Message-ID: <a528a0c41003091106p3a2f1c32ia7d32b764fe25f4d@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100309/14cfb761/attachment.pl>

From simon.urbanek at r-project.org  Thu Mar 11 15:54:51 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 11 Mar 2010 09:54:51 -0500
Subject: [Rd] Associative array?
In-Reply-To: <20100311075212.66a6a0e7.misc7@emerose.org>
References: <20100311075212.66a6a0e7.misc7@emerose.org>
Message-ID: <85602218-8121-4893-A262-86EC56E75002@r-project.org>

Ben,

On Mar 11, 2010, at 8:52 , Ben wrote:

> Hi, can someone tell me how to use associative arrays in R?  It can  
> be a hashtable or some kind of tree, as long as the lookups aren't  
> O(n).
> One way to do this is to use names, e.g. in:
>
>    list(a=3, ...)[["a"]]
>
> presumably looking up "a" is very quick.  (Can someone tell me  
> offhand how that is implemented?  Hashtable?)

lists are generic vectors with names so lookup is O(n). Environments  
in R are true hash tables for that purpose:

 > h=new.env(hash=TRUE)
 > h[["foo"]]="bar"
 > ls(h)
[1] "foo"


>  However, if I wanted to, say,
> memoize a numeric function, I can't elegantly use R names because R  
> names must be characters.
>

I don't quite understand - characters are (after raw vectors) the most  
expressive data type, so I'm not quite sure why that would be a  
limitation .. You can cast anything (but raw vector with nulls) into  
to a character.


> I found the hash package on CRAN:
>
>    http://cran.r-project.org/web/packages/hash/index.html
>
> but it seems the keys are still characters.  Also, I haven't heard
> anyone talking about it.  Trees and hashtables are common data
> structures, so this problem must come up a lot.
>


I don't see a problem thus I'm not surprised it didn't come up ;). But  
maybe I'm just missing your point ...

Cheers,
Simon


From seth at userprimary.net  Thu Mar 11 18:12:49 2010
From: seth at userprimary.net (Seth Falcon)
Date: Thu, 11 Mar 2010 09:12:49 -0800
Subject: [Rd] [PATCH] R ignores PATH_MAX and fails in long directories
 (PR#14228)
In-Reply-To: <59d7961d1003110045n764c5ec3l32cdb16cba6eefca@mail.gmail.com>
References: <20100305231012.3731F2831FF0@mail.pubhealth.ku.dk>
	<59d7961d1003110045n764c5ec3l32cdb16cba6eefca@mail.gmail.com>
Message-ID: <4B992491.2050501@userprimary.net>

On 3/11/10 12:45 AM, Henrik Bengtsson wrote:
> Thanks for the troubleshooting,
>
> I just want to second this patch; it would be great if PATH_MAX could
> be used everywhere.

The patch, or at least something quite similar, was applied in r51229.

+ seth

-- 
Seth Falcon | @sfalcon | http://userprimary.net/


From misc7 at emerose.org  Fri Mar 12 01:09:09 2010
From: misc7 at emerose.org (Ben)
Date: Thu, 11 Mar 2010 18:09:09 -0600
Subject: [Rd] Associative array?
In-Reply-To: <85602218-8121-4893-A262-86EC56E75002@r-project.org>
References: <20100311075212.66a6a0e7.misc7@emerose.org>
	<85602218-8121-4893-A262-86EC56E75002@r-project.org>
Message-ID: <20100311180909.76c938cc.misc7@emerose.org>

> lists are generic vectors with names so lookup is O(n). Environments  
> in R are true hash tables for that purpose:

Ahh, thanks for the information!  A function I wrote before indexing
on a data frame was slower than I expected, and now I know why.

> I don't quite understand - characters are (after raw vectors) the
> most expressive data type, so I'm not quite sure why that would be a
> limitation .. You can cast anything (but raw vector with nulls) into
> to a character.

It's no big problem, it's just that if the solution is to convert to
character type, then there are some implementation details to worry
about.  For instance, I assume that as.character(x) is a reversible
1-1 mapping if x is an integer (and not NA or NULL, etc).  But
apparently that isn't exactly true for floats, and it would get more
complicated for other data types.  So that's why I said it would not
be elegant, but that is a very subjective statement.

On a deeper level, it seems counterintuitive to me that indexing in R
is O(n).  Futhermore, associative arrays are a fundamental data type,
so I think it's weird that I can read the R tutorial, the R language
definition, and even the manual page for new.env() and still not have
enough information to build a decent one.  So IMHO things would be
better if R had a built-in easy-to-use general purpose associative
array.

> I don't see a problem thus I'm not surprised it didn't come up
> ;). But maybe I'm just missing your point ...

Nope, this has come up before---I think R and I are just on different
wavelengths.  Various things that I think are a problem with R are
apparently not, and it's fine the way it is.

Anyway, sorry for getting off topic ;-) You posted everything I need to know and I really appreciate your help.


-- 
Ben Escoto


From ripley at stats.ox.ac.uk  Fri Mar 12 08:27:34 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 12 Mar 2010 07:27:34 +0000 (GMT)
Subject: [Rd] log2(quote(1:10)) evaluates the quoted 1:10, log() does not
In-Reply-To: <77EB52C6DD32BA4D87471DCD70C8D70002A0F362@NA-PA-VBE03.na.tibco.com>
References: <77EB52C6DD32BA4D87471DCD70C8D70002A0F362@NA-PA-VBE03.na.tibco.com>
Message-ID: <alpine.LFD.2.00.1003120712290.7726@gannet.stats.ox.ac.uk>

On Wed, 10 Mar 2010, William Dunlap wrote:

> This is very minor, but shouldn't log2(quote(1:10))
> throw an error,the same as log() and other math functions
> do?  It looks like log2 and log10 evaluate a call object
> instead of throwing a non-numeric-argument error.  They
> do object to non-call language objects, like expressions.

Yes, but the reason is complex.  log2 and log10 first look for methods 
for themselves, then for log, and the method dispatch code evaluates 
the argument -- so it gets done twice.  And because of some of the 
peculiarities of the internal S4 dispatch code, it was hard enough to 
get to work at all.

The simplest solution seems to be to make log2() and log10() special 
primitives (as log is): the alternative is to duplicate a version of 
the logb() code in log2() and log10().

>
>  > log2(quote(1:10))
>   [1] 0.000000 1.000000 1.584963 2.000000 2.321928 2.584963
>   [7] 2.807355 3.000000 3.169925 3.321928
>  > log(quote(1:10))
>  Error in log(quote(1:10)) : Non-numeric argument to mathematical
> function
>  > sqrt(quote(1:10))
>  Error in sqrt(quote(1:10)) :
>    Non-numeric argument to mathematical function
>  > quote(1:10) ^ 2
>  Error in quote(1:10)^2 : non-numeric argument to binary operator
>  > 2 ^ quote(1:10)
>  Error in 2^quote(1:10) : non-numeric argument to binary operator
>
> Bill Dunlap
> Spotfire, TIBCO Software
> wdunlap tibco.com
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From savicky at cs.cas.cz  Fri Mar 12 08:28:29 2010
From: savicky at cs.cas.cz (Petr Savicky)
Date: Fri, 12 Mar 2010 08:28:29 +0100
Subject: [Rd] Associative array?
In-Reply-To: <20100311180909.76c938cc.misc7@emerose.org>
References: <20100311075212.66a6a0e7.misc7@emerose.org>
	<85602218-8121-4893-A262-86EC56E75002@r-project.org>
	<20100311180909.76c938cc.misc7@emerose.org>
Message-ID: <20100312072829.GB30541@cs.cas.cz>

On Thu, Mar 11, 2010 at 06:09:09PM -0600, Ben wrote:
[...]
> > I don't quite understand - characters are (after raw vectors) the
> > most expressive data type, so I'm not quite sure why that would be a
> > limitation .. You can cast anything (but raw vector with nulls) into
> > to a character.
> 
> It's no big problem, it's just that if the solution is to convert to
> character type, then there are some implementation details to worry
> about.  For instance, I assume that as.character(x) is a reversible
> 1-1 mapping if x is an integer (and not NA or NULL, etc).  But
> apparently that isn't exactly true for floats, and it would get more
> complicated for other data types.

Let me add a comment on the question of an invertible conversion of double
values to character type. The function as.character() intentionally does
not keep the exact value and performs some rounding. However, conversion
of a double x to character type, which preserves the number exactly, may
be obtained, for example, using
  formatC(x, digits=17, width=-1)

Petr Savicky.


From jthorpe at fhcrc.org  Thu Mar 11 18:14:03 2010
From: jthorpe at fhcrc.org (Thorpe, Jason D)
Date: Thu, 11 Mar 2010 09:14:03 -0800
Subject: [Rd] switching to an previous R engine?
Message-ID: <D780EAC3ADA31F488BCA74ECCD5B717E04C24D64@ISIS.fhcrc.org>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100311/d7073ebc/attachment.pl>

From wdunlap at tibco.com  Fri Mar 12 18:39:29 2010
From: wdunlap at tibco.com (William Dunlap)
Date: Fri, 12 Mar 2010 09:39:29 -0800
Subject: [Rd] problem with parse(text=quote(name))
Message-ID: <77EB52C6DD32BA4D87471DCD70C8D70002A0F81D@NA-PA-VBE03.na.tibco.com>

Calling parse(text=quote(name)) or text=as.name("name")
makes parse() prompt for input from the command line
and then it returns a parse of the initial characters
of 'name' (depending on how many characters were typed
at the prompt).   E.g.,

   > parse(text=quote(myName))
   ?1/3
   expression(myN)
   attr(,"srcfile")
   <text> 
   > parse(text=quote(myName))
   ?1/34
   expression(myNa)
   attr(,"srcfile")
   <text> 
   > parse(text=quote(myName))
   ?1/345
   expression(myNam)
   attr(,"srcfile")
   <text> 

where the ? lines are where parse prompted for input
and I typed a valid R expression. 

I ran into this when starting to convert code that used
a deparse/parse cycle to avoid the cycle by storing the
expressions themselves and I hadn't yet taken out one
of the calls to parse(text=myText).

I see it in 2.10.1 and "R version 2.11.0 Under development
(unstable) (2010-03-07 r51225)."

Bill Dunlap
Spotfire, TIBCO Software
wdunlap tibco.com 


From bolker at ufl.edu  Fri Mar 12 19:29:44 2010
From: bolker at ufl.edu (Ben Bolker)
Date: Fri, 12 Mar 2010 13:29:44 -0500
Subject: [Rd] scale(x, center=FALSE) (PR#14219)
Message-ID: <4B9A8818.1050904@ufl.edu>


  I'm resending this after a week ... I really don't want to nag, but
I also would not like to see this sink below the waves.

  Is there a preferred protocol for requesting comments without nagging
too much?   I would add a comment to 14219 (and was curious to see
whether it was rejected) ... I went to bugzilla, and bug 14219 doesn't
seem to exist any more -- either as open or as closed -- don't know if
it got lost, or thrown away, when the bug system migrated?

   cheers
     Ben Bolker


 [re: behavior of scale() when center=FALSE and scale=TRUE]

>   Again, I agree with you that the behavior is not optimal, but it is
> very hard to make changes in R when the behavior is sub-optimal rather
> than actually wrong (by some definition).  R-core is very conservative
> about changes that break backward compatibility; I would like it if they
> chose to change the function to use standard deviation rather than
> root-mean-square, but I doubt it will happen (and it would break things
> for any users who are relying on the current definition).

[snip]

>  I have attached a patch
> file (and append the information below as well) that changes "standard
> deviation" back to "root mean square" and is much more explicit about
> this issue ... I hope R-core will jump in, critique it, and possibly use
> it in some form to improve (?) the documentation ...
>
>   [PS: I have written that the scaling is equivalent to sd() "if and
> only if" centering was done.  Technically it would also be equivalent if
> the column already had zero mean ...]
>
===================================================================
--- scale.Rd	(revision 51180)
+++ scale.Rd	(working copy)
@@ -41,13 +41,18 @@
   equal to the number of columns of \code{x}, then each column of
   \code{x} is divided by the corresponding value from \code{scale}.  If
   \code{scale} is \code{TRUE} then scaling is done by dividing the
-  (centered) columns of \code{x} by their standard deviations, and if
+  (centered) columns of \code{x} by their root-mean-squares, and if
   \code{scale} is \code{FALSE}, no scaling is done.
-
-  The standard deviation for a column is obtained by computing the
-  square-root of the sum-of-squares of the non-missing values in the
-  column divided by the number of non-missing values minus one (whether
-  or not centering was done).
+
+  The root-mean-square for a (possibly centered)
+  column is defined as
+  \eqn{\sqrt{\sum(x^2)/(n-1)}}{sqrt(sum(x^2)/(n-1))},
+  where \eqn{x} is a vector of the non-missing values
+  and \eqn{n} is the number of non-missing values.
+  If (and only if) centering was done,
+  this is equivalent to \code{sd(x,na.rm=TRUE)}.
+  (To scale by the standard deviations without centering,
+  use \code{scale(x,center=FALSE,scale=apply(x,2,sd,na.rm=TRUE))}.)
 }
\references{
   Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)

 (Bump re: suggested update to scale.Rd .  Is this under
consideration? I'll stop pestering if it's considered
unacceptable, just don't want it to vanish without a trace ...)


-- 
Ben Bolker
Associate professor, Biology Dep't, Univ. of Florida
bolker at ufl.edu / people.biology.ufl.edu/bolker
GPG key: people.biology.ufl.edu/bolker/benbolker-publickey.asc

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 261 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100312/cae8fd56/attachment.bin>

From simon.urbanek at r-project.org  Fri Mar 12 23:44:33 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 12 Mar 2010 17:44:33 -0500
Subject: [Rd] scale(x, center=FALSE) (PR#14219)
In-Reply-To: <4B9A8818.1050904@ufl.edu>
References: <4B9A8818.1050904@ufl.edu>
Message-ID: <C4D7EA00-D1C8-42EB-BBAD-4C98D8E28245@r-project.org>


On Mar 12, 2010, at 1:29 PM, Ben Bolker wrote:

> 
>  I'm resending this after a week ... I really don't want to nag, but
> I also would not like to see this sink below the waves.
> 

It has been closed as feature/FAQ with the note:
"As documented on the help page!"


>  Is there a preferred protocol for requesting comments without nagging too much?   I would add a comment to 14219 (and was curious to see whether it was rejected) ... I went to bugzilla, and bug 14219 doesn't seem to exist any more -- either as open or as closed -- don't know if it got lost, or thrown away, when the bug system migrated?
> 

Hmm.. there was apparently an error when importing the feature&FAQ box. Unfortunately Jitterbug left some duplicate bugs in different categories so the import was not as easy as it should be. I'll double check the IDs to see if any others are missing -- I ran import for 14219 manually now.

Thanks,
Simon


> 
> [re: behavior of scale() when center=FALSE and scale=TRUE]
> 
>>  Again, I agree with you that the behavior is not optimal, but it is
>> very hard to make changes in R when the behavior is sub-optimal rather
>> than actually wrong (by some definition).  R-core is very conservative
>> about changes that break backward compatibility; I would like it if they
>> chose to change the function to use standard deviation rather than
>> root-mean-square, but I doubt it will happen (and it would break things
>> for any users who are relying on the current definition).
> 
> [snip]
> 
>> I have attached a patch
>> file (and append the information below as well) that changes "standard
>> deviation" back to "root mean square" and is much more explicit about
>> this issue ... I hope R-core will jump in, critique it, and possibly use
>> it in some form to improve (?) the documentation ...
>> 
>>  [PS: I have written that the scaling is equivalent to sd() "if and
>> only if" centering was done.  Technically it would also be equivalent if
>> the column already had zero mean ...]
>> 
> ===================================================================
> --- scale.Rd	(revision 51180)
> +++ scale.Rd	(working copy)
> @@ -41,13 +41,18 @@
>   equal to the number of columns of \code{x}, then each column of
>   \code{x} is divided by the corresponding value from \code{scale}.  If
>   \code{scale} is \code{TRUE} then scaling is done by dividing the
> -  (centered) columns of \code{x} by their standard deviations, and if
> +  (centered) columns of \code{x} by their root-mean-squares, and if
>   \code{scale} is \code{FALSE}, no scaling is done.
> -
> -  The standard deviation for a column is obtained by computing the
> -  square-root of the sum-of-squares of the non-missing values in the
> -  column divided by the number of non-missing values minus one (whether
> -  or not centering was done).
> +
> +  The root-mean-square for a (possibly centered)
> +  column is defined as
> +  \eqn{\sqrt{\sum(x^2)/(n-1)}}{sqrt(sum(x^2)/(n-1))},
> +  where \eqn{x} is a vector of the non-missing values
> +  and \eqn{n} is the number of non-missing values.
> +  If (and only if) centering was done,
> +  this is equivalent to \code{sd(x,na.rm=TRUE)}.
> +  (To scale by the standard deviations without centering,
> +  use \code{scale(x,center=FALSE,scale=apply(x,2,sd,na.rm=TRUE))}.)
> }
> \references{
>   Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
> 
> (Bump re: suggested update to scale.Rd .  Is this under
> consideration? I'll stop pestering if it's considered
> unacceptable, just don't want it to vanish without a trace ...)
> 
> 
> -- 
> Ben Bolker
> Associate professor, Biology Dep't, Univ. of Florida
> bolker at ufl.edu / people.biology.ufl.edu/bolker
> GPG key: people.biology.ufl.edu/bolker/benbolker-publickey.asc
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From wdunlap at tibco.com  Fri Mar 12 23:52:05 2010
From: wdunlap at tibco.com (William Dunlap)
Date: Fri, 12 Mar 2010 14:52:05 -0800
Subject: [Rd] symbol name caching bug: attributes get tied to symbol names
Message-ID: <77EB52C6DD32BA4D87471DCD70C8D70002A0F980@NA-PA-VBE03.na.tibco.com>

In R versions 2.10.1 and "2.11.0 Under development
(unstable) (2010-03-07 r51225)" on Windows I get the
following if I type the commands at the start of
the session.  Note how the attribute attached to
the name "Response" by the initial call to structure()
seems to get tied to that name for the remainder of
the session:

   > z <- structure(quote(Response), isResponse=TRUE)
   > parse(text="Response~Predictor")[[1]][[2]]
   Response
   attr(,"isResponse")
   [1] TRUE
   > quote(Response~Predictor)[[2]]
   Response
   attr(,"isResponse")
   [1] TRUE
   > quote(Response)
   Response
   attr(,"isResponse")
   [1] TRUE

The attribute actually does go away after quite a
while, but I haven't figured out the trigger.
rm(z) followed by gc() does not affect it.

If I use an unadorned variable called Response before
making the structure z, then the isResponse attribute
doesn't seem to stick to the name Response.


Bill Dunlap
Spotfire, TIBCO Software
wdunlap tibco.com 


From luke at stat.uiowa.edu  Sat Mar 13 01:23:58 2010
From: luke at stat.uiowa.edu (luke at stat.uiowa.edu)
Date: Fri, 12 Mar 2010 18:23:58 -0600 (CST)
Subject: [Rd] symbol name caching bug: attributes get tied to symbol
 names
In-Reply-To: <77EB52C6DD32BA4D87471DCD70C8D70002A0F980@NA-PA-VBE03.na.tibco.com>
References: <77EB52C6DD32BA4D87471DCD70C8D70002A0F980@NA-PA-VBE03.na.tibco.com>
Message-ID: <alpine.DEB.1.00.1003121820510.7565@luke-inspiron>

Since symbols/names are reference objects this behavior in unavoidable
if we allow attributes to be added to them.  On the other hand, I'm
not sure it makes sense to allow that. Attempting to set an attribute
on NULL signals an error; it would probably make sense to do the same
for any name object.

luke

On Fri, 12 Mar 2010, William Dunlap wrote:

> In R versions 2.10.1 and "2.11.0 Under development
> (unstable) (2010-03-07 r51225)" on Windows I get the
> following if I type the commands at the start of
> the session.  Note how the attribute attached to
> the name "Response" by the initial call to structure()
> seems to get tied to that name for the remainder of
> the session:
>
>   > z <- structure(quote(Response), isResponse=TRUE)
>   > parse(text="Response~Predictor")[[1]][[2]]
>   Response
>   attr(,"isResponse")
>   [1] TRUE
>   > quote(Response~Predictor)[[2]]
>   Response
>   attr(,"isResponse")
>   [1] TRUE
>   > quote(Response)
>   Response
>   attr(,"isResponse")
>   [1] TRUE
>
> The attribute actually does go away after quite a
> while, but I haven't figured out the trigger.
> rm(z) followed by gc() does not affect it.
>
> If I use an unadorned variable called Response before
> making the structure z, then the isResponse attribute
> doesn't seem to stick to the name Response.
>
>
> Bill Dunlap
> Spotfire, TIBCO Software
> wdunlap tibco.com
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Luke Tierney
Chair, Statistics and Actuarial Science
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:      luke at stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu


From wdunlap at tibco.com  Sat Mar 13 01:33:01 2010
From: wdunlap at tibco.com (William Dunlap)
Date: Fri, 12 Mar 2010 16:33:01 -0800
Subject: [Rd] symbol name caching bug: attributes get tied to symbol
	names
In-Reply-To: <alpine.DEB.1.00.1003121820510.7565@luke-inspiron>
References: <77EB52C6DD32BA4D87471DCD70C8D70002A0F980@NA-PA-VBE03.na.tibco.com>
	<alpine.DEB.1.00.1003121820510.7565@luke-inspiron>
Message-ID: <77EB52C6DD32BA4D87471DCD70C8D70002A0F9E0@NA-PA-VBE03.na.tibco.com>

> -----Original Message-----
> From: luke at stat.uiowa.edu [mailto:luke at stat.uiowa.edu] 
> Sent: Friday, March 12, 2010 4:24 PM
> To: William Dunlap
> Cc: r-devel at r-project.org
> Subject: Re: [Rd] symbol name caching bug: attributes get 
> tied to symbol names
> 
> Since symbols/names are reference objects this behavior in unavoidable
> if we allow attributes to be added to them.  On the other hand, I'm
> not sure it makes sense to allow that. Attempting to set an attribute
> on NULL signals an error; it would probably make sense to do the same
> for any name object.
> 

Thanks Luke, for the explanation.

I'm comfortable disallowing attributes on names.

The problem arose for me when analyzing a parse
tree and I was using attributes to label parts of it.
I can stick in a list() layer above the calls, names,
etc., to attach the attributes to.  That can simplify
the syntax also, since things like as.vector() applied
to a call object with attributes won't strip the attributes.

Bill Dunlap
Spotfire, TIBCO Software
wdunlap tibco.com 

> luke
> 
> On Fri, 12 Mar 2010, William Dunlap wrote:
> 
> > In R versions 2.10.1 and "2.11.0 Under development
> > (unstable) (2010-03-07 r51225)" on Windows I get the
> > following if I type the commands at the start of
> > the session.  Note how the attribute attached to
> > the name "Response" by the initial call to structure()
> > seems to get tied to that name for the remainder of
> > the session:
> >
> >   > z <- structure(quote(Response), isResponse=TRUE)
> >   > parse(text="Response~Predictor")[[1]][[2]]
> >   Response
> >   attr(,"isResponse")
> >   [1] TRUE
> >   > quote(Response~Predictor)[[2]]
> >   Response
> >   attr(,"isResponse")
> >   [1] TRUE
> >   > quote(Response)
> >   Response
> >   attr(,"isResponse")
> >   [1] TRUE
> >
> > The attribute actually does go away after quite a
> > while, but I haven't figured out the trigger.
> > rm(z) followed by gc() does not affect it.
> >
> > If I use an unadorned variable called Response before
> > making the structure z, then the isResponse attribute
> > doesn't seem to stick to the name Response.
> >
> >
> > Bill Dunlap
> > Spotfire, TIBCO Software
> > wdunlap tibco.com
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> 
> -- 
> Luke Tierney
> Chair, Statistics and Actuarial Science
> Ralph E. Wareham Professor of Mathematical Sciences
> University of Iowa                  Phone:             319-335-3386
> Department of Statistics and        Fax:               319-335-3017
>     Actuarial Science
> 241 Schaeffer Hall                  email:      luke at stat.uiowa.edu
> Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu
> 


From alistair.gee at gmail.com  Sat Mar 13 01:37:07 2010
From: alistair.gee at gmail.com (Alistair Gee)
Date: Fri, 12 Mar 2010 16:37:07 -0800
Subject: [Rd] list_files() memory corruption?
Message-ID: <e63850351003121637rc13612et6fbd55fd453757f7@mail.gmail.com>

I am using R-2-10 from subversion.

In the implementation of do_listfiles() in platform.c, it appears to
allocate a vector of length count where count is calculated by
count_files(). It then proceeds to call list_files(), passing in the
vector but not the value of count. Yet list_files() doesn't seem to
check the length of the vector that was allocated.

What happens if a new file was added to the file system between the
call to count_files() and list_files()? Doesn't this write past the
length of the allocated vector?

--


From bolker at ufl.edu  Sat Mar 13 02:25:40 2010
From: bolker at ufl.edu (Ben Bolker)
Date: Fri, 12 Mar 2010 20:25:40 -0500
Subject: [Rd] scale(x, center=FALSE) (PR#14219)
In-Reply-To: <C4D7EA00-D1C8-42EB-BBAD-4C98D8E28245@r-project.org>
References: <4B9A8818.1050904@ufl.edu>
	<C4D7EA00-D1C8-42EB-BBAD-4C98D8E28245@r-project.org>
Message-ID: <4B9AE994.9080103@ufl.edu>

  Thanks Simon!

  How irritating/wrong would it be if I opened a new bug to submit my
suggested documentation patch?  As detailed below, I think the
documentation is somewhat confusing (it depends on a highly non-standard
definition of "standard deviation" ...)

  cheers
    Ben Bolker


Simon Urbanek wrote:
> On Mar 12, 2010, at 1:29 PM, Ben Bolker wrote:
> 
>>  I'm resending this after a week ... I really don't want to nag, but
>> I also would not like to see this sink below the waves.
>>
> 
> It has been closed as feature/FAQ with the note:
> "As documented on the help page!"
> 
> 
>>  Is there a preferred protocol for requesting comments without nagging too much?   I would add a comment to 14219 (and was curious to see whether it was rejected) ... I went to bugzilla, and bug 14219 doesn't seem to exist any more -- either as open or as closed -- don't know if it got lost, or thrown away, when the bug system migrated?
>>
> 
> Hmm.. there was apparently an error when importing the feature&FAQ box. Unfortunately Jitterbug left some duplicate bugs in different categories so the import was not as easy as it should be. I'll double check the IDs to see if any others are missing -- I ran import for 14219 manually now.
> 
> Thanks,
> Simon
> 
> 
>> [re: behavior of scale() when center=FALSE and scale=TRUE]
>>
>>>  Again, I agree with you that the behavior is not optimal, but it is
>>> very hard to make changes in R when the behavior is sub-optimal rather
>>> than actually wrong (by some definition).  R-core is very conservative
>>> about changes that break backward compatibility; I would like it if they
>>> chose to change the function to use standard deviation rather than
>>> root-mean-square, but I doubt it will happen (and it would break things
>>> for any users who are relying on the current definition).
>> [snip]
>>
>>> I have attached a patch
>>> file (and append the information below as well) that changes "standard
>>> deviation" back to "root mean square" and is much more explicit about
>>> this issue ... I hope R-core will jump in, critique it, and possibly use
>>> it in some form to improve (?) the documentation ...
>>>
>>>  [PS: I have written that the scaling is equivalent to sd() "if and
>>> only if" centering was done.  Technically it would also be equivalent if
>>> the column already had zero mean ...]
>>>
>> ===================================================================
>> --- scale.Rd	(revision 51180)
>> +++ scale.Rd	(working copy)
>> @@ -41,13 +41,18 @@
>>   equal to the number of columns of \code{x}, then each column of
>>   \code{x} is divided by the corresponding value from \code{scale}.  If
>>   \code{scale} is \code{TRUE} then scaling is done by dividing the
>> -  (centered) columns of \code{x} by their standard deviations, and if
>> +  (centered) columns of \code{x} by their root-mean-squares, and if
>>   \code{scale} is \code{FALSE}, no scaling is done.
>> -
>> -  The standard deviation for a column is obtained by computing the
>> -  square-root of the sum-of-squares of the non-missing values in the
>> -  column divided by the number of non-missing values minus one (whether
>> -  or not centering was done).
>> +
>> +  The root-mean-square for a (possibly centered)
>> +  column is defined as
>> +  \eqn{\sqrt{\sum(x^2)/(n-1)}}{sqrt(sum(x^2)/(n-1))},
>> +  where \eqn{x} is a vector of the non-missing values
>> +  and \eqn{n} is the number of non-missing values.
>> +  If (and only if) centering was done,
>> +  this is equivalent to \code{sd(x,na.rm=TRUE)}.
>> +  (To scale by the standard deviations without centering,
>> +  use \code{scale(x,center=FALSE,scale=apply(x,2,sd,na.rm=TRUE))}.)
>> }
>> \references{
>>   Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
>>
>> (Bump re: suggested update to scale.Rd .  Is this under
>> consideration? I'll stop pestering if it's considered
>> unacceptable, just don't want it to vanish without a trace ...)
>>
>>
>> -- 
>> Ben Bolker
>> Associate professor, Biology Dep't, Univ. of Florida
>> bolker at ufl.edu / people.biology.ufl.edu/bolker
>> GPG key: people.biology.ufl.edu/bolker/benbolker-publickey.asc
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
> 


-- 
Ben Bolker
Associate professor, Biology Dep't, Univ. of Florida
bolker at ufl.edu / people.biology.ufl.edu/bolker
GPG key: people.biology.ufl.edu/bolker/benbolker-publickey.asc

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 261 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100312/08bfe3ef/attachment.bin>

From pdalgd at gmail.com  Sat Mar 13 09:51:36 2010
From: pdalgd at gmail.com (Peter Dalgaard)
Date: Sat, 13 Mar 2010 09:51:36 +0100
Subject: [Rd] scale(x, center=FALSE) (PR#14219)
In-Reply-To: <4B9AE994.9080103@ufl.edu>
References: <4B9A8818.1050904@ufl.edu>	<C4D7EA00-D1C8-42EB-BBAD-4C98D8E28245@r-project.org>
	<4B9AE994.9080103@ufl.edu>
Message-ID: <4B9B5218.30907@gmail.com>

Ben Bolker wrote:
>   Thanks Simon!
> 
>   How irritating/wrong would it be if I opened a new bug to submit my
> suggested documentation patch?  As detailed below, I think the
> documentation is somewhat confusing (it depends on a highly non-standard
> definition of "standard deviation" ...)

Hum, yes. And the 2.9.x version had a strange definition of root mean
square, except in the case where it actually meant the SD...

It is unattractive to change the actual code in case someone is relying
on current behaviour, but if we could, I'd replase (n-1) with n in the
non-centered case, or maybe introduce a "df=if(center)n-1 else n" type
argument. (The original report wanted us to use the SD even in that
case, which is not obviously desirable, and probably the reason that the
whole report got binned.)

Anyways, by all means, just submit a fresh report.

> 
>   cheers
>     Ben Bolker
> 
> 
> Simon Urbanek wrote:
>> On Mar 12, 2010, at 1:29 PM, Ben Bolker wrote:
>>
>>>  I'm resending this after a week ... I really don't want to nag, but
>>> I also would not like to see this sink below the waves.
>>>
>> It has been closed as feature/FAQ with the note:
>> "As documented on the help page!"
>>
>>
>>>  Is there a preferred protocol for requesting comments without nagging too much?   I would add a comment to 14219 (and was curious to see whether it was rejected) ... I went to bugzilla, and bug 14219 doesn't seem to exist any more -- either as open or as closed -- don't know if it got lost, or thrown away, when the bug system migrated?
>>>
>> Hmm.. there was apparently an error when importing the feature&FAQ box. Unfortunately Jitterbug left some duplicate bugs in different categories so the import was not as easy as it should be. I'll double check the IDs to see if any others are missing -- I ran import for 14219 manually now.
>>
>> Thanks,
>> Simon
>>
>>
>>> [re: behavior of scale() when center=FALSE and scale=TRUE]
>>>
>>>>  Again, I agree with you that the behavior is not optimal, but it is
>>>> very hard to make changes in R when the behavior is sub-optimal rather
>>>> than actually wrong (by some definition).  R-core is very conservative
>>>> about changes that break backward compatibility; I would like it if they
>>>> chose to change the function to use standard deviation rather than
>>>> root-mean-square, but I doubt it will happen (and it would break things
>>>> for any users who are relying on the current definition).
>>> [snip]
>>>
>>>> I have attached a patch
>>>> file (and append the information below as well) that changes "standard
>>>> deviation" back to "root mean square" and is much more explicit about
>>>> this issue ... I hope R-core will jump in, critique it, and possibly use
>>>> it in some form to improve (?) the documentation ...
>>>>
>>>>  [PS: I have written that the scaling is equivalent to sd() "if and
>>>> only if" centering was done.  Technically it would also be equivalent if
>>>> the column already had zero mean ...]
>>>>
>>> ===================================================================
>>> --- scale.Rd	(revision 51180)
>>> +++ scale.Rd	(working copy)
>>> @@ -41,13 +41,18 @@
>>>   equal to the number of columns of \code{x}, then each column of
>>>   \code{x} is divided by the corresponding value from \code{scale}.  If
>>>   \code{scale} is \code{TRUE} then scaling is done by dividing the
>>> -  (centered) columns of \code{x} by their standard deviations, and if
>>> +  (centered) columns of \code{x} by their root-mean-squares, and if
>>>   \code{scale} is \code{FALSE}, no scaling is done.
>>> -
>>> -  The standard deviation for a column is obtained by computing the
>>> -  square-root of the sum-of-squares of the non-missing values in the
>>> -  column divided by the number of non-missing values minus one (whether
>>> -  or not centering was done).
>>> +
>>> +  The root-mean-square for a (possibly centered)
>>> +  column is defined as
>>> +  \eqn{\sqrt{\sum(x^2)/(n-1)}}{sqrt(sum(x^2)/(n-1))},
>>> +  where \eqn{x} is a vector of the non-missing values
>>> +  and \eqn{n} is the number of non-missing values.
>>> +  If (and only if) centering was done,
>>> +  this is equivalent to \code{sd(x,na.rm=TRUE)}.
>>> +  (To scale by the standard deviations without centering,
>>> +  use \code{scale(x,center=FALSE,scale=apply(x,2,sd,na.rm=TRUE))}.)
>>> }
>>> \references{
>>>   Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
>>>
>>> (Bump re: suggested update to scale.Rd .  Is this under
>>> consideration? I'll stop pestering if it's considered
>>> unacceptable, just don't want it to vanish without a trace ...)
>>>
>>>
>>> -- 
>>> Ben Bolker
>>> Associate professor, Biology Dep't, Univ. of Florida
>>> bolker at ufl.edu / people.biology.ufl.edu/bolker
>>> GPG key: people.biology.ufl.edu/bolker/benbolker-publickey.asc
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 
> 
> ------------------------------------------------------------------------
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Peter Dalgaard
Center for Statistics, Copenhagen Business School
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From ripley at stats.ox.ac.uk  Sun Mar 14 10:28:29 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 14 Mar 2010 09:28:29 +0000 (GMT)
Subject: [Rd] log2(quote(1:10)) evaluates the quoted 1:10, log() does not
In-Reply-To: <alpine.LFD.2.00.1003120712290.7726@gannet.stats.ox.ac.uk>
References: <77EB52C6DD32BA4D87471DCD70C8D70002A0F362@NA-PA-VBE03.na.tibco.com>
	<alpine.LFD.2.00.1003120712290.7726@gannet.stats.ox.ac.uk>
Message-ID: <alpine.LFD.2.00.1003121038140.30537@gannet.stats.ox.ac.uk>

On Fri, 12 Mar 2010, Prof Brian Ripley wrote:

> On Wed, 10 Mar 2010, William Dunlap wrote:
>
>> This is very minor, but shouldn't log2(quote(1:10))
>> throw an error,the same as log() and other math functions
>> do?  It looks like log2 and log10 evaluate a call object
>> instead of throwing a non-numeric-argument error.  They
>> do object to non-call language objects, like expressions.
>
> Yes, but the reason is complex.  log2 and log10 first look for methods for 
> themselves, then for log, and the method dispatch code evaluates the argument 
> -- so it gets done twice.  And because of some of the peculiarities of the 
> internal S4 dispatch code, it was hard enough to get to work at all.
>
> The simplest solution seems to be to make log2() and log10() special 
> primitives (as log is):

And that does not work, due to S4 dispatch issues in package Rmpfr.

> the alternative is to duplicate a version of the 
> logb() code in log2() and log10().

So I have done that.

>>  > log2(quote(1:10))
>>   [1] 0.000000 1.000000 1.584963 2.000000 2.321928 2.584963
>>   [7] 2.807355 3.000000 3.169925 3.321928
>>  > log(quote(1:10))
>>  Error in log(quote(1:10)) : Non-numeric argument to mathematical
>> function
>>  > sqrt(quote(1:10))
>>  Error in sqrt(quote(1:10)) :
>>    Non-numeric argument to mathematical function
>>  > quote(1:10) ^ 2
>>  Error in quote(1:10)^2 : non-numeric argument to binary operator
>>  > 2 ^ quote(1:10)
>>  Error in 2^quote(1:10) : non-numeric argument to binary operator
>> 
>> Bill Dunlap
>> Spotfire, TIBCO Software
>> wdunlap tibco.com
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>> 
>
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Sun Mar 14 15:27:10 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 14 Mar 2010 14:27:10 +0000 (GMT)
Subject: [Rd] Argument matching for primitives
Message-ID: <alpine.LFD.2.00.1003141008020.28978@gannet.stats.ox.ac.uk>

Recent changes to R-devel has altered the way arguments are matched in 
most primitives to be identical to the argument matching in 
interpreted functions.  So if argument names are supplied they are 
checked, surplus arguments are errors, and it is possible to use 
(perverse) constructions like substitute(e=list(x=1), y ~ x).

There are a few deliberate exceptions:  functions like

call switch .C .Call

need to always match the first argument avoiding partial matching to 
named arguments in '...', and do use positional matching.  And the 
perverse

x <- 1
x <- `length<-`(value=3, x=x)

is now an error: two-argument replacement functions still need 'value' 
supplied as the second argument but the names are checked.

This has caught long-term errors in several packages, e.g. people 
writing proc.time(<expression>) where system.time() was more 
plausible, misusing nargs() (if you want the number of args in ..., 
use length(list(...)), not nargs(...)), using on.exit(par=opar) not 
on.exit(par(opar)), and so on.

Specifically CRAN packages NMF, RobAStBase, TTR, aroma.light, catspec, 
gvlma, mvbutils, orloca, orloca.es, sm and staRt now fail in R-devel 
(and also some that use them).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From hskang at stanford.edu  Mon Mar 15 00:10:45 2010
From: hskang at stanford.edu (Hyunseung Kang)
Date: Sun, 14 Mar 2010 16:10:45 -0700
Subject: [Rd] Segfault Problem c++ R interface (detailed)
Message-ID: <feb07dcc1003141610w624368fdm21f7eb54fbf252e2@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100314/f990ee56/attachment.pl>

From jmc at r-project.org  Mon Mar 15 00:21:13 2010
From: jmc at r-project.org (John Chambers)
Date: Sun, 14 Mar 2010 16:21:13 -0700
Subject: [Rd] symbol name caching bug: attributes get tied to
	symbol	names
In-Reply-To: <77EB52C6DD32BA4D87471DCD70C8D70002A0F9E0@NA-PA-VBE03.na.tibco.com>
References: <77EB52C6DD32BA4D87471DCD70C8D70002A0F980@NA-PA-VBE03.na.tibco.com>	<alpine.DEB.1.00.1003121820510.7565@luke-inspiron>
	<77EB52C6DD32BA4D87471DCD70C8D70002A0F9E0@NA-PA-VBE03.na.tibco.com>
Message-ID: <4B9D6F69.9040208@r-project.org>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100314/4ed26d61/attachment.pl>

From mstokely at google.com  Mon Mar 15 02:02:54 2010
From: mstokely at google.com (Murray Stokely)
Date: Sun, 14 Mar 2010 17:02:54 -0800
Subject: [Rd] [PATCH] R ignores PATH_MAX and fails in long directories
	(PR#14228)
In-Reply-To: <4B992491.2050501@userprimary.net>
References: <20100305231012.3731F2831FF0@mail.pubhealth.ku.dk>
	<59d7961d1003110045n764c5ec3l32cdb16cba6eefca@mail.gmail.com>
	<4B992491.2050501@userprimary.net>
Message-ID: <55a91041003141802t59db422bla0254a8f778377a7@mail.gmail.com>

Indeed thanks to ripley@ for submitting it.  I don't see a note in the
NEWS file and it would be nice to point this out as fixed since others
may have run into this problem.  Could someone submit something like
this as well?

Index: NEWS
===================================================================
--- NEWS        (revision 51276)
+++ NEWS        (working copy)
@@ -577,6 +577,8 @@

     o  read.fwf() works again when 'file' is a connection.

+    o   R now works correctly with filesystem paths longer than 255
+        characters on platforms that support it (PR#14228).


                CHANGES IN R VERSION 2.10.1


On Thu, Mar 11, 2010 at 9:12 AM, Seth Falcon <seth at userprimary.net> wrote:
> On 3/11/10 12:45 AM, Henrik Bengtsson wrote:
>>
>> Thanks for the troubleshooting,
>>
>> I just want to second this patch; it would be great if PATH_MAX could
>> be used everywhere.
>
> The patch, or at least something quite similar, was applied in r51229.
>
> + seth
>
> --
> Seth Falcon | @sfalcon | http://userprimary.net/
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From cgenolin at u-paris10.fr  Mon Mar 15 11:33:17 2010
From: cgenolin at u-paris10.fr (Christophe Genolini)
Date: Mon, 15 Mar 2010 11:33:17 +0100
Subject: [Rd] Strange behavior of assign in a S4 method.
Message-ID: <4B9E0CED.6030405@u-paris10.fr>

Hi the list,
I define a method that want to change an object without assignation 
(foo(x) and not x<-foo(x)) using deparse and assign.
But when the argument of the method does not match *exactly* with the 
definition of the generic function, assign does not work...
Anything wrong?

Christophe

#------ Does not work ------#
setGeneric("foo1",function(x,...){standardGeneric("foo1")})

setMethod(f="foo1",signature="numeric",definition=
    function(x,y=1,...){
        nameX<-deparse(substitute(x))
        x <- x^2
        assign(nameX,x,envir=parent.frame())
    }
)

e <- 3
foo1(e,y=5)
cat(e)


#------ Does work ------#
setGeneric("foo2",function(x,...){standardGeneric("foo2")})

setMethod(f="foo2",signature="numeric",definition=
    function(x,...){
        nameX<-deparse(substitute(x))
        x <- x^2
        assign(nameX,x,envir=parent.frame())
    }
)

e <- 3
foo2(e,y=5)
cat(e)


From ggrothendieck at gmail.com  Mon Mar 15 16:21:19 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 15 Mar 2010 11:21:19 -0400
Subject: [Rd] tcltk and R
Message-ID: <971536df1003150821w58d803e7yf174230fd89b7b02@mail.gmail.com>

I have had some comments on sqldf regarding its dependence on tcltk
such as the second last sentence on this blog post:

http://translate.google.com/translate?hl=en&sl=zh-CN&u=http://www.wentrue.net/blog/%3Fp%3D453&prev=http://blogsearch.google.com/blogsearch%3Fhl%3Den%26ie%3DUTF-8%26q%3Dsqldf%26lr%3D%26sa%3DN%26start%3D10

sqldf does not directly use tcltk but it does use strapply in gsubfn
for its parsing and strapply uses tcl from the tcltk package to it
speed up -- there is also an all R version of strapply but the gsubfn
package as a whole still depends on tcltk whether or not the user uses
tcltk or not.    I was thinking of changing the Depends:tcltk of
gsubfn to Suggests:tcltk and then checking for tcltk availability at
run time so if not available it would use the slower all R version;
however, I was under the impression that all R platforms have a
distribution of R that includes tcltk so in principle this should not
be necessary.

Is that right regarding tcltk availability on various platforms?  What
is the situation here?


From rdpeng at gmail.com  Mon Mar 15 20:11:43 2010
From: rdpeng at gmail.com (Roger Peng)
Date: Mon, 15 Mar 2010 15:11:43 -0400
Subject: [Rd] tcltk and R
In-Reply-To: <971536df1003150821w58d803e7yf174230fd89b7b02@mail.gmail.com>
References: <971536df1003150821w58d803e7yf174230fd89b7b02@mail.gmail.com>
Message-ID: <66f3bd911003151211g758bfcdcpcc8521b0aa20611@mail.gmail.com>

R can be built without tcl/tk and so I think it would still be good to
check at runtime.

-roger

On Mon, Mar 15, 2010 at 11:21 AM, Gabor Grothendieck
<ggrothendieck at gmail.com> wrote:
> I have had some comments on sqldf regarding its dependence on tcltk
> such as the second last sentence on this blog post:
>
> http://translate.google.com/translate?hl=en&sl=zh-CN&u=http://www.wentrue.net/blog/%3Fp%3D453&prev=http://blogsearch.google.com/blogsearch%3Fhl%3Den%26ie%3DUTF-8%26q%3Dsqldf%26lr%3D%26sa%3DN%26start%3D10
>
> sqldf does not directly use tcltk but it does use strapply in gsubfn
> for its parsing and strapply uses tcl from the tcltk package to it
> speed up -- there is also an all R version of strapply but the gsubfn
> package as a whole still depends on tcltk whether or not the user uses
> tcltk or not. ? ?I was thinking of changing the Depends:tcltk of
> gsubfn to Suggests:tcltk and then checking for tcltk availability at
> run time so if not available it would use the slower all R version;
> however, I was under the impression that all R platforms have a
> distribution of R that includes tcltk so in principle this should not
> be necessary.
>
> Is that right regarding tcltk availability on various platforms? ?What
> is the situation here?
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>



-- 
Roger D. Peng  |  http://www.biostat.jhsph.edu/~rpeng/


From rdpeng at gmail.com  Mon Mar 15 20:25:11 2010
From: rdpeng at gmail.com (Roger Peng)
Date: Mon, 15 Mar 2010 15:25:11 -0400
Subject: [Rd] Associative array?
In-Reply-To: <20100311180909.76c938cc.misc7@emerose.org>
References: <20100311075212.66a6a0e7.misc7@emerose.org>
	<85602218-8121-4893-A262-86EC56E75002@r-project.org>
	<20100311180909.76c938cc.misc7@emerose.org>
Message-ID: <66f3bd911003151225x4c862500we47df579117c3aa9@mail.gmail.com>

If I recall correctly, I thought indexing a vector/list with a
character vector uses hashing if the vector is over a certain length
(I can't remember the cutoff). Otherwise, it's a linear operation.

-roger

On Thu, Mar 11, 2010 at 8:09 PM, Ben <misc7 at emerose.org> wrote:
>> lists are generic vectors with names so lookup is O(n). Environments
>> in R are true hash tables for that purpose:
>
> Ahh, thanks for the information! ?A function I wrote before indexing
> on a data frame was slower than I expected, and now I know why.
>
>> I don't quite understand - characters are (after raw vectors) the
>> most expressive data type, so I'm not quite sure why that would be a
>> limitation .. You can cast anything (but raw vector with nulls) into
>> to a character.
>
> It's no big problem, it's just that if the solution is to convert to
> character type, then there are some implementation details to worry
> about. ?For instance, I assume that as.character(x) is a reversible
> 1-1 mapping if x is an integer (and not NA or NULL, etc). ?But
> apparently that isn't exactly true for floats, and it would get more
> complicated for other data types. ?So that's why I said it would not
> be elegant, but that is a very subjective statement.
>
> On a deeper level, it seems counterintuitive to me that indexing in R
> is O(n). ?Futhermore, associative arrays are a fundamental data type,
> so I think it's weird that I can read the R tutorial, the R language
> definition, and even the manual page for new.env() and still not have
> enough information to build a decent one. ?So IMHO things would be
> better if R had a built-in easy-to-use general purpose associative
> array.
>
>> I don't see a problem thus I'm not surprised it didn't come up
>> ;). But maybe I'm just missing your point ...
>
> Nope, this has come up before---I think R and I are just on different
> wavelengths. ?Various things that I think are a problem with R are
> apparently not, and it's fine the way it is.
>
> Anyway, sorry for getting off topic ;-) You posted everything I need to know and I really appreciate your help.
>
>
> --
> Ben Escoto
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>



-- 
Roger D. Peng  |  http://www.biostat.jhsph.edu/~rpeng/


From simon.urbanek at r-project.org  Mon Mar 15 21:11:07 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 15 Mar 2010 16:11:07 -0400
Subject: [Rd] Associative array?
In-Reply-To: <66f3bd911003151225x4c862500we47df579117c3aa9@mail.gmail.com>
References: <20100311075212.66a6a0e7.misc7@emerose.org>
	<85602218-8121-4893-A262-86EC56E75002@r-project.org>
	<20100311180909.76c938cc.misc7@emerose.org>
	<66f3bd911003151225x4c862500we47df579117c3aa9@mail.gmail.com>
Message-ID: <CB6DE26D-FE28-404A-869B-B7A33D1781BC@r-project.org>

Roger,

On Mar 15, 2010, at 15:25 , Roger Peng wrote:

> If I recall correctly, I thought indexing a vector/list with a
> character vector uses hashing if the vector is over a certain length
> (I can't remember the cutoff). Otherwise, it's a linear operation.
>

What I was talking about was lookup of one element in a named generic  
vector of length n so that is linear (~O(n)), because we were  
discussing l[[i]].

But, yes, you're right that if you use a vector for indexing x[y] (a  
slightly different topic but applicable to the data table example)  
then match() is used (=hashing) if either the subscript or names are  
long enough (subscript.c at 493 has the exact formula).

Cheers,
Simon


>
>
> On Thu, Mar 11, 2010 at 8:09 PM, Ben <misc7 at emerose.org> wrote:
>>> lists are generic vectors with names so lookup is O(n). Environments
>>> in R are true hash tables for that purpose:
>>
>> Ahh, thanks for the information!  A function I wrote before indexing
>> on a data frame was slower than I expected, and now I know why.
>>
>>> I don't quite understand - characters are (after raw vectors) the
>>> most expressive data type, so I'm not quite sure why that would be a
>>> limitation .. You can cast anything (but raw vector with nulls) into
>>> to a character.
>>
>> It's no big problem, it's just that if the solution is to convert to
>> character type, then there are some implementation details to worry
>> about.  For instance, I assume that as.character(x) is a reversible
>> 1-1 mapping if x is an integer (and not NA or NULL, etc).  But
>> apparently that isn't exactly true for floats, and it would get more
>> complicated for other data types.  So that's why I said it would not
>> be elegant, but that is a very subjective statement.
>>
>> On a deeper level, it seems counterintuitive to me that indexing in R
>> is O(n).  Futhermore, associative arrays are a fundamental data type,
>> so I think it's weird that I can read the R tutorial, the R language
>> definition, and even the manual page for new.env() and still not have
>> enough information to build a decent one.  So IMHO things would be
>> better if R had a built-in easy-to-use general purpose associative
>> array.
>>
>>> I don't see a problem thus I'm not surprised it didn't come up
>>> ;). But maybe I'm just missing your point ...
>>
>> Nope, this has come up before---I think R and I are just on different
>> wavelengths.  Various things that I think are a problem with R are
>> apparently not, and it's fine the way it is.
>>
>> Anyway, sorry for getting off topic ;-) You posted everything I  
>> need to know and I really appreciate your help.
>>
>>
>> --
>> Ben Escoto
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
>
>
> -- 
> Roger D. Peng  |  http://www.biostat.jhsph.edu/~rpeng/
>
>


From whuber at embl.de  Mon Mar 15 21:21:24 2010
From: whuber at embl.de (Wolfgang Huber)
Date: Mon, 15 Mar 2010 21:21:24 +0100
Subject: [Rd] Strange behavior of assign in a S4 method.
In-Reply-To: <4B9E0CED.6030405@u-paris10.fr>
References: <4B9E0CED.6030405@u-paris10.fr>
Message-ID: <4B9E96C4.90209@embl.de>

Dear Christophe

type

showMethods("foo1", inc=TRUE)
showMethods("foo2", inc=TRUE)

to see the difference between the two functions, and this will explain 
their different behaviour. This feature of S4 has been discussed here 
many times before, see e.g.: 
http://tolstoy.newcastle.edu.au/R/e4/help/08/01/1676.html

Perhaps juggling with the 'n' argument of 'parent.frame' could help in 
hacking something together that 'works', but as far as I can see what 
you want to is an abuse of R's pass by value / functional language 
semantics.

For example, try these and check whether this results in what you intended:

foo2(3)
foo2(e+2)
sapply(1:5, foo2)
ls()

	Best wishes
	Wolfgang


Christophe Genolini scripsit 15/03/10 11:33:
> Hi the list,
> I define a method that want to change an object without assignation 
> (foo(x) and not x<-foo(x)) using deparse and assign.
> But when the argument of the method does not match *exactly* with the 
> definition of the generic function, assign does not work...
> Anything wrong?
> 
> Christophe
> 
> #------ Does not work ------#
> setGeneric("foo1",function(x,...){standardGeneric("foo1")})
> 
> setMethod(f="foo1",signature="numeric",definition=
>    function(x,y=1,...){
>        nameX<-deparse(substitute(x))
>        x <- x^2
>        assign(nameX,x,envir=parent.frame())
>    }
> )
> 
> e <- 3
> foo1(e,y=5)
> cat(e)
> 
> 
> #------ Does work ------#
> setGeneric("foo2",function(x,...){standardGeneric("foo2")})
> 
> setMethod(f="foo2",signature="numeric",definition=
>    function(x,...){
>        nameX<-deparse(substitute(x))
>        x <- x^2
>        assign(nameX,x,envir=parent.frame())
>    }
> )
> 
> e <- 3
> foo2(e,y=5)
> cat(e)
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel



--
Wolfgang Huber
EMBL
http://www.embl.de/research/units/genome_biology/huber/contact


From pd.mes at cbs.dk  Mon Mar 15 17:32:19 2010
From: pd.mes at cbs.dk (Peter Dalgaard)
Date: Mon, 15 Mar 2010 17:32:19 +0100
Subject: [Rd] tcltk and R
In-Reply-To: <971536df1003150821w58d803e7yf174230fd89b7b02@mail.gmail.com>
References: <971536df1003150821w58d803e7yf174230fd89b7b02@mail.gmail.com>
Message-ID: <4B9E6113.2010008@cbs.dk>

Gabor Grothendieck wrote:
> I have had some comments on sqldf regarding its dependence on tcltk
> such as the second last sentence on this blog post:
> 
> http://translate.google.com/translate?hl=en&sl=zh-CN&u=http://www.wentrue.net/blog/%3Fp%3D453&prev=http://blogsearch.google.com/blogsearch%3Fhl%3Den%26ie%3DUTF-8%26q%3Dsqldf%26lr%3D%26sa%3DN%26start%3D10
> 
> sqldf does not directly use tcltk but it does use strapply in gsubfn
> for its parsing and strapply uses tcl from the tcltk package to it
> speed up -- there is also an all R version of strapply but the gsubfn
> package as a whole still depends on tcltk whether or not the user uses
> tcltk or not.    I was thinking of changing the Depends:tcltk of
> gsubfn to Suggests:tcltk and then checking for tcltk availability at
> run time so if not available it would use the slower all R version;
> however, I was under the impression that all R platforms have a
> distribution of R that includes tcltk so in principle this should not
> be necessary.
> 
> Is that right regarding tcltk availability on various platforms?  What
> is the situation here?


Hmm, judging by the Mac situation, I wouldn't count on it. We have tcltk
working on all the major platforms, but we do allow for compilation
without it (e.g. for compute servers), and at least in the Mac case, we
need to use a suboptimal version because of the event loop battle. If
Apple didn't support X11 (well, sort of), we'd be without Tk there.

(We do, byt the way, handle the case where the display is absent, but
there really ought to be a neater way to load Tcl without Tk.)

-- 
Peter Dalgaard
Center for Statistics, Copenhagen Business School
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From kyawkkhtet at gmail.com  Mon Mar 15 18:56:27 2010
From: kyawkkhtet at gmail.com (kyawkkhtet at gmail.com)
Date: Mon, 15 Mar 2010 13:56:27 -0400
Subject: [Rd] Making descriptive analyisis in R
Message-ID: <18513535.01268675787229.JavaMail.root@wombat>

when I try to make a package coping R code such as tab1, summ, titleString, setTitle from epicalc package, the following problems are found. 
* using log directory 'C:/Rpackage/EpiStat.Rcheck'
* using R version 2.10.0 (2009-10-26)
* using session charset: ISO8859-1
* checking for file 'EpiStat/DESCRIPTION' ... OK
* checking extension type ... Package
* this is package 'EpiStatNutshell' version '1.0'
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking for executable files ... OK
* checking whether package 'EpiStatNutshell' can be installed ... OK
* checking package directory ... OK
* checking for portable file names ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking for unstated dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... NOTE
setTitle: no visible binding for '<<-' assignment to '.locale'
summ: no visible binding for global variable '.data'
summ: no visible global function definition for 'date.mdy'
summ: no visible binding for global variable '.ylab.for.summ'
summ: no visible binding for global variable '.No.of.observations'
summ: no visible binding for global variable '.obs'
summ: no visible binding for global variable '.mean'
summ: no visible binding for global variable '.median'
summ: no visible binding for global variable '.sd'
summ: no visible binding for global variable '.min'
summ: no visible binding for global variable '.max'
summ: no visible binding for global variable '.var.name'
tab1: no visible binding for global variable '.frequency'
tab1: no visible binding for global variable '.frequency1'
tab1: no visible binding for global variable '.percent'
tab1: no visible binding for global variable '.cum.percent'
tableGlm: no visible global function definition for 'glm.nb'
tableStack: no visible binding for global variable '.data'
titleString: no visible binding for global variable '.distribution.of'
titleString: no visible binding for global variable '.by'
titleString: no visible binding for global variable '.frequency'
titleString: no visible binding for global variable '.locale'
titleString: no visible binding for '<<-' assignment to '.locale'
titleString: no visible binding for '<<-' assignment to
  '.distribution.of'
titleString: no visible binding for '<<-' assignment to '.by'
titleString: no visible binding for '<<-' assignment to '.frequency'
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking examples ... OK


when I run this package in R console,
> summ(age)
Error in titleString() : object '.locale' not found
> tab1(porp)
Error in titleString() : object '.locale' not found

I found this error. 
How can I solve this problem?  
I would like to make a package only for descripitve study.
Thank a lot


--
This message was sent on behalf of kyawkkhtet at gmail.com at openSubscriber.com
http://www.opensubscriber.com/messages/r-devel at r-project.org/topic.html


From seth at userprimary.net  Mon Mar 15 22:53:58 2010
From: seth at userprimary.net (Seth Falcon)
Date: Mon, 15 Mar 2010 14:53:58 -0700
Subject: [Rd] Segfault Problem c++ R interface (detailed)
In-Reply-To: <feb07dcc1003141610w624368fdm21f7eb54fbf252e2@mail.gmail.com>
References: <feb07dcc1003141610w624368fdm21f7eb54fbf252e2@mail.gmail.com>
Message-ID: <4B9EAC76.9000000@userprimary.net>

Hi,

First thing to observe is that you are calling RSymbReg via .Call, but 
that function does not return SEXP as is required by the .Call interface.

+ seth


From hskang at stanford.edu  Tue Mar 16 00:39:54 2010
From: hskang at stanford.edu (Hyunseung Kang)
Date: Mon, 15 Mar 2010 16:39:54 -0700
Subject: [Rd] Segfault Problem c++ R interface (detailed)
In-Reply-To: <4B9EAC76.9000000@userprimary.net>
References: <feb07dcc1003141610w624368fdm21f7eb54fbf252e2@mail.gmail.com> 
	<4B9EAC76.9000000@userprimary.net>
Message-ID: <feb07dcc1003151639k1ce2f15bq5d79669b0f5c25c3@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100315/a5f25a01/attachment.pl>

From seth at userprimary.net  Tue Mar 16 04:06:58 2010
From: seth at userprimary.net (Seth Falcon)
Date: Mon, 15 Mar 2010 20:06:58 -0700
Subject: [Rd] list_files() memory corruption?
In-Reply-To: <e63850351003121637rc13612et6fbd55fd453757f7@mail.gmail.com>
References: <e63850351003121637rc13612et6fbd55fd453757f7@mail.gmail.com>
Message-ID: <4B9EF5D2.8010107@userprimary.net>

Hi Alistair,

On 3/12/10 4:37 PM, Alistair Gee wrote:
> I am using R-2-10 from subversion.
> 
> In the implementation of do_listfiles() in platform.c, it appears to
> allocate a vector of length count where count is calculated by
> count_files(). It then proceeds to call list_files(), passing in the
> vector but not the value of count. Yet list_files() doesn't seem to
> check the length of the vector that was allocated.
> 
> What happens if a new file was added to the file system between the
> call to count_files() and list_files()? Doesn't this write past the
> length of the allocated vector?

Good catch.  I've added a length check to prevent a problem.

Cheers,

+ seth


From alistair.gee at gmail.com  Tue Mar 16 04:37:35 2010
From: alistair.gee at gmail.com (Alistair Gee)
Date: Mon, 15 Mar 2010 20:37:35 -0700
Subject: [Rd] list_files() memory corruption?
In-Reply-To: <4B9EF5D2.8010107@userprimary.net>
References: <e63850351003121637rc13612et6fbd55fd453757f7@mail.gmail.com>
	<4B9EF5D2.8010107@userprimary.net>
Message-ID: <e63850351003152037k1dbde4c1o2ba9c51ecd02fb4d@mail.gmail.com>

I think I have a fix that avoids the problem by just growing the
vector as necessary as the directory is traversed (and no longer uses
count_lines()).

I don't have access to the code at the moment, but I should be able to
post the patch tomorrow. Is there interest in my patch?

On Mon, Mar 15, 2010 at 8:06 PM, Seth Falcon <seth at userprimary.net> wrote:
> Hi Alistair,
>
> On 3/12/10 4:37 PM, Alistair Gee wrote:
>> I am using R-2-10 from subversion.
>>
>> In the implementation of do_listfiles() in platform.c, it appears to
>> allocate a vector of length count where count is calculated by
>> count_files(). It then proceeds to call list_files(), passing in the
>> vector but not the value of count. Yet list_files() doesn't seem to
>> check the length of the vector that was allocated.
>>
>> What happens if a new file was added to the file system between the
>> call to count_files() and list_files()? Doesn't this write past the
>> length of the allocated vector?
>
> Good catch. ?I've added a length check to prevent a problem.
>
> Cheers,
>
> + seth
>


From seth at userprimary.net  Tue Mar 16 05:13:57 2010
From: seth at userprimary.net (Seth Falcon)
Date: Mon, 15 Mar 2010 21:13:57 -0700
Subject: [Rd] list_files() memory corruption?
In-Reply-To: <e63850351003152037k1dbde4c1o2ba9c51ecd02fb4d@mail.gmail.com>
References: <e63850351003121637rc13612et6fbd55fd453757f7@mail.gmail.com>	
	<4B9EF5D2.8010107@userprimary.net>
	<e63850351003152037k1dbde4c1o2ba9c51ecd02fb4d@mail.gmail.com>
Message-ID: <4B9F0585.409@userprimary.net>

On 3/15/10 8:37 PM, Alistair Gee wrote:
> I think I have a fix that avoids the problem by just growing the
> vector as necessary as the directory is traversed (and no longer uses
> count_lines()).
> 
> I don't have access to the code at the moment, but I should be able to
> post the patch tomorrow. Is there interest in my patch?

I'm curious to know if this is a problem you have encountered while using R.

My initial thought is that there isn't much benefit of making this part
of the code smarter.  If your patch simplifies things, I'd be more
interested.

+ seth


From ripley at stats.ox.ac.uk  Tue Mar 16 08:11:20 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 16 Mar 2010 07:11:20 +0000 (GMT)
Subject: [Rd] Strange behavior of assign in a S4 method.
In-Reply-To: <4B9E0CED.6030405@u-paris10.fr>
References: <4B9E0CED.6030405@u-paris10.fr>
Message-ID: <alpine.OSX.1.00.1003160711080.41250@tystie.local>

Where did you get the idea that 'x' comes from the parent frame? 
There is no guarantee of this, and you are relying on/stumbling over 
implementation details here.  (An extra call is inserted by 
setMethod()  to handle the matching up of argumnets, but that is 
something which may change, and has changed in the history of the 
'methods' package.)

Note that 'x' might be an expression, even foo2(3, y=5).  You need to 
check it is a symbol.

It would seem to me to be much better to use a replacement function 
here (via setReplaceMethod in S4 land) and let the parser do most of 
the basic checking.

Incidentally, at least in modern English, an assignation is (Collins 
English Dictionary)

  	a secret or forbidden arrangement to meet

and it seems rather that you _are_ trying to do something 'secret or 
forbidden'.  (I suspect you mean 'assignment'.)

On Mon, 15 Mar 2010, Christophe Genolini wrote:

> Hi the list,
> I define a method that want to change an object without assignation (foo(x) 
> and not x<-foo(x)) using deparse and assign.
> But when the argument of the method does not match *exactly* with the 
> definition of the generic function, assign does not work...
> Anything wrong?
>
> Christophe
>
> #------ Does not work ------#
> setGeneric("foo1",function(x,...){standardGeneric("foo1")})
>
> setMethod(f="foo1",signature="numeric",definition=
>   function(x,y=1,...){
>       nameX<-deparse(substitute(x))
>       x <- x^2
>       assign(nameX,x,envir=parent.frame())
>   }
> )
>
> e <- 3
> foo1(e,y=5)
> cat(e)
>
>
> #------ Does work ------#
> setGeneric("foo2",function(x,...){standardGeneric("foo2")})
>
> setMethod(f="foo2",signature="numeric",definition=
>   function(x,...){
>       nameX<-deparse(substitute(x))
>       x <- x^2
>       assign(nameX,x,envir=parent.frame())
>   }
> )
>
> e <- 3
> foo2(e,y=5)
> cat(e)
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Tue Mar 16 10:31:13 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 16 Mar 2010 09:31:13 +0000 (GMT)
Subject: [Rd] 2.11.0 timing (was translation for R-2.11)
Message-ID: <alpine.LFD.2.00.1003160923430.28829@gannet.stats.ox.ac.uk>

The enquiry below reminds me that we really ought to be setting a 
schedule for 2.11.0.  With Easter now likely to be during the 
pre-2.11.0 period, we may have (other)availability issues.

I've updated the translation templates this morning, so the advice to 
Detlef was it was OK provided he worked on those versions.  But if 
anyone is planning extensive changes before 2.11.0 we ought to warn 
translators.

Brian

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

---------- Forwarded message ----------
Date: Tue, 16 Mar 2010 09:06:32
From: Detlef Steuer <detlef.steuer at hsu-hamburg.de>
To: Prof Brian Ripley <ripley at stats.ox.ac.uk>
Subject: translation for R-2.11

Brian,

would now be a good time to go over the translations?

Most probably I won't have to much time in the first half of April, so 
I want to work with enough distance to any deadline.

Best regards
Detlef


From cgenolin at u-paris10.fr  Tue Mar 16 14:14:21 2010
From: cgenolin at u-paris10.fr (Christophe Genolini)
Date: Tue, 16 Mar 2010 14:14:21 +0100
Subject: [Rd] Strange behavior of assign in a S4 method.
In-Reply-To: <4B9E96C4.90209@embl.de>
References: <4B9E0CED.6030405@u-paris10.fr> <4B9E96C4.90209@embl.de>
Message-ID: <4B9F842D.6080205@u-paris10.fr>

Dear Wolfgang,

Thanks for the showMethod and the link.

>
> Perhaps juggling with the 'n' argument of 'parent.frame' could help in 
> hacking something together that 'works'
I just change the argument list of foo2 to perfectly match with the 
definition.
> but as far as I can see what you want to is an abuse of R's pass by 
> value / functional language semantics.
>
Yes I kown. When I learnt object programming, one of the basic was that 
some methods was design to change internals value of the fields. It is 
what I try to do here.
> For example, try these and check whether this results in what you 
> intended:
>
> foo2(3)
> foo2(e+2)
> sapply(1:5, foo2)
> ls()
This will not apply, because I my case, the function foo2 is avalable 
only for object of class FooClass and the only possible use will be :

toto <- new("FooClass")
....
foo2(toto)

Best wishes
Christophe

>     Best wishes
>     Wolfgang
>
>
> Christophe Genolini scripsit 15/03/10 11:33:
>> Hi the list,
>> I define a method that want to change an object without assignation 
>> (foo(x) and not x<-foo(x)) using deparse and assign.
>> But when the argument of the method does not match *exactly* with the 
>> definition of the generic function, assign does not work...
>> Anything wrong?
>>
>> Christophe
>>
>> #------ Does not work ------#
>> setGeneric("foo1",function(x,...){standardGeneric("foo1")})
>>
>> setMethod(f="foo1",signature="numeric",definition=
>>    function(x,y=1,...){
>>        nameX<-deparse(substitute(x))
>>        x <- x^2
>>        assign(nameX,x,envir=parent.frame())
>>    }
>> )
>>
>> e <- 3
>> foo1(e,y=5)
>> cat(e)
>>
>>
>> #------ Does work ------#
>> setGeneric("foo2",function(x,...){standardGeneric("foo2")})
>>
>> setMethod(f="foo2",signature="numeric",definition=
>>    function(x,...){
>>        nameX<-deparse(substitute(x))
>>        x <- x^2
>>        assign(nameX,x,envir=parent.frame())
>>    }
>> )
>>
>> e <- 3
>> foo2(e,y=5)
>> cat(e)
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>
>
> -- 
> Wolfgang Huber
> EMBL
> http://www.embl.de/research/units/genome_biology/huber/contact
>
>
>


From wdunlap at tibco.com  Tue Mar 16 17:28:09 2010
From: wdunlap at tibco.com (William Dunlap)
Date: Tue, 16 Mar 2010 09:28:09 -0700
Subject: [Rd] mean(trim=, c(NA,...), na.rm=FALSE) does not return NA
Message-ID: <77EB52C6DD32BA4D87471DCD70C8D70002A0FD42@NA-PA-VBE03.na.tibco.com>

Both of the following should return NA,
but do not in "R version 2.11.0 Under
development (unstable) (2010-03-07 r51225)"
on 32-bit Windows:

  > mean(c(1,10,100,NA), trim=.1)
  Error in sort.int(x, partial = unique(c(lo, hi))) : 
    index 4 outside bounds
  > mean(c(1,10,100,NA), trim=.26)
  [1] 55

With na.rm=TRUE they give the correct results.
(mean() would be so much simpler if we didn't
have to worry about the seldom-used trim=
argument.)

Bill Dunlap
Spotfire, TIBCO Software
wdunlap tibco.com 


From bokov at uthscsa.edu  Tue Mar 16 19:19:38 2010
From: bokov at uthscsa.edu (Alex Bokov)
Date: Tue, 16 Mar 2010 13:19:38 -0500
Subject: [Rd] Problems compiling a simple source package on MacOS X
Message-ID: <4B9FCBBA.4030305@uthscsa.edu>

Hello. I wrote a package (that contains C source) that I've been 
compiling and running on both Linux and Windows for about a year. 
However, that same source package fails to compile on MacOS (10.4.11,  
PowerPC G4, Xcode installed, gcc version 4.0.1, make version 3.80, ld 
version cctools-590.23.2.obj~17).

There is nothing platform-specific in the code-- just numerical 
functions that I wrote in C so they would run faster. It's been a while 
since I hacked Macs... perhaps there is some preliminary step I'm 
overlooking that's so obvious to Mac R developers that nobody even 
bothers to mention it? I would greatly appreciate any suggestions on 
where I should look in order to troubleshoot this problem.

Thank you kindly.

PS: I get the following message when trying to compile either via R CMD 
INSTALL or via the "Packages & Data" menu within the R console:

* installing to library '/Users/barshop_lab/Library/R/2.10/library'
* installing *source* package 'Survomatic' ...
** libs
** arch - i386
gcc -arch i386 -std=gnu99 
-I/Library/Frameworks/R.framework/Resources/include 
-I/Library/Frameworks/R.framework/Resources/include/i386 
 -I/usr/local/include    -fPIC  -g -O2 -c haz.c -o haz.o
gcc -arch i386 -std=gnu99 -dynamiclib -Wl,-headerpad_max_install_names 
-mmacosx-version-min=10.4 -undefined dynamic_lookup -single_module 
-multiply_defined suppress -L/usr/local/lib -o Survomatic.so haz.o 
-F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework 
-Wl,CoreFoundation
ld: /Library/Frameworks/R.framework/../R.framework/R load command 17 
unknown cmd field
/usr/bin/libtool: internal link edit command failed
make: *** [Survomatic.so] Error 1
ERROR: compilation failed for package 'Survomatic'
* removing '/Users/barshop_lab/Library/R/2.10/library/Survomatic'
* restoring previous '/Users/barshop_lab/Library/R/2.10/library/Survomatic'


From simon.urbanek at r-project.org  Tue Mar 16 19:26:26 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Tue, 16 Mar 2010 14:26:26 -0400
Subject: [Rd] Problems compiling a simple source package on MacOS X
In-Reply-To: <4B9FCBBA.4030305@uthscsa.edu>
References: <4B9FCBBA.4030305@uthscsa.edu>
Message-ID: <2B2DFEFA-F2B9-47AA-B814-285EB801B7AB@r-project.org>

Alex,

On Mar 16, 2010, at 14:19 , Alex Bokov wrote:

> Hello. I wrote a package (that contains C source) that I've been  
> compiling and running on both Linux and Windows for about a year.  
> However, that same source package fails to compile on MacOS  
> (10.4.11,  PowerPC G4, Xcode installed, gcc version 4.0.1, make  
> version 3.80, ld version cctools-590.23.2.obj~17).
>
> There is nothing platform-specific in the code-- just numerical  
> functions that I wrote in C so they would run faster. It's been a  
> while since I hacked Macs... perhaps there is some preliminary step  
> I'm overlooking that's so obvious to Mac R developers that nobody  
> even bothers to mention it? I would greatly appreciate any  
> suggestions on where I should look in order to troubleshoot this  
> problem.
>

You don't have the necessary tools -- your compiler+linker is too  
ancient (so is your OS, but that's another story). Please install  
Xcode 2.4 or higher --  see R for Mac FAQ and/or visit
http://R.research.att.com/tools/

In addition, please consider looking at R-SIG-Mac where Mac-related  
discussion takes place and this has been discussed before (stuffing  
the error in google gives exactly the relevant hit on the list...)

Cheers,
Simon


> Thank you kindly.
>
> PS: I get the following message when trying to compile either via R  
> CMD INSTALL or via the "Packages & Data" menu within the R console:
>
> * installing to library '/Users/barshop_lab/Library/R/2.10/library'
> * installing *source* package 'Survomatic' ...
> ** libs
> ** arch - i386
> gcc -arch i386 -std=gnu99 -I/Library/Frameworks/R.framework/ 
> Resources/include -I/Library/Frameworks/R.framework/Resources/ 
> include/i386 -I/usr/local/include    -fPIC  -g -O2 -c haz.c -o haz.o
> gcc -arch i386 -std=gnu99 -dynamiclib -Wl,- 
> headerpad_max_install_names -mmacosx-version-min=10.4 -undefined  
> dynamic_lookup -single_module -multiply_defined suppress -L/usr/ 
> local/lib -o Survomatic.so haz.o -F/Library/Frameworks/ 
> R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
> ld: /Library/Frameworks/R.framework/../R.framework/R load command 17  
> unknown cmd field
> /usr/bin/libtool: internal link edit command failed
> make: *** [Survomatic.so] Error 1
> ERROR: compilation failed for package 'Survomatic'
> * removing '/Users/barshop_lab/Library/R/2.10/library/Survomatic'
> * restoring previous '/Users/barshop_lab/Library/R/2.10/library/ 
> Survomatic'
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From didier.renard at mines-paristech.fr  Tue Mar 16 13:26:09 2010
From: didier.renard at mines-paristech.fr (Renard Didier)
Date: Tue, 16 Mar 2010 13:26:09 +0100
Subject: [Rd] Problem with S3 to S4 transition
Message-ID: <4B9F78E1.6040207@mines-paristech.fr>

Hello to everybody

I am developing a package using R and have the following problem:

I used to work in a mixture of S3 and S4 mechanism environment: as a 
matter of fact, I used to define my classes (say "DB" for illustration) 
using the setClass function (with representation field), and
I was using the S3 implicit mechanism writing the functions: print.DB 
and plot.DB.

Recently, I read some interesting papers on the use of S4 mechanism and 
was convinced that I would have some benefit in turning everything on S4 
formalism.
This is the reason why I simply renamed my previous functions into 
DB.print and DB.plot (by analogy with other functions where the Class 
name is the leading part of the name). My idea was to use the setMethod 
principle to set the DB.print function as the function for the "print" 
method on the "DB" class.
Therefore, in the .First.Lib file of my package, I introduced the 
setMethod line just after the setClass one, as in the following example:

    setClass("DB",
        representation(flag.grid = "logical", ndim = "numeric",
        x0 = "numeric", dx = "numeric", nx = "numeric",
        locators ="character",items = "data.frame"))
    setMethod("show","DB",function(object) DB.print(object))
    setMethod("print",signature(x="DB"),function(x,...) DB.print(x))
    setMethod("plot",signature(x="DB"),function(x,y,...) DB.plot(x))
    setMethod("["  ,signature(x="DB"),db0.getindex)
    setMethod("[<-",signature(x="DB"),db0.setindex)
    setMethod("$"  ,signature(x="DB"),db0.get)
    setMethod("$<-",signature(x="DB"),db0.set)

As one can notice, I use the same mechanism for SHOW, PLOT and PRINT.
Finally I created the package and imagined to use it using library statement

Surprisingly, when I used the library statement, the program tells me:
 > standardGeneric for "print" defined from package "base"
 > standardGeneric for "plot" defined from package "base"
and creates two objects in the .GlobalEnv, namely "plot" and "print" 
with the following contents:

 > print
standardGeneric for "print" defined from package "base"

function (x, ...)
standardGeneric("print")
<environment: 0xa275c70>
Methods may be defined for arguments: x
Use  showMethods("print")  for currently available ones.

Nothing similar for "show" although my use of setMethod is the same.

I see a main difference as "show" belongs to the "methods" library 
whereas the two other belong to the "base" library. Bu t I could not see 
how to avoid a user of my library to have these message and the two 
objects created.

I am allowed to set the method as I did (I think that I read something 
telling me that I could not do it with methods of the "base" library). 
Otherwiser how can I define the function DB.print as the required method 
for printing objects belonging to the "DB" class.

Thank in advance for you help.

-- 
Didier RENARD
Centre de Geosciences / Geostatistique
Ecole des Mines de Paris
35 Rue St Honore
77300 Fontainebleau

Tel: (1) 64 69 47 80
Fax: (1) 64 69 47 05


From bokov at uthscsa.edu  Tue Mar 16 23:11:56 2010
From: bokov at uthscsa.edu (Alex Bokov)
Date: Tue, 16 Mar 2010 17:11:56 -0500
Subject: [Rd] Problems compiling a simple source package on MacOS X
In-Reply-To: <2B2DFEFA-F2B9-47AA-B814-285EB801B7AB@r-project.org>
References: <4B9FCBBA.4030305@uthscsa.edu>
	<2B2DFEFA-F2B9-47AA-B814-285EB801B7AB@r-project.org>
Message-ID: <4BA0022C.8000704@uthscsa.edu>

Simon Urbanek wrote:

> In addition, please consider looking at R-SIG-Mac where Mac-related  
> discussion takes place and this has been discussed before (stuffing  
> the error in google gives exactly the relevant hit on the list...)
>
>   
Thank you, that was helpful. I'll try upgrading to Xcode 2.5. Very sorry 
to have bothered the list with a Google-able problem. I did try Googling 
first, but I was using "/usr/bin/libtool: internal link edit command 
failed" as the search term rather than the ld error above it. When I did 
the latter, I immediately found the post you referred to.

I'll see if this fixes the problem.


From mtmorgan at fhcrc.org  Wed Mar 17 01:26:24 2010
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Tue, 16 Mar 2010 17:26:24 -0700
Subject: [Rd] Problem with S3 to S4 transition
In-Reply-To: <4B9F78E1.6040207@mines-paristech.fr>
References: <4B9F78E1.6040207@mines-paristech.fr>
Message-ID: <4BA021B0.8070808@fhcrc.org>

Hi Renard --

On 03/16/2010 05:26 AM, Renard Didier wrote:
> Hello to everybody
> 
> I am developing a package using R and have the following problem:
> 
> I used to work in a mixture of S3 and S4 mechanism environment: as a
> matter of fact, I used to define my classes (say "DB" for illustration)
> using the setClass function (with representation field), and
> I was using the S3 implicit mechanism writing the functions: print.DB
> and plot.DB.
> 
> Recently, I read some interesting papers on the use of S4 mechanism and
> was convinced that I would have some benefit in turning everything on S4
> formalism.
> This is the reason why I simply renamed my previous functions into
> DB.print and DB.plot (by analogy with other functions where the Class
> name is the leading part of the name). My idea was to use the setMethod
> principle to set the DB.print function as the function for the "print"
> method on the "DB" class.
> Therefore, in the .First.Lib file of my package, I introduced the
> setMethod line just after the setClass one, as in the following example:
> 
>    setClass("DB",
>        representation(flag.grid = "logical", ndim = "numeric",
>        x0 = "numeric", dx = "numeric", nx = "numeric",
>        locators ="character",items = "data.frame"))
>    setMethod("show","DB",function(object) DB.print(object))
>    setMethod("print",signature(x="DB"),function(x,...) DB.print(x))
>    setMethod("plot",signature(x="DB"),function(x,y,...) DB.plot(x))
>    setMethod("["  ,signature(x="DB"),db0.getindex)
>    setMethod("[<-",signature(x="DB"),db0.setindex)
>    setMethod("$"  ,signature(x="DB"),db0.get)
>    setMethod("$<-",signature(x="DB"),db0.set)

'print' is not needed for S4 objects, 'show' does the job.

Normally one does not place setClass() or setMethod() in .First.lib, but
uses them like any other function definition (e.g., in a file
methods-DB.R). It can sometimes be important to use a Collates: field in
the DESCRIPTION file so that classes are defined before methods that
dispatch on them.

> 
> As one can notice, I use the same mechanism for SHOW, PLOT and PRINT.
> Finally I created the package and imagined to use it using library
> statement
> 
> Surprisingly, when I used the library statement, the program tells me:
>> standardGeneric for "print" defined from package "base"
>> standardGeneric for "plot" defined from package "base"
> and creates two objects in the .GlobalEnv, namely "plot" and "print"
> with the following contents:
> 
>> print
> standardGeneric for "print" defined from package "base"
> 
> function (x, ...)
> standardGeneric("print")
> <environment: 0xa275c70>
> Methods may be defined for arguments: x
> Use  showMethods("print")  for currently available ones.
> 
> Nothing similar for "show" although my use of setMethod is the same.
> 
> I see a main difference as "show" belongs to the "methods" library
> whereas the two other belong to the "base" library. Bu t I could not see
> how to avoid a user of my library to have these message and the two
> objects created. 

'show' is already a generic, defined in methods, so a generic does not
need to be created. "plot" is a regular R function, so setMethod("plot",
...) has to create a generic and then associate your method with it.
When setMethod("plot", ...) is defined as suggested above, the new
generic is generated when the package is installed (not loaded, so the
message creating a new generic is only presented at installation) and
placed in the package environment (e.g., ls(name="package:pkgA")) and
not .GlobalEnv. Explicitly calling setGeneric("plot") creates the
generic without the information message.

Consider using a NAMESPACE (and .onLoad() rather than .FirstLib).

Best,

Martin

> I am allowed to set the method as I did (I think that I read something
> telling me that I could not do it with methods of the "base" library).
> Otherwiser how can I define the function DB.print as the required method
> for printing objects belonging to the "DB" class.
> 
> Thank in advance for you help.
> 
> 
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Martin Morgan
Computational Biology / Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N.
PO Box 19024 Seattle, WA 98109

Location: Arnold Building M1 B861
Phone: (206) 667-2793


From alistair.gee at gmail.com  Wed Mar 17 15:16:21 2010
From: alistair.gee at gmail.com (Alistair Gee)
Date: Wed, 17 Mar 2010 07:16:21 -0700
Subject: [Rd] list_files() memory corruption?
In-Reply-To: <4B9F0585.409@userprimary.net>
References: <e63850351003121637rc13612et6fbd55fd453757f7@mail.gmail.com>
	<4B9EF5D2.8010107@userprimary.net>
	<e63850351003152037k1dbde4c1o2ba9c51ecd02fb4d@mail.gmail.com>
	<4B9F0585.409@userprimary.net>
Message-ID: <e63850351003170716h23e60328oce0d6ed7f61f45d7@mail.gmail.com>

On Mon, Mar 15, 2010 at 9:13 PM, Seth Falcon <seth at userprimary.net> wrote:

> I'm curious to know if this is a problem you have encountered while using R.
>
> My initial thought is that there isn't much benefit of making this part
> of the code smarter. ?If your patch simplifies things, I'd be more
> interested.
>
> + seth
>

Yes. I had noticed that R occasionally segfaults (especially when I
run many concurrent R processes), so I used valgrind to log every use
of R. In the valgrind logs, I tracked the problem to list_files().

I attached a patch to platform.c (for trunk). Unfortunately, I am
having trouble building R from the subversion trunk--it is taking a
very long time decompressing/installing the recommended packages--so I
haven't been able to verify the fix yet. But my version of platform.c
does compile, and it does simplify the code b/c count_files() is no
longer needed.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: platform.c.patch
Type: text/x-patch
Size: 4257 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100317/370733d4/attachment.bin>

From hb at stat.berkeley.edu  Wed Mar 17 16:34:00 2010
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Wed, 17 Mar 2010 16:34:00 +0100
Subject: [Rd] Suggestion: Move \alias{.conflicts.OK} to base/man/library.Rd
	instead.
Message-ID: <59d7961d1003170834v685c51a0mae39f138b772d12e@mail.gmail.com>

Currently help.search(".conflicts.OK") gives:

  methods::.conflicts.OK    Additional (Support) Functions for Methods

However, help(".conflicts.OK", package="methods") provides no
information on the term ".conflicts.OK".

Check the R-devel SVN source code, this is only because there is an:

\alias{.conflicts.OK}

in the methods/man/MethodSupport.Rd file.

Is this a leftover from old times?  May I suggest to instead place
that \alias() in base/man/library.Rd, where ".conflicts.OK" is
discussed.  (The other place it is discussed in ?attach).

/Henrik

PS. A better place to document it is probably in 'Writing R
Extensions', which is intended for developers.


From hb at stat.berkeley.edu  Wed Mar 17 17:11:38 2010
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Wed, 17 Mar 2010 17:11:38 +0100
Subject: [Rd] Suggestion: Not having to export .conflicts.OK in name spaces
Message-ID: <59d7961d1003170911o38814b59h3fdb4de42e21b723@mail.gmail.com>

Currently library() and attach() fail to locate an existing
'.conflicts.OK' in a package wit name space, unless it is exported.
Since there should be little interest in exporting '.conflicts.OK'
otherwise, one may argue that those methods should look for
'.conflicts.OK' even if it is not exported.  If so, a patch for
library() is:

>svn diff library.R
Index: library.R
===================================================================
--- library.R   (revision 51296)
+++ library.R   (working copy)
@@ -312,7 +312,7 @@
                     nogenerics <-
                         !.isMethodsDispatchOn() || checkNoGenerics(env, package
)
                     if(warn.conflicts &&
-                       !exists(".conflicts.OK", envir = env, inherits = FALSE))

+                       !exists(".conflicts.OK", envir = ns, inherits = FALSE))
                         checkConflicts(package, pkgname, pkgpath,
                                        nogenerics, ns)
                     runUserHook(package, pkgpath)


In order to be consistent, a patch for attach() should also be
provided, which requires some more changes, but I won't spend time on
that unless the above is a wanted feature.

/Henrik


From seth at userprimary.net  Wed Mar 17 17:42:39 2010
From: seth at userprimary.net (Seth Falcon)
Date: Wed, 17 Mar 2010 09:42:39 -0700
Subject: [Rd] list_files() memory corruption?
In-Reply-To: <e63850351003170716h23e60328oce0d6ed7f61f45d7@mail.gmail.com>
References: <e63850351003121637rc13612et6fbd55fd453757f7@mail.gmail.com>	
	<4B9EF5D2.8010107@userprimary.net>	
	<e63850351003152037k1dbde4c1o2ba9c51ecd02fb4d@mail.gmail.com>	
	<4B9F0585.409@userprimary.net>
	<e63850351003170716h23e60328oce0d6ed7f61f45d7@mail.gmail.com>
Message-ID: <4BA1067F.4030700@userprimary.net>

On 3/17/10 7:16 AM, Alistair Gee wrote:
> Yes. I had noticed that R occasionally segfaults (especially when I
> run many concurrent R processes), so I used valgrind to log every use
> of R. In the valgrind logs, I tracked the problem to list_files().
> 
> I attached a patch to platform.c (for trunk). Unfortunately, I am
> having trouble building R from the subversion trunk--it is taking a
> very long time decompressing/installing the recommended packages--so I
> haven't been able to verify the fix yet. But my version of platform.c
> does compile, and it does simplify the code b/c count_files() is no
> longer needed.

Hmm, I see that you "grow" the vector containing filenames by calling
lengthgets and doubling the length.  I don't see where you cleanup
before returning -- seems likely you will end up returning a vector that
is too long.

And there are some performance characteristics to consider in terms of
both run time and memory profile.  Does making a single pass through the
files make up for the allocations/data copying that result from
lengthgets?  Is it worth possibly requiring twice the memory for the
worst case?

+ seth


From nana.mirza at gmail.com  Wed Mar 17 13:15:21 2010
From: nana.mirza at gmail.com (sara_m)
Date: Wed, 17 Mar 2010 04:15:21 -0800 (PST)
Subject: [Rd] Call R function from Java
In-Reply-To: <1268828121680-911744.post@n4.nabble.com>
References: <20060707125037.77447.qmail@web53104.mail.yahoo.com>
	<1B6A26B0-3CD6-4B65-8A0E-FE780D06B231@r-project.org>
	<f20482fc0607071105h618f15aft980a3b09d2e4c267@mail.gmail.com>
	<1D19ABC5-BD9A-4280-BD16-383DD06B862F@r-project.org>
	<1268828121680-911744.post@n4.nabble.com>
Message-ID: <1268828121679-1596298.post@n4.nabble.com>


Hi,

i would like also to install JRI in Eclipse but it doesnt work.. 

 @way4thesub: can you please tell me how you did that?

thanks
sara
-- 
View this message in context: http://n4.nabble.com/Call-R-function-from-Java-tp911738p1596298.html
Sent from the R devel mailing list archive at Nabble.com.


From alistair.gee at gmail.com  Wed Mar 17 18:59:06 2010
From: alistair.gee at gmail.com (Alistair Gee)
Date: Wed, 17 Mar 2010 10:59:06 -0700
Subject: [Rd] list_files() memory corruption?
In-Reply-To: <4BA1067F.4030700@userprimary.net>
References: <e63850351003121637rc13612et6fbd55fd453757f7@mail.gmail.com>
	<4B9EF5D2.8010107@userprimary.net>
	<e63850351003152037k1dbde4c1o2ba9c51ecd02fb4d@mail.gmail.com>
	<4B9F0585.409@userprimary.net>
	<e63850351003170716h23e60328oce0d6ed7f61f45d7@mail.gmail.com>
	<4BA1067F.4030700@userprimary.net>
Message-ID: <e63850351003171059s180f4745qb88444966b98c189@mail.gmail.com>

On Wed, Mar 17, 2010 at 9:42 AM, Seth Falcon <seth at userprimary.net> wrote:
> On 3/17/10 7:16 AM, Alistair Gee wrote:
>> Yes. I had noticed that R occasionally segfaults (especially when I
>> run many concurrent R processes), so I used valgrind to log every use
>> of R. In the valgrind logs, I tracked the problem to list_files().
>>
>> I attached a patch to platform.c (for trunk). Unfortunately, I am
>> having trouble building R from the subversion trunk--it is taking a
>> very long time decompressing/installing the recommended packages--so I
>> haven't been able to verify the fix yet. But my version of platform.c
>> does compile, and it does simplify the code b/c count_files() is no
>> longer needed.
>
> Hmm, I see that you "grow" the vector containing filenames by calling
> lengthgets and doubling the length. ?I don't see where you cleanup
> before returning -- seems likely you will end up returning a vector that
> is too long.
>
> And there are some performance characteristics to consider in terms of
> both run time and memory profile. ?Does making a single pass through the
> files make up for the allocations/data copying that result from
> lengthgets? ?Is it worth possibly requiring twice the memory for the
> worst case?
>
> + seth
>
>
>
>
>
Sorry, I left out a call to shorten the vector (via final call to
lengthgets()). See new patch.

BTW, I modeled this code after code I found in the RODBC package that
handles rows returned from a database query. I don't know if this is a
typical approach to reallocation. Maybe there is a better way of
extending the vector, though wouldn't most of the memory usage be in
the strings (of the filenames) rather than the STRSXP vector itself?

Anyway, I'm offering this (untested) fix as it handles both
directories that have grown and directories that have shrunk, so that
the length of the vector is correct in both cases.

--
-------------- next part --------------
A non-text attachment was scrubbed...
Name: platform.c.patch
Type: text/x-patch
Size: 4328 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100317/41cea3e7/attachment.bin>

From ross at biostat.ucsf.edu  Thu Mar 18 00:32:41 2010
From: ross at biostat.ucsf.edu (Ross Boylan)
Date: Wed, 17 Mar 2010 16:32:41 -0700
Subject: [Rd] y ~ X -1 , X a matrix
Message-ID: <1268868761.29395.122.camel@corn.betterworld.us>

While browsing some code I discovered a call to lm that used a formula y
~ X - 1, where X was a matrix.

Looking through the documentation of formula, lm, model.matrix and maybe
some others I couldn't find this useage (R 2.10.1).  Is it anything I
can count on in future versions?  Is there documentation I've
overlooked?

For the curious: model.frame on the above equation returns a data.frame
with 2 columns.  The second "column" is the whole X matrix.
model.matrix on that object returns the expected matrix, with the
transition from the odd model.frame to the regular matrix happening in
an .Internal call.

Thanks.
Ross

P.S. I would appreciate cc's, since mail problems are preventing me from
seeing list mail.


From Ted.Harding at manchester.ac.uk  Thu Mar 18 01:57:23 2010
From: Ted.Harding at manchester.ac.uk ( (Ted Harding))
Date: Thu, 18 Mar 2010 00:57:23 -0000 (GMT)
Subject: [Rd] y ~ X -1 , X a matrix
In-Reply-To: <1268868761.29395.122.camel@corn.betterworld.us>
Message-ID: <XFMail.100318005723.Ted.Harding@manchester.ac.uk>

On 17-Mar-10 23:32:41, Ross Boylan wrote:
> While browsing some code I discovered a call to lm that used
> a formula y ~ X - 1, where X was a matrix.
> 
> Looking through the documentation of formula, lm, model.matrix
> and maybe some others I couldn't find this useage (R 2.10.1).
> Is it anything I can count on in future versions?  Is there
> documentation I've overlooked?
> 
> For the curious: model.frame on the above equation returns a
> data.frame with 2 columns.  The second "column" is the whole X
> matrix. model.matrix on that object returns the expected matrix,
> with the transition from the odd model.frame to the regular
> matrix happening in an .Internal call.
> 
> Thanks.
> Ross
> 
> P.S. I would appreciate cc's, since mail problems are preventing
> me from seeing list mail.

Hmmm ... I'm not sure what is the problem with what you describe.
Code:

  set.seed(54321)
  X  <- matrix(rnorm(50),ncol=2)
  Y  <- 1*X[,1] + 2*X[,2] + 0.25*rnorm(25)
  LM <- lm(Y ~ X-1)

  summary(LM)
  # Call:
  # lm(formula = Y ~ X - 1)
  # Residuals:
  #      Min       1Q   Median       3Q      Max 
  # -0.39942 -0.13143 -0.02249  0.11662  0.61661 
  # Coefficients:
  #    Estimate Std. Error t value Pr(>|t|)    
  # X1  0.97707    0.04159   23.49   <2e-16 ***
  # X2  2.09152    0.06714   31.15   <2e-16 ***
  # ---
  # Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1 
  # Residual standard error: 0.2658 on 23 degrees of freedom
  # Multiple R-squared: 0.9863,     Adjusted R-squared: 0.9851 
  # F-statistic: 826.6 on 2 and 23 DF,  p-value: < 2.2e-16 

  model.frame(LM)
  #              Y          X.1          X.2
  # 1   0.04936244 -0.178900750  0.051420078
  # 2  -0.54224173 -0.928044132 -0.027963292
  # [...]
  # 24  1.54196979  0.312332806  0.602009497
  # 25 -0.16928420 -1.285559427  0.394790358

  str(model.frame(LM))
  #  $ Y: num  0.0494 -0.5422 -0.7295 -3.4422 -3.1296 ...
  #  $ X: num [1:25, 1:2] -0.179 -0.928 -0.784 -1.651 -0.408 ...
  # [...]

  model.frame(Y ~ X-1)
  #              Y          X.1          X.2
  # 1   0.04936244 -0.178900750  0.051420078
  # 2  -0.54224173 -0.928044132 -0.027963292
  # [...]
  # 24  1.54196979  0.312332806  0.602009497
  # 25 -0.16928420 -1.285559427  0.394790358
  ## (Identical to above)

  str(model.frame(Y ~ X-1))
  # $ Y: num  0.0494 -0.5422 -0.7295 -3.4422 -3.1296 ...
  # $ X: num [1:25, 1:2] -0.179 -0.928 -0.784 -1.651 -0.408 ...
  # [...]
  ## (Identical to above)

Maybe the clue (admittedly somewhat obtuse( can be found in ?lm:

  lm(formula, data, subset, weights, na.action,
     method = "qr", model = TRUE, x = FALSE, y = FALSE, qr = TRUE,
     singular.ok = TRUE, contrasts = NULL, offset, ...)
  [...]

  data: an optional data frame, list or environment (or object
    coercible by 'as.data.frame' to a data frame) containing the
    variables in the model.  If not found in 'data', the variables
    are taken from 'environment(formula)', typically the
    environment from which ?lm? is called.

So, in the example the variables are taken from X, "coercible
by 'as.data.frame' ... taken from 'environment(formula)'".

Hence (I guess) X is found in the environment and is coerced
into a dataframe with 2 columns, and X.1, X.2 are taken from there.

R Gurus: Please comment! (I'm only guessing by plausibility).
Ted.

--------------------------------------------------------------------
E-Mail: (Ted Harding) <Ted.Harding at manchester.ac.uk>
Fax-to-email: +44 (0)870 094 0861
Date: 18-Mar-10                                       Time: 00:57:20
------------------------------ XFMail ------------------------------


From ross at biostat.ucsf.edu  Thu Mar 18 02:24:25 2010
From: ross at biostat.ucsf.edu (Ross Boylan)
Date: Wed, 17 Mar 2010 18:24:25 -0700
Subject: [Rd] y ~ X -1 , X a matrix
In-Reply-To: <XFMail.100318005723.Ted.Harding@manchester.ac.uk>
References: <XFMail.100318005723.Ted.Harding@manchester.ac.uk>
Message-ID: <1268875465.29395.144.camel@corn.betterworld.us>

On Thu, 2010-03-18 at 00:57 +0000, Ted.Harding at manchester.ac.uk wrote:
> On 17-Mar-10 23:32:41, Ross Boylan wrote:
> > While browsing some code I discovered a call to lm that used
> > a formula y ~ X - 1, where X was a matrix.
> > 
> > Looking through the documentation of formula, lm, model.matrix
> > and maybe some others I couldn't find this useage (R 2.10.1).
> > Is it anything I can count on in future versions?  Is there
> > documentation I've overlooked?
> > 
> > For the curious: model.frame on the above equation returns a
> > data.frame with 2 columns.  The second "column" is the whole X
> > matrix. model.matrix on that object returns the expected matrix,
> > with the transition from the odd model.frame to the regular
> > matrix happening in an .Internal call.
> > 
> > Thanks.
> > Ross
> > 
> > P.S. I would appreciate cc's, since mail problems are preventing
> > me from seeing list mail.
> 
> Hmmm ... I'm not sure what is the problem with what you describe.
There is no problem in the "it doesn't work" sense.
There is a problem that it seems undocumented--though the help you quote
could rather indirectly be taken as a clue--and thus, possibly, subject
to change in later releases.

Ross Boylan


From edd at debian.org  Thu Mar 18 02:41:54 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 17 Mar 2010 20:41:54 -0500
Subject: [Rd] y ~ X -1 , X a matrix
In-Reply-To: <1268868761.29395.122.camel@corn.betterworld.us>
References: <1268868761.29395.122.camel@corn.betterworld.us>
Message-ID: <19361.34018.650847.337178@ron.nulle.part>


On 17 March 2010 at 16:32, Ross Boylan wrote:
| While browsing some code I discovered a call to lm that used a formula y
| ~ X - 1, where X was a matrix.
| 
| Looking through the documentation of formula, lm, model.matrix and maybe
| some others I couldn't find this useage (R 2.10.1).  Is it anything I
| can count on in future versions?  Is there documentation I've
| overlooked?

>From help(formula):

  Details:

       In addition to ?+? and ?:?, a number of other operators are useful
       in model formulae.  [...] The
       ?-? operator removes the specified terms, so that ?(a+b+c)^2 -
       a:b? is identical to ?a + b + c + b:c + a:c?.  It can also used to
       remove the intercept term: ?y ~ x - 1? is a line through the
       origin.  A model with no intercept can be also specified as ?y ~ x
       + 0? or ?y ~ 0 + x?.

What exactly are you questioning? That X is a matrix? That doesn't take
away from the fact that the rest is a formula.

Dirk

-- 
  Registration is open for the 2nd International conference R / Finance 2010
  See http://www.RinFinance.com for details, and see you in Chicago in April!


From pdalgd at gmail.com  Thu Mar 18 08:17:18 2010
From: pdalgd at gmail.com (Peter Dalgaard)
Date: Thu, 18 Mar 2010 08:17:18 +0100
Subject: [Rd] y ~ X -1 , X a matrix
In-Reply-To: <1268875465.29395.144.camel@corn.betterworld.us>
References: <XFMail.100318005723.Ted.Harding@manchester.ac.uk>
	<1268875465.29395.144.camel@corn.betterworld.us>
Message-ID: <4BA1D37E.3060309@gmail.com>

Ross Boylan wrote:
> On Thu, 2010-03-18 at 00:57 +0000, Ted.Harding at manchester.ac.uk wrote:
>> On 17-Mar-10 23:32:41, Ross Boylan wrote:
>>> While browsing some code I discovered a call to lm that used
>>> a formula y ~ X - 1, where X was a matrix.
>>>
>>> Looking through the documentation of formula, lm, model.matrix
>>> and maybe some others I couldn't find this useage (R 2.10.1).
>>> Is it anything I can count on in future versions?  Is there
>>> documentation I've overlooked?
>>>
>>> For the curious: model.frame on the above equation returns a
>>> data.frame with 2 columns.  The second "column" is the whole X
>>> matrix. model.matrix on that object returns the expected matrix,
>>> with the transition from the odd model.frame to the regular
>>> matrix happening in an .Internal call.
>>>
>>> Thanks.
>>> Ross
>>>
>>> P.S. I would appreciate cc's, since mail problems are preventing
>>> me from seeing list mail.
>> Hmmm ... I'm not sure what is the problem with what you describe.
> There is no problem in the "it doesn't work" sense.
> There is a problem that it seems undocumented--though the help you quote
> could rather indirectly be taken as a clue--and thus, possibly, subject
> to change in later releases.

I'm pretty sure that it is per original design that data frames can have
matrix columns, although data.frame() and as.data.frame() are quite
trigger-happy when it comes to converting them to individual columns.
You need things like d <- data.frame(X=I(X)) to prevent it.

As you have seen, matrices can be handy on the RHS of formulas, but
there are at least two cases where they are crucial on the LHS,
multivariate linear models and one version of glm(Y~..., binomial).

Without being able to store matrices as individual components in a data
frame, I don't think you can avoid internally expanding model formula
into (say) Y ~ X1 + X2 - 1, which could get rather unwieldy, so I don't
think the feature will be going away. (Someone with too much time on
his/her hand might want to rationalize the whole data frame concept, but
that should go in the direction of handling all  matrix-like structures
consistently, including date-time objects etc.)

-- 
Peter Dalgaard
Center for Statistics, Copenhagen Business School
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From ripley at stats.ox.ac.uk  Thu Mar 18 11:57:04 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 18 Mar 2010 10:57:04 +0000 (GMT)
Subject: [Rd] mean(trim=, c(NA,...), na.rm=FALSE) does not return NA
In-Reply-To: <77EB52C6DD32BA4D87471DCD70C8D70002A0FD42@NA-PA-VBE03.na.tibco.com>
References: <77EB52C6DD32BA4D87471DCD70C8D70002A0FD42@NA-PA-VBE03.na.tibco.com>
Message-ID: <alpine.LFD.2.00.1003181050330.26151@gannet.stats.ox.ac.uk>

On Tue, 16 Mar 2010, William Dunlap wrote:

> Both of the following should return NA,
> but do not in "R version 2.11.0 Under
> development (unstable) (2010-03-07 r51225)"
> on 32-bit Windows:

Nor in any version of R in the last several years (e.g. 2.1.0)

>  > mean(c(1,10,100,NA), trim=.1)
>  Error in sort.int(x, partial = unique(c(lo, hi))) :
>    index 4 outside bounds
>  > mean(c(1,10,100,NA), trim=.26)
>  [1] 55
>
> With na.rm=TRUE they give the correct results.

But the fix is easy and I've done so in R-devel, thank you.

> (mean() would be so much simpler if we didn't
> have to worry about the seldom-used trim=
> argument.)

Only a little.  I think the drawback is more conceptual: a trimmed 
mean needs order-able data whereas 'mean' in its usual sense does not.

> Bill Dunlap
> Spotfire, TIBCO Software


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From saptarshi.guha at gmail.com  Thu Mar 18 18:39:25 2010
From: saptarshi.guha at gmail.com (Saptarshi Guha)
Date: Thu, 18 Mar 2010 13:39:25 -0400
Subject: [Rd] Size of object in C
Message-ID: <1e7471d51003181039q43a8ae9fu378f74c6f11ab020@mail.gmail.com>

Hello,
Is there a function(in R's C API), given a SEXP, that computes the
size in bytes, i.e. a C equivalent of object.size() ?

Thank you
Saptarshi


From simon.urbanek at r-project.org  Thu Mar 18 20:02:19 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 18 Mar 2010 15:02:19 -0400
Subject: [Rd] Size of object in C
In-Reply-To: <1e7471d51003181039q43a8ae9fu378f74c6f11ab020@mail.gmail.com>
References: <1e7471d51003181039q43a8ae9fu378f74c6f11ab020@mail.gmail.com>
Message-ID: <67BCCE57-C1AD-4F36-8202-E80F301A0313@r-project.org>


On Mar 18, 2010, at 13:39 , Saptarshi Guha wrote:

> Hello,
> Is there a function(in R's C API), given a SEXP, that computes the
> size in bytes, i.e. a C equivalent of object.size() ?
>

No. But eval(LCONS(install("object.size"), list1(x)), R_GlobalEnv);  
isn't that long ... ;)

Cheers,
Simon


From hb at stat.berkeley.edu  Fri Mar 19 14:13:38 2010
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Fri, 19 Mar 2010 14:13:38 +0100
Subject: [Rd] DESCRIPTION: Imports: assertion of version?
Message-ID: <59d7961d1003190613gc05806v845dc1a4a99aaf57@mail.gmail.com>

Hi,

from 'Writing R Extensions' [R version 2.11.0 Under development
(unstable) (2010-03-16 r51290)] one can read:

"The optional `Imports' field lists packages whose name spaces are
imported from but which do not need to be attached. [...] Versions can
be specified, but will not be checked when the namespace is loaded."

Is it a design decision that version specifications are not asserted
for packages under "Imports:", or is it a "lack of implementation"?
If a design decision, under what use cases do you want to specify the
version but not validating it?  Is it simply because there is no
mechanism for tracking the origin/package of the code importing the
other package, and hence we cannot know which DESCRIPTION file to
check against?

Thanks

Henrik


From ripley at stats.ox.ac.uk  Fri Mar 19 15:05:19 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 19 Mar 2010 14:05:19 +0000 (GMT)
Subject: [Rd] problem with parse(text=quote(name))
In-Reply-To: <77EB52C6DD32BA4D87471DCD70C8D70002A0F81D@NA-PA-VBE03.na.tibco.com>
References: <77EB52C6DD32BA4D87471DCD70C8D70002A0F81D@NA-PA-VBE03.na.tibco.com>
Message-ID: <alpine.LFD.2.00.1003191358280.14017@localhost>

This comes from bolting on srcrefs: as.character() was used for 
srcrefs, but *not* for coercion (as documented), and quote(myName) was 
coerced to NULL.

The simplest way out is to use text <- as.character(text) early on.
Maybe coerceVector should handle symbols, though.

On Fri, 12 Mar 2010, William Dunlap wrote:

> Calling parse(text=quote(name)) or text=as.name("name")
> makes parse() prompt for input from the command line
> and then it returns a parse of the initial characters
> of 'name' (depending on how many characters were typed
> at the prompt).   E.g.,
>
>   > parse(text=quote(myName))
>   ?1/3
>   expression(myN)
>   attr(,"srcfile")
>   <text>
>   > parse(text=quote(myName))
>   ?1/34
>   expression(myNa)
>   attr(,"srcfile")
>   <text>
>   > parse(text=quote(myName))
>   ?1/345
>   expression(myNam)
>   attr(,"srcfile")
>   <text>
>
> where the ? lines are where parse prompted for input
> and I typed a valid R expression.
>
> I ran into this when starting to convert code that used
> a deparse/parse cycle to avoid the cycle by storing the
> expressions themselves and I hadn't yet taken out one
> of the calls to parse(text=myText).
>
> I see it in 2.10.1 and "R version 2.11.0 Under development
> (unstable) (2010-03-07 r51225)."
>
> Bill Dunlap
> Spotfire, TIBCO Software
> wdunlap tibco.com
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From dieter.menne at menne-biomed.de  Fri Mar 19 20:26:09 2010
From: dieter.menne at menne-biomed.de (Dieter Menne)
Date: Fri, 19 Mar 2010 20:26:09 +0100
Subject: [Rd] Crash of latticeExtra graph with Adobe Acro
	Pro/Reader/Windows/ during print only (display ok).
Message-ID: <000001cac79a$07514ca0$15f3e5e0$@menne@menne-biomed.de>

I created a report with Sweave today, that displayed perfectly on screen,
but crashed both Adobe Pro 9.3.1 and Adobe Reader 9.0 on Windows 7. Output
with Foxit Reader was flawless.

I was able to reproduce a "minimal" example, which is not really minimal but
the smallest I could get after 2 hours of wasting paper.

Required:

latticeExtra calling both 
      panel.xyplot(...) # both lines are required, no problem with only one
of them
      panel.smoother(...) #

pch = 16 (lower number were no problem)

At least 300 data points with some overlap; I did bracket it exactly, but
200 did not show the problem. I was not able to generate a runif-based
example, therefore a simplified data set from my original report is
included.

Reproduce: Run the example. sessionInfo see below. Open the created pdf with
Adobe Acrobat Pro/Reader. It displays perfectly. 

Print it to any device; I used the virtual Windows XPS printer because after
30 pages I was running out of laser printer toner.

Adobe Displays: Flattening, and hangs after 94%; must be force-restarted
after that.

When using more data points, it hangs after a lower percentage; looks like
"flattening" has to do with processing of data points, and 300 is just above
the limit.

My workaround is to use something else than pch=16, because I cannot force
customers to install Foxit.

The created pdf file can be downloaded from
http://www.menne-biomed.de/uni/crashedadobe.pdf

Dieter Menne



library(latticeExtra)

d = structure(list(y = c(1, 2, 0, 3, 2, 1, 2, 2, 1, 0, 1, 1, 1, 1,
2, 2, 2, 2, 2, 2, 2, 1, 2, 1, 2, 1, 0, 2, 2, 2, 2, 2, 1, 1, 2,
2, 3, 0, 2, 3, 1, 2, 2, 2, 2, 1, 0, 2, 1, 2, 4, 2, 1, 1, 0, 0,
1, 2, 2, 3, 1, 1, 2, 2, 2, 2, 1, 2, 0, 2, 0, 2, 2, 1, 1, 1, 1,
2, 1, 8, 2, 5, 3, 2, 2, 0, 1, 0, 2, 0, 2, 0, 2, 4, 2, 2, 2, 2,
2, 1, 2, 5, 1, 1, 2, 0, 1, 2, 2, 2, 2, 1, 2, 2, 0, 1, 2, 0, 2,
2, 2, 2, 1, 0, 2, 0, 1, 2, 1, 2, 2, 0, 0, 2, 2, 2, 3, 2, 2, 2,
2, 2, 1, 2, 1, 2, 2, 2, 2, 2), x = c(1, 2, 3, 13, 1, 14, 14,
4, 4, 0, 1, 1, 4, 2, 5, 3, 4, 13, 2, 5, 12, 1, 4, 0, 1, 2, 0,
2, 5, 2, 3, 3, 3, 1, 5, 4, 5, 0, 4, 2, 5, 4, 12, 3, 3, 5, 0,
3, 4, 4, 14, 5, 2, 1, 0, 0, 1, 3, 4, 2, 14, 1, 2, 2, 12, 1, 3,
4, 0, 5, 2, 5, 2, 2, 3, 5, 5, 2, 5, 13, 2, 4, 12, 2, 4, 1, 4,
0, 1, 0, 1, 0, 4, 5, 4, 5, 2, 2, 13, 3, 4, 13, 1, 12, 3, 1, 0,
2, 5, 3, 14, 4, 2, 2, 0, 0, 4, 0, 2, 12, 13, 3, 2, 1, 4, 2, 3,
1, 1, 3, 3, 0, 0, 3, 5, 3, 13, 3, 13, 3, 13, 3, 1, 1, 4, 2, 1,
4, 12, 5)), .Names = c("y", "x"),
row.names = c(NA, -150L), class = "data.frame")

pdf("crashedadobe.pdf")
p2 = xyplot(y~x,data=d,
    pch=16, # required, no problem with pch=1,2,8
    panel = function(...) {
      panel.xyplot(...) # both lines are required
      panel.smoother(...) #
    },
  )
print(p2)
dev.off()


#R version 2.10.1 (2009-12-14) 
#i386-pc-mingw32 
#
#locale:
#[1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252   
#[3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C                   
#[5] LC_TIME=German_Germany.1252    
#
#attached base packages:
#[1] stats     graphics  grDevices datasets  utils     methods   base     
#
#loaded via a namespace (and not attached):
#[1] tools_2.10.1
#


From kasperdanielhansen at gmail.com  Fri Mar 19 20:50:50 2010
From: kasperdanielhansen at gmail.com (Kasper Daniel Hansen)
Date: Fri, 19 Mar 2010 15:50:50 -0400
Subject: [Rd] Crash of latticeExtra graph with Adobe Acro
	Pro/Reader/Windows/ during print only (display ok).
In-Reply-To: <-7681016450204010050@unknownmsgid>
References: <-7681016450204010050@unknownmsgid>
Message-ID: <e780c0971003191250v478047a4s564ad995f992102f@mail.gmail.com>

Flattening usually has to do with converting transparent stuff when
you convert from a format that supports it (pdf) to something like
postscript.  At least that is the technical term used in Adobe
Illustrator.

This may be related to the fact the Adobe Illustrator from CS4 creates
bad postscript files from PDF/ai files containing transparency (at
least when they are created using R).  I don't think this is a problem
at all with R, rather it seems to be an illustrator problem (which I
think is a pretty amazing bug).  What I do with postscript files
produced with Illustrator is to post process them using the following
perl script:
  http://tomas.rokicki.com/illbug/fixill.pl
So my workflow is something like
  make pdf from R
  process the pdf using Illustrator, saving it as eps
  ./fixill.pl bad.eps > good.eps

Come to think of it, all files where I have experience this have had
1000+ points on them.

Kasper




On Fri, Mar 19, 2010 at 3:26 PM, Dieter Menne
<dieter.menne at menne-biomed.de> wrote:
> I created a report with Sweave today, that displayed perfectly on screen,
> but crashed both Adobe Pro 9.3.1 and Adobe Reader 9.0 on Windows 7. Output
> with Foxit Reader was flawless.
>
> I was able to reproduce a "minimal" example, which is not really minimal but
> the smallest I could get after 2 hours of wasting paper.
>
> Required:
>
> latticeExtra calling both
> ? ? ?panel.xyplot(...) # both lines are required, no problem with only one
> of them
> ? ? ?panel.smoother(...) #
>
> pch = 16 (lower number were no problem)
>
> At least 300 data points with some overlap; I did bracket it exactly, but
> 200 did not show the problem. I was not able to generate a runif-based
> example, therefore a simplified data set from my original report is
> included.
>
> Reproduce: Run the example. sessionInfo see below. Open the created pdf with
> Adobe Acrobat Pro/Reader. It displays perfectly.
>
> Print it to any device; I used the virtual Windows XPS printer because after
> 30 pages I was running out of laser printer toner.
>
> Adobe Displays: Flattening, and hangs after 94%; must be force-restarted
> after that.
>
> When using more data points, it hangs after a lower percentage; looks like
> "flattening" has to do with processing of data points, and 300 is just above
> the limit.
>
> My workaround is to use something else than pch=16, because I cannot force
> customers to install Foxit.
>
> The created pdf file can be downloaded from
> http://www.menne-biomed.de/uni/crashedadobe.pdf
>
> Dieter Menne
>
>
>
> library(latticeExtra)
>
> d = structure(list(y = c(1, 2, 0, 3, 2, 1, 2, 2, 1, 0, 1, 1, 1, 1,
> 2, 2, 2, 2, 2, 2, 2, 1, 2, 1, 2, 1, 0, 2, 2, 2, 2, 2, 1, 1, 2,
> 2, 3, 0, 2, 3, 1, 2, 2, 2, 2, 1, 0, 2, 1, 2, 4, 2, 1, 1, 0, 0,
> 1, 2, 2, 3, 1, 1, 2, 2, 2, 2, 1, 2, 0, 2, 0, 2, 2, 1, 1, 1, 1,
> 2, 1, 8, 2, 5, 3, 2, 2, 0, 1, 0, 2, 0, 2, 0, 2, 4, 2, 2, 2, 2,
> 2, 1, 2, 5, 1, 1, 2, 0, 1, 2, 2, 2, 2, 1, 2, 2, 0, 1, 2, 0, 2,
> 2, 2, 2, 1, 0, 2, 0, 1, 2, 1, 2, 2, 0, 0, 2, 2, 2, 3, 2, 2, 2,
> 2, 2, 1, 2, 1, 2, 2, 2, 2, 2), x = c(1, 2, 3, 13, 1, 14, 14,
> 4, 4, 0, 1, 1, 4, 2, 5, 3, 4, 13, 2, 5, 12, 1, 4, 0, 1, 2, 0,
> 2, 5, 2, 3, 3, 3, 1, 5, 4, 5, 0, 4, 2, 5, 4, 12, 3, 3, 5, 0,
> 3, 4, 4, 14, 5, 2, 1, 0, 0, 1, 3, 4, 2, 14, 1, 2, 2, 12, 1, 3,
> 4, 0, 5, 2, 5, 2, 2, 3, 5, 5, 2, 5, 13, 2, 4, 12, 2, 4, 1, 4,
> 0, 1, 0, 1, 0, 4, 5, 4, 5, 2, 2, 13, 3, 4, 13, 1, 12, 3, 1, 0,
> 2, 5, 3, 14, 4, 2, 2, 0, 0, 4, 0, 2, 12, 13, 3, 2, 1, 4, 2, 3,
> 1, 1, 3, 3, 0, 0, 3, 5, 3, 13, 3, 13, 3, 13, 3, 1, 1, 4, 2, 1,
> 4, 12, 5)), .Names = c("y", "x"),
> row.names = c(NA, -150L), class = "data.frame")
>
> pdf("crashedadobe.pdf")
> p2 = xyplot(y~x,data=d,
> ? ?pch=16, # required, no problem with pch=1,2,8
> ? ?panel = function(...) {
> ? ? ?panel.xyplot(...) # both lines are required
> ? ? ?panel.smoother(...) #
> ? ?},
> ?)
> print(p2)
> dev.off()
>
>
> #R version 2.10.1 (2009-12-14)
> #i386-pc-mingw32
> #
> #locale:
> #[1] LC_COLLATE=German_Germany.1252 ?LC_CTYPE=German_Germany.1252
> #[3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C
> #[5] LC_TIME=German_Germany.1252
> #
> #attached base packages:
> #[1] stats ? ? graphics ?grDevices datasets ?utils ? ? methods ? base
> #
> #loaded via a namespace (and not attached):
> #[1] tools_2.10.1
> #
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From dieter.menne at menne-biomed.de  Fri Mar 19 21:15:42 2010
From: dieter.menne at menne-biomed.de (Dieter Menne)
Date: Fri, 19 Mar 2010 12:15:42 -0800 (PST)
Subject: [Rd] Crash of latticeExtra graph with Adobe Acro
 Pro/Reader/Windows/ during print only (display ok).
In-Reply-To: <e780c0971003191250v478047a4s564ad995f992102f@mail.gmail.com>
References: <000001cac79a$07514ca0$15f3e5e0$@menne@menne-biomed.de>
	<e780c0971003191250v478047a4s564ad995f992102f@mail.gmail.com>
Message-ID: <1269029742477-1605697.post@n4.nabble.com>



Kasper Daniel Hansen-2 wrote:
> 
> Flattening usually has to do with converting transparent stuff when
> you convert from a format that supports it (pdf) to something like
> postscript.
> 
> perl script:
>   http://tomas.rokicki.com/illbug/fixill.pl
> So my workflow is something like
>   make pdf from R
>   process the pdf using Illustrator, saving it as eps
>   ./fixill.pl bad.eps > good.eps
> 
> 

This would explain why it only turn up when I combine both many points AND a
shaded area from the smoother. 

Arguments against it: 

Why is it only a problem with pch=16 (the dot), and everything else works?
(or, maybe the error turns up with more points?).

Why is it not more frequently observed in ggplot2, where shading is used
more often (the algorithm is from ggplot2 anyway).

And, strangest of all: I by design tried some integer-overlapping
coordinates with rnunif, and could not create a non-working example.

And Foxit can do it? I will try on Linux

Dieter




-- 
View this message in context: http://n4.nabble.com/Crash-of-latticeExtra-graph-with-Adobe-Acro-Pro-Reader-Windows-during-print-only-display-ok-tp1602907p1605697.html
Sent from the R devel mailing list archive at Nabble.com.


From seth at userprimary.net  Fri Mar 19 21:44:42 2010
From: seth at userprimary.net (Seth Falcon)
Date: Fri, 19 Mar 2010 13:44:42 -0700
Subject: [Rd] DESCRIPTION: Imports: assertion of version?
In-Reply-To: <59d7961d1003190613gc05806v845dc1a4a99aaf57@mail.gmail.com>
References: <59d7961d1003190613gc05806v845dc1a4a99aaf57@mail.gmail.com>
Message-ID: <4BA3E23A.7070807@userprimary.net>

On 3/19/10 6:13 AM, Henrik Bengtsson wrote:
> Hi,
>
> from 'Writing R Extensions' [R version 2.11.0 Under development
> (unstable) (2010-03-16 r51290)] one can read:
>
> "The optional `Imports' field lists packages whose name spaces are
> imported from but which do not need to be attached. [...] Versions can
> be specified, but will not be checked when the namespace is loaded."
>
> Is it a design decision that version specifications are not asserted
> for packages under "Imports:", or is it a "lack of implementation"?
> If a design decision, under what use cases do you want to specify the
> version but not validating it?  Is it simply because there is no
> mechanism for tracking the origin/package of the code importing the
> other package, and hence we cannot know which DESCRIPTION file to
> check against?

I'm not aware of any use case in which the current lack of checking is a 
"feature".  I would be interested in a patch (with testing) for this.

+ seth

-- 
Seth Falcon | @sfalcon | http://userprimary.net/


From seth at userprimary.net  Fri Mar 19 21:47:17 2010
From: seth at userprimary.net (Seth Falcon)
Date: Fri, 19 Mar 2010 13:47:17 -0700
Subject: [Rd] Suggestion: Not having to export .conflicts.OK in name
	spaces
In-Reply-To: <59d7961d1003170911o38814b59h3fdb4de42e21b723@mail.gmail.com>
References: <59d7961d1003170911o38814b59h3fdb4de42e21b723@mail.gmail.com>
Message-ID: <4BA3E2D5.5050305@userprimary.net>

On 3/17/10 9:11 AM, Henrik Bengtsson wrote:
> Currently library() and attach() fail to locate an existing
> '.conflicts.OK' in a package wit name space, unless it is exported.
> Since there should be little interest in exporting '.conflicts.OK'
> otherwise, one may argue that those methods should look for
> '.conflicts.OK' even if it is not exported.

I guess I agree that there is no real value in forcing .conflicts.OK to 
be exported.  OTOH, this seems like a dubious feature to begin.  When is 
it a good idea to use it?

+ seth

-- 
Seth Falcon | @sfalcon | http://userprimary.net/


From mtmorgan at fhcrc.org  Fri Mar 19 22:33:13 2010
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Fri, 19 Mar 2010 14:33:13 -0700
Subject: [Rd] DESCRIPTION: Imports: assertion of version?
In-Reply-To: <4BA3E23A.7070807@userprimary.net>
References: <59d7961d1003190613gc05806v845dc1a4a99aaf57@mail.gmail.com>
	<4BA3E23A.7070807@userprimary.net>
Message-ID: <4BA3ED99.8000403@fhcrc.org>

On 03/19/2010 01:44 PM, Seth Falcon wrote:
> On 3/19/10 6:13 AM, Henrik Bengtsson wrote:
>> Hi,
>>
>> from 'Writing R Extensions' [R version 2.11.0 Under development
>> (unstable) (2010-03-16 r51290)] one can read:
>>
>> "The optional `Imports' field lists packages whose name spaces are
>> imported from but which do not need to be attached. [...] Versions can
>> be specified, but will not be checked when the namespace is loaded."
>>
>> Is it a design decision that version specifications are not asserted
>> for packages under "Imports:", or is it a "lack of implementation"?
>> If a design decision, under what use cases do you want to specify the
>> version but not validating it?  Is it simply because there is no
>> mechanism for tracking the origin/package of the code importing the
>> other package, and hence we cannot know which DESCRIPTION file to
>> check against?
> 
> I'm not aware of any use case in which the current lack of checking is a
> "feature".  I would be interested in a patch (with testing) for this.

This thread

http://tolstoy.newcastle.edu.au/R/e5/devel/08/12/0981.html

might provide some context.

Martin

> 
> + seth
> 


-- 
Martin Morgan
Computational Biology / Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N.
PO Box 19024 Seattle, WA 98109

Location: Arnold Building M1 B861
Phone: (206) 667-2793


From ggrothendieck at gmail.com  Sat Mar 20 04:46:02 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 19 Mar 2010 23:46:02 -0400
Subject: [Rd] r cmd check in r 2.11 accessing internet
Message-ID: <971536df1003192046x32f2a806y9c9d4deef1201b89@mail.gmail.com>

While performing an Rcmd check in R 2.11 (2010-03-14 r51276) on
Windows Vista I noticed it was trying to access the internet during
this phase:

* checking Rd cross-references

Is that supposed to happen?


From APeterhansl at GAINCapital.com  Fri Mar 19 18:27:08 2010
From: APeterhansl at GAINCapital.com (Alexander Peterhansl)
Date: Fri, 19 Mar 2010 13:27:08 -0400
Subject: [Rd] strptime():  on Linux system it seems to call system time?
Message-ID: <27112007B97C7B439E9BC5A8ADCFF345024976@EX2.GAINCapital.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100319/7dc177d4/attachment.pl>

From ligges at statistik.tu-dortmund.de  Sat Mar 20 17:45:30 2010
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 20 Mar 2010 17:45:30 +0100
Subject: [Rd] r cmd check in r 2.11 accessing internet
In-Reply-To: <971536df1003192046x32f2a806y9c9d4deef1201b89@mail.gmail.com>
References: <971536df1003192046x32f2a806y9c9d4deef1201b89@mail.gmail.com>
Message-ID: <4BA4FBAA.3020804@statistik.tu-dortmund.de>



On 20.03.2010 04:46, Gabor Grothendieck wrote:
> While performing an Rcmd check in R 2.11 (2010-03-14 r51276) on
> Windows Vista I noticed it was trying to access the internet during
> this phase:
>
> * checking Rd cross-references
>
> Is that supposed to happen?

Well, even make check of R itself accesses the internet since many 
years, hence it would not be a big surprise for me that it happens with 
R CMD check for some packages as well - which unfrtunately is the case 
for many CRAN packages that sometimes fail my checks if the server to 
connect to is offline (or we are).

Which package are you talking about?

Best,
Uwe




> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ggrothendieck at gmail.com  Sat Mar 20 17:54:05 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sat, 20 Mar 2010 12:54:05 -0400
Subject: [Rd] r cmd check in r 2.11 accessing internet
In-Reply-To: <4BA4FBAA.3020804@statistik.tu-dortmund.de>
References: <971536df1003192046x32f2a806y9c9d4deef1201b89@mail.gmail.com> 
	<4BA4FBAA.3020804@statistik.tu-dortmund.de>
Message-ID: <971536df1003200954n598b05bq75b29d71cf23e85e@mail.gmail.com>

I was checking the zoo package.  I think I only noticed it because I
had downloaded a new R 2.11 and the first time a program tries to
access the internet my firewall gives a message.  Actually the
zoo-quickref vignette does download some stock data but this occurred
during checking cross references rather than building the vignettes.
Its possible that it was checking CRAN for a package not in my R 2.11
library -- does it do that?

Thanks.

2010/3/20 Uwe Ligges <ligges at statistik.tu-dortmund.de>:
>
>
> On 20.03.2010 04:46, Gabor Grothendieck wrote:
>>
>> While performing an Rcmd check in R 2.11 (2010-03-14 r51276) on
>> Windows Vista I noticed it was trying to access the internet during
>> this phase:
>>
>> * checking Rd cross-references
>>
>> Is that supposed to happen?
>
> Well, even make check of R itself accesses the internet since many years,
> hence it would not be a big surprise for me that it happens with R CMD check
> for some packages as well - which unfrtunately is the case for many CRAN
> packages that sometimes fail my checks if the server to connect to is
> offline (or we are).
>
> Which package are you talking about?
>
> Best,
> Uwe
>
>
>
>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From pdalgd at gmail.com  Sat Mar 20 18:54:49 2010
From: pdalgd at gmail.com (Peter Dalgaard)
Date: Sat, 20 Mar 2010 18:54:49 +0100
Subject: [Rd] strptime(): on Linux system it seems to call system time?
In-Reply-To: <27112007B97C7B439E9BC5A8ADCFF345024976@EX2.GAINCapital.com>
References: <27112007B97C7B439E9BC5A8ADCFF345024976@EX2.GAINCapital.com>
Message-ID: <4BA50BE9.2030302@gmail.com>

Alexander Peterhansl wrote:
> [I am herewith re-posting this message on R-devel, as it seems to be the
> most appropriate mailing list for this issue.]
> 
>  
> 
> Dear List,
> 
>  
> 
>>From what I understand, strptime() simply converts from one class
> representation to another; i.e., from character to POSIXct/POSIXlt.
> 
>  
> 
> One strange feature of this command running on Linux is that there are
> repeated calls to system time (as was revealed in a trace of system
> calls), which considerably affect performance.  These system calls end
> up taking almost 75% of the execution time, and are completely
> unnecessary.
> 
>  
> 
> Code:
> 
> ptm <- proc.time()
> 
> for (i in 1:100000) strptime("2010-03-10 17:00:00", "%F %H:%M:%S")
> 
> (proc.time() -ptm)
> 
>  
> 
> Output on Windows Box (32-bit R 2.9.1 running on Intel X5472 @ 3.0 GHz):
> 
>    user  system elapsed 
> 
>    1.31    0.02    1.30
> 
>  
> 
> Output on Linux Box (64-bit R 2.10.1 running on Intel Xeon E5520 @
> 2.27GHz):
> 
>    user  system elapsed 
> 
>    3.33    8.941    12.273
> 
>  
> 
> Any help would be appreciated.  Also, if I should turn to a different
> mailing list for this, please let me know.

It seems to be  completely system-dependent. On Fedora 9, I see

   user  system elapsed
  2.890   0.314   3.374

but on openSUSE 10.3 it is

   user  system elapsed
  3.924   6.992  10.917

At any rate, I suspect that this is an issue with the operating system
and its C libraries, not with R as such.


-- 
Peter Dalgaard
Center for Statistics, Copenhagen Business School
Phone: (+45)38153501
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From alistair.gee at gmail.com  Sat Mar 20 21:36:07 2010
From: alistair.gee at gmail.com (Alistair Gee)
Date: Sat, 20 Mar 2010 13:36:07 -0700
Subject: [Rd] list_files() memory corruption?
In-Reply-To: <e63850351003171059s180f4745qb88444966b98c189@mail.gmail.com>
References: <e63850351003121637rc13612et6fbd55fd453757f7@mail.gmail.com>
	<4B9EF5D2.8010107@userprimary.net>
	<e63850351003152037k1dbde4c1o2ba9c51ecd02fb4d@mail.gmail.com>
	<4B9F0585.409@userprimary.net>
	<e63850351003170716h23e60328oce0d6ed7f61f45d7@mail.gmail.com>
	<4BA1067F.4030700@userprimary.net>
	<e63850351003171059s180f4745qb88444966b98c189@mail.gmail.com>
Message-ID: <e63850351003201336l76331245h421db8aeeeafe67d@mail.gmail.com>

On Wed, Mar 17, 2010 at 10:59 AM, Alistair Gee <alistair.gee at gmail.com> wrote:
> On Wed, Mar 17, 2010 at 9:42 AM, Seth Falcon <seth at userprimary.net> wrote:
>>
>> Hmm, I see that you "grow" the vector containing filenames by calling
>> lengthgets and doubling the length. ?I don't see where you cleanup
>> before returning -- seems likely you will end up returning a vector that
>> is too long.
>>
>> And there are some performance characteristics to consider in terms of
>> both run time and memory profile. ?Does making a single pass through the
>> files make up for the allocations/data copying that result from
>> lengthgets? ?Is it worth possibly requiring twice the memory for the
>> worst case?
>>
>> + seth
>>
>>
>>
>>
>>
> Sorry, I left out a call to shorten the vector (via final call to
> lengthgets()). See new patch.
>
> BTW, I modeled this code after code I found in the RODBC package that
> handles rows returned from a database query. I don't know if this is a
> typical approach to reallocation. Maybe there is a better way of
> extending the vector, though wouldn't most of the memory usage be in
> the strings (of the filenames) rather than the STRSXP vector itself?
>
> Anyway, I'm offering this (untested) fix as it handles both
> directories that have grown and directories that have shrunk, so that
> the length of the vector is correct in both cases.
>
> --
>

I fixed my build problems. I also noticed that my patch wasn't
correct, so I have attached a new version.

This fix still grows the vector by doubling it until it is big enough,
but the length is reset to the correct size at the end once it is
known.

This fix differs from the existing fix in subversion in the following scenario:

1.Create file Z in directory with 1 other file named Y
2. Call dir() to retrieve list of files.
3. dir() counts 2 files.
4. While dir() is executing, some other process creates file X in the directory.
5. dir() retrieves the list of files, stopping after 2 files. But by
chance, it retrieves files X and Y (but not Z).
6. dir() returns files X and Y, which could be misinterpreted to mean
that file Z does not exist.

In contrast, with the attached fix, dir() would return all 3 files.

Also, the existing fix in subversion doesn't seem to handle the case
where readdir() returns fewer files than was originally counted as it
doesn't decrease the length of the vector.

From seth at userprimary.net  Sat Mar 20 22:03:18 2010
From: seth at userprimary.net (Seth Falcon)
Date: Sat, 20 Mar 2010 14:03:18 -0700
Subject: [Rd] list_files() memory corruption?
In-Reply-To: <e63850351003201336l76331245h421db8aeeeafe67d@mail.gmail.com>
References: <e63850351003121637rc13612et6fbd55fd453757f7@mail.gmail.com>	
	<4B9EF5D2.8010107@userprimary.net>	
	<e63850351003152037k1dbde4c1o2ba9c51ecd02fb4d@mail.gmail.com>	
	<4B9F0585.409@userprimary.net>	
	<e63850351003170716h23e60328oce0d6ed7f61f45d7@mail.gmail.com>	
	<4BA1067F.4030700@userprimary.net>	
	<e63850351003171059s180f4745qb88444966b98c189@mail.gmail.com>
	<e63850351003201336l76331245h421db8aeeeafe67d@mail.gmail.com>
Message-ID: <4BA53816.5050108@userprimary.net>

On 3/20/10 1:36 PM, Alistair Gee wrote:
> I fixed my build problems. I also noticed that my patch wasn't
> correct, so I have attached a new version.
> 
> This fix still grows the vector by doubling it until it is big enough,
> but the length is reset to the correct size at the end once it is
> known.
> 
> This fix differs from the existing fix in subversion in the following scenario:
> 
> 1.Create file Z in directory with 1 other file named Y
> 2. Call dir() to retrieve list of files.
> 3. dir() counts 2 files.
> 4. While dir() is executing, some other process creates file X in the directory.
> 5. dir() retrieves the list of files, stopping after 2 files. But by
> chance, it retrieves files X and Y (but not Z).
> 6. dir() returns files X and Y, which could be misinterpreted to mean
> that file Z does not exist.
> 
> In contrast, with the attached fix, dir() would return all 3 files.

I think the scenario you describe could happen with either version.
Once you've read the files in a directory, all bets are off.  Anything
could happen between the time you readdir() and return results back to
the user.  I agree, though, that avoiding two calls to readdir narrows
the window.

> Also, the existing fix in subversion doesn't seem to handle the case
> where readdir() returns fewer files than was originally counted as it
> doesn't decrease the length of the vector.

Yes, that's a limitation of the current fix.

Have you run 'make check-devel' with your patch applied?  Have you run
any simple tests for using dir() or list.files() with recursive=TRUE on
a reasonably large directory and compared times and memory use reported
by gc()?

It is often the case that writing the patch is the easy/quick part and
making sure that one hasn't introduced new infelicities or unintended
behavior is the hard part.

I will try to take another look at your latest patch.

+ seth


From maechler at stat.math.ethz.ch  Mon Mar 22 11:57:59 2010
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 22 Mar 2010 11:57:59 +0100
Subject: [Rd] Suggestion: Not having to export .conflicts.OK in
	name	spaces
In-Reply-To: <4BA3E2D5.5050305@userprimary.net>
References: <59d7961d1003170911o38814b59h3fdb4de42e21b723@mail.gmail.com>
	<4BA3E2D5.5050305@userprimary.net>
Message-ID: <19367.19767.308713.426235@lynne.math.ethz.ch>

>>>>> "SF" == Seth Falcon <seth at userprimary.net>
>>>>>     on Fri, 19 Mar 2010 13:47:17 -0700 writes:

    SF> On 3/17/10 9:11 AM, Henrik Bengtsson wrote:
    >> Currently library() and attach() fail to locate an
    >> existing '.conflicts.OK' in a package wit name space,
    >> unless it is exported.  Since there should be little
    >> interest in exporting '.conflicts.OK' otherwise, one may
    >> argue that those methods should look for '.conflicts.OK'
    >> even if it is not exported.

    SF> I guess I agree that there is no real value in forcing
    SF> .conflicts.OK to be exported.  
so do I.

    SF> OTOH, this seems like a dubious feature to begin.  When
    SF> is it a good idea to use it?

in cases, the package author thinks (s)he knows what (s)he is
doing;
e.g. in the case of Matrix, I could argue that I know about the
current conflicts, and I would *not* want the users of my
package be intimidated by warnings about maskings...

Martin

    SF> + seth

    SF> -- Seth Falcon | @sfalcon | http://userprimary.net/

    SF> ______________________________________________
    SF> R-devel at r-project.org mailing list
    SF> https://stat.ethz.ch/mailman/listinfo/r-devel


From didier.renard at mines-paristech.fr  Mon Mar 22 13:31:02 2010
From: didier.renard at mines-paristech.fr (Renard Didier)
Date: Mon, 22 Mar 2010 13:31:02 +0100
Subject: [Rd] Some more help on S4 mechanism
Message-ID: <4BA76306.8010106@mines-paristech.fr>

Hello to the list

Some days ago, I placed a question on this maling-list and received an 
answer from Martin
that I tried to follow. Unfortunately, I am still puzzled by the next step.
I spent the whole Week-end in gathering information from the net.
Some of them are almost contridtcory and I lack a good document to help me.
So my first question would beL Is there a convenient document which tells
a standard user, who laready developped a package with S3, on how to migrate
to the S4 mechanism.

Secondly, this is my problem:
According to Martin, now I use a NAMESPACE (as follows):

import (methods)
exportPattern("^[^0]*$")
exportMethods(
        "[","[<-","$","$<-",
        "plot","print"
)
exportClasses(
        "anam","db","model","rule","vardir","vario","tokens","thresh"
)
useDynLib("RGeoS")
importFrom(graphics,plot)

More over, in the R directory, I have a zzz.lib with the following 
contents (.onLoad) :

".onLoad" <-
function(...)
{

        # Define the Classes #
        All0.Classes()

        # Define the environment variables #
        environ.load()
}

The file All0.Classes (which will not be exported ... see exportPattern) 
contains
all the class definitions (setClass functions)

Finally, I have some other functions, such as db.plot, which contain the 
following statement
(at the end of the file):

setMethod("plot", signature(x="db"), function(x,y,...) db.plot(x,...))

My questions:
- Should the setMethods be regrouped in a single file (as I read from 
the net).
- What are the differences between "R CMD check" and "R CMD INSTALL" as 
far as the steps are involved.

As a matter of fact:
- R CMD check finds that everything is OK
- R CMD INSTALL gives me a set of warnings of the following type:

Warning in matchSignature(signature, fdef, where) :
  in the method signature for function "[<-" no definition for class: "db"
I did not use the Collate option (that Martin suggested) as I am not 
sure of its syntax and where I should add these statements.

The package works fine anyhow but I would like to correct these warnings.

By the way, as I belong to an institute where we use Fedora Core 8, I am 
stuck with R 2.8.0.

An ultimate problem: I develop two packages P1 and P2 where P2 requires P1.
So I used the same architecture for both with NAMESPACE and .onLoad 
functions (in the zzz.lib files).

For P2, I mention that it depends upon P1 in the DESCRIPTION file. This 
information seems redundant with the NAMESPACE where I can add 
"import(P1)". Finally when, as a user, I load both by library() (first 
P1 then P2), I receive a message about function .onLoad being loaded twice.

How can I avoid this.

As you can see, I encountered several problems when converting my S3 
into S4. I would appreciate if someone could give me a complete 
information and a godd reference.

Thanks in advance.

-- 
Didier RENARD
Centre de Geosciences / Geostatistique
Ecole des Mines de Paris
35 Rue St Honore
77300 Fontainebleau

Tel: (1) 64 69 47 80
Fax: (1) 64 69 47 05


From ko at research.att.com  Mon Mar 22 16:53:32 2010
From: ko at research.att.com (Kostas Oikonomou)
Date: Mon, 22 Mar 2010 11:53:32 -0400
Subject: [Rd] some fixes for R 2.01.1 on OpenSolaris using Sun Studio
	compilers
Message-ID: <4BA7927C.1010705@research.att.com>

Hello,

I recently built a 64-bit R 2.10.1 on OpenSolaris using the 
Sun Studio 12.1 compilers.   I would like to contribute the 
following notes, to update the OpenSolaris installation 
instructions.

================================================

0. GNU libiconv and GNU gettext are assumed to be in /opt/lib.

     GNU libiconv is easy to build from source.  After 
building it, configure gettext like this:

     configure --prefix=/opt/lib --with-included-gettext 
CC=cc CFLAGS=-m64   LDFLAGS=-lsec
    make
    pfexec make install

1. export PATH=/opt/lib/bin:$PATH

2. Edit R's configure in *three* places to add the 2nd 
${CFLAGS} below:

if ${CC} ${CFLAGS} -c conftest.c 1>&5 2>&5; then
   ## <NOTE>
   ## This should really use MAIN_LD, and hence come after 
this is
   ## determined (and necessary additions to MAIN_LDFLAGS 
were made).
   ## But it seems that we currently can always use the C 
compiler.
   ## Also, to be defensive there should be a similar test 
with SHLIB_LD
   ## and SHLIB_LDFLAGS (and note that on HPUX with native 
cc we have to
   ## use ld for SHLIB_LD) ...
   if ${CC} ${CFLAGS} ${LDFLAGS} ${MAIN_LDFLAGS} -o 
conftest${ac_exeext} \
        conftest.${ac_objext} conftestf.${ac_objext} ${FLIBS} \
        ${LIBM} 1>&5 2>&5;
   ## </NOTE>


4. configure --prefix=/opt/R/2.10.1 --disable-nls 
--enable-R-shlib
--with-libintl-prefix=/opt/lib
CC=cc CFLAGS='-O -m64 -xarch=native' 
CPPFLAGS=-I/opt/lib/include
LDFLAGS='-m64 -L/opt/lib/lib -R/opt/lib/lib'
LIBS=-liconv CXX=CC CXXFLAGS='-O -m64 -xarch=native'
F77=f95 FFLAGS='-O -m64 -xarch=native'
R_BROWSER=opera R_PDFVIEWER=evince


5. The results of running the tests:

    cd tests.
    make test-Examples  Ok
    make test-Specific  Ok
    make test-Reg
    	running tests of plotting Latin-1
	expect failure or some differences if not in a Latin or 
UTF-8 locale
	running code in 'reg-plot-latin1.R' ... FAILED
    make test-Demo      Ok
    make test-Random    Ok
    make test-Internet  Ok

=======================================================


Regards,

				Kostas Oikonomou


From seth at userprimary.net  Mon Mar 22 17:26:50 2010
From: seth at userprimary.net (Seth Falcon)
Date: Mon, 22 Mar 2010 09:26:50 -0700
Subject: [Rd] list_files() memory corruption?
In-Reply-To: <4BA53816.5050108@userprimary.net>
References: <e63850351003121637rc13612et6fbd55fd453757f7@mail.gmail.com>	
	<4B9EF5D2.8010107@userprimary.net>	
	<e63850351003152037k1dbde4c1o2ba9c51ecd02fb4d@mail.gmail.com>	
	<4B9F0585.409@userprimary.net>	
	<e63850351003170716h23e60328oce0d6ed7f61f45d7@mail.gmail.com>	
	<4BA1067F.4030700@userprimary.net>	
	<e63850351003171059s180f4745qb88444966b98c189@mail.gmail.com>
	<e63850351003201336l76331245h421db8aeeeafe67d@mail.gmail.com>
	<4BA53816.5050108@userprimary.net>
Message-ID: <4BA79A4A.8060104@userprimary.net>

On 3/20/10 2:03 PM, Seth Falcon wrote:
> On 3/20/10 1:36 PM, Alistair Gee wrote:
>> I fixed my build problems. I also noticed that my patch wasn't
>> correct, so I have attached a new version.
>>
>> This fix still grows the vector by doubling it until it is big enough,
>> but the length is reset to the correct size at the end once it is
>> known.
>>
>> This fix differs from the existing fix in subversion in the following scenario:
>>
>> 1.Create file Z in directory with 1 other file named Y
>> 2. Call dir() to retrieve list of files.
>> 3. dir() counts 2 files.
>> 4. While dir() is executing, some other process creates file X in the directory.
>> 5. dir() retrieves the list of files, stopping after 2 files. But by
>> chance, it retrieves files X and Y (but not Z).
>> 6. dir() returns files X and Y, which could be misinterpreted to mean
>> that file Z does not exist.
>>
>> In contrast, with the attached fix, dir() would return all 3 files.
>
> I think the scenario you describe could happen with either version.
> Once you've read the files in a directory, all bets are off.  Anything
> could happen between the time you readdir() and return results back to
> the user.  I agree, though, that avoiding two calls to readdir narrows
> the window.
>
>> Also, the existing fix in subversion doesn't seem to handle the case
>> where readdir() returns fewer files than was originally counted as it
>> doesn't decrease the length of the vector.
>
> Yes, that's a limitation of the current fix.
>
> Have you run 'make check-devel' with your patch applied?  Have you run
> any simple tests for using dir() or list.files() with recursive=TRUE on
> a reasonably large directory and compared times and memory use reported
> by gc()?
>
> It is often the case that writing the patch is the easy/quick part and
> making sure that one hasn't introduced new infelicities or unintended
> behavior is the hard part.
>
> I will try to take another look at your latest patch.

I've applied a modified version of your patch.  In the testing that I 
did, avoiding the counting step resulted in almost 2x faster times for 
large directory listings with recursive=TRUE at the cost of a bit more 
memory.

The code also now includes a check for user interrupt, so that you can 
C-c out of dir/list.files call more quickly.

Thanks for putting together the patch.

+ seth

-- 
Seth Falcon | @sfalcon | http://userprimary.net/


From seth at userprimary.net  Mon Mar 22 17:36:14 2010
From: seth at userprimary.net (Seth Falcon)
Date: Mon, 22 Mar 2010 09:36:14 -0700
Subject: [Rd] Suggestion: Not having to export .conflicts.OK in name
	spaces
In-Reply-To: <19367.19767.308713.426235@lynne.math.ethz.ch>
References: <59d7961d1003170911o38814b59h3fdb4de42e21b723@mail.gmail.com>	<4BA3E2D5.5050305@userprimary.net>
	<19367.19767.308713.426235@lynne.math.ethz.ch>
Message-ID: <4BA79C7E.3040701@userprimary.net>

On 3/22/10 3:57 AM, Martin Maechler wrote:
>>>>>> "SF" == Seth Falcon<seth at userprimary.net>
>>>>>>      on Fri, 19 Mar 2010 13:47:17 -0700 writes:
>
>      SF>  On 3/17/10 9:11 AM, Henrik Bengtsson wrote:
>      >>  Currently library() and attach() fail to locate an
>      >>  existing '.conflicts.OK' in a package wit name space,
>      >>  unless it is exported.  Since there should be little
>      >>  interest in exporting '.conflicts.OK' otherwise, one may
>      >>  argue that those methods should look for '.conflicts.OK'
>      >>  even if it is not exported.
>
>      SF>  I guess I agree that there is no real value in forcing
>      SF>  .conflicts.OK to be exported.
> so do I.

So I guess we agree that Henrik's patch would be worth applying.

@Henrik: if you resend your patch with the additions for attach, I will 
see about putting it in.

>
>      SF>  OTOH, this seems like a dubious feature to begin.  When
>      SF>  is it a good idea to use it?
>
> in cases, the package author thinks (s)he knows what (s)he is
> doing;
> e.g. in the case of Matrix, I could argue that I know about the
> current conflicts, and I would *not* want the users of my
> package be intimidated by warnings about maskings...

I can't say that this convinces me that .conflicts.OK is OK.  Are there 
package authors who realize they do not know what they are doing enough 
to keep the warning messages :-P

+ seth

-- 
Seth Falcon | @sfalcon | http://userprimary.net/


From ripley at stats.ox.ac.uk  Mon Mar 22 17:51:55 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 22 Mar 2010 16:51:55 +0000 (GMT)
Subject: [Rd] some fixes for R 2.01.1 on OpenSolaris using Sun Studio
 compilers
In-Reply-To: <4BA7927C.1010705@research.att.com>
References: <4BA7927C.1010705@research.att.com>
Message-ID: <alpine.LFD.2.00.1003221646070.22540@gannet.stats.ox.ac.uk>

On Mon, 22 Mar 2010, Kostas Oikonomou wrote:

> Hello,
>
> I recently built a 64-bit R 2.10.1 on OpenSolaris using the Sun Studio 12.1 
> compilers.   I would like to contribute the following notes, to update the 
> OpenSolaris installation instructions.

Do you mean the R-admin manual?  Your 'updates' all seem to be 
failures to follow that manual.

> ================================================
>
> 0. GNU libiconv and GNU gettext are assumed to be in /opt/lib.

Assumed by whom?  Not by our manual.

>    GNU libiconv is easy to build from source.  After building it, configure 
> gettext like this:
>
>    configure --prefix=/opt/lib --with-included-gettext CC=cc CFLAGS=-m64 
> LDFLAGS=-lsec
>   make
>   pfexec make install

Why do you do this rather than use R's included gettext?

> 1. export PATH=/opt/lib/bin:$PATH
>
> 2. Edit R's configure in *three* places to add the 2nd ${CFLAGS} below:

No, please don't: rather RTFM.  The R-admin manual has things like

CC="gcc -m64"

and it seems you needed

CC="cc -m64 -xarch=native"

If you need specific options to run a compiler, they are part of CC 
(and so on) and not CFLAGS.

> if ${CC} ${CFLAGS} -c conftest.c 1>&5 2>&5; then
>  ## <NOTE>
>  ## This should really use MAIN_LD, and hence come after this is
>  ## determined (and necessary additions to MAIN_LDFLAGS were made).
>  ## But it seems that we currently can always use the C compiler.
>  ## Also, to be defensive there should be a similar test with SHLIB_LD
>  ## and SHLIB_LDFLAGS (and note that on HPUX with native cc we have to
>  ## use ld for SHLIB_LD) ...
>  if ${CC} ${CFLAGS} ${LDFLAGS} ${MAIN_LDFLAGS} -o conftest${ac_exeext} \
>       conftest.${ac_objext} conftestf.${ac_objext} ${FLIBS} \
>       ${LIBM} 1>&5 2>&5;
>  ## </NOTE>
>
>
> 4. configure --prefix=/opt/R/2.10.1 --disable-nls --enable-R-shlib
> --with-libintl-prefix=/opt/lib
> CC=cc CFLAGS='-O -m64 -xarch=native' CPPFLAGS=-I/opt/lib/include
> LDFLAGS='-m64 -L/opt/lib/lib -R/opt/lib/lib'
> LIBS=-liconv CXX=CC CXXFLAGS='-O -m64 -xarch=native'
> F77=f95 FFLAGS='-O -m64 -xarch=native'
> R_BROWSER=opera R_PDFVIEWER=evince
>
>
> 5. The results of running the tests:
>
>   cd tests.
>   make test-Examples  Ok
>   make test-Specific  Ok
>   make test-Reg
>   	running tests of plotting Latin-1
> 	expect failure or some differences if not in a Latin or UTF-8 locale
> 	running code in 'reg-plot-latin1.R' ... FAILED
>   make test-Demo      Ok
>   make test-Random    Ok
>   make test-Internet  Ok
>
> =======================================================
>
>
> Regards,
>
> 				Kostas Oikonomou
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From mtmorgan at fhcrc.org  Mon Mar 22 18:01:26 2010
From: mtmorgan at fhcrc.org (Martin Morgan)
Date: Mon, 22 Mar 2010 10:01:26 -0700
Subject: [Rd] Some more help on S4 mechanism
In-Reply-To: <4BA76306.8010106@mines-paristech.fr>
References: <4BA76306.8010106@mines-paristech.fr>
Message-ID: <4BA7A266.30600@fhcrc.org>

On 03/22/2010 05:31 AM, Renard Didier wrote:
> Hello to the list
> 
> Some days ago, I placed a question on this maling-list and received an
> answer from Martin
> that I tried to follow. Unfortunately, I am still puzzled by the next step.
> I spent the whole Week-end in gathering information from the net.
> Some of them are almost contridtcory and I lack a good document to help me.

Sometimes it is better to stick closer to the documentation, e.g.,
'Writing R Extensions', help(package="methods"), ?Methods, ?Classes.

> So my first question would beL Is there a convenient document which tells
> a standard user, who laready developped a package with S3, on how to
> migrate
> to the S4 mechanism.
> 
> Secondly, this is my problem:
> According to Martin, now I use a NAMESPACE (as follows):
> 
> import (methods)
> exportPattern("^[^0]*$")
> exportMethods(
>        "[","[<-","$","$<-",
>        "plot","print"
> )
> exportClasses(
>        "anam","db","model","rule","vardir","vario","tokens","thresh"
> )
> useDynLib("RGeoS")
> importFrom(graphics,plot)
> 
> More over, in the R directory, I have a zzz.lib with the following
> contents (.onLoad) :
> 
> ".onLoad" <-
> function(...)
> {
> 
>        # Define the Classes #
>        All0.Classes()

Usually, classes are NOT defined in a function. Instead of

SomeFile.R:
----------
All0.Classes <- function() {
  setClass("Foo", <...>)
  <etc>
}
----------

you would simply

SomeFile.R
----------
setClass("Foo", <...>)
----------

where '-------'  are meant to delimit file content and <...> is meant to
be stuff you fill in.

> 
>        # Define the environment variables #
>        environ.load()
> }
> 
> The file All0.Classes (which will not be exported ... see exportPattern)
> contains
> all the class definitions (setClass functions)
> 
> Finally, I have some other functions, such as db.plot, which contain the
> following statement
> (at the end of the file):
> 
> setMethod("plot", signature(x="db"), function(x,y,...) db.plot(x,...))
> 
> My questions:
> - Should the setMethods be regrouped in a single file (as I read from
> the net).

Doesn't matter from a functional perspective, might make sense as a
strategy to organize large amounts of code.

> - What are the differences between "R CMD check" and "R CMD INSTALL" as
> far as the steps are involved.
> 
> As a matter of fact:
> - R CMD check finds that everything is OK
> - R CMD INSTALL gives me a set of warnings of the following type:
> 
> Warning in matchSignature(signature, fdef, where) :
>  in the method signature for function "[<-" no definition for class: "db"
> I did not use the Collate option (that Martin suggested) as I am not
> sure of its syntax and where I should add these statements.

in the DESCRIPTION file

Collate: FirstFile.R SecondFile.R ThirdFile.R

see 'Writing R Extensions' available from help.start()

> 
> The package works fine anyhow but I would like to correct these warnings.
> 
> By the way, as I belong to an institute where we use Fedora Core 8, I am
> stuck with R 2.8.0.
> 
> An ultimate problem: I develop two packages P1 and P2 where P2 requires P1.
> So I used the same architecture for both with NAMESPACE and .onLoad
> functions (in the zzz.lib files).
> 
> For P2, I mention that it depends upon P1 in the DESCRIPTION file. This
> information seems redundant with the NAMESPACE where I can add
> "import(P1)". Finally when, as a user, I load both by library() (first
> P1 then P2), I receive a message about function .onLoad being loaded twice.
> 
> How can I avoid this.

your export pattern includes .onLoad; arrange for .onLoad not to be
exported (a convention is to not export functions that start with '.').

Martin

> 
> As you can see, I encountered several problems when converting my S3
> into S4. I would appreciate if someone could give me a complete
> information and a godd reference.
> 
> Thanks in advance.
> 
> 
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Martin Morgan
Computational Biology / Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N.
PO Box 19024 Seattle, WA 98109

Location: Arnold Building M1 B861
Phone: (206) 667-2793


From cgenolin at u-paris10.fr  Mon Mar 22 19:16:45 2010
From: cgenolin at u-paris10.fr (Christophe Genolini)
Date: Mon, 22 Mar 2010 19:16:45 +0100
Subject: [Rd] S4: Documenting several fields at once
Message-ID: <4BA7B40D.2070501@u-paris10.fr>

Hi all,
I defined an S4 object in which there is a lot of fields that have very 
similar names and purposes.
--- 8< ----------
setClass(
   Class="foo",
   representation=representation(
      c2="list",
      c3="list",
      c4="list",
      c5="list",
      c6="list",
      c7="list",
        ...
      c26="list"
  )
)
--- 8< ----------

In the documentation (Rd file), is there a way to describe only one of 
the field, then say all the other work the same way?

--- 8< ----------
\section{Slots}{
  \describe{
    \item{\code{c2}}{list of Clustering with 2 clusters.}
    \item{\code{c3}}{list of Clustering with 3 clusters.}
    \item{\code{c4} ... \code{c26}}{list of Clustering with 4, ..., 26 
clusters.}
  }
}
--- 8< ---------

Thanks

Christophe


From jel+r at cs.uni-magdeburg.de  Mon Mar 22 22:16:13 2010
From: jel+r at cs.uni-magdeburg.de (Jens Elkner)
Date: Mon, 22 Mar 2010 22:16:13 +0100
Subject: [Rd] some fixes for R 2.01.1 on OpenSolaris using Sun Studio
	compilers
In-Reply-To: <4BA7927C.1010705@research.att.com>
References: <4BA7927C.1010705@research.att.com>
Message-ID: <20100322211613.GA1423@trex.cs.uni-magdeburg.de>

On Mon, Mar 22, 2010 at 11:53:32AM -0400, Kostas Oikonomou wrote:
Hi,
  
> I recently built a 64-bit R 2.10.1 on OpenSolaris using the 
> Sun Studio 12.1 compilers.   I would like to contribute the 
> following notes, to update the OpenSolaris installation 
> instructions.
  
First:
Since no patches are listed, check the results of the Eigen* tests: 
I assume, that at least one fails ...

> ================================================
> 
> 0. GNU libiconv

Well, that's a matter of taste. I prefer SUN's libiconv.

> and GNU gettext are assumed to be in /opt/lib.

There is no need to clutter the system with another one ...
  
> 2. Edit R's configure in *three* places to add the 2nd 
> ${CFLAGS} below:

If one needs to change stuff in configure, one should make the change in
the configure.ac or m4/*m4 file and autoreconf ... Hacking the configure
script itself is a bad idea and often has un-intended side effects ...
Just to pass standard flags, use the environment vars mentioned in the R
manual ...

> 4. configure --prefix=/opt/R/2.10.1 --disable-nls 
> --enable-R-shlib
> --with-libintl-prefix=/opt/lib
> CC=cc CFLAGS='-O -m64 -xarch=native' 
> CPPFLAGS=-I/opt/lib/include
> LDFLAGS='-m64 -L/opt/lib/lib -R/opt/lib/lib'
> LIBS=-liconv CXX=CC CXXFLAGS='-O -m64 -xarch=native'

This is not really sufficient because the very old standard libCstd
would be used by CC.  With the stlport library most C++ stuff can
be compiled, but there are still some more or less g++ specific cases,
where CC fails ...

Also note that [Open]Solaris is on the way to establish the
Apache stdc++ library as the system's default standard C++ library ...
(OT: Always wondering, what the term 'standard' means in the C++ world
at all ;-))
 
> F77=f95 FFLAGS='-O -m64 -xarch=native'
> R_BROWSER=opera R_PDFVIEWER=evince

Nailing the users to a certain browser or pdf viewer is a very bad idea
- they'll hate you.  For Freedesktop compliant Desktop Environments like
GNOME or KDE use xdg-open instead, which honors the user's preferences.
  
> 5. The results of running the tests:
As said - check the test output, where Eigen* is used (or was it another
R package? - don't remember exactly ... ).
To get it work and get better performance, I'm using the SUN performance
libraries for blas/lapack stuff. To get an idea, you might have a look
at http://iws.cs.uni-magdeburg.de/~elkner/R/Build.sh (the script I use
to build the R package).

Have fun,
jel.
-- 
Otto-von-Guericke University     http://www.cs.uni-magdeburg.de/
Department of Computer Science   Geb. 29 R 027, Universitaetsplatz 2
39106 Magdeburg, Germany         Tel: +49 391 67 12768


From ross at biostat.ucsf.edu  Mon Mar 22 23:03:51 2010
From: ross at biostat.ucsf.edu (Ross Boylan)
Date: Mon, 22 Mar 2010 15:03:51 -0700
Subject: [Rd] problems extracting parts of a summary object
Message-ID: <1269295431.5411.163.camel@corn.betterworld.us>

summary(x), where x is the output of lm, produces the expectedd display,
including standard errors of the coefficients.

summary(x)$coefficients produces a vector (x is r$individual[[2]]):
> r$individual[[2]]$coefficients
tX(Intercept)    tXcigspmkr        tXpeld    tXsmkpreve            mn
-2.449188e+04 -4.143249e+00  4.707007e+04 -3.112334e+01  1.671106e-01
   mncigspmkr        mnpeld    mnsmkpreve
 3.580065e+00  2.029721e+05  4.404915e+01
> class(r$individual[[2]]$coefficients)
[1] "numeric"

rather than the expected matrix like object with a column for the se's.

When I trace through the summary method, the coefficients value is a
matrix.

I'm trying to pull out the standard errors for some rearranged output.

How can I do that?

And what's going on?  I suspect this may be a namespace issue.

Thanks.
Ross Boylan

P.S. I would appreciate a cc because of some mail problems I'm having.


From ross at biostat.ucsf.edu  Mon Mar 22 23:43:33 2010
From: ross at biostat.ucsf.edu (Ross Boylan)
Date: Mon, 22 Mar 2010 15:43:33 -0700
Subject: [Rd] problems extracting parts of a summary object
In-Reply-To: <17765.208.94.68.4.1269297017.squirrel@webmail.cybermesa.com>
References: <1269295431.5411.163.camel@corn.betterworld.us>
	<17765.208.94.68.4.1269297017.squirrel@webmail.cybermesa.com>
Message-ID: <1269297813.5411.167.camel@corn.betterworld.us>

On Mon, 2010-03-22 at 16:30 -0600, tplate at cybermesa.com wrote:
> Are you sure you're extracting the coefficients component of the summary
> object and not the lm object?
> 
> Seems to work ok for me:
> > xm <- lm(y ~ x, data=data.frame(y=rnorm(20), x=rnorm(2)))
> > summary(xm)$coefficients
>             Estimate Std. Error  t value  Pr(>|t|)
> (Intercept) 1.908948   1.707145 1.118210 0.2781794
> x           1.292263   1.174608 1.100165 0.2857565
> > xm$coefficients
> (Intercept)           x
>    1.908948    1.292263
> 
> -- Tony Plate
> class(summary(r$individual[[2]]))
[1] "summary.lm"
But maybe I'm not following the question.
Ross

> 
> On Mon, March 22, 2010 4:03 pm, Ross Boylan wrote:
> > summary(x), where x is the output of lm, produces the expectedd display,
> > including standard errors of the coefficients.
> >
> > summary(x)$coefficients produces a vector (x is r$individual[[2]]):
> >> r$individual[[2]]$coefficients
> > tX(Intercept)    tXcigspmkr        tXpeld    tXsmkpreve            mn
> > -2.449188e+04 -4.143249e+00  4.707007e+04 -3.112334e+01  1.671106e-01
> >    mncigspmkr        mnpeld    mnsmkpreve
> >  3.580065e+00  2.029721e+05  4.404915e+01
> >> class(r$individual[[2]]$coefficients)
> > [1] "numeric"
> >
> > rather than the expected matrix like object with a column for the se's.
> >
> > When I trace through the summary method, the coefficients value is a
> > matrix.
> >
> > I'm trying to pull out the standard errors for some rearranged output.
> >
> > How can I do that?
> >
> > And what's going on?  I suspect this may be a namespace issue.
> >
> > Thanks.
> > Ross Boylan
> >
> > P.S. I would appreciate a cc because of some mail problems I'm having.
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> >
> 
>


From ross at biostat.ucsf.edu  Tue Mar 23 00:17:58 2010
From: ross at biostat.ucsf.edu (Ross Boylan)
Date: Mon, 22 Mar 2010 16:17:58 -0700
Subject: [Rd] problems extracting parts of a summary object [solved]
In-Reply-To: <21595.208.94.68.4.1269298366.squirrel@webmail.cybermesa.com>
References: <1269295431.5411.163.camel@corn.betterworld.us>
	<17765.208.94.68.4.1269297017.squirrel@webmail.cybermesa.com>
	<1269297813.5411.167.camel@corn.betterworld.us>
	<21595.208.94.68.4.1269298366.squirrel@webmail.cybermesa.com>
Message-ID: <1269299878.5411.173.camel@corn.betterworld.us>

On Mon, 2010-03-22 at 16:52 -0600, tplate at cybermesa.com wrote:
> what's the output of:
> > summary(r$individual[[2]])$coef
> 
> my question was basically whether you were doing
> summary(r$individual[[2]])$coef
> or
> r$individual[[2]]$coef
> 
> (the second was what you appeared to be doing from your initial email)
> 
Doh!  Thank you; that was it.
This was interacting with another error, which is perhaps how I managed
to miss it.

Ross
> -- Tony Plate
> 
> On Mon, March 22, 2010 4:43 pm, Ross Boylan wrote:
> > On Mon, 2010-03-22 at 16:30 -0600, tplate at cybermesa.com wrote:
> >> Are you sure you're extracting the coefficients component of the summary
> >> object and not the lm object?
> >>
> >> Seems to work ok for me:
> >> > xm <- lm(y ~ x, data=data.frame(y=rnorm(20), x=rnorm(2)))
> >> > summary(xm)$coefficients
> >>             Estimate Std. Error  t value  Pr(>|t|)
> >> (Intercept) 1.908948   1.707145 1.118210 0.2781794
> >> x           1.292263   1.174608 1.100165 0.2857565
> >> > xm$coefficients
> >> (Intercept)           x
> >>    1.908948    1.292263
> >>
> >> -- Tony Plate
> >> class(summary(r$individual[[2]]))
> > [1] "summary.lm"
> > But maybe I'm not following the question.
> > Ross
> >
> >>
> >> On Mon, March 22, 2010 4:03 pm, Ross Boylan wrote:
> >> > summary(x), where x is the output of lm, produces the expectedd
> >> display,
> >> > including standard errors of the coefficients.
> >> >
> >> > summary(x)$coefficients produces a vector (x is r$individual[[2]]):
> >> >> r$individual[[2]]$coefficients
> >> > tX(Intercept)    tXcigspmkr        tXpeld    tXsmkpreve            mn
> >> > -2.449188e+04 -4.143249e+00  4.707007e+04 -3.112334e+01  1.671106e-01
> >> >    mncigspmkr        mnpeld    mnsmkpreve
> >> >  3.580065e+00  2.029721e+05  4.404915e+01
> >> >> class(r$individual[[2]]$coefficients)
> >> > [1] "numeric"
> >> >
> >> > rather than the expected matrix like object with a column for the
> >> se's.
> >> >
> >> > When I trace through the summary method, the coefficients value is a
> >> > matrix.
> >> >
> >> > I'm trying to pull out the standard errors for some rearranged output.
> >> >
> >> > How can I do that?
> >> >
> >> > And what's going on?  I suspect this may be a namespace issue.
> >> >
> >> > Thanks.
> >> > Ross Boylan
> >> >
> >> > P.S. I would appreciate a cc because of some mail problems I'm having.
> >> >
> >> > ______________________________________________
> >> > R-devel at r-project.org mailing list
> >> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >> >
> >> >
> >>
> >>
> >
> >
> >
> 
>


From clausen at econ.upenn.edu  Tue Mar 23 03:53:12 2010
From: clausen at econ.upenn.edu (Andrew Clausen)
Date: Mon, 22 Mar 2010 22:53:12 -0400
Subject: [Rd] [patch] add is.set parameter to sample()
Message-ID: <57a6d2111003221953g69797112o7dd109a280944fad@mail.gmail.com>

Hi all,

sample() has some well-documented undesirable behaviour.

sample(1:6, 1)
sample(2:6, 1)
...
sample(5:6, 1)

do what you expect, but

sample(6:6, 1)
sample(1:6, 1)

do the same thing.

This behaviour is documented:

     If 'x' has length 1, is numeric (in the sense of 'is.numeric') and
     'x >= 1', sampling _via_ 'sample' takes place from '1:x'.  _Note_
     that this convenience feature may lead to undesired behaviour when
     'x' is of varying length 'sample(x)'.  See the 'resample()'
     example below.

My proposal is to add an extra parameter is.set to sample() to control
this behaviour.  If the parameter is unspecified, then we keep the old
behaviour for compatibility.  If it is TRUE, then we treat the first
parameter x as a set.  If it is FALSE, then we treat it as a set size.
 This means that

sample(6:6, 1, is.set=TRUE)

would return 6 with probability 1.

I have attached a patch to implement this new option.

Cheers,
Andrew
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sample.diff
Type: text/x-patch
Size: 3636 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100322/cc18f9ee/attachment.bin>

From quantumelixir at gmail.com  Tue Mar 23 09:37:39 2010
From: quantumelixir at gmail.com (Chidambaram Annamalai)
Date: Tue, 23 Mar 2010 14:07:39 +0530
Subject: [Rd] : Operator overloading for custom classes
Message-ID: <7021740b1003230137y460ffd11nae0855f026b1997@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100323/a67b8df1/attachment.pl>

From clausen at econ.upenn.edu  Tue Mar 23 13:04:12 2010
From: clausen at econ.upenn.edu (Andrew Clausen)
Date: Tue, 23 Mar 2010 08:04:12 -0400
Subject: [Rd] [patch] add is.set parameter to sample()
In-Reply-To: <57a6d2111003221953g69797112o7dd109a280944fad@mail.gmail.com>
References: <57a6d2111003221953g69797112o7dd109a280944fad@mail.gmail.com>
Message-ID: <57a6d2111003230504t61cc96eal48e5d2a7b4400f9f@mail.gmail.com>

Hi all,

I forgot to test my patch!  I fixed a few bugs.

Cheers,
Andrew

On 22 March 2010 22:53, Andrew Clausen <clausen at econ.upenn.edu> wrote:
> Hi all,
>
> sample() has some well-documented undesirable behaviour.
>
> sample(1:6, 1)
> sample(2:6, 1)
> ...
> sample(5:6, 1)
>
> do what you expect, but
>
> sample(6:6, 1)
> sample(1:6, 1)
>
> do the same thing.
>
> This behaviour is documented:
>
> ? ? If 'x' has length 1, is numeric (in the sense of 'is.numeric') and
> ? ? 'x >= 1', sampling _via_ 'sample' takes place from '1:x'. ?_Note_
> ? ? that this convenience feature may lead to undesired behaviour when
> ? ? 'x' is of varying length 'sample(x)'. ?See the 'resample()'
> ? ? example below.
>
> My proposal is to add an extra parameter is.set to sample() to control
> this behaviour. ?If the parameter is unspecified, then we keep the old
> behaviour for compatibility. ?If it is TRUE, then we treat the first
> parameter x as a set. ?If it is FALSE, then we treat it as a set size.
> ?This means that
>
> sample(6:6, 1, is.set=TRUE)
>
> would return 6 with probability 1.
>
> I have attached a patch to implement this new option.
>
> Cheers,
> Andrew
>

From Stephen.Bond at cibc.com  Tue Mar 23 18:28:54 2010
From: Stephen.Bond at cibc.com (Bond, Stephen)
Date: Tue, 23 Mar 2010 13:28:54 -0400
Subject: [Rd] code allowing NA
Message-ID: <FEFD7FDD74F6044AA1F906AE2909B5AD1CAF55080B@CBMCC-X7-MBX07.ad.cibc.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100323/6bccba4a/attachment.pl>

From murdoch at stats.uwo.ca  Wed Mar 24 13:58:06 2010
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Wed, 24 Mar 2010 08:58:06 -0400
Subject: [Rd] code allowing NA
In-Reply-To: <FEFD7FDD74F6044AA1F906AE2909B5AD1CAF55080B@CBMCC-X7-MBX07.ad.cibc.com>
References: <FEFD7FDD74F6044AA1F906AE2909B5AD1CAF55080B@CBMCC-X7-MBX07.ad.cibc.com>
Message-ID: <4BAA0C5E.2030206@stats.uwo.ca>

On 23/03/2010 1:28 PM, Bond, Stephen wrote:
> Dear R developers,
>
> Could you, please, point me to the source file containing the implementation of NA values?


I have a feeling this isn't what you want, but what you asked for is in

https://svn.r-project.org/R/trunk/src/main/arithmetic.c

in particular around lines 110 and 160.

Duncan Murdoch


From ripley at stats.ox.ac.uk  Wed Mar 24 14:46:40 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 24 Mar 2010 13:46:40 +0000 (GMT)
Subject: [Rd] code allowing NA
In-Reply-To: <4BAA0C5E.2030206@stats.uwo.ca>
References: <FEFD7FDD74F6044AA1F906AE2909B5AD1CAF55080B@CBMCC-X7-MBX07.ad.cibc.com>
	<4BAA0C5E.2030206@stats.uwo.ca>
Message-ID: <alpine.LFD.2.00.1003241342350.16164@gannet.stats.ox.ac.uk>

On Wed, 24 Mar 2010, Duncan Murdoch wrote:

> On 23/03/2010 1:28 PM, Bond, Stephen wrote:
>> Dear R developers,
>> 
>> Could you, please, point me to the source file containing the 
>> implementation of NA values?
>
>
> I have a feeling this isn't what you want, but what you asked for is in
>
> https://svn.r-project.org/R/trunk/src/main/arithmetic.c
>
> in particular around lines 110 and 160.

And for completeness, lines 1106-8 of names.c (there are 4 types of NA 
in R, and NA_character_ is in a different file).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jferrari at umces.edu  Wed Mar 24 18:29:56 2010
From: jferrari at umces.edu (jferrari at umces.edu)
Date: Wed, 24 Mar 2010 13:29:56 -0400 (EDT)
Subject: [Rd] Fortran DLLs and R
Message-ID: <ffeea5f8fc35b0f976836bb45a8d1b99.squirrel@mail.al.umces.edu>

Hi All,

I'm writing R code that would benefit from doing certain tasks using
compiled blocks of code, specifically Fortran subroutines of my own
(already written, debugged in both Fortran77 and Fortran90).

I am currently working on a Windows machine using Lahey and/or MinGW(g77)
compilers.

It is possible to dynamically load Fortran DLLs into R as evidenced from
the several documents I've found on-line giving details on how to do this
(specifically for Windows).  However, following the examples in these
documents... none of them successfully deliver a DLL that can be called
from R (and I'm talking for simple test Fortran subroutines that add 2+2).

Either the directions for creating the DLL (for a specific compiler) do
not work (no DLL created), or a DLL is created and exists but will not be
loaded/recognized by R (result of is.loaded = FALSE).

Can anyone give me a quick/dirty step by step on how to create a DLL
(using g77 compiler, specifically MinGW for Windows) so that it will work
in R, on a Windows machine (as well as any tips on anything that has to be
done to, or in, R to get it to work), or if there's a definitive easy to
read paper/book describing the process?

Any advice/input would be greatly appreciated.

Thank you!

Joe Ferrari


Joseph Ferrari
Faculty Research Assistant
UMCES Appalachian Laboratory
301 Braddock Road
Frostburg, MD 21532


From murdoch at stats.uwo.ca  Wed Mar 24 19:05:09 2010
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Wed, 24 Mar 2010 14:05:09 -0400
Subject: [Rd] Fortran DLLs and R
In-Reply-To: <ffeea5f8fc35b0f976836bb45a8d1b99.squirrel@mail.al.umces.edu>
References: <ffeea5f8fc35b0f976836bb45a8d1b99.squirrel@mail.al.umces.edu>
Message-ID: <4BAA5455.5050305@stats.uwo.ca>

On 24/03/2010 1:29 PM, jferrari at umces.edu wrote:
> Hi All,
>
> I'm writing R code that would benefit from doing certain tasks using
> compiled blocks of code, specifically Fortran subroutines of my own
> (already written, debugged in both Fortran77 and Fortran90).
>
> I am currently working on a Windows machine using Lahey and/or MinGW(g77)
> compilers.
>
> It is possible to dynamically load Fortran DLLs into R as evidenced from
> the several documents I've found on-line giving details on how to do this
> (specifically for Windows).  However, following the examples in these
> documents... none of them successfully deliver a DLL that can be called
> from R (and I'm talking for simple test Fortran subroutines that add 2+2).
>
> Either the directions for creating the DLL (for a specific compiler) do
> not work (no DLL created), or a DLL is created and exists but will not be
> loaded/recognized by R (result of is.loaded = FALSE).
>
> Can anyone give me a quick/dirty step by step on how to create a DLL
> (using g77 compiler, specifically MinGW for Windows) so that it will work
> in R, on a Windows machine (as well as any tips on anything that has to be
> done to, or in, R to get it to work), or if there's a definitive easy to
> read paper/book describing the process?
>   

Here's a very simple example using MinGW.  The source code in test.f:

      subroutine testfun(x, y, z)
      real*8 x, y, z
      z = x + y
      return
      end


Compile it using

Rcmd SHLIB test.f

which automatically executes

gfortran     -O3  -c test.f -o test.o
gcc -shared -s -static-libgcc -o test.dll tmp.def test.o -lgfortran 
-Lf:/R/svn/r-devel/R/bin -lR

(Paths will be different for you.)

Then, in R,

 > dyn.load("test.dll")
 > is.loaded("testfun")
[1] TRUE
 > .Fortran("testfun", x=as.numeric(2), y=as.numeric(2), z=as.numeric(0))
$x
[1] 2

$y
[1] 2

$z
[1] 4

Duncan Murdoch


From wdunlap at tibco.com  Thu Mar 25 02:14:10 2010
From: wdunlap at tibco.com (William Dunlap)
Date: Wed, 24 Mar 2010 18:14:10 -0700
Subject: [Rd] print(big+small*1i) -> big + 0i
Message-ID: <77EB52C6DD32BA4D87471DCD70C8D70002AC3C28@NA-PA-VBE03.na.tibco.com>

Should both parts of a complex number be printed
to the same precision?   The imaginary part of 0
looks a bit odd when log10(real/imag) >=~ getOption("digits"),
but I'm not sure it is awful.  Some people might
expect the same number of significant digits in the
two parts.

> 1e7+4i
[1] 10000000+0i
> 1e7+5i
[1] 10000000+0i
> 1e10 + 1000i
[1] 1e+10+0e+00i
> getOption("digits")
[1] 7

> options(digits=4)
> 1e4+4i
[1] 10000+0i
> 1e7+1000i
[1] 10000000+0i

> version
               _

platform       i386-pc-mingw32

arch           i386

os             mingw32

system         i386, mingw32

status         Under development (unstable)

major          2

minor          11.0

year           2010

month          03

day            07

svn rev        51225

language       R

version.string R version 2.11.0 Under development (unstable) (2010-03-07
r51225)

Bill Dunlap
Spotfire, TIBCO Software
wdunlap tibco.com 


From ripley at stats.ox.ac.uk  Thu Mar 25 06:58:21 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 25 Mar 2010 05:58:21 +0000 (GMT)
Subject: [Rd] print(big+small*1i) -> big + 0i
In-Reply-To: <77EB52C6DD32BA4D87471DCD70C8D70002AC3C28@NA-PA-VBE03.na.tibco.com>
References: <77EB52C6DD32BA4D87471DCD70C8D70002AC3C28@NA-PA-VBE03.na.tibco.com>
Message-ID: <alpine.LFD.2.00.1003250549310.31606@gannet.stats.ox.ac.uk>

On Wed, 24 Mar 2010, William Dunlap wrote:

> Should both parts of a complex number be printed
> to the same precision?   The imaginary part of 0
> looks a bit odd when log10(real/imag) >=~ getOption("digits"),
> but I'm not sure it is awful.  Some people might
> expect the same number of significant digits in the
> two parts.

'significant digits' is documented in ?signif and xref-ed in ?print.
So, yes, the are 'printed to the same precision' for the definition 
given of 'precision'.  (One can argue that precision is relative to 
the modulus, but this definition is a close approximation.)

>From the NEWS for 2.4.0:

     o	Printing of complex numbers could misbehave when one of the
 	parts was large (so scientific notation was used) and the
 	other was so much smaller that it had no significant digits
 	and should have been printed as zero (e.g. 1e80+3e44i).

and 2.2.0

     o	signif() on complex numbers now rounds jointly to give the
 	requested number of digits in the larger component, not
 	independently for each component.


>
>> 1e7+4i
> [1] 10000000+0i
>> 1e7+5i
> [1] 10000000+0i
>> 1e10 + 1000i
> [1] 1e+10+0e+00i
>> getOption("digits")
> [1] 7

...

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From rdeangel at amgen.com  Wed Mar 24 23:05:46 2010
From: rdeangel at amgen.com (Roger DeAngelis(xlr82sas))
Date: Wed, 24 Mar 2010 14:05:46 -0800 (PST)
Subject: [Rd] Associative array?
In-Reply-To: <CB6DE26D-FE28-404A-869B-B7A33D1781BC@r-project.org>
References: <20100311075212.66a6a0e7.misc7@emerose.org>
	<85602218-8121-4893-A262-86EC56E75002@r-project.org>
	<20100311180909.76c938cc.misc7@emerose.org>
	<66f3bd911003151225x4c862500we47df579117c3aa9@mail.gmail.com>
	<CB6DE26D-FE28-404A-869B-B7A33D1781BC@r-project.org>
Message-ID: <1269468346903-1689897.post@n4.nabble.com>


Hi,

 Just a note, if you want an exact character representation of an 8 byte
IEEE float you may want to extract the exact 16 character hexidecimal
equivalent of the raw binary 8 byte float. Converting possible non-integer
or non 2^x float to decimal is often an approximation and may not be
reversible. 
-- 
View this message in context: http://n4.nabble.com/Associative-array-tp1588978p1689897.html
Sent from the R devel mailing list archive at Nabble.com.


From pburns at pburns.seanet.com  Thu Mar 25 10:01:26 2010
From: pburns at pburns.seanet.com (Patrick Burns)
Date: Thu, 25 Mar 2010 09:01:26 +0000
Subject: [Rd] print(big+small*1i) -> big + 0i
In-Reply-To: <77EB52C6DD32BA4D87471DCD70C8D70002AC3C28@NA-PA-VBE03.na.tibco.com>
References: <77EB52C6DD32BA4D87471DCD70C8D70002AC3C28@NA-PA-VBE03.na.tibco.com>
Message-ID: <4BAB2666.2040408@pburns.seanet.com>

I'm not sure it's awful either, but it
is surprising -- at least to my eye.

In particular, it is using the same
amount of real estate as it would to
print the "right" value.


Pat

On 25/03/2010 01:14, William Dunlap wrote:
> Should both parts of a complex number be printed
> to the same precision?   The imaginary part of 0
> looks a bit odd when log10(real/imag)>=~ getOption("digits"),
> but I'm not sure it is awful.  Some people might
> expect the same number of significant digits in the
> two parts.
>
>> 1e7+4i
> [1] 10000000+0i
>> 1e7+5i
> [1] 10000000+0i
>> 1e10 + 1000i
> [1] 1e+10+0e+00i
>> getOption("digits")
> [1] 7
>
>> options(digits=4)
>> 1e4+4i
> [1] 10000+0i
>> 1e7+1000i
> [1] 10000000+0i
>
>> version
>                 _
>
> platform       i386-pc-mingw32
>
> arch           i386
>
> os             mingw32
>
> system         i386, mingw32
>
> status         Under development (unstable)
>
> major          2
>
> minor          11.0
>
> year           2010
>
> month          03
>
> day            07
>
> svn rev        51225
>
> language       R
>
> version.string R version 2.11.0 Under development (unstable) (2010-03-07
> r51225)
>
> Bill Dunlap
> Spotfire, TIBCO Software
> wdunlap tibco.com
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Patrick Burns
pburns at pburns.seanet.com
http://www.burns-stat.com
(home of 'Some hints for the R beginner'
and 'The R Inferno')


From maechler at stat.math.ethz.ch  Thu Mar 25 11:53:26 2010
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Thu, 25 Mar 2010 11:53:26 +0100
Subject: [Rd] [patch] add is.set parameter to sample()
In-Reply-To: <57a6d2111003230504t61cc96eal48e5d2a7b4400f9f@mail.gmail.com>
References: <57a6d2111003221953g69797112o7dd109a280944fad@mail.gmail.com>
	<57a6d2111003230504t61cc96eal48e5d2a7b4400f9f@mail.gmail.com>
Message-ID: <19371.16550.682173.889649@lynne.math.ethz.ch>

>>>>> "AndrewC" == Andrew Clausen <clausen at econ.upenn.edu>
>>>>>     on Tue, 23 Mar 2010 08:04:12 -0400 writes:

    AndrewC> Hi all,
    AndrewC> I forgot to test my patch!  I fixed a few bugs.

and this time, you even forgot to attach it (in a way to pass
through the list filters).

Note however, that all this seems unnecessary,
as we have  sample.int()
and a trivial definition of resample()
at least in R-devel, which will be released as R 2.11.0 on 
April 22.

Thank you anyway, for your efforts!
Martin

Martin Maechler, ETH Zurich

    AndrewC> On 22 March 2010 22:53, Andrew Clausen <clausen at econ.upenn.edu> wrote:
    >> Hi all,
    >> 
    >> sample() has some well-documented undesirable behaviour.
    >> 
    >> sample(1:6, 1)
    >> sample(2:6, 1)
    >> ...
    >> sample(5:6, 1)
    >> 
    >> do what you expect, but
    >> 
    >> sample(6:6, 1)
    >> sample(1:6, 1)
    >> 
    >> do the same thing.
    >> 
    >> This behaviour is documented:
    >> 
    >> ? ? If 'x' has length 1, is numeric (in the sense of 'is.numeric') and
    >> ? ? 'x >= 1', sampling _via_ 'sample' takes place from '1:x'. ?_Note_
    >> ? ? that this convenience feature may lead to undesired behaviour when
    >> ? ? 'x' is of varying length 'sample(x)'. ?See the 'resample()'
    >> ? ? example below.
    >> 
    >> My proposal is to add an extra parameter is.set to sample() to control
    >> this behaviour. ?If the parameter is unspecified, then we keep the old
    >> behaviour for compatibility. ?If it is TRUE, then we treat the first
    >> parameter x as a set. ?If it is FALSE, then we treat it as a set size.
    >> ?This means that
    >> 
    >> sample(6:6, 1, is.set=TRUE)
    >> 
    >> would return 6 with probability 1.
    >> 
    >> I have attached a patch to implement this new option.
    >> 
    >> Cheers,
    >> Andrew
    >> 
    AndrewC> ______________________________________________
    AndrewC> R-devel at r-project.org mailing list
    AndrewC> https://stat.ethz.ch/mailman/listinfo/r-devel


From clausen at econ.upenn.edu  Thu Mar 25 14:39:33 2010
From: clausen at econ.upenn.edu (Andrew Clausen)
Date: Thu, 25 Mar 2010 09:39:33 -0400
Subject: [Rd] [patch] add is.set parameter to sample()
In-Reply-To: <19371.16550.682173.889649@lynne.math.ethz.ch>
References: <57a6d2111003221953g69797112o7dd109a280944fad@mail.gmail.com>
	<57a6d2111003230504t61cc96eal48e5d2a7b4400f9f@mail.gmail.com>
	<19371.16550.682173.889649@lynne.math.ethz.ch>
Message-ID: <57a6d2111003250639t209713a2n2e2d8d8ea51285eb@mail.gmail.com>

Hi Martin,

I re-attached the patch with a filename that will hopefully get
through the filters this time.

I agree that the case that you want to specify an integer is already
well handled with sample.int().  I disagree that the resample() code
for the set case given in the example is trivial.  The user has to
load the code into their program, which is annoying for such basic
functionality.  Moreover, the example code doesn't work for sampling
with replacement, and is poorly documented.  Finally, it isn't obvious
to new users of R what to do with resample().  (They would probably
try using resample() without cutting & pasting it into their program.
And why is it called resample()?  It's a mysterious name, that
suggests some technical concept, like resampling digital audio from
one sampling rate to another.)

So, the upside of my patch is that sample() becomes more convenient,
and the documentation becomes simpler.  What's the downside?  It is
backwards compatible.

sample() is one of the most important functions in R... I teach it to
my undergraduate economics students in the first 20 minutes of their
first R lesson.  It is the first probability/statistics function they
learn.  It is important that it is easy and convenient to use.

My first R problem set that I assigned my students was to do a Monte
Carlo simulation of the Monty Hall problem.  sample()'s surprise
really bites here because Monty has either one or two choices of door
to open.  It's bad enough that there is a surprise, but even worse
that there is no workaround that my students can understand easily.

Cheers,
Andrew

On 25 March 2010 06:53, Martin Maechler <maechler at stat.math.ethz.ch> wrote:
>>>>>> "AndrewC" == Andrew Clausen <clausen at econ.upenn.edu>
>>>>>> ? ? on Tue, 23 Mar 2010 08:04:12 -0400 writes:
>
> ? ?AndrewC> Hi all,
> ? ?AndrewC> I forgot to test my patch! ?I fixed a few bugs.
>
> and this time, you even forgot to attach it (in a way to pass
> through the list filters).
>
> Note however, that all this seems unnecessary,
> as we have ?sample.int()
> and a trivial definition of resample()
> at least in R-devel, which will be released as R 2.11.0 on
> April 22.
>
> Thank you anyway, for your efforts!
> Martin
>
> Martin Maechler, ETH Zurich
>
> ? ?AndrewC> On 22 March 2010 22:53, Andrew Clausen <clausen at econ.upenn.edu> wrote:
> ? ?>> Hi all,
> ? ?>>
> ? ?>> sample() has some well-documented undesirable behaviour.
> ? ?>>
> ? ?>> sample(1:6, 1)
> ? ?>> sample(2:6, 1)
> ? ?>> ...
> ? ?>> sample(5:6, 1)
> ? ?>>
> ? ?>> do what you expect, but
> ? ?>>
> ? ?>> sample(6:6, 1)
> ? ?>> sample(1:6, 1)
> ? ?>>
> ? ?>> do the same thing.
> ? ?>>
> ? ?>> This behaviour is documented:
> ? ?>>
> ? ?>> ? ? If 'x' has length 1, is numeric (in the sense of 'is.numeric') and
> ? ?>> ? ? 'x >= 1', sampling _via_ 'sample' takes place from '1:x'. ?_Note_
> ? ?>> ? ? that this convenience feature may lead to undesired behaviour when
> ? ?>> ? ? 'x' is of varying length 'sample(x)'. ?See the 'resample()'
> ? ?>> ? ? example below.
> ? ?>>
> ? ?>> My proposal is to add an extra parameter is.set to sample() to control
> ? ?>> this behaviour. ?If the parameter is unspecified, then we keep the old
> ? ?>> behaviour for compatibility. ?If it is TRUE, then we treat the first
> ? ?>> parameter x as a set. ?If it is FALSE, then we treat it as a set size.
> ? ?>> ?This means that
> ? ?>>
> ? ?>> sample(6:6, 1, is.set=TRUE)
> ? ?>>
> ? ?>> would return 6 with probability 1.
> ? ?>>
> ? ?>> I have attached a patch to implement this new option.
> ? ?>>
> ? ?>> Cheers,
> ? ?>> Andrew
> ? ?>>
> ? ?AndrewC> ______________________________________________
> ? ?AndrewC> R-devel at r-project.org mailing list
> ? ?AndrewC> https://stat.ethz.ch/mailman/listinfo/r-devel
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sample.diff
Type: text/x-patch
Size: 3638 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100325/fe619967/attachment.bin>

From arnima at hafro.is  Thu Mar 25 20:16:06 2010
From: arnima at hafro.is (Arni Magnusson)
Date: Thu, 25 Mar 2010 19:16:06 +0000 (UTC)
Subject: [Rd] update.packages(1)
Message-ID: <alpine.LFD.2.00.1003251841410.8040@hafstormur.hafro.is>

I'm relaying a question from my institute's sysadmin:

Would it be possible to modify update.packages() and related functions so 
that 'lib.loc' accepts integer values to specify a library from the 
.libPaths() vector?

Many Linux users want to update all user packages (inside the R_LIBS_USER 
directory, e.g. ~/r/library) and none of the system packages (inside the 
/usr directory, e.g. /usr/lib64/R/library), because they don't have write 
privileges to update the system packages.

Currently, this can be done by pressing 'y RET' for all the user packages 
and 'RET' for all the system packages. This hard work and careful reading 
when there dozens of packages. Another way is to run

   update.packages(Sys.getenv("R_LIBS_USER"))

or:

   update.packages(.libPaths()[1])

But it would be nicer for the user to type

   update.packages(1)

using a 'pos' like notation to indicate the first element of the 
.libPaths() vector.

---

A separate but related issue is that it would be nice if the R_LIBS_USER 
library would be the first library by default. Currently, my sysadmin must 
use Rprofile.site to shuffle the .libPaths() to make R_LIBS_USER first, 
which seems like a sensible default when it comes to install.packages() 
and remove.packages().

This is R version 2.10.1 (2009-12-14) on x86_64-redhat-linux-gnu (Fedora 
11).

Thanks,

Arni


From jochen.laubrock at gmail.com  Fri Mar 26 00:07:49 2010
From: jochen.laubrock at gmail.com (jochen laubrock)
Date: Fri, 26 Mar 2010 00:07:49 +0100
Subject: [Rd] R CMD install: problem quoting spaces when calling gzip?
Message-ID: <3562FDA4-056E-412B-91CB-40757A16490B@gmail.com>

There appears to be a quoting problem in the way R CMD install handles file names containing spaces, more specifically, in the way the argument is passed through to gzip.

The install.packages command

(from R)
install.packages("~/Projects/R library/bar/eyetrackR_0.13.tar.gz", repos = NULL, type = "source")

expands to

system("R_LIBS='/Users/foo/Library/R/2.10/library' "/Library/Frameworks/R.framework/Resources/bin/R CMD INSTALL -l '/Users/foo/Library/R/2.10/library'   '/Users/foo/Projects/R\ library/bar/eyetrackR_0.13.tar.gz'")

and gives the same error messages as the following commands from Terminal.app on Mac OS X

(from bash)
R CMD install /Users/foo/Projects/R\ library/bar/eyetrackR_0.13.tar.gz
R CMD install "~/Projects/R library/bar/eyetrackR_0.13.tar.gz"
R CMD install '~/Projects/R library/bar/eyetrackR_0.13.tar.gz'

, namely (the error messages): 

gzip: /Users/foo/Projects/R.gz: No such file or directory
gzip: library/bar/eyetrackR_0.13.tar.gz: No such file or directory


The following commands do work 

(from R)
setwd("~/Projects/R library/bar/")
install.packages("eyetrackR_0.13.tar.gz", repos = NULL, type = "source")

(from bash)
cd ~/Projects/R\ library/bar/
R CMD install eyetrackR_0.13.tar.gz

Interestingly, if the file is unpacked on the command line (tar xzvf), then both R CMD install and install.packages work fine using the quoted path name syntax, i.e.,

R CMD install /Users/foo/Projects/R\ library/bar/eyetrackR
install.packages("~/Projects/R library/bar/eyetrackR", repos = NULL, type = "source")

Is this a known problem? I searched the archives, but did not find a decisive answer (only some rather old posts suggesting not to use path names containing spaces--unfortunately this is not an option in the managed Windows environment I need to work in next week).

Sorry for the long post and thanks for your time,
Jochen

----
Jochen Laubrock, Dept. of Psychology, University of Potsdam,
Karl-Liebknecht-Strasse 24-25, 14476 Potsdam, Germany
phone: +49-331-977-2346, fax: +49-331-977-2793


From ripley at stats.ox.ac.uk  Fri Mar 26 10:19:49 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 26 Mar 2010 09:19:49 +0000 (GMT)
Subject: [Rd] R CMD install: problem quoting spaces when calling gzip?
In-Reply-To: <3562FDA4-056E-412B-91CB-40757A16490B@gmail.com>
References: <3562FDA4-056E-412B-91CB-40757A16490B@gmail.com>
Message-ID: <alpine.LFD.2.00.1003260912070.489@gannet.stats.ox.ac.uk>

You haven't told us your version of R (nor any of the other 
information requested in the posting guide).  As far as I can see this 
works in 2.11.0 alpha.

On Fri, 26 Mar 2010, jochen laubrock wrote:

> There appears to be a quoting problem in the way R CMD install handles file names containing spaces, more specifically, in the way the argument is passed through to gzip.
>
> The install.packages command
>
> (from R)
> install.packages("~/Projects/R library/bar/eyetrackR_0.13.tar.gz", repos = NULL, type = "source")
>
> expands to
>
> system("R_LIBS='/Users/foo/Library/R/2.10/library' "/Library/Frameworks/R.framework/Resources/bin/R CMD INSTALL -l '/Users/foo/Library/R/2.10/library'   '/Users/foo/Projects/R\ library/bar/eyetrackR_0.13.tar.gz'")

So that is fine.

>
> and gives the same error messages as the following commands from Terminal.app on Mac OS X
>
> (from bash)
> R CMD install /Users/foo/Projects/R\ library/bar/eyetrackR_0.13.tar.gz
> R CMD install "~/Projects/R library/bar/eyetrackR_0.13.tar.gz"
> R CMD install '~/Projects/R library/bar/eyetrackR_0.13.tar.gz'

the documented command is INSTALL.

> , namely (the error messages):
>
> gzip: /Users/foo/Projects/R.gz: No such file or directory
> gzip: library/bar/eyetrackR_0.13.tar.gz: No such file or directory

Yes, and INSTALL is not designed to work with paths with spaces in on 
Unix-alikes.

>
> The following commands do work
>
> (from R)
> setwd("~/Projects/R library/bar/")
> install.packages("eyetrackR_0.13.tar.gz", repos = NULL, type = "source")
>
> (from bash)
> cd ~/Projects/R\ library/bar/
> R CMD install eyetrackR_0.13.tar.gz
>
> Interestingly, if the file is unpacked on the command line (tar xzvf), then both R CMD install and install.packages work fine using the quoted path name syntax, i.e.,
>
> R CMD install /Users/foo/Projects/R\ library/bar/eyetrackR
> install.packages("~/Projects/R library/bar/eyetrackR", repos = NULL, type = "source")
>
> Is this a known problem?

It is a known restriction.

> I searched the archives, but did not find a decisive answer (only 
some rather old posts suggesting not to use path names containing spaces--unfortunately this is not an option in the managed Windows environment I need to work in next week).
>
> Sorry for the long post and thanks for your time,
> Jochen
>
> ----
> Jochen Laubrock, Dept. of Psychology, University of Potsdam,
> Karl-Liebknecht-Strasse 24-25, 14476 Potsdam, Germany
> phone: +49-331-977-2346, fax: +49-331-977-2793
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jochen.laubrock at gmail.com  Fri Mar 26 11:05:27 2010
From: jochen.laubrock at gmail.com (jochen laubrock)
Date: Fri, 26 Mar 2010 11:05:27 +0100
Subject: [Rd] R CMD install: problem quoting spaces when calling gzip?
In-Reply-To: <alpine.LFD.2.00.1003260912070.489@gannet.stats.ox.ac.uk>
References: <3562FDA4-056E-412B-91CB-40757A16490B@gmail.com>
	<alpine.LFD.2.00.1003260912070.489@gannet.stats.ox.ac.uk>
Message-ID: <00E4678E-90DF-472F-B860-87288D94CBA2@gmail.com>

I am sorry, this was from 2.10.1 on Mac OS X 10.6, so it might be Mac-specific. The behavior is reproducible both from the shell and the GUI version of R (sessionInfo output below). It does not seem to depend on the particular package: it can be reproduced by downloading an archive of a package from CRAN to a path containing spaces and calling
install.packages("path/with spaces/downloadedPackage.tar.gz", repos = NULL, type = "source"):

> print(dl <- download.packages("gam", destdir="~/Projects/R library/tmp"))
[...] downloaded 300 Kb
     [,1]  [,2]                                   
[1,] "gam" "~/Projects/R library/tmp/gam_1.01.tgz"
> install.packages(dl[,2], repos = NULL, type = "source")
[...]
gzip: /Users/jochen/Projects/R.gz: No such file or directory
gzip: library/tmp/gam_1.01.tgz: No such file or directory
ERROR: cannot extract package from ?/Users/jochen/Projects/R library/tmp/gam_1.01.tgz?

# /usr/bin/R 
> sessionInfo()
R version 2.10.1 (2009-12-14) 
x86_64-apple-darwin9.8.0 

locale:
[1] de_DE.UTF-8/de_DE.UTF-8/C/C/de_DE.UTF-8/de_DE.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

# R.app (RAqua)
> sessionInfo()
R version 2.10.1 (2009-12-14) 
i386-apple-darwin9.8.0 

locale:
[1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base



On Mar 26, 2010, at 10:19 , Prof Brian Ripley wrote:

> You haven't told us your version of R (nor any of the other information requested in the posting guide).  As far as I can see this works in 2.11.0 alpha.
Does that mean that it has been re-designed to work with paths containing spaces on Unix-alikes?

> 
> On Fri, 26 Mar 2010, jochen laubrock wrote:
> 
>> There appears to be a quoting problem in the way R CMD install handles file names containing spaces, more specifically, in the way the argument is passed through to gzip.
>> 
>> The install.packages command
>> 
>> (from R)
>> install.packages("~/Projects/R library/bar/eyetrackR_0.13.tar.gz", repos = NULL, type = "source")
>> 
>> expands to
>> 
>> system("R_LIBS='/Users/foo/Library/R/2.10/library' "/Library/Frameworks/R.framework/Resources/bin/R CMD INSTALL -l '/Users/foo/Library/R/2.10/library'   '/Users/foo/Projects/R\ library/bar/eyetrackR_0.13.tar.gz'")
> 
> So that is fine.
> 
>> 
>> and gives the same error messages as the following commands from Terminal.app on Mac OS X
>> 
>> (from bash)
>> R CMD install /Users/foo/Projects/R\ library/bar/eyetrackR_0.13.tar.gz
>> R CMD install "~/Projects/R library/bar/eyetrackR_0.13.tar.gz"
>> R CMD install '~/Projects/R library/bar/eyetrackR_0.13.tar.gz'
> 
> the documented command is INSTALL.
sorry
> 
>> , namely (the error messages):
>> 
>> gzip: /Users/foo/Projects/R.gz: No such file or directory
>> gzip: library/bar/eyetrackR_0.13.tar.gz: No such file or directory
> 
> Yes, and INSTALL is not designed to work with paths with spaces in on Unix-alikes.
> 
>> 
>> The following commands do work
>> 
>> (from R)
>> setwd("~/Projects/R library/bar/")
>> install.packages("eyetrackR_0.13.tar.gz", repos = NULL, type = "source")
>> 
>> (from bash)
>> cd ~/Projects/R\ library/bar/
>> R CMD install eyetrackR_0.13.tar.gz
>> 
>> Interestingly, if the file is unpacked on the command line (tar xzvf), then both R CMD install and install.packages work fine using the quoted path name syntax, i.e.,
>> 
>> R CMD install /Users/foo/Projects/R\ library/bar/eyetrackR
>> install.packages("~/Projects/R library/bar/eyetrackR", repos = NULL, type = "source")
>> 
>> Is this a known problem?
> 
> It is a known restriction.
> 
>> I searched the archives, but did not find a decisive answer (only 
> some rather old posts suggesting not to use path names containing spaces--unfortunately this is not an option in the managed Windows environment I need to work in next week).
>> 
>> Sorry for the long post and thanks for your time,
>> Jochen
>> 
>> ----
>> Jochen Laubrock, Dept. of Psychology, University of Potsdam,
>> Karl-Liebknecht-Strasse 24-25, 14476 Potsdam, Germany
>> phone: +49-331-977-2346, fax: +49-331-977-2793
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>> 
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Fri Mar 26 11:51:32 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 26 Mar 2010 10:51:32 +0000 (GMT)
Subject: [Rd] R CMD install: problem quoting spaces when calling gzip?
In-Reply-To: <00E4678E-90DF-472F-B860-87288D94CBA2@gmail.com>
References: <3562FDA4-056E-412B-91CB-40757A16490B@gmail.com>
	<alpine.LFD.2.00.1003260912070.489@gannet.stats.ox.ac.uk>
	<00E4678E-90DF-472F-B860-87288D94CBA2@gmail.com>
Message-ID: <alpine.LFD.2.00.1003261031240.2650@localhost>

So please try 2.11.0 alpha, as I believe this is already fixed (not 
least, gzip is not called on that platform).  Also, I suspect setting 
the envir variable TAR to 'internal' would work on 2.10.1 (but my 
Mac is at home).

Another thing that does not work with spaces in file names is 
command-line completion of filenames (in R, I did not try R.app).  If 
spaces in filenames work (other than on Windows) it is somewhat 
accidental.  Reports of instances where they do not, with patches 
against current sources, would be considered but as low priority.

BTW, 'install' works on case-insensitive file systems, but it is 
likely to stop working at any time: as on Windows, 'R CMD' is being 
moved away from Perl/sh scripts to direct use of R.

On Fri, 26 Mar 2010, jochen laubrock wrote:

> I am sorry, this was from 2.10.1 on Mac OS X 10.6, so it might be Mac-specific.

I did try it on a Mac, but I did not try 2.10.1, since the 'upgrade 
before posting' request in the posting guide did apply, and we are 
busy enough with 2.11.0 alpha.

The behavior is reproducible both from the shell and the GUI version of R (sessionInfo output below). It does not seem to depend on the particular package: it can be reproduced by downloading an archive of a package from CRAN to a path containing spaces and calling
> install.packages("path/with spaces/downloadedPackage.tar.gz", repos = NULL, type = "source"):
>
>> print(dl <- download.packages("gam", destdir="~/Projects/R library/tmp"))
> [...] downloaded 300 Kb
>     [,1]  [,2]
> [1,] "gam" "~/Projects/R library/tmp/gam_1.01.tgz"
>> install.packages(dl[,2], repos = NULL, type = "source")
> [...]
> gzip: /Users/jochen/Projects/R.gz: No such file or directory
> gzip: library/tmp/gam_1.01.tgz: No such file or directory
> ERROR: cannot extract package from ?/Users/jochen/Projects/R library/tmp/gam_1.01.tgz?
>
> # /usr/bin/R
>> sessionInfo()
> R version 2.10.1 (2009-12-14)
> x86_64-apple-darwin9.8.0
>
> locale:
> [1] de_DE.UTF-8/de_DE.UTF-8/C/C/de_DE.UTF-8/de_DE.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> # R.app (RAqua)
>> sessionInfo()
> R version 2.10.1 (2009-12-14)
> i386-apple-darwin9.8.0
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
>
>
> On Mar 26, 2010, at 10:19 , Prof Brian Ripley wrote:
>
>> You haven't told us your version of R (nor any of the other 
>> information requested in the posting guide).  As far as I can see 
>> this works in 2.11.0 alpha.

> Does that mean that it has been re-designed to work with paths 
> containing spaces on Unix-alikes?

No.  It is an unintentional side-effect of

     o   R CMD INSTALL now uses the internal untar() in package utils:
         this ensures that all platforms can install bzip2- and
         xz-compressed tarballs.

>>
>> On Fri, 26 Mar 2010, jochen laubrock wrote:
>>
>>> There appears to be a quoting problem in the way R CMD install handles file names containing spaces, more specifically, in the way the argument is passed through to gzip.
>>>
>>> The install.packages command
>>>
>>> (from R)
>>> install.packages("~/Projects/R library/bar/eyetrackR_0.13.tar.gz", repos = NULL, type = "source")
>>>
>>> expands to
>>>
>>> system("R_LIBS='/Users/foo/Library/R/2.10/library' "/Library/Frameworks/R.framework/Resources/bin/R CMD INSTALL -l '/Users/foo/Library/R/2.10/library'   '/Users/foo/Projects/R\ library/bar/eyetrackR_0.13.tar.gz'")
>>
>> So that is fine.
>>
>>>
>>> and gives the same error messages as the following commands from Terminal.app on Mac OS X
>>>
>>> (from bash)
>>> R CMD install /Users/foo/Projects/R\ library/bar/eyetrackR_0.13.tar.gz
>>> R CMD install "~/Projects/R library/bar/eyetrackR_0.13.tar.gz"
>>> R CMD install '~/Projects/R library/bar/eyetrackR_0.13.tar.gz'
>>
>> the documented command is INSTALL.
> sorry
>>
>>> , namely (the error messages):
>>>
>>> gzip: /Users/foo/Projects/R.gz: No such file or directory
>>> gzip: library/bar/eyetrackR_0.13.tar.gz: No such file or directory
>>
>> Yes, and INSTALL is not designed to work with paths with spaces in on Unix-alikes.
>>
>>>
>>> The following commands do work
>>>
>>> (from R)
>>> setwd("~/Projects/R library/bar/")
>>> install.packages("eyetrackR_0.13.tar.gz", repos = NULL, type = "source")
>>>
>>> (from bash)
>>> cd ~/Projects/R\ library/bar/
>>> R CMD install eyetrackR_0.13.tar.gz
>>>
>>> Interestingly, if the file is unpacked on the command line (tar 
>>> xzvf), then both R CMD install and install.packages work fine 
>>> using the quoted path name syntax, i.e.,
>>>
>>> R CMD install /Users/foo/Projects/R\ library/bar/eyetrackR
>>> install.packages("~/Projects/R library/bar/eyetrackR", repos = NULL, type = "source")
>>>
>>> Is this a known problem?
>>
>> It is a known restriction.
>>
>>> I searched the archives, but did not find a decisive answer (only
>> some rather old posts suggesting not to use path names containing spaces--unfortunately this is not an option in the managed Windows environment I need to work in next week).
>>>
>>> Sorry for the long post and thanks for your time,
>>> Jochen
>>>
>>> ----
>>> Jochen Laubrock, Dept. of Psychology, University of Potsdam,
>>> Karl-Liebknecht-Strasse 24-25, 14476 Potsdam, Germany
>>> phone: +49-331-977-2346, fax: +49-331-977-2793
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>
>> --
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford,             Tel:  +44 1865 272861 (self)
>> 1 South Parks Road,                     +44 1865 272866 (PA)
>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jochen.laubrock at gmail.com  Fri Mar 26 13:24:57 2010
From: jochen.laubrock at gmail.com (jochen laubrock)
Date: Fri, 26 Mar 2010 13:24:57 +0100
Subject: [Rd] R CMD install: problem quoting spaces when calling gzip?
In-Reply-To: <alpine.LFD.2.00.1003261031240.2650@localhost>
References: <3562FDA4-056E-412B-91CB-40757A16490B@gmail.com>
	<alpine.LFD.2.00.1003260912070.489@gannet.stats.ox.ac.uk>
	<00E4678E-90DF-472F-B860-87288D94CBA2@gmail.com>
	<alpine.LFD.2.00.1003261031240.2650@localhost>
Message-ID: <CA772FCF-202F-4F2B-A9CF-9F76747EF375@gmail.com>

Yes, that worked, thanks a lot! Looking forward to the 2.11.0 release.

> install.packages("~/Projects/R Library/potsdam/eyetrackR/eyetrackR_0.13.tar.gz", repos = NULL, type = "source")
* installing *source* package ?eyetrackR? ...
** R
** data
** demo
** preparing package for lazy loading
** help
*** installing help indices
** building package indices ...
** testing if installed package can be loaded
* DONE (eyetrackR)
> library(eyetrackR)

> sessionInfo()
R version 2.11.0 alpha (2010-03-26 r51420) 
x86_64-apple-darwin10.2.0 

locale:
[1] de_DE.UTF-8/de_DE.UTF-8/C/C/de_DE.UTF-8/de_DE.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base


btw, this is probably known, but ... the gfortran in /usr/bin (gcc version 4.2.1 (Apple Inc. build 5646)) did not work (complaining about /usr/lib/libgfortran.dylib, missing required architecture x86_64), but a different gfortran located in /usr/local/bin did (gcc version 4.2.3, probably from Simon Urbanek's page)

On Mar 26, 2010, at 11:51 , Prof Brian Ripley wrote:

> So please try 2.11.0 alpha, as I believe this is already fixed (not least, gzip is not called on that platform).  Also, I suspect setting the envir variable TAR to 'internal' would work on 2.10.1 (but my Mac is at home).
> 
> Another thing that does not work with spaces in file names is command-line completion of filenames (in R, I did not try R.app).  If spaces in filenames work (other than on Windows) it is somewhat accidental.  Reports of instances where they do not, with patches against current sources, would be considered but as low priority.
> 
> BTW, 'install' works on case-insensitive file systems, but it is likely to stop working at any time: as on Windows, 'R CMD' is being moved away from Perl/sh scripts to direct use of R.
> 
> On Fri, 26 Mar 2010, jochen laubrock wrote:
> 
>> I am sorry, this was from 2.10.1 on Mac OS X 10.6, so it might be Mac-specific.
> 
> I did try it on a Mac, but I did not try 2.10.1, since the 'upgrade before posting' request in the posting guide did apply, and we are busy enough with 2.11.0 alpha.
> 
> The behavior is reproducible both from the shell and the GUI version of R (sessionInfo output below). It does not seem to depend on the particular package: it can be reproduced by downloading an archive of a package from CRAN to a path containing spaces and calling
>> install.packages("path/with spaces/downloadedPackage.tar.gz", repos = NULL, type = "source"):
>> 
>>> print(dl <- download.packages("gam", destdir="~/Projects/R library/tmp"))
>> [...] downloaded 300 Kb
>>    [,1]  [,2]
>> [1,] "gam" "~/Projects/R library/tmp/gam_1.01.tgz"
>>> install.packages(dl[,2], repos = NULL, type = "source")
>> [...]
>> gzip: /Users/jochen/Projects/R.gz: No such file or directory
>> gzip: library/tmp/gam_1.01.tgz: No such file or directory
>> ERROR: cannot extract package from ?/Users/jochen/Projects/R library/tmp/gam_1.01.tgz?
>> 
>> # /usr/bin/R
>>> sessionInfo()
>> R version 2.10.1 (2009-12-14)
>> x86_64-apple-darwin9.8.0
>> 
>> locale:
>> [1] de_DE.UTF-8/de_DE.UTF-8/C/C/de_DE.UTF-8/de_DE.UTF-8
>> 
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>> 
>> # R.app (RAqua)
>>> sessionInfo()
>> R version 2.10.1 (2009-12-14)
>> i386-apple-darwin9.8.0
>> 
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>> 
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>> 
>> 
>> 
>> On Mar 26, 2010, at 10:19 , Prof Brian Ripley wrote:
>> 
>>> You haven't told us your version of R (nor any of the other information requested in the posting guide).  As far as I can see this works in 2.11.0 alpha.
> 
>> Does that mean that it has been re-designed to work with paths containing spaces on Unix-alikes?
> 
> No.  It is an unintentional side-effect of
> 
>    o   R CMD INSTALL now uses the internal untar() in package utils:
>        this ensures that all platforms can install bzip2- and
>        xz-compressed tarballs.
> 
>>> 
>>> On Fri, 26 Mar 2010, jochen laubrock wrote:
>>> 
>>>> There appears to be a quoting problem in the way R CMD install handles file names containing spaces, more specifically, in the way the argument is passed through to gzip.
>>>> 
>>>> The install.packages command
>>>> 
>>>> (from R)
>>>> install.packages("~/Projects/R library/bar/eyetrackR_0.13.tar.gz", repos = NULL, type = "source")
>>>> 
>>>> expands to
>>>> 
>>>> system("R_LIBS='/Users/foo/Library/R/2.10/library' "/Library/Frameworks/R.framework/Resources/bin/R CMD INSTALL -l '/Users/foo/Library/R/2.10/library'   '/Users/foo/Projects/R\ library/bar/eyetrackR_0.13.tar.gz'")
>>> 
>>> So that is fine.
>>> 
>>>> 
>>>> and gives the same error messages as the following commands from Terminal.app on Mac OS X
>>>> 
>>>> (from bash)
>>>> R CMD install /Users/foo/Projects/R\ library/bar/eyetrackR_0.13.tar.gz
>>>> R CMD install "~/Projects/R library/bar/eyetrackR_0.13.tar.gz"
>>>> R CMD install '~/Projects/R library/bar/eyetrackR_0.13.tar.gz'
>>> 
>>> the documented command is INSTALL.
>> sorry
>>> 
>>>> , namely (the error messages):
>>>> 
>>>> gzip: /Users/foo/Projects/R.gz: No such file or directory
>>>> gzip: library/bar/eyetrackR_0.13.tar.gz: No such file or directory
>>> 
>>> Yes, and INSTALL is not designed to work with paths with spaces in on Unix-alikes.
>>> 
>>>> 
>>>> The following commands do work
>>>> 
>>>> (from R)
>>>> setwd("~/Projects/R library/bar/")
>>>> install.packages("eyetrackR_0.13.tar.gz", repos = NULL, type = "source")
>>>> 
>>>> (from bash)
>>>> cd ~/Projects/R\ library/bar/
>>>> R CMD install eyetrackR_0.13.tar.gz
>>>> 
>>>> Interestingly, if the file is unpacked on the command line (tar xzvf), then both R CMD install and install.packages work fine using the quoted path name syntax, i.e.,
>>>> 
>>>> R CMD install /Users/foo/Projects/R\ library/bar/eyetrackR
>>>> install.packages("~/Projects/R library/bar/eyetrackR", repos = NULL, type = "source")
>>>> 
>>>> Is this a known problem?
>>> 
>>> It is a known restriction.
>>> 
>>>> I searched the archives, but did not find a decisive answer (only
>>> some rather old posts suggesting not to use path names containing spaces--unfortunately this is not an option in the managed Windows environment I need to work in next week).
>>>> 
>>>> Sorry for the long post and thanks for your time,
>>>> Jochen
>>>> 
>>>> ----
>>>> Jochen Laubrock, Dept. of Psychology, University of Potsdam,
>>>> Karl-Liebknecht-Strasse 24-25, 14476 Potsdam, Germany
>>>> phone: +49-331-977-2346, fax: +49-331-977-2793
>>>> 
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>> 
>>> 
>>> --
>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>> 
>> 
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

----
Jochen Laubrock, Dept. of Psychology, University of Potsdam,
Karl-Liebknecht-Strasse 24-25, 14476 Potsdam, Germany
phone: +49-331-977-2346, fax: +49-331-977-2793


From simon.urbanek at r-project.org  Fri Mar 26 15:19:20 2010
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Fri, 26 Mar 2010 10:19:20 -0400
Subject: [Rd] libgfortran [Was: R CMD install: problem quoting spaces when
	calling gzip?]
In-Reply-To: <CA772FCF-202F-4F2B-A9CF-9F76747EF375@gmail.com>
References: <3562FDA4-056E-412B-91CB-40757A16490B@gmail.com>
	<alpine.LFD.2.00.1003260912070.489@gannet.stats.ox.ac.uk>
	<00E4678E-90DF-472F-B860-87288D94CBA2@gmail.com>
	<alpine.LFD.2.00.1003261031240.2650@localhost>
	<CA772FCF-202F-4F2B-A9CF-9F76747EF375@gmail.com>
Message-ID: <B08921AB-EF9B-410C-BE9B-94A48A08AE5F@r-project.org>


On Mar 26, 2010, at 8:24 , jochen laubrock wrote:

> Yes, that worked, thanks a lot! Looking forward to the 2.11.0 release.
>
>> install.packages("~/Projects/R Library/potsdam/eyetrackR/ 
>> eyetrackR_0.13.tar.gz", repos = NULL, type = "source")
> * installing *source* package ?eyetrackR? ...
> ** R
> ** data
> ** demo
> ** preparing package for lazy loading
> ** help
> *** installing help indices
> ** building package indices ...
> ** testing if installed package can be loaded
> * DONE (eyetrackR)
>> library(eyetrackR)
>
>> sessionInfo()
> R version 2.11.0 alpha (2010-03-26 r51420)
> x86_64-apple-darwin10.2.0
>
> locale:
> [1] de_DE.UTF-8/de_DE.UTF-8/C/C/de_DE.UTF-8/de_DE.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
>
> btw, this is probably known, but ... the gfortran in /usr/bin (gcc  
> version 4.2.1 (Apple Inc. build 5646)) did not work (complaining  
> about /usr/lib/libgfortran.dylib, missing required architecture  
> x86_64),


I suspect you have installed broken 3rd party Fortran at some point.  
Our apple build Fortran uses static libraries and includes all  
architectures. I would suggest removing libgfortran.dylib (and any  
other left-overs from 3rd party compilers).

Cheers,
Simon



> but a different gfortran located in /usr/local/bin did (gcc version  
> 4.2.3, probably from Simon Urbanek's page)
>
> On Mar 26, 2010, at 11:51 , Prof Brian Ripley wrote:
>
>> So please try 2.11.0 alpha, as I believe this is already fixed (not  
>> least, gzip is not called on that platform).  Also, I suspect  
>> setting the envir variable TAR to 'internal' would work on 2.10.1  
>> (but my Mac is at home).
>>
>> Another thing that does not work with spaces in file names is  
>> command-line completion of filenames (in R, I did not try R.app).   
>> If spaces in filenames work (other than on Windows) it is somewhat  
>> accidental.  Reports of instances where they do not, with patches  
>> against current sources, would be considered but as low priority.
>>
>> BTW, 'install' works on case-insensitive file systems, but it is  
>> likely to stop working at any time: as on Windows, 'R CMD' is being  
>> moved away from Perl/sh scripts to direct use of R.
>>
>> On Fri, 26 Mar 2010, jochen laubrock wrote:
>>
>>> I am sorry, this was from 2.10.1 on Mac OS X 10.6, so it might be  
>>> Mac-specific.
>>
>> I did try it on a Mac, but I did not try 2.10.1, since the 'upgrade  
>> before posting' request in the posting guide did apply, and we are  
>> busy enough with 2.11.0 alpha.
>>
>> The behavior is reproducible both from the shell and the GUI  
>> version of R (sessionInfo output below). It does not seem to depend  
>> on the particular package: it can be reproduced by downloading an  
>> archive of a package from CRAN to a path containing spaces and  
>> calling
>>> install.packages("path/with spaces/downloadedPackage.tar.gz",  
>>> repos = NULL, type = "source"):
>>>
>>>> print(dl <- download.packages("gam", destdir="~/Projects/R  
>>>> library/tmp"))
>>> [...] downloaded 300 Kb
>>>   [,1]  [,2]
>>> [1,] "gam" "~/Projects/R library/tmp/gam_1.01.tgz"
>>>> install.packages(dl[,2], repos = NULL, type = "source")
>>> [...]
>>> gzip: /Users/jochen/Projects/R.gz: No such file or directory
>>> gzip: library/tmp/gam_1.01.tgz: No such file or directory
>>> ERROR: cannot extract package from ?/Users/jochen/Projects/R  
>>> library/tmp/gam_1.01.tgz?
>>>
>>> # /usr/bin/R
>>>> sessionInfo()
>>> R version 2.10.1 (2009-12-14)
>>> x86_64-apple-darwin9.8.0
>>>
>>> locale:
>>> [1] de_DE.UTF-8/de_DE.UTF-8/C/C/de_DE.UTF-8/de_DE.UTF-8
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>> # R.app (RAqua)
>>>> sessionInfo()
>>> R version 2.10.1 (2009-12-14)
>>> i386-apple-darwin9.8.0
>>>
>>> locale:
>>> [1] en_US.UTF-8/en_US.UTF-8/C/C/en_US.UTF-8/en_US.UTF-8
>>>
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>>
>>>
>>> On Mar 26, 2010, at 10:19 , Prof Brian Ripley wrote:
>>>
>>>> You haven't told us your version of R (nor any of the other  
>>>> information requested in the posting guide).  As far as I can see  
>>>> this works in 2.11.0 alpha.
>>
>>> Does that mean that it has been re-designed to work with paths  
>>> containing spaces on Unix-alikes?
>>
>> No.  It is an unintentional side-effect of
>>
>>   o   R CMD INSTALL now uses the internal untar() in package utils:
>>       this ensures that all platforms can install bzip2- and
>>       xz-compressed tarballs.
>>
>>>>
>>>> On Fri, 26 Mar 2010, jochen laubrock wrote:
>>>>
>>>>> There appears to be a quoting problem in the way R CMD install  
>>>>> handles file names containing spaces, more specifically, in the  
>>>>> way the argument is passed through to gzip.
>>>>>
>>>>> The install.packages command
>>>>>
>>>>> (from R)
>>>>> install.packages("~/Projects/R library/bar/ 
>>>>> eyetrackR_0.13.tar.gz", repos = NULL, type = "source")
>>>>>
>>>>> expands to
>>>>>
>>>>> system("R_LIBS='/Users/foo/Library/R/2.10/library' "/Library/ 
>>>>> Frameworks/R.framework/Resources/bin/R CMD INSTALL -l '/Users/ 
>>>>> foo/Library/R/2.10/library'   '/Users/foo/Projects/R\ library/ 
>>>>> bar/eyetrackR_0.13.tar.gz'")
>>>>
>>>> So that is fine.
>>>>
>>>>>
>>>>> and gives the same error messages as the following commands from  
>>>>> Terminal.app on Mac OS X
>>>>>
>>>>> (from bash)
>>>>> R CMD install /Users/foo/Projects/R\ library/bar/ 
>>>>> eyetrackR_0.13.tar.gz
>>>>> R CMD install "~/Projects/R library/bar/eyetrackR_0.13.tar.gz"
>>>>> R CMD install '~/Projects/R library/bar/eyetrackR_0.13.tar.gz'
>>>>
>>>> the documented command is INSTALL.
>>> sorry
>>>>
>>>>> , namely (the error messages):
>>>>>
>>>>> gzip: /Users/foo/Projects/R.gz: No such file or directory
>>>>> gzip: library/bar/eyetrackR_0.13.tar.gz: No such file or directory
>>>>
>>>> Yes, and INSTALL is not designed to work with paths with spaces  
>>>> in on Unix-alikes.
>>>>
>>>>>
>>>>> The following commands do work
>>>>>
>>>>> (from R)
>>>>> setwd("~/Projects/R library/bar/")
>>>>> install.packages("eyetrackR_0.13.tar.gz", repos = NULL, type =  
>>>>> "source")
>>>>>
>>>>> (from bash)
>>>>> cd ~/Projects/R\ library/bar/
>>>>> R CMD install eyetrackR_0.13.tar.gz
>>>>>
>>>>> Interestingly, if the file is unpacked on the command line (tar  
>>>>> xzvf), then both R CMD install and install.packages work fine  
>>>>> using the quoted path name syntax, i.e.,
>>>>>
>>>>> R CMD install /Users/foo/Projects/R\ library/bar/eyetrackR
>>>>> install.packages("~/Projects/R library/bar/eyetrackR", repos =  
>>>>> NULL, type = "source")
>>>>>
>>>>> Is this a known problem?
>>>>
>>>> It is a known restriction.
>>>>
>>>>> I searched the archives, but did not find a decisive answer (only
>>>> some rather old posts suggesting not to use path names containing  
>>>> spaces--unfortunately this is not an option in the managed  
>>>> Windows environment I need to work in next week).
>>>>>
>>>>> Sorry for the long post and thanks for your time,
>>>>> Jochen
>>>>>
>>>>> ----
>>>>> Jochen Laubrock, Dept. of Psychology, University of Potsdam,
>>>>> Karl-Liebknecht-Strasse 24-25, 14476 Potsdam, Germany
>>>>> phone: +49-331-977-2346, fax: +49-331-977-2793
>>>>>
>>>>> ______________________________________________
>>>>> R-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>
>>>>
>>>> --
>>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/ 
>>>> ~ripley/
>>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>>
>>>
>>
>> -- 
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford,             Tel:  +44 1865 272861 (self)
>> 1 South Parks Road,                     +44 1865 272866 (PA)
>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> ----
> Jochen Laubrock, Dept. of Psychology, University of Potsdam,
> Karl-Liebknecht-Strasse 24-25, 14476 Potsdam, Germany
> phone: +49-331-977-2346, fax: +49-331-977-2793
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>


From peter.ruckdeschel at web.de  Fri Mar 26 23:16:08 2010
From: peter.ruckdeschel at web.de (Peter Ruckdeschel)
Date: Fri, 26 Mar 2010 23:16:08 +0100
Subject: [Rd] : Operator overloading for custom classes
In-Reply-To: <7021740b1003230137y460ffd11nae0855f026b1997@mail.gmail.com>
References: <7021740b1003230137y460ffd11nae0855f026b1997@mail.gmail.com>
Message-ID: <4BAD3228.8090200@web.de>

> 
> I need some help to get some of the object orientation, specifically the
> methods that overload the basic arithmetic operations, from sample C++
> code to R. I don't have experience with such advanced language features
> inside of R. So I was wondering if some of you could help me out in this
> regard.
> 
> I have written a simple demonstration of a forward mode automatic
> differentiator in C++ and it is currently hosted on github:
> http://github.com/quantumelixir/ad-demo/blob/master/simple.cpp. It uses
> simple operator overloading techniques to modify the meaning of the
> basic arithmetic operations (+, -, *, /) for the "derivative" type Dual
> number class that I have defined. Could you show me how this could be
> equivalently done in R? I want to know how to define custom classes and
> define the meaning of arithmetic for them.
> 
> I had checked for operator overloading in R but could only find the
> equivalence of a + b and '+'(a, b) in the R language definition. Could
> you show how I could extend the simple object oriented-ness in the C++
> code neatly to R?
> 
> Thanks a bunch!
> Chillu
> 
> 	[[alternative HTML version deleted]]
> 

First of all you should read about S4 classes, in particular
the books of John Chambers should be helpful ;-)
(others on this list might point you to further sources).

The key is to define S4 classes for your operands
[i.e; if I have understood correctly you would implement
your Dual number class as S4 class].

Then you would define new methods by setMethod().

Not sure whether this gives you the indications you look for,
but we have overloaded arithmetic operators to act on distribution
classes in package distr (cf CRAN, developped under r-forge).
You might want to look at the code in NormalDistribution.R resp.
ContDistribution.R

HTH Peter Ruckdeschel


From quantumelixir at gmail.com  Sat Mar 27 08:22:03 2010
From: quantumelixir at gmail.com (Chidambaram Annamalai)
Date: Sat, 27 Mar 2010 12:52:03 +0530
Subject: [Rd] : Operator overloading for custom classes
In-Reply-To: <4BAD3228.8090200@web.de>
References: <7021740b1003230137y460ffd11nae0855f026b1997@mail.gmail.com>
	<4BAD3228.8090200@web.de>
Message-ID: <7021740b1003270022q5e3bf94dt4ac24abbbf463001@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100327/9f34d905/attachment.pl>

From hb at stat.berkeley.edu  Sat Mar 27 15:02:41 2010
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Sat, 27 Mar 2010 15:02:41 +0100
Subject: [Rd] Suggestion: Not having to export .conflicts.OK in name
	spaces
In-Reply-To: <4BA79C7E.3040701@userprimary.net>
References: <59d7961d1003170911o38814b59h3fdb4de42e21b723@mail.gmail.com>
	<4BA3E2D5.5050305@userprimary.net>
	<19367.19767.308713.426235@lynne.math.ethz.ch>
	<4BA79C7E.3040701@userprimary.net>
Message-ID: <59d7961d1003270702s22da7b37k355d67bd9d4f6bc7@mail.gmail.com>

Hi.

On Mon, Mar 22, 2010 at 5:36 PM, Seth Falcon <seth at userprimary.net> wrote:
> On 3/22/10 3:57 AM, Martin Maechler wrote:
>>>>>>>
>>>>>>> "SF" == Seth Falcon<seth at userprimary.net>
>>>>>>> ? ? on Fri, 19 Mar 2010 13:47:17 -0700 writes:
>>
>> ? ? SF> ?On 3/17/10 9:11 AM, Henrik Bengtsson wrote:
>> ? ? >> ?Currently library() and attach() fail to locate an
>> ? ? >> ?existing '.conflicts.OK' in a package wit name space,
>> ? ? >> ?unless it is exported. ?Since there should be little
>> ? ? >> ?interest in exporting '.conflicts.OK' otherwise, one may
>> ? ? >> ?argue that those methods should look for '.conflicts.OK'
>> ? ? >> ?even if it is not exported.
>>
>> ? ? SF> ?I guess I agree that there is no real value in forcing
>> ? ? SF> ?.conflicts.OK to be exported.
>> so do I.
>
> So I guess we agree that Henrik's patch would be worth applying.
>
> @Henrik: if you resend your patch with the additions for attach, I will see
> about putting it in.

When looking more carefully at base::attach(), I see that there is
nothing to do, because attach() takes a data.frame, a list, an
environment, NULL, or a file saved using base::save().  None of these
can have a name space.

The scenario I was "worrying about" was when you attach() the
environment of a package with a namespace, e.g.

envir <- as.environment("package:graphics");
envir2 <- attach(envir, name="foo");
ls(envir=envir2, all.names=TRUE);

but to the best of my understanding it is only exported objects that
are attached, i.e. if .conflicts.OK is not exported by the package,
then it won't be attached and hence not exist either way.  Is that
correct?

envir <- as.environment("package:R.utils");
envir2 <- attach(envir, name="foo");
ls(envir=envir2, all.names=TRUE);

>
>>
>> ? ? SF> ?OTOH, this seems like a dubious feature to begin. ?When
>> ? ? SF> ?is it a good idea to use it?
>>
>> in cases, the package author thinks (s)he knows what (s)he is
>> doing;
>> e.g. in the case of Matrix, I could argue that I know about the
>> current conflicts, and I would *not* want the users of my
>> package be intimidated by warnings about maskings...
>
> I can't say that this convinces me that .conflicts.OK is OK. ?Are there
> package authors who realize they do not know what they are doing enough to
> keep the warning messages :-P

I define throw.default() in R.methodsS3:

> R.methodsS3::throw.default
function (...)
{
    stop(...)
}
<environment: namespace:R.methodsS3>

In R.oo, which loads R.methodsS3, I override this with:

> R.oo::throw.default
function (...)
{
    throw(Exception(...))
}
<environment: namespace:R.oo>

The Exception class is defined in R.oo.  If someone loads R.methodsS3
alone, you get a throw() method.  Someone loading R.oo will get the a
throw() that is backward compatible but with some extra bells and
whistles recording the strack trace etc.  This is an intended design.

So when I load R.oo, I don't want the warning of overloading throw()
in R.methodsS3.  Is there an alternative for me?

Ideally, there should be a way to specify which objects are "ok",
instead of all or none.

Thanks

Henrik

>
> + seth
>
> --
> Seth Falcon | @sfalcon | http://userprimary.net/
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From cgenolin at u-paris10.fr  Sat Mar 27 15:12:29 2010
From: cgenolin at u-paris10.fr (Christophe Genolini)
Date: Sat, 27 Mar 2010 15:12:29 +0100
Subject: [Rd] Using SVN + SSH on windows
Message-ID: <4BAE124D.6000406@u-paris10.fr>

Hi the list,
I try to use R-Forge for developping a projet. I am using tortoise SVN 
(last version) but I do not manage to Commit. I read the R-Forge user 
Manual and some post on  but I do not manage to find the solution. Here 
is what I did:

 1/ I download 'puttygen.exe'. I generate a key (256 bits).
 2/ I save the private key in a file 'private.ppk' on my computer.
 3/ I copy-paste the public key on sourceforge
ssh-rsa 
AAAAB3NzaC1yc2EAAAABJQAAACEAobwycGGZrMZ39i7Vtrdk3ahN1hVw/tPoiShJGk1xjRs= 
rsa-key-20100327
 4/ I wait two hours.
 5/ On my computer, I run 'pageant.exe'.
 6/ I click on 'Add key'. I load the file 'private.ppk'
 7/ I close 'pageant.exe' (still actif in the task bar).
 8/ I open explorer. I create a directory that is suppose to be the 
local directoy for the projet.
 9/ I right-click on the directory. I open 'SVN checkout'
 10/ In 'URL of  repository:', I write : 
'svn+ssh://christophe at svn.r-forge.r-project.org/svnroot/kml3d'
(christophe is my accoung, kml3d is the project)
And...

...nothing happen. No bug, not warning, nothing.

I try several things: if I do 
'svn://christophe at svn.r-forge.r-project.org/svnroot/kml3d', I do manage 
to download the project. But then, I do not manage to upload some 
modification.

I also see on some tutorial that we might need putty.exe or plink.exe. I 
download them, but R-Forge user Manual do not mention them.

Any idea of what goes wrong ?

Thanks
Christophe


From ligges at statistik.tu-dortmund.de  Sat Mar 27 16:59:57 2010
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 27 Mar 2010 16:59:57 +0100
Subject: [Rd] Using SVN + SSH on windows
In-Reply-To: <4BAE124D.6000406@u-paris10.fr>
References: <4BAE124D.6000406@u-paris10.fr>
Message-ID: <4BAE2B7D.8060800@statistik.tu-dortmund.de>

 From my memory: I guess you need to tell TortoiseSVN to use plink as 
your ssh client. I do not use putty myself hence cannot look into the 
details here.

Uwe Ligges






On 27.03.2010 15:12, Christophe Genolini wrote:
> Hi the list,
> I try to use R-Forge for developping a projet. I am using tortoise SVN
> (last version) but I do not manage to Commit. I read the R-Forge user
> Manual and some post on but I do not manage to find the solution. Here
> is what I did:
>
> 1/ I download 'puttygen.exe'. I generate a key (256 bits).
> 2/ I save the private key in a file 'private.ppk' on my computer.
> 3/ I copy-paste the public key on sourceforge
> ssh-rsa
> AAAAB3NzaC1yc2EAAAABJQAAACEAobwycGGZrMZ39i7Vtrdk3ahN1hVw/tPoiShJGk1xjRs=
> rsa-key-20100327
> 4/ I wait two hours.
> 5/ On my computer, I run 'pageant.exe'.
> 6/ I click on 'Add key'. I load the file 'private.ppk'
> 7/ I close 'pageant.exe' (still actif in the task bar).
> 8/ I open explorer. I create a directory that is suppose to be the local
> directoy for the projet.
> 9/ I right-click on the directory. I open 'SVN checkout'
> 10/ In 'URL of repository:', I write :
> 'svn+ssh://christophe at svn.r-forge.r-project.org/svnroot/kml3d'
> (christophe is my accoung, kml3d is the project)
> And...
>
> ...nothing happen. No bug, not warning, nothing.
>
> I try several things: if I do
> 'svn://christophe at svn.r-forge.r-project.org/svnroot/kml3d', I do manage
> to download the project. But then, I do not manage to upload some
> modification.
>
> I also see on some tutorial that we might need putty.exe or plink.exe. I
> download them, but R-Forge user Manual do not mention them.
>
> Any idea of what goes wrong ?
>
> Thanks
> Christophe
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From hb at stat.berkeley.edu  Sat Mar 27 17:47:08 2010
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Sat, 27 Mar 2010 17:47:08 +0100
Subject: [Rd] Using SVN + SSH on windows
In-Reply-To: <4BAE124D.6000406@u-paris10.fr>
References: <4BAE124D.6000406@u-paris10.fr>
Message-ID: <59d7961d1003270947l1f828f5alfd7b7f2195702b22@mail.gmail.com>

On Sat, Mar 27, 2010 at 3:12 PM, Christophe Genolini
<cgenolin at u-paris10.fr> wrote:
> Hi the list,
> I try to use R-Forge for developping a projet. I am using tortoise SVN (last
> version) but I do not manage to Commit. I read the R-Forge user Manual and
> some post on ?but I do not manage to find the solution. Here is what I did:
>
> 1/ I download 'puttygen.exe'. I generate a key (256 bits).
> 2/ I save the private key in a file 'private.ppk' on my computer.
> 3/ I copy-paste the public key on sourceforge
> ssh-rsa
> AAAAB3NzaC1yc2EAAAABJQAAACEAobwycGGZrMZ39i7Vtrdk3ahN1hVw/tPoiShJGk1xjRs=
> rsa-key-20100327
> 4/ I wait two hours.
> 5/ On my computer, I run 'pageant.exe'.
> 6/ I click on 'Add key'. I load the file 'private.ppk'
> 7/ I close 'pageant.exe' (still actif in the task bar).
> 8/ I open explorer. I create a directory that is suppose to be the local
> directoy for the projet.
> 9/ I right-click on the directory. I open 'SVN checkout'
> 10/ In 'URL of ?repository:', I write :
> 'svn+ssh://christophe at svn.r-forge.r-project.org/svnroot/kml3d'
> (christophe is my accoung, kml3d is the project)
> And...
>
> ...nothing happen. No bug, not warning, nothing.
>
> I try several things: if I do
> 'svn://christophe at svn.r-forge.r-project.org/svnroot/kml3d', I do manage to
> download the project. But then, I do not manage to upload some modification.

All looks ok, but I think you are using the wrong protocol.  It should
be 'svn+ssh' for *commits*, i.e.

svn+ssh://christophe at svn.r-forge.r-project.org/svnroot/kml3d

which *is* shown at http://r-forge.r-project.org/scm/?group_id=727

/Henrik

PS. Don't think you need plink, but I might be wrong.

>
> I also see on some tutorial that we might need putty.exe or plink.exe. I
> download them, but R-Forge user Manual do not mention them.
>
> Any idea of what goes wrong ?
>
> Thanks
> Christophe
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From hb at stat.berkeley.edu  Sat Mar 27 18:00:25 2010
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Sat, 27 Mar 2010 18:00:25 +0100
Subject: [Rd] Using SVN + SSH on windows
In-Reply-To: <59d7961d1003270947l1f828f5alfd7b7f2195702b22@mail.gmail.com>
References: <4BAE124D.6000406@u-paris10.fr>
	<59d7961d1003270947l1f828f5alfd7b7f2195702b22@mail.gmail.com>
Message-ID: <59d7961d1003271000y3892df22p7b49a3b0db16424e@mail.gmail.com>

2010/3/27 hb <hb at stat.berkeley.edu>:
> On Sat, Mar 27, 2010 at 3:12 PM, Christophe Genolini <cgenolin at u-paris10.fr> wrote:
>> Hi the list,
>> I try to use R-Forge for developping a projet. I am using tortoise SVN (last
>> version) but I do not manage to Commit. I read the R-Forge user Manual and
>> some post on ?but I do not manage to find the solution. Here is what I did:
>>
>> 1/ I download 'puttygen.exe'. I generate a key (256 bits).
>> 2/ I save the private key in a file 'private.ppk' on my computer.
>> 3/ I copy-paste the public key on sourceforge
>> ssh-rsa
>> AAAAB3NzaC1yc2EAAAABJQAAACEAobwycGGZrMZ39i7Vtrdk3ahN1hVw/tPoiShJGk1xjRs=
>> rsa-key-20100327
>> 4/ I wait two hours.
>> 5/ On my computer, I run 'pageant.exe'.
>> 6/ I click on 'Add key'. I load the file 'private.ppk'
>> 7/ I close 'pageant.exe' (still actif in the task bar).
>> 8/ I open explorer. I create a directory that is suppose to be the local
>> directoy for the projet.
>> 9/ I right-click on the directory. I open 'SVN checkout'
>> 10/ In 'URL of ?repository:', I write :
>> 'svn+ssh://christophe at svn.r-forge.r-project.org/svnroot/kml3d'
>> (christophe is my accoung, kml3d is the project)
>> And...
>>
>> ...nothing happen. No bug, not warning, nothing.
>>
>> I try several things: if I do
>> 'svn://christophe at svn.r-forge.r-project.org/svnroot/kml3d', I do manage to
>> download the project. But then, I do not manage to upload some modification.
>
> All looks ok, but I think you are using the wrong protocol. It should be 'svn+ssh' for *commits*, i.e.
>
> svn+ssh://christophe at svn.r-forge.r-project.org/svnroot/kml3d
>
> which *is* shown at http://r-forge.r-project.org/scm/?group_id=727

Sorry, I missed that you've tried that (I scrolled past it on my small screen).

- When you generated a key in PUTTYgen, did you enter a passphrase?  I
think you have to leave that blank.

- Make sure not to have any newlines/spaces in the key, when you paste
it, that is, you should have:

Line 1: ssh-rsa
Line 2: <long key>

You can have multiple entries as the above.

- You need to checkout with the svn+ssh URL, because that it is what
TortoiseSVN will use for commits (unless you do "relocate").  If you
can checkout using this protocol, you should be able to commit.  Thus,
focus your troubleshooting on checking out.

- In the "Default Settings" PuTTY Configurations, make sure "Attempt
authentication using Pageant" is checked under the Connection -> SSH
-> Auth panel.

- Make sure Pageant lists the key in its dialog.

Does it work?

/Henrik

>
> /Henrik
>
> PS. Don't think you need plink, but I might be wrong.
>
>>
>> I also see on some tutorial that we might need putty.exe or plink.exe. I
>> download them, but R-Forge user Manual do not mention them.
>>
>> Any idea of what goes wrong ?
>>
>> Thanks
>> Christophe
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
>


From cgenolin at u-paris10.fr  Sat Mar 27 18:17:49 2010
From: cgenolin at u-paris10.fr (Christophe Genolini)
Date: Sat, 27 Mar 2010 18:17:49 +0100
Subject: [Rd] Using SVN + SSH on windows
In-Reply-To: <59d7961d1003271000y3892df22p7b49a3b0db16424e@mail.gmail.com>
References: <4BAE124D.6000406@u-paris10.fr>	
	<59d7961d1003270947l1f828f5alfd7b7f2195702b22@mail.gmail.com>
	<59d7961d1003271000y3892df22p7b49a3b0db16424e@mail.gmail.com>
Message-ID: <4BAE3DBD.1000501@u-paris10.fr>

Henrik Bengtsson a ?crit :
> 2010/3/27 hb <hb at stat.berkeley.edu>:
>   
>> On Sat, Mar 27, 2010 at 3:12 PM, Christophe Genolini <cgenolin at u-paris10.fr> wrote:
>>     
>>> Hi the list,
>>> I try to use R-Forge for developping a projet. I am using tortoise SVN (last
>>> version) but I do not manage to Commit. I read the R-Forge user Manual and
>>> some post on  but I do not manage to find the solution. Here is what I did:
>>>
>>> 1/ I download 'puttygen.exe'. I generate a key (256 bits).
>>> 2/ I save the private key in a file 'private.ppk' on my computer.
>>> 3/ I copy-paste the public key on sourceforge
>>> ssh-rsa
>>> AAAAB3NzaC1yc2EAAAABJQAAACEAobwycGGZrMZ39i7Vtrdk3ahN1hVw/tPoiShJGk1xjRs=
>>> rsa-key-20100327
>>> 4/ I wait two hours.
>>> 5/ On my computer, I run 'pageant.exe'.
>>> 6/ I click on 'Add key'. I load the file 'private.ppk'
>>> 7/ I close 'pageant.exe' (still actif in the task bar).
>>> 8/ I open explorer. I create a directory that is suppose to be the local
>>> directoy for the projet.
>>> 9/ I right-click on the directory. I open 'SVN checkout'
>>> 10/ In 'URL of  repository:', I write :
>>> 'svn+ssh://christophe at svn.r-forge.r-project.org/svnroot/kml3d'
>>> (christophe is my accoung, kml3d is the project)
>>> And...
>>>
>>> ...nothing happen. No bug, not warning, nothing.
>>>
>>> I try several things: if I do
>>> 'svn://christophe at svn.r-forge.r-project.org/svnroot/kml3d', I do manage to
>>> download the project. But then, I do not manage to upload some modification.
>>>       
>> All looks ok, but I think you are using the wrong protocol. It should be 'svn+ssh' for *commits*, i.e.
>>
>> svn+ssh://christophe at svn.r-forge.r-project.org/svnroot/kml3d
>>
>> which *is* shown at http://r-forge.r-project.org/scm/?group_id=727
>>     
>
>   
Now, in addition, I configure putty as Uwe advice me. I follow the 
tutorial http://www.mono-project.com/Putty_and_TortoiseSvn
> Sorry, I missed that you've tried that (I scrolled past it on my small screen).
>
> - When you generated a key in PUTTYgen, did you enter a passphrase?  I
> think you have to leave that blank.
>
> - Make sure not to have any newlines/spaces in the key, when you paste
> it, that is, you should have:
>
> Line 1: ssh-rsa
> Line 2: <long key>
>   
On two line ? On R-forge, they say "/Make sure there are no line breaks 
except between keys."/
> You can have multiple entries as the above.
>
> - You need to checkout with the svn+ssh URL, because that it is what
> TortoiseSVN will use for commits (unless you do "relocate").  If you
> can checkout using this protocol, you should be able to commit.  Thus,
> focus your troubleshooting on checking out.
>
> - In the "Default Settings" PuTTY Configurations, make sure "Attempt
> authentication using Pageant" is checked under the Connection -> SSH
> -> Auth panel.
>   
I did
> - Make sure Pageant lists the key in its dialog.
>
>   
It is.

> Does it work?
>
>   
No. In "putty", I get :
"login as: christophe"

Then a pop up say : "Assertion failed!
Program:...\pageant.exe
File: ..\sshrsa.c
Line:793
..."

Then I click "ignore"

On putty again :

"Authenticating with public key "rsa-key-20100327" from agent
Access denied
christophe at kml3d.r-forge.r-project.org's password:
Linux xmrforge2 2.6.18-xen #1 SMP Fri May 18 16:01:42 BST 2007 x86_64

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
Last login: Sat Mar 27 17:56:55 2010 from 
def92-4-82-225-59-146.fbx.proxad.net
This is a restricted account.
You cannot execute anything here.
Goodbye."



> /Henrik
>
>   
>> /Henrik
>>
>> PS. Don't think you need plink, but I might be wrong.
>>
>>     
>>> I also see on some tutorial that we might need putty.exe or plink.exe. I
>>> download them, but R-Forge user Manual do not mention them.
>>>
>>> Any idea of what goes wrong ?
>>>
>>> Thanks
>>> Christophe
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>>       
>>     
>
>


From ggrothendieck at gmail.com  Sat Mar 27 18:31:18 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sat, 27 Mar 2010 13:31:18 -0400
Subject: [Rd] Using SVN + SSH on windows
In-Reply-To: <4BAE2B7D.8060800@statistik.tu-dortmund.de>
References: <4BAE124D.6000406@u-paris10.fr>
	<4BAE2B7D.8060800@statistik.tu-dortmund.de>
Message-ID: <971536df1003271031h473dccay99d2b6b08b0e13ca@mail.gmail.com>

I am using TortoiseSVN 1.6.7 on Vista and right clicking in Windows
explorer and choosing
   TortoiseSVN | TortoiseSVN Settings | Network
gives a blank dialog.   In fact I don't think I have ever used the
TortoiseSVN Network dialog at all yet I am able to use TortoiseSVN to
send commits to R-Forge.

Not sure it matters but I normally run pageant from the command line like this:
pageant \mydir\privatekey.ppk

I also had a lot of problems getting commits to R-Forge to work from
Windows.  The entire system is really geared to UNIX.  It took me a
couple of days of trial and error (since you have to wait 20 minutes
for each try) before I got it working.  Although I did get it to work,
I ultimately decided to host all my packages on googlecode.
googlecode is extremely easy to use from Windows and does not require
any public/private key, pageant, etc.  e.g.
http://sqldf.googlecode.com.  If you already have TortoiseSVN and know
how to use it then you can probably set up a googlecode site in
literally 5 minutes.

One other possibility.  I think there is a way to host your project on
googlecode but still have it mirrored on R-forge so from your users'
viewpoint its the same as if it were on R-Forge but you can use the
simpler googlecode site.  In that case you might not need to set up
commits on R-Forge since you would do all your commits through
googlecode (depending on how it works) but I have not seen good
documentation on how to do this.


2010/3/27 Uwe Ligges <ligges at statistik.tu-dortmund.de>:
> From my memory: I guess you need to tell TortoiseSVN to use plink as your
> ssh client. I do not use putty myself hence cannot look into the details
> here.
>
> Uwe Ligges
>
>
>
>
>
>
> On 27.03.2010 15:12, Christophe Genolini wrote:
>>
>> Hi the list,
>> I try to use R-Forge for developping a projet. I am using tortoise SVN
>> (last version) but I do not manage to Commit. I read the R-Forge user
>> Manual and some post on but I do not manage to find the solution. Here
>> is what I did:
>>
>> 1/ I download 'puttygen.exe'. I generate a key (256 bits).
>> 2/ I save the private key in a file 'private.ppk' on my computer.
>> 3/ I copy-paste the public key on sourceforge
>> ssh-rsa
>> AAAAB3NzaC1yc2EAAAABJQAAACEAobwycGGZrMZ39i7Vtrdk3ahN1hVw/tPoiShJGk1xjRs=
>> rsa-key-20100327
>> 4/ I wait two hours.
>> 5/ On my computer, I run 'pageant.exe'.
>> 6/ I click on 'Add key'. I load the file 'private.ppk'
>> 7/ I close 'pageant.exe' (still actif in the task bar).
>> 8/ I open explorer. I create a directory that is suppose to be the local
>> directoy for the projet.
>> 9/ I right-click on the directory. I open 'SVN checkout'
>> 10/ In 'URL of repository:', I write :
>> 'svn+ssh://christophe at svn.r-forge.r-project.org/svnroot/kml3d'
>> (christophe is my accoung, kml3d is the project)
>> And...
>>
>> ...nothing happen. No bug, not warning, nothing.
>>
>> I try several things: if I do
>> 'svn://christophe at svn.r-forge.r-project.org/svnroot/kml3d', I do manage
>> to download the project. But then, I do not manage to upload some
>> modification.
>>
>> I also see on some tutorial that we might need putty.exe or plink.exe. I
>> download them, but R-Forge user Manual do not mention them.
>>
>> Any idea of what goes wrong ?
>>
>> Thanks
>> Christophe
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From ligges at statistik.tu-dortmund.de  Sat Mar 27 18:34:25 2010
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 27 Mar 2010 18:34:25 +0100
Subject: [Rd] Using SVN + SSH on windows
In-Reply-To: <971536df1003271031h473dccay99d2b6b08b0e13ca@mail.gmail.com>
References: <4BAE124D.6000406@u-paris10.fr>
	<4BAE2B7D.8060800@statistik.tu-dortmund.de>
	<971536df1003271031h473dccay99d2b6b08b0e13ca@mail.gmail.com>
Message-ID: <4BAE41A1.3010309@statistik.tu-dortmund.de>

It is really not hard to set it up. I am using a vanilla ssh (rather 
than putty) and that works fine all the time...

Uwe Ligges


On 27.03.2010 18:31, Gabor Grothendieck wrote:
> s getting commits to R-Forge to work from
> Windows.  The entire system is really geared to UNIX.  It took me a
> couple of days of trial and error (since you have to wait 20 minutes
> for each try) before I got it working.  Although I did get it to work,
> I ultimately decided to host all my packages on googlecode.
> googlecode is extremely easy to use from Windows and does not require
> any public/private key, pageant, etc.  e.g.
> http://sqldf.googlecode.com.  If you already have TortoiseSVN and know
> how to use it then you can probably set up a googlecode site in
> literally 5 minutes.
>
> One other possibility.  I think there is a way to host your project on
> googlecode but still have it mirrored on R-forge so from your users'
> viewpoint its the same as if it were on R-Forge but you can use the
> simpler googlecode site.  In that case you might not need to set up
> commits on R-Forge since you would do all your commits through
> googlecode (depending on how it works) but I have not seen good
> documentation on how to do this.
>


From ggrothendieck at gmail.com  Sat Mar 27 18:50:34 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sat, 27 Mar 2010 13:50:34 -0400
Subject: [Rd] Using SVN + SSH on windows
In-Reply-To: <4BAE41A1.3010309@statistik.tu-dortmund.de>
References: <4BAE124D.6000406@u-paris10.fr>
	<4BAE2B7D.8060800@statistik.tu-dortmund.de> 
	<971536df1003271031h473dccay99d2b6b08b0e13ca@mail.gmail.com> 
	<4BAE41A1.3010309@statistik.tu-dortmund.de>
Message-ID: <971536df1003271050n6a3ed721nf521dfa8629a9dda@mail.gmail.com>

The worst part is the 20 minute delay which means that if here is
something wrong and you don't know what it is and need to try various
things via trial and error each try takes 20 minutes so its not
surprising that it can be extremely time consuming to set up.  I did
set it up a long time ago so perhaps the situation is better now but
my experience at the time was more like Christophe's.  If the 20
minute turnaround cannot be solved then I think the best solution for
Windows users would be excellent step by step documentation on how to
mirror your repository onto R-Forge from googlecode and elsewhere so
that Windows users can do their commits on googlecode (assuming that
mirroring your repository is possible and is easier than the commit
procedure and does not involve the 20 minute delay).

2010/3/27 Uwe Ligges <ligges at statistik.tu-dortmund.de>:
> It is really not hard to set it up. I am using a vanilla ssh (rather than
> putty) and that works fine all the time...
>
> Uwe Ligges
>
>
> On 27.03.2010 18:31, Gabor Grothendieck wrote:
>>
>> s getting commits to R-Forge to work from
>> Windows. ?The entire system is really geared to UNIX. ?It took me a
>> couple of days of trial and error (since you have to wait 20 minutes
>> for each try) before I got it working. ?Although I did get it to work,
>> I ultimately decided to host all my packages on googlecode.
>> googlecode is extremely easy to use from Windows and does not require
>> any public/private key, pageant, etc. ?e.g.
>> http://sqldf.googlecode.com. ?If you already have TortoiseSVN and know
>> how to use it then you can probably set up a googlecode site in
>> literally 5 minutes.
>>
>> One other possibility. ?I think there is a way to host your project on
>> googlecode but still have it mirrored on R-forge so from your users'
>> viewpoint its the same as if it were on R-Forge but you can use the
>> simpler googlecode site. ?In that case you might not need to set up
>> commits on R-Forge since you would do all your commits through
>> googlecode (depending on how it works) but I have not seen good
>> documentation on how to do this.
>>
>


From homeriq5 at gmail.com  Sat Mar 27 18:59:41 2010
From: homeriq5 at gmail.com (Naim Rashid)
Date: Sat, 27 Mar 2010 13:59:41 -0400
Subject: [Rd] Installing R-packages in Windows Using Rtools - compilation
	error when <signal.h> included in C header
Message-ID: <ae12a52b1003271059p7383cef9h9f9f32d646de4f4d@mail.gmail.com>

Hi all,

I have been attempting to find a resolution to this problem but could
not to any avail. I am attempting to install an R-package from source
in windows that depends on underlying C-code.? I should mention that
this error is not found when installing this package from source in
Linux or Mac.? To do this I have installed R-tools 2.11 and was
successfully able to use R and basic unix commands from the windows
command prompt.

When I install my package from the windows command prompt with R CMD
INSTALL <packagename> however, the C files within the source directory
all compiles until it hits a file called cheapcgi.c, where the
following error is given:

gcc -I"c:/R/include"??????? -O3 -Wall? -std=gnu99 -c cheapcgi.c -o cheapcgi.o
cheapcgi.c: In function 'catchSignal':
cheapcgi.c:538: error: 'SIGBUS' undeclared (first use in this function)
cheapcgi.c:538: error: (Each undeclared identifier is reported only once
cheapcgi.c:538: error: for each function it appears in.)
cheapcgi.c:546: error: 'SIGKILL' undeclared (first use in this function)
cheapcgi.c: In function 'initSigHandlers':
cheapcgi.c:558: error: 'SIGBUS' undeclared (first use in this function)
make: *** [cheapcgi.o] Error 1
? ... done
ERROR: compilation failed for package 'zinba'
* removing 'c:/R/library/zinba'

Exploring this error further, I see these variables are defined in the
standard C header file signal.h, and is linked to in cheapcgi.c using

#include <signal.h>

in the beginning of the file.  Now, the other C files have compiled
successfully before reaching this file, so I know that the MinGW
compiler is at least working.  When checking the mingw/include
directory in the Rtools folder, I do indeed see a file for signal.h,
so it is not missing.

This problem is baffling and I could not find any documents talking
about this issues online.  I do realize that system signals may not
work in windows, but at least the header files for the signal.h should
be found.  I would be greatly appreciative if anyone can shed any
insight on this issue. Again, this is only when installing R packages
in windows using Rtools, not in Mac or Linux.

Thanks very much,
Naim


From edd at debian.org  Sat Mar 27 19:15:24 2010
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 27 Mar 2010 13:15:24 -0500
Subject: [Rd] Using SVN + SSH on windows
In-Reply-To: <971536df1003271050n6a3ed721nf521dfa8629a9dda@mail.gmail.com>
References: <4BAE124D.6000406@u-paris10.fr>
	<4BAE2B7D.8060800@statistik.tu-dortmund.de>
	<971536df1003271031h473dccay99d2b6b08b0e13ca@mail.gmail.com>
	<4BAE41A1.3010309@statistik.tu-dortmund.de>
	<971536df1003271050n6a3ed721nf521dfa8629a9dda@mail.gmail.com>
Message-ID: <19374.19260.323940.430327@ron.nulle.part>


On 27 March 2010 at 13:50, Gabor Grothendieck wrote:
| The worst part is the 20 minute delay which means that if here is
| something wrong and you don't know what it is and need to try various
| things via trial and error each try takes 20 minutes so its not
| surprising that it can be extremely time consuming to set up.  I did
| set it up a long time ago so perhaps the situation is better now but
| my experience at the time was more like Christophe's.  If the 20
| minute turnaround cannot be solved then I think the best solution for
| Windows users would be excellent step by step documentation on how to
| mirror your repository onto R-Forge from googlecode and elsewhere so
| that Windows users can do their commits on googlecode (assuming that
| mirroring your repository is possible and is easier than the commit
| procedure and does not involve the 20 minute delay).

I think you are being rather unfair here.  These are contributed service
being provided by folks in their extra time that they could be spending for
their own work or research instead. The general rule still is: stop
complaining, and volunteer to provide something that is better (or at least
write the aforementioned step-by-step tutorial).  Otherwise you are just
making noise with no signal whatsoever.

R-Forge is a rocksolid service for hundreds of us, and (at least the folks I
work with) are very appreciative of the service.  So a big Thank You from my
end.

Dirk
 
| 2010/3/27 Uwe Ligges <ligges at statistik.tu-dortmund.de>:
| > It is really not hard to set it up. I am using a vanilla ssh (rather than
| > putty) and that works fine all the time...
| >
| > Uwe Ligges
| >
| >
| > On 27.03.2010 18:31, Gabor Grothendieck wrote:
| >>
| >> s getting commits to R-Forge to work from
| >> Windows. ?The entire system is really geared to UNIX. ?It took me a
| >> couple of days of trial and error (since you have to wait 20 minutes
| >> for each try) before I got it working. ?Although I did get it to work,
| >> I ultimately decided to host all my packages on googlecode.
| >> googlecode is extremely easy to use from Windows and does not require
| >> any public/private key, pageant, etc. ?e.g.
| >> http://sqldf.googlecode.com. ?If you already have TortoiseSVN and know
| >> how to use it then you can probably set up a googlecode site in
| >> literally 5 minutes.
| >>
| >> One other possibility. ?I think there is a way to host your project on
| >> googlecode but still have it mirrored on R-forge so from your users'
| >> viewpoint its the same as if it were on R-Forge but you can use the
| >> simpler googlecode site. ?In that case you might not need to set up
| >> commits on R-Forge since you would do all your commits through
| >> googlecode (depending on how it works) but I have not seen good
| >> documentation on how to do this.
| >>
| >
| 
| ______________________________________________
| R-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
  Registration is open for the 2nd International conference R / Finance 2010
  See http://www.RinFinance.com for details, and see you in Chicago in April!


From hb at stat.berkeley.edu  Sat Mar 27 19:30:54 2010
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Sat, 27 Mar 2010 19:30:54 +0100
Subject: [Rd] Using SVN + SSH on windows
In-Reply-To: <4BAE3DBD.1000501@u-paris10.fr>
References: <4BAE124D.6000406@u-paris10.fr>
	<59d7961d1003270947l1f828f5alfd7b7f2195702b22@mail.gmail.com>
	<59d7961d1003271000y3892df22p7b49a3b0db16424e@mail.gmail.com>
	<4BAE3DBD.1000501@u-paris10.fr>
Message-ID: <59d7961d1003271130u6b51cef5l59239f0aac08de79@mail.gmail.com>

2010/3/27 Christophe Genolini <cgenolin at u-paris10.fr>:
> Henrik Bengtsson a ?crit :
>>
>> 2010/3/27 hb <hb at stat.berkeley.edu>:
>>
>>>
>>> On Sat, Mar 27, 2010 at 3:12 PM, Christophe Genolini <cgenolin at u-paris10.fr> wrote:
>>>
>>>>
>>>> Hi the list,
>>>> I try to use R-Forge for developping a projet. I am using tortoise SVN (last
>>>> version) but I do not manage to Commit. I read the R-Forge user Manual and
>>>> some post on ?but I do not manage to find the solution. Here is what I did:
>>>>
>>>> 1/ I download 'puttygen.exe'. I generate a key (256 bits).
>>>> 2/ I save the private key in a file 'private.ppk' on my computer.
>>>> 3/ I copy-paste the public key on sourceforge
>>>> ssh-rsa
>>>> AAAAB3NzaC1yc2EAAAABJQAAACEAobwycGGZrMZ39i7Vtrdk3ahN1hVw/tPoiShJGk1xjRs=
>>>> rsa-key-20100327
>>>> 4/ I wait two hours.
>>>> 5/ On my computer, I run 'pageant.exe'.
>>>> 6/ I click on 'Add key'. I load the file 'private.ppk'
>>>> 7/ I close 'pageant.exe' (still actif in the task bar).
>>>> 8/ I open explorer. I create a directory that is suppose to be the local
>>>> directoy for the projet.
>>>> 9/ I right-click on the directory. I open 'SVN checkout'
>>>> 10/ In 'URL of ?repository:', I write :
>>>> 'svn+ssh://christophe at svn.r-forge.r-project.org/svnroot/kml3d'
>>>> (christophe is my accoung, kml3d is the project)
>>>> And...
>>>>
>>>> ...nothing happen. No bug, not warning, nothing.
>>>>
>>>> I try several things: if I do
>>>> 'svn://christophe at svn.r-forge.r-project.org/svnroot/kml3d', I do manage to
>>>> download the project. But then, I do not manage to upload some modification.
>>>>
>>>
>>> All looks ok, but I think you are using the wrong protocol. It should be 'svn+ssh' for *commits*, i.e.
>>>
>>> svn+ssh://christophe at svn.r-forge.r-project.org/svnroot/kml3d
>>>
>>> which *is* shown at http://r-forge.r-project.org/scm/?group_id=727
>>>
>>
>>
>
> Now, in addition, I configure putty as Uwe advice me. I follow the tutorial http://www.mono-project.com/Putty_and_TortoiseSvn
>>
>> Sorry, I missed that you've tried that (I scrolled past it on my small screen).
>>
>> - When you generated a key in PUTTYgen, did you enter a passphrase? ?I
>> think you have to leave that blank.
>>
>> - Make sure not to have any newlines/spaces in the key, when you paste
>> it, that is, you should have:
>>
>> Line 1: ssh-rsa
>> Line 2: <long key>
>>
>
> On two line ? On R-forge, they say "/Make sure there are no line breaks except between keys."/

My bad/you're right.  I went back an checked an it's all on one line;
I've got three keys on three lines.

>>
>> You can have multiple entries as the above.
>>
>> - You need to checkout with the svn+ssh URL, because that it is what
>> TortoiseSVN will use for commits (unless you do "relocate"). ?If you
>> can checkout using this protocol, you should be able to commit. ?Thus,
>> focus your troubleshooting on checking out.
>>
>> - In the "Default Settings" PuTTY Configurations, make sure "Attempt
>> authentication using Pageant" is checked under the Connection -> SSH
>> -> Auth panel.
>>
>
> I did
>>
>> - Make sure Pageant lists the key in its dialog.
>>
>>
>
> It is.
>
>> Does it work?
>>
>>
>
> No. In "putty", I get :
> "login as: christophe"
>
> Then a pop up say : "Assertion failed!
> Program:...\pageant.exe
> File: ..\sshrsa.c
> Line:793
> ..."

Hmm... I don't get that.  It looks wrong.  Google it and you find:

<quote>
10.7 ?Internal error?, ?Internal fault?, ?Assertion failed?

Any error beginning with the word ?Internal? should never occur. If it
does, there is a bug in PuTTY by definition; please see appendix B and
report it to us.

Similarly, any error message starting with ?Assertion failed? is a bug
in PuTTY. Please report it to us, and include the exact text from the
error message box.
</quote>

URL: http://the.earth.li/~sgtatham/putty/0.60/htmldoc/Chapter10.html#errors-internal
Also: http://www.chiark.greenend.org.uk/~sgtatham/putty/wishlist/sshcrcda-assertion-failed.html

What's the PuTTY version do you have?  I have PuTTY v0.60 and it works.

Try to generate a new pair of ssh keys and retry.

If you want to, you can send me a pair of private/public keys that you
generate and I can try it on my r-forge account.

/Henrik

>
> Then I click "ignore"
>
> On putty again :
>
> "Authenticating with public key "rsa-key-20100327" from agent
> Access denied
> christophe at kml3d.r-forge.r-project.org's password:
> Linux xmrforge2 2.6.18-xen #1 SMP Fri May 18 16:01:42 BST 2007 x86_64
>
> The programs included with the Debian GNU/Linux system are free software;
> the exact distribution terms for each program are described in the
> individual files in /usr/share/doc/*/copyright.
>
> Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
> permitted by applicable law.
> Last login: Sat Mar 27 17:56:55 2010 from def92-4-82-225-59-146.fbx.proxad.net
> This is a restricted account.
> You cannot execute anything here.
> Goodbye."
>
>
>
>> /Henrik
>>
>>
>>>
>>> /Henrik
>>>
>>> PS. Don't think you need plink, but I might be wrong.
>>>
>>>
>>>>
>>>> I also see on some tutorial that we might need putty.exe or plink.exe. I
>>>> download them, but R-Forge user Manual do not mention them.
>>>>
>>>> Any idea of what goes wrong ?
>>>>
>>>> Thanks
>>>> Christophe
>>>>
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>
>>>>
>>>
>>>
>>
>>
>
>


From ggrothendieck at gmail.com  Sat Mar 27 19:45:26 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sat, 27 Mar 2010 14:45:26 -0400
Subject: [Rd] Using SVN + SSH on windows
In-Reply-To: <19374.19260.323940.430327@ron.nulle.part>
References: <4BAE124D.6000406@u-paris10.fr>
	<4BAE2B7D.8060800@statistik.tu-dortmund.de> 
	<971536df1003271031h473dccay99d2b6b08b0e13ca@mail.gmail.com> 
	<4BAE41A1.3010309@statistik.tu-dortmund.de>
	<971536df1003271050n6a3ed721nf521dfa8629a9dda@mail.gmail.com> 
	<19374.19260.323940.430327@ron.nulle.part>
Message-ID: <971536df1003271145t51ddde98yf07c8d9730aa11d1@mail.gmail.com>

I wasn't commenting of the overall worth of the system or the efforts
of those involved in it but your experience is with Linux rather than
Windows and I don't think you understand the problems that Windows
users have with this.

The poster may have believed its uniquely his problem but in fact
others have had very similar problems in dealing with this. What is
the purpose of this list if its not to share experiences to help one
another?  I think the useful suggestions I made could potentially save
someone literally days of frustration and my other suggestions could
possibly overcome these problems in part making the system more useful
so I don't agree that this is mere complaining.

On Sat, Mar 27, 2010 at 2:15 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
>
> On 27 March 2010 at 13:50, Gabor Grothendieck wrote:
> | The worst part is the 20 minute delay which means that if here is
> | something wrong and you don't know what it is and need to try various
> | things via trial and error each try takes 20 minutes so its not
> | surprising that it can be extremely time consuming to set up. ?I did
> | set it up a long time ago so perhaps the situation is better now but
> | my experience at the time was more like Christophe's. ?If the 20
> | minute turnaround cannot be solved then I think the best solution for
> | Windows users would be excellent step by step documentation on how to
> | mirror your repository onto R-Forge from googlecode and elsewhere so
> | that Windows users can do their commits on googlecode (assuming that
> | mirroring your repository is possible and is easier than the commit
> | procedure and does not involve the 20 minute delay).
>
> I think you are being rather unfair here. ?These are contributed service
> being provided by folks in their extra time that they could be spending for
> their own work or research instead. The general rule still is: stop
> complaining, and volunteer to provide something that is better (or at least
> write the aforementioned step-by-step tutorial). ?Otherwise you are just
> making noise with no signal whatsoever.
>
> R-Forge is a rocksolid service for hundreds of us, and (at least the folks I
> work with) are very appreciative of the service. ?So a big Thank You from my
> end.
>
> Dirk
>
> | 2010/3/27 Uwe Ligges <ligges at statistik.tu-dortmund.de>:
> | > It is really not hard to set it up. I am using a vanilla ssh (rather than
> | > putty) and that works fine all the time...
> | >
> | > Uwe Ligges
> | >
> | >
> | > On 27.03.2010 18:31, Gabor Grothendieck wrote:
> | >>
> | >> s getting commits to R-Forge to work from
> | >> Windows. ?The entire system is really geared to UNIX. ?It took me a
> | >> couple of days of trial and error (since you have to wait 20 minutes
> | >> for each try) before I got it working. ?Although I did get it to work,
> | >> I ultimately decided to host all my packages on googlecode.
> | >> googlecode is extremely easy to use from Windows and does not require
> | >> any public/private key, pageant, etc. ?e.g.
> | >> http://sqldf.googlecode.com. ?If you already have TortoiseSVN and know
> | >> how to use it then you can probably set up a googlecode site in
> | >> literally 5 minutes.
> | >>
> | >> One other possibility. ?I think there is a way to host your project on
> | >> googlecode but still have it mirrored on R-forge so from your users'
> | >> viewpoint its the same as if it were on R-Forge but you can use the
> | >> simpler googlecode site. ?In that case you might not need to set up
> | >> commits on R-Forge since you would do all your commits through
> | >> googlecode (depending on how it works) but I have not seen good
> | >> documentation on how to do this.
> | >>
> | >
> |
> | ______________________________________________
> | R-devel at r-project.org mailing list
> | https://stat.ethz.ch/mailman/listinfo/r-devel
>
> --
> ?Registration is open for the 2nd International conference R / Finance 2010
> ?See http://www.RinFinance.com for details, and see you in Chicago in April!
>


From hb at stat.berkeley.edu  Sat Mar 27 19:56:12 2010
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Sat, 27 Mar 2010 19:56:12 +0100
Subject: [Rd] Using SVN + SSH on windows
In-Reply-To: <59d7961d1003271130u6b51cef5l59239f0aac08de79@mail.gmail.com>
References: <4BAE124D.6000406@u-paris10.fr>
	<59d7961d1003270947l1f828f5alfd7b7f2195702b22@mail.gmail.com>
	<59d7961d1003271000y3892df22p7b49a3b0db16424e@mail.gmail.com>
	<4BAE3DBD.1000501@u-paris10.fr>
	<59d7961d1003271130u6b51cef5l59239f0aac08de79@mail.gmail.com>
Message-ID: <59d7961d1003271156j63e1ebd8vf5c6ded885321e31@mail.gmail.com>

BTW, it may indeed be that you have to wait (more than 2-3 hours)
before things are updated on the r-forge servers, cf.

Thread 'FYI: New members must wait hours to commit' on 2009-12-03
https://r-forge.r-project.org/forum/forum.php?thread_id=1966&forum_id=78

/Henrik

On Sat, Mar 27, 2010 at 7:30 PM, Henrik Bengtsson <hb at stat.berkeley.edu> wrote:
> 2010/3/27 Christophe Genolini <cgenolin at u-paris10.fr>:
>> Henrik Bengtsson a ?crit :
>>>
>>> 2010/3/27 hb <hb at stat.berkeley.edu>:
>>>
>>>>
>>>> On Sat, Mar 27, 2010 at 3:12 PM, Christophe Genolini <cgenolin at u-paris10.fr> wrote:
>>>>
>>>>>
>>>>> Hi the list,
>>>>> I try to use R-Forge for developping a projet. I am using tortoise SVN (last
>>>>> version) but I do not manage to Commit. I read the R-Forge user Manual and
>>>>> some post on ?but I do not manage to find the solution. Here is what I did:
>>>>>
>>>>> 1/ I download 'puttygen.exe'. I generate a key (256 bits).
>>>>> 2/ I save the private key in a file 'private.ppk' on my computer.
>>>>> 3/ I copy-paste the public key on sourceforge
>>>>> ssh-rsa
>>>>> AAAAB3NzaC1yc2EAAAABJQAAACEAobwycGGZrMZ39i7Vtrdk3ahN1hVw/tPoiShJGk1xjRs=
>>>>> rsa-key-20100327
>>>>> 4/ I wait two hours.
>>>>> 5/ On my computer, I run 'pageant.exe'.
>>>>> 6/ I click on 'Add key'. I load the file 'private.ppk'
>>>>> 7/ I close 'pageant.exe' (still actif in the task bar).
>>>>> 8/ I open explorer. I create a directory that is suppose to be the local
>>>>> directoy for the projet.
>>>>> 9/ I right-click on the directory. I open 'SVN checkout'
>>>>> 10/ In 'URL of ?repository:', I write :
>>>>> 'svn+ssh://christophe at svn.r-forge.r-project.org/svnroot/kml3d'
>>>>> (christophe is my accoung, kml3d is the project)
>>>>> And...
>>>>>
>>>>> ...nothing happen. No bug, not warning, nothing.
>>>>>
>>>>> I try several things: if I do
>>>>> 'svn://christophe at svn.r-forge.r-project.org/svnroot/kml3d', I do manage to
>>>>> download the project. But then, I do not manage to upload some modification.
>>>>>
>>>>
>>>> All looks ok, but I think you are using the wrong protocol. It should be 'svn+ssh' for *commits*, i.e.
>>>>
>>>> svn+ssh://christophe at svn.r-forge.r-project.org/svnroot/kml3d
>>>>
>>>> which *is* shown at http://r-forge.r-project.org/scm/?group_id=727
>>>>
>>>
>>>
>>
>> Now, in addition, I configure putty as Uwe advice me. I follow the tutorial http://www.mono-project.com/Putty_and_TortoiseSvn
>>>
>>> Sorry, I missed that you've tried that (I scrolled past it on my small screen).
>>>
>>> - When you generated a key in PUTTYgen, did you enter a passphrase? ?I
>>> think you have to leave that blank.
>>>
>>> - Make sure not to have any newlines/spaces in the key, when you paste
>>> it, that is, you should have:
>>>
>>> Line 1: ssh-rsa
>>> Line 2: <long key>
>>>
>>
>> On two line ? On R-forge, they say "/Make sure there are no line breaks except between keys."/
>
> My bad/you're right. ?I went back an checked an it's all on one line;
> I've got three keys on three lines.
>
>>>
>>> You can have multiple entries as the above.
>>>
>>> - You need to checkout with the svn+ssh URL, because that it is what
>>> TortoiseSVN will use for commits (unless you do "relocate"). ?If you
>>> can checkout using this protocol, you should be able to commit. ?Thus,
>>> focus your troubleshooting on checking out.
>>>
>>> - In the "Default Settings" PuTTY Configurations, make sure "Attempt
>>> authentication using Pageant" is checked under the Connection -> SSH
>>> -> Auth panel.
>>>
>>
>> I did
>>>
>>> - Make sure Pageant lists the key in its dialog.
>>>
>>>
>>
>> It is.
>>
>>> Does it work?
>>>
>>>
>>
>> No. In "putty", I get :
>> "login as: christophe"
>>
>> Then a pop up say : "Assertion failed!
>> Program:...\pageant.exe
>> File: ..\sshrsa.c
>> Line:793
>> ..."
>
> Hmm... I don't get that. ?It looks wrong. ?Google it and you find:
>
> <quote>
> 10.7 ?Internal error?, ?Internal fault?, ?Assertion failed?
>
> Any error beginning with the word ?Internal? should never occur. If it
> does, there is a bug in PuTTY by definition; please see appendix B and
> report it to us.
>
> Similarly, any error message starting with ?Assertion failed? is a bug
> in PuTTY. Please report it to us, and include the exact text from the
> error message box.
> </quote>
>
> URL: http://the.earth.li/~sgtatham/putty/0.60/htmldoc/Chapter10.html#errors-internal
> Also: http://www.chiark.greenend.org.uk/~sgtatham/putty/wishlist/sshcrcda-assertion-failed.html
>
> What's the PuTTY version do you have? ?I have PuTTY v0.60 and it works.
>
> Try to generate a new pair of ssh keys and retry.
>
> If you want to, you can send me a pair of private/public keys that you
> generate and I can try it on my r-forge account.
>
> /Henrik
>
>>
>> Then I click "ignore"
>>
>> On putty again :
>>
>> "Authenticating with public key "rsa-key-20100327" from agent
>> Access denied
>> christophe at kml3d.r-forge.r-project.org's password:
>> Linux xmrforge2 2.6.18-xen #1 SMP Fri May 18 16:01:42 BST 2007 x86_64
>>
>> The programs included with the Debian GNU/Linux system are free software;
>> the exact distribution terms for each program are described in the
>> individual files in /usr/share/doc/*/copyright.
>>
>> Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
>> permitted by applicable law.
>> Last login: Sat Mar 27 17:56:55 2010 from def92-4-82-225-59-146.fbx.proxad.net
>> This is a restricted account.
>> You cannot execute anything here.
>> Goodbye."
>>
>>
>>
>>> /Henrik
>>>
>>>
>>>>
>>>> /Henrik
>>>>
>>>> PS. Don't think you need plink, but I might be wrong.
>>>>
>>>>
>>>>>
>>>>> I also see on some tutorial that we might need putty.exe or plink.exe. I
>>>>> download them, but R-Forge user Manual do not mention them.
>>>>>
>>>>> Any idea of what goes wrong ?
>>>>>
>>>>> Thanks
>>>>> Christophe
>>>>>
>>>>> ______________________________________________
>>>>> R-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>
>>>>>
>>>>
>>>>
>>>
>>>
>>
>>
>


From murdoch at stats.uwo.ca  Sat Mar 27 21:43:09 2010
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Sat, 27 Mar 2010 16:43:09 -0400
Subject: [Rd] update.packages(1)
In-Reply-To: <alpine.LFD.2.00.1003251841410.8040@hafstormur.hafro.is>
References: <alpine.LFD.2.00.1003251841410.8040@hafstormur.hafro.is>
Message-ID: <4BAE6DDD.5070709@stats.uwo.ca>

On 25/03/2010 3:16 PM, Arni Magnusson wrote:
> I'm relaying a question from my institute's sysadmin:
> 
> Would it be possible to modify update.packages() and related functions so 
> that 'lib.loc' accepts integer values to specify a library from the 
> .libPaths() vector?
> 
> Many Linux users want to update all user packages (inside the R_LIBS_USER 
> directory, e.g. ~/r/library) and none of the system packages (inside the 
> /usr directory, e.g. /usr/lib64/R/library), because they don't have write 
> privileges to update the system packages.
> 
> Currently, this can be done by pressing 'y RET' for all the user packages 
> and 'RET' for all the system packages. This hard work and careful reading 
> when there dozens of packages. Another way is to run
> 
>    update.packages(Sys.getenv("R_LIBS_USER"))
> 
> or:
> 
>    update.packages(.libPaths()[1])

You could also save some work by putting ask=FALSE, or ask="graphics" in 
as another argument.  But isn't it easy enough to write your own 
function as a wrapper to update.packages, suiting your own local 
conventions?   It seems like a bad idea to make update.packages too 
friendly, when there are several different friendly front-ends for it 
already (e.g. the menu entries in Windows or MacOS GUIs).

> But it would be nicer for the user to type
> 
>    update.packages(1)
> 
> using a 'pos' like notation to indicate the first element of the 
> .libPaths() vector.
> 
> ---
> 
> A separate but related issue is that it would be nice if the R_LIBS_USER 
> library would be the first library by default. Currently, my sysadmin must 
> use Rprofile.site to shuffle the .libPaths() to make R_LIBS_USER first, 
> which seems like a sensible default when it comes to install.packages() 
> and remove.packages().
> 
> This is R version 2.10.1 (2009-12-14) on x86_64-redhat-linux-gnu (Fedora 
> 11).

I didn't write it, but I suspect the current behaviour was intentional. 
  Without it, it would be hard to put the user library last, since 
.libPaths() adds things at the front.  Now you have a choice:  use the 
R_LIBS_USER environment variable to put it last, use a line in your 
Rprofile.site file to put something first.

Duncan Murdoch


From seth at userprimary.net  Sat Mar 27 21:48:19 2010
From: seth at userprimary.net (Seth Falcon)
Date: Sat, 27 Mar 2010 13:48:19 -0700
Subject: [Rd] update.packages(1)
In-Reply-To: <4BAE6DDD.5070709@stats.uwo.ca>
References: <alpine.LFD.2.00.1003251841410.8040@hafstormur.hafro.is>
	<4BAE6DDD.5070709@stats.uwo.ca>
Message-ID: <4BAE6F13.2040405@userprimary.net>

On 3/27/10 1:43 PM, Duncan Murdoch wrote:
> On 25/03/2010 3:16 PM, Arni Magnusson wrote:
>> I'm relaying a question from my institute's sysadmin:
>>
>> Would it be possible to modify update.packages() and related functions
>> so that 'lib.loc' accepts integer values to specify a library from the
>> .libPaths() vector?
>>
>> Many Linux users want to update all user packages (inside the
>> R_LIBS_USER directory, e.g. ~/r/library) and none of the system
>> packages (inside the /usr directory, e.g. /usr/lib64/R/library),
>> because they don't have write privileges to update the system packages.
>>
>> Currently, this can be done by pressing 'y RET' for all the user
>> packages and 'RET' for all the system packages. This hard work and
>> careful reading when there dozens of packages. Another way is to run
>>
>>    update.packages(Sys.getenv("R_LIBS_USER"))
>>
>> or:
>>
>>    update.packages(.libPaths()[1])
> 
> You could also save some work by putting ask=FALSE, or ask="graphics" in
> as another argument.  But isn't it easy enough to write your own
> function as a wrapper to update.packages, suiting your own local
> conventions?   It seems like a bad idea to make update.packages too
> friendly, when there are several different friendly front-ends for it
> already (e.g. the menu entries in Windows or MacOS GUIs).
> 
>> But it would be nicer for the user to type
>>
>>    update.packages(1)
>>
>> using a 'pos' like notation to indicate the first element of the
>> .libPaths() vector.
>>
>> ---
>>
>> A separate but related issue is that it would be nice if the
>> R_LIBS_USER library would be the first library by default. Currently,
>> my sysadmin must use Rprofile.site to shuffle the .libPaths() to make
>> R_LIBS_USER first, which seems like a sensible default when it comes
>> to install.packages() and remove.packages().

I'm confused.  AFAICT, R_LIBS_USER _is_ put first.  Following the advice
in the Admin manual, I created a directory matching the default value of
R_LIBS_USER (Sys.getenv("R_LIBS_USER") to see it).  Then when I start R,
I get:

> .libPaths()
[1] "/home/sfalcon/R/x86_64-unknown-linux-gnu-library/2.11"
[2] "/home/sfalcon/build/rd/library"

Isn't that what you want?


From murdoch at stats.uwo.ca  Sat Mar 27 21:58:25 2010
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Sat, 27 Mar 2010 16:58:25 -0400
Subject: [Rd] update.packages(1)
In-Reply-To: <4BAE6F13.2040405@userprimary.net>
References: <alpine.LFD.2.00.1003251841410.8040@hafstormur.hafro.is>	<4BAE6DDD.5070709@stats.uwo.ca>
	<4BAE6F13.2040405@userprimary.net>
Message-ID: <4BAE7171.9080609@stats.uwo.ca>

On 27/03/2010 4:48 PM, Seth Falcon wrote:
> On 3/27/10 1:43 PM, Duncan Murdoch wrote:
>> On 25/03/2010 3:16 PM, Arni Magnusson wrote:
>>> I'm relaying a question from my institute's sysadmin:
>>>
>>> Would it be possible to modify update.packages() and related functions
>>> so that 'lib.loc' accepts integer values to specify a library from the
>>> .libPaths() vector?
>>>
>>> Many Linux users want to update all user packages (inside the
>>> R_LIBS_USER directory, e.g. ~/r/library) and none of the system
>>> packages (inside the /usr directory, e.g. /usr/lib64/R/library),
>>> because they don't have write privileges to update the system packages.
>>>
>>> Currently, this can be done by pressing 'y RET' for all the user
>>> packages and 'RET' for all the system packages. This hard work and
>>> careful reading when there dozens of packages. Another way is to run
>>>
>>>    update.packages(Sys.getenv("R_LIBS_USER"))
>>>
>>> or:
>>>
>>>    update.packages(.libPaths()[1])
>> You could also save some work by putting ask=FALSE, or ask="graphics" in
>> as another argument.  But isn't it easy enough to write your own
>> function as a wrapper to update.packages, suiting your own local
>> conventions?   It seems like a bad idea to make update.packages too
>> friendly, when there are several different friendly front-ends for it
>> already (e.g. the menu entries in Windows or MacOS GUIs).
>>
>>> But it would be nicer for the user to type
>>>
>>>    update.packages(1)
>>>
>>> using a 'pos' like notation to indicate the first element of the
>>> .libPaths() vector.
>>>
>>> ---
>>>
>>> A separate but related issue is that it would be nice if the
>>> R_LIBS_USER library would be the first library by default. Currently,
>>> my sysadmin must use Rprofile.site to shuffle the .libPaths() to make
>>> R_LIBS_USER first, which seems like a sensible default when it comes
>>> to install.packages() and remove.packages().
> 
> I'm confused.  AFAICT, R_LIBS_USER _is_ put first.  Following the advice
> in the Admin manual, I created a directory matching the default value of
> R_LIBS_USER (Sys.getenv("R_LIBS_USER") to see it).  Then when I start R,
> I get:
> 
>> .libPaths()
> [1] "/home/sfalcon/R/x86_64-unknown-linux-gnu-library/2.11"
> [2] "/home/sfalcon/build/rd/library"
> 
> Isn't that what you want?

I didn't try it, I just read the documentation (in ?.libPaths).  As I 
read it it says the order is

R_LIBS, R_LIBS_USER, .Library.site, .Library

and some of those components can be missing.

So another way to put the user libs first is to specify the site libs in 
.Library.site rather than in the environment variable.

Duncan Murdoch


From d.scott at auckland.ac.nz  Sun Mar 28 05:45:12 2010
From: d.scott at auckland.ac.nz (David Scott)
Date: Sun, 28 Mar 2010 16:45:12 +1300
Subject: [Rd] Using SVN + SSH on windows
In-Reply-To: <4BAE41A1.3010309@statistik.tu-dortmund.de>
References: <4BAE124D.6000406@u-paris10.fr>	<4BAE2B7D.8060800@statistik.tu-dortmund.de>	<971536df1003271031h473dccay99d2b6b08b0e13ca@mail.gmail.com>
	<4BAE41A1.3010309@statistik.tu-dortmund.de>
Message-ID: <4BAED0C8.8050203@auckland.ac.nz>

Uwe Ligges wrote:
> It is really not hard to set it up. I am using a vanilla ssh (rather 
> than putty) and that works fine all the time...
> 
> Uwe Ligges


Ditto here. I am using ssh non commercial version with tortoise on 
Vista, and I don't recall any problems setting it up. R-forge works 
perfectly fine with windows and tortoise in my experience.

Is your putty/ssh working? Can you access other machines with it? I do 
recall ssh can be a bit fussy.

David Scott

> 
> 
> On 27.03.2010 18:31, Gabor Grothendieck wrote:
>> s getting commits to R-Forge to work from
>> Windows.  The entire system is really geared to UNIX.  It took me a
>> couple of days of trial and error (since you have to wait 20 minutes
>> for each try) before I got it working.  Although I did get it to work,
>> I ultimately decided to host all my packages on googlecode.
>> googlecode is extremely easy to use from Windows and does not require
>> any public/private key, pageant, etc.  e.g.
>> http://sqldf.googlecode.com.  If you already have TortoiseSVN and know
>> how to use it then you can probably set up a googlecode site in
>> literally 5 minutes.
>>
>> One other possibility.  I think there is a way to host your project on
>> googlecode but still have it mirrored on R-forge so from your users'
>> viewpoint its the same as if it were on R-Forge but you can use the
>> simpler googlecode site.  In that case you might not need to set up
>> commits on R-Forge since you would do all your commits through
>> googlecode (depending on how it works) but I have not seen good
>> documentation on how to do this.
>>
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
_________________________________________________________________
David Scott	Department of Statistics
		The University of Auckland, PB 92019
		Auckland 1142,    NEW ZEALAND
Phone: +64 9 923 5055, or +64 9 373 7599 ext 85055
Email:	d.scott at auckland.ac.nz,  Fax: +64 9 373 7018

Director of Consulting, Department of Statistics


From hb at stat.berkeley.edu  Sun Mar 28 15:04:15 2010
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Sun, 28 Mar 2010 15:04:15 +0200
Subject: [Rd] Setting up TortoiseSVN and PuTTY on Windows for
	r-forge.r-project.org (Was: Re: Using SVN + SSH on windows)
Message-ID: <59d7961d1003280604r41390ad0u5dfe66a4ac39c7d6@mail.gmail.com>

Here are some notes/observations I've done on my setup that works for
me. Hopefully it will be added to some r-forge documentation/wiki.

I use:

Windows Vista Business SP2 32bit
TortoiseSVN 1.6.7 (Build 18415 - 32 Bit , 2010/01/22 17:55:06)
PuTTY v0.60 (with Pageant v0.60)

I have a deprecated r-forge project ('r-oo') that I will use through
out.  My r-forge username is 'henrikb'.  The URL root to this project
is: svn+ssh://henrikb at svn.r-forge.r-project.org/svnroot/r-oo

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
PART I: WITHOUT PAGEANT RUNNING
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

I.A. CHECKING OUT
1. Create a directory somewhere, e.g. r-oo,R-forge/
2. Right click on r-oo,R-forge/, select 'SVN Checkout...'
3. In 'URL of repository', enter
'svn+ssh://henrikb at svn.r-forge.r-project.org/svnroot/r-oo'.
4. Click OK.  A 'Checkout - TortoiseSVN' window will open with a line
saying "Command" and "Checkout from ...".
5. After a while, another dialog will open titled 'TortoisePlink' and
'henrikb at svn.r-forge.r-project.org password:' asking you to enter your
r-forge password.
6. After entering the password and clicking OK, some bytes are
downloaded, and then yet again a new 'TortoisePlink' dialog asks you
to enter your r-forge password.
7. After entering the password (the 2nd time) and clicking OK, the
actual files are downloaded; in the main ''Checkout - TortoiseSVN'
window you will see several lines of "Added" followed by a "Completed"
statement.  Click OK.
8. Look in your local r-oo,R-forge/ directory in Windows Explorer (not
Internet Explorer); it should now be populated with directories and
files, and (possibly hidden) .svn/ directories.  All directories,
except the .svn/ ones, now have a small overlay icon showing a "green
checkmark", which indicates that the local file is up to date with the
file on the r-forge SVN repository.


I.B. COMMITS
1. Edit r-oo,R-forge/README (which is one of the files that comes with
all r-forge projects).  I just add one line "foo" at the top so there
is a change.  Close the editor.
2. In Windows Explorer, the overlay icon now changed to a "red
exclamation mark", indicating that the content of the file differ from
the content available on the SVN repository.
3. To commit the changes to the online SVN repository, right click on
the file, select 'SVN Commit...'
4. A window titled 'Commit - ...' opens.  You can enter a log message
in the upper panel.  In the lower panel you see what files that will
be committed.
5. After clicking OK to commit, the 'TortoisePlink' dialog pops up and
asks you to enter your r-forge password.
6. After entering the password and clicking OK, then files will be
sent.  In 'Commit - ...' window you will see several lines reporting
this, e.g. "Command Commit", "Modified...", "Sending content ...", and
"Completed ...".  Click OK.
7. The icon for r-oo,R-forge/README should now be a green checkmark
(sometimes there is a delay in the update of the icon and you might
have to navigate in and out of the directory for it to be updated;
either way, the file online is updated.)

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
PART II: ABOVE WITH PAGEANT RUNNING
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Pageant (comes with PuTTY) is a Windows programming running in the
background that when setup properly together with r-forge will do
automatic authentication so that you do not have to enter your r-forge
password for every SVN checkout/commit/update.

II.A. GENERATE A PAIR OF PUBLIC/PRIVATE KEYS FOR SSH
1. Start PuTTYgen.  A 'PuTTYgen Key Generator' window opens.
2. Click 'Generate'.
3. Follow the instructions, i.e. move the mouse over the panel to
generate some randomness. When done, a key is generated.
5. Click "Save private key".   Do *not* enter a "key passphrase", that
is, reply "Yes" to the dialog asking you "Are you sure want to save
this key without a passphrase to protect it?".   Name the file, say,
'henrikb,20100328.ppk'.  Save it in a directory where you can find it
(default for me is under the Documents/).
6. Before closing PuTTYgen, we want to add the displayed *public key*
to the r-forge site.
7. Go to your 'My Page' -> 'Account Maintenance' at R-forge, i.e.
http://r-forge.r-project.org/account/.
8. In the 'Shell Account Information' section at the bottom of the
page, go to '[Edit Keys]'.
9. In the panel shown, paste the public key that you can copy from the
PuTTYgen panel.  The key should look something like "ssh-rsa
AAAAB3NzFOIEOROEPQPQxIDgvYxv5NZxYYjqnKUyYtPougE6R00ZLYKHZhtwyv61uLl/KkcprOBzhXIpFKn15efRr86H2psQYeDDpAB5EOc=
rsa-key-20100328" in one line (without quotation marks).
10. Click 'Update' on the r-forge page.  In the 'Shell Account
Information' section you should now see that the there is one more key
at 'SSH Shared Authorized Keys'.
11. Close PuTTYgen and the r-forge page.

II.B. ADD THE PRIVATE KEY TO THE PAGEANT CLIENT
1. Start Pageant.  It will open as a small icon in the Windows System Tray.
2. Double click on the Pageant tray icon to open the 'Pageant Key List' window.
3. Click 'Add Key'.  Locate the *ppk file saved by PuTTYgen, e.g.
'henrikb,20100328.ppk'.  Open it.
4. In the 'Pageant Key List' window, the key should now be listed,
e.g. "ssh-rsa  1024  ... rsa-key-20100328".  Note that the last part
"rsa-key-20100328" is just a comment, but it should match the "Key
comment" you saw in PuTTYgen and also at the end of the line pasted
into r-forge, cf. Step II.A.9 above.
5. You can now "Close" the Pageant window.  Pageant will keep running
in the System tray.


II.C. COMMIT A CHANGE
1. Edit the r-oo,R-forge/README file again, e.g. add a line "bar".
2. Follow the Steps I.B. above to commit.  The difference is that you
now do not have to enter the password.  Instead, Pageant will
communicate with r-forge in the background who will use the public and
private keys to exchange authentication information.


NOTE:
When I tried the above immediately after all the above steps, I was
still asked for the password.  This was at 12:40 UTC.  However, when
trying about 20 minutes later (13:01 UTC) the authentication works
automatically (no password needed).

The reason for the delay is that r-forge needs several hours in order
to update its authentication servers; this is written on the
http://r-forge.r-project.org/account/editsshkeys.php page where you
can read "This is done by a cron job, so it may not happen
immediately. Please allow for a one hour delay."  (maybe it happens at
every full hour - see above - but I don't know).  The exact time you
have to wait is unknown, and I do not know of a way to check when the
r-forge cron jobs have been run; there are no log files you check.
There are some information about r-forge cron jobs at
http://site.r-forge.r-project.org/, but they don't list the job for
the above.

Hope this helps some one

Henrik

On Sun, Mar 28, 2010 at 5:45 AM, David Scott <d.scott at auckland.ac.nz> wrote:
> Uwe Ligges wrote:
>>
>> It is really not hard to set it up. I am using a vanilla ssh (rather than
>> putty) and that works fine all the time...
>>
>> Uwe Ligges
>
>
> Ditto here. I am using ssh non commercial version with tortoise on Vista,
> and I don't recall any problems setting it up. R-forge works perfectly fine
> with windows and tortoise in my experience.
>
> Is your putty/ssh working? Can you access other machines with it? I do
> recall ssh can be a bit fussy.
>
> David Scott
>
>>
>>
>> On 27.03.2010 18:31, Gabor Grothendieck wrote:
>>>
>>> s getting commits to R-Forge to work from
>>> Windows. ?The entire system is really geared to UNIX. ?It took me a
>>> couple of days of trial and error (since you have to wait 20 minutes
>>> for each try) before I got it working. ?Although I did get it to work,
>>> I ultimately decided to host all my packages on googlecode.
>>> googlecode is extremely easy to use from Windows and does not require
>>> any public/private key, pageant, etc. ?e.g.
>>> http://sqldf.googlecode.com. ?If you already have TortoiseSVN and know
>>> how to use it then you can probably set up a googlecode site in
>>> literally 5 minutes.
>>>
>>> One other possibility. ?I think there is a way to host your project on
>>> googlecode but still have it mirrored on R-forge so from your users'
>>> viewpoint its the same as if it were on R-Forge but you can use the
>>> simpler googlecode site. ?In that case you might not need to set up
>>> commits on R-Forge since you would do all your commits through
>>> googlecode (depending on how it works) but I have not seen good
>>> documentation on how to do this.
>>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>
> --
> _________________________________________________________________
> David Scott ? ? Department of Statistics
> ? ? ? ? ? ? ? ?The University of Auckland, PB 92019
> ? ? ? ? ? ? ? ?Auckland 1142, ? ?NEW ZEALAND
> Phone: +64 9 923 5055, or +64 9 373 7599 ext 85055
> Email: ?d.scott at auckland.ac.nz, ?Fax: +64 9 373 7018
>
> Director of Consulting, Department of Statistics
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From murdoch at stats.uwo.ca  Sun Mar 28 15:32:16 2010
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Sun, 28 Mar 2010 09:32:16 -0400
Subject: [Rd] Setting up TortoiseSVN and PuTTY on Windows
 for	r-forge.r-project.org (Was: Re: Using SVN + SSH on windows)
In-Reply-To: <59d7961d1003280604r41390ad0u5dfe66a4ac39c7d6@mail.gmail.com>
References: <59d7961d1003280604r41390ad0u5dfe66a4ac39c7d6@mail.gmail.com>
Message-ID: <4BAF5A60.2030004@stats.uwo.ca>

On 28/03/2010 9:04 AM, Henrik Bengtsson wrote:
> Here are some notes/observations I've done on my setup that works for
> me. Hopefully it will be added to some r-forge documentation/wiki.
> 
> I use:
> 
> Windows Vista Business SP2 32bit
> TortoiseSVN 1.6.7 (Build 18415 - 32 Bit , 2010/01/22 17:55:06)
> PuTTY v0.60 (with Pageant v0.60)
> 
> I have a deprecated r-forge project ('r-oo') that I will use through
> out.  My r-forge username is 'henrikb'.  The URL root to this project
> is: svn+ssh://henrikb at svn.r-forge.r-project.org/svnroot/r-oo
> 
> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
> PART I: WITHOUT PAGEANT RUNNING
> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
> 
> I.A. CHECKING OUT
> 1. Create a directory somewhere, e.g. r-oo,R-forge/
> 2. Right click on r-oo,R-forge/, select 'SVN Checkout...'
> 3. In 'URL of repository', enter
> 'svn+ssh://henrikb at svn.r-forge.r-project.org/svnroot/r-oo'.
> 4. Click OK.  A 'Checkout - TortoiseSVN' window will open with a line
> saying "Command" and "Checkout from ...".
> 5. After a while, another dialog will open titled 'TortoisePlink' and
> 'henrikb at svn.r-forge.r-project.org password:' asking you to enter your
> r-forge password.
> 6. After entering the password and clicking OK, some bytes are
> downloaded, and then yet again a new 'TortoisePlink' dialog asks you
> to enter your r-forge password.
> 7. After entering the password (the 2nd time) and clicking OK, the
> actual files are downloaded; in the main ''Checkout - TortoiseSVN'
> window you will see several lines of "Added" followed by a "Completed"
> statement.  Click OK.
> 8. Look in your local r-oo,R-forge/ directory in Windows Explorer (not
> Internet Explorer); it should now be populated with directories and
> files, and (possibly hidden) .svn/ directories.  All directories,
> except the .svn/ ones, now have a small overlay icon showing a "green
> checkmark", which indicates that the local file is up to date with the
> file on the r-forge SVN repository.
> 
> 
> I.B. COMMITS
> 1. Edit r-oo,R-forge/README (which is one of the files that comes with
> all r-forge projects).  I just add one line "foo" at the top so there
> is a change.  Close the editor.
> 2. In Windows Explorer, the overlay icon now changed to a "red
> exclamation mark", indicating that the content of the file differ from
> the content available on the SVN repository.
> 3. To commit the changes to the online SVN repository, right click on
> the file, select 'SVN Commit...'
> 4. A window titled 'Commit - ...' opens.  You can enter a log message
> in the upper panel.  In the lower panel you see what files that will
> be committed.
> 5. After clicking OK to commit, the 'TortoisePlink' dialog pops up and
> asks you to enter your r-forge password.
> 6. After entering the password and clicking OK, then files will be
> sent.  In 'Commit - ...' window you will see several lines reporting
> this, e.g. "Command Commit", "Modified...", "Sending content ...", and
> "Completed ...".  Click OK.
> 7. The icon for r-oo,R-forge/README should now be a green checkmark
> (sometimes there is a delay in the update of the icon and you might
> have to navigate in and out of the directory for it to be updated;
> either way, the file online is updated.)
> 
> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
> PART II: ABOVE WITH PAGEANT RUNNING
> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
> Pageant (comes with PuTTY) is a Windows programming running in the
> background that when setup properly together with r-forge will do
> automatic authentication so that you do not have to enter your r-forge
> password for every SVN checkout/commit/update.
> 
> II.A. GENERATE A PAIR OF PUBLIC/PRIVATE KEYS FOR SSH
> 1. Start PuTTYgen.  A 'PuTTYgen Key Generator' window opens.
> 2. Click 'Generate'.
> 3. Follow the instructions, i.e. move the mouse over the panel to
> generate some randomness. When done, a key is generated.
> 5. Click "Save private key".   Do *not* enter a "key passphrase", that
> is, reply "Yes" to the dialog asking you "Are you sure want to save
> this key without a passphrase to protect it?".   Name the file, say,
> 'henrikb,20100328.ppk'.  Save it in a directory where you can find it
> (default for me is under the Documents/).

I do it with a passphrase, which requires a small change below.  The 
advantage of doing it with a passphrase is that if someone steals my 
laptop containing the key, they still won't be able to access anything 
unless they can guess my passphrase.  (I use the same key to access a 
number of things, including some that I am more concerned about 
protecting than my R-forge files.)

> 6. Before closing PuTTYgen, we want to add the displayed *public key*
> to the r-forge site.
> 7. Go to your 'My Page' -> 'Account Maintenance' at R-forge, i.e.
> http://r-forge.r-project.org/account/.
> 8. In the 'Shell Account Information' section at the bottom of the
> page, go to '[Edit Keys]'.
> 9. In the panel shown, paste the public key that you can copy from the
> PuTTYgen panel.  The key should look something like "ssh-rsa
> AAAAB3NzFOIEOROEPQPQxIDgvYxv5NZxYYjqnKUyYtPougE6R00ZLYKHZhtwyv61uLl/KkcprOBzhXIpFKn15efRr86H2psQYeDDpAB5EOc=
> rsa-key-20100328" in one line (without quotation marks).
> 10. Click 'Update' on the r-forge page.  In the 'Shell Account
> Information' section you should now see that the there is one more key
> at 'SSH Shared Authorized Keys'.
> 11. Close PuTTYgen and the r-forge page.
> 
> II.B. ADD THE PRIVATE KEY TO THE PAGEANT CLIENT
> 1. Start Pageant.  It will open as a small icon in the Windows System Tray.

I do this as part of each Windows logon, by putting the command

"...\pageant.exe" ...\foo.ppk

as a shortcut in my Startup folder.  (The ...'s are replaced with real 
paths, of course.)

This pops up a dialog where I need to enter the passphrase.  I get this 
every time I sign on to Windows which is a little irritating, but since 
I use svn+ssh for so many things, I probably make use of the key during 
almost every session.  I've become used to typing a Windows password to 
log on to Windows, then a Pageant passphrase to get access to various 
remote things.

Duncan Murdoch

> 2. Double click on the Pageant tray icon to open the 'Pageant Key List' window.
> 3. Click 'Add Key'.  Locate the *ppk file saved by PuTTYgen, e.g.
> 'henrikb,20100328.ppk'.  Open it.
> 4. In the 'Pageant Key List' window, the key should now be listed,
> e.g. "ssh-rsa  1024  ... rsa-key-20100328".  Note that the last part
> "rsa-key-20100328" is just a comment, but it should match the "Key
> comment" you saw in PuTTYgen and also at the end of the line pasted
> into r-forge, cf. Step II.A.9 above.
> 5. You can now "Close" the Pageant window.  Pageant will keep running
> in the System tray.
> 
> 
> II.C. COMMIT A CHANGE
> 1. Edit the r-oo,R-forge/README file again, e.g. add a line "bar".
> 2. Follow the Steps I.B. above to commit.  The difference is that you
> now do not have to enter the password.  Instead, Pageant will
> communicate with r-forge in the background who will use the public and
> private keys to exchange authentication information.
> 
> 
> NOTE:
> When I tried the above immediately after all the above steps, I was
> still asked for the password.  This was at 12:40 UTC.  However, when
> trying about 20 minutes later (13:01 UTC) the authentication works
> automatically (no password needed).
> 
> The reason for the delay is that r-forge needs several hours in order
> to update its authentication servers; this is written on the
> http://r-forge.r-project.org/account/editsshkeys.php page where you
> can read "This is done by a cron job, so it may not happen
> immediately. Please allow for a one hour delay."  (maybe it happens at
> every full hour - see above - but I don't know).  The exact time you
> have to wait is unknown, and I do not know of a way to check when the
> r-forge cron jobs have been run; there are no log files you check.
> There are some information about r-forge cron jobs at
> http://site.r-forge.r-project.org/, but they don't list the job for
> the above.
> 
> Hope this helps some one
> 
> Henrik
> 
> On Sun, Mar 28, 2010 at 5:45 AM, David Scott <d.scott at auckland.ac.nz> wrote:
>> Uwe Ligges wrote:
>>> It is really not hard to set it up. I am using a vanilla ssh (rather than
>>> putty) and that works fine all the time...
>>>
>>> Uwe Ligges
>>
>> Ditto here. I am using ssh non commercial version with tortoise on Vista,
>> and I don't recall any problems setting it up. R-forge works perfectly fine
>> with windows and tortoise in my experience.
>>
>> Is your putty/ssh working? Can you access other machines with it? I do
>> recall ssh can be a bit fussy.
>>
>> David Scott
>>
>>>
>>> On 27.03.2010 18:31, Gabor Grothendieck wrote:
>>>> s getting commits to R-Forge to work from
>>>> Windows.  The entire system is really geared to UNIX.  It took me a
>>>> couple of days of trial and error (since you have to wait 20 minutes
>>>> for each try) before I got it working.  Although I did get it to work,
>>>> I ultimately decided to host all my packages on googlecode.
>>>> googlecode is extremely easy to use from Windows and does not require
>>>> any public/private key, pageant, etc.  e.g.
>>>> http://sqldf.googlecode.com.  If you already have TortoiseSVN and know
>>>> how to use it then you can probably set up a googlecode site in
>>>> literally 5 minutes.
>>>>
>>>> One other possibility.  I think there is a way to host your project on
>>>> googlecode but still have it mirrored on R-forge so from your users'
>>>> viewpoint its the same as if it were on R-Forge but you can use the
>>>> simpler googlecode site.  In that case you might not need to set up
>>>> commits on R-Forge since you would do all your commits through
>>>> googlecode (depending on how it works) but I have not seen good
>>>> documentation on how to do this.
>>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>> --
>> _________________________________________________________________
>> David Scott     Department of Statistics
>>                The University of Auckland, PB 92019
>>                Auckland 1142,    NEW ZEALAND
>> Phone: +64 9 923 5055, or +64 9 373 7599 ext 85055
>> Email:  d.scott at auckland.ac.nz,  Fax: +64 9 373 7018
>>
>> Director of Consulting, Department of Statistics
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From ggrothendieck at gmail.com  Sun Mar 28 17:22:45 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sun, 28 Mar 2010 11:22:45 -0400
Subject: [Rd] Setting up TortoiseSVN and PuTTY on Windows for
	r-forge.r-project.org (Was: Re: Using SVN + SSH on windows)
In-Reply-To: <59d7961d1003280604r41390ad0u5dfe66a4ac39c7d6@mail.gmail.com>
References: <59d7961d1003280604r41390ad0u5dfe66a4ac39c7d6@mail.gmail.com>
Message-ID: <971536df1003280822u11ac2258r42b581c6d4692375@mail.gmail.com>

One other tip.  There is a utility:

   show-svn-info.hta

in the batchfiles distribution. Home page at: http://batchfiles.googlecode.com

Running it from the command line without arguments in a checkout
folder will produce a popup screen with various information about that
checkout directory that might help in diagnosing problems such as
having the wrong URL.

For example, when run in the sqldf checkout folder on my machine this
appears. (The example uses googlecode but the utility is independent
of the subversion server so it works with R-Forge based checkout
directories too.) The first section consists of clickable links and
the second section has info on the checkout directory:

Tortoise SubVersion
batchfiles home page (CRAN)
Tortoise SVN home page (Help) (Forum) (Devel Forum)

Revision = 48
Min Revision = 22
Max Revision = 48
Date = 2010/02/13 07:05:40
URL = https://sqldf.googlecode.com/svn/trunk
Author = ggrothendieck
HasMods = true


On Sun, Mar 28, 2010 at 9:04 AM, Henrik Bengtsson <hb at stat.berkeley.edu> wrote:
> Here are some notes/observations I've done on my setup that works for
> me. Hopefully it will be added to some r-forge documentation/wiki.
>
> I use:
>
> Windows Vista Business SP2 32bit
> TortoiseSVN 1.6.7 (Build 18415 - 32 Bit , 2010/01/22 17:55:06)
> PuTTY v0.60 (with Pageant v0.60)
>
> I have a deprecated r-forge project ('r-oo') that I will use through
> out. ?My r-forge username is 'henrikb'. ?The URL root to this project
> is: svn+ssh://henrikb at svn.r-forge.r-project.org/svnroot/r-oo
>
> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
> PART I: WITHOUT PAGEANT RUNNING
> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
>
> I.A. CHECKING OUT
> 1. Create a directory somewhere, e.g. r-oo,R-forge/
> 2. Right click on r-oo,R-forge/, select 'SVN Checkout...'
> 3. In 'URL of repository', enter
> 'svn+ssh://henrikb at svn.r-forge.r-project.org/svnroot/r-oo'.
> 4. Click OK. ?A 'Checkout - TortoiseSVN' window will open with a line
> saying "Command" and "Checkout from ...".
> 5. After a while, another dialog will open titled 'TortoisePlink' and
> 'henrikb at svn.r-forge.r-project.org password:' asking you to enter your
> r-forge password.
> 6. After entering the password and clicking OK, some bytes are
> downloaded, and then yet again a new 'TortoisePlink' dialog asks you
> to enter your r-forge password.
> 7. After entering the password (the 2nd time) and clicking OK, the
> actual files are downloaded; in the main ''Checkout - TortoiseSVN'
> window you will see several lines of "Added" followed by a "Completed"
> statement. ?Click OK.
> 8. Look in your local r-oo,R-forge/ directory in Windows Explorer (not
> Internet Explorer); it should now be populated with directories and
> files, and (possibly hidden) .svn/ directories. ?All directories,
> except the .svn/ ones, now have a small overlay icon showing a "green
> checkmark", which indicates that the local file is up to date with the
> file on the r-forge SVN repository.
>
>
> I.B. COMMITS
> 1. Edit r-oo,R-forge/README (which is one of the files that comes with
> all r-forge projects). ?I just add one line "foo" at the top so there
> is a change. ?Close the editor.
> 2. In Windows Explorer, the overlay icon now changed to a "red
> exclamation mark", indicating that the content of the file differ from
> the content available on the SVN repository.
> 3. To commit the changes to the online SVN repository, right click on
> the file, select 'SVN Commit...'
> 4. A window titled 'Commit - ...' opens. ?You can enter a log message
> in the upper panel. ?In the lower panel you see what files that will
> be committed.
> 5. After clicking OK to commit, the 'TortoisePlink' dialog pops up and
> asks you to enter your r-forge password.
> 6. After entering the password and clicking OK, then files will be
> sent. ?In 'Commit - ...' window you will see several lines reporting
> this, e.g. "Command Commit", "Modified...", "Sending content ...", and
> "Completed ...". ?Click OK.
> 7. The icon for r-oo,R-forge/README should now be a green checkmark
> (sometimes there is a delay in the update of the icon and you might
> have to navigate in and out of the directory for it to be updated;
> either way, the file online is updated.)
>
> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
> PART II: ABOVE WITH PAGEANT RUNNING
> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
> Pageant (comes with PuTTY) is a Windows programming running in the
> background that when setup properly together with r-forge will do
> automatic authentication so that you do not have to enter your r-forge
> password for every SVN checkout/commit/update.
>
> II.A. GENERATE A PAIR OF PUBLIC/PRIVATE KEYS FOR SSH
> 1. Start PuTTYgen. ?A 'PuTTYgen Key Generator' window opens.
> 2. Click 'Generate'.
> 3. Follow the instructions, i.e. move the mouse over the panel to
> generate some randomness. When done, a key is generated.
> 5. Click "Save private key". ? Do *not* enter a "key passphrase", that
> is, reply "Yes" to the dialog asking you "Are you sure want to save
> this key without a passphrase to protect it?". ? Name the file, say,
> 'henrikb,20100328.ppk'. ?Save it in a directory where you can find it
> (default for me is under the Documents/).
> 6. Before closing PuTTYgen, we want to add the displayed *public key*
> to the r-forge site.
> 7. Go to your 'My Page' -> 'Account Maintenance' at R-forge, i.e.
> http://r-forge.r-project.org/account/.
> 8. In the 'Shell Account Information' section at the bottom of the
> page, go to '[Edit Keys]'.
> 9. In the panel shown, paste the public key that you can copy from the
> PuTTYgen panel. ?The key should look something like "ssh-rsa
> AAAAB3NzFOIEOROEPQPQxIDgvYxv5NZxYYjqnKUyYtPougE6R00ZLYKHZhtwyv61uLl/KkcprOBzhXIpFKn15efRr86H2psQYeDDpAB5EOc=
> rsa-key-20100328" in one line (without quotation marks).
> 10. Click 'Update' on the r-forge page. ?In the 'Shell Account
> Information' section you should now see that the there is one more key
> at 'SSH Shared Authorized Keys'.
> 11. Close PuTTYgen and the r-forge page.
>
> II.B. ADD THE PRIVATE KEY TO THE PAGEANT CLIENT
> 1. Start Pageant. ?It will open as a small icon in the Windows System Tray.
> 2. Double click on the Pageant tray icon to open the 'Pageant Key List' window.
> 3. Click 'Add Key'. ?Locate the *ppk file saved by PuTTYgen, e.g.
> 'henrikb,20100328.ppk'. ?Open it.
> 4. In the 'Pageant Key List' window, the key should now be listed,
> e.g. "ssh-rsa ?1024 ?... rsa-key-20100328". ?Note that the last part
> "rsa-key-20100328" is just a comment, but it should match the "Key
> comment" you saw in PuTTYgen and also at the end of the line pasted
> into r-forge, cf. Step II.A.9 above.
> 5. You can now "Close" the Pageant window. ?Pageant will keep running
> in the System tray.
>
>
> II.C. COMMIT A CHANGE
> 1. Edit the r-oo,R-forge/README file again, e.g. add a line "bar".
> 2. Follow the Steps I.B. above to commit. ?The difference is that you
> now do not have to enter the password. ?Instead, Pageant will
> communicate with r-forge in the background who will use the public and
> private keys to exchange authentication information.
>
>
> NOTE:
> When I tried the above immediately after all the above steps, I was
> still asked for the password. ?This was at 12:40 UTC. ?However, when
> trying about 20 minutes later (13:01 UTC) the authentication works
> automatically (no password needed).
>
> The reason for the delay is that r-forge needs several hours in order
> to update its authentication servers; this is written on the
> http://r-forge.r-project.org/account/editsshkeys.php page where you
> can read "This is done by a cron job, so it may not happen
> immediately. Please allow for a one hour delay." ?(maybe it happens at
> every full hour - see above - but I don't know). ?The exact time you
> have to wait is unknown, and I do not know of a way to check when the
> r-forge cron jobs have been run; there are no log files you check.
> There are some information about r-forge cron jobs at
> http://site.r-forge.r-project.org/, but they don't list the job for
> the above.
>
> Hope this helps some one
>
> Henrik
>
> On Sun, Mar 28, 2010 at 5:45 AM, David Scott <d.scott at auckland.ac.nz> wrote:
>> Uwe Ligges wrote:
>>>
>>> It is really not hard to set it up. I am using a vanilla ssh (rather than
>>> putty) and that works fine all the time...
>>>
>>> Uwe Ligges
>>
>>
>> Ditto here. I am using ssh non commercial version with tortoise on Vista,
>> and I don't recall any problems setting it up. R-forge works perfectly fine
>> with windows and tortoise in my experience.
>>
>> Is your putty/ssh working? Can you access other machines with it? I do
>> recall ssh can be a bit fussy.
>>
>> David Scott
>>
>>>
>>>
>>> On 27.03.2010 18:31, Gabor Grothendieck wrote:
>>>>
>>>> s getting commits to R-Forge to work from
>>>> Windows. ?The entire system is really geared to UNIX. ?It took me a
>>>> couple of days of trial and error (since you have to wait 20 minutes
>>>> for each try) before I got it working. ?Although I did get it to work,
>>>> I ultimately decided to host all my packages on googlecode.
>>>> googlecode is extremely easy to use from Windows and does not require
>>>> any public/private key, pageant, etc. ?e.g.
>>>> http://sqldf.googlecode.com. ?If you already have TortoiseSVN and know
>>>> how to use it then you can probably set up a googlecode site in
>>>> literally 5 minutes.
>>>>
>>>> One other possibility. ?I think there is a way to host your project on
>>>> googlecode but still have it mirrored on R-forge so from your users'
>>>> viewpoint its the same as if it were on R-Forge but you can use the
>>>> simpler googlecode site. ?In that case you might not need to set up
>>>> commits on R-Forge since you would do all your commits through
>>>> googlecode (depending on how it works) but I have not seen good
>>>> documentation on how to do this.
>>>>
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>> --
>> _________________________________________________________________
>> David Scott ? ? Department of Statistics
>> ? ? ? ? ? ? ? ?The University of Auckland, PB 92019
>> ? ? ? ? ? ? ? ?Auckland 1142, ? ?NEW ZEALAND
>> Phone: +64 9 923 5055, or +64 9 373 7599 ext 85055
>> Email: ?d.scott at auckland.ac.nz, ?Fax: +64 9 373 7018
>>
>> Director of Consulting, Department of Statistics
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From hb at stat.berkeley.edu  Sun Mar 28 18:34:37 2010
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Sun, 28 Mar 2010 18:34:37 +0200
Subject: [Rd] Possible improvements/clarifications for R-forge (Was: Re:
	Using SVN + SSH on windows)
Message-ID: <59d7961d1003280934jc914fa6i253a1aa34b93477e@mail.gmail.com>

Hi,

first, r-forge.r-project.org is filling a need and provides a great
service to the community.  Please read this thread as sincere feedback
for making it even better, not as a complaint.  I fully understand
that r-forge is ran by limited resources and on a volunteer basis.
I'll list some points about r-forge that I think could be
improved/clarified.  Not expecting anything, just sharing my
experience.


1. Part of the R-forge services runs on a schedule, e.g. building and
checking packages.  As a user you do not really know when this
happens.

Some of this is documented at http://site.r-forge.r-project.org/, but
not everything, e.g. as seen in another message on r-devel, the cron
job for updating SSH keys is not specified.  Moreover, all static
documentation tends to become outdated.  In other words, as a user I
am not certain that http://site.r-forge.r-project.org/ is up to date.

Providing some kind of online log of what the r-forge servers are
doing would help the user to plan, troubleshoot etc.  Right now there
are too many degrees of freedom to figure out what and when things
happens.  The Bioconductor project provides a small log summary/status
with timestamps of the last run, cf. small box at the top of
http://bioconductor.org/checkResults/2.6/bioc-LATEST/.



2. It is not possible to check the R CMD build/check log files for
other people's packages.

The log files are considered private to the project members.  This
means that I cannot troubleshoot other packages part of projects that
I am not a member.  This limits my chances to troubleshoot problems I
have when my package depends on an external package.  It also limits
my chances to contribute with troubleshooting/bug reports for other
packages.  This is one of the features that makes the Bioconductor
repository a success. Making these log files public would improve lots
of things.


3. For some OSes, the log files for the build and check of packages are missing.

For instance, none of my packages has log files for Linux x86_32, e.g.
"Logfile for R.batch not available.".  It is not clear if this is
because I made something wrong, or this is the flavor of the day, or a
permanent error.  (I looks permanent for "Linux x86_32", but not sure
about the others).

Being able to access the r-forge server logs, similar to the
Bioconductor status box, would help.



4. It is not clear how dependencies are dealt with in the build/check process.

If I have r-forge packages A v1.0.0, B v1.0.0, and C v1.0.0, and
package A depends on B (>= 1.0.0) and package B depends on C (>=
1.0.0), when are these packages built?  Are they built in
lexicographic order or in some optimized order?  For instance, if I
bump the versions of the packages and the dependencies to B (>= 1.1.0)
and C (>= 1.1.0), when will package A be build and available?  If
there is a lexicographic build/cron cycle, will it take three cycles?
Will A and B fail in the first cycle when only C is build.  Then in
the 2nd cycle, will A fail and B and C build, and in the 3rd cycle
also A will build?

Again/thus, when my package A is not available, is that because I did
something wrong, the cron job had hiccups is delayed, or something
else.  Seeing the full server logs or other status reports would help.



5. No https access - only svn+ssh access with private/public keys

The svn+ssh protocol for SVN commits is a show stopper for people who
never used SVN or ssh authentication keys before.  It is easy for
someone who knows how it should work, but quite hard to troubleshoot
if you don't know what to expect.  It is hard to help someone get
started without being next to them on their computer.  This makes it
hard to convince people who "don't really" care to start using SVN and
r-forge (which would improve overall quality in the long run).
Supporting SVN commits over https would lower this threshold.



6. The r-forge forum is not really active.

There is a forum at https://r-forge.r-project.org/forum/?group_id=34,
but it is not very active and several questions are unanswered.  In
order catch momentum, I think posting r-forge questions to r-devel
would work better and reach more people that can help out.  (This is
why this is posted to r-devel).


Cheers,

Henrik

On Sun, Mar 28, 2010 at 5:45 AM, David Scott <d.scott at auckland.ac.nz> wrote:
> Uwe Ligges wrote:
>>
>> It is really not hard to set it up. I am using a vanilla ssh (rather than
>> putty) and that works fine all the time...
>>
>> Uwe Ligges
>
>
> Ditto here. I am using ssh non commercial version with tortoise on Vista,
> and I don't recall any problems setting it up. R-forge works perfectly fine
> with windows and tortoise in my experience.
>
> Is your putty/ssh working? Can you access other machines with it? I do
> recall ssh can be a bit fussy.
>
> David Scott
>
>>
>>
>> On 27.03.2010 18:31, Gabor Grothendieck wrote:
>>>
>>> s getting commits to R-Forge to work from
>>> Windows. ?The entire system is really geared to UNIX. ?It took me a
>>> couple of days of trial and error (since you have to wait 20 minutes
>>> for each try) before I got it working. ?Although I did get it to work,
>>> I ultimately decided to host all my packages on googlecode.
>>> googlecode is extremely easy to use from Windows and does not require
>>> any public/private key, pageant, etc. ?e.g.
>>> http://sqldf.googlecode.com. ?If you already have TortoiseSVN and know
>>> how to use it then you can probably set up a googlecode site in
>>> literally 5 minutes.
>>>
>>> One other possibility. ?I think there is a way to host your project on
>>> googlecode but still have it mirrored on R-forge so from your users'
>>> viewpoint its the same as if it were on R-Forge but you can use the
>>> simpler googlecode site. ?In that case you might not need to set up
>>> commits on R-Forge since you would do all your commits through
>>> googlecode (depending on how it works) but I have not seen good
>>> documentation on how to do this.
>>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>
> --
> _________________________________________________________________
> David Scott ? ? Department of Statistics
> ? ? ? ? ? ? ? ?The University of Auckland, PB 92019
> ? ? ? ? ? ? ? ?Auckland 1142, ? ?NEW ZEALAND
> Phone: +64 9 923 5055, or +64 9 373 7599 ext 85055
> Email: ?d.scott at auckland.ac.nz, ?Fax: +64 9 373 7018
>
> Director of Consulting, Department of Statistics
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From ligges at statistik.tu-dortmund.de  Sun Mar 28 18:49:33 2010
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sun, 28 Mar 2010 18:49:33 +0200
Subject: [Rd] Possible improvements/clarifications for R-forge (Was: Re:
 Using SVN + SSH on windows)
In-Reply-To: <59d7961d1003280934jc914fa6i253a1aa34b93477e@mail.gmail.com>
References: <59d7961d1003280934jc914fa6i253a1aa34b93477e@mail.gmail.com>
Message-ID: <4BAF889D.5060109@statistik.tu-dortmund.de>

I wonder why nobody included the R-forge maintainer in this thread so 
far. Let me add Stefan now.

Best wishes,
Uwe



On 28.03.2010 18:34, Henrik Bengtsson wrote:
> Hi,
>
> first, r-forge.r-project.org is filling a need and provides a great
> service to the community.  Please read this thread as sincere feedback
> for making it even better, not as a complaint.  I fully understand
> that r-forge is ran by limited resources and on a volunteer basis.
> I'll list some points about r-forge that I think could be
> improved/clarified.  Not expecting anything, just sharing my
> experience.
>
>
> 1. Part of the R-forge services runs on a schedule, e.g. building and
> checking packages.  As a user you do not really know when this
> happens.
>
> Some of this is documented at http://site.r-forge.r-project.org/, but
> not everything, e.g. as seen in another message on r-devel, the cron
> job for updating SSH keys is not specified.  Moreover, all static
> documentation tends to become outdated.  In other words, as a user I
> am not certain that http://site.r-forge.r-project.org/ is up to date.
>
> Providing some kind of online log of what the r-forge servers are
> doing would help the user to plan, troubleshoot etc.  Right now there
> are too many degrees of freedom to figure out what and when things
> happens.  The Bioconductor project provides a small log summary/status
> with timestamps of the last run, cf. small box at the top of
> http://bioconductor.org/checkResults/2.6/bioc-LATEST/.
>
>
>
> 2. It is not possible to check the R CMD build/check log files for
> other people's packages.
>
> The log files are considered private to the project members.  This
> means that I cannot troubleshoot other packages part of projects that
> I am not a member.  This limits my chances to troubleshoot problems I
> have when my package depends on an external package.  It also limits
> my chances to contribute with troubleshooting/bug reports for other
> packages.  This is one of the features that makes the Bioconductor
> repository a success. Making these log files public would improve lots
> of things.
>
>
> 3. For some OSes, the log files for the build and check of packages are missing.
>
> For instance, none of my packages has log files for Linux x86_32, e.g.
> "Logfile for R.batch not available.".  It is not clear if this is
> because I made something wrong, or this is the flavor of the day, or a
> permanent error.  (I looks permanent for "Linux x86_32", but not sure
> about the others).
>
> Being able to access the r-forge server logs, similar to the
> Bioconductor status box, would help.
>
>
>
> 4. It is not clear how dependencies are dealt with in the build/check process.
>
> If I have r-forge packages A v1.0.0, B v1.0.0, and C v1.0.0, and
> package A depends on B (>= 1.0.0) and package B depends on C (>=
> 1.0.0), when are these packages built?  Are they built in
> lexicographic order or in some optimized order?  For instance, if I
> bump the versions of the packages and the dependencies to B (>= 1.1.0)
> and C (>= 1.1.0), when will package A be build and available?  If
> there is a lexicographic build/cron cycle, will it take three cycles?
> Will A and B fail in the first cycle when only C is build.  Then in
> the 2nd cycle, will A fail and B and C build, and in the 3rd cycle
> also A will build?
>
> Again/thus, when my package A is not available, is that because I did
> something wrong, the cron job had hiccups is delayed, or something
> else.  Seeing the full server logs or other status reports would help.
>
>
>
> 5. No https access - only svn+ssh access with private/public keys
>
> The svn+ssh protocol for SVN commits is a show stopper for people who
> never used SVN or ssh authentication keys before.  It is easy for
> someone who knows how it should work, but quite hard to troubleshoot
> if you don't know what to expect.  It is hard to help someone get
> started without being next to them on their computer.  This makes it
> hard to convince people who "don't really" care to start using SVN and
> r-forge (which would improve overall quality in the long run).
> Supporting SVN commits over https would lower this threshold.
>
>
>
> 6. The r-forge forum is not really active.
>
> There is a forum at https://r-forge.r-project.org/forum/?group_id=34,
> but it is not very active and several questions are unanswered.  In
> order catch momentum, I think posting r-forge questions to r-devel
> would work better and reach more people that can help out.  (This is
> why this is posted to r-devel).
>
>
> Cheers,
>
> Henrik
>
> On Sun, Mar 28, 2010 at 5:45 AM, David Scott<d.scott at auckland.ac.nz>  wrote:
>> Uwe Ligges wrote:
>>>
>>> It is really not hard to set it up. I am using a vanilla ssh (rather than
>>> putty) and that works fine all the time...
>>>
>>> Uwe Ligges
>>
>>
>> Ditto here. I am using ssh non commercial version with tortoise on Vista,
>> and I don't recall any problems setting it up. R-forge works perfectly fine
>> with windows and tortoise in my experience.
>>
>> Is your putty/ssh working? Can you access other machines with it? I do
>> recall ssh can be a bit fussy.
>>
>> David Scott
>>
>>>
>>>
>>> On 27.03.2010 18:31, Gabor Grothendieck wrote:
>>>>
>>>> s getting commits to R-Forge to work from
>>>> Windows.  The entire system is really geared to UNIX.  It took me a
>>>> couple of days of trial and error (since you have to wait 20 minutes
>>>> for each try) before I got it working.  Although I did get it to work,
>>>> I ultimately decided to host all my packages on googlecode.
>>>> googlecode is extremely easy to use from Windows and does not require
>>>> any public/private key, pageant, etc.  e.g.
>>>> http://sqldf.googlecode.com.  If you already have TortoiseSVN and know
>>>> how to use it then you can probably set up a googlecode site in
>>>> literally 5 minutes.
>>>>
>>>> One other possibility.  I think there is a way to host your project on
>>>> googlecode but still have it mirrored on R-forge so from your users'
>>>> viewpoint its the same as if it were on R-Forge but you can use the
>>>> simpler googlecode site.  In that case you might not need to set up
>>>> commits on R-Forge since you would do all your commits through
>>>> googlecode (depending on how it works) but I have not seen good
>>>> documentation on how to do this.
>>>>
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>> --
>> _________________________________________________________________
>> David Scott     Department of Statistics
>>                 The University of Auckland, PB 92019
>>                 Auckland 1142,    NEW ZEALAND
>> Phone: +64 9 923 5055, or +64 9 373 7599 ext 85055
>> Email:  d.scott at auckland.ac.nz,  Fax: +64 9 373 7018
>>
>> Director of Consulting, Department of Statistics
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>


From cgenolin at u-paris10.fr  Sun Mar 28 19:28:57 2010
From: cgenolin at u-paris10.fr (Christophe Genolini)
Date: Sun, 28 Mar 2010 19:28:57 +0200
Subject: [Rd] Possible improvements/clarifications for R-forge (Was: Re:
 Using SVN + SSH on windows)
In-Reply-To: <4BAF889D.5060109@statistik.tu-dortmund.de>
References: <59d7961d1003280934jc914fa6i253a1aa34b93477e@mail.gmail.com>
	<4BAF889D.5060109@statistik.tu-dortmund.de>
Message-ID: <4BAF91D9.6000504@u-paris10.fr>

Wahou! I did not plan to start such a debate...
>> It is really not hard to set it up. I am using a vanilla ssh (rather 
>> than putty) and that works fine all the time...
The problem is not how hard or easy it is, the problem is how time 
consuming it is.

I am pretty sur that I will manage to make it work. But when? I allready 
lose three hours Friday and two hour on saturday... That's definitly too 
much. Because I am not an engeneer in computing, I am a researcher. To 
make my research, I have to be expert in longitudinal data, in 
clustering, in anorexia, I have to speak english, I have to know R, and 
C, and package managing, and LaTeX, and gimp, and... and... and...
There is so many things to know... I can not be expert in all.

So I do not have time to (and I do not want to) explore all the ssh 
subtulties... Worse, I have a project, I manage to find some people that 
want to work on the projet (but that also have a lot of other staff to 
do), I do not want them to give up because it will take to much time for 
them to make ssh run.

Generalier, I think that anything should be done to make tools easy to 
use for non-expert, because more and more R user are occasional user. 
They are not experts, they don't want to become expert. They are just 
feed up to pay a lot of money for SPSS or Stata... But I guess this is 
another debate.

Christophe

> I wonder why nobody included the R-forge maintainer in this thread so 
> far. Let me add Stefan now.
>
> Best wishes,
> Uwe
>
>
>
> On 28.03.2010 18:34, Henrik Bengtsson wrote:
>> Hi,
>>
>> first, r-forge.r-project.org is filling a need and provides a great
>> service to the community.  Please read this thread as sincere feedback
>> for making it even better, not as a complaint.  I fully understand
>> that r-forge is ran by limited resources and on a volunteer basis.
>> I'll list some points about r-forge that I think could be
>> improved/clarified.  Not expecting anything, just sharing my
>> experience.
>>
>>
>> 1. Part of the R-forge services runs on a schedule, e.g. building and
>> checking packages.  As a user you do not really know when this
>> happens.
>>
>> Some of this is documented at http://site.r-forge.r-project.org/, but
>> not everything, e.g. as seen in another message on r-devel, the cron
>> job for updating SSH keys is not specified.  Moreover, all static
>> documentation tends to become outdated.  In other words, as a user I
>> am not certain that http://site.r-forge.r-project.org/ is up to date.
>>
>> Providing some kind of online log of what the r-forge servers are
>> doing would help the user to plan, troubleshoot etc.  Right now there
>> are too many degrees of freedom to figure out what and when things
>> happens.  The Bioconductor project provides a small log summary/status
>> with timestamps of the last run, cf. small box at the top of
>> http://bioconductor.org/checkResults/2.6/bioc-LATEST/.
>>
>>
>>
>> 2. It is not possible to check the R CMD build/check log files for
>> other people's packages.
>>
>> The log files are considered private to the project members.  This
>> means that I cannot troubleshoot other packages part of projects that
>> I am not a member.  This limits my chances to troubleshoot problems I
>> have when my package depends on an external package.  It also limits
>> my chances to contribute with troubleshooting/bug reports for other
>> packages.  This is one of the features that makes the Bioconductor
>> repository a success. Making these log files public would improve lots
>> of things.
>>
>>
>> 3. For some OSes, the log files for the build and check of packages 
>> are missing.
>>
>> For instance, none of my packages has log files for Linux x86_32, e.g.
>> "Logfile for R.batch not available.".  It is not clear if this is
>> because I made something wrong, or this is the flavor of the day, or a
>> permanent error.  (I looks permanent for "Linux x86_32", but not sure
>> about the others).
>>
>> Being able to access the r-forge server logs, similar to the
>> Bioconductor status box, would help.
>>
>>
>>
>> 4. It is not clear how dependencies are dealt with in the build/check 
>> process.
>>
>> If I have r-forge packages A v1.0.0, B v1.0.0, and C v1.0.0, and
>> package A depends on B (>= 1.0.0) and package B depends on C (>=
>> 1.0.0), when are these packages built?  Are they built in
>> lexicographic order or in some optimized order?  For instance, if I
>> bump the versions of the packages and the dependencies to B (>= 1.1.0)
>> and C (>= 1.1.0), when will package A be build and available?  If
>> there is a lexicographic build/cron cycle, will it take three cycles?
>> Will A and B fail in the first cycle when only C is build.  Then in
>> the 2nd cycle, will A fail and B and C build, and in the 3rd cycle
>> also A will build?
>>
>> Again/thus, when my package A is not available, is that because I did
>> something wrong, the cron job had hiccups is delayed, or something
>> else.  Seeing the full server logs or other status reports would help.
>>
>>
>>
>> 5. No https access - only svn+ssh access with private/public keys
>>
>> The svn+ssh protocol for SVN commits is a show stopper for people who
>> never used SVN or ssh authentication keys before.  It is easy for
>> someone who knows how it should work, but quite hard to troubleshoot
>> if you don't know what to expect.  It is hard to help someone get
>> started without being next to them on their computer.  This makes it
>> hard to convince people who "don't really" care to start using SVN and
>> r-forge (which would improve overall quality in the long run).
>> Supporting SVN commits over https would lower this threshold.
>>
>>
>>
>> 6. The r-forge forum is not really active.
>>
>> There is a forum at https://r-forge.r-project.org/forum/?group_id=34,
>> but it is not very active and several questions are unanswered.  In
>> order catch momentum, I think posting r-forge questions to r-devel
>> would work better and reach more people that can help out.  (This is
>> why this is posted to r-devel).
>>
>>
>> Cheers,
>>
>> Henrik
>>
>> On Sun, Mar 28, 2010 at 5:45 AM, David Scott<d.scott at auckland.ac.nz>  
>> wrote:
>>> Uwe Ligges wrote:
>>>>
>>>> It is really not hard to set it up. I am using a vanilla ssh 
>>>> (rather than
>>>> putty) and that works fine all the time...
>>>>
>>>> Uwe Ligges
>>>
>>>
>>> Ditto here. I am using ssh non commercial version with tortoise on 
>>> Vista,
>>> and I don't recall any problems setting it up. R-forge works 
>>> perfectly fine
>>> with windows and tortoise in my experience.
>>>
>>> Is your putty/ssh working? Can you access other machines with it? I do
>>> recall ssh can be a bit fussy.
>>>
>>> David Scott
>>>
>>>>
>>>>
>>>> On 27.03.2010 18:31, Gabor Grothendieck wrote:
>>>>>
>>>>> s getting commits to R-Forge to work from
>>>>> Windows.  The entire system is really geared to UNIX.  It took me a
>>>>> couple of days of trial and error (since you have to wait 20 minutes
>>>>> for each try) before I got it working.  Although I did get it to 
>>>>> work,
>>>>> I ultimately decided to host all my packages on googlecode.
>>>>> googlecode is extremely easy to use from Windows and does not require
>>>>> any public/private key, pageant, etc.  e.g.
>>>>> http://sqldf.googlecode.com.  If you already have TortoiseSVN and 
>>>>> know
>>>>> how to use it then you can probably set up a googlecode site in
>>>>> literally 5 minutes.
>>>>>
>>>>> One other possibility.  I think there is a way to host your 
>>>>> project on
>>>>> googlecode but still have it mirrored on R-forge so from your users'
>>>>> viewpoint its the same as if it were on R-Forge but you can use the
>>>>> simpler googlecode site.  In that case you might not need to set up
>>>>> commits on R-Forge since you would do all your commits through
>>>>> googlecode (depending on how it works) but I have not seen good
>>>>> documentation on how to do this.
>>>>>
>>>>
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>>
>>> -- 
>>> _________________________________________________________________
>>> David Scott     Department of Statistics
>>>                 The University of Auckland, PB 92019
>>>                 Auckland 1142,    NEW ZEALAND
>>> Phone: +64 9 923 5055, or +64 9 373 7599 ext 85055
>>> Email:  d.scott at auckland.ac.nz,  Fax: +64 9 373 7018
>>>
>>> Director of Consulting, Department of Statistics
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>


From ggrothendieck at gmail.com  Sun Mar 28 19:49:26 2010
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sun, 28 Mar 2010 13:49:26 -0400
Subject: [Rd] Possible improvements/clarifications for R-forge (Was: Re:
	Using SVN + SSH on windows)
In-Reply-To: <59d7961d1003280934jc914fa6i253a1aa34b93477e@mail.gmail.com>
References: <59d7961d1003280934jc914fa6i253a1aa34b93477e@mail.gmail.com>
Message-ID: <971536df1003281049s4bef1f99md256cdc23217983d@mail.gmail.com>

I agree that the R-Forge system is solid once you have it going but
its better if you are Linux based and less attractive if you are
Windows based. In particular if the two problems I cited before (use
of ssh and the delay) were addressed then together with the key
feature of automatic builds that it already has then it would be
usable for commits by Windows users.

What I don't agree with is that its easy on Windows if you know ssh.
I know ssh and have configured many Linux machines with it but it took
me two days to get R-Forge working on a Windows machine since trial
and error fiddling involves a delay for each attempt.  If you are
lucky it will work on your first attempt but if that one fails then
you are in for a potentially long series of trial and error attempts
potentially taking days.

Getting back to the original poster who may have been forgotten in all
this, alternatives are switching to Linux and using R-Forge with that
(if such a switch in platforms is feasible) or using googlecode
(that's the largest repository of R projects outside of CRAN with 237
R projects listed -- it uses https rather than ssh which eliminates
all the problems).

On Sun, Mar 28, 2010 at 12:34 PM, Henrik Bengtsson <hb at stat.berkeley.edu> wrote:
> 5. No https access - only svn+ssh access with private/public keys
>
> The svn+ssh protocol for SVN commits is a show stopper for people who
> never used SVN or ssh authentication keys before. ?It is easy for
> someone who knows how it should work, but quite hard to troubleshoot
> if you don't know what to expect. ?It is hard to help someone get
> started without being next to them on their computer. ?This makes it
> hard to convince people who "don't really" care to start using SVN and
> r-forge (which would improve overall quality in the long run).
> Supporting SVN commits over https would lower this threshold.


From cgenolin at u-paris10.fr  Mon Mar 29 12:15:22 2010
From: cgenolin at u-paris10.fr (cgenolin at u-paris10.fr)
Date: Mon, 29 Mar 2010 12:15:22 +0200
Subject: [Rd] Possible improvements/clarifications for R-forge (Was:	Re:
	Using SVN + SSH on windows)
Message-ID: <20100329121522.m9zqfdl2ecwo4ggc@webmail.u-paris10.fr>


> Getting back to the original poster who may have been forgotten in all
> this, alternatives are switching to Linux and using R-Forge with that
> (if such a switch in platforms is feasible) or using googlecode
> (that's the largest repository of R projects outside of CRAN with 237
> R projects listed -- it uses https rather than ssh which eliminates
> all the problems).

Naive question: Is it not possible to make R-forge works either with 
ssh or with https?


From hb at stat.berkeley.edu  Mon Mar 29 12:50:49 2010
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Mon, 29 Mar 2010 12:50:49 +0200
Subject: [Rd] Possible improvements/clarifications for R-forge (Was: Re:
	Using SVN + SSH on windows)
In-Reply-To: <20100329121522.m9zqfdl2ecwo4ggc@webmail.u-paris10.fr>
References: <20100329121522.m9zqfdl2ecwo4ggc@webmail.u-paris10.fr>
Message-ID: <59d7961d1003290350p2eb96228h39a54e1abd342919@mail.gmail.com>

On Mon, Mar 29, 2010 at 12:15 PM,  <cgenolin at u-paris10.fr> wrote:
>
>> Getting back to the original poster who may have been forgotten in all
>> this, alternatives are switching to Linux and using R-Forge with that
>> (if such a switch in platforms is feasible) or using googlecode
>> (that's the largest repository of R projects outside of CRAN with 237
>> R projects listed -- it uses https rather than ssh which eliminates
>> all the problems).
>
> Naive question: Is it not possible to make R-forge works either with ssh or
> with https?

AFAIK, no - see Point 5 in my initial post in this thread ('[Rd]
Possible improvements/clarifications for R-forge'; 2010-03-28).

/Henrik

>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From hb at stat.berkeley.edu  Mon Mar 29 12:54:25 2010
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Mon, 29 Mar 2010 12:54:25 +0200
Subject: [Rd] Using SVN + SSH on windows
In-Reply-To: <4BAED0C8.8050203@auckland.ac.nz>
References: <4BAE124D.6000406@u-paris10.fr>
	<4BAE2B7D.8060800@statistik.tu-dortmund.de>
	<971536df1003271031h473dccay99d2b6b08b0e13ca@mail.gmail.com>
	<4BAE41A1.3010309@statistik.tu-dortmund.de>
	<4BAED0C8.8050203@auckland.ac.nz>
Message-ID: <59d7961d1003290354p67c7d1dfge6980952a8b0268c@mail.gmail.com>

Christophe, if you want to solve your problem, please see if you first
can do it *without* ssh-keys.  *Only* when that is working, worry
about the ssh keys.  For detailed information on both cases, see by
Thread '[Rd] Setting up TortoiseSVN and PuTTY on Windows for
r-forge.r-project.org' on 2010-03-28.

/Henrik

On Sun, Mar 28, 2010 at 5:45 AM, David Scott <d.scott at auckland.ac.nz> wrote:
> Uwe Ligges wrote:
>>
>> It is really not hard to set it up. I am using a vanilla ssh (rather than
>> putty) and that works fine all the time...
>>
>> Uwe Ligges
>
>
> Ditto here. I am using ssh non commercial version with tortoise on Vista,
> and I don't recall any problems setting it up. R-forge works perfectly fine
> with windows and tortoise in my experience.
>
> Is your putty/ssh working? Can you access other machines with it? I do
> recall ssh can be a bit fussy.
>
> David Scott
>
>>
>>
>> On 27.03.2010 18:31, Gabor Grothendieck wrote:
>>>
>>> s getting commits to R-Forge to work from
>>> Windows. ?The entire system is really geared to UNIX. ?It took me a
>>> couple of days of trial and error (since you have to wait 20 minutes
>>> for each try) before I got it working. ?Although I did get it to work,
>>> I ultimately decided to host all my packages on googlecode.
>>> googlecode is extremely easy to use from Windows and does not require
>>> any public/private key, pageant, etc. ?e.g.
>>> http://sqldf.googlecode.com. ?If you already have TortoiseSVN and know
>>> how to use it then you can probably set up a googlecode site in
>>> literally 5 minutes.
>>>
>>> One other possibility. ?I think there is a way to host your project on
>>> googlecode but still have it mirrored on R-forge so from your users'
>>> viewpoint its the same as if it were on R-Forge but you can use the
>>> simpler googlecode site. ?In that case you might not need to set up
>>> commits on R-Forge since you would do all your commits through
>>> googlecode (depending on how it works) but I have not seen good
>>> documentation on how to do this.
>>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>
> --
> _________________________________________________________________
> David Scott ? ? Department of Statistics
> ? ? ? ? ? ? ? ?The University of Auckland, PB 92019
> ? ? ? ? ? ? ? ?Auckland 1142, ? ?NEW ZEALAND
> Phone: +64 9 923 5055, or +64 9 373 7599 ext 85055
> Email: ?d.scott at auckland.ac.nz, ?Fax: +64 9 373 7018
>
> Director of Consulting, Department of Statistics
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From bergarog at gmail.com  Mon Mar 29 13:56:14 2010
From: bergarog at gmail.com (Roger Bergande)
Date: Mon, 29 Mar 2010 13:56:14 +0200
Subject: [Rd] .Call and .C arguments
In-Reply-To: <761A199DCD7BD14189945879D9680183044A6F5E@NS5118.swiss.group4net.com>
References: <761A199DCD7BD14189945879D9680183044A6F5E@NS5118.swiss.group4net.com>
Message-ID: <6fbd4c321003290456t44dc0b05td0243e34ae14cdee@mail.gmail.com>

---------- Forwarded message ----------
From: Roger.Bergande at swisslife.ch
Date: Mon, 29 Mar 2010 13:51:12 +0200
Subject: .Call and .C arguments
To: bergarog at gmail.com

Dear List



My question is about .C and .Call



I was experimenting with the .C and .Call interface as I came across the
following behaviour.

The passed values are not the same in C.  I 'm calling a function in C
with the argument as.double(1204.245) but in the debug mode in C the
value has changed to 1204.2449999999999999.



Is there a way to pass the arguments differently?



I'm using Windows and Visual Studio C++ 2005 Express Edition and
R-2.10.1.





Please see the two simple examples to understand the issue.



# C call from R

.C("myroundC",as.double(1204.245))





// C Code



void myroundC(double *Amount){



            *Amount = Rf_fround(*Amount,2);



}



#Return value in R

[[1]]

[1] 1204.24







# C call from R

.Call("myroundCall",as.double(1204.245))



// C Code

SEXP myroundCall(SEXP a){

            double *ap = REAL(a), *ansp;

            SEXP ans;

            PROTECT(ans = allocVector(REALSXP, 1));

            ansp = REAL(ans);

            *ansp = Rf_fround(*ap,2);

            UNPROTECT(1);

            return(ans);

}



#Return value in R

[1] 1204.24



# expected value 1204.25





Thanks a lot for your help.

Best regards

Roger Bergande


From murdoch at stats.uwo.ca  Mon Mar 29 14:20:36 2010
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 29 Mar 2010 08:20:36 -0400
Subject: [Rd] .Call and .C arguments
In-Reply-To: <6fbd4c321003290456t44dc0b05td0243e34ae14cdee@mail.gmail.com>
References: <761A199DCD7BD14189945879D9680183044A6F5E@NS5118.swiss.group4net.com>
	<6fbd4c321003290456t44dc0b05td0243e34ae14cdee@mail.gmail.com>
Message-ID: <4BB09B14.5010509@stats.uwo.ca>

On 29/03/2010 7:56 AM, Roger Bergande wrote:
> ---------- Forwarded message ----------
> From: Roger.Bergande at swisslife.ch
> Date: Mon, 29 Mar 2010 13:51:12 +0200
> Subject: .Call and .C arguments
> To: bergarog at gmail.com
>
> Dear List
>
>
>
> My question is about .C and .Call
>
>
>
> I was experimenting with the .C and .Call interface as I came across the
> following behaviour.
>
> The passed values are not the same in C.  I 'm calling a function in C
> with the argument as.double(1204.245) but in the debug mode in C the
> value has changed to 1204.2449999999999999.
>   

What makes you think those two numbers are different?  See FAQ 7.31.

Duncan Murdoch

>
>
> Is there a way to pass the arguments differently?
>
>
>
> I'm using Windows and Visual Studio C++ 2005 Express Edition and
> R-2.10.1.
>
>
>
>
>
> Please see the two simple examples to understand the issue.
>
>
>
> # C call from R
>
> .C("myroundC",as.double(1204.245))
>
>
>
>
>
> // C Code
>
>
>
> void myroundC(double *Amount){
>
>
>
>             *Amount = Rf_fround(*Amount,2);
>
>
>
> }
>
>
>
> #Return value in R
>
> [[1]]
>
> [1] 1204.24
>
>
>
>
>
>
>
> # C call from R
>
> .Call("myroundCall",as.double(1204.245))
>
>
>
> // C Code
>
> SEXP myroundCall(SEXP a){
>
>             double *ap = REAL(a), *ansp;
>
>             SEXP ans;
>
>             PROTECT(ans = allocVector(REALSXP, 1));
>
>             ansp = REAL(ans);
>
>             *ansp = Rf_fround(*ap,2);
>
>             UNPROTECT(1);
>
>             return(ans);
>
> }
>
>
>
> #Return value in R
>
> [1] 1204.24
>
>
>
> # expected value 1204.25
>
>
>
>
>
> Thanks a lot for your help.
>
> Best regards
>
> Roger Bergande
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From bergarog at gmail.com  Mon Mar 29 15:19:32 2010
From: bergarog at gmail.com (Roger Bergande)
Date: Mon, 29 Mar 2010 15:19:32 +0200
Subject: [Rd] .Call and .C arguments
In-Reply-To: <4BB09B14.5010509@stats.uwo.ca>
References: <761A199DCD7BD14189945879D9680183044A6F5E@NS5118.swiss.group4net.com>
	<6fbd4c321003290456t44dc0b05td0243e34ae14cdee@mail.gmail.com>
	<4BB09B14.5010509@stats.uwo.ca>
Message-ID: <6fbd4c321003290619o55cedb7p1bd79abda2041520@mail.gmail.com>

Thank you Ducan
I'm sorry I wasen't thinking about floating point arithmetic. My
problem has nothing to do with the interface.
Same rounding in R directly..

Thanks for the hint.
Roger


From savicky at cs.cas.cz  Mon Mar 29 15:23:49 2010
From: savicky at cs.cas.cz (Petr Savicky)
Date: Mon, 29 Mar 2010 15:23:49 +0200
Subject: [Rd] .Call and .C arguments
In-Reply-To: <6fbd4c321003290456t44dc0b05td0243e34ae14cdee@mail.gmail.com>
References: <761A199DCD7BD14189945879D9680183044A6F5E@NS5118.swiss.group4net.com>
	<6fbd4c321003290456t44dc0b05td0243e34ae14cdee@mail.gmail.com>
Message-ID: <20100329132349.GB28381@cs.cas.cz>

On Mon, Mar 29, 2010 at 01:56:14PM +0200, Roger Bergande wrote:
...
> The passed values are not the same in C.  I 'm calling a function in C
> with the argument as.double(1204.245) but in the debug mode in C the
> value has changed to 1204.2449999999999999.

I do not see this value printed in the examples below. So, i think
you assume that 1204.245 was changed to 1204.2449999999999999 since
rounding it to 2 digits produces 1204.24. The problem is indeed a rounding
problem, but not when the number is passed to C. The number 1204.245
cannot be represented in double precision exactly. So, already at the
R level is, actually
  formatC(1204.245, digits=20) # [1] "1204.2449999999998909"

See
  http://rwiki.sciviews.org/doku.php?id=misc:r_accuracy
or FAQ 7.31 for more examples.

Petr Savicky.

> 
> Is there a way to pass the arguments differently?
> 
> 
> 
> I'm using Windows and Visual Studio C++ 2005 Express Edition and
> R-2.10.1.
> 
> 
> 
> 
> 
> Please see the two simple examples to understand the issue.
> 
> 
> 
> # C call from R
> 
> .C("myroundC",as.double(1204.245))
> 
> 
> 
> 
> 
> // C Code
> 
> 
> 
> void myroundC(double *Amount){
> 
> 
> 
>             *Amount = Rf_fround(*Amount,2);
> 
> 
> 
> }
> 
> 
> 
> #Return value in R
> 
> [[1]]
> 
> [1] 1204.24
> 
> 
> 
> 
> 
> 
> 
> # C call from R
> 
> .Call("myroundCall",as.double(1204.245))
> 
> 
> 
> // C Code
> 
> SEXP myroundCall(SEXP a){
> 
>             double *ap = REAL(a), *ansp;
> 
>             SEXP ans;
> 
>             PROTECT(ans = allocVector(REALSXP, 1));
> 
>             ansp = REAL(ans);
> 
>             *ansp = Rf_fround(*ap,2);
> 
>             UNPROTECT(1);
> 
>             return(ans);
> 
> }
> 
> 
> 
> #Return value in R
> 
> [1] 1204.24
> 
> 
> 
> # expected value 1204.25
> 
> 
> 
> 
> 
> Thanks a lot for your help.
> 
> Best regards
> 
> Roger Bergande
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From pgilbert at bank-banque-canada.ca  Mon Mar 29 17:15:23 2010
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 29 Mar 2010 11:15:23 -0400
Subject: [Rd] Using SVN + SSH on windows
In-Reply-To: <59d7961d1003270947l1f828f5alfd7b7f2195702b22@mail.gmail.com>
References: <4BAE124D.6000406@u-paris10.fr>
	<59d7961d1003270947l1f828f5alfd7b7f2195702b22@mail.gmail.com>
Message-ID: <D611103AA7EE3B4DAE7F7D49C72B291A0252779A@EXMAIL2.bocad.bank-banque-canada.ca>

...
>> I try several things: if I do
>> 'svn://christophe at svn.r-forge.r-project.org/svnroot/kml3d', I do
>manage to
>> download the project. But then, I do not manage to upload some
>modification.
>
>All looks ok, but I think you are using the wrong protocol.  It should
>be 'svn+ssh' for *commits*, i.e.
>
>svn+ssh://christophe at svn.r-forge.r-project.org/svnroot/kml3d
...

(If this was already mentioned I missed it.) If you first check out with
svn:// I find it relatively difficult to commit using a different
protocol.  It may be possible, but, if you intend to commit, I think it
is much easier if you check out using svn+ssh://  so you can then commit
without specifying the protocol. As others mention, to simplify you can
get the checkout and commit working without a key and pageant first. It
is pretty solid once it is working.

Paul


====================================================================================

La version fran?aise suit le texte anglais.

------------------------------------------------------------------------------------

This email may contain privileged and/or confidential information, and the Bank of
Canada does not waive any related rights. Any distribution, use, or copying of this
email or the information it contains by other than the intended recipient is
unauthorized. If you received this email in error please delete it immediately from
your system and notify the sender promptly by email that you have done so. 

------------------------------------------------------------------------------------

Le pr?sent courriel peut contenir de l'information privil?gi?e ou confidentielle.
La Banque du Canada ne renonce pas aux droits qui s'y rapportent. Toute diffusion,
utilisation ou copie de ce courriel ou des renseignements qu'il contient par une
personne autre que le ou les destinataires d?sign?s est interdite. Si vous recevez
ce courriel par erreur, veuillez le supprimer imm?diatement et envoyer sans d?lai ?
l'exp?diteur un message ?lectronique pour l'aviser que vous avez ?limin? de votre
ordinateur toute copie du courriel re?u.

From tobias.verbeke at openanalytics.eu  Mon Mar 29 21:52:16 2010
From: tobias.verbeke at openanalytics.eu (Tobias Verbeke)
Date: Mon, 29 Mar 2010 21:52:16 +0200
Subject: [Rd] Using SVN + SSH on windows
In-Reply-To: <D611103AA7EE3B4DAE7F7D49C72B291A0252779A@EXMAIL2.bocad.bank-banque-canada.ca>
References: <4BAE124D.6000406@u-paris10.fr>	<59d7961d1003270947l1f828f5alfd7b7f2195702b22@mail.gmail.com>
	<D611103AA7EE3B4DAE7F7D49C72B291A0252779A@EXMAIL2.bocad.bank-banque-canada.ca>
Message-ID: <4BB104F0.4020308@openanalytics.eu>

Paul Gilbert wrote:
> ...
>>> I try several things: if I do
>>> 'svn://christophe at svn.r-forge.r-project.org/svnroot/kml3d', I do
>> manage to
>>> download the project. But then, I do not manage to upload some
>> modification.
>>
>> All looks ok, but I think you are using the wrong protocol.  It should
>> be 'svn+ssh' for *commits*, i.e.
>>
>> svn+ssh://christophe at svn.r-forge.r-project.org/svnroot/kml3d
> ...
> 
> (If this was already mentioned I missed it.) If you first check out with
> svn:// I find it relatively difficult to commit using a different
> protocol.  It may be possible, but, if you intend to commit, I think it
> is much easier if you check out using svn+ssh://  so you can then commit
> without specifying the protocol. As others mention, to simplify you can
> get the checkout and commit working without a key and pageant first. It
> is pretty solid once it is working.

An alternative not yet mentioned in this thread would be
to use an IDE which offers strong svn support (such as
Eclipse + Subclipse). If one remembers to configure it to
use the pure Java (SVNKit) interface, it works
well with R-Forge on many platforms (including Windows).

Best,
Tobias


From weigand.stephen at gmail.com  Tue Mar 30 06:35:31 2010
From: weigand.stephen at gmail.com (Stephen Weigand)
Date: Mon, 29 Mar 2010 22:35:31 -0600
Subject: [Rd] Small typo in abline.R
Message-ID: <bc47d3331003292135h56a339a3hbeb1bbe8daee638d@mail.gmail.com>

I found a small typo in abline.R where the line:

   warning("only using the first two of ",p, "regression coefficients")

should have a space before the word 'regression'.

Thanks,

Stephen


From ripley at stats.ox.ac.uk  Tue Mar 30 07:11:17 2010
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 30 Mar 2010 06:11:17 +0100 (BST)
Subject: [Rd] Small typo in abline.R
In-Reply-To: <bc47d3331003292135h56a339a3hbeb1bbe8daee638d@mail.gmail.com>
References: <bc47d3331003292135h56a339a3hbeb1bbe8daee638d@mail.gmail.com>
Message-ID: <alpine.LFD.2.00.1003300604340.4988@gannet.stats.ox.ac.uk>

On Mon, 29 Mar 2010, Stephen Weigand wrote:

> I found a small typo in abline.R where the line:
>
>   warning("only using the first two of ",p, "regression coefficients")
>
> should have a space before the word 'regression'.

Thank you, but this should really be (for translation purposes)

warning(gettextf("only using the first two of %d regression coefficients", p), domain = NA)

and messages are frozen in pre-2.11.0 as we are in the translation 
window.  So the correction won't appear for a while.

>
> Thanks,
>
> Stephen
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From skranz at uni-bonn.de  Mon Mar 29 21:34:56 2010
From: skranz at uni-bonn.de (Sebastian Kranz)
Date: Mon, 29 Mar 2010 21:34:56 +0200
Subject: [Rd] Suggestion: Adding quick rowMin and rowMax functions to base
	package
Message-ID: <4BB100E0.3010201@uni-bonn.de>

Hi,

I wonder whether similarly to the very quick rowSums and colSums 
functions in the base package, one could add quick functions that 
calculate the min or max over rows / cols in a matrix. While 
apply(x,1,min) works, I found out by profiling a program of mine that it 
is rather slow for matrices with a very large number of rows. A quick 
functionality seems to be already there in the functions pmax and pmin, 
but it is rather cumbersume to apply them to all columns of a matrix (if 
one does not know how many columns the matrix has).  Below, I have some 
code that shows a very unelegant implementation that illustrates 
possible speed gains if apply could be avoided:

rowMin = function(x) {
    # Construct a call pmin(x[,1],x[,2],...x[,NCOL(x)])
     code = paste("x[,",1:(NCOL(x)),"]",sep="",collapse=",")
     code = paste("pmin(",code,")")
     return(eval(parse(text=code)))
}

# Speed comparison: Taking rowMin of a 1,000,000 x 10 matrix
x = matrix(rnorm(1e7),1e6,10)

# The traditional apply method
y=apply(x,1,min) # Runtime ca. 12 seconds

# My unelegant rowMin function
z=rowMin(x) # Runtime ca 0.5 seconds

Of course, the way the function rowMin is constructed is highly 
ineffective if the matrix x has many columns, but maybe there is a 
simple way to adapt the code from pmin and pmax to create quick rowMin, 
rowMax,... functions. I don't know whether it is worth the effort, but I 
guess taking minima and maxima over rows is a common task.

Best wishes,
Sebastian


From nabila.salmi at orange-ftgroup.com  Tue Mar 30 10:19:38 2010
From: nabila.salmi at orange-ftgroup.com (Nabila Salmi)
Date: Tue, 30 Mar 2010 10:19:38 +0200
Subject: [Rd] Trouble in using rJava
Message-ID: <FTRDMEL10ZmcK8r6beU00000ed3@ftrdmel10.rd.francetelecom.fr>

Hello,

I'm using rJava and JRI to call R scripts from my Java code, but my 
scripts are sometimes executed, and very often they don't run throwing a 
Java exception.
I'm using a  2.7 version of R, with rJava 0.8.4 and Java Sun 1.6.

Somebody can help me please ??

Thank you very much,

Nabila


From hb at stat.berkeley.edu  Tue Mar 30 10:33:44 2010
From: hb at stat.berkeley.edu (Henrik Bengtsson)
Date: Tue, 30 Mar 2010 10:33:44 +0200
Subject: [Rd] Suggestion: Adding quick rowMin and rowMax functions to
	base package
In-Reply-To: <4BB100E0.3010201@uni-bonn.de>
References: <4BB100E0.3010201@uni-bonn.de>
Message-ID: <59d7961d1003300133g1fdff6fdg7322b26d8ee896f4@mail.gmail.com>

See rowMins(), rowMaxs() and rowRanges() in matrixStats (on CRAN).

The matrixStats package was created for the purpose of providing such
row*/col*() methods.  First the functionality is provided, then the
methods are optimized for speed and memory, e.g. vectorizing,
implementing in native code, and utilizing other fast existing
functions.  Some methods have already been optimized this way.  When
mature, these may be suggested to be part of the default R
distribution.

Benchmarking reports, and contributions of code and redundancy are
welcome.  Testing the code under many different conditions is
critical, e.g. missing values or not, infinite values or not, zero,
one or many columns/rows, ...

/Henrik

PS. The rowMaxs() etc does not utilize pmax(); didn't know of it.


On Mon, Mar 29, 2010 at 9:34 PM, Sebastian Kranz <skranz at uni-bonn.de> wrote:
> Hi,
>
> I wonder whether similarly to the very quick rowSums and colSums functions
> in the base package, one could add quick functions that calculate the min or
> max over rows / cols in a matrix. While apply(x,1,min) works, I found out by
> profiling a program of mine that it is rather slow for matrices with a very
> large number of rows. A quick functionality seems to be already there in the
> functions pmax and pmin, but it is rather cumbersume to apply them to all
> columns of a matrix (if one does not know how many columns the matrix has).
> ?Below, I have some code that shows a very unelegant implementation that
> illustrates possible speed gains if apply could be avoided:
>
> rowMin = function(x) {
> ? # Construct a call pmin(x[,1],x[,2],...x[,NCOL(x)])
> ? ?code = paste("x[,",1:(NCOL(x)),"]",sep="",collapse=",")
> ? ?code = paste("pmin(",code,")")
> ? ?return(eval(parse(text=code)))
> }
>
> # Speed comparison: Taking rowMin of a 1,000,000 x 10 matrix
> x = matrix(rnorm(1e7),1e6,10)
>
> # The traditional apply method
> y=apply(x,1,min) # Runtime ca. 12 seconds
>
> # My unelegant rowMin function
> z=rowMin(x) # Runtime ca 0.5 seconds
>
> Of course, the way the function rowMin is constructed is highly ineffective
> if the matrix x has many columns, but maybe there is a simple way to adapt
> the code from pmin and pmax to create quick rowMin, rowMax,... functions. I
> don't know whether it is worth the effort, but I guess taking minima and
> maxima over rows is a common task.
>
> Best wishes,
> Sebastian
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From romain at r-enthusiasts.com  Tue Mar 30 10:35:16 2010
From: romain at r-enthusiasts.com (Romain Francois)
Date: Tue, 30 Mar 2010 10:35:16 +0200
Subject: [Rd] Trouble in using rJava
In-Reply-To: <FTRDMEL10ZmcK8r6beU00000ed3@ftrdmel10.rd.francetelecom.fr>
References: <FTRDMEL10ZmcK8r6beU00000ed3@ftrdmel10.rd.francetelecom.fr>
Message-ID: <4BB1B7C4.9060401@r-enthusiasts.com>

Hello,

Please don't post in multiple mailing lists. (this does not improve your 
chances of getting an answer). I think the best mailing list for this 
question (although see below) is : 
http://mailman.rz.uni-augsburg.de/mailman/listinfo/stats-rosuda-devel

Le 30/03/10 10:19, Nabila Salmi a ?crit :
>
> Hello,
>
> I'm using rJava and JRI to call R scripts from my Java code, but my
> scripts are sometimes executed, and very often they don't run throwing a
> Java exception.
> I'm using a 2.7 version of R, with rJava 0.8.4 and Java Sun 1.6.
>
> Somebody can help me please ??
>
> Thank you very much,
>
> Nabila

Even if someone wants to help you, how would they ? Your question is 
very vague.

R version 2.7 does not exist. If we assume you mean 2.7.2, this has been 
released in almost two years ago, in august 2008. In the meantime, these 
versions of R have been released : 2.8.0, 2.8.1, 2.9.0, 2.9.1, 2.9.2, 
2.10.0. Can you try to use the current version of R and see if this fix 
your vague problem.

Romain

-- 
Romain Francois
Professional R Enthusiast
+33(0) 6 28 91 30 30
http://romainfrancois.blog.free.fr
|- http://tr.im/OIXN : raster images and RImageJ
|- http://tr.im/OcQe : Rcpp 0.7.7
`- http://tr.im/O1wO : highlight 0.1-5


From guido.garcia.bernardo at gmail.com  Tue Mar 30 11:44:26 2010
From: guido.garcia.bernardo at gmail.com (=?ISO-8859-1?Q?Guido_Garc=EDa_Bernardo?=)
Date: Tue, 30 Mar 2010 11:44:26 +0200
Subject: [Rd] [rJava] Trouble in using rJava
In-Reply-To: <FTRDMEL10ZmcK8r6beU00000ed3@ftrdmel10.rd.francetelecom.fr>
References: <FTRDMEL10ZmcK8r6beU00000ed3@ftrdmel10.rd.francetelecom.fr>
Message-ID: <c1f282ef1003300244t4975e183nf7d8e2f62bf060e@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-devel/attachments/20100330/2ade1b24/attachment.pl>

From stefan.theussl at wu.ac.at  Tue Mar 30 14:17:13 2010
From: stefan.theussl at wu.ac.at (Stefan Theussl)
Date: Tue, 30 Mar 2010 14:17:13 +0200
Subject: [Rd] Possible improvements/clarifications for R-forge (Was: Re:
 Using SVN + SSH on windows)
In-Reply-To: <4BAF91D9.6000504@u-paris10.fr>
References: <59d7961d1003280934jc914fa6i253a1aa34b93477e@mail.gmail.com>
	<4BAF889D.5060109@statistik.tu-dortmund.de>
	<4BAF91D9.6000504@u-paris10.fr>
Message-ID: <4BB1EBC9.8020100@wu.ac.at>

On 03/28/2010 07:28 PM, Christophe Genolini wrote:
> Wahou! I did not plan to start such a debate...
>>> It is really not hard to set it up. I am using a vanilla ssh (rather 
>>> than putty) and that works fine all the time...
> The problem is not how hard or easy it is, the problem is how time 
> consuming it is.
>
> I am pretty sur that I will manage to make it work. But when? I 
> allready lose three hours Friday and two hour on saturday... That's 
> definitly too much. Because I am not an engeneer in computing, I am a 
> researcher. To make my research, I have to be expert in longitudinal 
> data, in clustering, in anorexia, I have to speak english, I have to 
> know R, and C, and package managing, and LaTeX, and gimp, and... 
> and... and...
> There is so many things to know... I can not be expert in all.
>
> So I do not have time to (and I do not want to) explore all the ssh 
> subtulties... Worse, I have a project, I manage to find some people 
> that want to work on the projet (but that also have a lot of other 
> staff to do), I do not want them to give up because it will take to 
> much time for them to make ssh run.
>
> Generalier, I think that anything should be done to make tools easy to 
> use for non-expert, because more and more R user are occasional user. 
> They are not experts, they don't want to become expert. They are just 
> feed up to pay a lot of money for SPSS or Stata... But I guess this is 
> another debate.
As far as R-Forge is concerned, developers don't need to know how SSH 
works. Only the SVN client needs to be aware of it. One can always use 
passwords, private/public key authentication is not necessary here. 
Entering passwords multiple times is the only drawback of the keyless 
approach. I think question 5 is answered. Now, an attempt to answer the 
other questions:

> Christophe
>
>> I wonder why nobody included the R-forge maintainer in this thread so 
>> far. Let me add Stefan now.
>>
>> Best wishes,
>> Uwe
>>
>>
>>
>> On 28.03.2010 18:34, Henrik Bengtsson wrote:
>>> Hi,
>>>
>>> first, r-forge.r-project.org is filling a need and provides a great
>>> service to the community.  Please read this thread as sincere feedback
>>> for making it even better, not as a complaint.  I fully understand
>>> that r-forge is ran by limited resources and on a volunteer basis.
>>> I'll list some points about r-forge that I think could be
>>> improved/clarified.  Not expecting anything, just sharing my
>>> experience.
>>>
>>>
>>> 1. Part of the R-forge services runs on a schedule, e.g. building and
>>> checking packages.  As a user you do not really know when this
>>> happens.
>>>
>>> Some of this is documented at http://site.r-forge.r-project.org/, but
>>> not everything, e.g. as seen in another message on r-devel, the cron
>>> job for updating SSH keys is not specified.  Moreover, all static
>>> documentation tends to become outdated.  In other words, as a user I
>>> am not certain that http://site.r-forge.r-project.org/ is up to date.
>>>
>>> Providing some kind of online log of what the r-forge servers are
>>> doing would help the user to plan, troubleshoot etc.  Right now there
>>> are too many degrees of freedom to figure out what and when things
>>> happens.  The Bioconductor project provides a small log summary/status
>>> with timestamps of the last run, cf. small box at the top of
>>> http://bioconductor.org/checkResults/2.6/bioc-LATEST/.
I have to admit, there may be documentation for some part of the R-Forge 
system missing. But a) Section 3.2. of the R-Forge manual actually 
specifies very clearly when the cron job for updating SSH keys is run 
(namely once every full hour), b) the schedule at 
http://site.r-forge.r-project.org/ is usually up-to-date and c) I'm open 
to work with you together on a fancy status report similar to the 
bioconductor project.
>>>
>>>
>>>
>>> 2. It is not possible to check the R CMD build/check log files for
>>> other people's packages.
>>>
>>> The log files are considered private to the project members.  This
>>> means that I cannot troubleshoot other packages part of projects that
>>> I am not a member.  This limits my chances to troubleshoot problems I
>>> have when my package depends on an external package.  It also limits
>>> my chances to contribute with troubleshooting/bug reports for other
>>> packages.  This is one of the features that makes the Bioconductor
>>> repository a success. Making these log files public would improve lots
>>> of things.
This was based on historic reasons. It seems indeed reasonable to drop 
this limitation. From now on, only the "Submit to CRAN button" is hidden 
from non-members of a project.

>>>
>>>
>>> 3. For some OSes, the log files for the build and check of packages 
>>> are missing.
>>>
>>> For instance, none of my packages has log files for Linux x86_32, e.g.
>>> "Logfile for R.batch not available.".  It is not clear if this is
>>> because I made something wrong, or this is the flavor of the day, or a
>>> permanent error.  (I looks permanent for "Linux x86_32", but not sure
>>> about the others).
This is because the 32bit system has been replaced and is not set up 
correctly yet. I hope we can fix this soon.
>>>
>>> Being able to access the r-forge server logs, similar to the
>>> Bioconductor status box, would help.
Agreed. Somebody needs to write code then ...
>>>
>>>
>>>
>>> 4. It is not clear how dependencies are dealt with in the 
>>> build/check process.
>>>
>>> If I have r-forge packages A v1.0.0, B v1.0.0, and C v1.0.0, and
>>> package A depends on B (>= 1.0.0) and package B depends on C (>=
>>> 1.0.0), when are these packages built?  Are they built in
>>> lexicographic order or in some optimized order?  For instance, if I
>>> bump the versions of the packages and the dependencies to B (>= 1.1.0)
>>> and C (>= 1.1.0), when will package A be build and available?  If
>>> there is a lexicographic build/cron cycle, will it take three cycles?
>>> Will A and B fail in the first cycle when only C is build.  Then in
>>> the 2nd cycle, will A fail and B and C build, and in the 3rd cycle
>>> also A will build?
>>>
>>> Again/thus, when my package A is not available, is that because I did
>>> something wrong, the cron job had hiccups is delayed, or something
>>> else.  Seeing the full server logs or other status reports would help.
See http://site.r-forge.r-project.org/. Packages are built in an, what 
you would call, "optimized" order. The aim is to built all packages in 
one cycle. But, there are far more constraints than just dependencies on 
specific version numbers of packages. One might also ask: What if 
package B is on CRAN *and* on R-Forge? Which one will it take? What if 
package C is on Bioconductor? Eventually, we will answer hopefully 
almost all of these questions. We are working on this at the moment.
>>>
>>>
>>>
>>> 5. No https access - only svn+ssh access with private/public keys
>>>
>>> The svn+ssh protocol for SVN commits is a show stopper for people who
>>> never used SVN or ssh authentication keys before.  It is easy for
>>> someone who knows how it should work, but quite hard to troubleshoot
>>> if you don't know what to expect.  It is hard to help someone get
>>> started without being next to them on their computer.  This makes it
>>> hard to convince people who "don't really" care to start using SVN and
>>> r-forge (which would improve overall quality in the long run).
>>> Supporting SVN commits over https would lower this threshold.
>>>
>>>
>>>
>>> 6. The r-forge forum is not really active.
>>>
>>> There is a forum at https://r-forge.r-project.org/forum/?group_id=34,
>>> but it is not very active and several questions are unanswered.  In
>>> order catch momentum, I think posting r-forge questions to r-devel
>>> would work better and reach more people that can help out.  (This is
>>> why this is posted to r-devel).
I don't think r-devel is the right list for asking questions about 
R-Forge. I always recommend using the forum.

Best,
Stefan
>>>
>>>
>>> Cheers,
>>>
>>> Henrik
>>>
>>> On Sun, Mar 28, 2010 at 5:45 AM, David 
>>> Scott<d.scott at auckland.ac.nz>  wrote:
>>>> Uwe Ligges wrote:
>>>>>
>>>>> It is really not hard to set it up. I am using a vanilla ssh 
>>>>> (rather than
>>>>> putty) and that works fine all the time...
>>>>>
>>>>> Uwe Ligges
>>>>
>>>>
>>>> Ditto here. I am using ssh non commercial version with tortoise on 
>>>> Vista,
>>>> and I don't recall any problems setting it up. R-forge works 
>>>> perfectly fine
>>>> with windows and tortoise in my experience.
>>>>
>>>> Is your putty/ssh working? Can you access other machines with it? I do
>>>> recall ssh can be a bit fussy.
>>>>
>>>> David Scott
>>>>
>>>>>
>>>>>
>>>>> On 27.03.2010 18:31, Gabor Grothendieck wrote:
>>>>>>
>>>>>> s getting commits to R-Forge to work from
>>>>>> Windows.  The entire system is really geared to UNIX.  It took me a
>>>>>> couple of days of trial and error (since you have to wait 20 minutes
>>>>>> for each try) before I got it working.  Although I did get it to 
>>>>>> work,
>>>>>> I ultimately decided to host all my packages on googlecode.
>>>>>> googlecode is extremely easy to use from Windows and does not 
>>>>>> require
>>>>>> any public/private key, pageant, etc.  e.g.
>>>>>> http://sqldf.googlecode.com.  If you already have TortoiseSVN and 
>>>>>> know
>>>>>> how to use it then you can probably set up a googlecode site in
>>>>>> literally 5 minutes.
>>>>>>
>>>>>> One other possibility.  I think there is a way to host your 
>>>>>> project on
>>>>>> googlecode but still have it mirrored on R-forge so from your users'
>>>>>> viewpoint its the same as if it were on R-Forge but you can use the
>>>>>> simpler googlecode site.  In that case you might not need to set up
>>>>>> commits on R-Forge since you would do all your commits through
>>>>>> googlecode (depending on how it works) but I have not seen good
>>>>>> documentation on how to do this.
>>>>>>
>>>>>
>>>>> ______________________________________________
>>>>> R-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>
>>>>
>>>> -- 
>>>> _________________________________________________________________
>>>> David Scott     Department of Statistics
>>>>                 The University of Auckland, PB 92019
>>>>                 Auckland 1142,    NEW ZEALAND
>>>> Phone: +64 9 923 5055, or +64 9 373 7599 ext 85055
>>>> Email:  d.scott at auckland.ac.nz,  Fax: +64 9 373 7018
>>>>
>>>> Director of Consulting, Department of Statistics
>>>>
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>
>>
>


From martin.becker at mx.uni-saarland.de  Tue Mar 30 17:17:36 2010
From: martin.becker at mx.uni-saarland.de (Martin Becker)
Date: Tue, 30 Mar 2010 17:17:36 +0200
Subject: [Rd] hist.default()$density
Message-ID: <4BB21610.90407@mx.uni-saarland.de>

Dear developers,

the current implementation of hist.default() calculates 'density' (and 
'intensities') as
  dens <- counts/(n*h)
where h has been calculated before as
  h <- diff(fuzzybreaks)
which results in 'fuzzy' values for the density, see e.g.

 > tmp <- hist(1:10,breaks=c(-2.5,2.5,7.5,12.5),plot=FALSE)
 > print(tmp$density,digits=15)
[1] 0.0399999920000016 0.1000000000000000 0.0600000000000000

Since hist.default()$breaks are not the fuzzy breaks used for the 
calculation of dens, the sum of the bins' area is significantly 
different from 1 in many cases, see e.g.

 > print(sum(tmp$density*diff(tmp$breaks)),digits=15)
[1] 0.999999960000008

Is this intended, or should the calculation of dens read
  dens <- counts/(n*diff(breaks))
instead (or should hist.default()$breaks return the fuzzy breaks)?

Best wishes
   Martin


-- 
Dr. Martin Becker
Statistics and Econometrics
Saarland University
Campus C3 1, Room 206
66123 Saarbruecken
Germany


From wdunlap at tibco.com  Wed Mar 31 21:04:42 2010
From: wdunlap at tibco.com (William Dunlap)
Date: Wed, 31 Mar 2010 12:04:42 -0700
Subject: [Rd] Should as.complex(NaN) -> NA?
Message-ID: <77EB52C6DD32BA4D87471DCD70C8D70002B76B26@NA-PA-VBE03.na.tibco.com>

I'm having trouble grokking complex NaN's.
This first set examples using complex(re=NaN,im=NaN)
give what I expect
  > Re(complex(re=NaN, im=NaN))
  [1] NaN
  > Im(complex(re=NaN, im=NaN))
  [1] NaN
  > Arg(complex(re=NaN, im=NaN))
  [1] NaN
  > Mod(complex(re=NaN, im=NaN))
  [1] NaN
  > abs(complex(re=NaN, im=NaN))
  [1] NaN
and so do the following
  > Re(complex(re=1, im=NaN))
  [1] 1
  > Im(complex(re=1, im=NaN))
  [1] NaN
  > Re(complex(re=NaN, im=1))
  [1] NaN
  > Im(complex(re=NaN, im=1))
  [1] 1
but I don't have a good mental model that explains
why the following produce NA instead of NaN.
  > as.complex(NaN)
  [1] NA
  > Im(complex(modulus=NaN, argument=NaN))
  [1] NA
  > Re(complex(modulus=NaN, argument=NaN))
  [1] NA
  > Re(1i * NaN)
  [1] NA
  > Im(1i * NaN)
  [1] NA
  > Re(NaN + 1i)
  [1] NA
  > Im(NaN + 1i)
  [1] NA

It may be that if as.complex(NaN), and its C equivalent,
were changed to return complex(re=NaN,im=NaN) then the
arithmetic examples would return NaN.  Is there a
better way for me to model how NaN's in complex numbers
should work or is this a bug?

While I was looking into this I noticed a bug in str():
  > str(NA_complex_)
  Error in FUN(X[[1L]], ...) : subscript out of bounds

Bill Dunlap
Spotfire, TIBCO Software
wdunlap tibco.com 


From cgenolin at u-paris10.fr  Wed Mar 31 22:12:47 2010
From: cgenolin at u-paris10.fr (Christophe Genolini)
Date: Wed, 31 Mar 2010 22:12:47 +0200
Subject: [Rd] Difference Linux / Windows
Message-ID: <4BB3ACBF.8040409@u-paris10.fr>

Hi the list,
I am writing a package that happen to not be compatible with linux 
because I did not know that the function "savePlot" was available only 
on windows. Is there a list of "incompatible" function? How can I get 
this kind of information?
Thanks
Christophe


